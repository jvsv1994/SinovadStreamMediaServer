var _C=Object.defineProperty,vC=Object.defineProperties,yC=Object.getOwnPropertyDescriptors,Y0=Object.getOwnPropertySymbols,EC=Object.prototype.hasOwnProperty,TC=Object.prototype.propertyIsEnumerable,$0=Math.pow,z0=(kn,Ge,w)=>Ge in kn?_C(kn,Ge,{enumerable:!0,configurable:!0,writable:!0,value:w}):kn[Ge]=w,go=(kn,Ge)=>{for(var w in Ge||(Ge={}))EC.call(Ge,w)&&z0(kn,w,Ge[w]);if(Y0)for(var w of Y0(Ge))TC.call(Ge,w)&&z0(kn,w,Ge[w]);return kn},po=(kn,Ge)=>vC(kn,yC(Ge));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6407:(kn,Ge,w)=>{"use strict";w.d(Ge,{I:()=>j});var i=w(9808),e=w(2382),C=w(5782),R=w(3060),U=w(4893);let j=(()=>{class F{}return F.\u0275fac=function(h){return new(h||F)},F.\u0275mod=U.oAB({type:F}),F.\u0275inj=U.cJS({imports:[[i.ez,e.u5,C.m,e.UX,R.G]]}),F})()},4322:(kn,Ge,w)=>{"use strict";w.d(Ge,{P9:()=>i,DD:()=>C,Ln:()=>R,yw:()=>F,O5:()=>D});var i=(()=>{return(h=i||(i={}))[h.MediaServerState=1]="MediaServerState",h[h.MediaType=2]="MediaType",h[h.VideoTransmissionType=3]="VideoTransmissionType",h[h.TranscoderPreset=4]="TranscoderPreset",h[h.IconTypes=5]="IconTypes",i;var h})(),C=(()=>{return(h=C||(C={}))[h.Movie=1]="Movie",h[h.TvSerie=2]="TvSerie",C;var h})(),R=(()=>{return(h=R||(R={}))[h.None=1]="None",h[h.MPEGDASH=2]="MPEGDASH",h[h.HLS=3]="HLS",R;var h})(),F=(()=>{return(h=F||(F={}))[h.GET=0]="GET",h[h.POST=1]="POST",h[h.PUT=2]="PUT",h[h.DELETE=3]="DELETE",F;var h})(),D=(()=>{return(h=D||(D={}))[h.Empty=0]="Empty",h[h.Generated=1]="Generated",h[h.Initialized=2]="Initialized",h[h.LoadedMetada=3]="LoadedMetada",h[h.LoadedData=4]="LoadedData",D;var h})()},4522:(kn,Ge,w)=>{"use strict";w.d(Ge,{j:()=>y});var i=w(4893),e=w(4857),C=w(4322),R=w(2571),U=w(520),j=w(1085),F=w(2313),D=w(2330),h=w(9808),u=w(7065);function p(S,E){if(1&S&&(i.TgZ(0,"div",5),i.TgZ(1,"div"),i._uU(2),i.qZA(),i.qZA()),2&S){const A=i.oxw();i.xp6(2),i.hij(" ",A.title," ")}}function _(S,E){if(1&S&&(i.TgZ(0,"div",27),i.TgZ(1,"div",28),i._UZ(2,"div",29),i.qZA(),i.qZA()),2&S){const A=i.oxw().$implicit,I=i.MAs(2),H=i.oxw(3);i.xp6(1),i.Udp("width",I.clientWidth-8+"px"),i.xp6(1),i.Udp("width",H.getWidthProgressItem(A))}}function b(S,E){if(1&S&&(i.TgZ(0,"div",30),i.TgZ(1,"span"),i._uU(2),i.qZA(),i.qZA()),2&S){const A=i.oxw().$implicit;i.xp6(2),i.Oqu(A.Title)}}function k(S,E){if(1&S&&(i.TgZ(0,"div"),i.TgZ(1,"div",31),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA(),i.qZA()),2&S){const A=i.oxw().$implicit;i.xp6(3),i.AsE("",A.Title," ",A.Subtitle,"")}}function L(S,E){if(1&S){const A=i.EpF();i.TgZ(0,"div",20),i.TgZ(1,"button",21,22),i.NdJ("click",function(){const ee=i.CHM(A).$implicit;return i.oxw(3).onClickItem(ee)}),i._UZ(3,"img",23),i.YNc(4,_,3,4,"ng-template",24),i.qZA(),i.YNc(5,b,3,1,"div",25),i.YNc(6,k,4,2,"div",26),i.qZA()}if(2&S){const A=E.$implicit,I=i.oxw(3);i.xp6(1),i.hYB("id","item_",A.TvSerieId?A.TvSerieId:A.MovieId,"_",A.MediaType,""),i.xp6(2),i.Q6J("src",I.getUrlByItemMovieDataBase(A),i.LSH),i.xp6(1),i.Q6J("ngIf",A.CurrentTime&&A.DurationTime),i.xp6(1),i.Q6J("ngIf",!A.Subtitle),i.xp6(1),i.Q6J("ngIf",A.Subtitle)}}function B(S,E){if(1&S){const A=i.EpF();i.TgZ(0,"section",7),i.TgZ(1,"div",8),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA(),i.TgZ(4,"div",9),i.TgZ(5,"div",10),i.TgZ(6,"div",11,12),i.NdJ("click",function(){i.CHM(A);const H=i.MAs(12),ee=i.MAs(7),fe=i.MAs(18);return i.oxw(2).onClickButtonLeftScroll(H,ee,fe)}),i._UZ(8,"img",13),i.ALo(9,"async"),i.ALo(10,"formatDataPipe"),i.qZA(),i.qZA(),i.TgZ(11,"div",14,15),i.TgZ(13,"div",16,17),i.YNc(15,L,7,6,"ng-template",4),i.qZA(),i.qZA(),i.TgZ(16,"div",10),i.TgZ(17,"div",18,19),i.NdJ("click",function(){i.CHM(A);const H=i.MAs(12),ee=i.MAs(7),fe=i.MAs(18);return i.oxw(2).onClickButtonRightScroll(H,ee,fe)}),i._UZ(19,"img",13),i.ALo(20,"async"),i.ALo(21,"formatDataPipe"),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&S){const A=i.oxw().$implicit;i.MGl("id","section_",A.Id,""),i.xp6(3),i.Oqu(A.Name),i.xp6(5),i.Q6J("src",i.lcZ(9,5,i.xi3(10,7,"scroll-left.png","GetImageURLByKey")),i.LSH),i.xp6(7),i.Q6J("ngForOf",A.ListItems),i.xp6(4),i.Q6J("src",i.lcZ(20,10,i.xi3(21,12,"scroll-right.png","GetImageURLByKey")),i.LSH)}}function O(S,E){if(1&S&&i.YNc(0,B,22,15,"section",6),2&S){const A=E.$implicit;i.Q6J("ngIf",A.ListItems&&A.ListItems.length>0)}}const P=function(S){return{small:S}};let y=(()=>{class S extends e.X{constructor(A,I,H,ee,fe,ue){super(A,ee,fe,ue),this.restProvider=A,this.ref=I,this.http=H,this.events=ee,this.domSanitizer=fe,this.sharedData=ue,this.toggleVideo=new i.vpe,this.showItemView=new i.vpe,this.focus=new i.vpe,this.showLoadingApp=!0,this.itemsGroupList=[],this._window=window}getWidthProgressItem(A){return A.CurrentTime/A.DurationTime*100+"%"}onClickButtonLeftScroll(A,I,H){A.scrollLeft=A.scrollLeft-300,this.verifyIfShoOrHiddenScrollButtons(A,I,H)}onClickButtonRightScroll(A,I,H){A.scrollLeft=A.scrollLeft+300,this.verifyIfShoOrHiddenScrollButtons(A,I,H)}verifyIfShoOrHiddenScrollButtons(A,I,H){I.style.display=A.scrollLeft<=0?"none":"flex",H.style.display=A.scrollWidth==A.scrollLeft+A.offsetWidth?"none":"flex",this.ref.detectChanges()}onInitializeItemsRow(A,I,H){setTimeout(()=>{this.verifyIfShoOrHiddenScrollButtons(A,I,H)},250)}onSelectItem(A){A.scrollIntoView({block:"center"}),this.ref.detectChanges()}getAllProgramsByUser(A,I){this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/GetAllTvProgramsOrganized?userId="+this.sharedData.userData.Id+"&profileId="+this.sharedData.currentProfile.Id+"&searchMovies="+A+"&searchTvSeries="+I).then(ee=>{this.itemsGroupList=ee.Data,this.ref.detectChanges(),this.focus.emit()},ee=>{console.error(ee)})}onClickItem(A){null!=A.CurrentTime&&A.ContinueVideo?this.continueVideoByItem(A):A.MovieId?this.getMovieDetail(A):A.TvSerieId&&this.getTvSerieDetail(A)}continueVideoByItem(A){this.restProvider.executeSinovadApiService(C.yw.GET,A.TvSerieId?"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+A.TvSerieId:"/videos/GetMovieDetail?movieId="+A.MovieId).then(H=>{let ee=H.Data;ee.Item=A;var fe=this.CreateBuilderVideoFromItem(A,ee);this.sharedData.currentVideo=fe,this.toggleVideo.emit(!0),this.ref.detectChanges()},H=>{console.error(H)})}getMovieDetail(A){this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/GetMovieDetail?movieId="+A.MovieId).then(I=>{let H=I.Data;H.Item=A,this.setDataAndShowItemView(H)},I=>{console.error(I)})}getTvSerieDetail(A){this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+A.TvSerieId).then(H=>{let ee=H.Data;ee.Item=A,this.setDataAndShowItemView(ee)},H=>{console.error(H)})}setDataAndShowItemView(A){A.ListSeasons&&A.ListSeasons.length>0&&(A.CurrentSeason=A.ListSeasons[0]),this.showItemView.emit(A)}ngAfterViewInit(){this.sharedData.currentProfile&&(this.currentMediaTypeID==C.DD.Movie?this.getAllProgramsByUser(!0,!1):this.getAllProgramsByUser(this.currentMediaTypeID!=C.DD.TvSerie,!0))}ngOnInit(){}closeVideo(){this.sharedData.currentVideo=void 0,this.toggleVideo.emit(!1),this.ref.detectChanges()}}return S.\u0275fac=function(A){return new(A||S)(i.Y36(R.C),i.Y36(i.sBO),i.Y36(U.eN),i.Y36(j.n),i.Y36(F.H7),i.Y36(D.g))},S.\u0275cmp=i.Xpm({type:S,selectors:[["app-horizontal-item-list"]],inputs:{currentMediaTypeID:"currentMediaTypeID",title:"title"},outputs:{toggleVideo:"toggleVideo",showItemView:"showItemView",focus:"focus"},features:[i.qOj],decls:5,vars:7,consts:[[1,"sinovadclient-principal-section",3,"ngClass"],[1,"sinovad-principal-item-list-container","sinovad-no-cordova"],["class","sinovad-media-title",4,"ngIf"],[1,"sinovad-list-itsinovad-container","sinovad-custom-container"],["ngFor","",3,"ngForOf"],[1,"sinovad-media-title"],["tabindex","0",3,"id",4,"ngIf"],["tabindex","0",3,"id"],[1,"sinovad-list-itsinovad-row-title"],[1,"sinovad-list-itsinovad-row-container"],[2,"width","0px","height","0px"],[1,"sinovad-list-button-scroll-left",3,"click"],["scrollLeftButton",""],[3,"src"],["tabindex","0",1,"sinovad-list-itsinovad-row"],["itemsRowContainer",""],[1,"sinovad-list-itsinovad-content"],["content",""],[1,"sinovad-list-button-scroll-right",3,"click"],["scrollRightButton",""],[1,"sinovad-item-container"],[1,"sinovad-item-button","sinovad-item-button-vertical",3,"id","click"],["itemContainer",""],["referrerpolicy","no-referrer",3,"src"],[3,"ngIf"],["class","sinovad-item-caption-container",4,"ngIf"],[4,"ngIf"],[1,"sinovad-item-progress-bar-absolute-container"],[1,"sinovad-item-progress-bar-container"],[1,"sinovad-item-progress-bar-content"],[1,"sinovad-item-caption-container"],[1,"sinovad-item-title-caption-container"]],template:function(A,I){1&A&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.YNc(2,p,3,1,"div",2),i.TgZ(3,"div",3),i.YNc(4,O,1,1,"ng-template",4),i.qZA(),i.qZA(),i.qZA()),2&A&&(i.Q6J("ngClass",i.VKq(5,P,I.isSmallDevice())),i.xp6(2),i.Q6J("ngIf",I.title),i.xp6(1),i.Udp("height",I.title?"calc(100% - 50px)":"100%"),i.xp6(1),i.Q6J("ngForOf",I.itemsGroupList))},directives:[h.mk,h.O5,h.sg],pipes:[h.Ov,u.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-principal-item-list-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%}.sinovadclient-principal-section[_ngcontent-%COMP%]{width:100%;background:#2d3744;color:#fff;height:100%}.sinovadclient-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:9999;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-media-title[_ngcontent-%COMP%]{padding:10px 0;height:50px;font-size:30px;font-weight:700;font-family:sans-serif;display:flex;align-items:center;border-bottom:1px solid #dedede;margin-left:16px;margin-right:16px}.sinovad-media-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:30px;padding:6px 10px;border-radius:5px;border:none;cursor:pointer;font-size:16px}.sinovadclient-title-section[_ngcontent-%COMP%]{margin:10px 10px 10px 16px;font-size:30px;font-weight:700}.sinovadclient-itsinovad-section[_ngcontent-%COMP%]{margin:10px}.sinovad-item-container[_ngcontent-%COMP%]{padding-right:10px;width:-moz-min-content;width:min-content;margin:6px;border-radius:6px}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#000;font-weight:700;padding-top:10px;text-align:center;font-family:sans-serif}.sinovad-vertical-list-itsinovad-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;overflow-y:auto;overflow-x:hidden}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:center;font-family:sans-serif}.sinovad-item-title-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:left;font-family:sans-serif}.sinovad-item-subtitle-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:400;padding-top:10px;text-align:left;font-family:sans-serif}.sinovad-list-itsinovad-container[_ngcontent-%COMP%]{padding:20px;overflow-x:hidden;overflow-y:auto;outline:none}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-item-button[_ngcontent-%COMP%]{display:block;width:360px;height:210px;color:#000;cursor:pointer;text-align:center;min-width:360px;padding:0;border-radius:unset;border:none;background:transparent}.sinovad-item-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:unset;border-radius:10px;border:4px solid transparent}.sinovad-item-button[_ngcontent-%COMP%]   .sinovad-item-caption[_ngcontent-%COMP%]{position:absolute;margin-top:100px;font-size:20px;color:#fff;font-weight:700}.sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:230px;width:230px;height:310px}.sinovad-item-button[_ngcontent-%COMP%]:hover{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;outline:none}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]{position:relative;width:60px;height:310px;top:6px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:60px;display:none}.sinovad-list-itsinovad-row-title[_ngcontent-%COMP%]{font-size:25px;color:#fff;padding:0;font-weight:700;font-family:sans-serif}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]{width:60px;height:310px;top:6px;right:60px;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:60px;display:none}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover, .sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.2);opacity:.6}.sinovad-item-progress-bar-absolute-container[_ngcontent-%COMP%]{width:0px;height:0px;margin-bottom:9px}.sinovad-item-progress-bar-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#1e1a28;position:relative;margin-top:-9px;margin-left:4px}.sinovad-item-progress-bar-content[_ngcontent-%COMP%]{background-color:red;height:100%}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:block}.sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-left[_ngcontent-%COMP%], .sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-right[_ngcontent-%COMP%]{display:none!important}.small[_ngcontent-%COMP%]   .sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:170px;width:170px;height:220px}.small[_ngcontent-%COMP%]   .sinovad-item-title-caption-container[_ngcontent-%COMP%], .small[_ngcontent-%COMP%]   .sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:14px}.small[_ngcontent-%COMP%]   .sinovad-list-itsinovad-row-title[_ngcontent-%COMP%]{font-size:20px}"]}),S})()},3060:(kn,Ge,w)=>{"use strict";w.d(Ge,{G:()=>U});var i=w(9808),e=w(2382),C=w(5782),R=w(4893);let U=(()=>{class j{}return j.\u0275fac=function(D){return new(D||j)},j.\u0275mod=R.oAB({type:j}),j.\u0275inj=R.cJS({imports:[[i.ez,e.u5,C.m,e.UX]]}),j})()},8348:(kn,Ge,w)=>{"use strict";w.d(Ge,{e:()=>fe});var i=w(4893),e=w(4857),C=w(4322),R=w(2571),U=w(520),j=w(2382),F=w(1085),D=w(2313),h=w(2330),u=w(9808),p=w(7065);const _=["container"];function b(ue,be){if(1&ue&&(i.TgZ(0,"div",9),i.TgZ(1,"span",14),i._uU(2,"Director: "),i.qZA(),i.TgZ(3,"span",15),i._uU(4),i.qZA(),i.qZA()),2&ue){const q=i.oxw(2);i.xp6(4),i.Oqu(q.detail.Directors)}}function k(ue,be){if(1&ue&&(i.TgZ(0,"div",9),i.TgZ(1,"span",14),i._uU(2,"Reparto: "),i.qZA(),i.TgZ(3,"span",15),i._uU(4),i.qZA(),i.qZA()),2&ue){const q=i.oxw(2);i.xp6(4),i.Oqu(q.detail.Actors)}}function L(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"div"),i.TgZ(1,"div"),i.TgZ(2,"button",16),i.NdJ("click",function(){return i.CHM(q),i.oxw(2).continueVideo()}),i._uU(3,"Continuar"),i.qZA(),i.qZA(),i.TgZ(4,"div",17),i._UZ(5,"div",18),i.qZA(),i.TgZ(6,"div",19),i._uU(7),i.qZA(),i.qZA()}if(2&ue){const q=i.oxw(2);i.xp6(5),i.Udp("width",q.getWidthProgressItem(q.lastEpisodeWatched)),i.xp6(2),i.hij(" ",q.lastEpisodeWatched.Subtitle," ")}}function B(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"button",20),i.NdJ("click",function(){return i.CHM(q),i.oxw(3).showVideo()}),i._uU(1,"Ver desde el principio"),i.qZA(),i.TgZ(2,"button",16),i.NdJ("click",function(){return i.CHM(q),i.oxw(3).continueVideo()}),i._uU(3,"Continuar viendo"),i.qZA()}}function O(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"button",21),i.NdJ("click",function(){return i.CHM(q),i.oxw(3).showVideo()}),i._uU(1,"Ver ahora"),i.qZA()}}function P(ue,be){if(1&ue&&(i.YNc(0,B,4,0,"ng-template",2),i.YNc(1,O,2,0,"ng-template",2)),2&ue){const q=i.oxw(2);i.Q6J("ngIf",q.itemUserData),i.xp6(1),i.Q6J("ngIf",!q.itemUserData)}}function y(ue,be){if(1&ue&&(i.TgZ(0,"div",22),i._uU(1),i.qZA()),2&ue){const q=i.oxw(2);i.xp6(1),i.hij(" ",q.detail.Overview," ")}}function S(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"img",36),i.NdJ("error",function(){i.CHM(q),i.oxw();const V=i.MAs(12),de=i.MAs(7),Q=i.MAs(18);return i.oxw(2).onInitializeItemsRow(V,de,Q)}),i.qZA()}}const E=function(ue){return{selected:ue}};function A(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"div",37),i.TgZ(1,"button",38),i.NdJ("click",function(){const de=i.CHM(q).$implicit;return i.oxw(3).onClickSeason(de)}),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA(),i.qZA()}if(2&ue){const q=be.$implicit,se=i.oxw(3);i.xp6(1),i.MGl("id","section_season_",q.SeasonNumber,""),i.Q6J("ngClass",i.VKq(3,E,q.SeasonNumber==se.detail.CurrentSeason.SeasonNumber)),i.xp6(2),i.Oqu(q.Name)}}function I(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"section",39),i.TgZ(1,"button",40),i.NdJ("click",function(){const de=i.CHM(q).$implicit;return i.oxw(3).onClickEpisode(de)}),i.TgZ(2,"div",41),i._UZ(3,"img",6),i.qZA(),i.TgZ(4,"div",42),i.TgZ(5,"div",43),i._uU(6),i.qZA(),i.TgZ(7,"div",44),i._uU(8),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&ue){const q=be.$implicit,se=i.oxw(3);i.hYB("id","section_episode_s",q.SeasonNumber,"_e",q.EpisodeNumber,""),i.xp6(1),i.hYB("id","button_episode_s",q.SeasonNumber,"_e",q.EpisodeNumber,""),i.xp6(2),i.Q6J("src",se.getEpisodeImagePath(q),i.LSH),i.xp6(3),i.AsE(" ",q.EpisodeNumber,". ",q.Name," "),i.xp6(2),i.hij(" ",q.Overview," ")}}function H(ue,be){if(1&ue){const q=i.EpF();i.TgZ(0,"div",23),i.TgZ(1,"div"),i._uU(2," EPISODIOS "),i.qZA(),i.TgZ(3,"div",24),i.YNc(4,S,1,0,"img",25),i.TgZ(5,"div",3),i.TgZ(6,"div",26,27),i.NdJ("click",function(){i.CHM(q);const V=i.MAs(12),de=i.MAs(7),Q=i.MAs(18);return i.oxw(2).onClickButtonLeftScroll(V,de,Q)}),i._UZ(8,"img",6),i.ALo(9,"async"),i.ALo(10,"formatDataPipe"),i.qZA(),i.qZA(),i.TgZ(11,"div",28,29),i.TgZ(13,"section",30,31),i.YNc(15,A,4,5,"ng-template",32),i.qZA(),i.qZA(),i.TgZ(16,"div",3),i.TgZ(17,"div",33,34),i.NdJ("click",function(){i.CHM(q);const V=i.MAs(12),de=i.MAs(7),Q=i.MAs(18);return i.oxw(2).onClickButtonRightScroll(V,de,Q)}),i._UZ(19,"img",6),i.ALo(20,"async"),i.ALo(21,"formatDataPipe"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(22,"div",35),i.YNc(23,I,9,8,"ng-template",32),i.qZA(),i.qZA()}if(2&ue){const q=i.oxw(2);i.xp6(4),i.Q6J("ngIf",!q.startResize),i.xp6(4),i.Q6J("src",i.lcZ(9,5,i.xi3(10,7,"left.png","GetImageURLByKey")),i.LSH),i.xp6(7),i.Q6J("ngForOf",q.detail.ListSeasons),i.xp6(4),i.Q6J("src",i.lcZ(20,10,i.xi3(21,12,"right.png","GetImageURLByKey")),i.LSH),i.xp6(4),i.Q6J("ngForOf",q.detail.CurrentSeason.ListEpisodes)}}function ee(ue,be){if(1&ue&&(i.TgZ(0,"div",3),i.TgZ(1,"div",4),i.TgZ(2,"div",5),i._UZ(3,"img",6),i.qZA(),i.qZA(),i.qZA(),i.TgZ(4,"div",7),i.TgZ(5,"div",8),i._uU(6),i.qZA(),i.TgZ(7,"div",9),i._uU(8),i.qZA(),i.YNc(9,b,5,1,"div",10),i.YNc(10,k,5,1,"div",10),i.TgZ(11,"section",11),i.YNc(12,L,8,3,"ng-template",2),i.YNc(13,P,2,2,"ng-template",2),i.qZA(),i.YNc(14,y,2,1,"div",12),i.YNc(15,H,24,15,"div",13),i.qZA()),2&ue){const q=i.oxw(),se=i.MAs(1);i.xp6(2),i.Udp("width",se.clientWidth+"px"),i.xp6(1),i.Q6J("src",q.getUrlByItemDetailMovieDataBase(q.detail),i.LSH),i.xp6(3),i.hij(" ",q.detail.Title," "),i.xp6(2),i.hij(" ",q.detail.Genres," "),i.xp6(1),i.Q6J("ngIf",q.detail.Directors),i.xp6(1),i.Q6J("ngIf",q.detail.Actors),i.xp6(2),i.Q6J("ngIf",q.lastEpisodeWatched),i.xp6(1),i.Q6J("ngIf",!q.lastEpisodeWatched),i.xp6(1),i.Q6J("ngIf",!q.lastEpisodeWatched),i.xp6(1),i.Q6J("ngIf",q.detail.ListSeasons)}}let fe=(()=>{class ue extends e.X{constructor(q,se,V,de,Q,pe,me){super(q,Q,pe,me),this.restProvider=q,this.ref=se,this.http=V,this.fb=de,this.events=Q,this.domSanitizer=pe,this.sharedData=me,this._window=window,this.startResize=!1,this.toggleVideo=new i.vpe}getEpisodeImagePath(q){return null!=this.detail.TmdbId&&0!=this.detail.TmdbId?q.StillPath?this.sharedData.urlEpisodeDataBase+q.StillPath:this.getUrlByItemDetailMovieDataBase(this.detail):q.StillPath}verifyIfShoOrHiddenScrollButtons(q,se,V){se.style.display=q.scrollLeft<=0?"none":"flex",V.style.display=q.scrollWidth==q.scrollLeft+q.offsetWidth?"none":"flex",this.ref.detectChanges()}onInitializeItemsRow(q,se,V){setTimeout(()=>{this.verifyIfShoOrHiddenScrollButtons(q,se,V)},250)}onClickButtonLeftScroll(q,se,V){q.scrollLeft=q.scrollLeft-20,this.verifyIfShoOrHiddenScrollButtons(q,se,V)}onClickButtonRightScroll(q,se,V){q.scrollLeft=q.scrollLeft+20,this.verifyIfShoOrHiddenScrollButtons(q,se,V)}getWidthProgressItem(q){return q.CurrentTime/q.DurationTime*100+"%"}ngOnInit(){}continueVideo(){}showVideo(){if(this.detail.Item.MediaType==C.DD.Movie)this.getVideosByItem();else if(this.detail.ListSeasons&&this.detail.ListSeasons.length>0){let q=this.detail.ListSeasons[0];q.ListEpisodes&&q.ListEpisodes.length>0&&this.getVideoByEpisode(q.ListEpisodes[0])}}getVideosByItem(){this.sharedData.currentVideo=this.CreateBuilderVideoFromItem(this.detail.Item,this.detail),this.toggleVideo.emit(!0)}onClickSeason(q){this.detail.CurrentSeason=q}onClickEpisode(q){this.getVideoByEpisode(q)}getVideoByEpisode(q){this.sharedData.currentVideo=this.CreateBuilderVideoFromEpisode(q,this.detail)}onResize(q){setTimeout(()=>{this.startResize=!0,this.ref.detectChanges(),this.startResize=!1,this.ref.detectChanges()},100)}}return ue.\u0275fac=function(q){return new(q||ue)(i.Y36(R.C),i.Y36(i.sBO),i.Y36(U.eN),i.Y36(j.qu),i.Y36(F.n),i.Y36(D.H7),i.Y36(h.g))},ue.\u0275cmp=i.Xpm({type:ue,selectors:[["app-item-view"]],viewQuery:function(q,se){if(1&q&&i.Gf(_,5),2&q){let V;i.iGM(V=i.CRH())&&(se.container=V.first)}},hostBindings:function(q,se){1&q&&i.NdJ("resize",function(de){return se.onResize(de)},!1,i.Jf7)},inputs:{detail:"detail"},outputs:{toggleVideo:"toggleVideo"},features:[i.qOj],decls:3,vars:1,consts:[["tabindex","0",1,"sinovad-item-view-container","sinovad-custom-container"],["container",""],[3,"ngIf"],[2,"width","0px","height","0px"],[1,"sinovad-item-view-background-container"],[2,"position","fixed"],[3,"src"],[1,"sinovad-item-view-principal-section"],[1,"sinovad-item-view-title-container"],[1,"sinovad-item-view-subtitle-container"],["class","sinovad-item-view-subtitle-container",4,"ngIf"],["id","section_principal_buttons",1,"sinovad-item-view-principal-button-container","sinovad-section"],["class","sinovad-item-view-summary-container",4,"ngIf"],["class","sinovad-item-view-seasons-container",4,"ngIf"],[2,"font-weight","bold"],[2,"font-weight","normal"],["id","continue_play",1,"",3,"click"],[1,"sinovad-item-progress-bar-container",2,"width","300px"],[1,"sinovad-item-progress-bar-content"],[2,"margin-top","5px"],["id","restart_play",1,"",3,"click"],["id","play_now",1,"",3,"click"],[1,"sinovad-item-view-summary-container"],[1,"sinovad-item-view-seasons-container"],[1,"sinovad-list-itsinovad-row-container"],["style","display:none;","src","",3,"error",4,"ngIf"],[1,"sinovad-list-button-scroll-left",3,"click"],["scrollLeftButton",""],[1,"sinovad-list-itsinovad-row","sinovad-section"],["itemsRowContainer",""],["id","section_seasons",1,"sinovad-list-itsinovad-content"],["content",""],["ngFor","",3,"ngForOf"],[1,"sinovad-list-button-scroll-right",3,"click"],["scrollRightButton",""],[1,"sinovad-item-view-episodes-container"],["src","",2,"display","none",3,"error"],[1,"sinovad-season-container"],[1,"sinovad-season-button",3,"id","ngClass","click"],[1,"sinovad-section",3,"id"],[1,"sinovad-episode-button",3,"id","click"],[1,"sinovad-episode-image-section"],[1,"sinovad-episode-detail-section"],[1,"sinovad-episode-title-section"],[1,"sinovad-overview-section"]],template:function(q,se){1&q&&(i.TgZ(0,"div",0,1),i.YNc(2,ee,16,11,"ng-template",2),i.qZA()),2&q&&(i.xp6(2),i.Q6J("ngIf",se.detail))},directives:[u.O5,u.sg,u.mk],pipes:[u.Ov,p.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-episode-button[_ngcontent-%COMP%]{width:100%;cursor:pointer;font-size:25px;display:flex;border-radius:5px;height:300px;margin-bottom:15px;padding:0}.sinovad-episode-button[_ngcontent-%COMP%]:hover   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff}.sinovad-episode-button[_ngcontent-%COMP%]:focus-visible   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff}.sinovad-episode-button[_ngcontent-%COMP%]:focus   .sinovad-episode-detail-section[_ngcontent-%COMP%]{color:#007bff!important}.sinovad-overview-section[_ngcontent-%COMP%]{font-size:20px;font-weight:400;overflow:hidden;text-overflow:ellipsis;height:auto;white-space:pre-wrap;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:10}.sinovad-episode-title-section[_ngcontent-%COMP%]{margin-bottom:10px;overflow:hidden;text-overflow:ellipsis;height:auto;white-space:pre-wrap;-webkit-box-orient:vertical;display:-webkit-box;-webkit-line-clamp:1}.sinovad-episode-image-section[_ngcontent-%COMP%]{display:block}.sinovad-episode-image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px}.sinovad-episode-detail-section[_ngcontent-%COMP%]{display:block;background-color:#fff;color:#000;padding:20px;text-align:left;width:100%;height:300px}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black}.sinovad-item-progress-bar-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#1e1a28;position:relative;margin-top:10px}.sinovad-item-progress-bar-content[_ngcontent-%COMP%]{background-color:red;height:100%}.sinovad-item-view-container[_ngcontent-%COMP%]{width:100%;height:100%;overflow-y:auto;overflow-x:hidden;outline:none}.sinovad-item-view-title-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:50px;font-weight:700;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-subtitle-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:25px;font-weight:700;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-summary-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:30px;color:#fff;padding-left:20px;padding-top:20px;padding-bottom:20px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;font-size:25px;color:#fff;padding-left:20px;padding-top:20px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px;margin-right:10px}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-item-view-principal-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-item-view-background-container[_ngcontent-%COMP%]{position:relative}.sinovad-item-view-background-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;opacity:.5}.sinovad-item-view-seasons-container[_ngcontent-%COMP%]{position:relative;width:100%;font-size:20px;color:#fff;padding-left:20px;padding-top:20px;font-weight:700}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]{position:relative;width:60px;height:82px;display:flex;align-items:center;justify-content:center;cursor:pointer}.sinovad-list-button-scroll-left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.4;max-width:unset;height:110px;display:none}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]{width:60px;height:82px;right:60px;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;height:110px;display:none;opacity:.4}.sinovad-list-button-scroll-right[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%], .sinovad-list-button-scroll-left[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{display:block}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;width:100%}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-season-container[_ngcontent-%COMP%]{padding-right:10px}.sinovad-season-button[_ngcontent-%COMP%]{font-size:25px;color:#fff;font-weight:700;text-align:center;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:10px 10px 4px;background:transparent;border:none}.sinovad-season-button[_ngcontent-%COMP%]:hover{border-bottom:4px solid #007bff}.sinovad-season-button[_ngcontent-%COMP%]:focus-visible{border-bottom:4px solid #007bff}.sinovad-season-button[_ngcontent-%COMP%]:focus{border-bottom:4px solid #007bff!important}.sinovad-season-button.selected[_ngcontent-%COMP%]{border-bottom:4px solid #007bff}button[_ngcontent-%COMP%]{font-size:25px}.sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-right[_ngcontent-%COMP%], .sinovad-mobile-platform[_ngcontent-%COMP%]   .sinovad-list-button-scroll-left[_ngcontent-%COMP%]{display:none!important}"]}),ue})()},4857:(kn,Ge,w)=>{"use strict";w.d(Ge,{X:()=>p});var i=w(4322);class e{}var C=w(1042);class R{}var U=w(7065),j=w(4893),F=w(2571),D=w(1085),h=w(2313),u=w(2330);let p=(()=>{class _{constructor(k,L,B,O){this.restProvider=k,this.events=L,this.domSanitizer=B,this.sharedData=O,this.fdp=new U.A(this.domSanitizer,this.sharedData)}ngOnInit(){}getNewIndex(k,L,B){return k+1+(L-1)*B}delay(k){return new Promise(L=>setTimeout(L,k))}getTargetNumberValue(k){return k.value?Number(k.value):0}getTargetDateValue(k){return k.valueAsDate}getTargetValue(k){return k.value}CreateBuilderVideoFromItem(k,L){let B=(0,C.Z)();var O=new R;O.VideoId=k.VideoId,O.Title=k.Subtitle?k.Title+" "+k.Subtitle:k.Title,O.PhysicalPath=k.PhysicalPath,O.MediaServerId=k.MediaServerId,O.MediaServerUrl=k.MediaServerUrl,O.CurrentTime=k.CurrentTime,O.ProcessGUID=B,O.TimeSpan=O.CurrentTime?O.CurrentTime.toString():"0",L.ListSeasons&&(L.CurrentSeason=L.ListSeasons.find(y=>y.SeasonNumber==k.SeasonNumber),L.CurrentEpisode=L.CurrentSeason.ListEpisodes.find(y=>y.EpisodeNumber==k.EpisodeNumber));var P=new e;return P.TranscodePrepareVideo=O,P.ItemDetail=L,P}CreateBuilderVideoFromEpisode(k,L){var B=this.GetTranscodeVideoFromEpisode(k);L.ListSeasons&&(L.CurrentSeason=L.ListSeasons.find(P=>P.SeasonNumber==k.SeasonNumber),L.CurrentEpisode=L.CurrentSeason.ListEpisodes.find(P=>P.EpisodeNumber==k.EpisodeNumber));var O=new e;return O.TranscodePrepareVideo=B,O.ItemDetail=L,O}GetTranscodeVideoFromEpisode(k){let L=(0,C.Z)();var B=new R;return B.VideoId=k.VideoId,B.Title=k.TvSerieName+" T"+k.SeasonNumber+":E"+k.EpisodeNumber+" "+k.Name,B.PhysicalPath=k.PhysicalPath,B.MediaServerId=k.MediaServerId,B.MediaServerUrl=k.MediaServerUrl,B.ProcessGUID=L,B.CurrentTime=0,B.TimeSpan=B.CurrentTime?B.CurrentTime.toString():"0",B}getUser(){return new Promise((k,L)=>{this.restProvider.executeSinovadApiService(i.yw.GET,"/users/GetUserData").then(B=>{this.sharedData.userData=B.Data,null==this.sharedData.userData?(this.sharedData.apiToken=void 0,localStorage.removeItem("apiToken")):k(!0)},B=>{console.error(B),L(B)})})}getMediaServers(){return new Promise((k,L)=>{this.restProvider.executeSinovadApiService(i.yw.GET,"/mediaServers/GetAllByUserAsync/"+this.sharedData.userData.Id).then(B=>{this.sharedData.mediaServers=B.Data,this.checkSecureConnectionMediaServers(),k(!0)},B=>{L(B)})})}checkSecureConnectionMediaServers(){null!=this.sharedData.mediaServers&&this.sharedData.mediaServers.length>0&&this.sharedData.mediaServers.forEach(k=>{this.restProvider.executeHttpMethodByUrl(i.yw.GET,k.Url).then(L=>{k.isSecureConnection=!0,null==this.sharedData.selectedMediaServer&&(this.sharedData.selectedMediaServer=this.sharedData.mediaServers.find(B=>B.Id==k.Id))},L=>{k.isSecureConnection=!1})})}getProfiles(){return new Promise((k,L)=>{this.restProvider.executeSinovadApiService(i.yw.GET,"/profiles/GetAllWithPaginationByUserAsync/"+this.sharedData.userData.Id).then(B=>{let O=B.Data;this.sharedData.listProfiles=O,this.sharedData.currentProfile=O[0],k(!0)},B=>{L(B)})})}getMenus(){return new Promise((k,L)=>{this.restProvider.executeSinovadApiService(i.yw.GET,"/menus/GetByUserAsync/"+this.sharedData.userData.Id).then(B=>{this.sharedData.listMenus=B.Data,k(!0)},B=>{L(B)})})}isSmallDevice(){return window.innerWidth<=768}getInitials(k){return k.FullName.substring(0,1)}onResize(k){}isMobileDevice(){return"ontouchstart"in window}checkIfShowDisableItemsButton(k){return k.filter(B=>B.Active).length==k.length}focusContainer(k,L){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let O=Array.from(k.querySelectorAll("input,button,section"));if(O&&O.length>0&&document.activeElement&&-1==O.indexOf(document.activeElement)){let y=B[0];this.sharedData.currentActiveSection=y,y.focus()}}else{let O=Array.from(k.querySelectorAll("input,button,textarea"));O&&O.length>0&&document.activeElement?-1==O.indexOf(document.activeElement)&&(this.sharedData.currentActiveSection=k,k.focus()):(this.sharedData.currentActiveSection=k,k.focus())}L.detectChanges()}focusInElementInContainer(k,L){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let O=B[0];this.sharedData.currentActiveSection=O;let P=Array.from(O.querySelectorAll("button"));if(P&&P.length>0){let y=P[0];this.sharedData.currentSelectedElement=y,y.focus(),L.detectChanges()}}else{this.sharedData.currentActiveSection=k;let O=Array.from(k.querySelectorAll("button"));if(O&&O.length>0){let P=O[0];this.sharedData.currentSelectedElement=P,P.focus(),L.detectChanges()}}}setKeyboardActionsSectionVerticalButtonsHorizontal(k,L,B,O,P){var y=k.keyCode;let S=Array.from(L.nativeElement.querySelectorAll("section")),E=S.findIndex(I=>I.id==this.sharedData.currentActiveSection.id),A=S[E];if(A){let I=Array.from(A.querySelectorAll("button")),H=I.length,ee=I.findIndex(fe=>fe.id==this.sharedData.currentSelectedElement.id);if(39==y){let fe=ee+1;if(fe<H){let ue=I[fe];ue.focus(),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,O.detectChanges()}}if(37==y){let fe=ee-1;if(fe>=0){let ue=I[fe];ue.focus(),this.sharedData.currentSelectedElement=ue,ue.scrollIntoView({block:"center"}),O.detectChanges()}else if(B){let ue=Array.from(B.nativeElement.querySelectorAll("input, button"));if(ue&&ue.length>0){this.sharedData.currentActiveSection=B;let be=ue[0];this.sharedData.currentSelectedElement=be,be.focus()}}}if(40==y){let fe=E+1;if(fe<S.length){let ue=S[fe];this.sharedData.currentActiveSection=ue;let be=Array.from(ue.querySelectorAll("button")),q=be[0];be[ee]?q=be[ee]:be[ee-1]&&(q=be[ee-1]),q.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=q,q.focus()}}if(38==y){let fe=E-1;if(fe>=0){let ue=S[fe];this.sharedData.currentActiveSection=ue;let be=Array.from(ue.querySelectorAll("button")),q=be[0];be[ee]?q=be[ee]:be[ee-1]&&(q=be[ee-1]),q.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=q,q.focus()}else if(P){let ue=Array.from(P.nativeElement.querySelectorAll("input, button"));if(ue&&ue.length>0){this.sharedData.currentActiveSection=P;let be=ue[0];ue[ee]?be=ue[ee]:ue[ee-1]&&(be=ue[ee-1]),this.sharedData.currentSelectedElement=be,be.focus()}}}}}focusFullScreenContainer(k,L){let B=Array.from(k.querySelectorAll("section"));if(B&&B.length>0){let O=B[0];this.sharedData.currentActiveSection=O,O.focus();let P=Array.from(O.querySelectorAll("input,button"));if(P&&P.length>0){let y=P[0];y.focus(),this.sharedData.currentSelectedElement=y}}L.detectChanges()}setKeyboardActionsFullScreenPage(k,L,B){var O=k.keyCode;let P=Array.from(L.querySelectorAll("section")),y=P.findIndex(E=>E.id==this.sharedData.currentActiveSection.id),S=P[y];if(S){let E=Array.from(S.querySelectorAll("button,input")),A=E.length,I=E.findIndex(H=>H.id==this.sharedData.currentSelectedElement.id);if(39==O){let H=I+1;if(H<A){let ee=E[H];ee.focus(),ee.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ee,B.detectChanges()}}if(37==O){let H=I-1;if(H>=0){let ee=E[H];ee.focus(),this.sharedData.currentSelectedElement=ee,ee.scrollIntoView({block:"center"}),B.detectChanges()}}if(40==O){let H=y+1;if(H<P.length){let ee=P[H];this.sharedData.currentActiveSection=ee;let fe=Array.from(ee.querySelectorAll("button,input")),ue=fe[0];fe[I]?ue=fe[I]:fe[I-1]&&(ue=fe[I-1]),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,ue.focus(),"INPUT"==ue.nodeName.toUpperCase()&&ue.click()}}if(38==O){let H=y-1;if(H>=0){let ee=P[H];this.sharedData.currentActiveSection=ee;let fe=Array.from(ee.querySelectorAll("button,input")),ue=fe[0];fe[I]?ue=fe[I]:fe[I-1]&&(ue=fe[I-1]),ue.scrollIntoView({block:"center"}),this.sharedData.currentSelectedElement=ue,ue.focus(),"INPUT"==ue.nodeName.toUpperCase()&&ue.click()}}}}getUrlByItemDetailMovieDataBase(k){return null!=k.TmdbId&&k.TmdbId>0?this.sharedData.originalUrlImagesMovieDataBase+k.PosterPath:k.PosterPath}getUrlByItemMovieDataBase(k){return null!=k.TmdbId&&k.TmdbId>0?this.sharedData.originalUrlImagesMovieDataBase+k.PosterPath:k.PosterPath}getYearByDateFormat(k){return new Date(k).getFullYear()}sort_by(k,L,B){let O=B?P=>B(P[k]):P=>P[k];return L=L?-1:1,(P,y)=>(P=O(P),y=O(y),L*(+(P>y)-+(y>P)))}goToHeaderContainer(){let k=Array.from(document.getElementsByClassName("sinovad-custom-container")),L=k.findIndex(B=>-1!=B.className.indexOf("sinovad-header-container"));if(-1!=L){let O=Array.from(k[L].getElementsByClassName("sinovad-auxiliary-container"));O&&O.length>0&&O[0].click()}}validateEmailFormat(k){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(k)}}return _.\u0275fac=function(k){return new(k||_)(j.Y36(F.C),j.Y36(D.n),j.Y36(h.H7),j.Y36(u.g))},_.\u0275cmp=j.Xpm({type:_,selectors:[["app-parent"]],hostBindings:function(k,L){1&k&&j.NdJ("resize",function(O){return L.onResize(O)},!1,j.Jf7)},decls:2,vars:0,template:function(k,L){1&k&&(j.TgZ(0,"p"),j._uU(1,"parent works!"),j.qZA())},styles:[""]}),_})()},377:(kn,Ge,w)=>{"use strict";w.r(Ge),w.d(Ge,{ProfilesViewPageModule:()=>F});var i=w(9808),e=w(2382),C=w(5782),R=w(4893);let U=(()=>{class D{}return D.\u0275fac=function(u){return new(u||D)},D.\u0275mod=R.oAB({type:D}),D.\u0275inj=R.cJS({imports:[[i.ez,e.u5,e.UX,C.m]]}),D})(),j=(()=>{class D{}return D.\u0275fac=function(u){return new(u||D)},D.\u0275mod=R.oAB({type:D}),D.\u0275inj=R.cJS({imports:[[i.ez,e.u5,e.UX,C.m]]}),D})(),F=(()=>{class D{}return D.\u0275fac=function(u){return new(u||D)},D.\u0275mod=R.oAB({type:D}),D.\u0275inj=R.cJS({imports:[[i.ez,e.u5,e.UX,C.m,j,U]]}),D})()},5905:(kn,Ge,w)=>{"use strict";w.d(Ge,{c:()=>B});var i=w(4893),e=w(4857),C=w(2571),R=w(520),U=w(1085),j=w(2313),F=w(2330),D=w(9808),h=w(7065);function u(O,P){if(1&O){const y=i.EpF();i.TgZ(0,"button",15),i.NdJ("click",function(){const A=i.CHM(y).$implicit;return i.oxw(3).onClickKey(A)}),i._uU(1),i.qZA()}if(2&O){const y=P.$implicit;i.MGl("id","key_",y.name,""),i.xp6(1),i.hij(" ",y.name," ")}}function p(O,P){if(1&O&&(i.TgZ(0,"section",14),i.YNc(1,u,2,2,"ng-template",13),i.qZA()),2&O){const y=P.$implicit;i.MGl("id","section_keyboard_",P.index,""),i.xp6(1),i.Q6J("ngForOf",y.letters)}}function _(O,P){if(1&O){const y=i.EpF();i.TgZ(0,"div",6),i.TgZ(1,"div"),i.TgZ(2,"section",7),i.TgZ(3,"button",8),i.NdJ("click",function(){return i.CHM(y),i.oxw().onClickSpaceBar()}),i._UZ(4,"img",9),i.ALo(5,"async"),i.ALo(6,"formatDataPipe"),i.qZA(),i.TgZ(7,"button",10),i.NdJ("click",function(){return i.CHM(y),i.oxw().onClickBackSpace()}),i._UZ(8,"img",11),i.ALo(9,"async"),i.ALo(10,"formatDataPipe"),i.qZA(),i.TgZ(11,"button",12),i.NdJ("click",function(){return i.CHM(y),i.oxw().clearSearchText()}),i._UZ(12,"img",11),i.ALo(13,"async"),i.ALo(14,"formatDataPipe"),i.qZA(),i.qZA(),i.YNc(15,p,2,2,"ng-template",13),i.qZA(),i.qZA()}if(2&O){const y=i.oxw();i.xp6(4),i.Q6J("src",i.lcZ(5,4,i.xi3(6,6,"space-bar.png","GetImageURLByKey")),i.LSH),i.xp6(4),i.Q6J("src",i.lcZ(9,9,i.xi3(10,11,"back-space.png","GetImageURLByKey")),i.LSH),i.xp6(4),i.Q6J("src",i.lcZ(13,14,i.xi3(14,16,"delete-search.png","GetImageURLByKey")),i.LSH),i.xp6(3),i.Q6J("ngForOf",y.rowsLetters)}}let b=(()=>{class O extends e.X{constructor(y,S,E,A,I){super(y,E,A,I),this.restProvider=y,this.http=S,this.events=E,this.domSanitizer=A,this.sharedData=I,this.executeSearch=new i.vpe,this.searchText="",this.rowsLetters=[{letters:[{name:"a"},{name:"b"},{name:"c"},{name:"d"},{name:"e"},{name:"f"},{name:"g"}]},{letters:[{name:"h"},{name:"i"},{name:"j"},{name:"k"},{name:"l"},{name:"m"},{name:"n"}]},{letters:[{name:"\xf1"},{name:"o"},{name:"p"},{name:"q"},{name:"r"},{name:"s"},{name:"t"}]},{letters:[{name:"u"},{name:"v"},{name:"w"},{name:"x"},{name:"y"},{name:"z"}]},{letters:[{name:"1"},{name:"2"},{name:"3"},{name:"4"},{name:"5"},{name:"6"},{name:"7"}]},{letters:[{name:"8"},{name:"9"}]}]}ngAfterViewInit(){}clearSearchText(){this.searchText="",this.executeSearch.emit(this.searchText)}onClickSpaceBar(){this.searchText=this.searchText+" ",this.executeSearch.emit(this.searchText)}onClickBackSpace(){""!=this.searchText&&this.searchText.length>1?(this.searchText=this.searchText.substring(0,this.searchText.length-1),this.executeSearch.emit(this.searchText)):(this.searchText="",this.executeSearch.emit(this.searchText))}onClickKey(y){this.searchText=this.searchText+y.name,this.executeSearch.emit(this.searchText)}onChangeInput(y){this.searchText=y.target.value,this.executeSearch.emit(this.searchText)}}return O.\u0275fac=function(y){return new(y||O)(i.Y36(C.C),i.Y36(R.eN),i.Y36(U.n),i.Y36(j.H7),i.Y36(F.g))},O.\u0275cmp=i.Xpm({type:O,selectors:[["app-keyboard-tv"]],outputs:{executeSearch:"executeSearch"},features:[i.qOj],decls:6,vars:2,consts:[[1,"sinovad-search-section"],["searchSection",""],[1,"sinovad-search-section-top"],["type","text","readonly","",3,"value","change"],["input",""],["class","sinovad-search-section-bottom",4,"ngIf"],[1,"sinovad-search-section-bottom"],["id","section_keyboard_first_row","tabindex","0",1,"sinovad-letters-first-raw-section"],["id","space_bar",3,"click"],[2,"width","50px",3,"src"],["id","back_space",3,"click"],[2,"width","40px",3,"src"],["id","clear_text",3,"click"],["ngFor","",3,"ngForOf"],["tabindex","0",1,"sinovad-letters-raw-section",3,"id"],[3,"id","click"]],template:function(y,S){1&y&&(i.TgZ(0,"div",0,1),i.TgZ(2,"div",2),i.TgZ(3,"input",3,4),i.NdJ("change",function(A){return S.onChangeInput(A)}),i.qZA(),i.qZA(),i.YNc(5,_,16,19,"div",5),i.qZA()),2&y&&(i.xp6(3),i.Q6J("value",S.searchText),i.xp6(2),i.Q6J("ngIf",!S.isMobileDevice()))},directives:[D.O5,D.sg],pipes:[D.Ov,h.A],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;width:60px;height:50px;margin-right:30px;display:flex;align-items:center;justify-content:center}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:40px;margin-right:30px;width:60px;display:flex;align-items:center;justify-content:center}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-search-section[_ngcontent-%COMP%]{padding-left:60px;padding-right:60px}.sinovad-search-section-top[_ngcontent-%COMP%]{height:70px;display:flex;width:100%;align-items:center}.sinovad-search-section-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border-radius:5px;outline:none;width:100%;font-size:20px;padding:0 10px}.sinovad-search-section-bottom[_ngcontent-%COMP%]{display:flex;height:calc(100% - 70px);justify-content:center}"]}),O})();var k=w(6255);const L=function(O){return{small:O}};let B=(()=>{class O extends e.X{constructor(y,S,E,A,I){super(y,E,A,I),this.restProvider=y,this.http=S,this.events=E,this.domSanitizer=A,this.sharedData=I,this.showItemView=new i.vpe,this.executeSearch=new i.vpe}ngAfterViewInit(){}onExecuteSearchFromKeyboard(y){this.executeSearch.emit(y)}}return O.\u0275fac=function(y){return new(y||O)(i.Y36(C.C),i.Y36(R.eN),i.Y36(U.n),i.Y36(j.H7),i.Y36(F.g))},O.\u0275cmp=i.Xpm({type:O,selectors:[["app-search-view-tv"]],outputs:{showItemView:"showItemView",executeSearch:"executeSearch"},features:[i.qOj],decls:8,vars:6,consts:[[1,"sinovad-search-view-tv-container","sinovad-custom-container",3,"ngClass"],["container",""],["keyboardContainer",""],[3,"executeSearch"],["itemListContainer",""],[3,"executeSearch","showItemView"]],template:function(y,S){if(1&y&&(i.TgZ(0,"div",0,1),i.TgZ(2,"div",null,2),i.TgZ(4,"app-keyboard-tv",3),i.NdJ("executeSearch",function(A){return S.onExecuteSearchFromKeyboard(A)}),i.qZA(),i.qZA(),i.TgZ(5,"div",null,4),i.TgZ(7,"app-vertical-item-list",5),i.NdJ("showItemView",function(){return S.showItemView.emit(!0)}),i.qZA(),i.qZA(),i.qZA()),2&y){const E=i.MAs(3);i.Q6J("ngClass",i.VKq(4,L,S.isSmallDevice())),i.xp6(5),i.Udp("height","calc(100% - "+E.offsetHeight+"px)"),i.xp6(2),i.Q6J("executeSearch",S.executeSearch)}},directives:[D.mk,b,k.E],styles:[".sinovad-search-view-tv-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744}"]}),O})()},1511:(kn,Ge,w)=>{"use strict";w.d(Ge,{g:()=>U});var i=w(9808),e=w(2382),C=w(5782),R=w(4893);let U=(()=>{class j{}return j.\u0275fac=function(D){return new(D||j)},j.\u0275mod=R.oAB({type:j}),j.\u0275inj=R.cJS({imports:[[i.ez,e.u5,e.UX,C.m]]}),j})()},6255:(kn,Ge,w)=>{"use strict";w.d(Ge,{E:()=>L});var i=w(4893),e=w(4857),C=w(4322),R=w(1042),U=w(2571),j=w(520),F=w(1085),D=w(2313),h=w(2330),u=w(9808);const p=["itemListContainer"];function _(B,O){if(1&B&&(i.TgZ(0,"div",14),i.TgZ(1,"span"),i._uU(2),i.qZA(),i.qZA()),2&B){const P=i.oxw().$implicit;i.xp6(2),i.Oqu(P.Title)}}function b(B,O){if(1&B){const P=i.EpF();i.TgZ(0,"div",10),i.TgZ(1,"button",11),i.NdJ("click",function(){const E=i.CHM(P).$implicit;return i.oxw(2).onClickItem(E)}),i._UZ(2,"img",12),i.qZA(),i.YNc(3,_,3,1,"div",13),i.qZA()}if(2&B){const P=O.$implicit,y=i.oxw(2);i.xp6(1),i.hYB("id","item_",P.TvSerieId?P.TvSerie_ID:P.MovieId,"_",P.MediaType,""),i.xp6(1),i.Q6J("src",y.getUrlByItemMovieDataBase(P),i.LSH),i.xp6(1),i.Q6J("ngIf",!P.Subtitle)}}function k(B,O){if(1&B&&(i.TgZ(0,"section",4),i.TgZ(1,"div",5),i.TgZ(2,"div",6,7),i.TgZ(4,"div",8,9),i.YNc(6,b,4,4,"ng-template",3),i.qZA(),i.qZA(),i.qZA(),i.qZA()),2&B){const P=O.$implicit;i.MGl("id","section_search_",O.index,""),i.xp6(6),i.Q6J("ngForOf",P)}}let L=(()=>{class B extends e.X{constructor(P,y,S,E,A){super(P,S,E,A),this.restProvider=P,this.http=y,this.events=S,this.domSanitizer=E,this.sharedData=A,this.showItemView=new i.vpe,this.listItems=[],this.listGroupItems=[]}ngOnInit(){let P=this;this.executeSearch.subscribe(y=>{let S=(0,R.Z)();P.lastCallGUID=S,P.getItemsBySearch(y,S)})}ngAfterViewInit(){}getItemsBySearch(P,y){""!=P.trim()?this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/SearchTvPrograms?userId="+this.sharedData.userData.Id+"&searchMovies="+!0+"&searchTvSeries="+!0+"&searchText="+P).then(E=>{y==this.lastCallGUID&&(this.listItems=E.Data,this.buildGroupItems(this.listItems))},E=>{console.error(E)}):(this.listItems=[],this.listGroupItems=[])}buildGroupItems(P){if(P&&P.length>0){let A=this.isSmallDevice()?180:250;var y=Math.floor(this.container.nativeElement.offsetWidth/A),S=P.reduce((I,H,ee)=>{var fe=Math.floor(ee/y)+1;return I[`row${fe}`]=I[`row${fe}`]||[],I[`row${fe}`].push(H),I},{}),E=Object.keys(S).map(function(I){return S[I]});this.listGroupItems=E}else this.listGroupItems=[]}onClickItem(P){P.MovieId?this.getMovieDetail(P):P.TvSerieId&&this.getTvSerieDetail(P)}getMovieDetail(P){this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/GetMovieDetail?movieId="+P.MovieId).then(y=>{let S=y.Data;S.Item=P,this.setDataAndShowItemView(S)},y=>{console.error(y)})}setDataAndShowItemView(P){P.ListSeasons&&P.ListSeasons.length>0&&(P.CurrentSeason=P.ListSeasons[0]),this.showItemView.emit(P)}getTvSerieDetail(P){this.restProvider.executeSinovadApiService(C.yw.GET,"/videos/GetTvSerieDetail?userId="+this.sharedData.userData.Id+"&tvSerieId="+P.TvSerieId).then(S=>{let E=S.Data;E.Item=P,this.setDataAndShowItemView(E)},S=>{console.error(S)})}onResize(P){this.buildGroupItems(this.listItems)}}return B.\u0275fac=function(P){return new(P||B)(i.Y36(U.C),i.Y36(j.eN),i.Y36(F.n),i.Y36(D.H7),i.Y36(h.g))},B.\u0275cmp=i.Xpm({type:B,selectors:[["app-vertical-item-list"]],viewQuery:function(P,y){if(1&P&&i.Gf(p,5),2&P){let S;i.iGM(S=i.CRH())&&(y.container=S.first)}},hostBindings:function(P,y){1&P&&i.NdJ("resize",function(E){return y.onResize(E)},!1,i.Jf7)},inputs:{executeSearch:"executeSearch"},outputs:{showItemView:"showItemView"},features:[i.qOj],decls:4,vars:3,consts:[[1,"sinovad-vertical-list-itsinovad-content"],["itemListContainer",""],[1,"sinovad-vertical-list-itsinovad-second-content"],["ngFor","",3,"ngForOf"],["tabindex","0",3,"id"],[1,"sinovad-list-itsinovad-row-container"],["tabindex","0",1,"sinovad-list-itsinovad-row"],["itemsRowContainer",""],[1,"sinovad-list-itsinovad-content"],["content",""],[1,"sinovad-item-container"],[1,"sinovad-item-button","sinovad-item-button-vertical",3,"id","click"],["referrerpolicy","no-referrer",3,"src"],["class","sinovad-item-caption-container",4,"ngIf"],[1,"sinovad-item-caption-container"]],template:function(P,y){1&P&&(i.TgZ(0,"div",0,1),i.TgZ(2,"div",2),i.YNc(3,k,7,2,"ng-template",3),i.qZA(),i.qZA()),2&P&&(i.Udp("height","100%"),i.xp6(3),i.Q6J("ngForOf",y.listGroupItems))},directives:[u.sg,u.O5],styles:["button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-item-container[_ngcontent-%COMP%]{padding-right:10px;width:-moz-min-content;width:min-content;margin:6px;border-radius:6px}.sinovad-list-itsinovad-row-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;padding-bottom:10px;justify-content:center}.sinovad-list-itsinovad-row[_ngcontent-%COMP%]{display:block;overflow-x:auto;outline:none}.sinovad-list-itsinovad-content[_ngcontent-%COMP%]{display:flex}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;width:60px;height:50px;margin-right:30px;display:flex;align-items:center;justify-content:center}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-first-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;font-size:40px;margin-right:30px;width:60px;display:flex;align-items:center;justify-content:center}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:blue}.sinovad-letters-raw-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:blue}.sinovad-search-section[_ngcontent-%COMP%]{padding-left:60px;padding-right:60px}.sinovad-search-section-top[_ngcontent-%COMP%]{height:70px;display:flex;width:100%;align-items:center}.sinovad-search-section-top[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px;border-radius:5px;outline:none;width:100%;font-size:20px;padding:0 10px}.sinovad-search-section-bottom[_ngcontent-%COMP%]{display:flex;height:calc(100% - 70px);justify-content:center}.sinovad-item-button[_ngcontent-%COMP%]{display:block;width:360px;height:210px;color:#000;cursor:pointer;text-align:center;min-width:360px;padding:0;border-radius:unset;border:none;background:transparent}.sinovad-item-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;max-width:unset;border-radius:10px;border:4px solid transparent}.sinovad-item-button[_ngcontent-%COMP%]   .sinovad-item-caption[_ngcontent-%COMP%]{position:absolute;margin-top:100px;font-size:20px;color:#fff;font-weight:700}.sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:230px;width:230px;height:310px}.sinovad-item-button[_ngcontent-%COMP%]:hover{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button[_ngcontent-%COMP%]:focus{width:370px;height:220px}.sinovad-item-button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus{min-width:240px;width:240px;height:320px}.sinovad-item-button-vertical[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{border:4px solid white}.sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:20px;color:#fff;font-weight:700;padding-top:10px;text-align:center}.sinovad-vertical-list-itsinovad-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744}.sinovad-vertical-list-itsinovad-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-vertical-list-itsinovad-second-content[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}.small[_ngcontent-%COMP%]   .sinovad-item-button-vertical[_ngcontent-%COMP%]{min-width:160px;width:160px;height:200px}.small[_ngcontent-%COMP%]   .sinovad-item-caption-container[_ngcontent-%COMP%]{font-size:14px}.small[_ngcontent-%COMP%]   .sinovad-list-itsinovad-content[_ngcontent-%COMP%]{gap:20px}.small[_ngcontent-%COMP%]   .sinovad-item-container[_ngcontent-%COMP%]{padding:0;margin:0}"]}),B})()},3607:(kn,Ge,w)=>{"use strict";w.d(Ge,{U:()=>j});var i=w(9808),e=w(2382),C=w(5782),R=w(6407),U=w(4893);let j=(()=>{class F{}return F.\u0275fac=function(h){return new(h||F)},F.\u0275mod=U.oAB({type:F}),F.\u0275inj=U.cJS({imports:[[i.ez,e.u5,C.m,R.I]]}),F})()},2811:(kn,Ge,w)=>{"use strict";var i=w(2313),e=w(4893),C=w(520),R=w(7979);const U=[];let j=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[R.Bz.forRoot(U,{onSameUrlNavigation:"reload"})],R.Bz]}),f})();var F=w(7579),D=w(6063);class h extends F.x{constructor(n=1/0,t=1/0,r=D.l){super(),this._bufferSize=n,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,n),this._windowTime=Math.max(1,t)}next(n){const{isStopped:t,_buffer:r,_infiniteTimeWindow:c,_timestampProvider:g,_windowTime:v}=this;t||(r.push(n),!c&&r.push(g.now()+v)),this._trimBuffer(),super.next(n)}_subscribe(n){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(n),{_infiniteTimeWindow:r,_buffer:c}=this,g=c.slice();for(let v=0;v<g.length&&!n.closed;v+=r?1:2)n.next(g[v]);return this._checkFinalizedStatuses(n),t}_trimBuffer(){const{_bufferSize:n,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:c}=this,g=(c?1:2)*n;if(n<1/0&&g<r.length&&r.splice(0,r.length-g),!c){const v=t.now();let x=0;for(let Y=1;Y<r.length&&r[Y]<=v;Y+=2)x=Y;x&&r.splice(0,x+1)}}}var u=w(6451),p=w(3900),_=w(4004);const b={schedule(f,n){const t=setTimeout(f,n);return()=>clearTimeout(t)},scheduleBeforeRender(f){if("undefined"==typeof window)return b.schedule(f,0);if(void 0===window.requestAnimationFrame)return b.schedule(f,16);const n=window.requestAnimationFrame(f);return()=>window.cancelAnimationFrame(n)}};let P;function H(f,n,t){let r=t;return function L(f){return!!f&&f.nodeType===Node.ELEMENT_NODE}(f)&&n.some((c,g)=>!("*"===c||!function y(f,n){if(!P){const t=Element.prototype;P=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return f.nodeType===Node.ELEMENT_NODE&&P.call(f,n)}(f,c)||(r=g,0))),r}class fe{constructor(n,t){this.componentFactory=t.get(e._Vd).resolveComponentFactory(n)}create(n){return new ue(this.componentFactory,n)}}class ue{constructor(n,t){this.componentFactory=n,this.injector=t,this.eventEmitters=new h(1),this.events=this.eventEmitters.pipe((0,p.w)(r=>(0,u.T)(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(e.R0b),this.elementZone="undefined"==typeof Zone?null:this.ngZone.run(()=>Zone.current)}connect(n){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(n)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=b.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(n){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(n):this.componentRef.instance[n])}setInputValue(n,t){this.runInZone(()=>{null!==this.componentRef?function S(f,n){return f===n||f!=f&&n!=n}(t,this.getInputValue(n))&&(void 0!==t||!this.unchangedInputs.has(n))||(this.recordInputChange(n,t),this.unchangedInputs.delete(n),this.hasInputChanges=!0,this.componentRef.instance[n]=t,this.scheduleDetectChanges()):this.initialInputValues.set(n,t)})}initializeComponent(n){const t=e.zs3.create({providers:[],parent:this.injector}),r=function I(f,n){const t=f.childNodes,r=n.map(()=>[]);let c=-1;n.some((g,v)=>"*"===g&&(c=v,!0));for(let g=0,v=t.length;g<v;++g){const x=t[g],Y=H(x,n,c);-1!==Y&&r[Y].push(x)}return r}(n,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,r,n),this.viewChangeDetectorRef=this.componentRef.injector.get(e.sBO),this.implementsOnChanges=function B(f){return"function"==typeof f}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(e.z2F).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:n})=>{this.initialInputValues.has(n)&&this.setInputValue(n,this.initialInputValues.get(n))}),this.initialInputValues.clear()}initializeOutputs(n){const t=this.componentFactory.outputs.map(({propName:r,templateName:c})=>n.instance[r].pipe((0,_.U)(v=>({name:c,value:v}))));this.eventEmitters.next(t)}callNgOnChanges(n){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,n.instance.ngOnChanges(t)}markViewForCheck(n){this.hasInputChanges&&(this.hasInputChanges=!1,n.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=b.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(n,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const r=this.inputChanges[n];if(r)return void(r.currentValue=t);const c=this.unchangedInputs.has(n),g=c?void 0:this.getInputValue(n);this.inputChanges[n]=new e.WD2(g,t,c)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(n){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(n):n()}}class be extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}function q(f,n){const t=function A(f,n){return n.get(e._Vd).resolveComponentFactory(f).inputs}(f,n.injector),r=n.strategyFactory||new fe(f,n.injector),c=function E(f){const n={};return f.forEach(({propName:t,templateName:r})=>{n[function k(f){return f.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}(r)]=t}),n}(t);class g extends be{constructor(x){super(),this.injector=x}get ngElementStrategy(){if(!this._ngElementStrategy){const x=this._ngElementStrategy=r.create(this.injector||n.injector);t.forEach(({propName:Y})=>{if(!this.hasOwnProperty(Y))return;const ie=this[Y];delete this[Y],x.setInputValue(Y,ie)})}return this._ngElementStrategy}attributeChangedCallback(x,Y,ie,Me){this.ngElementStrategy.setInputValue(c[x],ie)}connectedCallback(){let x=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),x=!0),this.ngElementStrategy.connect(this),x||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(x=>{const Y=new CustomEvent(x.name,{detail:x.value});this.dispatchEvent(Y)})}}return g.observedAttributes=Object.keys(c),t.forEach(({propName:v})=>{Object.defineProperty(g.prototype,v,{get(){return this.ngElementStrategy.getInputValue(v)},set(x){this.ngElementStrategy.setInputValue(v,x)},configurable:!0,enumerable:!0})}),g}var V=w(9808),de=w(5782),Q=w(2382),pe=w(3607),me=w(1511),xe=w(377);let _e=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,de.m,Q.UX,xe.ProfilesViewPageModule]]}),f})(),Ie=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,de.m,_e,Q.UX,R.Bz]]}),f})(),Te=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({providers:[],imports:[[V.ez,Q.u5,de.m,Q.UX,R.Bz]]}),f})(),ke=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,de.m,Q.UX,R.Bz,Te]]}),f})(),Ue=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,de.m,Q.UX,xe.ProfilesViewPageModule,R.Bz]]}),f})(),Fe=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,de.m,Q.UX,xe.ProfilesViewPageModule,R.Bz]]}),f})(),je=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[V.ez,Q.u5,pe.U,Ie,Fe,ke,Ue,Q.UX,de.m,me.g,R.Bz.forChild([])]]}),f})();var Pe=w(4857),He=w(2571),Le=w(1085),ye=w(2330),ae=w(4322);function W(f,n){if(1&f&&(e.TgZ(0,"div",13),e._UZ(1,"i",14),e._uU(2),e.qZA()),2&f){const t=e.oxw();e.xp6(2),e.hij("",t.serverErrorMessage," ")}}function ce(f,n){1&f&&e._UZ(0,"div",15)}const De=function(f){return{error:f}},le=function(f){return{disable:f}};let ne=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.formBuilder=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.serverErrorMessage=void 0,this.closeChangePassword=new e.vpe,this.changePasswordForm=this.formBuilder.group({password:new Q.NI("",[Q.kI.required]),confirmPassword:new Q.NI("",[Q.kI.required]),currentPassword:new Q.NI("",[Q.kI.required])}),this.loading=!1}ngOnInit(){}changePasword(){this.changePasswordForm.valid?(this.changePasswordData={UserId:this.sharedData.userData.Id,Password:this.changePasswordForm.value.password,ConfirmPassword:this.changePasswordForm.value.confirmPassword,CurrentPassword:this.changePasswordForm.value.currentPassword},this.loading=!0,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/ChangePassword",this.changePasswordData).then(t=>{this.loading=!1,this.closeChangePassword.emit(!0)},t=>{this.loading=!1,this.serverErrorMessage=t,console.error(t)})):(this.serverErrorMessage=void 0,this.changePasswordForm.markAllAsTouched())}isInvalidFormControl(t){return!(!this.changePasswordForm.controls[t].invalid||!this.changePasswordForm.controls[t].dirty&&!this.changePasswordForm.controls[t].touched)}hasRequireErrorFormControl(t){return!!this.changePasswordForm.controls[t].errors.required}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(Q.qu),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-change-password"]],outputs:{closeChangePassword:"closeChangePassword"},features:[e.qOj],decls:24,vars:20,consts:[[1,"sinovad-page-section-container"],["class","sinovad-server-error-message-content",4,"ngIf"],[1,"sinovad-page-section-content"],[1,"button-container"],[1,"cancel",3,"click"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group",3,"ngClass"],["type","password","formControlName","password"],["type","password","formControlName","confirmPassword"],["type","password","formControlName","currentPassword"],[1,"submit-button-container"],["type","submit",3,"ngClass"],["class","lds-dual-ring",4,"ngIf"],[1,"sinovad-server-error-message-content"],[1,"fa-solid","fa-triangle-exclamation","me-2"],[1,"lds-dual-ring"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.YNc(1,W,3,1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){return r.closeChangePassword.emit(!0)}),e._uU(5,"Cancelar"),e.qZA(),e.qZA(),e.TgZ(6,"form",5),e.NdJ("ngSubmit",function(){return r.changePasword()}),e.TgZ(7,"div",6),e.TgZ(8,"label"),e._uU(9),e.qZA(),e._UZ(10,"input",7),e.qZA(),e.TgZ(11,"div",6),e.TgZ(12,"label"),e._uU(13),e.qZA(),e._UZ(14,"input",8),e.qZA(),e.TgZ(15,"div",6),e.TgZ(16,"label"),e._uU(17),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"div",10),e.TgZ(20,"button",11),e.TgZ(21,"span"),e._uU(22,"Guardar Cambios"),e.qZA(),e.YNc(23,ce,1,0,"div",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",r.serverErrorMessage),e.xp6(5),e.Q6J("formGroup",r.changePasswordForm),e.xp6(1),e.Q6J("ngClass",e.VKq(12,De,r.isInvalidFormControl("password"))),e.xp6(2),e.hij(" Contrase\xf1a",r.isInvalidFormControl("password")&&r.hasRequireErrorFormControl("password")?" - Se requiere Contrase\xf1a":""," "),e.xp6(2),e.Q6J("ngClass",e.VKq(14,De,r.isInvalidFormControl("confirmPassword"))),e.xp6(2),e.hij("Confirme la nueva contrase\xf1a",r.isInvalidFormControl("confirmPassword")&&r.hasRequireErrorFormControl("confirmPassword")?" - Confirme la contrase\xf1a":"",""),e.xp6(2),e.Q6J("ngClass",e.VKq(16,De,r.isInvalidFormControl("currentPassword"))),e.xp6(2),e.hij("Contrase\xf1a actual",r.isInvalidFormControl("currentPassword")&&r.hasRequireErrorFormControl("currentPassword")?" - Introduza la contrase\xf1a actual":"",""),e.xp6(3),e.Q6J("ngClass",e.VKq(18,le,r.loading)),e.xp6(1),e.Udp("visibility",r.loading?"hidden":"unset"),e.xp6(2),e.Q6J("ngIf",r.loading))},directives:[V.O5,Q._Y,Q.JL,Q.sg,V.mk,Q.Fj,Q.JJ,Q.u],styles:['.sinovad-page-section-container[_ngcontent-%COMP%]{color:#fff;border-top:2px solid rgba(0,0,0,.3);background:rgba(0,0,0,.3)}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]{padding:20px 30px 25px}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column;float:right;margin-top:5px;padding-bottom:25px;white-space:nowrap}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;padding:0;text-align:inherit;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.8}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.edit[_ngcontent-%COMP%], .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.cancel[_ngcontent-%COMP%]{color:#fff}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{font-size:15px}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ffffff73;display:block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;margin:5px 0;text-transform:uppercase}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ffffff73;display:block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;margin:5px 0;text-transform:uppercase;font-weight:400}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:4px;font-family:Open Sans Regular,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;line-height:1.71428571;max-width:360px;vertical-align:middle;width:100%;font-size:15px;height:36px;transition:background-color .2s;padding:5px 10px}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:red}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:2px solid #f53}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]{margin:30px 0 0;text-align:right}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:relative;border-radius:4px;display:inline-block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;overflow:hidden;text-align:center;text-transform:uppercase;transition:background-color .2s,color .2s;vertical-align:middle;white-space:nowrap;font-size:13px;padding:5px 20px;background-color:#007bff;color:#fff;opacity:.8;outline:none;border:none}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]   button.disable[_ngcontent-%COMP%]{pointer-events:none}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-server-error-message-content[_ngcontent-%COMP%]{background-color:#ff55334d;border-bottom:2px solid #f53;color:#fff;flex-shrink:0;font-size:15px;margin-top:-2px;overflow:hidden;padding:20px 30px}.lds-dual-ring[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;position:absolute;margin-left:-43%;margin-top:-2px}.lds-dual-ring[_ngcontent-%COMP%]:after{content:" ";display:block;width:20px;height:20px;margin:2px;border-radius:50%;border:2px solid #fff;border-color:#fff transparent #fff transparent;animation:lds-dual-ring 1.2s linear infinite}@keyframes lds-dual-ring{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']}),f})();function z(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().isCollapsedChangePasswordSection=!1}),e.TgZ(1,"div",3),e.TgZ(2,"div",8),e.TgZ(3,"button",9),e._uU(4,"Editar"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"label"),e._uU(7,"Contrase\xf1a"),e.qZA(),e.TgZ(8,"span"),e._uU(9,"*********"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function te(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-change-password",10),e.NdJ("closeChangePassword",function(){return e.CHM(t),e.oxw().isCollapsedChangePasswordSection=!0}),e.qZA()}}let X=(()=>{class f extends Pe.X{constructor(t,r,c,g,v){super(t,c,g,v),this.restProvider=t,this.http=r,this.events=c,this.domSanitizer=g,this.sharedData=v,this.isCollapsedChangePasswordSection=!0}ngOnInit(){}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-account"]],features:[e.qOj],decls:20,vars:4,consts:[[1,"sinovad-page-container"],[1,"sinovad-page-title"],[1,"sinovad-page-section-container"],[1,"sinovad-page-section-content"],[1,"detail"],["class","sinovad-page-section-container","role","button",3,"click",4,"ngIf"],[3,"closeChangePassword",4,"ngIf"],["role","button",1,"sinovad-page-section-container",3,"click"],[1,"button-container"],[1,"edit"],[3,"closeChangePassword"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2"),e._uU(3,"Cuenta"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"label"),e._uU(8,"Nombre de Usuario"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",2),e.TgZ(12,"div",3),e.TgZ(13,"div",4),e.TgZ(14,"label"),e._uU(15,"Correo electr\xf3nico"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(18,z,10,0,"div",5),e.YNc(19,te,1,0,"app-change-password",6),e.qZA()),2&t&&(e.xp6(10),e.Oqu(r.sharedData.userData.UserName),e.xp6(7),e.Oqu(r.sharedData.userData.Email),e.xp6(1),e.Q6J("ngIf",r.isCollapsedChangePasswordSection),e.xp6(1),e.Q6J("ngIf",!r.isCollapsedChangePasswordSection))},directives:[V.O5,ne],styles:[".sinovad-page-container[_ngcontent-%COMP%]{padding:0 20px 48px 30px;max-width:1030px;display:flex;flex-direction:column;flex-grow:1;margin:0 auto;width:100%}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px;margin-top:40px;font-size:24px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]{color:#fff;border-top:2px solid rgba(0,0,0,.3)}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]{padding:20px 30px 25px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column;float:right;margin-top:5px;padding-bottom:25px;white-space:nowrap}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;padding:0;text-align:inherit;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.8}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button.edit[_ngcontent-%COMP%]{color:#fff}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{font-size:15px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ffffff73;display:block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;margin:5px 0;text-transform:uppercase}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#ffffff73;display:block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;margin:5px 0;text-transform:uppercase;font-weight:400}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0;border-radius:4px;font-family:Open Sans Regular,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;line-height:1.71428571;max-width:360px;vertical-align:middle;width:100%;font-size:15px;height:36px;transition:background-color .2s;padding:5px 10px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]{margin:30px 0 0;text-align:right}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;display:inline-block;font-family:Open Sans Semibold,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;overflow:hidden;text-align:center;text-transform:uppercase;transition:background-color .2s,color .2s;vertical-align:middle;white-space:nowrap;font-size:13px;padding:5px 20px;background-color:#007bff;color:#fff;opacity:.8;outline:none;border:none}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]   .sinovad-page-section-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .submit-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container[_ngcontent-%COMP%]:hover{background-color:#00000026}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-section-container.showing[_ngcontent-%COMP%]{background:rgba(0,0,0,.3)}"]}),f})();class ${constructor(){this.IsButton=!0}}const K=function(f,n){return{active:f,disabled:n}};function oe(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"li",1),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().onSelectPage(g.Text)}),e.TgZ(1,"button",4),e._uU(2),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw();e.Q6J("ngClass",e.WLB(2,K,t.IsButton&&t.Text==r.responsePagination.PageNumber.toString(),!t.IsButton)),e.xp6(2),e.Oqu(t.Text)}}const Ce=function(f){return{disabled:f}};let Oe=(()=>{class f extends Pe.X{constructor(t,r,c,g,v){super(t,c,g,v),this.restProvider=t,this.http=r,this.events=c,this.domSanitizer=g,this.sharedData=v,this.selectPage=new e.vpe}ngOnInit(){this.updatePagination()}updatePagination(){var t=[],r=this.responsePagination.PageNumber,c=this.responsePagination.TotalPages;if(c<=5)for(var g=1;g<=c;g++)(v=new $).Text=g.toString(),t.push(v);else{r>2&&(t.push({Text:"1",IsButton:!0}),r>3&&t.push({Text:"...",IsButton:!1}));var x=r>1?r-1:r,Y=x+5>c?c:x+5;for(g=x;g<=Y;g++){var v;(v=new $).Text=g.toString(),t.push(v)}Y<c&&(Y+1<c&&t.push({Text:"...",IsButton:!1}),t.push({Text:this.responsePagination.TotalPages.toString(),IsButton:!0}))}this.listPages=t}ngOnChanges(){this.updatePagination()}ngAfterViewInit(){}onSelectPreviousPage(){this.selectPage.emit((this.responsePagination.PageNumber-1).toString())}onSelectPage(t){this.selectPage.emit(t)}onSelectNextPage(){this.selectPage.emit((this.responsePagination.PageNumber+1).toString())}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-pagination"]],inputs:{responsePagination:"responsePagination"},outputs:{selectPage:"selectPage"},features:[e.qOj,e.TTD],decls:8,vars:7,consts:[[1,"pagination","justify-content-center","text-truncate"],[1,"page-item",3,"ngClass","click"],["tabindex","-1",1,"page-link"],["ngFor","",3,"ngForOf"],[1,"page-link"]],template:function(t,r){1&t&&(e.TgZ(0,"ul",0),e.TgZ(1,"li",1),e.NdJ("click",function(){return r.onSelectPreviousPage()}),e.TgZ(2,"button",2),e._uU(3,"Previous"),e.qZA(),e.qZA(),e.YNc(4,oe,3,5,"ng-template",3),e.TgZ(5,"li",1),e.NdJ("click",function(){return r.onSelectNextPage()}),e.TgZ(6,"button",4),e._uU(7,"Next"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",e.VKq(3,Ce,!r.responsePagination.HasPreviousPage)),e.xp6(3),e.Q6J("ngForOf",r.listPages),e.xp6(1),e.Q6J("ngClass",e.VKq(5,Ce,!r.responsePagination.HasNextPage)))},directives:[V.mk,V.sg],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})(),Ze=(()=>{class f{constructor(t){this.elementRef=t,this.clickOutside=new e.vpe}ngOnInit(){}ngAfterViewInit(){}onClick(t,r){r&&(this.elementRef.nativeElement.contains(r)||this.clickOutside.emit(t))}onContextMenu(){console.log("contextmenu")}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.SBq))},f.\u0275dir=e.lG2({type:f,selectors:[["","clickOutside",""]],hostBindings:function(t,r){1&t&&e.NdJ("click",function(g){return r.onClick(g,g.target)},!1,e.Jf7)("contextmenu",function(){return r.onContextMenu()})},outputs:{clickOutside:"clickOutside"}}),f})();function st(f,n){if(1&f&&e._UZ(0,"img",7),2&f){const t=e.oxw().$implicit;e.Q6J("src",t.imageUrl,e.LSH)}}function et(f,n){if(1&f&&e._UZ(0,"i"),2&f){const t=e.oxw().$implicit;e.Tol(t.iconClass)}}function ct(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().onClickContextMenuOption(g)}),e.TgZ(1,"div",3),e.YNc(2,st,1,1,"img",4),e.YNc(3,et,1,3,"i",5),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit;e.Udp("border-bottom",t.showBorderBottom?"1px solid black":""),e.xp6(2),e.Q6J("ngIf",t.imageUrl),e.xp6(1),e.Q6J("ngIf",t.iconClass),e.xp6(2),e.hij(" ",t.text," ")}}let xt=(()=>{class f{constructor(t,r,c,g,v,x,Y){this.ref=t,this.viewContainerRef=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.hideContextMenu=new e.vpe,this.clickOption=new e.vpe}ngOnInit(){}ngOnDestroy(){this.hideContextMenu.emit(!0)}ngAfterViewInit(){}onClickOutside(){this.hideContextMenu.emit(!0)}onClickContextMenuOption(t){this.clickOption.emit(t)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(e.s_b),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-context-menu-content"]],decls:2,vars:5,consts:[[1,"sinovad-context-menu-item-list",3,"clickOutside"],["ngFor","",3,"ngForOf"],[1,"sinovad-context-menu-option",3,"click"],[1,"sinovad-context-menu-option-icon"],["style","width:24px;",3,"src",4,"ngIf"],[3,"class",4,"ngIf"],[1,"sinovad-context-menu-option-text"],[2,"width","24px",3,"src"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.NdJ("clickOutside",function(){return r.onClickOutside()}),e.YNc(1,ct,6,5,"ng-template",1),e.qZA()),2&t&&(e.Udp("top",r.top+"px")("left",r.left+"px"),e.xp6(1),e.Q6J("ngForOf",r.listOptions))},directives:[Ze,V.sg,V.O5],styles:[".sinovad-context-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;border-radius:5px;background:#131313;border:1px solid rgba(151,151,151,.34);box-shadow:#00000080 0 0 18px;color:#fff}.sinovad-context-menu-option[_ngcontent-%COMP%]{display:flex;padding:10px;cursor:pointer;align-items:center;opacity:.8}.sinovad-context-menu-option[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-context-menu-option-icon[_ngcontent-%COMP%]{display:block}.sinovad-context-menu-option-text[_ngcontent-%COMP%]{padding-left:10px;display:block}"]}),f})(),tt=(()=>{class f{constructor(t,r,c,g){this.viewContainerRef=t,this.factoryResolver=r,this.injector=c,this.applicationRef=g}show(t,r,c,g){return new Promise((v,x)=>{null!=this.lastViewRef&&this.applicationRef.detachView(this.lastViewRef);const ie=this.factoryResolver.resolveComponentFactory(xt).create(this.injector);this.lastViewRef=ie.hostView,this.applicationRef.attachView(ie.hostView);let Me=this;ie.instance.left=r,ie.instance.top=c,ie.instance.listOptions=g,ie.instance.clickOption.subscribe(qe=>{Me.applicationRef.detachView(ie.hostView),qe.eventOnSelectOption&&qe.eventOnSelectOption.emit(!0),v(qe)}),ie.instance.hideContextMenu.subscribe(qe=>{Me.applicationRef.detachView(ie.hostView)});const Re=ie.hostView.rootNodes[0];document.getElementById(t).appendChild(Re)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.s_b),e.Y36(e._Vd),e.Y36(e.zs3),e.Y36(e.z2F))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-context-menu"]],decls:0,vars:0,template:function(t,r){},encapsulation:2}),f})();const Et=["contextMenuPage"],Kt=function(f){return{selected:f}},_t=function(f){return{disable:f}};function At(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",16),e.TgZ(1,"th",17),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",19),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(4,Kt,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Name),e.xp6(2),e.Q6J("ngClass",e.VKq(6,_t,c.isItemDisableForEdit(t)))}}function Pt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",21),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}let Yt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.pageSize=10,this.listSelectedItems=[],this.showContextMenu=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/roles/GetAllWithPaginationAsync?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}showItemForm(){}editItem(t){}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r),this.renderContextMenuComponent(t.clientX,t.clientY,[])}onClickContextMenuOption(t){"delete"==t.key&&console.log(t)}renderContextMenuComponent(t,r,c){this.contextMenuPage.show("sinovadMainContainer",t,r,c).then(g=>{this.onClickContextMenuOption(g)})}isItemDisableForEdit(t){return!1}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-role-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(Et,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},features:[e.qOj],decls:33,vars:2,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3," Roles"),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,At,8,8,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"div",10),e.YNc(30,Pt,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e._UZ(31,"app-context-menu",null,15)),2&t&&(e.xp6(27),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response))},directives:[V.sg,V.mk,V.O5,Oe,tt],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),f})();var jt=w(6292);const en=["modalTarget"];function an(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Mensaje de Confirmaci\xf3n"),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e._uU(4),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(7,"Si"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(9,"No"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(4),e.hij(" ",t.message," ")}}let Ln=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.confirm=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.confirm.emit(!0)},t=>{this.close.emit(!0)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-confirm-message-modal"]],viewQuery:function(t,r){if(1&t&&e.Gf(en,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{message:"message"},outputs:{close:"close",confirm:"confirm"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&e.YNc(0,an,10,1,"ng-template",null,0,e.W1O)},styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();const wn=["contextMenuPage"],Vn=function(f){return{selected:f}};function Hn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",14),e.TgZ(1,"th",15),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(6),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(4,Vn,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.IpAddress),e.xp6(2),e.Oqu(t.Url)}}function it(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",17),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Qe(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",18),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&f&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let mt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(t,c,g,x),this.restProvider=t,this.ref=r,this.events=c,this.domSanitizer=g,this.activeRoute=v,this.sharedData=x,this.http=Y,this._window=window,this.listItems=[],this.listSelectedItems=[],this.showPopUpForm=!1,this.showListEpisodesPopUp=!1,this.pageSize=10,this.showConfirmMessageBox=!1}ngOnInit(){this.getAllItems()}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/mediaServers/GetAllWithPaginationByUserAsync/"+this.parentItem.Id+"?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){this.showConfirmMessageBox=!1;let t=[];for(let c=0;c<this.listSelectedItems.length;c++)t.push(this.listSelectedItems[c].Id);var r=t.join(",");this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/seasons/DeleteList/"+r).then(c=>{this.listSelectedItems=[],this.getAllItems()},c=>{console.error(c)})}deleteSelectedItems(){this.showConfirmMessageBox=!0}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r),this.contextMenuPage.show("sinovadMainContainer",t.clientX,t.clientY,[]).then(g=>{this.onClickContextMenuOption(g)})}onClickContextMenuOption(t){"view"==t.key&&(this.showListEpisodesPopUp=!0),"delete"==t.key&&this.deleteSelectedItems()}showItemForm(){}editItem(t){}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-media-server-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(wn,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},inputs:{parentItem:"parentItem"},features:[e.qOj],decls:30,vars:4,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],[3,"responsePagination","selectPage"],[3,"message","close","confirm"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"div",7),e.TgZ(13,"table",8),e.TgZ(14,"thead"),e.TgZ(15,"tr"),e.TgZ(16,"th",9),e._uU(17,"N\xb0"),e.qZA(),e.TgZ(18,"th",9),e._uU(19,"Ip Address"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"Url"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"tbody"),e.YNc(23,Hn,7,6,"ng-template",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"div",1),e.TgZ(25,"div",7),e.YNc(26,it,1,1,"app-pagination",11),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,Qe,1,1,"app-confirm-message-modal",12),e._UZ(28,"app-context-menu",null,13)),2&t&&(e.xp6(3),e.hij("",r.parentItem.UserName," : Servidores multimedia"),e.xp6(20),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(1),e.Q6J("ngIf",r.showConfirmMessageBox))},directives:[V.sg,V.mk,V.O5,Oe,Ln,tt],styles:[".selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),f})();const Ft=["modalTarget"];function tn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-media-server-list",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.hij("",t.parent.UserName," : Servidores Multimedia"),e.xp6(3),e.Q6J("parentItem",t.parent)}}function Wt(f,n){if(1&f&&e.YNc(0,tn,9,2,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.parent)}}let vt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(r,g,v,Y),this.modalService=t,this.restProvider=r,this.ref=c,this.events=g,this.domSanitizer=v,this.activeRoute=x,this.sharedData=Y,this.http=ie,this.close=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{},t=>{this.close.emit(!0)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(e.sBO),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-media-server-list-modal"]],viewQuery:function(t,r){if(1&t&&e.Gf(Ft,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{parent:"parent"},outputs:{close:"close"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"parentItem"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,Wt,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,mt],styles:[""]}),f})();const pt=["contextMenuPage"],rt=function(f){return{selected:f}};function Xe(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",14),e.TgZ(1,"th",15),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(6),e.qZA(),e.TgZ(7,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(8),e.qZA(),e.TgZ(9,"td",16),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(10),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(6,rt,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.UserName),e.xp6(2),e.Oqu(t.Email),e.xp6(2),e.Oqu(t.FirstName),e.xp6(2),e.Oqu(t.LastName)}}function yt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",17),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Zt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-media-server-list-modal",18),e.NdJ("close",function(){return e.CHM(t),e.oxw().showMediaServersModal=!1}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("parent",t.lastSelectedItem)}}let Jt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.pageSize=10,this.listSelectedItems=[],this.showContextMenu=!1,this.showPopUpForm=!1,this.showMediaServersModal=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/users/GetAllWithPaginationAsync?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}showItemForm(){}editItem(t){this.showPopUpForm=!0}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];var g=this,v=new e.vpe;v.subscribe(x=>{g.showMediaServersModal=!0}),c.push({text:"Servidores multimedia",iconClass:"fa-solid fa-server",eventOnSelectOption:v}),c&&c.length>0&&this.renderContextMenuComponent(t.clientX,t.clientY,c)}onClickContextMenuOption(t){"delete"==t.key&&console.log(t)}renderContextMenuComponent(t,r,c){this.contextMenuPage.show("sinovadMainContainer",t,r,c).then(g=>{this.onClickContextMenuOption(g)})}isItemDisableForEdit(t){return!1}onSaveItem(){this.showPopUpForm=!1,this.getAllItems(),this.getMenus()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-user-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(pt,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},features:[e.qOj],decls:34,vars:3,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],["contextMenuPage",""],[3,"parent","close",4,"ngIf"],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],[3,"responsePagination","selectPage"],[3,"parent","close"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3,"Usuarios"),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"div",7),e.TgZ(13,"table",8),e.TgZ(14,"thead"),e.TgZ(15,"tr"),e.TgZ(16,"th",9),e._uU(17,"N\xb0"),e.qZA(),e.TgZ(18,"th",9),e._uU(19,"Username"),e.qZA(),e.TgZ(20,"th",9),e._uU(21,"Correo"),e.qZA(),e.TgZ(22,"th",9),e._uU(23,"Nombres"),e.qZA(),e.TgZ(24,"th",9),e._uU(25,"Apellidos"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,Xe,11,8,"ng-template",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"div",7),e.YNc(30,yt,1,1,"app-pagination",11),e.qZA(),e.qZA(),e.qZA(),e._UZ(31,"app-context-menu",null,12),e.YNc(33,Zt,1,1,"app-media-server-list-modal",13)),2&t&&(e.xp6(27),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(3),e.Q6J("ngIf",r.showMediaServersModal))},directives:[V.sg,V.mk,V.O5,Oe,tt,vt],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),f})();const on=["modalTarget"];function pn(f,n){if(1&f&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Mn(f,n){if(1&f&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Wn(f,n){if(1&f&&(e.YNc(0,pn,2,2,"option",26),e.YNc(1,Mn,2,2,"option",27)),2&f){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngIf",t.Id==r.menu.IconTypeCatalogDetailId),e.xp6(1),e.Q6J("ngIf",t.Id!=r.menu.IconTypeCatalogDetailId)}}function Qn(f,n){if(1&f&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.ParentId),e.xp6(1),e.Oqu(t.Title)}}function gr(f,n){if(1&f&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.ParentId),e.xp6(1),e.Oqu(t.Title)}}function Ir(f,n){if(1&f&&(e.YNc(0,Qn,2,2,"option",26),e.YNc(1,gr,2,2,"option",27)),2&f){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngIf",t.Id!=r.menu.Id&&t.Id==r.menu.ParentId),e.xp6(1),e.Q6J("ngIf",t.Id!=r.menu.Id&&t.Id!=r.menu.ParentId)}}function ut(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"label",7),e._uU(7,"T\xedtulo"),e.qZA(),e.TgZ(8,"textarea",8),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).menu.Title=c}),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",9),e._uU(11,"Path"),e.qZA(),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).menu.Path=c}),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",11),e._uU(15,"Tipo de \xcdcono"),e.qZA(),e.TgZ(16,"select",12),e.NdJ("change",function(c){return e.CHM(t),e.oxw(2).onChangeIconType(c)}),e.YNc(17,Wn,2,2,"ng-template",13),e.qZA(),e.qZA(),e.TgZ(18,"div",6),e.TgZ(19,"label",14),e._uU(20,"Icon Class"),e.qZA(),e.TgZ(21,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).menu.IconClass=c}),e.qZA(),e.qZA(),e.TgZ(22,"div",6),e.TgZ(23,"label",16),e._uU(24,"N\xfamero de Orden"),e.qZA(),e.TgZ(25,"input",17),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).menu.SortOrder=c}),e.qZA(),e.qZA(),e.TgZ(26,"div",6),e.TgZ(27,"label",18),e._uU(28,"Padre"),e.qZA(),e.TgZ(29,"select",19),e.NdJ("change",function(c){return e.CHM(t),e.oxw(2).onChangeParent(c)}),e.YNc(30,Ir,2,2,"ng-template",13),e.qZA(),e.qZA(),e.TgZ(31,"div",20),e.TgZ(32,"label",21),e._uU(33,"Activo"),e.qZA(),e.TgZ(34,"input",22),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).menu.Enabled=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",23),e.TgZ(36,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(37,"Close"),e.qZA(),e.TgZ(38,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(39,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu(t.menu.Id>0?"Editar":"Nuevo"),e.xp6(6),e.Q6J("ngModel",t.menu.Title),e.xp6(4),e.Q6J("ngModel",t.menu.Path),e.xp6(5),e.Q6J("ngForOf",t.listIconTypes),e.xp6(4),e.Q6J("ngModel",t.menu.IconClass),e.xp6(4),e.Q6J("ngModel",t.menu.SortOrder),e.xp6(5),e.Q6J("ngForOf",t.listMenus),e.xp6(4),e.Q6J("ngModel",t.menu.Enabled)}}function zt(f,n){if(1&f&&e.YNc(0,ut,40,8,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.menu)}}let dn=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){this.getAllMenus(),this.getIconTypes()}getAllMenus(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/menus/GetAllAsync").then(r=>{this.listMenus=r.Data},r=>{console.error(r)})}getIconTypes(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/catalogs/GetDetailsByCatalogAsync/"+ae.P9.IconTypes).then(r=>{this.listIconTypes=r.Data},r=>{console.error(r)})}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.close.emit(!0)})}saveItem(){this.restProvider.executeSinovadApiService(this.menu.Id>0?ae.yw.PUT:ae.yw.POST,this.menu.Id>0?"/menus/Update":"/menus/Create",this.menu).then(c=>{this.closeWithChanges.emit(!0)},c=>{console.error(c)})}onChangeParent(t){this.menu.ParentId=Number(t.target.value)}onChangeIconType(t){this.menu.IconTypeCatalogId=ae.P9.IconTypes,this.menu.IconTypeCatalogDetailId=Number(t.target.value)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-menu-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(on,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{menu:"menu"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],["for","path",1,"form-label"],["id","path","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","iconType",1,"form-label"],["id","iconType","aria-label","Seleccionar",1,"form-select",3,"change"],["ngFor","",3,"ngForOf"],["for","iconClass",1,"form-label"],["id","iconClass","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","sortOrder",1,"form-label"],["id","sortOrder","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","typeFormControlId",1,"form-label"],["id","typeFormControlId","aria-label","Seleccionar Padre",1,"form-select",3,"change"],[1,"mb-3","d-inline","align-middle"],["for","enabled",1,"form-label"],["id","enabled","type","checkbox",1,"form-check-input","ms-2",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngIf"],["selected","",3,"value"],[3,"value"]],template:function(t,r){1&t&&e.YNc(0,zt,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,Q.Fj,Q.JJ,Q.On,V.sg,Q.YN,Q.Kr,Q.wV,Q.Wl],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}.form-check-input[_ngcontent-%COMP%]{width:18px;height:18px}"]}),f})();const It=["contextMenuPage"],kt=function(f){return{selected:f}},Rt=function(f){return{disable:f}};function sn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",17),e.TgZ(1,"th",18),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",19),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td",19),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(6),e.qZA(),e.TgZ(7,"td",19),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(8),e.qZA(),e.TgZ(9,"td",19),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"button",20),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(13,"i",21),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(7,kt,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Title),e.xp6(2),e.Oqu(t.Path),e.xp6(2),e.Oqu(t.IconClass),e.xp6(2),e.Oqu(t.SortOrder),e.xp6(2),e.Q6J("ngClass",e.VKq(9,Rt,c.isItemDisableForEdit(t)))}}function Fn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",22),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function Un(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-menu-form",23),e.NdJ("close",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveItem()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("menu",t.menu)}}let Ot=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.pageSize=10,this.listSelectedItems=[],this.showContextMenu=!1,this.showPopUpForm=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/menus/GetAllWithPaginationAsync?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}showItemForm(){}editItem(t){this.menu=JSON.parse(JSON.stringify(t)),this.showPopUpForm=!0}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];c&&c.length>0&&this.renderContextMenuComponent(t.clientX,t.clientY,c)}onClickContextMenuOption(t){"delete"==t.key&&console.log(t)}renderContextMenuComponent(t,r,c){this.contextMenuPage.show("sinovadMainContainer",t,r,c).then(g=>{this.onClickContextMenuOption(g)})}isItemDisableForEdit(t){return!1}onSaveItem(){this.showPopUpForm=!1,this.getAllItems(),this.getMenus()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-menu-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(It,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},features:[e.qOj],decls:40,vars:3,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"menu","close","closeWithChanges",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"menu","close","closeWithChanges"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3," Menu"),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"Path"),e.qZA(),e.TgZ(26,"th",12),e._uU(27,"Icon Class"),e.qZA(),e.TgZ(28,"th",12),e._uU(29,"N\xfamero de Orden"),e.qZA(),e.TgZ(30,"th",12),e._uU(31,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"tbody"),e.YNc(33,sn,14,11,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",1),e.TgZ(35,"div",10),e.YNc(36,Fn,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e.YNc(37,Un,1,1,"app-menu-form",15),e._UZ(38,"app-context-menu",null,16)),2&t&&(e.xp6(33),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(1),e.Q6J("ngIf",r.showPopUpForm))},directives:[V.sg,V.mk,V.O5,Oe,dn,tt],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),f})();const Ct=["contextMenuPage"],Gt=function(f){return{selected:f}},qt=function(f){return{disable:f}};function bn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",16),e.TgZ(1,"th",17),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",18),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",19),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(7,"i",20),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(4,Gt,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Name),e.xp6(2),e.Q6J("ngClass",e.VKq(6,qt,c.isItemDisableForEdit(t)))}}function Nn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",21),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}let Dt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.pageSize=10,this.listSelectedItems=[],this.showContextMenu=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/genres/GetAllWithPaginationAsync?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}showItemForm(){}editItem(t){}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];c.push({text:"Eliminar",key:"delete",iconClass:"fa-solid fa-trash"}),c&&c.length>0&&this.renderContextMenuComponent(t.clientX,t.clientY,c)}onClickContextMenuOption(t){"delete"==t.key&&console.log(t)}renderContextMenuComponent(t,r,c){this.contextMenuPage.show("sinovadMainContainer",t,r,c).then(g=>{this.onClickContextMenuOption(g)})}isItemDisableForEdit(t){return!!t.TmdbId}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-genre-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(Ct,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},features:[e.qOj],decls:33,vars:2,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3," G\xe9neros"),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,bn,8,8,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"div",10),e.YNc(30,Nn,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e._UZ(31,"app-context-menu",null,15)),2&t&&(e.xp6(27),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response))},directives:[V.sg,V.mk,V.O5,Oe,tt],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),f})();class vn{}const Rn=["modalTarget"];function Yn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"label",11),e._uU(2),e.qZA(),e.TgZ(3,"img",12),e.NdJ("error",function(){const g=e.CHM(t).$implicit,v=e.MAs(5);return e.oxw(3).onInitializeGenrePopUp(g,v)}),e.qZA(),e._UZ(4,"input",13,14),e.qZA()}if(2&f){const t=n.$implicit,r=n.index;e.xp6(1),e.MGl("for","genre_",r,""),e.xp6(1),e.Oqu(t.Name),e.xp6(2),e.MGl("id","genre_",r,"")}}function ar(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.YNc(5,Yn,6,3,"ng-template",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.TgZ(9,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(10,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu("G\xe9neros"),e.xp6(3),e.Q6J("ngForOf",t.listAllGenresPopUp)}}function ur(f,n){if(1&f&&e.YNc(0,ar,11,2,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.tvProgram)}}let br=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.selectItemGenres()},t=>{this.close.emit(!0)})}onInitializeGenrePopUp(t,r){t.Checkbox=r,this.tvProgram.ListItemGenres&&-1!=this.tvProgram.ListItemGenres.findIndex(g=>g.GenreId==t.Id)&&(t.Checkbox.checked=!0)}selectItemGenres(){let t=this.listAllGenresPopUp.filter(c=>c.Checkbox.checked),r=[];t.forEach(c=>{r.push({GenreName:c.Name,GenreId:c.Id})}),this.closeWithChanges.emit(r)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-item-genres"]],viewQuery:function(t,r){if(1&t&&e.Gf(Rn,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{tvProgram:"tvProgram",listAllGenresPopUp:"listAllGenresPopUp"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:3,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["ngFor","",3,"ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mb-3"],[1,"form-label",3,"for"],["src","",2,"display","none",3,"error"],["type","checkbox",1,"ms-2",3,"id"],["checkbox",""]],template:function(t,r){1&t&&(e.YNc(0,ur,1,1,"ng-template",null,0,e.W1O),e._uU(2," <\n"))},directives:[V.O5,V.sg],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();const Cr=["modalTarget"];function Hr(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",22),e._uU(2,"T\xedtulo"),e.qZA(),e.TgZ(3,"textarea",23),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(3).tvProgram.Title=c}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.tvProgram.Title)}}function Er(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",24),e._uU(2,"Nombre"),e.qZA(),e.TgZ(3,"textarea",25),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(3).tvProgram.Name=c}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.tvProgram.Name)}}function Ii(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",26),e._uU(2,"Fecha Lanzamiento"),e.qZA(),e.TgZ(3,"input",27),e.NdJ("change",function(c){e.CHM(t);const g=e.oxw(3);return g.tvProgram.ReleaseDate=g.getTargetDateValue(c.target)}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.ReleaseDate)}}function Si(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",28),e._uU(2,"Primera Fecha de Emision"),e.qZA(),e.TgZ(3,"input",29),e.NdJ("change",function(c){e.CHM(t);const g=e.oxw(3);return g.tvProgram.FirstAirDate=g.getTargetDateValue(c.target)}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.FirstAirDate)}}function ti(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"label",30),e._uU(2,"\xdaltima Fecha de Emision"),e.qZA(),e.TgZ(3,"input",31),e.NdJ("change",function(c){e.CHM(t);const g=e.oxw(3);return g.tvProgram.LastAirDate=g.getTargetDateValue(c.target)}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(3);e.xp6(3),e.Q6J("valueAsDate",t.tvProgram.LastAirDate)}}function oi(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",6),e.YNc(5,Hr,4,1,"div",7),e.YNc(6,Er,4,1,"div",7),e.YNc(7,Ii,4,1,"div",7),e.YNc(8,Si,4,1,"div",7),e.YNc(9,ti,4,1,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"label",9),e._uU(12,"Directores"),e.qZA(),e.TgZ(13,"textarea",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).tvProgram.Directors=c}),e.qZA(),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"label",11),e._uU(16,"Actores"),e.qZA(),e.TgZ(17,"textarea",12),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).tvProgram.Actors=c}),e.qZA(),e.qZA(),e.TgZ(18,"div",8),e.TgZ(19,"label",13),e._uU(20,"Resumen"),e.qZA(),e.TgZ(21,"textarea",14),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).tvProgram.Overview=c}),e.qZA(),e.qZA(),e.TgZ(22,"div",8),e.TgZ(23,"label",15),e._uU(24,"G\xe9neros"),e.qZA(),e.TgZ(25,"textarea",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showListGenresPopUp()}),e.qZA(),e.qZA(),e.TgZ(26,"div",8),e.TgZ(27,"label",17),e._uU(28,"Im\xe1gen"),e.qZA(),e.TgZ(29,"textarea",18),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).tvProgram.PosterPath=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",19),e.TgZ(31,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(32,"Close"),e.qZA(),e.TgZ(33,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(34,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu(t.tvProgram.Id>0?"Editar":"Nuevo"),e.xp6(3),e.Q6J("ngIf",t.isMovie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(1),e.Q6J("ngIf",t.isMovie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(1),e.Q6J("ngIf",t.isTvSerie()),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Directors),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Actors),e.xp6(4),e.Q6J("ngModel",t.tvProgram.Overview),e.xp6(4),e.Q6J("value",t.getSelectedGenres()),e.xp6(4),e.Q6J("ngModel",t.tvProgram.PosterPath)}}function Yi(f,n){if(1&f&&e.YNc(0,oi,35,11,"ng-template",2),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.tvProgram)}}function si(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-item-genres",32),e.NdJ("close",function(){return e.CHM(t),e.oxw().showGenresPopUp=!1})("closeWithChanges",function(c){return e.CHM(t),e.oxw().onCloseGenresPopUp(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("tvProgram",t.tvProgram)("listAllGenresPopUp",t.listAllGenresPopUp)}}let bi=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.closeForm=new e.vpe,this.closeFormWithChanges=new e.vpe,this.showChooserDirectory=!1,this.showGenresPopUp=!1}isMovie(){return this.currentMediaTypeID==ae.DD.Movie}isTvSerie(){return this.currentMediaTypeID==ae.DD.TvSerie}getSelectedGenres(){return this.tvProgram.ListItemGenres&&this.tvProgram.ListItemGenres.length>0?this.tvProgram.ListItemGenres.map(r=>r.GenreName).join(", "):""}ngOnInit(){this.getGenres()}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.closeForm.emit(!0)})}getGenres(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/genres/GetAllAsync").then(t=>{this.listAllGenresPopUp=t.Data},t=>{console.error(t)})}saveItem(){this.currentMediaTypeID==ae.DD.Movie&&this.saveMovie(),this.currentMediaTypeID==ae.DD.TvSerie&&this.saveTvSerie()}saveMovie(){this.restProvider.executeSinovadApiService(this.tvProgram.Id>0?ae.yw.PUT:ae.yw.POST,this.tvProgram.Id>0?"/movies/Update":"/movies/Create",this.tvProgram).then(g=>{this.closeFormWithChanges.emit(!0)},g=>{console.error(g)})}saveTvSerie(){this.restProvider.executeSinovadApiService(this.tvProgram.Id>0?ae.yw.PUT:ae.yw.POST,this.tvProgram.Id>0?"/tvseries/Update":"/tvseries/Create",this.tvProgram).then(g=>{this.closeFormWithChanges.emit(!0)},g=>{console.error(g)})}showListGenresPopUp(){this.showGenresPopUp=!0}onCloseGenresPopUp(t){this.tvProgram.ListItemGenres=t,this.showGenresPopUp=!1}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-item-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(Cr,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{tvProgram:"tvProgram",currentMediaTypeID:"currentMediaTypeID"},outputs:{closeForm:"closeForm",closeFormWithChanges:"closeFormWithChanges"},features:[e.qOj],decls:3,vars:1,consts:[["modalTarget",""],[3,"tvProgram","listAllGenresPopUp","close","closeWithChanges",4,"ngIf"],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","directors",1,"form-label"],["id","directors",1,"form-control",3,"ngModel","ngModelChange"],["for","actors",1,"form-label"],["id","actors",1,"form-control",3,"ngModel","ngModelChange"],["for","summary",1,"form-label"],["id","summary",1,"form-control",3,"ngModel","ngModelChange"],["for","genres",1,"form-label"],["id","genres","readonly","",1,"form-control",3,"value","click"],["for","posterPath",1,"form-label"],["id","posterPath",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["for","title",1,"form-label"],["id","title",1,"form-control",3,"ngModel","ngModelChange"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],["for","releaseDate",1,"form-label"],["id","releaseDate","type","date",1,"form-control",3,"valueAsDate","change"],["for","firstAirDate",1,"form-label"],["id","firstAirDate","type","date",1,"form-control",3,"valueAsDate","change"],["for","lastAirDate",1,"form-label"],["id","lastAirDate","type","date",1,"form-control",3,"valueAsDate","change"],[3,"tvProgram","listAllGenresPopUp","close","closeWithChanges"]],template:function(t,r){1&t&&(e.YNc(0,Yi,1,1,"ng-template",null,0,e.W1O),e.YNc(2,si,1,2,"app-item-genres",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",r.showGenresPopUp))},directives:[V.O5,Q.Fj,Q.JJ,Q.On,br],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();class Lr{}const Do=["modalTarget"];function eo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"label",7),e._uU(7,"N\xfamero"),e.qZA(),e.TgZ(8,"input",8),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).season.SeasonNumber=c}),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",9),e._uU(11,"Nombre"),e.qZA(),e.TgZ(12,"textarea",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).season.Name=c}),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",9),e._uU(15,"Resumen"),e.qZA(),e.TgZ(16,"textarea",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).season.Summary=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(19,"Close"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(21,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu(t.season.Id>0?"Editar":"Nuevo"),e.xp6(6),e.Q6J("ngModel",t.season.SeasonNumber),e.xp6(4),e.Q6J("ngModel",t.season.Name),e.xp6(4),e.Q6J("ngModel",t.season.Summary)}}function mo(f,n){if(1&f&&e.YNc(0,eo,22,4,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.season)}}let $i=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.close.emit(!0)})}saveItem(){this.restProvider.executeSinovadApiService(this.season.Id>0?ae.yw.PUT:ae.yw.POST,this.season.Id>0?"/seasons/Update":"/seasons/Create",this.season).then(c=>{this.closeWithChanges.emit(!0)},c=>{console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-season-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(Do,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{season:"season"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,mo,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,Q.wV,Q.Fj,Q.JJ,Q.On],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();class _o{}const zi=["modalTarget"];function Jo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"label",7),e._uU(7,"T\xedtulo"),e.qZA(),e.TgZ(8,"textarea",8),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).episode.Title=c}),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"label",9),e._uU(11,"N\xfamero"),e.qZA(),e.TgZ(12,"input",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).episode.EpisodeNumber=c}),e.qZA(),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"label",7),e._uU(15,"Resumen"),e.qZA(),e.TgZ(16,"textarea",8),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).episode.Summary=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(19,"Close"),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(21,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu(t.episode.Id>0?"Editar":"Nuevo"),e.xp6(6),e.Q6J("ngModel",t.episode.Title),e.xp6(4),e.Q6J("ngModel",t.episode.EpisodeNumber),e.xp6(4),e.Q6J("ngModel",t.episode.Summary)}}function Qo(f,n){if(1&f&&e.YNc(0,Jo,22,4,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.episode)}}let to=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveItem()},t=>{this.close.emit(!0)})}saveItem(){this.restProvider.executeSinovadApiService(this.episode.Id>0?ae.yw.PUT:ae.yw.POST,this.episode.Id>0?"/episodes/Update":"/episodes/Create",this.episode).then(c=>{this.closeWithChanges.emit(!0)},c=>{console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-episode-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(zi,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{episode:"episode"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","name",1,"form-label"],["id","name",1,"form-control",3,"ngModel","ngModelChange"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,Qo,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,Q.Fj,Q.JJ,Q.On,Q.wV],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();const Po=["modalTarget"];function jo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Rango de Episodios"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"label",6),e._uU(7,"Desde"),e.qZA(),e.TgZ(8,"input",7),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().initialEpisodeNumber=c}),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"label",6),e._uU(11,"Hasta"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().lastEpisodeNumber=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(15,"Close"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(17,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(8),e.Q6J("ngModel",t.initialEpisodeNumber),e.xp6(4),e.Q6J("ngModel",t.lastEpisodeNumber)}}let Xo=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.save()},t=>{this.close.emit(!0)})}save(){let t=[];for(let c=Number(this.initialEpisodeNumber);c<=Number(this.lastEpisodeNumber);c++){var r=new _o;r.EpisodeNumber=c,r.SeasonId=this.parent.Id,r.Title="Episodio "+c,t.push(r)}this.restProvider.executeSinovadApiService(ae.yw.POST,"/episodes/CreateList",t).then(c=>{this.closeWithChanges.emit(!0)},c=>{console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-episode-range-modal"]],viewQuery:function(t,r){if(1&t&&e.Gf(Po,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{parent:"parent"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","seasonNumber",1,"form-label"],["id","seasonNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,jo,18,2,"ng-template",null,0,e.W1O)},directives:[Q.wV,Q.Fj,Q.JJ,Q.On],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();var qr=w(7065);const qi=["contextMenuPage"],es=function(f){return{selected:f}};function ao(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",25),e.TgZ(1,"th",26),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td",27),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",28),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(9,"i",29),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(4,es,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Title),e.xp6(2),e.Oqu(t.Summary)}}function Nt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",30),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function ln(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-episode-form",31),e.NdJ("close",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveEpisode()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("episode",t.episode)}}function xn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-episode-range-modal",32),e.NdJ("close",function(){return e.CHM(t),e.oxw().showEpisodeRangeModal=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveEpisodeRange()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("parent",t.parentItem)}}function Xn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",33),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&f&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let rr=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,r,c,v),this.restProvider=t,this.events=r,this.domSanitizer=c,this.activeRoute=g,this.sharedData=v,this.http=x,this._window=window,this.listSelectedItems=[],this.showPopUpForm=!1,this.showChangeSeasonForm=!1,this.listSeasons=[],this.pageSize=10,this.showEpisodeRangeModal=!1,this.showConfirmMessageBox=!1}ngOnInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/episodes/GetAllWithPaginationBySeasonAsync/"+this.parentItem.Id+"?page="+t+"&take="+r).then(v=>{let x=v.Data;this.response=v,this.listItems=x},v=>{console.error(v)})}onFileSelected(t){if(t.target.files&&t.target.files.length>0){let r=t.target.files[0],c=this;const g=new FileReader;g.onload=v=>{c.registerMultipleEpisodesFromTxtResult(v.target.result)},g.readAsText(r)}}registerMultipleEpisodesFromTxtResult(t){let r=t.split("\n");if(r&&r.length>0){let g=[];for(let v=0;v<r.length;v++){let x=r[v];var c=new _o;c.EpisodeNumber=v+1,c.SeasonId=this.parentItem.Id,c.Title=x,g.push(c)}this.restProvider.executeSinovadApiService(ae.yw.POST,"/episodes/CreateList",g).then(v=>{this.getAllItems()},v=>{console.error(v)})}}showEpisodeRangeForm(){this.showEpisodeRangeModal=!0}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){this.showConfirmMessageBox=!1;let t=[];for(let c=0;c<this.listSelectedItems.length;c++)t.push(this.listSelectedItems[c].Id);var r=t.join(",");this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/episodes/DeleteList/"+r).then(c=>{this.listSelectedItems=[],this.getAllItems()},c=>{console.error(c)})}deleteSelectedItems(){this.showConfirmMessageBox=!0}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];c.push({text:"Eliminar",key:"delete",iconClass:"fa-solid fa-trash"}),this.contextMenuPage.show("sinovadMainContainer",t.clientX,t.clientY,c).then(g=>{this.onClickContextMenuOption(g)})}onClickContextMenuOption(t){"changeSeason"==t.key&&(this.showChangeSeasonForm=!0),"delete"==t.key&&this.deleteSelectedItems()}onChangeSeason(t){this.selectedSeasonID=parseInt(t.target.value)}saveChangeSeason(){}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}showItemForm(){let t=1;this.listItems&&this.listItems.length>0&&(t=this.listItems[this.listItems.length-1].EpisodeNumber+1);var r=new _o;r.EpisodeNumber=t,r.SeasonId=this.parentItem.Id,this.episode=r,this.showPopUpForm=!0}editItem(t){this.episode=JSON.parse(JSON.stringify(t)),this.showPopUpForm=!0}onSaveEpisode(){this.showPopUpForm=!1,this.getAllItems()}onSaveEpisodeRange(){this.showEpisodeRangeModal=!1,this.getAllItems()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-episode-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(qi,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},inputs:{parentItem:"parentItem"},features:[e.qOj],decls:46,vars:14,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],[1,"btn","me-2",3,"click"],["type","file","accept",".txt",2,"display","none",3,"change"],["input",""],["title","Carga Masiva",2,"height","40px",3,"src"],["type","button",1,"btn","me-2",3,"click"],["title","Agregar por Rango de N\xfameros",2,"height","40px",3,"src"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"episode","close","closeWithChanges",4,"ngIf"],[3,"parent","close","closeWithChanges",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"episode","close","closeWithChanges"],[3,"parent","close","closeWithChanges"],[3,"message","close","confirm"]],template:function(t,r){if(1&t){const c=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(v){return r.onChangeSelectAllCheckBox(v)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return e.CHM(c),e.MAs(14).click()}),e.TgZ(13,"input",9,10),e.NdJ("change",function(v){return r.onFileSelected(v)}),e.qZA(),e._UZ(15,"img",11),e.ALo(16,"formatDataPipe"),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){return r.showEpisodeRangeForm()}),e._UZ(18,"img",13),e.ALo(19,"formatDataPipe"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(21,"i",15),e._uU(22,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",1),e.TgZ(24,"div",16),e.TgZ(25,"table",17),e.TgZ(26,"thead"),e.TgZ(27,"tr"),e.TgZ(28,"th",18),e._uU(29,"N\xb0"),e.qZA(),e.TgZ(30,"th",18),e._uU(31,"Titulo"),e.qZA(),e.TgZ(32,"th",18),e._uU(33,"Resumen"),e.qZA(),e.TgZ(34,"th",18),e._uU(35,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"tbody"),e.YNc(37,ao,10,6,"ng-template",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",1),e.TgZ(39,"div",16),e.YNc(40,Nt,1,1,"app-pagination",20),e.qZA(),e.qZA(),e.qZA(),e.YNc(41,ln,1,1,"app-episode-form",21),e.YNc(42,xn,1,1,"app-episode-range-modal",22),e.YNc(43,Xn,1,1,"app-confirm-message-modal",23),e._UZ(44,"app-context-menu",null,24)}2&t&&(e.xp6(3),e.hij("",r.parentItem.Name," :Episodios"),e.xp6(12),e.Q6J("src",e.xi3(16,8,"upload.png","GetImageURLByKey"),e.LSH),e.xp6(3),e.Q6J("src",e.xi3(19,11,"rank-number.png","GetImageURLByKey"),e.LSH),e.xp6(19),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(1),e.Q6J("ngIf",r.showPopUpForm),e.xp6(1),e.Q6J("ngIf",r.showEpisodeRangeModal),e.xp6(1),e.Q6J("ngIf",r.showConfirmMessageBox))},directives:[V.sg,V.mk,V.O5,Oe,to,Xo,Ln,tt],pipes:[qr.A],styles:[".selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),f})();const dr=["modalTarget"];function Or(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-episode-list",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.hij("",t.parent.Name," :Episodios"),e.xp6(3),e.Q6J("parentItem",t.parent)}}function kr(f,n){if(1&f&&e.YNc(0,Or,9,2,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.parent)}}let Br=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(r,g,v,Y),this.modalService=t,this.restProvider=r,this.ref=c,this.events=g,this.domSanitizer=v,this.activeRoute=x,this.sharedData=Y,this.http=ie,this.close=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{},t=>{this.close.emit(!0)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(e.sBO),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-episode-list-modal"]],viewQuery:function(t,r){if(1&t&&e.Gf(dr,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{parent:"parent"},outputs:{close:"close"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"parentItem"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,kr,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,rr],styles:[""]}),f})();const fi=["contextMenuPage"],Bi=function(f){return{selected:f}};function vo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",19),e.TgZ(1,"th",20),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",21),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",22),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(7,"i",23),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(3,Bi,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Name)}}function Ao(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",24),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function ts(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-season-form",25),e.NdJ("close",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveSeason()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("season",t.seasonData)}}function Io(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-episode-list-modal",26),e.NdJ("close",function(){return e.CHM(t),e.oxw().showListEpisodesPopUp=!1}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("parent",t.lastSelectedItem)}}function ns(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",27),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&f&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let Vo=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(t,c,g,x),this.restProvider=t,this.ref=r,this.events=c,this.domSanitizer=g,this.activeRoute=v,this.sharedData=x,this.http=Y,this._window=window,this.listItems=[],this.listSelectedItems=[],this.showPopUpForm=!1,this.showListEpisodesPopUp=!1,this.pageSize=10,this.showConfirmMessageBox=!1}ngOnInit(){this.getAllItems()}executeGetAllItems(t,r){this.restProvider.executeSinovadApiService(ae.yw.GET,"/seasons/GetAllWithPaginationByTvSerieAsync/"+this.parentItem.Id+"?page="+t+"&take="+r).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){this.showConfirmMessageBox=!1;let t=[];for(let c=0;c<this.listSelectedItems.length;c++)t.push(this.listSelectedItems[c].Id);var r=t.join(",");this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/seasons/DeleteList/"+r).then(c=>{this.listSelectedItems=[],this.getAllItems()},c=>{console.error(c)})}deleteSelectedItems(){this.showConfirmMessageBox=!0}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];c.push({text:"Ver",key:"view",iconClass:"fa-solid fa-eye"}),c.push({text:"Eliminar",key:"delete",iconClass:"fa-solid fa-trash"}),this.contextMenuPage.show("sinovadMainContainer",t.clientX,t.clientY,c).then(g=>{this.onClickContextMenuOption(g)})}onClickContextMenuOption(t){"view"==t.key&&(this.showListEpisodesPopUp=!0),"delete"==t.key&&this.deleteSelectedItems()}showItemForm(){this.seasonData=new Lr,this.seasonData.TvSerieId=this.parentItem.Id,this.showPopUpForm=!0}editItem(t){this.seasonData=JSON.parse(JSON.stringify(t)),this.showPopUpForm=!0}onSaveSeason(){this.showPopUpForm=!1,this.getAllItems()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-season-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(fi,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},inputs:{parentItem:"parentItem"},features:[e.qOj],decls:36,vars:6,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"season","close","closeWithChanges",4,"ngIf"],[3,"parent","close",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"season","close","closeWithChanges"],[3,"parent","close"],[3,"message","close","confirm"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"tbody"),e.YNc(27,vo,8,5,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"div",10),e.YNc(30,Ao,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e.YNc(31,ts,1,1,"app-season-form",15),e.YNc(32,Io,1,1,"app-episode-list-modal",16),e.YNc(33,ns,1,1,"app-confirm-message-modal",17),e._UZ(34,"app-context-menu",null,18)),2&t&&(e.xp6(3),e.hij("",r.parentItem.Name," :Temporadas"),e.xp6(24),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(1),e.Q6J("ngIf",r.showPopUpForm),e.xp6(1),e.Q6J("ngIf",r.showListEpisodesPopUp),e.xp6(1),e.Q6J("ngIf",r.showConfirmMessageBox))},directives:[V.sg,V.mk,V.O5,Oe,$i,Br,Ln,tt],styles:[".selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),f})();const Rs=["modalTarget"];function xi(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h5",3),e._uU(2),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",5),e._UZ(5,"app-season-list",6),e.qZA(),e.TgZ(6,"div",7),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(8,"Close"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.hij("",t.parent.Name," :Temporadas"),e.xp6(3),e.Q6J("parentItem",t.parent)}}function Ui(f,n){if(1&f&&e.YNc(0,xi,9,2,"ng-template",1),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.parent)}}let wi=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(r,g,v,Y),this.modalService=t,this.restProvider=r,this.ref=c,this.events=g,this.domSanitizer=v,this.activeRoute=x,this.sharedData=Y,this.http=ie,this.close=new e.vpe}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{},t=>{this.close.emit(!0)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(e.sBO),e.Y36(Le.n),e.Y36(i.H7),e.Y36(R.gz),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-season-list-modal"]],viewQuery:function(t,r){if(1&t&&e.Gf(Rs,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{parent:"parent"},outputs:{close:"close"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"parentItem"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&e.YNc(0,Ui,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,Vo],styles:[""]}),f})();const yo=["contextMenuPage"],us=function(f){return{selected:f}},Go=function(f){return{disable:f}};function Eo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"tr",19),e.TgZ(1,"th",20),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(2),e.qZA(),e.TgZ(3,"td",21),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(4),e.qZA(),e.TgZ(5,"td",21),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickItem(c,v)})("contextmenu",function(c){const v=e.CHM(t).$implicit;return e.oxw().onContextMenuItem(c,v)}),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",22),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw().editItem(g)}),e._UZ(9,"i",23),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=n.index,c=e.oxw();e.Q6J("ngClass",e.VKq(5,us,-1!=c.listSelectedItems.indexOf(t))),e.xp6(2),e.Oqu(c.getNewIndex(r,c.response.PageNumber,c.pageSize)),e.xp6(2),e.Oqu(t.Title?t.Title:t.Name),e.xp6(2),e.Oqu(c.getYearValueFromItem(t)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,Go,c.isItemDisableForEdit(t)))}}function Ve(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-pagination",24),e.NdJ("selectPage",function(c){return e.CHM(t),e.oxw().onSelectPage(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("responsePagination",t.response)}}function lt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-item-form",25),e.NdJ("closeForm",function(){return e.CHM(t),e.oxw().showPopUpForm=!1})("closeFormWithChanges",function(){return e.CHM(t),e.oxw().onSaveItem()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("tvProgram",t.item)}}function Ke(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-season-list-modal",26),e.NdJ("close",function(){return e.CHM(t),e.oxw().showListSeasonsPopUp=!1}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("parent",t.lastSelectedItem)}}function dt(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",27),e.NdJ("close",function(){return e.CHM(t),e.oxw().showConfirmMessageBox=!1})("confirm",function(){return e.CHM(t),e.oxw().executeDeleteSelectedItems()}),e.qZA()}2&f&&e.Q6J("message","Estas seguro que deseas eliminar estos registros ?")}let Bt=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,c,g,v),this.restProvider=t,this.activeRoute=r,this.events=c,this.domSanitizer=g,this.sharedData=v,this.http=x,this._window=window,this.title="",this.listSelectedItems=[],this.showPopUpForm=!1,this.showListSeasonsPopUp=!1,this.downloadUrl=void 0,this.pageSize=10,this.showConfirmMessageBox=!1}ngOnInit(){}ngAfterViewInit(){this.getAllItems()}getAllItems(){this.executeGetAllItems(1..toString(),this.pageSize.toString())}getYearValueFromItem(t){return t.ReleaseDate?this.getYearByDateFormat(t.ReleaseDate):this.getYearByDateFormat(t.FirstAirDate)!=this.getYearByDateFormat(t.LastAirDate)?this.getYearByDateFormat(t.FirstAirDate)+" - "+this.getYearByDateFormat(t.LastAirDate):this.getYearByDateFormat(t.FirstAirDate)}isItemDisableForEdit(t){return!(!t.TmdbId&&!t.Imdbid)}onSelectPage(t){this.executeGetAllItems(t,this.pageSize.toString())}showItemForm(){let t=new vn;this.currentMediaTypeID==ae.DD.Movie&&(t.ReleaseDate=new Date),this.currentMediaTypeID==ae.DD.TvSerie&&(t.FirstAirDate=new Date,t.LastAirDate=new Date),this.item=t,this.showPopUpForm=!0}editItem(t){this.item=t,this.getGenresByitem()}getGenresByitem(){this.currentMediaTypeID==ae.DD.Movie&&this.getMovie(),this.currentMediaTypeID==ae.DD.TvSerie&&this.getTvSerie()}getMovie(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/movies/GetAsync/"+this.item.Id).then(t=>{this.item=t.Data,this.transformDates(),this.showPopUpForm=!0},t=>{console.error(t)})}executeGetAllItems(t,r){var c="?page="+t+"&take="+r;this.restProvider.executeSinovadApiService(ae.yw.GET,this.currentMediaTypeID==ae.DD.Movie?"/movies/GetAllWithPaginationAsync"+c:"/tvseries/GetAllWithPaginationAsync"+c).then(v=>{this.response=v,this.listItems=v.Data},v=>{console.error(v)})}getTvSerie(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/tvseries/GetAsync/"+this.item.Id).then(t=>{this.item=t.Data,this.transformDates(),this.showPopUpForm=!0},t=>{console.error(t)})}transformDates(){this.item.ReleaseDate&&(this.item.ReleaseDate=new Date(this.item.ReleaseDate)),this.item.FirstAirDate&&(this.item.FirstAirDate=new Date(this.item.FirstAirDate)),this.item.LastAirDate&&(this.item.LastAirDate=new Date(this.item.LastAirDate))}onSaveItem(){this.showPopUpForm=!1,this.getAllItems()}onContextMenuItem(t,r){t.preventDefault(),t.stopPropagation(),this.onClickItem(t,r);let c=[];this.currentMediaTypeID==ae.DD.TvSerie&&!this.isItemDisableForEdit(r)&&c.push({text:"Ver",key:"view",iconClass:"fa-solid fa-eye"}),this.isItemDisableForEdit(r)||c.push({text:"Eliminar",key:"delete",iconClass:"fa-solid fa-trash"}),this.renderContextMenuComponent(t.clientX,t.clientY,c)}renderContextMenuComponent(t,r,c){this.contextMenuPage.show("sinovadMainContainer",t,r,c).then(g=>{this.onClickContextMenuOption(g)})}onClickContextMenuOption(t){"view"==t.key&&this.currentMediaTypeID==ae.DD.TvSerie&&(this.showListSeasonsPopUp=!0),"delete"==t.key&&this.deleteSelectedItems()}getTitleWidth(){return"calc(100% - 120px)"}downloadJSON(t){t.click()}generateDownloadJsonFileUrl(){}onResize(t){}onChangeSelectAllCheckBox(t){if(t.target.checked)for(let r=0;r<this.listItems.length;r++)this.listSelectedItems.push(this.listItems[r]);else this.listSelectedItems=[]}executeDeleteSelectedItems(){if(this.showConfirmMessageBox=!1,this.listSelectedItems&&this.listSelectedItems.length>0){let c=[];for(let g=0;g<this.listSelectedItems.length;g++)c.push(this.listSelectedItems[g].Id);var t=c.join(","),r="";this.currentMediaTypeID==ae.DD.Movie&&(r="/movies/DeleteList/"+t),this.currentMediaTypeID==ae.DD.TvSerie&&(r="/tvseries/DeleteList/"+t),this.restProvider.executeSinovadApiService(ae.yw.DELETE,r).then(g=>{this.listSelectedItems=[],this.getAllItems()},g=>{console.error(g)})}}deleteSelectedItems(){this.showConfirmMessageBox=!0}onClickItem(t,r){if(t.ctrlKey||t.shiftKey)if(t.ctrlKey)-1!=this.listSelectedItems.indexOf(r)?this.listSelectedItems.splice(this.listSelectedItems.indexOf(r),1):this.listSelectedItems.push(r);else{let c=0;this.listSelectedItems.length>0&&this.lastSelectedItem&&(c=this.listItems.indexOf(this.lastSelectedItem));let g=this.listItems.indexOf(r);if(g>=c){let v=this.listItems.filter(x=>this.listItems.indexOf(x)<=g&&this.listItems.indexOf(x)>=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}else{let v=this.listItems.filter(x=>this.listItems.indexOf(x)>=g&&this.listItems.indexOf(x)<=c&&-1==this.listSelectedItems.indexOf(x));this.listSelectedItems=this.listSelectedItems.concat(v)}}else"contextmenu"==t.type?-1==this.listSelectedItems.indexOf(r)&&(this.listSelectedItems=[],this.listSelectedItems.push(r)):(this.listSelectedItems=[],this.listSelectedItems.push(r));this.lastSelectedItem=r}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(R.gz),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-item-list"]],viewQuery:function(t,r){if(1&t&&e.Gf(yo,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contextMenuPage=c.first)}},hostBindings:function(t,r){1&t&&e.NdJ("resize",function(g){return r.onResize(g)},!1,e.Jf7)},inputs:{currentMediaTypeID:"currentMediaTypeID",title:"title"},features:[e.qOj],decls:38,vars:6,consts:[[1,"container"],[1,"row","mt-4"],[1,"col-6","d-flex","align-items-center"],[1,"form-check","mb-0"],["id","flexCheckDefault","type","checkbox",1,"form-check-input",3,"change"],["checkbox",""],["for","flexCheckDefault",1,"form-check-label"],[1,"col-6","text-end"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa-solid","fa-circle-plus","me-2"],[1,"col-12"],[1,"table","table-bordered"],["scope","col"],["ngFor","",3,"ngForOf"],[3,"responsePagination","selectPage",4,"ngIf"],[3,"currentMediaTypeID","tvProgram","closeForm","closeFormWithChanges",4,"ngIf"],[3,"parent","close",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],["contextMenuPage",""],[3,"ngClass"],["role","button","scope","row",3,"click","contextmenu"],["role","button",3,"click","contextmenu"],["type","button","data-toggle","tooltip","data-placement","bottom","title","Editar",1,"btn","btn-success","btn-sm","ms-20",3,"ngClass","click"],[1,"fa-solid","fa-pen-to-square"],[3,"responsePagination","selectPage"],[3,"currentMediaTypeID","tvProgram","closeForm","closeFormWithChanges"],[3,"parent","close"],[3,"message","close","confirm"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",1),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"input",4,5),e.NdJ("change",function(g){return r.onChangeSelectAllCheckBox(g)}),e.qZA(),e.TgZ(9,"label",6),e._uU(10," Todos "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.showItemForm()}),e._UZ(13,"i",9),e._uU(14,"Agregar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",1),e.TgZ(16,"div",10),e.TgZ(17,"table",11),e.TgZ(18,"thead"),e.TgZ(19,"tr"),e.TgZ(20,"th",12),e._uU(21,"N\xb0"),e.qZA(),e.TgZ(22,"th",12),e._uU(23,"Titulo"),e.qZA(),e.TgZ(24,"th",12),e._uU(25,"A\xf1o"),e.qZA(),e.TgZ(26,"th",12),e._uU(27,"Acciones"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"tbody"),e.YNc(29,Eo,10,9,"ng-template",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",1),e.TgZ(31,"div",10),e.YNc(32,Ve,1,1,"app-pagination",14),e.qZA(),e.qZA(),e.qZA(),e.YNc(33,lt,1,2,"app-item-form",15),e.YNc(34,Ke,1,1,"app-season-list-modal",16),e.YNc(35,dt,1,1,"app-confirm-message-modal",17),e._UZ(36,"app-context-menu",null,18)),2&t&&(e.xp6(3),e.hij(" ",r.title,""),e.xp6(26),e.Q6J("ngForOf",r.listItems),e.xp6(3),e.Q6J("ngIf",r.response),e.xp6(1),e.Q6J("ngIf",r.showPopUpForm),e.xp6(1),e.Q6J("ngIf",r.showListSeasonsPopUp),e.xp6(1),e.Q6J("ngIf",r.showConfirmMessageBox))},directives:[V.sg,V.mk,V.O5,Oe,bi,wi,Ln,tt],styles:["h3[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#fff}.selected[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#F7EEAE}"]}),f})(),hn=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x}ngOnInit(){this.title="Series de Tv",this.currentMediaTypeID=ae.DD.TvSerie}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-tvserie-list"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"currentMediaTypeID","title"]],template:function(t,r){1&t&&e._UZ(0,"app-item-list",0),2&t&&e.Q6J("currentMediaTypeID",r.currentMediaTypeID)("title",r.title)},directives:[Bt],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),f})(),_n=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,g,v,x),this.restProvider=t,this.ref=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x}ngOnInit(){this.title="Pel\xedculas",this.currentMediaTypeID=ae.DD.Movie}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-movie-list"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"currentMediaTypeID","title"]],template:function(t,r){1&t&&e._UZ(0,"app-item-list",0),2&t&&e.Q6J("currentMediaTypeID",r.currentMediaTypeID)("title",r.title)},directives:[Bt],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),f})();var zn=w(7582);class Zr{}var Dr=(()=>{return(f=Dr||(Dr={}))[f.Success=1]="Success",f[f.Error=2]="Error",f[f.Info=3]="Info",Dr;var f})(),Tr=w(7568),Sr=w.n(Tr);const gi=["directoryChooserModelTarget"],Ur=function(f){return{"sinovad-directory-selected":f}};function jr(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(2).onClickMainDirectory(g)}),e._uU(1),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Ur,r.selectedMainDirectory&&t.name==r.selectedMainDirectory.name)),e.xp6(1),e.hij(" ",t.name," ")}}function xo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickBackFolder()}),e._uU(1," <= .. [Regresar] "),e.qZA()}}function Ri(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(2).onClickSubDirectory(g)}),e._uU(1),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Ur,r.selectedSubdirectory&&t.name==r.selectedSubdirectory.name)),e.xp6(1),e.hij(" ",t.name," ")}}function To(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"h5",2),e._uU(2,"Seleccionar directorio"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.YNc(7,jr,2,4,"ng-template",7),e.qZA(),e.TgZ(8,"div",8),e.YNc(9,xo,2,0,"button",9),e.YNc(10,Ri,2,4,"ng-template",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return e.CHM(t).$implicit.dismiss()}),e._uU(13,"Close"),e.qZA(),e.TgZ(14,"button",12),e.NdJ("click",function(){return e.CHM(t).$implicit.close()}),e._uU(15,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(7),e.Q6J("ngForOf",t.listMainDirectories),e.xp6(2),e.Q6J("ngIf",t.selectedSubdirectory),e.xp6(1),e.Q6J("ngForOf",t.listSubdirectoriesTmp)}}let vi=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.listSubdirectoriesTmp=[],this.outputSelectedSubdirectory=new e.vpe,this.closeChooserDirectory=new e.vpe}ngOnInit(){let t=this.listMainDirectories[0];this.selectedMainDirectory=t,this.getSubdirectoriesByPath(t)}ngAfterViewInit(){this.modalService.open(this.directoryChooserModelTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",ariaLabelledBy:"modal-basic-title"}).result.then(t=>{this.saveDirectory()},t=>{this.closeChooserDirectory.emit(!0)})}saveDirectory(){this.outputSelectedSubdirectory.emit(this.getCurrentPath())}getCurrentPath(){return this.selectedSubdirectory?this.selectedSubdirectory.path:this.selectedMainDirectory.path}onClickBackFolder(){this.selectedSubdirectory.parentDirectory.isMainDirectory?(this.selectedSubdirectory=void 0,this.getSubdirectoriesByPath(this.selectedMainDirectory)):(this.selectedSubdirectory=this.selectedSubdirectory.parentDirectory,this.getSubdirectoriesByPath(this.selectedSubdirectory))}onClickMainDirectory(t){this.selectedMainDirectory=t,this.getSubdirectoriesByPath(this.selectedMainDirectory)}onClickSubDirectory(t){if(null==this.selectedSubdirectory)this.selectedSubdirectory=t,this.selectedSubdirectory.parentDirectory=this.selectedMainDirectory;else{let r=JSON.parse(JSON.stringify(this.selectedSubdirectory));this.selectedSubdirectory=t,this.selectedSubdirectory.parentDirectory=r}this.getSubdirectoriesByPath(this.selectedSubdirectory)}getSubdirectoriesByPath(t){var r=Sr().encode(t.path);this.restProvider.executeSinovadStreamServerService(ae.yw.GET,"/directories/"+r).then(c=>{this.listSubdirectoriesTmp=JSON.parse(c)},c=>{console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-directory-chooser"]],viewQuery:function(t,r){if(1&t&&e.Gf(gi,5),2&t){let c;e.iGM(c=e.CRH())&&(r.directoryChooserModelTarget=c.first)}},inputs:{listMainDirectories:"listMainDirectories"},outputs:{outputSelectedSubdirectory:"outputSelectedSubdirectory",closeChooserDirectory:"closeChooserDirectory"},features:[e.qOj],decls:2,vars:0,consts:[["directoryChooserModelTarget",""],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"sinovad-directory-chooser-content"],[1,"sinovad-main-directories-section"],["ngFor","",3,"ngForOf"],[1,"sinovad-subdirectories-section"],["class","sinovad-subdirectory-option",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"sinovad-main-directory-option",3,"ngClass","click"],[1,"sinovad-subdirectory-option",3,"click"],[1,"sinovad-subdirectory-option",3,"ngClass","click"]],template:function(t,r){1&t&&e.YNc(0,To,16,3,"ng-template",null,0,e.W1O)},directives:[V.sg,V.mk,V.O5],styles:["[_nghost-%COMP%]{background:rgba(17,17,17,.65);padding:20px}.sinovad-directory-chooser-container[_ngcontent-%COMP%]{display:block;background-color:#282828;color:#000;width:400px;height:500px;border:1px solid #dedede;border-radius:5px;padding:20px}.sinovad-main-directories-section[_ngcontent-%COMP%]{display:block;width:50%;padding-right:20px}.sinovad-subdirectories-section[_ngcontent-%COMP%]{display:block;width:50%;max-height:350px;overflow-x:hidden;overflow-y:auto;padding-left:10px}.sinovad-directory-chooser-content[_ngcontent-%COMP%]{display:flex;width:100%;max-height:350px;background:black}.sinovad-main-directory-option[_ngcontent-%COMP%]{display:block;padding:6px 10px;width:100%;background-color:transparent;border:none;outline:none;color:#fff;opacity:.7;cursor:pointer;text-align:left}.sinovad-main-directory-option[_ngcontent-%COMP%]:hover{opacity:1;background-color:#ffffff0d}.sinovad-subdirectory-option[_ngcontent-%COMP%]{display:block;padding:6px 10px;width:100%;background-color:transparent;border:none;outline:none;color:#fff;opacity:.7;cursor:pointer;text-align:left}.sinovad-subdirectory-option[_ngcontent-%COMP%]:hover{opacity:1;background-color:#ffffff0d}.sinovad-directory-chooser-header[_ngcontent-%COMP%]{display:block;float:right;width:100%}.sinovad-directory-chooser-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;background:transparent;border:0;outline:none;cursor:pointer;font-size:20px;color:#fff;opacity:.7}.sinovad-directory-chooser-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-directory-selected[_ngcontent-%COMP%]{border-left:4px solid #007bff;padding-left:6px;background-color:#ffffff0d;opacity:1}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]{display:inline-block;width:100%}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   .sinovad-directory-chooser-footer-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;color:#fff;background:#F18307;border:none;border-radius:5px;font-weight:700;cursor:pointer}.sinovad-directory-chooser-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#007bff}.sinovad-directory-chooser-path-content[_ngcontent-%COMP%]{display:inline-block;padding:10px 0;width:100%;height:50px}.sinovad-directory-chooser-path-content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border-radius:5px;width:100%;padding:6px 10px}"]}),f})();const Oo=["toastContent"];function Ye(f,n){1&f&&e._UZ(0,"i",7)}function Ne(f,n){1&f&&e._UZ(0,"i",8)}function we(f,n){1&f&&e._UZ(0,"i",9)}const ht=function(f,n,t){return{success:f,info:n,error:t}};function un(f,n){if(1&f&&(e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.YNc(2,Ye,1,0,"i",4),e.YNc(3,Ne,1,0,"i",5),e.YNc(4,we,1,0,"i",6),e.TgZ(5,"span"),e._uU(6),e.qZA(),e.qZA(),e.qZA()),2&f){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.kEZ(5,ht,t.toastOptions.toastType==t.toastType().Success,t.toastOptions.toastType==t.toastType().Info,t.toastOptions.toastType==t.toastType().Error)),e.xp6(1),e.Q6J("ngIf",t.toastOptions.toastType==t.toastType().Success),e.xp6(1),e.Q6J("ngIf",t.toastOptions.toastType==t.toastType().Info),e.xp6(1),e.Q6J("ngIf",t.toastOptions.toastType==t.toastType().Error),e.xp6(2),e.Oqu(t.toastOptions.message)}}function er(f,n){if(1&f&&e.YNc(0,un,7,9,"div",1),2&f){const t=e.oxw();e.Q6J("ngIf",t.isShowing)}}let Kr=(()=>{class f{constructor(t,r){this.ref=t,this.viewContainerRef=r,this.isShowing=!1}ngOnInit(){}ngAfterViewInit(){}toastType(){return Dr}show(t){this.toastOptions=t,this.container=document.getElementById(t.containerId);var r=this.viewContainerRef.createEmbeddedView(this.toastContent);this.renderedHtml=r.rootNodes[0],this.container.appendChild(this.renderedHtml),this.isShowing=!0,this.ref.detectChanges(),setTimeout(()=>{this.hideToast()},t.displayTime)}hideToast(){this.container.contains(this.renderedHtml)&&this.container.removeChild(this.renderedHtml),this.isShowing=!1,this.ref.detectChanges()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(e.s_b))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-custom-toast"]],viewQuery:function(t,r){if(1&t&&e.Gf(Oo,5),2&t){let c;e.iGM(c=e.CRH())&&(r.toastContent=c.first)}},decls:2,vars:0,consts:[["toastContent",""],["class","toast-box",4,"ngIf"],[1,"toast-box"],[1,"toast",3,"ngClass"],["class","fa-solid fa-circle-check",4,"ngIf"],["class","fa-solid fa-circle-info",4,"ngIf"],["class","fa-solid fa-circle-xmark",4,"ngIf"],[1,"fa-solid","fa-circle-check"],[1,"fa-solid","fa-circle-info"],[1,"fa-solid","fa-circle-xmark"]],template:function(t,r){1&t&&e.YNc(0,er,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,V.mk],styles:[".toast-box-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.toast-box-content[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.toast-box[_ngcontent-%COMP%]{position:absolute;bottom:30px;display:flex;overflow:hidden;padding:20px;width:100%;justify-content:center}.toast[_ngcontent-%COMP%]{width:400px;height:80px;background:#fff;font-weight:500;margin:15px 0;box-shadow:0 0 20px #0000004d;display:flex;align-items:center}.toast[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0 20px;font-size:35px}.toast.success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.toast.error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.toast.info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00f}"]}),f})();const pi=["customToastPage"];function wo(f,n){if(1&f&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&f){const t=n.$implicit;e.Q6J("ngValue",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Cn(f,n){if(1&f&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&f){const t=n.$implicit;e.Q6J("ngValue",t.Id),e.xp6(1),e.Oqu(t.Name)}}const wt=function(f,n){return{load:f,disable:n}};function An(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"form",8),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().saveTranscoder()}),e.TgZ(9,"div",7),e.TgZ(10,"label",9),e._uU(11,"M\xe9todo de transmisi\xf3n"),e.qZA(),e.TgZ(12,"select",10),e.YNc(13,wo,2,2,"ng-template",11),e.qZA(),e.TgZ(14,"p",12),e._uU(15,"M\xe9todo de transmisi\xf3n para transcodificar los videos"),e.qZA(),e.qZA(),e.TgZ(16,"div",7),e.TgZ(17,"label",9),e._uU(18,"Carpeta temporal para el transcodificador"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().showingDirectoryTranscodeVideos=!0}),e.qZA(),e.TgZ(20,"p",12),e._uU(21,"Carpeta que utilizar\xe1 el codificador para los archivos temporales."),e.qZA(),e.qZA(),e.TgZ(22,"div",7),e.TgZ(23,"label",9),e._uU(24,"Preset de conversi\xf3n x264 en segundo plano"),e.qZA(),e.TgZ(25,"select",14),e.YNc(26,Cn,2,2,"ng-template",11),e.qZA(),e.TgZ(27,"p",12),e._uU(28,"El valor de preset de x264 usado para conversi\xf3n en segundo plano (Sincronizaci\xf3n y Optimizador de Contenido). Valores m\xe1s lentos dar\xe1n lugar a mejor calidad de v\xeddeo y archivos m\xe1s peque\xf1os, pero llevar\xe1 mucho m\xe1s tiempo completar el proceso."),e.qZA(),e.qZA(),e.TgZ(29,"div",7),e.TgZ(30,"label",9),e._uU(31,"Factor de Tasa Constante"),e.qZA(),e._UZ(32,"input",15),e.TgZ(33,"p",12),e._uU(34,"El factor de tasa constante (CRF) es la configuraci\xf3n predeterminada de calidad (y control de velocidad) para los codificadores x264 y x265 , y tambi\xe9n est\xe1 disponible para libvpx . Con x264 y x265, puede establecer los valores entre 0 y 51, donde los valores m\xe1s bajos dar\xedan como resultado una mejor calidad, a expensas de tama\xf1os de archivo m\xe1s altos. Los valores m\xe1s altos significan m\xe1s compresi\xf3n, pero en alg\xfan momento notar\xe1 la degradaci\xf3n de la calidad. Para x264, los valores razonables est\xe1n entre 18 y 28. El valor predeterminado es 23, por lo que puede usarlo como punto de partida."),e.qZA(),e.qZA(),e.TgZ(35,"div",16),e.TgZ(36,"button",17),e._UZ(37,"div",18),e.TgZ(38,"span",19),e._uU(39,"Guardar cambios"),e.qZA(),e.qZA(),e._UZ(40,"span",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(2),e.hij("",t.mediaServer.FamilyName?t.mediaServer.FamilyName:t.mediaServer.DeviceName," - Transcoder"),e.xp6(6),e.Q6J("formGroup",t.customForm),e.xp6(5),e.Q6J("ngForOf",t.transmissionMethodList),e.xp6(13),e.Q6J("ngForOf",t.presetList),e.xp6(10),e.Q6J("ngClass",e.WLB(5,wt,t.loading,t.customForm.pristine||t.customForm.invalid))}}function Gn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-directory-chooser",22),e.NdJ("outputSelectedSubdirectory",function(c){return e.CHM(t),e.oxw().onSaveDirectoryTranscodedVideos(c)})("closeChooserDirectory",function(){return e.CHM(t),e.oxw().showingDirectoryTranscodeVideos=!1}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)}}let Vr=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(g,x,Y,ie),this.formBuilder=t,this.router=r,this.activeRoute=c,this.restProvider=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.directoryMovies="",this.directoryTvSeries="",this.transmissionMethodList=[],this.presetList=[],this.loading=!1}ngOnInit(){this.getCatalogDetails(),this.getMediaServerData()}getCatalogDetails(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/catalogs/GetAllCatalogDetailsWithPaginationByCatalogIdsAsync?catalogIds="+ae.P9.TranscoderPreset+","+ae.P9.VideoTransmissionType).then(r=>{let c=r.Data;this.transmissionMethodList=c.filter(g=>g.CatalogId==ae.P9.VideoTransmissionType),this.presetList=c.filter(g=>g.CatalogId==ae.P9.TranscoderPreset)},r=>{console.error(r)})}getAllMainDirectories(){this.restProvider.executeSinovadStreamServerService(ae.yw.GET,"/directories").then(t=>{this.listMainDirectories=JSON.parse(t)},t=>{console.error(t)})}ngAfterViewInit(){}getMediaServerData(){return(0,zn.mG)(this,void 0,void 0,function*(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/mediaServers/GetByGuidAsync/"+this.activeRoute.snapshot.params.serverGuid).then(r=>{var c=r.Data,g=this.sharedData.mediaServers.find(v=>v.Id==c.Id);c.isSecureConnection=g.isSecureConnection,this.sharedData.selectedMediaServer=c,this.mediaServer=c,this.getAllMainDirectories(),this.getTranscoderSettingss()},r=>{this.router.navigateByUrl("/404")})})}getTranscoderSettingss(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/transcoderSettings/GetByMediaServerGuidAsync/"+this.mediaServer.Guid).then(t=>{if(this.currentTranscoderSettingss=t.Data,null==this.currentTranscoderSettingss){var r=new Zr;r.TemporaryFolder="",r.ConstantRateFactor=18,r.VideoTransmissionTypeCatalogId=ae.P9.VideoTransmissionType,r.VideoTransmissionTypeCatalogDetailId=this.transmissionMethodList[0].Id,r.PresetCatalogId=ae.P9.TranscoderPreset,r.PresetCatalogDetailId=this.presetList[0].Id,r.MediaServerId=this.sharedData.selectedMediaServer.Id,this.currentTranscoderSettingss=r}this.customForm=this.formBuilder.group({temporaryFolder:new Q.NI(this.currentTranscoderSettingss.TemporaryFolder),preset:new Q.NI(this.currentTranscoderSettingss.PresetCatalogDetailId),transmissionMethod:new Q.NI(this.currentTranscoderSettingss.VideoTransmissionTypeCatalogDetailId),constantRateFactor:new Q.NI(this.currentTranscoderSettingss.ConstantRateFactor)})},t=>{console.error(t)})}onSaveDirectoryTranscodedVideos(t){this.currentTranscoderSettingss.TemporaryFolder=t,this.showingDirectoryTranscodeVideos=!1}saveTranscoder(){this.loading=!0;var t=JSON.parse(JSON.stringify(this.currentTranscoderSettingss));t.TemporaryFolder=this.customForm.value.temporaryFolder,t.ConstantRateFactor=this.customForm.value.constantRateFactor,t.VideoTransmissionTypeCatalogDetailId=this.customForm.value.transmissionMethod,t.PresetCatalogDetailId=this.customForm.value.preset,this.restProvider.executeSinovadApiService(this.currentTranscoderSettingss.Id>0?ae.yw.PUT:ae.yw.POST,this.currentTranscoderSettingss.Id>0?"/transcoderSettings/Update":"/transcoderSettings/Create",t).then(g=>{this.loading=!1,this.getTranscoderSettingss(),this.customToastPage.show({containerId:"sinovadMainContainer",displayTime:2e3,message:"Se guardaron los cambios satisfactoriamente",toastType:Dr.Success})},g=>{this.loading=!1,console.error(g)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(Q.qu),e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-transcode-settings"]],viewQuery:function(t,r){if(1&t&&e.Gf(pi,5),2&t){let c;e.iGM(c=e.CRH())&&(r.customToastPage=c.first)}},features:[e.qOj],decls:4,vars:2,consts:[["id","serverSettinsPageContainer","class","sinovad-page-container",4,"ngIf"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory",4,"ngIf"],["customToastPage",""],["id","serverSettinsPageContainer",1,"sinovad-page-container"],[1,"server-settings-container"],[1,"settings-row"],[1,"pane-region"],[1,"form-group"],[1,"server-settings-form",3,"formGroup","ngSubmit"],[1,"control-label"],["name","transmissionMethods","formControlName","transmissionMethod",1,"form-control"],["ngFor","",3,"ngForOf"],[1,"help-block"],["readonly","","type","text","formControlName","temporaryFolder",1,"form-control",3,"click"],["name","transmissionMethods","formControlName","preset",1,"form-control"],["type","text","formControlName","constantRateFactor",1,"form-control"],[1,"form-footer"],["type","submit",1,"save",3,"ngClass"],[1,"loading"],[1,"btn-label"],[1,"form-message"],[1,"form-option",3,"ngValue"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory"]],template:function(t,r){1&t&&(e.YNc(0,An,41,8,"div",0),e.YNc(1,Gn,1,1,"app-directory-chooser",1),e._UZ(2,"app-custom-toast",null,2)),2&t&&(e.Q6J("ngIf",r.customForm),e.xp6(1),e.Q6J("ngIf",r.showingDirectoryTranscodeVideos))},directives:[V.O5,Q._Y,Q.JL,Q.sg,Q.EJ,Q.JJ,Q.u,V.sg,Q.YN,Q.Kr,Q.Fj,V.mk,vi,Kr],styles:['.sinovad-page-container[_ngcontent-%COMP%]{padding:0 20px 48px 30px;max-width:1030px;display:flex;flex-direction:column;flex-grow:1;margin:0 auto;width:100%}.sinovad-page-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:24px;margin-bottom:20px;margin-top:40px}.sinovad-page-container[_ngcontent-%COMP%]   .server-settings-container[_ngcontent-%COMP%]{position:relative}.sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]{margin-left:-15px;margin-right:-15px}.sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]:after, .sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]:before{content:" ";display:table}.sinovad-page-container[_ngcontent-%COMP%]   .pane-region[_ngcontent-%COMP%]{min-height:1px;padding-left:15px;padding-right:15px;position:relative}.sinovad-page-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.sinovad-page-container[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:5px;color:#eee}.sinovad-page-container[_ngcontent-%COMP%]   .remote-access-mapping[_ngcontent-%COMP%]{padding-top:18px}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-label[_ngcontent-%COMP%]{margin-right:5px;color:#999}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-address[_ngcontent-%COMP%]{font-size:0}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-value[_ngcontent-%COMP%]{font-size:14px;color:#fff}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-separator[_ngcontent-%COMP%]{margin:0 4px;font-size:14px}.sinovad-page-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#ffffff40;border-radius:3px;color:#eee;display:block;font-size:14px;height:38px;padding:6px 12px;vertical-align:middle;width:100%;border:0;box-shadow:none;line-height:1.5em;transition:background-color .2s;max-width:400px}.sinovad-page-container[_ngcontent-%COMP%]   .form-option[_ngcontent-%COMP%]{background-color:#131313;border-radius:3px;color:#eee;display:block;font-size:14px;height:38px;padding:6px 12px;vertical-align:middle;width:100%;border:0;box-shadow:none;line-height:1.5em;transition:background-color .2s;max-width:400px}.sinovad-page-container[_ngcontent-%COMP%]   .help-block[_ngcontent-%COMP%]{display:block;font-size:13px;margin-bottom:10px;margin-top:5px;color:#ffffff73}.sinovad-page-container[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{align-items:center;display:flex;margin-top:40px}.sinovad-page-container[_ngcontent-%COMP%]   button.save[_ngcontent-%COMP%]{border-radius:3px;font-size:16px;line-height:1.33;padding:10px 18px;flex-shrink:0;text-transform:capitalize;border:0;overflow:hidden;position:relative;cursor:pointer;display:inline-block;font-weight:400;margin-bottom:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap;color:#fff;background-color:#007bff;opacity:.8}.sinovad-page-container[_ngcontent-%COMP%]   button.save[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-container[_ngcontent-%COMP%]   button.save.load[_ngcontent-%COMP%]{pointer-events:none}.sinovad-page-container[_ngcontent-%COMP%]   button.save.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.4}.sinovad-page-container[_ngcontent-%COMP%]   .form-message[_ngcontent-%COMP%]{color:#999;margin:0 20px}.sinovad-page-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{animation:auto;border-color:#cc7b19 transparent transparent #cc7b19;border-radius:50%;border-style:solid;border-width:2px;height:16px;margin:-8px 0 0 -8px;width:16px;border-left-color:#fff;border-top-color:#fff;left:-12px;position:absolute;top:50%;transition:left .2s;visibility:hidden;z-index:1}.sinovad-page-container[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{left:0;position:relative;transition:left .2s,opacity .2s}.sinovad-manage-media-container[_ngcontent-%COMP%]{display:block}.sinovad-manage-media-section[_ngcontent-%COMP%]{display:block;padding:10px}label[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#fff}.sinovad-transcode-subsection[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-transcode-subsection-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;padding:10px}.sinovad-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.sinovad-manage-media-principal-section[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #dedede;margin-left:10px;margin-right:10px}']}),f})();var Wr=w(1042);class ji{}const Ho=["contentTemplate"];function Da(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(3).onSelectItem(g)}),e._UZ(1,"i"),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit;e.xp6(1),e.Gre("",t.iconClass," me-2"),e.xp6(2),e.Oqu(t.title)}}function Uu(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw(2).hide()}),e.TgZ(2,"div",4),e.YNc(3,Da,4,4,"ng-template",5),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(1),e.Udp("top",t.top+"px")("right",t.right+"px"),e.xp6(2),e.Q6J("ngForOf",t.options.listItems)}}function ju(f,n){if(1&f&&e.YNc(0,Uu,4,5,"div",1),2&f){const t=e.oxw();e.Q6J("ngIf",t.isShowing)}}let Pa=(()=>{class f{constructor(t,r){this.ref=t,this.viewContainerRef=r,this.onHide=new e.vpe,this.isShowing=!1}ngOnInit(){}ngAfterViewInit(){}show(t){this.options=t;const r=t.target.getBoundingClientRect();this.right=window.innerWidth-r.right,this.top=r.top+r.height,this.container=document.getElementById(t.containerId);var c=this.viewContainerRef.createEmbeddedView(this.contentTemplate);this.renderedHtml=c.rootNodes[0],this.container.appendChild(this.renderedHtml),setTimeout(()=>{this.isShowing=!0,this.ref.detectChanges()},100)}hide(){this.onHide.emit(!0),this.container.contains(this.renderedHtml)&&this.container.removeChild(this.renderedHtml),this.isShowing=!1,this.ref.detectChanges()}onSelectItem(t){this.hide(),t.eventOnSelectItem.emit()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(e.s_b))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-custom-actions-menu"]],viewQuery:function(t,r){if(1&t&&e.Gf(Ho,5),2&t){let c;e.iGM(c=e.CRH())&&(r.contentTemplate=c.first)}},outputs:{onHide:"onHide"},decls:2,vars:0,consts:[["contentTemplate",""],["class","custom-actions-menu-container",4,"ngIf"],[1,"custom-actions-menu-container"],[1,"custom-actions-menu-content",3,"clickOutside"],[1,"custom-actions-menu-scroller"],["ngFor","",3,"ngForOf"],[1,"menu-item",3,"click"]],template:function(t,r){1&t&&e.YNc(0,ju,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,Ze,V.sg],styles:[".custom-actions-menu-container[_ngcontent-%COMP%]{position:absolute;inset:0 auto 0 0;margin:0;z-index:1014;width:100%;height:100%}.custom-actions-menu-content[_ngcontent-%COMP%]{background-color:#191a1c;border-radius:4px;box-shadow:0 4px 10px #00000059;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;padding:8px 0;transform-origin:center top;transition:background .15s ease-out;position:absolute}.custom-actions-menu-scroller[_ngcontent-%COMP%]{overflow-y:auto;max-height:600px;padding-right:0;overflow-x:hidden}button.menu-item[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#ffffffb3;word-wrap:break-word;display:block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;padding:4px 20px;text-align:left;width:100%}button.menu-item[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ffffff14}"]}),f})();const Aa=["storageModalTarget"];function Ji(f,n){if(1&f&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function Zo(f,n){if(1&f&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit;e.s9C("value",t.Id),e.xp6(1),e.Oqu(t.Name)}}function jc(f,n){if(1&f&&(e.YNc(0,Ji,2,2,"option",18),e.YNc(1,Zo,2,2,"option",19)),2&f){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngIf",t.Id==r.storage.MediaTypeCatalogDetailId),e.xp6(1),e.Q6J("ngIf",t.Id!=r.storage.MediaTypeCatalogDetailId)}}function bs(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"h5",4),e._uU(2),e.qZA(),e.TgZ(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e.qZA(),e.qZA(),e.TgZ(4,"div",6),e.TgZ(5,"div",7),e.TgZ(6,"label",8),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"input",9),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).storage.Name=c}),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"label",10),e._uU(11,"Tipo"),e.qZA(),e.TgZ(12,"select",11),e.NdJ("change",function(c){return e.CHM(t),e.oxw(2).onChangeMediaType(c)}),e.YNc(13,jc,2,2,"ng-template",12),e.qZA(),e.qZA(),e.TgZ(14,"div",7),e.TgZ(15,"label",13),e._uU(16,"Directorio"),e.qZA(),e.TgZ(17,"input",14),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw(2).storage.PhysicalPath=c})("click",function(){return e.CHM(t),e.oxw(2).showChooserDirectory=!0}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.dismiss()}),e._uU(20,"Close"),e.qZA(),e.TgZ(21,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().$implicit.close()}),e._uU(22,"Guardar"),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(2),e.Oqu(t.storage.Id>0?"Editar Almacenamiento":"Nuevo Almacenamiento"),e.xp6(6),e.Q6J("ngModel",t.storage.Name),e.xp6(5),e.Q6J("ngForOf",t.mediaTypes),e.xp6(4),e.Q6J("ngModel",t.storage.PhysicalPath)}}function Ko(f,n){if(1&f&&e.YNc(0,bs,23,4,"ng-template",2),2&f){const t=e.oxw();e.Q6J("ngIf",null!=t.storage)}}function Bl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-directory-chooser",22),e.NdJ("outputSelectedSubdirectory",function(c){return e.CHM(t),e.oxw().onSelectDirectory(c)})("closeChooserDirectory",function(){return e.CHM(t),e.oxw().showChooserDirectory=!1}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)}}let el=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.closeStorageForm=new e.vpe,this.closeStorageFormWithChanges=new e.vpe,this.showChooserDirectory=!1,this.mediaTypes=[{Id:1,Name:"Movies"},{Id:2,Name:"Tv Series"}]}ngOnInit(){}ngAfterViewInit(){this.modalService.open(this.storageModalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-dialog-centered modal-dialog-scrollable",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}).result.then(t=>{this.saveStorage()},t=>{this.closeStorageForm.emit(!0)})}saveStorage(){this.storage.MediaServerId=this.sharedData.selectedMediaServer.Id,this.restProvider.executeSinovadApiService(this.storage.Id>0?ae.yw.PUT:ae.yw.POST,this.storage.Id>0?"/storages/Update":"/storages/Create",this.storage).then(c=>{this.closeStorageFormWithChanges.emit(!0)},c=>{console.error(c)})}onChangeMediaType(t){this.storage.MediaTypeCatalogDetailId=Number(t.target.value)}onSelectDirectory(t){this.storage.PhysicalPath=t,this.showChooserDirectory=!1}onResize(t){}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-storage-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(Aa,5),2&t){let c;e.iGM(c=e.CRH())&&(r.storageModalTarget=c.first)}},hostBindings:function(t,r){1&t&&e.NdJ("resize",function(g){return r.onResize(g)},!1,e.Jf7)},inputs:{storage:"storage",listMainDirectories:"listMainDirectories"},outputs:{closeStorageForm:"closeStorageForm",closeStorageFormWithChanges:"closeStorageFormWithChanges"},features:[e.qOj],decls:3,vars:1,consts:[["storageModalTarget",""],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory",4,"ngIf"],[3,"ngIf"],[1,"modal-header"],["id","exampleModalCenteredScrollableTitle",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],["for","name",1,"form-label"],["id","name","type","text",1,"form-control",3,"ngModel","ngModelChange"],["for","typeFormControlId",1,"form-label"],["id","typeFormControlId","aria-label","Seleccionar Tipo",1,"form-select",3,"change"],["ngFor","",3,"ngForOf"],["for","directoryFormControlId",1,"form-label"],["id","directoryFormControlId","readonly","",1,"form-control",3,"ngModel","ngModelChange","click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["selected","",3,"value",4,"ngIf"],[3,"value",4,"ngIf"],["selected","",3,"value"],[3,"value"],[3,"listMainDirectories","outputSelectedSubdirectory","closeChooserDirectory"]],template:function(t,r){1&t&&(e.YNc(0,Ko,1,1,"ng-template",null,0,e.W1O),e.YNc(2,Bl,1,1,"app-directory-chooser",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",r.showChooserDirectory))},directives:[V.O5,Q.Fj,Q.JJ,Q.On,V.sg,Q.YN,Q.Kr,vi],styles:[""]}),f})();const Vc=["template"],Gc=function(f){return{disabled:f}};function tl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hide()}),e._UZ(5,"i",7),e.qZA(),e.TgZ(6,"div",8),e._uU(7),e.qZA(),e.TgZ(8,"div",9),e.TgZ(9,"div",10),e.TgZ(10,"p"),e._uU(11),e.qZA(),e.TgZ(12,"label",11),e._UZ(13,"input",12,13),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",14),e.TgZ(17,"div",15),e.TgZ(18,"button",16),e._uU(19,"Cancelar"),e.qZA(),e.TgZ(20,"button",17),e.TgZ(21,"span",18),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).confirmDelete()}),e._uU(22,"Eliminar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.MAs(14),r=e.oxw(2);e.xp6(7),e.hij(" ",r.options.title," "),e.xp6(4),e.Oqu(r.options.message),e.xp6(4),e.hij("",r.options.accordMessage," "),e.xp6(5),e.Q6J("ngClass",e.VKq(4,Gc,!t.checked))}}function nl(f,n){if(1&f&&e.YNc(0,tl,23,6,"div",1),2&f){const t=e.oxw();e.Q6J("ngIf",t.isShowing)}}let rl=(()=>{class f{constructor(t,r){this.ref=t,this.viewContainerRef=r,this.confirm=new e.vpe,this.isShowing=!1}ngOnInit(){}ngAfterViewInit(){}show(t){this.options=t,this.container=document.getElementById(t.containerId);var r=this.viewContainerRef.createEmbeddedView(this.template);this.renderedHtml=r.rootNodes[0],this.container.appendChild(this.renderedHtml),this.isShowing=!0,this.ref.detectChanges()}hide(){this.container.contains(this.renderedHtml)&&this.container.removeChild(this.renderedHtml),this.isShowing=!1,this.ref.detectChanges()}confirmDelete(){this.hide(),this.options.confirmEvent.emit(!0)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(e.s_b))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-confirm-delete-message-box"]],viewQuery:function(t,r){if(1&t&&e.Gf(Vc,5),2&t){let c;e.iGM(c=e.CRH())&&(r.template=c.first)}},outputs:{confirm:"confirm"},decls:2,vars:0,consts:[["template",""],["class","modal-container",4,"ngIf"],[1,"modal-container"],[1,"modal-backdrop"],[1,"modal-small"],[1,"modal-content"],[1,"modal-content-close-button",3,"click"],[1,"fa-solid","fa-xmark"],[1,"modal-header"],[1,"confirm-modal-body"],[1,"inner-modal-body"],[1,"confirm-modal-accord-label"],["type","checkbox",1,"confirm-message-accord-input"],["checkBox",""],[1,"modal-footer"],[1,"modal-footer-button-bar"],[1,"confirm-modal-button","cancel"],[1,"confirm-modal-button","confirm",3,"ngClass"],[1,"spinner-button-label",3,"click"]],template:function(t,r){1&t&&e.YNc(0,nl,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,V.mk],styles:[".modal-container[_ngcontent-%COMP%]{display:block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px;height:100%;left:0;pointer-events:auto;position:absolute;top:0;width:100%;z-index:1014}.modal-backdrop[_ngcontent-%COMP%]{align-items:center;background-color:#6669;display:flex;height:100%;justify-content:center;overflow-y:scroll;width:100%;opacity:1}.modal-small[_ngcontent-%COMP%]{opacity:1;transform:none;width:480px;display:flex;max-height:90%;transform-origin:center center}.modal-content[_ngcontent-%COMP%]{background-color:#2d2d2d;display:flex;flex-direction:column;flex-grow:1;position:relative;width:100%}button.modal-content-close-button[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;margin:0;outline:none;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#ffffffb3;font-size:18px;height:60px;line-height:60px;position:absolute;right:0;text-align:center;top:0;width:60px;z-index:1}button.modal-content-close-button[_ngcontent-%COMP%]:hover{color:#fff}.modal-header[_ngcontent-%COMP%]{color:#fff;flex-shrink:0;font-size:18px;max-width:100%;min-width:0;overflow:hidden!important;padding:15px 60px 15px 30px;text-overflow:ellipsis;white-space:nowrap!important}.confirm-modal-body[_ngcontent-%COMP%]{background-color:#00000026;flex-grow:1;padding:0;color:#ffffffbf;word-break:break-word;overflow-y:auto;overflow-x:hidden}.inner-modal-body[_ngcontent-%COMP%]{padding:30px}.inner-modal-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px}label.confirm-modal-accord-label[_ngcontent-%COMP%]{color:#ffffffbf;display:flex;margin-top:25px;-webkit-user-select:none;-moz-user-select:none;user-select:none;font-weight:400;margin-bottom:5px}input.confirm-message-accord-input[_ngcontent-%COMP%]{line-height:normal;box-sizing:border-box;padding:0;background-image:none;margin-right:5px}.modal-footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-shrink:0;justify-content:flex-end;padding:15px 30px}button.confirm-modal-button[_ngcontent-%COMP%]{min-width:65px;padding:5px 20px;background-color:#ffffff40;border-radius:4px;color:#fff;display:inline-block;transition:background-color .2s,color .2s;vertical-align:middle;white-space:nowrap;overflow:hidden;text-align:center;border:0;cursor:pointer;margin:0;outline:none}button.confirm-modal-button.cancel[_ngcontent-%COMP%]:hover{background-color:#ffffff26;color:#fff}button.confirm-modal-button.confirm[_ngcontent-%COMP%]{min-width:65px;background-color:#b32;color:#fff;margin-left:10px}button.confirm-modal-button.confirm.disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;background-color:#832418;color:#ffffff73}button.confirm-modal-button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ce3825}.spinner-button-label[_ngcontent-%COMP%]{left:0;position:relative;transition:left .2s,opacity .2s}"]}),f})();const il=["customActionsMenuPage"],ol=["confirmDeleteMessageBoxPage"];function Ul(f,n){1&f&&e._UZ(0,"i",21)}function Ia(f,n){1&f&&e._UZ(0,"i",22)}const jl=function(f){return{selected:f}};function xa(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.YNc(3,Ul,1,0,"i",14),e.YNc(4,Ia,1,0,"i",15),e.qZA(),e.TgZ(5,"a"),e._uU(6),e.qZA(),e.TgZ(7,"div",16),e.TgZ(8,"div",17),e.TgZ(9,"button",18),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw(2).showActions(c,v)}),e.TgZ(10,"span",19),e._UZ(11,"i",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(2);e.Q6J("ngClass",e.VKq(4,jl,r.currentLibrary&&r.currentLibrary.Id==t.Id)),e.xp6(3),e.Q6J("ngIf",1==t.MediaTypeCatalogDetailId),e.xp6(1),e.Q6J("ngIf",2==t.MediaTypeCatalogDetailId),e.xp6(2),e.Oqu(t.Name)}}function sl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.TgZ(4,"div",8),e._uU(5),e.qZA(),e.TgZ(6,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().openNewStorage()}),e._uU(7,"A\xf1adir biblioteca"),e.qZA(),e.TgZ(8,"button",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateVideoInAllStorages()}),e._uU(9,"Buscar archivos en biblioteca"),e.qZA(),e.qZA(),e.YNc(10,xa,12,6,"ng-template",10),e.qZA()}if(2&f){const t=e.oxw();e.xp6(2),e.hij("",t.mediaServer.FamilyName?t.mediaServer.FamilyName:t.mediaServer.DeviceName," - Bibliotecas"),e.xp6(3),e.hij("",t.listStorages?t.listStorages.length:""," bibliotecas"),e.xp6(5),e.Q6J("ngForOf",t.listStorages)}}function Vl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-storage-form",23),e.NdJ("closeStorageFormWithChanges",function(){return e.CHM(t),e.oxw().onCloseStorageFormWithChanges()})("closeStorageForm",function(){return e.CHM(t),e.oxw().onCloseStorageForm()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("listMainDirectories",t.listMainDirectories)("storage",t.currentLibrary)}}function Ns(f,n){if(1&f&&e._UZ(0,"div",28),2&f){const t=e.oxw(2);e.Q6J("innerHTML",t.searchMediaLogContent,e.oJD)}}function Hc(f,n){1&f&&(e.TgZ(0,"div",29),e._uU(1," Buscando videos... "),e.qZA())}function Zc(f,n){if(1&f&&(e.TgZ(0,"div",24),e.TgZ(1,"div",25),e.YNc(2,Ns,1,1,"div",26),e.YNc(3,Hc,2,0,"div",27),e.qZA(),e.qZA()),2&f){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",""!=t.searchMediaLogContent),e.xp6(1),e.Q6J("ngIf",""==t.searchMediaLogContent)}}let Ni=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.activeRoute=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.showInitial=new e.vpe,this.storageMovies={MediaTypeCatalogId:ae.P9.MediaType,MediaTypeCatalogDetailId:ae.DD.Movie,PhysicalPath:""},this.storageTvSeries={MediaTypeCatalogId:ae.P9.MediaType,MediaTypeCatalogDetailId:ae.DD.TvSerie,PhysicalPath:""},this.callSearchMediaLog=!1,this.searchMediaLogContent="",this.showForm=!1}ngOnInit(){this.getMediaServerData()}ngAfterViewInit(){}ngOnDestroy(){null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.callSearchMediaLog=!1}getAllMainDirectories(){this.restProvider.executeSinovadStreamServerService(ae.yw.GET,"/directories").then(t=>{this.listMainDirectories=JSON.parse(t)},t=>{console.error(t)})}getMediaServerData(){return(0,zn.mG)(this,void 0,void 0,function*(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/mediaServers/GetByGuidAsync/"+this.activeRoute.snapshot.params.serverGuid).then(r=>{var c=r.Data,g=this.sharedData.mediaServers.find(v=>v.Id==c.Id);c.isSecureConnection=g.isSecureConnection,this.sharedData.selectedMediaServer=c,this.mediaServer=c,this.getAllMainDirectories(),this.getStorages()},r=>{this.router.navigateByUrl("/404")})})}getStorages(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/storages/GetAllWithPaginationByMediaServerAsync/"+this.mediaServer.Id).then(r=>{let c=r.Data;if(this.listStorages=c,c&&c.length>0){let g=c.find(x=>1==x.MediaType);g?this.storageMovies=g:this.storageMovies.MediaServerId=this.sharedData.selectedMediaServer.Id;let v=c.find(x=>2==x.MediaType);v?this.storageTvSeries=v:this.storageTvSeries.MediaServerId=this.sharedData.selectedMediaServer.Id}},r=>{console.error(r)})}openNewStorage(){let t=new ji;t.MediaServerId=this.sharedData.selectedMediaServer.Id,t.MediaTypeCatalogId=ae.P9.MediaType,t.MediaTypeCatalogDetailId=ae.DD.Movie,this.currentLibrary=t,this.showForm=!0}editStorage(t){this.currentLibrary=JSON.parse(JSON.stringify(t)),this.showForm=!0}deleteStorage(t){var r=new e.vpe;r.subscribe(c=>{this.executeDeleteStorage(t)}),this.confirmDeleteMessageBoxPage.show({containerId:"sinovadMainContainer",title:"Eliminar biblioteca",message:"La biblioteca '"+t.Name+"' ser\xe1 eliminada de este servidor. Tus archivos multimedia no se ver\xe1n afectados. Esto no se puede deshacer. \xbfContinuar?",accordMessage:"Si, eliminar la biblioteca '"+t.Name+"'",confirmEvent:r})}executeDeleteStorage(t){this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/storages/Delete/"+t.Id).then(c=>{this.getStorages()},c=>{console.error(c)})}onCloseStorageForm(){this.showForm=!1,this.currentLibrary=void 0}onCloseStorageFormWithChanges(){this.showForm=!1,this.currentLibrary=void 0,this.getStorages()}updateStorageVideos(t){t.Id>0&&null!=t.PhysicalPath&&""!=t.PhysicalPath&&this.executeUpdateVideosInAllStorages([t])}updateVideoInAllStorages(){this.executeUpdateVideosInAllStorages(this.listStorages)}executeUpdateVideosInAllStorages(t){let r=(0,Wr.Z)();this.callSearchMediaLog=!0,this.restProvider.executeSinovadStreamServerService(ae.yw.POST,"/medias/UpdateVideosInListStorages",{ListStorages:t,LogIdentifier:r}).then(v=>{this.callSearchMediaLog=!1,null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.showInitial.emit()},v=>{console.error(v)});let g=this;setTimeout(()=>{g.searchingMediaInterval=window.setInterval(function(){g.getSearchMediaLog(r)},2e3)},2e3,g)}getSearchMediaLog(t){this.restProvider.executeSinovadApiService(ae.yw.GET,"/logs?identifier="+t).then(r=>{this.searchMediaLogContent=r.Data,null==this.searchMediaLogContent&&null!=this.searchingMediaInterval&&(this.callSearchMediaLog=!1,null!=this.searchingMediaInterval&&window.clearInterval(this.searchingMediaInterval),this.showInitial.emit())},r=>{console.error(r)})}showActions(t,r){this.currentLibrary=r;var c=JSON.parse(JSON.stringify(r)),g=t.currentTarget,v=[],x=new e.vpe;x.subscribe(Me=>{this.editStorage(c)}),v.push({title:"Editar biblioteca",iconClass:"fa-solid fa-pen-to-square",eventOnSelectItem:x});var Y=new e.vpe;Y.subscribe(Me=>{this.updateStorageVideos(c)}),v.push({title:"Buscar archivos en la biblioteca",iconClass:"fa-solid fa-magnifying-glass-plus",eventOnSelectItem:Y});var ie=new e.vpe;ie.subscribe(Me=>{this.deleteStorage(c)}),v.push({title:"Eliminar biblioteca",iconClass:"fa-sharp fa-solid fa-trash",eventOnSelectItem:ie}),this.customActionsMenuPage.show({target:g,containerId:"sinovadMainContainer",listItems:v})}onHideCustomActionsMenu(){this.currentLibrary=void 0}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-manage-media"]],viewQuery:function(t,r){if(1&t&&(e.Gf(il,5),e.Gf(ol,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.customActionsMenuPage=c.first),e.iGM(c=e.CRH())&&(r.confirmDeleteMessageBoxPage=c.first)}},outputs:{showInitial:"showInitial"},features:[e.qOj],decls:7,vars:3,consts:[["id","serverSettinsPageContainer","class","sinovad-page-container",4,"ngIf"],[3,"onHide"],["customActionsMenuPage",""],[3,"listMainDirectories","storage","closeStorageFormWithChanges","closeStorageForm",4,"ngIf"],["confirmDeleteMessageBoxPage",""],["class","sinovad-searh-media-log-container",4,"ngIf"],["id","serverSettinsPageContainer",1,"sinovad-page-container"],[1,"manage-libraries-header"],[1,"manage-libraries-count"],[3,"click"],["ngFor","",3,"ngForOf"],[1,"manage-library-summary-row",3,"ngClass"],[1,"manage-library-summary-overlay"],[1,"manage-library-icon-container"],["class","fa-solid fa-film",4,"ngIf"],["class","fa-solid fa-tv",4,"ngIf"],[1,"manage-library-summary-actions"],[1,"manage-library-summary-header"],[1,"manage-library-summary-action",3,"click"],[1,"manage-library-summary-header-icon"],[1,"fa-solid","fa-ellipsis-vertical"],[1,"fa-solid","fa-film"],[1,"fa-solid","fa-tv"],[3,"listMainDirectories","storage","closeStorageFormWithChanges","closeStorageForm"],[1,"sinovad-searh-media-log-container"],[1,"sinovad-searh-media-log-content"],["class","sinovad-searh-media-log-html",3,"innerHTML",4,"ngIf"],["class","sinovad-searh-media-log-second-content",4,"ngIf"],[1,"sinovad-searh-media-log-html",3,"innerHTML"],[1,"sinovad-searh-media-log-second-content"]],template:function(t,r){1&t&&(e.YNc(0,sl,11,3,"div",0),e.TgZ(1,"app-custom-actions-menu",1,2),e.NdJ("onHide",function(){return r.onHideCustomActionsMenu()}),e.qZA(),e.YNc(3,Vl,1,2,"app-storage-form",3),e._UZ(4,"app-confirm-delete-message-box",null,4),e.YNc(6,Zc,4,2,"div",5)),2&t&&(e.Q6J("ngIf",r.mediaServer),e.xp6(3),e.Q6J("ngIf",r.showForm),e.xp6(3),e.Q6J("ngIf",r.callSearchMediaLog))},directives:[V.O5,V.sg,V.mk,Pa,el,rl],styles:[".sinovad-page-container[_ngcontent-%COMP%]{padding:0 20px 48px 30px;max-width:1030px;display:flex;flex-direction:column;flex-grow:1;margin:0 auto;width:100%}h2[_ngcontent-%COMP%]{color:#fff;font-size:24px;margin-bottom:20px;margin-top:40px}.manage-libraries-header[_ngcontent-%COMP%]{background-color:#00000026;color:#ffffff73;display:flex;justify-content:space-between;margin:20px 0;padding:13px 20px}.manage-libraries-header[_ngcontent-%COMP%]   .manage-libraries-count[_ngcontent-%COMP%]{flex-grow:1;font-size:13px}.manage-libraries-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:4px;color:#fafafa;display:inline-block;overflow:hidden;text-align:center;transition:background-color .2s,color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap;background-color:#ffffff40;margin-left:10px;padding:0 10px;border:none;font-size:14px}.manage-libraries-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ffffff26}.manage-library-summary-row[_ngcontent-%COMP%]{color:#ffffffb3;min-height:44px;position:relative;cursor:pointer}.manage-library-summary-overlay[_ngcontent-%COMP%]{align-items:center;display:flex;pointer-events:none;height:100%;left:0;position:absolute;top:0;width:100%}.manage-library-icon-container[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;margin:0 20px;width:20px;font-size:13px}a[_ngcontent-%COMP%]{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;flex-grow:1;overflow:hidden;pointer-events:all;color:#ffffffb3;font-size:13px}.manage-library-summary-actions[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1;justify-content:flex-end;opacity:1}.manage-library-summary-row[_ngcontent-%COMP%]:hover, .manage-library-summary-row.selected[_ngcontent-%COMP%]{background-color:#ffffff0f;color:#fff}.manage-library-summary-header[_ngcontent-%COMP%]{display:flex}button.manage-library-summary-action[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;text-align:inherit;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#ffffffb3;-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;flex-shrink:0;overflow:hidden;padding:0 15px;pointer-events:all;white-space:nowrap}.manage-library-summary-header-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;width:20px}button.manage-library-summary-action[_ngcontent-%COMP%]:hover{color:#fff}.sinovad-searh-media-log-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0;display:flex;align-items:center;justify-content:center}.sinovad-searh-media-log-content[_ngcontent-%COMP%]{width:80%;height:80%;background:black;border:1px solid #dedede;border-radius:6px;color:#fff;padding:10px}.sinovad-searh-media-log-second-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;font-size:26px}.sinovad-searh-media-log-html[_ngcontent-%COMP%]{color:#fff;font-size:16px;overflow-y:auto;overflow-x:hidden;width:100%;height:100%}.sinovad-storage-principal-section[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #dedede;margin-left:10px;margin-right:10px}.sinovad-storage-principal-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;margin-left:10px;margin-bottom:2px;font-size:30px}.sinovad-storage-container[_ngcontent-%COMP%]{display:block}.sinovad-storage-section[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-storage-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-left:0;font-size:20px}.sinovad-storage-section[_ngcontent-%COMP%]   .sinovad-storage-buttons-container[_ngcontent-%COMP%]{display:flex;align-items:center}.sinovad-storage-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:30px;border-radius:5px;outline:none;cursor:pointer}.sinovad-transcode-subsection[_ngcontent-%COMP%]{display:block;padding:10px}.sinovad-transcode-subsection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff}.sinovad-transcode-subsection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:300px;margin-left:20px;height:30px;border-radius:5px}.sinovad-transcode-subsection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px;margin-left:20px;height:30px;border-radius:5px;cursor:pointer}.sinovad-transcode-subsection-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;padding:10px}"]}),f})(),ds=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.router=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y}ngOnInit(){this.sharedData.pageNotFoundShowing=!0}goInitialPage(){this.router.navigateByUrl(null!=this.sharedData.apiToken?"/home":"/landing").then(r=>{this.sharedData.pageNotFoundShowing=!1},r=>{console.error(r)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-not-found"]],features:[e.qOj],decls:12,vars:6,consts:[[1,"d-flex","align-items-center","justify-content-center","vh-100"],[1,"sinovad-page-not-found-content","text-center"],[1,"sinovad-logo-container"],[3,"src"],[1,"fs-3"],[1,"lead"],[1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"p",4),e._uU(7,"No encontramos la p\xe1gina que esta buscando"),e.qZA(),e.TgZ(8,"p",5),e._uU(9," Has click en el siguiente boton para ir a la p\xe1gina de inicio de Sinovad Stream "),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return r.goInitialPage()}),e._uU(11,"Inicio"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("src",e.lcZ(4,1,e.xi3(5,3,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH))},pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black;color:#fff}.sinovad-page-not-found-content[_ngcontent-%COMP%]{margin-bottom:100px;padding:10px}.sinovad-page-not-found-content[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]{margin-bottom:20px}.sinovad-page-not-found-content[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}@media only screen and (max-width: 767px){.sinovad-page-not-found-content[_ngcontent-%COMP%]{margin-bottom:unset}.sinovad-page-not-found-content[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}}"]}),f})();class mi{}function no(f,n){if(1&f&&(e.TgZ(0,"h2",9),e._uU(1),e.qZA()),2&f){const t=e.oxw();e.xp6(1),e.Oqu(t.errorMessage)}}function Kc(f,n){1&f&&(e.TgZ(0,"h2"),e._uU(1,"Su correo ha sido confirmado, ya puede iniciar sesi\xf3n"),e.qZA())}let Oa=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.activeRoute=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this._window=window,this.showLoading=!1,this.showInvalidTokenMessage=!1,this.showSuccessMessage=!1}ngOnInit(){localStorage.getItem("apiToken")&&this.router.navigate(["home"],{skipLocationChange:!1});let t=this.activeRoute.snapshot.params.base64Data;if(null!=t)try{let g=Sr().decode(t);var r=JSON.parse(g);if(r.ConfirmEmailToken){this.showLoading=!0;var c=new mi;c.ConfirmEmailToken=r.ConfirmEmailToken,c.UserId=r.UserId,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/ValidateConfirmEmailToken",c).then(v=>{this.showLoading=!1,this.showSuccessMessage=!0},v=>{this.showLoading=!1,this.showInvalidTokenMessage=!0,this.errorMessage=v,console.error(v)})}else this.router.navigate(["home"],{skipLocationChange:!1})}catch(g){this.router.navigate(["home"],{skipLocationChange:!1})}else this.router.navigate(["home"],{skipLocationChange:!1})}onClose(){this.router.navigate(["login"],{skipLocationChange:!1})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-confirm-email"]],features:[e.qOj],decls:16,vars:14,consts:[[1,"sinovad-back-button-container"],[3,"click"],[3,"src"],[1,"sinovad-container"],[1,"sinovad-message-container"],[1,"sinovad-message-content"],[1,"sinovad-logo-container"],[1,"sinovad-title-container"],[3,"ngIf"],[1,"error"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.onClose()}),e._UZ(2,"img",2),e.ALo(3,"async"),e.ALo(4,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e._UZ(9,"img",2),e.ALo(10,"async"),e.ALo(11,"formatDataPipe"),e.qZA(),e.TgZ(12,"div",7),e._uU(13," Confirmaci\xf3n de Email "),e.qZA(),e.YNc(14,no,2,1,"ng-template",8),e.YNc(15,Kc,2,0,"ng-template",8),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("src",e.lcZ(3,4,e.xi3(4,6,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(7),e.Q6J("src",e.lcZ(10,9,e.xi3(11,11,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(5),e.Q6J("ngIf",r.showInvalidTokenMessage),e.xp6(1),e.Q6J("ngIf",r.showSuccessMessage))},directives:[V.O5],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}"]}),f})();class wa{}class Ra{}function Ls(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",11),e._uU(7," Cambiar contrase\xf1a "),e.qZA(),e.TgZ(8,"div",12),e.TgZ(9,"label",13),e._uU(10," Contrase\xf1a "),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().resetPasswordModel.Password=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"label",13),e._uU(15," Confirmaci\xf3n de contrase\xf1a "),e.qZA(),e.TgZ(16,"div",14),e.TgZ(17,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().resetPasswordModel.ConfirmPassword=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirm()}),e._uU(20,"Confirmar"),e.qZA(),e.qZA(),e.TgZ(21,"div",17),e._uU(22),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,4,e.xi3(5,6,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(9),e.Q6J("ngModel",t.resetPasswordModel.Password),e.xp6(5),e.Q6J("ngModel",t.resetPasswordModel.ConfirmPassword),e.xp6(5),e.hij(" ",t.errorMessage," ")}}function Na(f,n){1&f&&(e.TgZ(0,"div",11),e._uU(1," Cambio de contrase\xf1a "),e.qZA(),e.TgZ(2,"h2"),e._uU(3,"Se cambi\xf3 la contrase\xf1a satisfactoriamente"),e.qZA())}function al(f,n){1&f&&(e.TgZ(0,"div",11),e._uU(1," Validaci\xf3n de Token "),e.qZA(),e.TgZ(2,"h2",21),e._uU(3,"Token inv\xe1lido"),e.qZA())}function La(f,n){if(1&f&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.YNc(6,Na,4,0,"ng-template",20),e.YNc(7,al,4,0,"ng-template",20),e.qZA(),e.qZA()),2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,3,e.xi3(5,5,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngIf",t.showResetPasswordSuccessMessage),e.xp6(1),e.Q6J("ngIf",t.showInvalidTokenMessage)}}function Gl(f,n){1&f&&(e.TgZ(0,"div",22),e.TgZ(1,"div",23),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}let ll=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.activeRoute=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this._window=window,this.showLoading=!1,this.resetPasswordModel=new wa,this.showResetPasswordForm=!1,this.showInvalidTokenMessage=!1,this.showResetPasswordSuccessMessage=!1}ngOnInit(){localStorage.getItem("apiToken")&&this.router.navigate(["home"],{skipLocationChange:!1});let t=this.activeRoute.snapshot.params.base64Data;if(null!=t)try{let g=Sr().decode(t);var r=JSON.parse(g);if(this.resetPasswordToken=r.ResetPasswordToken,this.userId=r.UserId,null!=this.resetPasswordToken&&null!=this.userId){this.showLoading=!0;var c=new Ra;c.ResetPasswordToken=this.resetPasswordToken,c.UserId=this.userId,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/ValidateResetPasswordToken",c).then(v=>{this.showResetPasswordForm=!0,this.showLoading=!1},v=>{this.showLoading=!1,this.showInvalidTokenMessage=!0,this.errorMessage=v,console.error(v)})}else this.showInvalidTokenMessage=!0}catch(g){this.showInvalidTokenMessage=!0}else this.router.navigate(["home"],{skipLocationChange:!1})}confirm(){this.showLoading=!0,this.resetPasswordModel.ResetPasswordToken=this.resetPasswordToken,this.resetPasswordModel.UserId=this.userId,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/ResetPassword",this.resetPasswordModel).then(t=>{this.showResetPasswordSuccessMessage=!0,this.showResetPasswordForm=!1,this.showLoading=!1},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClickCloseButton(){this.router.navigate(["login"],{skipLocationChange:!1})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-reset-password"]],features:[e.qOj],decls:10,vars:11,consts:[[1,"sinovad-back-button-container"],["header",""],["id","button_close_form",3,"click"],[3,"src"],[1,"sinovad-container"],["class","sinovad-form-container",4,"ngIf"],["class","sinovad-message-container",4,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-form-container"],[1,"sinovad-form-content"],[1,"sinovad-logo-container"],[1,"sinovad-title-container"],[1,"mb-3"],[1,"form-label"],[1,"sinovad-form-textinput-container"],["type","password",3,"ngModel","ngModelChange"],[1,"confirm",3,"click"],[1,"sinovad-form-error-message-container"],[1,"sinovad-message-container"],[1,"sinovad-message-content"],[3,"ngIf"],[1,"error"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"button",2),e.NdJ("click",function(){return r.onClickCloseButton()}),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,Ls,23,9,"div",5),e.YNc(8,La,8,8,"div",6),e.qZA(),e.YNc(9,Gl,14,0,"div",7)),2&t){const c=e.MAs(1);e.xp6(3),e.Q6J("src",e.lcZ(4,6,e.xi3(5,8,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Udp("height","calc(100% - "+c.offsetHeight+"px)"),e.xp6(1),e.Q6J("ngIf",r.showResetPasswordForm),e.xp6(1),e.Q6J("ngIf",!r.showResetPasswordForm&&(r.showInvalidTokenMessage||r.showResetPasswordSuccessMessage)),e.xp6(1),e.Q6J("ngIf",r.showLoading)}},directives:[V.O5,Q.Fj,Q.JJ,Q.On],pipes:[V.Ov,qr.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:300px}button.confirm[_ngcontent-%COMP%]{background-color:#007bff}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),f})();class Wc{}function rs(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",11),e._uU(7," Olvido su contrase\xf1a "),e.qZA(),e.TgZ(8,"div",12),e.TgZ(9,"label",13),e._uU(10," Correo electr\xf3nico "),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().recoverPasswordModel.Email=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().SendRecoverPasswordEmail()}),e._uU(15,"Recuperar contrase\xf1a"),e.qZA(),e.qZA(),e.TgZ(16,"div",17),e._uU(17),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,3,e.xi3(5,5,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(9),e.Q6J("ngModel",t.recoverPasswordModel.Email),e.xp6(5),e.hij(" ",t.errorMessage," ")}}function cl(f,n){1&f&&(e.TgZ(0,"div",18),e.TgZ(1,"div",19),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",11),e._uU(7," Confirmaci\xf3n de olvido de contrase\xf1a "),e.qZA(),e.TgZ(8,"h2"),e._uU(9,"Por favor verifique su email para recuperar su contrase\xf1a"),e.qZA(),e.qZA(),e.qZA()),2&f&&(e.xp6(3),e.Q6J("src",e.lcZ(4,1,e.xi3(5,3,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH))}function Fs(f,n){1&f&&(e.TgZ(0,"div",20),e.TgZ(1,"div",21),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}let Yc=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.router=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this._window=window,this.showLoading=!1,this.recoverPasswordModel=new Wc,this.sendedConfirmationEmail=!1}SendRecoverPasswordEmail(){this.showLoading=!0,this.recoverPasswordModel.ResetPasswordUrl=window.location.origin+"/reset",this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/RecoverPassword",this.recoverPasswordModel).then(t=>{this.sendedConfirmationEmail=!0,this.showLoading=!1},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigate(["landing"],{skipLocationChange:!1})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-recover-password"]],features:[e.qOj],decls:10,vars:11,consts:[[1,"sinovad-back-button-container"],["header",""],["id","button_close_form",3,"click"],[3,"src"],[1,"sinovad-container"],["class","sinovad-form-container",4,"ngIf"],["class","sinovad-message-container",4,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-form-container"],[1,"sinovad-form-content"],[1,"sinovad-logo-container"],[1,"sinovad-title-container"],[1,"mb-3"],[1,"form-label"],[1,"sinovad-form-textinput-container"],["type","text",3,"ngModel","ngModelChange"],[1,"recover",3,"click"],[1,"sinovad-form-error-message-container"],[1,"sinovad-message-container"],[1,"sinovad-message-content"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"button",2),e.NdJ("click",function(){return r.onClose()}),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,rs,18,8,"div",5),e.YNc(8,cl,10,6,"div",6),e.qZA(),e.YNc(9,Fs,14,0,"div",7)),2&t){const c=e.MAs(1);e.xp6(3),e.Q6J("src",e.lcZ(4,6,e.xi3(5,8,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Udp("height","calc(100% - "+c.offsetHeight+"px)"),e.xp6(1),e.Q6J("ngIf",!r.sendedConfirmationEmail),e.xp6(1),e.Q6J("ngIf",r.sendedConfirmationEmail),e.xp6(1),e.Q6J("ngIf",r.showLoading)}},directives:[V.O5,Q.Fj,Q.JJ,Q.On],pipes:[V.Ov,qr.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:300px}button.recover[_ngcontent-%COMP%]{background-color:#007bff}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),f})();class ra{}function ul(f,n){1&f&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}let Hl=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.router=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this._window=window,this.showLoading=!1,this.user=new ra,this.showSplashScreen=new e.vpe}ngOnInit(){localStorage.getItem("apiToken")&&this.router.navigateByUrl("/home")}ngOnDestroy(){}ngAfterViewInit(){this.initializeLoginViewControls()}initializeLoginViewControls(){}login(){this.showLoading=!0,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/Login",this.user).then(t=>{let r=t.Data;localStorage.setItem("apiToken",r),this.sharedData.apiToken=r,this.showSplashScreen.emit(!0),this.getUser().then(c=>{this.getMenus(),this.getMediaServers(),this.getProfiles().then(g=>{this.router.navigate(["select-profile"],{skipLocationChange:!1})},g=>{console.error(g)})},c=>{console.error(c)})},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigateByUrl("/landing")}showRecoverPasswordPage(){this.router.navigateByUrl("/recover")}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-login"]],outputs:{showSplashScreen:"showSplashScreen"},features:[e.qOj],decls:35,vars:16,consts:[[1,"sinovad-back-button-container"],[3,"click"],[3,"src"],[1,"sinovad-container"],[1,"sinovad-form-container"],[1,"sinovad-form-content"],[1,"sinovad-logo-container"],[1,"sinovad-title-container"],[1,"mb-3"],[1,"form-label"],[1,"sinovad-form-textinput-container"],["id","UserName-input","type","text",3,"ngModel","ngModelChange"],["UserName",""],["id","password-input","type","password",3,"ngModel","ngModelChange"],["password",""],[1,"enter",3,"click"],[1,"sinovad-form-error-message-container"],[1,"recover",3,"click"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return r.onClose()}),e._UZ(2,"img",2),e.ALo(3,"async"),e.ALo(4,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e._UZ(9,"img",2),e.ALo(10,"async"),e.ALo(11,"formatDataPipe"),e.qZA(),e.TgZ(12,"div",7),e._uU(13," Inicia sesi\xf3n "),e.qZA(),e.TgZ(14,"div",8),e.TgZ(15,"label",9),e._uU(16," Usuario "),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"input",11,12),e.NdJ("ngModelChange",function(g){return r.user.UserName=g}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"label",9),e._uU(22," Contrase\xf1a "),e.qZA(),e.TgZ(23,"div",10),e.TgZ(24,"input",13,14),e.NdJ("ngModelChange",function(g){return r.user.Password=g}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"div",8),e.TgZ(27,"button",15),e.NdJ("click",function(){return r.login()}),e._uU(28,"INGRESAR"),e.qZA(),e.qZA(),e.TgZ(29,"div",16),e._uU(30),e.qZA(),e.TgZ(31,"div",8),e.TgZ(32,"button",17),e.NdJ("click",function(){return r.showRecoverPasswordPage()}),e._uU(33,"OLVIDASTE TU CONTRASE\xd1A?"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,ul,14,0,"div",18)),2&t&&(e.xp6(2),e.Q6J("src",e.lcZ(3,6,e.xi3(4,8,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(7),e.Q6J("src",e.lcZ(10,11,e.xi3(11,13,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(9),e.Q6J("ngModel",r.user.UserName),e.xp6(6),e.Q6J("ngModel",r.user.Password),e.xp6(6),e.hij(" ",r.errorMessage," "),e.xp6(4),e.Q6J("ngIf",r.showLoading))},directives:[Q.Fj,Q.JJ,Q.On,V.O5],pipes:[V.Ov,qr.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:300px}button.enter[_ngcontent-%COMP%]{background-color:#007bff}button.recover[_ngcontent-%COMP%]{background-color:#2e303d}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),f})();class Vu{}function af(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",11),e._uU(7," Reg\xedstrate "),e.qZA(),e.TgZ(8,"div",12),e.TgZ(9,"label",13),e._uU(10," Correo electr\xf3nico "),e.qZA(),e.TgZ(11,"div",14),e.TgZ(12,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.Email=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",12),e.TgZ(14,"label",13),e._uU(15," Nombres "),e.qZA(),e.TgZ(16,"div",14),e.TgZ(17,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.FirstName=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",12),e.TgZ(19,"label",13),e._uU(20," Apellidos "),e.qZA(),e.TgZ(21,"div",14),e.TgZ(22,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.LastName=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",12),e.TgZ(24,"label",13),e._uU(25," Usuario "),e.qZA(),e.TgZ(26,"div",14),e.TgZ(27,"input",15),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.UserName=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",12),e.TgZ(29,"label",13),e._uU(30," Contrase\xf1a "),e.qZA(),e.TgZ(31,"div",14),e.TgZ(32,"input",16),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.Password=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",12),e.TgZ(34,"label",13),e._uU(35," Confirmar contrase\xf1a "),e.qZA(),e.TgZ(36,"div",14),e.TgZ(37,"input",16),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().registerUserModel.ConfirmPassword=c}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",12),e.TgZ(39,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().register()}),e._uU(40,"Registrar"),e.qZA(),e.qZA(),e.TgZ(41,"div",18),e._uU(42),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,8,e.xi3(5,10,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(9),e.Q6J("ngModel",t.registerUserModel.Email),e.xp6(5),e.Q6J("ngModel",t.registerUserModel.FirstName),e.xp6(5),e.Q6J("ngModel",t.registerUserModel.LastName),e.xp6(5),e.Q6J("ngModel",t.registerUserModel.UserName),e.xp6(5),e.Q6J("ngModel",t.registerUserModel.Password),e.xp6(5),e.Q6J("ngModel",t.registerUserModel.ConfirmPassword),e.xp6(5),e.hij(" ",t.errorMessage," ")}}function Gu(f,n){1&f&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"div",10),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",11),e._uU(7," Registro de Usuario "),e.qZA(),e.TgZ(8,"h2"),e._uU(9,"Usuario registrado satistactoriamente, verifique su correo electr\xf3nico y active su cuenta por favor."),e.qZA(),e.qZA(),e.qZA()),2&f&&(e.xp6(3),e.Q6J("src",e.lcZ(4,1,e.xi3(5,3,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH))}function ia(f,n){1&f&&(e.TgZ(0,"div",21),e.TgZ(1,"div",22),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}let $c=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.router=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this._window=window,this.showLoading=!1,this.showSuccessMessage=!1,this.registerUserModel=new Vu}ngOnInit(){localStorage.getItem("apiToken")&&this.router.navigate(["home"],{skipLocationChange:!1})}register(){this.registerUserModel.ConfirmEmailUrl=window.location.origin+"/confirm",this.showLoading=!0,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/Register",this.registerUserModel).then(t=>{console.log("Registrado exitosamente"),this.showLoading=!1,this.showSuccessMessage=!0},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}onClose(){this.router.navigate(["landing"],{skipLocationChange:!1})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-register-user"]],features:[e.qOj],decls:10,vars:11,consts:[[1,"sinovad-back-button-container"],["header",""],[3,"click"],[3,"src"],[1,"sinovad-container"],["class","sinovad-form-container",4,"ngIf"],["class","sinovad-message-container",4,"ngIf"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-form-container"],[1,"sinovad-form-content"],[1,"sinovad-logo-container"],[1,"sinovad-title-container"],[1,"mb-3"],[1,"form-label"],[1,"sinovad-form-textinput-container"],["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[1,"register",3,"click"],[1,"sinovad-form-error-message-container"],[1,"sinovad-message-container"],[1,"sinovad-message-content"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"button",2),e.NdJ("click",function(){return r.onClose()}),e._UZ(3,"img",3),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,af,43,13,"div",5),e.YNc(8,Gu,10,6,"div",6),e.qZA(),e.YNc(9,ia,14,0,"div",7)),2&t){const c=e.MAs(1);e.xp6(3),e.Q6J("src",e.lcZ(4,6,e.xi3(5,8,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Udp("height","calc(100% - "+c.offsetHeight+"px)"),e.xp6(1),e.Q6J("ngIf",!r.showSuccessMessage),e.xp6(1),e.Q6J("ngIf",r.showSuccessMessage),e.xp6(1),e.Q6J("ngIf",r.showLoading)}},directives:[V.O5,Q.Fj,Q.JJ,Q.On],pipes:[V.Ov,qr.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}button.register[_ngcontent-%COMP%]{background-color:#007bff}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),f})();const Zl=["loginFormContainer"];let Fa=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.activeRoute=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this._window=window,this.showLoading=!1}ngOnInit(){localStorage.getItem("apiToken")&&this.router.navigateByUrl("/home")}showLoginPage(){this.router.navigateByUrl("/login")}showRegisterPage(){this.router.navigateByUrl("/register")}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-landing"]],viewQuery:function(t,r){if(1&t&&e.Gf(Zl,5),2&t){let c;e.iGM(c=e.CRH())&&(r.loginFormContainer=c.first)}},features:[e.qOj],decls:12,vars:6,consts:[["id","sinovad-container",1,"sinovad-container"],[1,"sinovad-form-container"],[1,"sinovad-form-content"],[1,"sinovad-logo-container"],[3,"src"],[1,"sinovad-form-button-section"],[1,"register",3,"click"],[1,"login",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.ALo(5,"async"),e.ALo(6,"formatDataPipe"),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"button",6),e.NdJ("click",function(){return r.showRegisterPage()}),e._uU(9,"REG\xcdSTRATE"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return r.showLoginPage()}),e._uU(11,"INICIA SESI\xd3N"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("src",e.lcZ(5,1,e.xi3(6,3,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH))},pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-form-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:300px}.sinovad-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;color:#fff;padding:10px;text-align:center;border-radius:5px;font-size:14px;opacity:.8;margin-bottom:10px;font-weight:700}.sinovad-form-button-section[_ngcontent-%COMP%]   button.register[_ngcontent-%COMP%]{background-color:#007bff}.sinovad-form-button-section[_ngcontent-%COMP%]   button.login[_ngcontent-%COMP%]{background-color:#2e303d}.sinovad-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}button.register[_ngcontent-%COMP%]{background-color:#007bff}button.login[_ngcontent-%COMP%]{background-color:#2e303d}"]}),f})();var oa=w(8348);function Kl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-item-view",1),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().toggleVideo.emit(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("detail",t.detail)}}let Cs=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.activeRoute=t,this.router=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.toggleVideo=new e.vpe}ngOnInit(){let t=this.activeRoute.snapshot.params.tvSerieId;t?this.getTvSerieDetail(t):this.router.navigate(["404"],{skipLocationChange:!1})}getTvSerieDetail(t){this.restProvider.executeSinovadApiService(ae.yw.GET,"/videos/GetTvSerieDataByUser?userId="+this.sharedData.userData.Id+"&tvSerieId="+t).then(c=>{c.Data.ListSeasons&&c.Data.ListSeasons.length>0&&(c.Data.CurrentSeason=c.Data.ListSeasons[0]),this.detail=c.Data},c=>{console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-tvserie-detail"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"detail","toggleVideo",4,"ngIf"],[3,"detail","toggleVideo"]],template:function(t,r){1&t&&e.YNc(0,Kl,1,1,"app-item-view",0),2&t&&e.Q6J("ngIf",r.detail)},directives:[V.O5,oa.e],styles:[""]}),f})();function zc(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-item-view",1),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().toggleVideo.emit(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("detail",t.detail)}}let ks=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.activeRoute=t,this.router=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.toggleVideo=new e.vpe}ngOnInit(){let t=this.activeRoute.snapshot.params.movieId;t?this.getMovieDetail(t):this.router.navigate(["404"],{skipLocationChange:!1})}getMovieDetail(t){this.restProvider.executeSinovadApiService(ae.yw.GET,"/videos/GetMovieDataByUser?userId="+this.sharedData.userData.Id+"&movieId="+t).then(r=>{this.detail=r.Data},r=>{console.error(r),this.router.navigate(["404"],{skipLocationChange:!1})})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-movie-detail"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"detail","toggleVideo",4,"ngIf"],[3,"detail","toggleVideo"]],template:function(t,r){1&t&&e.YNc(0,zc,1,1,"app-item-view",0),2&t&&e.Q6J("ngIf",r.detail)},directives:[V.O5,oa.e],styles:[""]}),f})();const Wl=["modalTarget"],Se=["profileInfoModal"];function ge(f,n){1&f&&(e.TgZ(0,"p",23),e._uU(1,"El perfil principal no se puede eliminar"),e.qZA())}function he(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onClickDeleteButton()}),e._uU(1,"Eliminar Perfil"),e.qZA()}}function Be(f,n){if(1&f&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&f){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.getInitials(t.currentTmpProfile)," ")}}function ze(f,n){if(1&f&&(e._UZ(0,"img",24),e.ALo(1,"async"),e.ALo(2,"formatDataPipe")),2&f){const t=e.oxw(2);e.uIk("src",e.lcZ(1,1,e.xi3(2,3,t.currentTmpProfile.Id,"GetAvatarImageURLByProfileId")),e.LSH)}}function ft(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProfile()}),e._uU(8,"Listo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"div",9),e.TgZ(12,"h2",10),e._uU(13,"Editar Perfil"),e.qZA(),e.YNc(14,ge,2,0,"p",11),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"div",13),e.TgZ(17,"input",14),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().currentTmpProfile.FullName=c}),e.qZA(),e.TgZ(18,"div",15),e.YNc(19,he,2,0,"button",16),e.qZA(),e.qZA(),e.TgZ(20,"div",17),e.TgZ(21,"input",18,19),e.NdJ("change",function(c){return e.CHM(t),e.oxw().uploadAvatarImage(c)}),e.qZA(),e.TgZ(23,"button",6),e.NdJ("click",function(){return e.CHM(t),e.MAs(22).click()}),e.YNc(24,Be,2,1,"div",20),e.YNc(25,ze,3,6,"img",20),e.TgZ(26,"div",21),e.TgZ(27,"div",22),e._UZ(28,"img",4),e.ALo(29,"async"),e.ALo(30,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,7,e.xi3(5,9,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(11),e.Q6J("ngIf",t.currentTmpProfile&&t.currentTmpProfile.Id>0&&t.currentTmpProfile.Main),e.xp6(3),e.Q6J("ngModel",t.currentTmpProfile.FullName),e.xp6(2),e.Q6J("ngIf",t.currentTmpProfile&&t.currentTmpProfile.Id>0&&!t.currentTmpProfile.Main),e.xp6(5),e.Q6J("ngIf",null==t.currentTmpProfile.AvatarPath),e.xp6(1),e.Q6J("ngIf",null!=t.currentTmpProfile.AvatarPath&&!t.hideImage),e.xp6(3),e.Q6J("src",e.lcZ(29,12,e.xi3(30,14,"edit-profile.png","GetImageURLByKey")),e.LSH)}}let St=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(c,g,v,x),this.ref=t,this.modalService=r,this.restProvider=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe,this.hideImage=!1}ngAfterViewInit(){this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"})}saveProfile(){this.restProvider.executeSinovadApiService(this.currentTmpProfile.Id>0?ae.yw.PUT:ae.yw.POST,this.currentTmpProfile.Id>0?"/profiles/Update":"/profiles/Create",this.currentTmpProfile).then(c=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},c=>{console.error(c)})}onClickDeleteButton(){this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/profiles/Delete/"+this.currentTmpProfile.Id).then(t=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},t=>{console.error(t)})}uploadAvatarImage(t){if(t.target.files&&t.target.files.length>0){let g=t.target.files[0];var r=new FormData;r.append("ProfileId",this.currentTmpProfile.Id.toString()),r.append("File",g,g.name),this.restProvider.executeHttpPostMethodWithFormData("/documents/UploadAvatarProfile",r).then(v=>{this.restProvider.executeSinovadApiService(ae.yw.GET,"/profiles/GetAsync/"+this.currentTmpProfile.Id).then(x=>{this.currentTmpProfile=x.Data,this.hideImage=!0,setTimeout(()=>{this.hideImage=!1},0)},x=>{console.error(x)})},v=>{console.error(v)})}}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(jt.FF),e.Y36(He.C),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-profile-edit"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Wl,5),e.Gf(Se,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first),e.iGM(c=e.CRH())&&(r.profileInfoModal=c.first)}},inputs:{currentTmpProfile:"currentTmpProfile"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"sinovad-form-page-container"],[1,"sinovad-page-header"],[1,"sinovad-logo-container","sinovaclient-left"],[3,"src"],[1,"sinovaclient-right"],[3,"click"],[1,"sinovad-page-container"],[1,"sinovad-page-content"],[1,"top-container"],[1,"title"],["class","subtitle",4,"ngIf"],[1,"bottom-container"],[1,"first"],["type","text",3,"ngModel","ngModelChange"],[1,"sinovad-delete-profile-button-container"],[3,"click",4,"ngIf"],[1,"second"],["type","file","accept",".png, .jpg",2,"display","none",3,"change"],["input",""],["class","sinovad-initials-profile",4,"ngIf"],[1,"sinovad-icon-edit-profile-container"],[1,"sinovad-icon-edit-profile-content"],[1,"subtitle"],[1,"sinovad-initials-profile"]],template:function(t,r){1&t&&e.YNc(0,ft,31,17,"ng-template",null,0,e.W1O)},directives:[V.O5,Q.Fj,Q.JJ,Q.On],pipes:[V.Ov,qr.A],styles:[".sinovad-form-page-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000}.sinovad-page-header[_ngcontent-%COMP%]{padding:10px;display:flex}.sinovad-page-header[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovaclient-left[_ngcontent-%COMP%]{float:left;width:100%}.sinovaclient-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px}.sinovaclient-right[_ngcontent-%COMP%]{float:right;width:100%}.sinovaclient-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right;font-size:20px;background:#007bff;color:#f9f9f9;border-radius:5px;border:none;opacity:.8;height:48px;padding:0 24px}.sinovaclient-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:100px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]{display:block}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .top-container[_ngcontent-%COMP%]{text-align:left}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .top-container[_ngcontent-%COMP%]   h2.title[_ngcontent-%COMP%]{color:#fff;font-size:32px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .top-container[_ngcontent-%COMP%]   p.subtitle[_ngcontent-%COMP%]{font-size:15px;color:#cacaca}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]{display:flex}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f9f91a;color:#fff;min-width:200px;font-size:20px;border-radius:4px;outline:none;padding:7px 12px;border:1px solid transparent}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px solid #dedede}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]{margin:0 0 0 75px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;opacity:.8}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:213px;height:213px;border:2px solid transparent;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:80px;background-color:#789;color:#fff}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-delete-profile-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:30px}.sinovad-delete-profile-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;color:red;opacity:.8;font-size:15px}.sinovad-delete-profile-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}@media only screen and (max-width: 767px){.sinovad-page-header[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:170px}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .top-container[_ngcontent-%COMP%]{text-align:center}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .first[_ngcontent-%COMP%]{order:2}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 0 20px;order:1}.sinovad-page-container[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]   .bottom-container[_ngcontent-%COMP%]   .second[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:140px;height:140px}}"]}),f})();const Ut=["modalTarget"],fn=["profileInfoModal"];function qn(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCloseProfileNew()}),e._uU(8,"CANCELAR"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"div",8),e.TgZ(11,"h2"),e._uU(12,"Crear Perfil"),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"input",10),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().currentTmpProfile.FullName=c}),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProfile()}),e._uU(17,"GUARDAR"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(3),e.Q6J("src",e.lcZ(4,3,e.xi3(5,5,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(11),e.Q6J("placeholder",t.placeHolder)("ngModel",t.currentTmpProfile.FullName)}}let wr=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.modalService=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.close=new e.vpe,this.closeWithChanges=new e.vpe,this.placeHolder="Nombre de Perfil"}ngAfterViewInit(){this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"})}saveProfile(){this.restProvider.executeSinovadApiService(this.currentTmpProfile.Id>0?ae.yw.PUT:ae.yw.POST,this.currentTmpProfile.Id>0?"/profiles/Update":"/profiles/Create",this.currentTmpProfile).then(c=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},c=>{console.error(c)})}onCloseProfileNew(){this.modalReference.close(),this.close.emit(!0)}onClickDeleteButton(){this.restProvider.executeSinovadApiService(ae.yw.DELETE,"/profiles/Delete/"+this.currentTmpProfile.Id).then(t=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},t=>{console.error(t)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-profile-new"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Ut,5),e.Gf(fn,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first),e.iGM(c=e.CRH())&&(r.profileInfoModal=c.first)}},inputs:{currentTmpProfile:"currentTmpProfile"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],[1,"sinovad-form-page-container"],[1,"sinovad-page-header"],[1,"sinovad-logo-container","sinovaclient-left"],[3,"src"],[1,"sinovaclient-right"],[1,"cancel",3,"click"],[1,"sinovad-page-body"],[1,"sinovad-page-content"],[1,"mb-3"],["type","text",3,"placeholder","ngModel","ngModelChange"],[1,"save",3,"click"]],template:function(t,r){1&t&&e.YNc(0,qn,18,8,"ng-template",null,0,e.W1O)},directives:[Q.Fj,Q.JJ,Q.On],pipes:[V.Ov,qr.A],styles:[".sinovad-form-page-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#000}.sinovad-page-header[_ngcontent-%COMP%]{padding:10px;display:flex}.sinovad-page-header[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovaclient-left[_ngcontent-%COMP%]{float:left;width:100%}.sinovaclient-left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:30px}.sinovaclient-right[_ngcontent-%COMP%]{float:right;width:100%}button[_ngcontent-%COMP%]{float:right;font-size:15px;padding:0 24px;height:48px;color:#f9f9f9;border-radius:5px;border:none;opacity:.8}button.save[_ngcontent-%COMP%]{background:#007bff;width:100%}button.cancel[_ngcontent-%COMP%]{background:lightslategrey}button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-body[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-page-body[_ngcontent-%COMP%]   .sinovad-page-content[_ngcontent-%COMP%]{width:300px}.sinovad-page-body[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;text-align:center}.sinovad-page-body[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#f9f9f91a;color:#fff;width:100%;padding:7px 12px;font-size:15px;height:48px}"]}),f})();const lr=["modalTarget"];function Jr(f,n){if(1&f&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.hij(" ",r.getInitials(t)," ")}}function Qr(f,n){if(1&f&&(e._UZ(0,"img",24),e.ALo(1,"async"),e.ALo(2,"formatDataPipe")),2&f){const t=e.oxw().$implicit;e.uIk("src",e.lcZ(1,1,e.xi3(2,3,t.Id,"GetAvatarImageURLByProfileId")),e.LSH)}}function Ro(f,n){1&f&&(e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._UZ(2,"img",9),e.ALo(3,"async"),e.ALo(4,"formatDataPipe"),e.qZA(),e.qZA()),2&f&&(e.xp6(2),e.Q6J("src",e.lcZ(3,1,e.xi3(4,3,"edit-profile.png","GetImageURLByKey")),e.LSH))}function Wo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(4).onSelectProfile(g)}),e.YNc(1,Jr,2,1,"div",21),e.YNc(2,Qr,3,6,"img",21),e.YNc(3,Ro,5,6,"div",22),e.TgZ(4,"div",23),e._uU(5),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(4);e.MGl("id","profile_",t.Id,""),e.xp6(1),e.Q6J("ngIf",null==t.AvatarPath),e.xp6(1),e.Q6J("ngIf",null!=t.AvatarPath),e.xp6(1),e.Q6J("ngIf",r.enableEditMode),e.xp6(2),e.hij(" ",t.FullName," ")}}function fs(f,n){if(1&f&&e.YNc(0,Wo,6,5,"ng-template",19),2&f){const t=e.oxw(3);e.Q6J("ngForOf",t.sharedData.listProfiles)}}function hs(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).changeToEditMode()}),e._uU(1," EDITAR PERFILES "),e.qZA()}}function gs(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).confirmEdit()}),e._uU(1," LISTO "),e.qZA()}}function lo(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",3),e.TgZ(1,"div",4,5),e.TgZ(3,"div",6,7),e.TgZ(5,"div",8),e._UZ(6,"img",9),e.ALo(7,"async"),e.ALo(8,"formatDataPipe"),e.qZA(),e.qZA(),e.TgZ(9,"div",10),e.TgZ(10,"div",11),e._uU(11," \xbfQui\xe9n eres? "),e.qZA(),e.TgZ(12,"div",12),e.YNc(13,fs,1,1,"ng-template",0),e.TgZ(14,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showNewProfile()}),e.TgZ(15,"div",14),e._UZ(16,"img",15),e.ALo(17,"async"),e.ALo(18,"formatDataPipe"),e.qZA(),e.TgZ(19,"div",16),e._uU(20," Crear "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",17,18),e.YNc(23,hs,2,0,"ng-template",0),e.YNc(24,gs,2,0,"ng-template",0),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.MAs(4),r=e.MAs(22),c=e.oxw(2);e.xp6(6),e.Q6J("src",e.lcZ(7,7,e.xi3(8,9,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Udp("height",c.isSmallDevice()?"calc(100% - "+(t.offsetHeight+r.offsetHeight)+"px)":""),e.xp6(4),e.Q6J("ngIf",c.sharedData.listProfiles),e.xp6(3),e.Q6J("src",e.lcZ(17,12,e.xi3(18,14,"plus.png","GetImageURLByKey")),e.LSH),e.xp6(7),e.Q6J("ngIf",!c.enableEditMode),e.xp6(1),e.Q6J("ngIf",c.enableEditMode)}}function Bs(f,n){1&f&&e.YNc(0,lo,25,17,"ng-template",null,2,e.W1O)}function Us(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-profile-edit",29),e.NdJ("close",function(){return e.CHM(t),e.oxw().onCloseForm()})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveProfile()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentTmpProfile",t.currentTmpProfile)}}function ro(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-profile-new",29),e.NdJ("close",function(){return e.CHM(t),e.oxw().onCloseForm()})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveProfile()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentTmpProfile",t.currentTmpProfile)}}let sa=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.modalService=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.enableEditMode=!1,this.showForm=!1,this.selectProfile=new e.vpe,this.showProfiles=new e.vpe,this.loadedProfiles=new e.vpe,this.showModal=!1,this.showNewPage=!1}ngOnInit(){localStorage.getItem("apiToken")?(this.showModal=!0,this.performGetProfiles()):this.router.navigate(["landing"],{skipLocationChange:!1})}ngAfterViewInit(){}ngOnDestroy(){}performGetProfiles(){return new Promise((t,r)=>{this.getProfiles().then(c=>{if(this.showModal){let g=this;this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}),this.modalReference.shown.subscribe(v=>{g.showProfiles.emit(!0),g.loadedProfiles.emit(!0)})}t(!0)},c=>{r(c)})})}changeToEditMode(){this.enableEditMode=!0}confirmEdit(){this.enableEditMode=!1}showNewProfile(){this.currentTmpProfile={FullName:"",UserId:this.sharedData.userData.Id},this.showNewPage=!0}editProfile(t){this.currentTmpProfile=JSON.parse(JSON.stringify(t)),this.showForm=!0}onSelectProfile(t){this.enableEditMode?this.editProfile(t):this.enterProfile(t)}enterProfile(t){this.modalReference.close(),this.selectProfile.emit(t)}onCloseForm(){this.showForm=!1,this.showNewPage=!1}onSaveProfile(){this.showForm=!1,this.showNewPage=!1,this.getProfiles()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(jt.FF),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-profiles-view"]],viewQuery:function(t,r){if(1&t&&e.Gf(lr,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},outputs:{selectProfile:"selectProfile",showProfiles:"showProfiles",loadedProfiles:"loadedProfiles"},features:[e.qOj],decls:3,vars:3,consts:[[3,"ngIf"],[3,"currentTmpProfile","close","closeWithChanges",4,"ngIf"],["modalTarget",""],[1,"sinovad-profiles-view-container","sinovad-profiles-section"],[1,"sinovad-profiles-view-content"],["profilesViewContent",""],[1,"sinovad-page-header"],["profilesViewHeader",""],[1,"sinovad-logo-container"],[3,"src"],[1,"sinovad-profiles-view-body"],[1,"sinovad-profiles-view-title-container"],[1,"sinovad-profiles-view-list-container"],["id","create_new_profile",3,"click"],[1,"sinovad-initials-profile","add"],["width","40px",3,"src"],[1,"sinovad-fullname-profile"],[1,"sinovad-profiles-view-footer"],["profilesViewFooter",""],["ngFor","",3,"ngForOf"],[3,"id","click"],["class","sinovad-initials-profile",4,"ngIf"],["class","sinovad-icon-edit-profile-container",4,"ngIf"],[1,"sinovad-fullname-profile","text-truncate"],[1,"sinovad-initials-profile"],[1,"sinovad-icon-edit-profile-container"],[1,"sinovad-icon-edit-profile-content"],[3,"click"],[1,"ready",3,"click"],[3,"currentTmpProfile","close","closeWithChanges"]],template:function(t,r){1&t&&(e.YNc(0,Bs,2,0,"ng-template",0),e.YNc(1,Us,1,1,"app-profile-edit",1),e.YNc(2,ro,1,1,"app-profile-new",1)),2&t&&(e.Q6J("ngIf",r.showModal),e.xp6(1),e.Q6J("ngIf",r.showForm),e.xp6(1),e.Q6J("ngIf",r.showNewPage))},directives:[V.O5,V.sg,St,wr],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.sinovad-profiles-section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}section[_ngcontent-%COMP%]{outline:none}input[_ngcontent-%COMP%]{outline:none}.sinovad-profiles-view-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.sinovad-profiles-view-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.sinovad-page-header[_ngcontent-%COMP%]{padding:10px}.sinovad-page-header[_ngcontent-%COMP%]   .sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:200px}.sinovad-profiles-view-title-container[_ngcontent-%COMP%]{font-size:32px;color:#fff;text-align:center;padding-bottom:60px;font-weight:700}.sinovad-profiles-view-body[_ngcontent-%COMP%]{overflow-y:auto}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;opacity:.8;padding:0;margin-right:20px;width:140px}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:60px;padding-bottom:30px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;outline:none;opacity:.8;background:lightslategrey;color:#fff;font-size:15px;height:48PX;padding:0 24px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button.ready[_ngcontent-%COMP%]{background:#007bff}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-initials-profile[_ngcontent-%COMP%]{width:140px;height:140px;border-radius:100px;border:none;display:flex;align-items:center;justify-content:center;font-size:80px;background:lightslategrey;color:#fff}.sinovad-initials-profile.add[_ngcontent-%COMP%]{background:#007bff}.sinovad-initials-profile.add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;padding-top:10px}.sinovad-screen-back-container[_ngcontent-%COMP%]{position:relative}.sinovad-screen-back-content[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;left:0;position:absolute;margin-left:20px;opacity:.8;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{width:54px}.small[_nghost-%COMP%]   .sinovad-profiles-view-title-container[_ngcontent-%COMP%]{font-size:23px;padding-bottom:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]{padding-top:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 20px;font-size:20px}.small[_nghost-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:130px;height:130px;font-size:60px}.small[_nghost-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{font-size:23px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]{gap:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:2px;margin-left:0;height:unset;padding:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:30px}"]}),f})();var dl=w(4522);function Yl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().toggleVideo.emit(c)})("showItemView",function(c){return e.CHM(t),e.oxw().onSelectTvSerie(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let aa=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(t,x,Y,ie),this.restProvider=t,this.route=r,this.router=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.toggleVideo=new e.vpe}ngOnInit(){this.title="Series",this.currentMediaTypeID=ae.DD.TvSerie}onSelectTvSerie(t){this.router.navigateByUrl("/tvseriedetail/"+t.Item.TvSerieId)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-tvseries"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,r){1&t&&e.YNc(0,Yl,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",r.sharedData.currentProfile)},directives:[V.O5,dl.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),f})();function ka(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().toggleVideo.emit(c)})("showItemView",function(c){return e.CHM(t),e.oxw().onSelectMovie(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let la=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(t,x,Y,ie),this.restProvider=t,this.route=r,this.router=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.toggleVideo=new e.vpe}ngOnInit(){this.title="Pel\xedculas",this.currentMediaTypeID=ae.DD.Movie}onSelectMovie(t){this.router.navigateByUrl("/moviedetail/"+t.Item.MovieId)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-movies"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,r){1&t&&e.YNc(0,ka,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",r.sharedData.currentProfile)},directives:[V.O5,dl.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),f})();function js(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-horizontal-item-list",1),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().toggleVideo.emit(c)})("showItemView",function(c){return e.CHM(t),e.oxw().onSelectItem(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentMediaTypeID",t.currentMediaTypeID)("title",t.title)}}let $l=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(t,x,Y,ie),this.restProvider=t,this.route=r,this.router=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.toggleVideo=new e.vpe}ngOnInit(){localStorage.getItem("apiToken")||this.router.navigate(["landing"],{skipLocationChange:!1}),this.itemViewData=void 0,this.currentMediaTypeID=void 0}onSelectItem(t){t.Item.TvSerieId?this.router.navigateByUrl("/tvseriedetail/"+t.Item.TvSerieId):t.Item.MovieId&&this.router.navigateByUrl("/moviedetail/"+t.Item.MovieId)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-home"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:1,vars:1,consts:[[3,"currentMediaTypeID","title","toggleVideo","showItemView",4,"ngIf"],[3,"currentMediaTypeID","title","toggleVideo","showItemView"]],template:function(t,r){1&t&&e.YNc(0,js,1,2,"app-horizontal-item-list",0),2&t&&e.Q6J("ngIf",r.sharedData.currentProfile)},directives:[V.O5,dl.j],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),f})();var zl=w(6255);function Vs(f,n){if(1&f&&(e.TgZ(0,"div",7),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.qZA()),2&f){const t=e.oxw();e.xp6(2),e.hij('Resultados para "',t.searchText,'"')}}const lf=function(f){return{small:f}};let Hu=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.route=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.executeSearch=new e.vpe,this.showItemView=new e.vpe,this.searchText=""}ngOnInit(){let t=this.route.snapshot.queryParams.text;null!=t&&""!=t?this.searchText=t:this.router.navigate(["home"],{skipLocationChange:!1})}ngAfterViewInit(){this.executeSearch.emit(this.searchText)}onSelectItem(t){t.Item.TvSerieId?this.router.navigateByUrl("/tvseriedetail/"+t.Item.TvSerieId):t.Item.MovieId&&this.router.navigateByUrl("/moviedetail/"+t.Item.MovieId)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-search-view-web-admin"]],outputs:{executeSearch:"executeSearch",showItemView:"showItemView"},features:[e.qOj],decls:8,vars:7,consts:[[1,"sinovad-search-view-container",3,"ngClass"],["container",""],[1,"sinovad-search-view-title"],["header",""],["class","sinovad-search-view-title-content",4,"ngIf"],["itemListContainer",""],[3,"executeSearch","showItemView"],[1,"sinovad-search-view-title-content"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2,3),e.YNc(4,Vs,3,1,"div",4),e.qZA(),e.TgZ(5,"div",null,5),e.TgZ(7,"app-vertical-item-list",6),e.NdJ("showItemView",function(g){return r.onSelectItem(g)}),e.qZA(),e.qZA(),e.qZA()),2&t){const c=e.MAs(3);e.Q6J("ngClass",e.VKq(5,lf,r.isSmallDevice())),e.xp6(4),e.Q6J("ngIf",null!=r.searchText&&""!=r.searchText),e.xp6(1),e.Udp("height","calc(100% - "+c.offsetHeight+"px)"),e.xp6(2),e.Q6J("executeSearch",r.executeSearch)}},directives:[V.mk,V.O5,zl.E],styles:[".sinovad-search-view-container[_ngcontent-%COMP%]{display:block;height:100%;width:100%;padding:10px;background:#2d3744;overflow:auto}.sinovad-search-view-title[_ngcontent-%COMP%]{color:#fff;margin-left:20px;margin-right:20px}.sinovad-search-view-title[_ngcontent-%COMP%]   .sinovad-search-view-title-content[_ngcontent-%COMP%]{height:100%;border-bottom:1px solid #dedede;width:100%}"]}),f})(),Mi=(()=>{class f extends Pe.X{constructor(t,r,c,g,v){super(t,c,g,v),this.restProvider=t,this.http=r,this.events=c,this.domSanitizer=g,this.sharedData=v}ngOnInit(){}ngAfterViewInit(){}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-search-view-root"]],features:[e.qOj],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"app-search-view-web-admin")},directives:[Hu],styles:[".sinovad-success-message-content[_ngcontent-%COMP%]{width:100%;padding:20px;text-align:center}.sinovad-success-message-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:76px;height:auto;margin:0 auto 25px;display:block}.sinovad-success-message-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:42px;margin-bottom:25px;color:#5c5c5c}.sinovad-success-message-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin-bottom:27px;color:#5c5c5c}.sinovad-success-message-content[_ngcontent-%COMP%]   h3.cupon-pop[_ngcontent-%COMP%]{font-size:25px;margin-bottom:40px;color:#222;display:inline-block;text-align:center;padding:10px 20px;border:2px dashed #222;clear:both;font-weight:400}.sinovad-success-message-content[_ngcontent-%COMP%]   h3.cupon-pop[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#03a9f4}.sinovad-success-message-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin:0 auto;padding:9px 20px;color:#fff;text-transform:uppercase;font-size:14px;background-color:#8bc34a;border-radius:17px}.sinovad-success-message-content[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px;color:#fff}#ignismyModal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border:0px}"]}),f})();const Zu=["customToastPage"],im=function(f,n){return{load:f,disable:n}};function om(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"span",8),e._uU(10,"Privado"),e.qZA(),e.TgZ(11,"span",9),e.TgZ(12,"span",10),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",6),e.TgZ(15,"form",11),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().updateMediaServer()}),e.TgZ(16,"div",6),e.TgZ(17,"label",12),e._uU(18,"Nombre Familiar"),e.qZA(),e._UZ(19,"input",13),e.TgZ(20,"p",14),e._uU(21,"Este nombre se usar\xe1 para que otros ordenadores identifiquen este servidor en tu red. Si lo dejas en blanco se usar\xe1 el nombre del equipo."),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"button",16),e._UZ(24,"div",17),e.TgZ(25,"span",18),e._uU(26,"Guardar cambios"),e.qZA(),e.qZA(),e._UZ(27,"span",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(2),e.hij("",t.mediaServer.FamilyName?t.mediaServer.FamilyName:t.mediaServer.DeviceName," - General"),e.xp6(11),e.Oqu(t.mediaServer.Url),e.xp6(2),e.Q6J("formGroup",t.customForm),e.xp6(4),e.Q6J("placeholder",t.mediaServer.FamilyName?t.mediaServer.FamilyName:t.mediaServer.DeviceName),e.xp6(4),e.Q6J("ngClass",e.WLB(5,im,t.loading,t.customForm.pristine||t.customForm.invalid))}}let eg=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie,Me){super(v,Y,ie,Me),this.ref=t,this.formBuilder=r,this.router=c,this.activeRoute=g,this.restProvider=v,this.http=x,this.events=Y,this.domSanitizer=ie,this.sharedData=Me,this.customForm=this.formBuilder.group({}),this.loading=!1,this.router.routeReuseStrategy.shouldReuseRoute=function(){return!1}}ngOnInit(){this.getMediaServerData()}getMediaServerData(){return(0,zn.mG)(this,void 0,void 0,function*(){this.restProvider.executeSinovadApiService(ae.yw.GET,"/mediaServers/GetByGuidAsync/"+this.activeRoute.snapshot.params.serverGuid).then(r=>{var c=r.Data,g=this.sharedData.mediaServers.find(v=>v.Id==c.Id);c.isSecureConnection=g.isSecureConnection,this.sharedData.selectedMediaServer=c,this.mediaServer=c,this.customForm=this.formBuilder.group({familyName:new Q.NI(this.mediaServer.FamilyName)})},r=>{this.router.navigateByUrl("/404")})})}ngAfterViewInit(){}updateMediaServer(){this.loading=!0;var r=JSON.parse(JSON.stringify(this.mediaServer));r.FamilyName=this.customForm.value.familyName,this.restProvider.executeSinovadApiService(ae.yw.PUT,"/mediaServers/Update",r).then(c=>{this.loading=!1,this.getMediaServers(),this.getMediaServerData(),this.customToastPage.show({containerId:"sinovadMainContainer",displayTime:2e3,message:"Se guardaron los cambios satisfactoriamente",toastType:Dr.Success})},c=>{this.loading=!1,console.error(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(Q.qu),e.Y36(R.F0),e.Y36(R.gz),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-server-setttings-general"]],viewQuery:function(t,r){if(1&t&&e.Gf(Zu,5),2&t){let c;e.iGM(c=e.CRH())&&(r.customToastPage=c.first)}},features:[e.qOj],decls:3,vars:1,consts:[["id","serverSettinsPageContainer","class","sinovad-page-container",4,"ngIf"],["customToastPage",""],["id","serverSettinsPageContainer",1,"sinovad-page-container"],[1,"server-settings-container"],[1,"settings-row"],[1,"pane-region"],[1,"form-group"],[1,"remote-access-mapping"],[1,"mapping-label"],[1,"mapping-address"],[1,"mapping-value"],[1,"server-settings-form",3,"formGroup","ngSubmit"],[1,"control-label"],["type","text","formControlName","familyName",1,"form-control",3,"placeholder"],[1,"help-block"],[1,"form-footer"],["type","submit",1,"save",3,"ngClass"],[1,"loading"],[1,"btn-label"],[1,"form-message"]],template:function(t,r){1&t&&(e.YNc(0,om,28,8,"div",0),e._UZ(1,"app-custom-toast",null,1)),2&t&&e.Q6J("ngIf",r.mediaServer)},directives:[V.O5,Q._Y,Q.JL,Q.sg,Q.Fj,Q.JJ,Q.u,V.mk,Kr],styles:['.sinovad-page-container[_ngcontent-%COMP%]{padding:0 20px 48px 30px;max-width:1030px;display:flex;flex-direction:column;flex-grow:1;margin:0 auto;width:100%}.sinovad-page-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:24px;margin-bottom:20px;margin-top:40px}.sinovad-page-container[_ngcontent-%COMP%]   .server-settings-container[_ngcontent-%COMP%]{position:relative}.sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]{margin-left:-15px;margin-right:-15px}.sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]:after, .sinovad-page-container[_ngcontent-%COMP%]   .settings-row[_ngcontent-%COMP%]:before{content:" ";display:table}.sinovad-page-container[_ngcontent-%COMP%]   .pane-region[_ngcontent-%COMP%]{min-height:1px;padding-left:15px;padding-right:15px;position:relative}.sinovad-page-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.sinovad-page-container[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:5px;color:#eee}.sinovad-page-container[_ngcontent-%COMP%]   .remote-access-mapping[_ngcontent-%COMP%]{padding-top:18px}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-label[_ngcontent-%COMP%]{margin-right:5px;color:#999}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-address[_ngcontent-%COMP%]{font-size:0}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-value[_ngcontent-%COMP%]{font-size:14px;color:#fff}.sinovad-page-container[_ngcontent-%COMP%]   .mapping-separator[_ngcontent-%COMP%]{margin:0 4px;font-size:14px}.sinovad-page-container[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:#ffffff40;border-radius:3px;color:#eee;display:block;font-size:14px;height:38px;padding:6px 12px;vertical-align:middle;width:100%;border:0;box-shadow:none;line-height:1.5em;transition:background-color .2s;max-width:400px}.sinovad-page-container[_ngcontent-%COMP%]   .help-block[_ngcontent-%COMP%]{display:block;font-size:13px;margin-bottom:10px;margin-top:5px;color:#ffffff73}.sinovad-page-container[_ngcontent-%COMP%]   .form-footer[_ngcontent-%COMP%]{align-items:center;display:flex;margin-top:40px}.sinovad-page-container[_ngcontent-%COMP%]   button.save[_ngcontent-%COMP%]{border-radius:3px;font-size:16px;line-height:1.33;padding:10px 18px;flex-shrink:0;text-transform:capitalize;border:0;overflow:hidden;position:relative;cursor:pointer;display:inline-block;font-weight:400;margin-bottom:0;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap;color:#fff;background-color:#007bff;opacity:.8}.sinovad-page-container[_ngcontent-%COMP%]   button.save[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-page-container[_ngcontent-%COMP%]   button.save.load[_ngcontent-%COMP%]{pointer-events:none}.sinovad-page-container[_ngcontent-%COMP%]   button.save.disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.4}.sinovad-page-container[_ngcontent-%COMP%]   .form-message[_ngcontent-%COMP%]{color:#999;margin:0 20px}.sinovad-page-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{animation:auto;border-color:#cc7b19 transparent transparent #cc7b19;border-radius:50%;border-style:solid;border-width:2px;height:16px;margin:-8px 0 0 -8px;width:16px;border-left-color:#fff;border-top-color:#fff;left:-12px;position:absolute;top:50%;transition:left .2s;visibility:hidden;z-index:1}.sinovad-page-container[_ngcontent-%COMP%]   .btn-label[_ngcontent-%COMP%]{left:0;position:relative;transition:left .2s,opacity .2s}']}),f})();const cf=[{path:"",children:[{path:"home",component:$l,loadChildren:()=>Promise.all([w.e(592),w.e(467)]).then(w.bind(w,3467)).then(f=>f.HomePageModule)},{path:"movies",component:la,loadChildren:()=>Promise.all([w.e(592),w.e(832)]).then(w.bind(w,1832)).then(f=>f.MoviesPageModule)},{path:"tvseries",component:aa,loadChildren:()=>Promise.all([w.e(592),w.e(132)]).then(w.bind(w,8132)).then(f=>f.TvSeriesPageModule)},{path:"search",component:Mi,loadChildren:()=>Promise.all([w.e(592),w.e(278)]).then(w.bind(w,5278)).then(f=>f.SearchViewRootPageModule)},{path:"select-profile",component:sa,loadChildren:()=>Promise.resolve().then(w.bind(w,377)).then(f=>f.ProfilesViewPageModule)},{path:"moviedetail/:movieId",component:ks,loadChildren:()=>Promise.all([w.e(592),w.e(686)]).then(w.bind(w,686)).then(f=>f.MovieDetailPageModule)},{path:"tvseriedetail/:tvSerieId",component:Cs,loadChildren:()=>Promise.all([w.e(592),w.e(221)]).then(w.bind(w,5221)).then(f=>f.TvSerieDetailPageModule)},{path:"landing",component:Fa,loadChildren:()=>w.e(721).then(w.bind(w,8721)).then(f=>f.LandingPageModule)},{path:"register",component:$c,loadChildren:()=>w.e(31).then(w.bind(w,8031)).then(f=>f.RegisterAcccountPageModule)},{path:"login",component:Hl,loadChildren:()=>w.e(107).then(w.bind(w,107)).then(f=>f.LoginPageModule)},{path:"recover",component:Yc,loadChildren:()=>w.e(185).then(w.bind(w,5185)).then(f=>f.RecoverPasswordPageModule)},{path:"reset/:base64Data",component:ll,loadChildren:()=>w.e(371).then(w.bind(w,4371)).then(f=>f.ResetPasswordPageModule)},{path:"confirm/:base64Data",component:Oa,loadChildren:()=>w.e(994).then(w.bind(w,2994)).then(f=>f.ConfirmEmailPageModule)},{path:"404",component:ds,loadChildren:()=>w.e(867).then(w.bind(w,2867)).then(f=>f.NotFoundPageModule)},{path:"settings/server/:serverGuid/settings/general",component:eg,loadChildren:()=>Promise.all([w.e(592),w.e(135)]).then(w.bind(w,5135)).then(f=>f.ServerSettingsGeneralPageModule)},{path:"settings/server/:serverGuid/manage/libraries",component:Ni,loadChildren:()=>Promise.all([w.e(592),w.e(191)]).then(w.bind(w,8191)).then(f=>f.ManageMediaPageModule)},{path:"settings/server/:serverGuid/settings/transcoder",component:Vr,loadChildren:()=>Promise.all([w.e(592),w.e(144)]).then(w.bind(w,6144)).then(f=>f.TranscoderSettingssPageModule)},{path:"movie-list",component:_n,loadChildren:()=>Promise.all([w.e(592),w.e(163)]).then(w.bind(w,6163)).then(f=>f.MovieListPageModule)},{path:"tvserie-list",component:hn,loadChildren:()=>Promise.all([w.e(592),w.e(695)]).then(w.bind(w,4695)).then(f=>f.TvSerieListPageModule)},{path:"genre-list",component:Dt,loadChildren:()=>Promise.all([w.e(592),w.e(115)]).then(w.bind(w,9115)).then(f=>f.GenreListPageModule)},{path:"menu-list",component:Ot,loadChildren:()=>Promise.all([w.e(592),w.e(321)]).then(w.bind(w,4321)).then(f=>f.MenuListPageModule)},{path:"user-list",component:Jt,loadChildren:()=>Promise.all([w.e(592),w.e(333)]).then(w.bind(w,7333)).then(f=>f.UserListPageModule)},{path:"role-list",component:Yt,loadChildren:()=>Promise.all([w.e(592),w.e(219)]).then(w.bind(w,3219)).then(f=>f.RoleListPageModule)},{path:"settings/account",component:X,loadChildren:()=>w.e(340).then(w.bind(w,7340)).then(f=>f.AccountPageModule)},{path:"",pathMatch:"full",redirectTo:"home"},{path:"web",pathMatch:"full",redirectTo:"home"}]}];let Ku=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[i.b2,V.ez,Q.u5,de.m,Q.UX,je,R.Bz.forChild(cf)]]}),f})();function tg(f,n){if(1&f&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&f){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.getInitials(t.sharedData.currentProfile)," ")}}function fl(f,n){if(1&f&&(e._UZ(0,"img",11),e.ALo(1,"async"),e.ALo(2,"formatDataPipe")),2&f){const t=e.oxw(2);e.uIk("src",e.lcZ(1,1,e.xi3(2,3,t.sharedData.currentProfile.Id,"GetAvatarImageURLByProfileId")),e.LSH)}}function uf(f,n){if(1&f&&(e.TgZ(0,"span",9),e._uU(1),e.qZA(),e.YNc(2,tg,2,1,"div",10),e.YNc(3,fl,3,6,"img",10)),2&f){const t=e.oxw();e.xp6(1),e.hij(" ",t.sharedData.currentProfile.FullName," "),e.xp6(1),e.Q6J("ngIf",null==t.sharedData.currentProfile.AvatarPath),e.xp6(1),e.Q6J("ngIf",null!=t.sharedData.currentProfile.AvatarPath)}}function Vi(f,n){if(1&f&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&f){const t=e.oxw(2).$implicit,r=e.oxw(2);e.xp6(1),e.hij(" ",r.getInitials(t)," ")}}function Wu(f,n){if(1&f&&(e._UZ(0,"img",11),e.ALo(1,"async"),e.ALo(2,"formatDataPipe")),2&f){const t=e.oxw(2).$implicit;e.uIk("src",e.lcZ(1,1,e.xi3(2,3,t.Id,"GetAvatarImageURLByProfileId")),e.LSH)}}function Ba(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"li",2),e.TgZ(1,"a",14,4),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit;return e.oxw(2).onSelectProfile(c)}),e.YNc(3,Vi,2,1,"div",10),e.YNc(4,Wu,3,6,"img",10),e.TgZ(5,"span",9),e._uU(6),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",null==t.AvatarPath),e.xp6(1),e.Q6J("ngIf",null!=t.AvatarPath),e.xp6(2),e.hij(" ",t.FullName," ")}}function ca(f,n){if(1&f&&e.YNc(0,Ba,7,3,"li",13),2&f){const t=n.$implicit,r=e.oxw(2);e.Q6J("ngIf",r.sharedData.currentProfile&&t.Id!=r.sharedData.currentProfile.Id)}}function Yu(f,n){if(1&f&&e.YNc(0,ca,1,1,"ng-template",12),2&f){const t=e.oxw();e.Q6J("ngForOf",t.sharedData.listProfiles)}}let io=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.router=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.showAdminMode=new e.vpe,this.showSplashScreen=new e.vpe,this.changeProfile=new e.vpe,this.logout=new e.vpe}ngOnInit(){}onClickAvatarButton(){}onClickChangeProfileButton(){this.showSplashScreen.emit(!0),this.router.navigateByUrl("/select-profile")}onClickEditProfilesButton(){this.showSplashScreen.emit(!0),this.router.navigateByUrl("/select-profile")}onSelectProfile(t){this.sharedData.currentProfile=t,this.changeProfile.emit(!0)}onClickAccountOption(){this.router.navigateByUrl("/settings/account")}onClickAdminMode(){this.router.navigateByUrl(this.sharedData.listMenus[0].ChildMenus[0].Path)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-dropdown-user"]],outputs:{showAdminMode:"showAdminMode",showSplashScreen:"showSplashScreen",changeProfile:"changeProfile",logout:"logout"},features:[e.qOj],decls:25,vars:2,consts:[[1,"sinovad-user-dropdown"],["role","menu",1,"sinovad-dropdown-list"],[1,"sinovad-avatar-item"],["id","avatar_button",1,"sinovad-avatar-button","principal",3,"click"],["button",""],[3,"ngIf"],[1,"sinovad-separator-dropdown"],[1,"sinovad-bottom-list"],[3,"click"],[1,"sinovad-fullname-profile","text-truncate"],["class","sinovad-initials-profile",4,"ngIf"],[1,"sinovad-initials-profile"],["ngFor","",3,"ngForOf"],["class","sinovad-avatar-item",4,"ngIf"],["id","avatar_button",1,"sinovad-avatar-button",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"ul",1),e.TgZ(2,"li",2),e.TgZ(3,"a",3,4),e.NdJ("click",function(){return r.onClickAvatarButton()}),e.YNc(5,uf,4,3,"ng-template",5),e.qZA(),e.qZA(),e._UZ(6,"div",6),e.TgZ(7,"div",7),e.YNc(8,Yu,1,1,"ng-template",5),e.TgZ(9,"li",2),e.TgZ(10,"a",8),e.NdJ("click",function(){return r.onClickEditProfilesButton()}),e.TgZ(11,"span"),e._uU(12,"Editar perfiles"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"li",2),e.TgZ(14,"a",8),e.NdJ("click",function(){return r.onClickAccountOption()}),e.TgZ(15,"span"),e._uU(16,"Cuenta"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"li",2),e.TgZ(18,"a",8),e.NdJ("click",function(){return r.onClickAdminMode()}),e.TgZ(19,"span"),e._uU(20,"Modo administrador"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"li",2),e.TgZ(22,"a",8),e.NdJ("click",function(){return r.logout.emit(!0)}),e.TgZ(23,"span"),e._uU(24,"Cerrar Sesi\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngIf",r.sharedData.currentProfile),e.xp6(3),e.Q6J("ngIf",r.sharedData.listProfiles&&r.sharedData.listProfiles.length>0))},directives:[V.O5,V.sg],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{height:100%}.sinovad-user-dropdown[_ngcontent-%COMP%]{height:100%;display:flex;align-items:flex-start}ul.sinovad-dropdown-list[_ngcontent-%COMP%]{background:transparent;border:1px solid transparent;box-shadow:none;height:100%;max-height:72px;padding:0 20px;width:100px;align-items:center;border-radius:4px;display:flex;flex-flow:row wrap;justify-content:flex-end;list-style:none;margin:0;position:absolute;right:0}ul.sinovad-dropdown-list[_ngcontent-%COMP%]   .sinovad-separator-dropdown[_ngcontent-%COMP%], ul.sinovad-dropdown-list[_ngcontent-%COMP%]   .sinovad-bottom-list[_ngcontent-%COMP%]{display:none}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover{background:#131313;border:1px solid rgba(151,151,151,.34);box-shadow:#00000080 0 0 18px;height:auto;max-height:calc(100vh - 40px);padding-top:10px;padding-bottom:20px;width:240px;z-index:10;align-items:center;border-radius:4px;display:flex;flex-flow:row wrap;justify-content:flex-end;list-style:none;margin:0;position:absolute;right:0}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-separator-dropdown[_ngcontent-%COMP%]{width:100%;padding-left:10px;height:2px;background-color:#fff;display:block;margin-top:10px}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]{display:block}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]{margin-top:10px;width:200px;opacity:.7;font-size:16px;cursor:pointer}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}ul.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-bottom-list[_ngcontent-%COMP%]   .sinovad-avatar-item[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]{display:block;padding-left:0;background:transparent;border:none;cursor:pointer;color:#fff;display:flex;align-items:center;text-decoration:unset}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;margin-left:10px;font-size:20px;margin-right:10px}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px;border:1px solid white;display:flex;align-items:center;justify-content:center;font-size:30px}.sinovad-avatar-button.principal[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block}@media only screen and (max-width: 1024px){.sinovad-avatar-button.principal[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:none}.sinovad-dropdown-list[_ngcontent-%COMP%]:hover   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block}}"]}),f})();const No=["searchTarget"],qc=function(){return["/home"]};function ql(f,n){1&f&&(e.TgZ(0,"a",12),e._UZ(1,"i",13),e.qZA()),2&f&&e.Q6J("routerLink",e.DdM(1,qc))}const Ua=function(f){return{focused:f}};function $u(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"div",15),e.TgZ(2,"input",6,7),e.NdJ("ngModelChange",function(c){return e.CHM(t),e.oxw().searchText=c})("change",function(){return e.CHM(t),e.oxw().onChangeSearchValue()})("focus",function(){return e.CHM(t),e.oxw().isFocusSearch=!0})("blur",function(){return e.CHM(t),e.oxw().isFocusSearch=!1}),e.qZA(),e.TgZ(4,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().onClickSearchButton()}),e._UZ(5,"i",9),e.qZA(),e.qZA(),e.TgZ(6,"div",16),e.TgZ(7,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().showNavbarSearch=!1}),e._UZ(8,"i",17),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Ua,t.isFocusSearch)),e.xp6(1),e.Q6J("ngModel",t.searchText)}}let zu=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.router=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.goHome=new e.vpe,this.toggleSidebar=new e.vpe,this.selectOption=new e.vpe,this.showSplashScreen=new e.vpe,this.logout=new e.vpe,this.executeSearch=new e.vpe,this.toggleMenu=new e.vpe,this.showAdminMode=new e.vpe,this.searchText="",this.isFocusSearch=!1,this.showDropDown=!1,this.showNavbarSearch=!1}ngOnInit(){}ngAfterViewInit(){this.addClickEvent()}onClickSearchButton(){this.showNavbarSearch=!0}addClickEvent(){const t=document.getElementById("userDropDown");document.addEventListener("click",r=>{this.showDropDown=!!r.composedPath().includes(t)})}onClickHomeOption(){this.router.navigateByUrl("/home")}onClickOption(t){this.selectOption.emit(t)}onSelectProfile(t){this.sharedData.currentProfile=t,this.goHome.emit(!0)}onClickChangeProfileButton(){this.showSplashScreen.emit(!0)}onChangeSearchValue(){this.executeSearch.emit(this.searchText),this.searchText=""}onClickToggleSidebarButton(t){t.preventDefault(),t.stopPropagation(),this.toggleSidebar.emit(!0)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-header-web-admin"]],viewQuery:function(t,r){if(1&t&&e.Gf(No,5),2&t){let c;e.iGM(c=e.CRH())&&(r.searchTarget=c.first)}},inputs:{showingSidebarAccount:"showingSidebarAccount",showingSidebarAdminMode:"showingSidebarAdminMode"},outputs:{goHome:"goHome",toggleSidebar:"toggleSidebar",selectOption:"selectOption",showSplashScreen:"showSplashScreen",logout:"logout",executeSearch:"executeSearch",toggleMenu:"toggleMenu",showAdminMode:"showAdminMode"},features:[e.qOj],decls:16,vars:14,consts:[[1,"nav-button-icon-container","toggle",3,"click"],[1,"fa-solid","fa-bars"],["class","nav-button-icon-container home",3,"routerLink",4,"ngIf"],[1,"sinovad-logo-button",3,"routerLink"],[3,"src"],[1,"sinovad-custom-search",3,"ngClass"],["type","text",3,"ngModel","ngModelChange","change","focus","blur"],["input",""],[3,"click"],[1,"fa-solid","fa-magnifying-glass"],[3,"showAdminMode","logout","changeProfile","showSplashScreen"],["class","sinovad-navbar-search",4,"ngIf"],[1,"nav-button-icon-container","home",3,"routerLink"],[1,"fa-solid","fa-house"],[1,"sinovad-navbar-search"],[1,"sinovad-bottom-search",3,"ngClass"],[1,"sinovad-close-search-container"],[1,"fa","fa-times"]],template:function(t,r){1&t&&(e.TgZ(0,"header"),e.TgZ(1,"nav"),e.TgZ(2,"a",0),e.NdJ("click",function(g){return r.onClickToggleSidebarButton(g)}),e._UZ(3,"i",1),e.qZA(),e.YNc(4,ql,2,2,"a",2),e.TgZ(5,"a",3),e._UZ(6,"img",4),e.ALo(7,"async"),e.ALo(8,"formatDataPipe"),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"input",6,7),e.NdJ("ngModelChange",function(g){return r.searchText=g})("change",function(){return r.onChangeSearchValue()})("focus",function(){return r.isFocusSearch=!0})("blur",function(){return r.isFocusSearch=!1}),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return r.onClickSearchButton()}),e._UZ(13,"i",9),e.qZA(),e.qZA(),e.TgZ(14,"app-dropdown-user",10),e.NdJ("showAdminMode",function(g){return r.showAdminMode.emit(g)})("logout",function(){return r.logout.emit(!0)})("changeProfile",function(){return r.goHome.emit(!0)})("showSplashScreen",function(){return r.showSplashScreen.emit(!0)}),e.qZA(),e.qZA(),e.YNc(15,$u,9,4,"div",11),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",r.showingSidebarAccount||r.showingSidebarAdminMode),e.xp6(1),e.Q6J("routerLink",e.DdM(11,qc)),e.xp6(1),e.Q6J("src",e.lcZ(7,6,e.xi3(8,8,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngClass",e.VKq(12,Ua,r.isFocusSearch&&!r.isSmallDevice())),e.xp6(1),e.Q6J("ngModel",r.searchText),e.xp6(5),e.Q6J("ngIf",r.isSmallDevice()&&r.showNavbarSearch))},directives:[V.O5,R.yS,V.mk,Q.Fj,Q.JJ,Q.On,io],pipes:[V.Ov,qr.A],styles:[".nav-button-icon-container[_ngcontent-%COMP%]{padding:0;border:none;margin-left:30px;cursor:pointer;color:#fff;font-size:24px;opacity:.7;display:none}.nav-button-icon-container.home[_ngcontent-%COMP%]{display:block}.sinovad-logo-button[_ngcontent-%COMP%]{padding:0;border:none;margin-left:30px;cursor:pointer;text-decoration:unset;font-size:20px}.sinovad-logo-button[_ngcontent-%COMP%]   .first-span[_ngcontent-%COMP%]{color:#007bff;margin-right:6px}.sinovad-logo-button[_ngcontent-%COMP%]   .second-span[_ngcontent-%COMP%]{color:#fff}.sinovad-logo-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;margin-bottom:6px}.sinovad-custom-search[_ngcontent-%COMP%]{display:flex;align-items:center;height:30px;border-radius:5px;border:2px solid transparent;margin-left:20px;background-color:#fff}.sinovad-custom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;padding-left:10px}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;padding-right:8px;padding-left:8px}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-custom-search.focused[_ngcontent-%COMP%]{border:2px solid #007bff}.nav-button-icon-container[_ngcontent-%COMP%]:hover{opacity:1}nav[_ngcontent-%COMP%]{background:black;color:#fff;flex-wrap:nowrap;justify-content:flex-start;display:flex;height:70px;align-items:center}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]{list-style-type:none;flex-direction:row;display:flex;height:100%;align-items:center;margin-bottom:0}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%}nav[_ngcontent-%COMP%]   ul.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;cursor:pointer;text-decoration:unset;height:100%;display:flex;align-items:center;padding-left:10px;padding-right:10px}.sinovad-navbar-search[_ngcontent-%COMP%]{background:black;display:flex;align-items:center;padding:10px 20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;height:30px;border-radius:5px;border:2px solid transparent;margin-right:20px;background-color:#fff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;padding-left:10px;width:100%}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;padding-right:8px;padding-left:8px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-bottom-search.focused[_ngcontent-%COMP%]{border:2px solid #007bff}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]{width:20px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;border-radius:0 7px 7px 0;opacity:.7;color:#fff;padding-right:8px;padding-left:8px;font-size:24px}.sinovad-navbar-search[_ngcontent-%COMP%]   .sinovad-close-search-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}@media only screen and (max-width: 1024px){.sinovad-nav-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.sinovad-custom-search[_ngcontent-%COMP%]{background:transparent}.sinovad-custom-search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;font-size:24px}.sinovad-custom-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}}@media only screen and (max-width: 767px){.sinovad-logo-button[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}.sinovad-logo-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:110px}.nav-button-icon-container.toggle[_ngcontent-%COMP%]{display:block}.nav-button-icon-container.home[_ngcontent-%COMP%]{display:none}}"]}),f})();function df(f,n){1&f&&e._UZ(0,"i",9)}function ja(f,n){1&f&&e._UZ(0,"i",10)}function sm(f,n){if(1&f&&e._UZ(0,"i"),2&f){const t=e.oxw().$implicit;e.Tol(t.IconClass)}}const Jc=function(f){return[f]},Yo=function(f){return{active:f}};function qu(f,n){if(1&f&&(e.TgZ(0,"li",12),e.TgZ(1,"a",13),e.YNc(2,sm,1,3,"i",14),e.TgZ(3,"span",7),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&f){const t=n.$implicit,r=e.oxw(3);e.xp6(1),e.Q6J("routerLink",e.VKq(4,Jc,t.Path))("ngClass",e.VKq(6,Yo,r.isSelectedMenu(t))),e.xp6(1),e.Q6J("ngIf",t.IconClass),e.xp6(2),e.Oqu(t.Title)}}function ua(f,n){if(1&f&&(e.TgZ(0,"div"),e.TgZ(1,"ul",11),e.YNc(2,qu,5,8,"ng-template",2),e.qZA(),e.qZA()),2&f){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.ChildMenus)}}function Ss(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"li",3),e.TgZ(1,"button",4),e.NdJ("click",function(c){const v=e.CHM(t).$implicit;return e.oxw().onClickModule(v,c)}),e.YNc(2,df,1,0,"i",5),e.YNc(3,ja,1,0,"i",6),e.TgZ(4,"span",7),e._uU(5),e.qZA(),e.qZA(),e.YNc(6,ua,3,1,"div",8),e.qZA()}if(2&f){const t=n.$implicit;e.xp6(2),e.Q6J("ngIf",t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed),e.xp6(2),e.Oqu(t.Title),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed)}}let ff=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.ref=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.refreshSidebarOption=new e.vpe,this.prepareRouterOutlet=new e.vpe,this.collapseSidebar=new e.vpe}ngOnInit(){let t=this;this.selectHomeUserOption.subscribe(r=>{t.selectDefaultOption()}),this.unselectSidebarOption.subscribe(r=>{t.selectedSidebarOption=void 0,t.selectedSidebarModule=void 0})}ngAfterViewInit(){setTimeout(()=>{this.setSelectedOptionByPathname()},500)}selectDefaultOption(){this.selectedSidebarModule=this.sharedData.listMenus[0],this.selectedSidebarOption=this.selectedSidebarModule.ChildMenus[0]}setSelectedOptionByPathname(){this.sharedData.listMenus.forEach(t=>{t.ChildMenus.forEach(r=>{-1!=window.location.pathname.indexOf(r.Path)&&(this.selectedSidebarModule=t,this.selectedSidebarOption=r)})})}onClickModule(t,r){r.preventDefault(),r.stopPropagation(),t.isCollapsed=!t.isCollapsed}onClickOutsideSidebar(t){t.preventDefault(),t.stopPropagation(),this.collapseSidebar.emit(!0)}isSelectedMenu(t){return-1!=t.Path.indexOf(window.location.pathname)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(e.sBO),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sidebar-administrator"]],inputs:{selectHomeUserOption:"selectHomeUserOption",unselectSidebarOption:"unselectSidebarOption",refreshSidebarOption:"refreshSidebarOption"},outputs:{prepareRouterOutlet:"prepareRouterOutlet",collapseSidebar:"collapseSidebar"},features:[e.qOj],decls:3,vars:1,consts:[[1,"sidebar-backdrop",3,"clickOutside"],[1,"sinovad-sidebar-modules-list"],["ngFor","",3,"ngForOf"],[1,"sinovad-sidebar-module-element"],[1,"sinovad-sidebar-module-button",3,"click"],["class","fa-solid fa-chevron-right",4,"ngIf"],["class","fa-solid fa-chevron-down",4,"ngIf"],[1,"ms-2"],[4,"ngIf"],[1,"fa-solid","fa-chevron-right"],[1,"fa-solid","fa-chevron-down"],[1,"sinovad-sidebar-options-list"],[1,"sinovad-sidebar-option-element"],[3,"routerLink","ngClass"],[3,"class",4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.NdJ("clickOutside",function(g){return r.onClickOutsideSidebar(g)}),e.TgZ(1,"ul",1),e.YNc(2,Ss,7,4,"ng-template",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",r.sharedData.listMenus))},directives:[Ze,V.sg,V.O5,R.yS,V.mk],styles:[".sidebar-backdrop[_ngcontent-%COMP%]{width:240px;height:100%;background:#0c0d11}.sinovad-sidebar-modules-list[_ngcontent-%COMP%]{display:block;padding:10px 10px 10px 20px;width:240px}.sinovad-sidebar-module-element[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-module-button[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:none;opacity:.75;width:100%;height:30px;text-align:left;font-size:16px}.sinovad-sidebar-module-button.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-module-button[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}.sinovad-sidebar-options-list[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-option-element[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;height:100%;display:flex;align-items:center;opacity:.75;font-size:16px;width:100%;text-decoration:unset;color:#fff}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}@media only screen and (max-width: 767px){.sidebar-backdrop[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:999}}"]}),f})();function ng(f,n){1&f&&e._UZ(0,"i",12)}const hf=function(f){return{selected:f}};function rg(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"a",3),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(2).onClickDropDownMenuOption(g)}),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e.TgZ(3,"div",6),e._uU(4),e.qZA(),e.TgZ(5,"div",7),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",8),e.TgZ(8,"div",9),e.YNc(9,ng,1,0,"i",10),e.qZA(),e.TgZ(10,"div",11),e._UZ(11,"i"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit;e.Q6J("ngClass",e.VKq(7,hf,t.isSelected)),e.xp6(4),e.hij(" ",t.title," "),e.xp6(2),e.hij(" ",t.subtitle," "),e.xp6(3),e.Q6J("ngIf",t.isSelected),e.xp6(2),e.Tol(t.iconClass)}}function ig(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("clickOutside",function(){return e.CHM(t),e.oxw().onClickOutside()}),e.YNc(1,rg,12,9,"ng-template",2),e.qZA()}if(2&f){const t=e.oxw();e.Udp("width",t.width+"px")("top",t.top+"px")("left",t.left+"px"),e.xp6(1),e.Q6J("ngForOf",t.dropDownMenuOptions.listItems)}}let og=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(g,x,Y,ie),this.router=t,this.ref=r,this.viewContainerRef=c,this.restProvider=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.hideContextMenu=new e.vpe,this.clickItem=new e.vpe,this.show=!1}ngOnInit(){}ngOnDestroy(){this.hideContextMenu.emit(!0)}ngAfterViewInit(){this.showContent()}showContent(){return(0,zn.mG)(this,void 0,void 0,function*(){yield this.delay(100),this.show=!0})}onClickOutside(){this.hideContextMenu.emit(!0)}onClickDropDownMenuOption(t){this.clickItem.emit(t),this.router.navigateByUrl(t.path)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(e.sBO),e.Y36(e.s_b),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-drop-down-menu-content"]],inputs:{dropDownMenuOptions:"dropDownMenuOptions",top:"top",left:"left",width:"width"},outputs:{hideContextMenu:"hideContextMenu",clickItem:"clickItem"},features:[e.qOj],decls:1,vars:1,consts:[["class","sinovad-drop-down-menu-item-list",3,"width","top","left","clickOutside",4,"ngIf"],[1,"sinovad-drop-down-menu-item-list",3,"clickOutside"],["ngFor","",3,"ngForOf"],[1,"sinovad-drop-down-menu-item-container",3,"ngClass","click"],[1,"sinovad-drop-down-menu-item-content"],[1,"left"],[1,"title"],[1,"subtitle"],[1,"right"],[1,"selected-icon-container"],["class","fa-solid fa-check",4,"ngIf"],[1,"icon-container"],[1,"fa-solid","fa-check"]],template:function(t,r){1&t&&e.YNc(0,ig,2,7,"div",0),2&t&&e.Q6J("ngIf",r.show)},directives:[V.O5,Ze,V.sg,V.mk],styles:[".sinovad-drop-down-menu-item-list[_ngcontent-%COMP%]{position:absolute;z-index:999999999;border-radius:5px;background:#131313;border:none;box-shadow:#00000080 0 0 18px;color:#fff}a.sinovad-drop-down-menu-item-container[_ngcontent-%COMP%]{height:60px;padding:8px 10px 8px 25px;width:100%;word-wrap:break-word;display:block;font-size:13px;text-align:left;-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;color:#ffffffb3}a.sinovad-drop-down-menu-item-container.selected[_ngcontent-%COMP%]{color:#007bff}a.sinovad-drop-down-menu-item-container[_ngcontent-%COMP%]:hover{color:#fff;background-color:#ffffff14}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:space-between;width:100%}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex-grow:1;line-height:1.5;overflow:hidden}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{max-width:100%;min-width:0;overflow:hidden!important;text-overflow:ellipsis;white-space:nowrap!important;font-size:13px}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#ffffff4d;font-size:12px;max-width:100%;min-width:0;overflow:hidden!important;text-overflow:ellipsis;white-space:nowrap!important}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:flex;flex-shrink:0}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .selected-icon-container[_ngcontent-%COMP%]{fill:currentcolor;display:inline-block;height:1em;line-height:1;position:relative;vertical-align:middle;width:1em;font-size:14px;margin-left:10px;top:0;color:#007bff;overflow:hidden}.sinovad-drop-down-menu-item-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-left:10px;margin-right:10px;color:#6b5}"]}),f})();const gf=["dropDownMenuContent"];function Ju(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-drop-down-menu-content",2),e.NdJ("hideContextMenu",function(){return e.CHM(t),e.oxw(2).onHide()})("clickItem",function(c){return e.CHM(t),e.oxw(2).onClickDropDownMenuItem(c)}),e.qZA()}if(2&f){const t=e.oxw(2);e.Q6J("dropDownMenuOptions",t.dropDownMenuOptions)("left",t.left)("top",t.top)("width",t.width)}}function Qc(f,n){if(1&f&&e.YNc(0,Ju,1,4,"app-drop-down-menu-content",1),2&f){const t=e.oxw();e.Q6J("ngIf",t.isShowing)}}let am=(()=>{class f{constructor(t,r){this.ref=t,this.viewContainerRef=r,this.clickItem=new e.vpe,this.isShowing=!1}show(){this.isShowing=!0,this.ref.detectChanges();const t=this.dropDownMenuOptions.target.getBoundingClientRect();this.left=t.left,this.top=t.top+t.height,this.width=t.width,this.container=document.getElementById(this.dropDownMenuOptions.containerId);var r=this.viewContainerRef.createEmbeddedView(this.dropDownMenuContent);this.renderedHtml=r.rootNodes[0],this.container.appendChild(this.renderedHtml)}onHide(){this.isShowing=!1,this.container.contains(this.renderedHtml)&&this.container.removeChild(this.renderedHtml)}onClickDropDownMenuItem(t){this.isShowing=!1,this.container.contains(this.renderedHtml)&&this.container.removeChild(this.renderedHtml),this.clickItem.emit(t),this.ref.detectChanges()}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(e.s_b))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-drop-down-menu"]],viewQuery:function(t,r){if(1&t&&e.Gf(gf,5),2&t){let c;e.iGM(c=e.CRH())&&(r.dropDownMenuContent=c.first)}},inputs:{dropDownMenuOptions:"dropDownMenuOptions"},outputs:{clickItem:"clickItem"},decls:2,vars:0,consts:[["dropDownMenuContent",""],[3,"dropDownMenuOptions","left","top","width","hideContextMenu","clickItem",4,"ngIf"],[3,"dropDownMenuOptions","left","top","width","hideContextMenu","clickItem"]],template:function(t,r){1&t&&e.YNc(0,Qc,1,1,"ng-template",null,0,e.W1O)},directives:[V.O5,og],encapsulation:2}),f})();const Jl=["dropDownMenuPage"],Xc=["mediaServerButton"];function Ql(f,n){1&f&&e._UZ(0,"i",25)}function sg(f,n){1&f&&e._UZ(0,"i",26)}function ag(f,n){1&f&&e._UZ(0,"i",27)}function lg(f,n){1&f&&e._UZ(0,"i",28)}const eu=function(f){return{selected:f}},pf=function(f,n){return{"icon-secure":f,"icon-alert":n}};function Xl(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",15,16),e.NdJ("click",function(c){return e.CHM(t),e.oxw().togleDropDownMediaServers(c)}),e.TgZ(2,"div",17),e.TgZ(3,"div",18),e.TgZ(4,"span",19),e._uU(5),e.qZA(),e.YNc(6,Ql,1,0,"i",20),e.YNc(7,sg,1,0,"i",21),e.qZA(),e.TgZ(8,"div",22),e.YNc(9,ag,1,0,"i",23),e.YNc(10,lg,1,0,"i",24),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(),r=e.MAs(16);e.Q6J("ngClass",e.VKq(7,eu,t.isSelectedServerOption())),e.xp6(5),e.hij(" ",t.sharedData.selectedMediaServer.FamilyName?t.sharedData.selectedMediaServer.FamilyName:t.sharedData.selectedMediaServer.DeviceName," "),e.xp6(1),e.Q6J("ngIf",r.isShowing),e.xp6(1),e.Q6J("ngIf",!r.isShowing),e.xp6(1),e.Q6J("ngClass",e.WLB(9,pf,t.sharedData.selectedMediaServer.isSecureConnection,!t.sharedData.selectedMediaServer.isSecureConnection)),e.xp6(1),e.Q6J("ngIf",t.sharedData.selectedMediaServer.isSecureConnection),e.xp6(1),e.Q6J("ngIf",!t.sharedData.selectedMediaServer.isSecureConnection)}}const mf=function(f){return[f]};function _f(f,n){if(1&f&&(e.TgZ(0,"div",6),e.TgZ(1,"a",7),e.TgZ(2,"div",8),e._UZ(3,"div",9),e.TgZ(4,"div",10),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&f){const t=n.$implicit,r=e.oxw(3);e.Q6J("ngClass",e.VKq(3,eu,r.isSelectedSidebarOption(t))),e.xp6(1),e.Q6J("routerLink",e.VKq(5,mf,r.getOptionPath(t))),e.xp6(4),e.hij(" ",t.name," ")}}function oo(f,n){if(1&f&&(e.TgZ(0,"div",3),e.TgZ(1,"div",4),e.TgZ(2,"div",5),e._uU(3),e.qZA(),e.qZA(),e.YNc(4,_f,6,7,"ng-template",29),e.qZA()),2&f){const t=n.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngForOf",t.listOptions)}}function vf(f,n){if(1&f&&e.YNc(0,oo,5,2,"ng-template",29),2&f){const t=e.oxw();e.Q6J("ngForOf",t.serverModules)}}const lm=function(){return["/settings/account"]};let Qu=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(g,x,Y,ie),this.activeRoute=t,this.router=r,this.ref=c,this.restProvider=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.prepareRouterOutlet=new e.vpe,this.collapseSidebar=new e.vpe,this.serverModules=[{index:2,order:2,name:"Ajustes",listOptions:[{index:3,name:"General",path:"/settings/server/{serverGuid}/settings/general"},{index:4,name:"Transcodificador",path:"/settings/server/{serverGuid}/settings/transcoder"}]},{index:3,order:3,name:"Gestionar",listOptions:[{index:7,name:"Bibliotecas",path:"/settings/server/{serverGuid}/manage/libraries"}]}]}ngOnInit(){this.setSelectedMediaServer()}setSelectedMediaServer(){if(this.activeRoute.firstChild.firstChild.snapshot.params.serverGuid){var t=this.activeRoute.firstChild.firstChild.snapshot.params.serverGuid,r=this.sharedData.mediaServers.find(c=>c.Guid==t);r&&(this.sharedData.selectedMediaServer=r)}null==this.sharedData.selectedMediaServer&&this.sharedData.mediaServers&&this.sharedData.mediaServers.length>0&&(this.sharedData.selectedMediaServer=this.sharedData.mediaServers[0])}ngAfterViewInit(){}getOptionPath(t){return t.path.replace("{serverGuid}",this.sharedData.selectedMediaServer.Guid)}onClickModule(t){t.isCollapsed=!t.isCollapsed}togleDropDownMediaServers(t){this.showMediaServerMenuOptions(t)}showMediaServerMenuOptions(t){this.dropDownMenuPage.show()}getDropDownMenuOptions(){var t=void 0;if(this.mediaServerButton){let r=[];this.sharedData.mediaServers.forEach(g=>{r.push({title:g.FamilyName?g.FamilyName:g.DeviceName,subtitle:g.isSecureConnection?"Funcionando":"No disponible",iconClass:g.isSecureConnection?"fa-solid fa-lock icon-secure":"fa-solid fa-triangle-exclamation icon-alert",path:"/settings/server/"+g.Guid+"/settings/general",isSelected:this.sharedData.selectedMediaServer.Id==g.Id})}),t={containerId:"sinovadMainContainer",target:this.mediaServerButton.nativeElement,listItems:r}}return t}isSelectedSidebarOption(t){return-1!=this.getOptionPath(t).indexOf(window.location.pathname)}isSelectedAccountOption(){return-1!="/settings/account".indexOf(window.location.pathname)}isSelectedServerOption(){return!!window.location.pathname.startsWith("/settings/server")}onClickOutsideSidebar(t){t.preventDefault(),t.stopPropagation(),this.collapseSidebar.emit(!0)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sidebar-account"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Jl,5),e.Gf(Xc,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.dropDownMenuPage=c.first),e.iGM(c=e.CRH())&&(r.mediaServerButton=c.first)}},outputs:{prepareRouterOutlet:"prepareRouterOutlet",collapseSidebar:"collapseSidebar"},features:[e.qOj],decls:17,vars:10,consts:[[1,"sidebar-backdrop",3,"clickOutside"],[1,"sidebar-container"],[1,"sidebar-content"],["role","navigation"],[1,"sidebar-list-header-container"],[1,"sidebar-list-header-content"],[1,"sidebar-list-item-container",3,"ngClass"],[3,"routerLink"],[1,"sidebar-link-container"],[1,"sidebar-link-icon"],[1,"sidebar-link-title"],["class","media-server-button",3,"ngClass","click",4,"ngIf"],[3,"ngIf"],[3,"dropDownMenuOptions"],["dropDownMenuPage",""],[1,"media-server-button",3,"ngClass","click"],["mediaServerButton",""],[1,"content"],[1,"left"],[1,"first"],["class","fa-solid fa-caret-up",4,"ngIf"],["class","fa-solid fa-caret-down",4,"ngIf"],[1,"server-settings-menu-button-icon",3,"ngClass"],["class","fa-solid fa-lock",4,"ngIf"],["class","fa-solid fa-triangle-exclamation",4,"ngIf"],[1,"fa-solid","fa-caret-up"],[1,"fa-solid","fa-caret-down"],[1,"fa-solid","fa-lock"],[1,"fa-solid","fa-triangle-exclamation"],["ngFor","",3,"ngForOf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.NdJ("clickOutside",function(g){return r.onClickOutsideSidebar(g)}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"a",7),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.TgZ(11,"div",10),e._uU(12," Cuenta "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(13,Xl,11,12,"button",11),e.YNc(14,vf,1,1,"ng-template",12),e.qZA(),e.qZA(),e.qZA(),e._UZ(15,"app-drop-down-menu",13,14)),2&t&&(e.xp6(6),e.AsE(" ",r.sharedData.userData.FirstName," ",r.sharedData.userData.LastName," "),e.xp6(1),e.Q6J("ngClass",e.VKq(7,eu,r.isSelectedAccountOption())),e.xp6(1),e.Q6J("routerLink",e.DdM(9,lm)),e.xp6(5),e.Q6J("ngIf",r.sharedData.selectedMediaServer),e.xp6(1),e.Q6J("ngIf",r.sharedData.selectedMediaServer&&r.serverModules&&r.serverModules.length>0),e.xp6(1),e.Q6J("dropDownMenuOptions",r.getDropDownMenuOptions()))},directives:[Ze,V.mk,R.yS,V.O5,V.sg,am],styles:[".sidebar-backdrop[_ngcontent-%COMP%]{width:240px;height:100%;background:#0c0d11}.sidebar-container[_ngcontent-%COMP%]{border-radius:4px;display:flex;flex:0 0 240px;flex-direction:column;height:calc(100% - 8px);margin:0;transform:translateZ(0);width:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif;font-size:13px}.sidebar-content[_ngcontent-%COMP%]{padding-bottom:60px;padding-top:10px}.sidebar-list-header-container[_ngcontent-%COMP%]{display:flex}.sidebar-list-header-container[_ngcontent-%COMP%]   .sidebar-list-header-content[_ngcontent-%COMP%]{color:#ffffff4d;font-size:15px;height:45px;line-height:45px;max-width:100%;min-width:0;overflow:hidden!important;padding-left:25px;text-overflow:ellipsis;text-transform:capitalize;white-space:nowrap!important;flex-grow:1}.sidebar-list-item-container[_ngcontent-%COMP%]{border-bottom-right-radius:4px;border-top-right-radius:4px;display:flex;min-height:30px;position:relative}.sidebar-list-item-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent;background:none;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;text-align:inherit;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none;display:block;flex-grow:1;overflow:hidden;padding:4px 0 2px 25px;color:#ffffffb3}.sidebar-list-item-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .sidebar-link-container[_ngcontent-%COMP%]{display:flex}.sidebar-list-item-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .sidebar-link-container[_ngcontent-%COMP%]   .sidebar-link-icon[_ngcontent-%COMP%]{font-size:13px;width:18px;flex-shrink:0;height:14px;color:#ffffffb3}.sidebar-list-item-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .sidebar-link-container[_ngcontent-%COMP%]   .sidebar-link-title[_ngcontent-%COMP%]{flex-grow:1;word-break:break-word}.sidebar-list-item-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.sidebar-list-item-container.selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff}.sidebar-list-item-container.selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.media-server-button[_ngcontent-%COMP%]{background-color:#0000004d;font-size:13px;height:50px;line-height:50px;padding-left:25px;padding-right:15px;width:100%;-webkit-tap-highlight-color:transparent;color:#ffffffb3;border:0;border-radius:0;cursor:pointer;line-height:inherit;margin:0;outline:none;text-align:inherit;text-decoration:none;touch-action:manipulation;transition:color .2s;-webkit-user-select:none;-moz-user-select:none;user-select:none}.content[_ngcontent-%COMP%]{align-items:center;display:flex;height:100%;justify-content:space-between;width:100%}.left[_ngcontent-%COMP%]{flex-grow:1;line-height:1.5;max-width:85%;text-align:left;display:flex;align-items:center}.left[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;max-width:100%;max-width:85%;min-width:0;overflow:hidden!important;text-overflow:ellipsis;vertical-align:top;white-space:nowrap!important;font-weight:700}.left[_ngcontent-%COMP%]   i.fa-caret-up[_ngcontent-%COMP%]{margin-left:7px;margin-top:2px}.left[_ngcontent-%COMP%]   i.fa-caret-down[_ngcontent-%COMP%]{margin-left:7px}.server-settings-menu-button-icon[_ngcontent-%COMP%]{display:flex;font-size:13px;margin-right:10px}.media-server-button.selected[_ngcontent-%COMP%]{color:#007bff}.media-server-button[_ngcontent-%COMP%]:hover{color:#fff}@media only screen and (max-width: 767px){.sidebar-backdrop[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:999}}"]}),f})();function ec(f,n){1&f&&e._UZ(0,"i",10)}function yf(f,n){1&f&&e._UZ(0,"i",11)}function cg(f,n){if(1&f&&e._UZ(0,"i"),2&f){const t=e.oxw().$implicit;e.Tol(t.IconClass)}}function ug(f,n){if(1&f&&e._UZ(0,"i"),2&f){const t=e.oxw().$implicit;e.Tol(t.IconClass)}}const hl=function(f){return[f]},ai=function(f){return{active:f}};function Ef(f,n){if(1&f&&(e.TgZ(0,"li",13),e.TgZ(1,"a",14),e.YNc(2,ug,1,3,"i",7),e.TgZ(3,"span",8),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&f){const t=n.$implicit,r=e.oxw(2).$implicit,c=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(4,hl,t.Path))("ngClass",e.VKq(6,ai,c.isSelectedMenu(r))),e.xp6(1),e.Q6J("ngIf",t.IconClass),e.xp6(2),e.Oqu(t.Title)}}function gl(f,n){if(1&f&&(e.TgZ(0,"div"),e.TgZ(1,"ul",12),e.YNc(2,Ef,5,8,"ng-template",2),e.qZA(),e.qZA()),2&f){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.ChildMenus)}}function dg(f,n){if(1&f&&(e.TgZ(0,"li",3),e.TgZ(1,"button",4),e.YNc(2,ec,1,0,"i",5),e.YNc(3,yf,1,0,"i",6),e.YNc(4,cg,1,3,"i",7),e.TgZ(5,"span",8),e._uU(6),e.qZA(),e.qZA(),e.YNc(7,gl,3,1,"div",9),e.qZA()),2&f){const t=n.$implicit,r=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(7,hl,t.Path))("ngClass",e.VKq(9,ai,r.isSelectedMenu(t))),e.xp6(1),e.Q6J("ngIf",!t.IconClass&&t.isCollapsed),e.xp6(1),e.Q6J("ngIf",!t.IconClass&&!t.isCollapsed),e.xp6(1),e.Q6J("ngIf",t.IconClass),e.xp6(2),e.Oqu(t.Title),e.xp6(1),e.Q6J("ngIf",!t.isCollapsed)}}let Tf=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(c,v,x,Y),this.router=t,this.ref=r,this.restProvider=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.collapseSidebar=new e.vpe,this.mediaOptions=[{Id:1,SortOrder:1,Title:"Inicio",Path:"/home",IconClass:"fa-house fa-solid"},{Id:2,SortOrder:2,Title:"Peliculas",Path:"/movies",IconClass:"fa-film fa-solid"},{Id:3,SortOrder:3,Title:"Series",Path:"/tvseries",IconClass:"fa-solid fa-tv"}]}ngOnInit(){}ngAfterViewInit(){}selectDefaultOption(){}onClickModule(t){t.isCollapsed=!t.isCollapsed}onClickSidebarOption(t,r){this.router.navigateByUrl(t.Path).then(c=>{},c=>{console.error(c)})}isSelectedMenu(t){return-1!=t.Path.indexOf(window.location.pathname)}onClickOutsideSidebar(t){t.preventDefault(),t.stopPropagation(),this.collapseSidebar.emit(!0)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(e.sBO),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sidebar-media"]],outputs:{collapseSidebar:"collapseSidebar"},features:[e.qOj],decls:3,vars:1,consts:[[1,"sidebar-backdrop",3,"clickOutside"],[1,"sinovad-sidebar-modules-list"],["ngFor","",3,"ngForOf"],[1,"sinovad-sidebar-module-element"],[1,"sinovad-sidebar-module-button",3,"routerLink","ngClass"],["class","fa-solid fa-chevron-right",4,"ngIf"],["class","fa-solid fa-chevron-down",4,"ngIf"],[3,"class",4,"ngIf"],[1,"ms-2"],[4,"ngIf"],[1,"fa-solid","fa-chevron-right"],[1,"fa-solid","fa-chevron-down"],[1,"sinovad-sidebar-options-list"],[1,"sinovad-sidebar-option-element"],[3,"routerLink","ngClass"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.NdJ("clickOutside",function(g){return r.onClickOutsideSidebar(g)}),e.TgZ(1,"ul",1),e.YNc(2,dg,8,11,"ng-template",2),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",r.mediaOptions))},directives:[Ze,V.sg,R.rH,V.mk,V.O5,R.yS],styles:[".sidebar-backdrop[_ngcontent-%COMP%]{width:240px;height:100%;background:#0c0d11}.sinovad-sidebar-modules-list[_ngcontent-%COMP%]{display:block;padding:10px 10px 10px 20px;width:240px}.sinovad-sidebar-module-element[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-module-button[_ngcontent-%COMP%]{background-color:transparent;color:#fff;border:none;opacity:.75;width:100%;height:30px;text-align:left;font-size:16px;padding-top:10px}.sinovad-sidebar-module-button.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-module-button[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}.sinovad-sidebar-options-list[_ngcontent-%COMP%]{display:block}.sinovad-sidebar-options-list[_ngcontent-%COMP%]   .sinovad-sidebar-option-element[_ngcontent-%COMP%]{display:flex;height:40px;align-items:center}.sinovad-sidebar-options-list[_ngcontent-%COMP%]   .sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;height:100%;display:flex;align-items:center;opacity:.75;font-size:16px;width:100%;text-decoration:unset;color:#fff}.sinovad-sidebar-options-list[_ngcontent-%COMP%]   .sinovad-sidebar-option-element[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#007bff}.sinovad-sidebar-options-list[_ngcontent-%COMP%]   .sinovad-sidebar-option-element[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{opacity:1;color:#fff}@media only screen and (max-width: 767px){.sidebar-backdrop[_ngcontent-%COMP%]{position:absolute;left:0;top:0;z-index:999}}"]}),f})();var is=w(8377),da=w(6059);function Xu(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var r,c,g,v,x,ed={exports:{}};r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,c=/^(?=([^\/?#]*))\1([^]*)$/,g=/(?:\/|^)\.(?=\/)/g,v=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,ed.exports=x={buildAbsoluteURL:function(Y,ie,Me){if(Me=Me||{},Y=Y.trim(),!(ie=ie.trim())){if(!Me.alwaysNormalize)return Y;var Re=x.parseURL(Y);if(!Re)throw new Error("Error trying to parse base URL.");return Re.path=x.normalizePath(Re.path),x.buildURLFromParts(Re)}var $e=x.parseURL(ie);if(!$e)throw new Error("Error trying to parse relative URL.");if($e.scheme)return Me.alwaysNormalize?($e.path=x.normalizePath($e.path),x.buildURLFromParts($e)):ie;var qe=x.parseURL(Y);if(!qe)throw new Error("Error trying to parse base URL.");if(!qe.netLoc&&qe.path&&"/"!==qe.path[0]){var ot=c.exec(qe.path);qe.netLoc=ot[1],qe.path=ot[2]}qe.netLoc&&!qe.path&&(qe.path="/");var gt={scheme:qe.scheme,netLoc:$e.netLoc,path:null,params:$e.params,query:$e.query,fragment:$e.fragment};if(!$e.netLoc&&(gt.netLoc=qe.netLoc,"/"!==$e.path[0]))if($e.path){var Tt=qe.path,$t=Tt.substring(0,Tt.lastIndexOf("/")+1)+$e.path;gt.path=x.normalizePath($t)}else gt.path=qe.path,$e.params||(gt.params=qe.params,$e.query||(gt.query=qe.query));return null===gt.path&&(gt.path=Me.alwaysNormalize?x.normalizePath($e.path):$e.path),x.buildURLFromParts(gt)},parseURL:function(Y){var ie=r.exec(Y);return ie?{scheme:ie[1]||"",netLoc:ie[2]||"",path:ie[3]||"",params:ie[4]||"",query:ie[5]||"",fragment:ie[6]||""}:null},normalizePath:function(Y){for(Y=Y.split("").reverse().join("").replace(g,"");Y.length!==(Y=Y.replace(v,"")).length;);return Y.split("").reverse().join("")},buildURLFromParts:function(Y){return Y.scheme+Y.netLoc+Y.path+Y.params+Y.query+Y.fragment}};var tu=ed.exports;function Gs(f,n){var t=Object.keys(f);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(f);n&&(r=r.filter(function(c){return Object.getOwnPropertyDescriptor(f,c).enumerable})),t.push.apply(t,r)}return t}function Li(f){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Gs(Object(t),!0).forEach(function(r){bf(f,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(t)):Gs(Object(t)).forEach(function(r){Object.defineProperty(f,r,Object.getOwnPropertyDescriptor(t,r))})}return f}function bf(f,n,t){return n=function Cf(f){var n=function td(f,n){if("object"!=typeof f||null===f)return f;var t=f[Symbol.toPrimitive];if(void 0!==t){var r=t.call(f,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(f)}(f,"string");return"symbol"==typeof n?n:String(n)}(n),n in f?Object.defineProperty(f,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):f[n]=t,f}function Gi(){return Gi=Object.assign?Object.assign.bind():function(f){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(f[r]=t[r])}return f},Gi.apply(this,arguments)}const cr=Number.isFinite||function(f){return"number"==typeof f&&isFinite(f)};let at=function(f){return f.MEDIA_ATTACHING="hlsMediaAttaching",f.MEDIA_ATTACHED="hlsMediaAttached",f.MEDIA_DETACHING="hlsMediaDetaching",f.MEDIA_DETACHED="hlsMediaDetached",f.BUFFER_RESET="hlsBufferReset",f.BUFFER_CODECS="hlsBufferCodecs",f.BUFFER_CREATED="hlsBufferCreated",f.BUFFER_APPENDING="hlsBufferAppending",f.BUFFER_APPENDED="hlsBufferAppended",f.BUFFER_EOS="hlsBufferEos",f.BUFFER_FLUSHING="hlsBufferFlushing",f.BUFFER_FLUSHED="hlsBufferFlushed",f.MANIFEST_LOADING="hlsManifestLoading",f.MANIFEST_LOADED="hlsManifestLoaded",f.MANIFEST_PARSED="hlsManifestParsed",f.LEVEL_SWITCHING="hlsLevelSwitching",f.LEVEL_SWITCHED="hlsLevelSwitched",f.LEVEL_LOADING="hlsLevelLoading",f.LEVEL_LOADED="hlsLevelLoaded",f.LEVEL_UPDATED="hlsLevelUpdated",f.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",f.LEVELS_UPDATED="hlsLevelsUpdated",f.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",f.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",f.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",f.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",f.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",f.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",f.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",f.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",f.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",f.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",f.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",f.CUES_PARSED="hlsCuesParsed",f.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",f.INIT_PTS_FOUND="hlsInitPtsFound",f.FRAG_LOADING="hlsFragLoading",f.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",f.FRAG_LOADED="hlsFragLoaded",f.FRAG_DECRYPTED="hlsFragDecrypted",f.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",f.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",f.FRAG_PARSING_METADATA="hlsFragParsingMetadata",f.FRAG_PARSED="hlsFragParsed",f.FRAG_BUFFERED="hlsFragBuffered",f.FRAG_CHANGED="hlsFragChanged",f.FPS_DROP="hlsFpsDrop",f.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",f.ERROR="hlsError",f.DESTROYING="hlsDestroying",f.KEY_LOADING="hlsKeyLoading",f.KEY_LOADED="hlsKeyLoaded",f.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",f.BACK_BUFFER_REACHED="hlsBackBufferReached",f}({}),pr=function(f){return f.NETWORK_ERROR="networkError",f.MEDIA_ERROR="mediaError",f.KEY_SYSTEM_ERROR="keySystemError",f.MUX_ERROR="muxError",f.OTHER_ERROR="otherError",f}({}),mn=function(f){return f.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",f.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",f.KEY_SYSTEM_NO_SESSION="keySystemNoSession",f.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",f.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",f.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",f.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",f.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",f.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",f.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",f.MANIFEST_LOAD_ERROR="manifestLoadError",f.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",f.MANIFEST_PARSING_ERROR="manifestParsingError",f.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",f.LEVEL_EMPTY_ERROR="levelEmptyError",f.LEVEL_LOAD_ERROR="levelLoadError",f.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",f.LEVEL_PARSING_ERROR="levelParsingError",f.LEVEL_SWITCH_ERROR="levelSwitchError",f.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",f.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",f.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",f.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",f.FRAG_LOAD_ERROR="fragLoadError",f.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",f.FRAG_DECRYPT_ERROR="fragDecryptError",f.FRAG_PARSING_ERROR="fragParsingError",f.FRAG_GAP="fragGap",f.REMUX_ALLOC_ERROR="remuxAllocError",f.KEY_LOAD_ERROR="keyLoadError",f.KEY_LOAD_TIMEOUT="keyLoadTimeOut",f.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",f.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",f.BUFFER_APPEND_ERROR="bufferAppendError",f.BUFFER_APPENDING_ERROR="bufferAppendingError",f.BUFFER_STALLED_ERROR="bufferStalledError",f.BUFFER_FULL_ERROR="bufferFullError",f.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",f.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",f.INTERNAL_EXCEPTION="internalException",f.INTERNAL_ABORTED="aborted",f.UNKNOWN="unknown",f}({});const ps=function(){},pl={trace:ps,debug:ps,log:ps,warn:ps,info:ps,error:ps};let ms=pl;const Qt=ms,nu=/^(\d+)x(\d+)$/,nd=/(.+?)=(".*?"|.*?)(?:,|$)/g;class yi{constructor(n){"string"==typeof n&&(n=yi.parseAttrList(n));for(const t in n)n.hasOwnProperty(t)&&("X-"===t.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(t)),this[t]=n[t])}decimalInteger(n){const t=parseInt(this[n],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(n){if(this[n]){let t=(this[n]||"0x").slice(2);t=(1&t.length?"0":"")+t;const r=new Uint8Array(t.length/2);for(let c=0;c<t.length/2;c++)r[c]=parseInt(t.slice(2*c,2*c+2),16);return r}return null}hexadecimalIntegerAsNumber(n){const t=parseInt(this[n],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(n){return parseFloat(this[n])}optionalFloat(n,t){const r=this[n];return r?parseFloat(r):t}enumeratedString(n){return this[n]}bool(n){return"YES"===this[n]}decimalResolution(n){const t=nu.exec(this[n]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(n){let t;const r={};for(nd.lastIndex=0;null!==(t=nd.exec(n));){let g=t[2];0===g.indexOf('"')&&g.lastIndexOf('"')===g.length-1&&(g=g.slice(1,-1)),r[t[1].trim()]=g}return r}}function fa(f){return"SCTE35-OUT"===f||"SCTE35-IN"===f}class Af{constructor(n,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const r=t.attr;for(const c in r)if(Object.prototype.hasOwnProperty.call(n,c)&&n[c]!==r[c]){Qt.warn(`DATERANGE tag attribute: "${c}" does not match for tags with ID: "${n.ID}"`),this._badValueForSameId=c;break}n=Gi(new yi({}),r,n)}if(this.attr=n,this._startDate=new Date(n["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);cr(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const n=this.duration;return null!==n?new Date(this._startDate.getTime()+1e3*n):null}get duration(){if("DURATION"in this.attr){const n=this.attr.decimalFloatingPoint("DURATION");if(cr(n))return n}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&cr(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class ru{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}class If{constructor(n){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={audio:null,video:null,audiovideo:null},this.baseurl=n}setByteRange(n,t){const r=n.split("@",2),c=[];c[0]=1===r.length?t?t.byteRangeEndOffset:0:parseInt(r[1]),c[1]=parseInt(r[0])+c[0],this._byteRange=c}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=tu.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(n){this._url=n}}class rd extends If{constructor(n,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new ru,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=n}get decryptdata(){const{levelkeys:n}=this;if(!n&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(1===r.length)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(null===this.programDateTime||!cr(this.programDateTime))return null;const n=cr(this.duration)?this.duration:0;return this.programDateTime+1e3*n}get encrypted(){var n;if(null!=(n=this._decryptdata)&&n.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),r=t.length;if(r>1||1===r&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(n){if(this.levelkeys){const t=this.levelkeys[n];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var n,t;null==(n=this.loader)||n.abort(),null==(t=this.keyLoader)||t.abort()}setElementaryStreamInfo(n,t,r,c,g,v=!1){const{elementaryStreams:x}=this,Y=x[n];Y?(Y.startPTS=Math.min(Y.startPTS,t),Y.endPTS=Math.max(Y.endPTS,r),Y.startDTS=Math.min(Y.startDTS,c),Y.endDTS=Math.max(Y.endDTS,g)):x[n]={startPTS:t,endPTS:r,startDTS:c,endDTS:g,partial:v}}clearElementaryStreamInfo(){const{elementaryStreams:n}=this;n.audio=null,n.video=null,n.audiovideo=null}}class Hs extends If{constructor(n,t,r,c,g){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new ru,this.duration=n.decimalFloatingPoint("DURATION"),this.gap=n.bool("GAP"),this.independent=n.bool("INDEPENDENT"),this.relurl=n.enumeratedString("URI"),this.fragment=t,this.index=c;const v=n.enumeratedString("BYTERANGE");v&&this.setByteRange(v,g),g&&(this.fragOffset=g.fragOffset+g.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:n}=this;return!!(n.audio||n.video||n.audiovideo)}}class xf{constructor(n){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=n}reloaded(n){if(!n)return this.advanced=!0,void(this.updated=!0);const t=this.lastPartSn-n.lastPartSn,r=this.lastPartIndex-n.lastPartIndex;this.updated=this.endSN!==n.endSN||!!r||!!t,this.advanced=this.endSN>n.endSN||t>0||0===t&&r>0,this.misses=this.updated||this.advanced?Math.floor(.6*n.misses):n.misses+1,this.availabilityDelay=n.availabilityDelay}get hasProgramDateTime(){return!!this.fragments.length&&cr(this.fragments[this.fragments.length-1].programDateTime)}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||10}get drift(){const n=this.driftEndTime-this.driftStartTime;return n>0?1e3*(this.driftEnd-this.driftStart)/n:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var n;return null!=(n=this.fragments)&&n.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var n;return null!=(n=this.partList)&&n.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function id(f){return Uint8Array.from(atob(f),n=>n.charCodeAt(0))}function Of(f){return Uint8Array.from(unescape(encodeURIComponent(f)),n=>n.charCodeAt(0))}var Ei={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},bo_FAIRPLAY="com.apple.streamingkeydelivery",bo_PLAYREADY="com.microsoft.playready",bo_WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function wf(f){switch(f){case bo_FAIRPLAY:return Ei.FAIRPLAY;case bo_PLAYREADY:return Ei.PLAYREADY;case bo_WIDEVINE:return Ei.WIDEVINE;case"org.w3.clearkey":return Ei.CLEARKEY}}function mg(f){switch(f){case Ei.FAIRPLAY:return bo_FAIRPLAY;case Ei.PLAYREADY:return bo_PLAYREADY;case Ei.WIDEVINE:return bo_WIDEVINE;case Ei.CLEARKEY:return"org.w3.clearkey"}}function od(f){const{drmSystems:n,widevineLicenseUrl:t}=f,r=n?[Ei.FAIRPLAY,Ei.WIDEVINE,Ei.PLAYREADY,Ei.CLEARKEY].filter(c=>!!n[c]):[];return!r[Ei.WIDEVINE]&&t&&r.push(Ei.WIDEVINE),r}const _l="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function Di(f,n,t){return Uint8Array.prototype.slice?f.slice(n,t):new Uint8Array(Array.prototype.slice.call(f,n,t))}const ri=(f,n)=>n+10<=f.length&&73===f[n]&&68===f[n+1]&&51===f[n+2]&&f[n+3]<255&&f[n+4]<255&&f[n+6]<128&&f[n+7]<128&&f[n+8]<128&&f[n+9]<128,vl=(f,n)=>n+10<=f.length&&51===f[n]&&68===f[n+1]&&73===f[n+2]&&f[n+3]<255&&f[n+4]<255&&f[n+6]<128&&f[n+7]<128&&f[n+8]<128&&f[n+9]<128,Va=(f,n)=>{const t=n;let r=0;for(;ri(f,n);)r+=10,r+=yl(f,n+6),vl(f,n+10)&&(r+=10),n+=r;if(r>0)return f.subarray(t,t+r)},yl=(f,n)=>{let t=0;return t=(127&f[n])<<21,t|=(127&f[n+1])<<14,t|=(127&f[n+2])<<7,t|=127&f[n+3],t},_g=(f,n)=>ri(f,n)&&yl(f,n+6)+10<=f.length-n,Ga=f=>f&&"PRIV"===f.key&&"com.apple.streaming.transportStreamTimestamp"===f.info,sd=f=>{const n=String.fromCharCode(f[0],f[1],f[2],f[3]),t=yl(f,4);return{type:n,size:t,data:f.subarray(10,10+t)}},Zs=f=>{let n=0;const t=[];for(;ri(f,n);){const r=yl(f,n+6);n+=10;const c=n+r;for(;n+8<c;){const g=sd(f.subarray(n)),v=ou(g);v&&t.push(v),n+=g.size+10}vl(f,n)&&(n+=10)}return t},ou=f=>"PRIV"===f.type?Nf(f):"W"===f.type[0]?Lf(f):ad(f),Nf=f=>{if(f.size<2)return;const n=_s(f.data,!0),t=new Uint8Array(f.data.subarray(n.length+1));return{key:f.type,info:n,data:t.buffer}},ad=f=>{if(f.size<2)return;if("TXXX"===f.type){let t=1;const r=_s(f.data.subarray(t),!0);t+=r.length+1;const c=_s(f.data.subarray(t));return{key:f.type,info:r,data:c}}const n=_s(f.data.subarray(1));return{key:f.type,data:n}},Lf=f=>{if("WXXX"===f.type){if(f.size<2)return;let t=1;const r=_s(f.data.subarray(t),!0);t+=r.length+1;const c=_s(f.data.subarray(t));return{key:f.type,info:r,data:c}}const n=_s(f.data);return{key:f.type,data:n}},Ff=f=>{if(8===f.data.byteLength){const n=new Uint8Array(f.data);let r=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7];return r/=45,1&n[3]&&(r+=47721858.84),Math.round(r)}},_s=(f,n=!1)=>{const t=function Ws(){return!Ks&&void 0!==self.TextDecoder&&(Ks=new self.TextDecoder("utf-8")),Ks}();if(t){const ie=t.decode(f);if(n){const Me=ie.indexOf("\0");return-1!==Me?ie.substring(0,Me):ie}return ie.replace(/\0/g,"")}const r=f.length;let c,g,v,x="",Y=0;for(;Y<r;){if(c=f[Y++],0===c&&n)return x;if(0!==c&&3!==c)switch(c>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:x+=String.fromCharCode(c);break;case 12:case 13:g=f[Y++],x+=String.fromCharCode((31&c)<<6|63&g);break;case 14:g=f[Y++],v=f[Y++],x+=String.fromCharCode((15&c)<<12|(63&g)<<6|(63&v)<<0)}}return x};let Ks;const Qi_hexDump=function(f){let n="";for(let t=0;t<f.length;t++){let r=f[t].toString(16);r.length<2&&(r="0"+r),n+=r}return n},Ys=Math.pow(2,32)-1,tc=[].push,El={video:1,audio:2,id3:3,text:4};function Pr(f){return String.fromCharCode.apply(null,f)}function nc(f,n){const t=f[n]<<8|f[n+1];return t<0?65536+t:t}function Mr(f,n){const t=su(f,n);return t<0?4294967296+t:t}function su(f,n){return f[n]<<24|f[n+1]<<16|f[n+2]<<8|f[n+3]}function au(f,n,t){f[n]=t>>24,f[n+1]=t>>16&255,f[n+2]=t>>8&255,f[n+3]=255&t}function $r(f,n){const t=[];if(!n.length)return t;const r=f.byteLength;for(let c=0;c<r;){const g=Mr(f,c),x=g>1?c+g:r;if(Pr(f.subarray(c+4,c+8))===n[0])if(1===n.length)t.push(f.subarray(c+8,x));else{const Y=$r(f.subarray(c+8,x),n.slice(1));Y.length&&tc.apply(t,Y)}c=x}return t}function yg(f){const n=[],t=f[0];let r=8;const c=Mr(f,r);r+=4,r+=0===t?8:16,r+=2;let x=f.length+0;const Y=nc(f,r);r+=2;for(let ie=0;ie<Y;ie++){let Me=r;const Re=Mr(f,Me);Me+=4;const $e=2147483647&Re;if((2147483648&Re)>>>31==1)return Qt.warn("SIDX has hierarchical references (not supported)"),null;const ot=Mr(f,Me);Me+=4,n.push({referenceSize:$e,subsegmentDuration:ot,info:{duration:ot/c,start:x,end:x+$e-1}}),x+=$e,Me+=4,r=Me}return{earliestPresentationTime:0,timescale:c,version:t,referencesCount:Y,references:n}}function kf(f){const n=[],t=$r(f,["moov","trak"]);for(let c=0;c<t.length;c++){const g=t[c],v=$r(g,["tkhd"])[0];if(v){let x=v[0],Y=0===x?12:20;const ie=Mr(v,Y),Me=$r(g,["mdia","mdhd"])[0];if(Me){x=Me[0],Y=0===x?12:20;const Re=Mr(Me,Y),$e=$r(g,["mdia","hdlr"])[0];if($e){const ot={soun:"audio",vide:"video"}[Pr($e.subarray(8,12))];if(ot){const gt=$r(g,["mdia","minf","stbl","stsd"])[0];let Tt;gt&&(Tt=Pr(gt.subarray(12,16))),n[ie]={timescale:Re,type:ot},n[ot]={timescale:Re,id:ie,codec:Tt}}}}}}return $r(f,["moov","mvex","trex"]).forEach(c=>{const g=Mr(c,4),v=n[g];v&&(v.default={duration:Mr(c,12),flags:Mr(c,20)})}),n}function Bf(f){const n=$r(f,["schm"])[0];if(n){const t=Pr(n.subarray(4,8));if("cbcs"===t||"cenc"===t)return $r(f,["schi","tenc"])[0]}return Qt.error("[eme] missing 'schm' box"),null}function rc(f){const n=Mr(f,0);let t=8;1&n&&(t+=4),4&n&&(t+=4);let r=0;const c=Mr(f,4);for(let g=0;g<c;g++)256&n&&(r+=Mr(f,t),t+=4),512&n&&(t+=4),1024&n&&(t+=4),2048&n&&(t+=4);return r}function ha(f,n){const t=new Uint8Array(f.length+n.length);return t.set(f),t.set(n,f.length),t}function cd(f,n){const t=[],r=n.samples,c=n.timescale,g=n.id;let v=!1;return $r(r,["moof"]).map(Y=>{const ie=Y.byteOffset-8;$r(Y,["traf"]).map(Re=>{const $e=$r(Re,["tfdt"]).map(qe=>{const ot=qe[0];let gt=Mr(qe,4);return 1===ot&&(gt*=Math.pow(2,32),gt+=Mr(qe,8)),gt/c})[0];return void 0!==$e&&(f=$e),$r(Re,["tfhd"]).map(qe=>{const ot=Mr(qe,4),gt=16777215&Mr(qe,0);let nn=0;const Sn=0!=(16&gt);let gn=0;const Bn=0!=(32&gt);let On=8;ot===g&&(0!=(1&gt)&&(On+=8),0!=(2&gt)&&(On+=4),0!=(8&gt)&&(nn=Mr(qe,On),On+=4),Sn&&(gn=Mr(qe,On),On+=4),Bn&&(On+=4),"video"===n.type&&(v=function Xi(f){if(!f)return!1;const n=f.indexOf("."),t=n<0?f:f.substring(0,n);return"hvc1"===t||"hev1"===t||"dvh1"===t||"dvhe"===t}(n.codec)),$r(Re,["trun"]).map(Zn=>{const Jn=Zn[0],Dn=16777215&Mr(Zn,0),_r=0!=(1&Dn);let nr=0;const ci=0!=(4&Dn),Ki=0!=(256&Dn);let Ci=0;const Ai=0!=(512&Dn);let Ti=0;const or=0!=(1024&Dn),mr=0!=(2048&Dn);let _i=0;const hi=Mr(Zn,4);let ei=8;_r&&(nr=Mr(Zn,ei),ei+=4),ci&&(ei+=4);let ui=nr+ie;for(let Es=0;Es<hi;Es++){if(Ki?(Ci=Mr(Zn,ei),ei+=4):Ci=nn,Ai?(Ti=Mr(Zn,ei),ei+=4):Ti=gn,or&&(ei+=4),mr&&(_i=0===Jn?Mr(Zn,ei):su(Zn,ei),ei+=4),"video"===n.type){let Ts=0;for(;Ts<Ti;){const ki=Mr(r,ui);ui+=4,Tl(v,r[ui])&&bl(r.subarray(ui,ui+ki),v?2:1,f+_i/c,t),ui+=ki,Ts+=ki+4}}f+=Ci/c}}))})})}),t}function Tl(f,n){if(f){const t=n>>1&63;return 39===t||40===t}return 6==(31&n)}function bl(f,n,t,r){const c=lu(f);let g=0;g+=n;let v=0,x=0,Y=!1,ie=0;for(;g<c.length;){v=0;do{if(g>=c.length)break;ie=c[g++],v+=ie}while(255===ie);x=0;do{if(g>=c.length)break;ie=c[g++],x+=ie}while(255===ie);const Me=c.length-g;if(!Y&&4===v&&g<c.length){if(Y=!0,181===c[g++]){const $e=nc(c,g);if(g+=2,49===$e){const qe=Mr(c,g);if(g+=4,1195456820===qe){const ot=c[g++];if(3===ot){const gt=c[g++],Tt=31&gt,$t=64&gt,rn=$t?2+3*Tt:0,nn=new Uint8Array(rn);if($t){nn[0]=gt;for(let Sn=1;Sn<rn;Sn++)nn[Sn]=c[g++]}r.push({type:ot,payloadType:v,pts:t,bytes:nn})}}}}}else if(5===v&&x<Me){if(Y=!0,x>16){const Re=[];for(let ot=0;ot<16;ot++){const gt=c[g++].toString(16);Re.push(1==gt.length?"0"+gt:gt),(3===ot||5===ot||7===ot||9===ot)&&Re.push("-")}const $e=x-16,qe=new Uint8Array($e);for(let ot=0;ot<$e;ot++)qe[ot]=c[g++];r.push({payloadType:v,pts:t,uuid:Re.join(""),userData:_s(qe),userDataBytes:qe})}}else if(x<Me)g+=x;else if(x>Me)break}}function lu(f){const n=f.byteLength,t=[];let r=1;for(;r<n-2;)0===f[r]&&0===f[r+1]&&3===f[r+2]?(t.push(r+2),r+=2):r++;if(0===t.length)return f;const c=n-t.length,g=new Uint8Array(c);let v=0;for(r=0;r<c;v++,r++)v===t[0]&&(v++,t.shift()),g[r]=f[v];return g}let cu={};class ga{static clearKeyUriToKeyIdMap(){cu={}}constructor(n,t,r,c=[1],g=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=n,this.uri=t,this.keyFormat=r,this.keyFormatVersions=c,this.iv=g,this.encrypted=!!n&&"NONE"!==n,this.isCommonEncryption=this.encrypted&&"AES-128"!==n}isSupported(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case bo_FAIRPLAY:case bo_WIDEVINE:case bo_PLAYREADY:case"org.w3.clearkey":return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1}getDecryptData(n){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof n&&("AES-128"===this.method&&!this.iv&&Qt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),n=0);const r=function pa(f){const n=new Uint8Array(16);for(let t=12;t<16;t++)n[t]=f>>8*(15-t)&255;return n}(n);return new ga(this.method,this.uri,"identity",this.keyFormatVersions,r)}const t=function gg(f){const n=f.split(":");let t=null;if("data"===n[0]&&2===n.length){const r=n[1].split(";"),c=r[r.length-1].split(",");if(2===c.length){const v=c[1];"base64"===c[0]?(r.splice(-1,1),t=id(v)):t=function fg(f){const n=Of(f).subarray(0,16),t=new Uint8Array(16);return t.set(n,16-n.length),t}(v)}}return t}(this.uri);if(t)switch(this.keyFormat){case bo_WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case bo_PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=function Uf(f,n,t){if(16!==f.byteLength)throw new RangeError("Invalid system id");let r,c,g;if(n){r=1,c=new Uint8Array(16*n.length);for(let x=0;x<n.length;x++){const Y=n[x];if(16!==Y.byteLength)throw new RangeError("Invalid key");c.set(Y,16*x)}}else r=0,c=new Uint8Array;r>0?(g=new Uint8Array(4),n.length>0&&new DataView(g.buffer).setUint32(0,n.length,!1)):g=new Uint8Array;const v=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(v.buffer).setUint32(0,t.byteLength,!1),function Cl(f,...n){const t=n.length;let r=8,c=t;for(;c--;)r+=n[c].byteLength;const g=new Uint8Array(r);for(g[0]=r>>24&255,g[1]=r>>16&255,g[2]=r>>8&255,g[3]=255&r,g.set(f,4),c=0,r=8;c<t;c++)g.set(n[c],r),r+=n[c].byteLength;return g}([112,115,115,104],new Uint8Array([r,0,0,0]),f,g,c,v,t||new Uint8Array)}(r,null,t);const c=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),g=String.fromCharCode.apply(null,Array.from(c)),v=g.substring(g.indexOf("<"),g.length),ie=(new DOMParser).parseFromString(v,"text/xml").getElementsByTagName("KID")[0];if(ie){const Me=ie.childNodes[0]?ie.childNodes[0].nodeValue:ie.getAttribute("VALUE");if(Me){const Re=id(Me).subarray(0,16);(function hg(f){const n=function(r,c,g){const v=r[c];r[c]=r[g],r[g]=v};n(f,0,3),n(f,1,2),n(f,4,5),n(f,6,7)})(Re),this.keyId=Re}}break}default:{let r=t.subarray(0,16);if(16!==r.length){const c=new Uint8Array(16);c.set(r,16-r.length),r=c}this.keyId=r;break}}if(!this.keyId||16!==this.keyId.byteLength){let r=cu[this.uri];if(!r){const c=Object.keys(cu).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,c),cu[this.uri]=r}this.keyId=r}return this}}const jf=/\{\$([a-zA-Z0-9-_]+)\}/g;function ic(f){return jf.test(f)}function co(f,n,t){if(null!==f.variableList||f.hasVariableRefs)for(let r=t.length;r--;){const c=t[r],g=n[c];g&&(n[c]=uu(f,g))}}function uu(f,n){if(null!==f.variableList||f.hasVariableRefs){const t=f.variableList;return n.replace(jf,r=>{const c=r.substring(2,r.length-1),g=null==t?void 0:t[c];return void 0===g?(f.playlistParsingError||(f.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${c}"`)),r):g})}return n}function $s(f,n,t){let c,g,r=f.variableList;if(r||(f.variableList=r={}),"QUERYPARAM"in n){c=n.QUERYPARAM;try{const v=new self.URL(t).searchParams;if(!v.has(c))throw new Error(`"${c}" does not match any query parameter in URI: "${t}"`);g=v.get(c)}catch(v){f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${v.message}`))}}else c=n.NAME,g=n.VALUE;c in r?f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${c}"`)):r[c]=g||""}function Vf(f,n,t){const r=n.IMPORT;if(t&&r in t){let c=f.variableList;c||(f.variableList=c={}),c[r]=t[r]}else f.playlistParsingError||(f.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function oc(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}const Ml={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},dd=oc();function sc(f,n){var t;return null!=(t=null==dd?void 0:dd.isTypeSupported(`${n||"video"}/mp4;codecs="${f}"`))&&t}const hd=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,du=/#EXT-X-MEDIA:(.*)/g,gd=/^#EXT(?:INF|-X-TARGETDURATION):/m,fu=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),hu=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Lo{static findGroup(n,t){for(let r=0;r<n.length;r++){const c=n[r];if(c.id===t)return c}}static convertAVC1ToAVCOTI(n){const t=n.split(".");if(t.length>2){let r=t.shift()+".";return r+=parseInt(t.shift()).toString(16),r+=("000"+parseInt(t.shift()).toString(16)).slice(-4),r}return n}static resolve(n,t){return tu.buildAbsoluteURL(t,n,{alwaysNormalize:!0})}static isMediaPlaylist(n){return gd.test(n)}static parseMasterPlaylist(n,t){const c={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:ic(n)},g=[];let v;for(hd.lastIndex=0;null!=(v=hd.exec(n));)if(v[1]){var x;const ie=new yi(v[1]);co(c,ie,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const Me=uu(c,v[2]),Re={attrs:ie,bitrate:ie.decimalInteger("AVERAGE-BANDWIDTH")||ie.decimalInteger("BANDWIDTH"),name:ie.NAME,url:Lo.resolve(Me,t)},$e=ie.decimalResolution("RESOLUTION");$e&&(Re.width=$e.width,Re.height=$e.height),pd((ie.CODECS||"").split(/[ ,]+/).filter(qe=>qe),Re),Re.videoCodec&&-1!==Re.videoCodec.indexOf("avc1")&&(Re.videoCodec=Lo.convertAVC1ToAVCOTI(Re.videoCodec)),null!=(x=Re.unknownCodecs)&&x.length||g.push(Re),c.levels.push(Re)}else if(v[3]){const Me=v[4];switch(v[3]){case"SESSION-DATA":{const Re=new yi(Me);co(c,Re,["DATA-ID","LANGUAGE","VALUE","URI"]);const $e=Re["DATA-ID"];$e&&(null===c.sessionData&&(c.sessionData={}),c.sessionData[$e]=Re);break}case"SESSION-KEY":{const Re=gu(Me,t,c);Re.encrypted&&Re.isSupported()?(null===c.sessionKeys&&(c.sessionKeys=[]),c.sessionKeys.push(Re)):Qt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${Me}"`);break}case"DEFINE":{const Re=new yi(Me);co(c,Re,["NAME","VALUE","QUERYPARAM"]),$s(c,Re,t)}break;case"CONTENT-STEERING":{const Re=new yi(Me);co(c,Re,["SERVER-URI","PATHWAY-ID"]),c.contentSteering={uri:Lo.resolve(Re["SERVER-URI"],t),pathwayId:Re["PATHWAY-ID"]||"."};break}case"START":c.startTimeOffset=pu(Me)}}return c.levels=g.length>0&&g.length<c.levels.length?g:c.levels,0===c.levels.length&&(c.playlistParsingError=new Error("no levels found in manifest")),c}static parseMasterPlaylistMedia(n,t,r){let c;const g={},v=r.levels,x={AUDIO:v.map(ie=>({id:ie.attrs.AUDIO,audioCodec:ie.audioCodec})),SUBTITLES:v.map(ie=>({id:ie.attrs.SUBTITLES,textCodec:ie.textCodec})),"CLOSED-CAPTIONS":[]};let Y=0;for(du.lastIndex=0;null!==(c=du.exec(n));){const ie=new yi(c[1]),Me=ie.TYPE;if(Me){const Re=x[Me],$e=g[Me]||[];g[Me]=$e,co(r,ie,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const qe={attrs:ie,bitrate:0,id:Y++,groupId:ie["GROUP-ID"]||"",instreamId:ie["INSTREAM-ID"],name:ie.NAME||ie.LANGUAGE||"",type:Me,default:ie.bool("DEFAULT"),autoselect:ie.bool("AUTOSELECT"),forced:ie.bool("FORCED"),lang:ie.LANGUAGE,url:ie.URI?Lo.resolve(ie.URI,t):""};if(null!=Re&&Re.length){const ot=Lo.findGroup(Re,qe.groupId)||Re[0];ac(qe,ot,"audioCodec"),ac(qe,ot,"textCodec")}$e.push(qe)}}return g}static parseLevelPlaylist(n,t,r,c,g,v){const x=new xf(t),Y=x.fragments;let Tt,$t,rn,ie=null,Me=0,Re=0,$e=0,qe=0,ot=null,gt=new rd(c,t),nn=-1,Sn=!1;for(fu.lastIndex=0,x.m3u8=n,x.hasVariableRefs=ic(n);null!==(Tt=fu.exec(n));){Sn&&(Sn=!1,gt=new rd(c,t),gt.start=$e,gt.sn=Me,gt.cc=qe,gt.level=r,ie&&(gt.initSegment=ie,gt.rawProgramDateTime=ie.rawProgramDateTime,ie.rawProgramDateTime=null));const Zn=Tt[1];if(Zn){gt.duration=parseFloat(Zn);const Jn=(" "+Tt[2]).slice(1);gt.title=Jn||null,gt.tagList.push(Jn?["INF",Zn,Jn]:["INF",Zn])}else if(Tt[3]){if(cr(gt.duration)){gt.start=$e,rn&&Gf(gt,rn,x),gt.sn=Me,gt.level=r,gt.cc=qe,gt.urlId=g,Y.push(gt);const Jn=(" "+Tt[3]).slice(1);gt.relurl=uu(x,Jn),Ha(gt,ot),ot=gt,$e+=gt.duration,Me++,Re=0,Sn=!0}}else if(Tt[4]){const Jn=(" "+Tt[4]).slice(1);ot?gt.setByteRange(Jn,ot):gt.setByteRange(Jn)}else if(Tt[5])gt.rawProgramDateTime=(" "+Tt[5]).slice(1),gt.tagList.push(["PROGRAM-DATE-TIME",gt.rawProgramDateTime]),-1===nn&&(nn=Y.length);else{if(Tt=Tt[0].match(hu),!Tt){Qt.warn("No matches on slow regex match for level playlist!");continue}for($t=1;$t<Tt.length&&void 0===Tt[$t];$t++);const Jn=(" "+Tt[$t]).slice(1),Dn=(" "+Tt[$t+1]).slice(1),_r=Tt[$t+2]?(" "+Tt[$t+2]).slice(1):"";switch(Jn){case"PLAYLIST-TYPE":x.type=Dn.toUpperCase();break;case"MEDIA-SEQUENCE":Me=x.startSN=parseInt(Dn);break;case"SKIP":{const nr=new yi(Dn);co(x,nr,["RECENTLY-REMOVED-DATERANGES"]);const ci=nr.decimalInteger("SKIPPED-SEGMENTS");if(cr(ci)){x.skippedSegments=ci;for(let Ci=ci;Ci--;)Y.unshift(null);Me+=ci}const Ki=nr.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ki&&(x.recentlyRemovedDateranges=Ki.split("\t"));break}case"TARGETDURATION":x.targetduration=Math.max(parseInt(Dn),1);break;case"VERSION":x.version=parseInt(Dn);break;case"EXTM3U":break;case"ENDLIST":x.live=!1;break;case"#":(Dn||_r)&&gt.tagList.push(_r?[Dn,_r]:[Dn]);break;case"DISCONTINUITY":qe++,gt.tagList.push(["DIS"]);break;case"GAP":gt.gap=!0,gt.tagList.push([Jn]);break;case"BITRATE":gt.tagList.push([Jn,Dn]);break;case"DATERANGE":{const nr=new yi(Dn);co(x,nr,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),co(x,nr,nr.clientAttrs);const ci=new Af(nr,x.dateRanges[nr.ID]);ci.isValid||x.skippedSegments?x.dateRanges[ci.id]=ci:Qt.warn(`Ignoring invalid DATERANGE tag: "${Dn}"`),gt.tagList.push(["EXT-X-DATERANGE",Dn]);break}case"DEFINE":{const nr=new yi(Dn);co(x,nr,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in nr?Vf(x,nr,v):$s(x,nr,t)}break;case"DISCONTINUITY-SEQUENCE":qe=parseInt(Dn);break;case"KEY":{const nr=gu(Dn,t,x);if(nr.isSupported()){if("NONE"===nr.method){rn=void 0;break}rn||(rn={}),rn[nr.keyFormat]&&(rn=Gi({},rn)),rn[nr.keyFormat]=nr}else Qt.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Dn}"`);break}case"START":x.startTimeOffset=pu(Dn);break;case"MAP":{const nr=new yi(Dn);if(co(x,nr,["BYTERANGE","URI"]),gt.duration){const ci=new rd(c,t);$o(ci,nr,r,rn),ie=ci,gt.initSegment=ie,ie.rawProgramDateTime&&!gt.rawProgramDateTime&&(gt.rawProgramDateTime=ie.rawProgramDateTime)}else $o(gt,nr,r,rn),ie=gt,Sn=!0;break}case"SERVER-CONTROL":{const nr=new yi(Dn);x.canBlockReload=nr.bool("CAN-BLOCK-RELOAD"),x.canSkipUntil=nr.optionalFloat("CAN-SKIP-UNTIL",0),x.canSkipDateRanges=x.canSkipUntil>0&&nr.bool("CAN-SKIP-DATERANGES"),x.partHoldBack=nr.optionalFloat("PART-HOLD-BACK",0),x.holdBack=nr.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const nr=new yi(Dn);x.partTarget=nr.decimalFloatingPoint("PART-TARGET");break}case"PART":{let nr=x.partList;nr||(nr=x.partList=[]);const ci=Re>0?nr[nr.length-1]:void 0,Ki=Re++,Ci=new yi(Dn);co(x,Ci,["BYTERANGE","URI"]);const Ai=new Hs(Ci,gt,t,Ki,ci);nr.push(Ai),gt.duration+=Ai.duration;break}case"PRELOAD-HINT":{const nr=new yi(Dn);co(x,nr,["URI"]),x.preloadHint=nr;break}case"RENDITION-REPORT":{const nr=new yi(Dn);co(x,nr,["URI"]),x.renditionReports=x.renditionReports||[],x.renditionReports.push(nr);break}default:Qt.warn(`line parsed but not handled: ${Tt}`)}}}ot&&!ot.relurl?(Y.pop(),$e-=ot.duration,x.partList&&(x.fragmentHint=ot)):x.partList&&(Ha(gt,ot),gt.cc=qe,x.fragmentHint=gt,rn&&Gf(gt,rn,x));const gn=Y.length,Bn=Y[0],On=Y[gn-1];if($e+=x.skippedSegments*x.targetduration,$e>0&&gn&&On){x.averagetargetduration=$e/gn;const Zn=On.sn;x.endSN="initSegment"!==Zn?Zn:0,x.live||(On.endList=!0),Bn&&(x.startCC=Bn.cc)}else x.endSN=0,x.startCC=0;return x.fragmentHint&&($e+=x.fragmentHint.duration),x.totalduration=$e,x.endCC=qe,nn>0&&function Tg(f,n){let t=f[n];for(let r=n;r--;){const c=f[r];if(!c)return;c.programDateTime=t.programDateTime-1e3*c.duration,t=c}}(Y,nn),x}}function gu(f,n,t){var r,c;const g=new yi(f);co(t,g,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const v=null!=(r=g.METHOD)?r:"",x=g.URI,Y=g.hexadecimalInteger("IV"),ie=g.KEYFORMATVERSIONS,Me=null!=(c=g.KEYFORMAT)?c:"identity";x&&g.IV&&!Y&&Qt.error(`Invalid IV: ${g.IV}`);const Re=x?Lo.resolve(x,n):"",$e=(ie||"1").split("/").map(Number).filter(Number.isFinite);return new ga(v,Re,Me,$e,Y)}function pu(f){const t=new yi(f).decimalFloatingPoint("TIME-OFFSET");return cr(t)?t:null}function pd(f,n){["video","audio","text"].forEach(t=>{const r=f.filter(c=>function fd(f,n){const t=Ml[n];return!!t&&!0===t[f.slice(0,4)]}(c,t));if(r.length){const c=r.filter(g=>0===g.lastIndexOf("avc1",0)||0===g.lastIndexOf("mp4a",0));n[`${t}Codec`]=c.length>0?c[0]:r[0],f=f.filter(g=>-1===r.indexOf(g))}}),n.unknownCodecs=f}function ac(f,n,t){const r=n[t];r&&(f[t]=r)}function Ha(f,n){f.rawProgramDateTime?f.programDateTime=Date.parse(f.rawProgramDateTime):null!=n&&n.programDateTime&&(f.programDateTime=n.endProgramDateTime),cr(f.programDateTime)||(f.programDateTime=null,f.rawProgramDateTime=null)}function $o(f,n,t,r){f.relurl=n.URI,n.BYTERANGE&&f.setByteRange(n.BYTERANGE),f.level=t,f.sn="initSegment",r&&(f.levelkeys=r),f.initSegment=null}function Gf(f,n,t){f.levelkeys=n;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==n)&&Object.keys(n).some(c=>n[c].isCommonEncryption)&&r.push(f)}function md(f){const{type:n}=f;switch(n){case"audioTrack":return"audio";case"subtitleTrack":return"subtitle";default:return"main"}}function Fo(f,n){let t=f.url;return(void 0===t||0===t.indexOf("data:"))&&(t=n.url),t}class lc{constructor(n){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=n,this.registerListeners()}startLoad(n){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:n}=this;n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.LEVEL_LOADING,this.onLevelLoading,this),n.on(at.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.on(at.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:n}=this;n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.LEVEL_LOADING,this.onLevelLoading,this),n.off(at.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),n.off(at.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(n){const t=this.hls.config,v=new(t.pLoader||t.loader)(t);return this.loaders[n.type]=v,v}getInternalLoader(n){return this.loaders[n.type]}resetInternalLoader(n){this.loaders[n]&&delete this.loaders[n]}destroyInternalLoaders(){for(const n in this.loaders){const t=this.loaders[n];t&&t.destroy(),this.resetInternalLoader(n)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(n,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:"manifest",url:r,deliveryDirectives:null})}onLevelLoading(n,t){const{id:r,level:c,url:g,deliveryDirectives:v}=t;this.load({id:r,level:c,responseType:"text",type:"level",url:g,deliveryDirectives:v})}onAudioTrackLoading(n,t){const{id:r,groupId:c,url:g,deliveryDirectives:v}=t;this.load({id:r,groupId:c,level:null,responseType:"text",type:"audioTrack",url:g,deliveryDirectives:v})}onSubtitleTrackLoading(n,t){const{id:r,groupId:c,url:g,deliveryDirectives:v}=t;this.load({id:r,groupId:c,level:null,responseType:"text",type:"subtitleTrack",url:g,deliveryDirectives:v})}load(n){var t;const r=this.hls.config;let g,c=this.getInternalLoader(n);if(c){const ie=c.context;if(ie&&ie.url===n.url)return void Qt.trace("[playlist-loader]: playlist request ongoing");Qt.log(`[playlist-loader]: aborting previous loader for type: ${n.type}`),c.abort()}if(g="manifest"===n.type?r.manifestLoadPolicy.default:Gi({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),c=this.createInternalLoader(n),null!=(t=n.deliveryDirectives)&&t.part){let ie;if("level"===n.type&&null!==n.level?ie=this.hls.levels[n.level].details:"audioTrack"===n.type&&null!==n.id?ie=this.hls.audioTracks[n.id].details:"subtitleTrack"===n.type&&null!==n.id&&(ie=this.hls.subtitleTracks[n.id].details),ie){const Me=ie.partTarget,Re=ie.targetduration;if(Me&&Re){const $e=1e3*Math.max(3*Me,.8*Re);g=Gi({},g,{maxTimeToFirstByteMs:Math.min($e,g.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min($e,g.maxTimeToFirstByteMs)})}}}const v=g.errorRetry||g.timeoutRetry||{};c.load(n,{loadPolicy:g,timeout:g.maxLoadTimeMs,maxRetry:v.maxNumRetry||0,retryDelay:v.retryDelayMs||0,maxRetryDelay:v.maxRetryDelayMs||0},{onSuccess:(ie,Me,Re,$e)=>{const qe=this.getInternalLoader(Re);this.resetInternalLoader(Re.type);const ot=ie.data;0===ot.indexOf("#EXTM3U")?(Me.parsing.start=performance.now(),Lo.isMediaPlaylist(ot)?this.handleTrackOrLevelPlaylist(ie,Me,Re,$e||null,qe):this.handleMasterPlaylist(ie,Me,Re,$e)):this.handleManifestParsingError(ie,Re,new Error("no EXTM3U delimiter"),$e||null,Me)},onError:(ie,Me,Re,$e)=>{this.handleNetworkError(Me,Re,!1,ie,$e)},onTimeout:(ie,Me,Re)=>{this.handleNetworkError(Me,Re,!0,void 0,ie)}})}handleMasterPlaylist(n,t,r,c){const g=this.hls,v=n.data,x=Fo(n,r),Y=Lo.parseMasterPlaylist(v,x);if(Y.playlistParsingError)return void this.handleManifestParsingError(n,r,Y.playlistParsingError,c,t);const{contentSteering:ie,levels:Me,sessionData:Re,sessionKeys:$e,startTimeOffset:qe,variableList:ot}=Y;this.variableList=ot;const{AUDIO:gt=[],SUBTITLES:Tt,"CLOSED-CAPTIONS":$t}=Lo.parseMasterPlaylistMedia(v,x,Y);gt.length&&!gt.some(nn=>!nn.url)&&Me[0].audioCodec&&!Me[0].attrs.AUDIO&&(Qt.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),gt.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new yi({}),bitrate:0,url:""})),g.trigger(at.MANIFEST_LOADED,{levels:Me,audioTracks:gt,subtitles:Tt,captions:$t,contentSteering:ie,url:x,stats:t,networkDetails:c,sessionData:Re,sessionKeys:$e,startTimeOffset:qe,variableList:ot})}handleTrackOrLevelPlaylist(n,t,r,c,g){const v=this.hls,{id:x,level:Y,type:ie}=r,Me=Fo(n,r),Re=cr(x)?x:0,$e=cr(Y)?Y:Re,qe=md(r),ot=Lo.parseLevelPlaylist(n.data,Me,$e,qe,Re,this.variableList);if("manifest"===ie){const gt={attrs:new yi({}),bitrate:0,details:ot,name:"",url:Me};v.trigger(at.MANIFEST_LOADED,{levels:[gt],audioTracks:[],url:Me,stats:t,networkDetails:c,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=ot,this.handlePlaylistLoaded(ot,n,t,r,c,g)}handleManifestParsingError(n,t,r,c,g){this.hls.trigger(at.ERROR,{type:pr.NETWORK_ERROR,details:mn.MANIFEST_PARSING_ERROR,fatal:"manifest"===t.type,url:n.url,err:r,error:r,reason:r.message,response:n,context:t,networkDetails:c,stats:g})}handleNetworkError(n,t,r=!1,c,g){let v=`A network ${r?"timeout":"error"+(c?" (status "+c.code+")":"")} occurred while loading ${n.type}`;"level"===n.type?v+=`: ${n.level} id: ${n.id}`:("audioTrack"===n.type||"subtitleTrack"===n.type)&&(v+=` id: ${n.id} group-id: "${n.groupId}"`);const x=new Error(v);Qt.warn(`[playlist-loader]: ${v}`);let Y=mn.UNKNOWN,ie=!1;const Me=this.getInternalLoader(n);switch(n.type){case"manifest":Y=r?mn.MANIFEST_LOAD_TIMEOUT:mn.MANIFEST_LOAD_ERROR,ie=!0;break;case"level":Y=r?mn.LEVEL_LOAD_TIMEOUT:mn.LEVEL_LOAD_ERROR,ie=!1;break;case"audioTrack":Y=r?mn.AUDIO_TRACK_LOAD_TIMEOUT:mn.AUDIO_TRACK_LOAD_ERROR,ie=!1;break;case"subtitleTrack":Y=r?mn.SUBTITLE_TRACK_LOAD_TIMEOUT:mn.SUBTITLE_LOAD_ERROR,ie=!1}Me&&this.resetInternalLoader(n.type);const Re={type:pr.NETWORK_ERROR,details:Y,fatal:ie,url:n.url,loader:Me,context:n,error:x,networkDetails:t,stats:g};c&&(Re.response=Li({url:(null==t?void 0:t.url)||n.url,data:void 0},c)),this.hls.trigger(at.ERROR,Re)}handlePlaylistLoaded(n,t,r,c,g,v){const x=this.hls,{type:Y,level:ie,id:Me,groupId:Re,deliveryDirectives:$e}=c,qe=Fo(t,c),ot=md(c),gt="number"==typeof c.level&&"main"===ot?ie:void 0;if(!n.fragments.length){const $t=new Error("No Segments found in Playlist");return void x.trigger(at.ERROR,{type:pr.NETWORK_ERROR,details:mn.LEVEL_EMPTY_ERROR,fatal:!1,url:qe,error:$t,reason:$t.message,response:t,context:c,level:gt,parent:ot,networkDetails:g,stats:r})}n.targetduration||(n.playlistParsingError=new Error("Missing Target Duration"));const Tt=n.playlistParsingError;if(Tt)x.trigger(at.ERROR,{type:pr.NETWORK_ERROR,details:mn.LEVEL_PARSING_ERROR,fatal:!1,url:qe,error:Tt,reason:Tt.message,response:t,context:c,level:gt,parent:ot,networkDetails:g,stats:r});else switch(n.live&&v&&(v.getCacheAge&&(n.ageHeader=v.getCacheAge()||0),(!v.getCacheAge||isNaN(n.ageHeader))&&(n.ageHeader=0)),Y){case"manifest":case"level":x.trigger(at.LEVEL_LOADED,{details:n,level:gt||0,id:Me||0,stats:r,networkDetails:g,deliveryDirectives:$e});break;case"audioTrack":x.trigger(at.AUDIO_TRACK_LOADED,{details:n,id:Me||0,groupId:Re||"",stats:r,networkDetails:g,deliveryDirectives:$e});break;case"subtitleTrack":x.trigger(at.SUBTITLE_TRACK_LOADED,{details:n,id:Me||0,groupId:Re||"",stats:r,networkDetails:g,deliveryDirectives:$e})}}}function Dl(f,n){let t;try{t=new Event("addtrack")}catch(r){t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=f,n.dispatchEvent(t)}function mu(f,n){const t=f.mode;if("disabled"===t&&(f.mode="hidden"),f.cues&&!f.cues.getCueById(n.id))try{if(f.addCue(n),!f.cues.getCueById(n.id))throw new Error(`addCue is failed for: ${n}`)}catch(r){Qt.debug(`[texttrack-utils]: ${r}`);const c=new self.TextTrackCue(n.startTime,n.endTime,n.text);c.id=n.id,f.addCue(c)}"disabled"===t&&(f.mode=t)}function Za(f){const n=f.mode;if("disabled"===n&&(f.mode="hidden"),f.cues)for(let t=f.cues.length;t--;)f.removeCue(f.cues[t]);"disabled"===n&&(f.mode=n)}function Ka(f,n,t,r){const c=f.mode;if("disabled"===c&&(f.mode="hidden"),f.cues&&f.cues.length>0){const g=function _d(f,n,t){const r=[],c=function _u(f,n){if(n<f[0].startTime)return 0;const t=f.length-1;if(n>f[t].endTime)return-1;let r=0,c=t;for(;r<=c;){const g=Math.floor((c+r)/2);if(n<f[g].startTime)c=g-1;else{if(!(n>f[g].startTime&&r<t))return g;r=g+1}}return f[r].startTime-n<n-f[c].startTime?r:c}(f,n);if(c>-1)for(let g=c,v=f.length;g<v;g++){const x=f[g];if(x.startTime>=n&&x.endTime<=t)r.push(x);else if(x.startTime>t)return r}return r}(f.cues,n,t);for(let v=0;v<g.length;v++)(!r||r(g[v]))&&f.removeCue(g[v])}"disabled"===c&&(f.mode=c)}var ko_emsg="https://aomedia.org/emsg/ID3";function cc(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const uc=(()=>{const f=cc();try{new f(0,Number.POSITIVE_INFINITY,"")}catch(n){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function zs(f,n){return f.getTime()/1e3-n}function vd(f){return Uint8Array.from(f.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class Hf{constructor(n){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=n,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.on(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(at.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),n.off(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(at.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(n,t){this.media=t.media}onMediaDetaching(){!this.id3Track||(Za(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(n){const t=this.getID3Track(n.textTracks);return t.mode="hidden",t}getID3Track(n){if(this.media){for(let t=0;t<n.length;t++){const r=n[t];if("metadata"===r.kind&&"id3"===r.label)return Dl(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(n,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:c}}}=this;if(!r&&!c)return;const{samples:g}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const v=cc();for(let x=0;x<g.length;x++){const Y=g[x].type;if(Y===ko_emsg&&!r||!c)continue;const ie=Zs(g[x].data);if(ie){const Me=g[x].pts;let Re=Me+g[x].duration;Re>uc&&(Re=uc),Re-Me<=0&&(Re=Me+.25);for(let qe=0;qe<ie.length;qe++){const ot=ie[qe];if(!Ga(ot)){this.updateId3CueEnds(Me,Y);const gt=new v(Me,Re,"");gt.value=ot,Y&&(gt.type=Y),this.id3Track.addCue(gt)}}}}}updateId3CueEnds(n,t){var r;const c=null==(r=this.id3Track)?void 0:r.cues;if(c)for(let g=c.length;g--;){const v=c[g];v.type===t&&v.startTime<n&&v.endTime===uc&&(v.endTime=n)}}onBufferFlushing(n,{startOffset:t,endOffset:r,type:c}){const{id3Track:g,hls:v}=this;if(!v)return;const{config:{enableEmsgMetadataCues:x,enableID3MetadataCues:Y}}=v;if(g&&(x||Y)){let ie;ie="audio"===c?Me=>"org.id3"===Me.type&&Y:"video"===c?Me=>Me.type===ko_emsg&&x:Me=>"org.id3"===Me.type&&Y||Me.type===ko_emsg&&x,Ka(g,t,r,ie)}}onLevelUpdated(n,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:c}=this,{dateRanges:g}=t,v=Object.keys(g);if(c){const Me=Object.keys(r).filter(Re=>!v.includes(Re));for(let Re=Me.length;Re--;){const $e=Me[Re];Object.keys(r[$e].cues).forEach(qe=>{c.removeCue(r[$e].cues[qe])}),delete r[$e]}}const x=t.fragments[t.fragments.length-1];if(0===v.length||!cr(null==x?void 0:x.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const Y=x.programDateTime/1e3-x.start,ie=cc();for(let Me=0;Me<v.length;Me++){const Re=v[Me],$e=g[Re],qe=r[Re],ot=(null==qe?void 0:qe.cues)||{};let gt=(null==qe?void 0:qe.durationKnown)||!1;const Tt=zs($e.startDate,Y);let $t=uc;const rn=$e.endDate;if(rn)$t=zs(rn,Y),gt=!0;else if($e.endOnNext&&!gt){const Sn=v.reduce((gn,Bn)=>{const On=g[Bn];return On.class===$e.class&&On.id!==Bn&&On.startDate>$e.startDate&&gn.push(On),gn},[]).sort((gn,Bn)=>gn.startDate.getTime()-Bn.startDate.getTime())[0];Sn&&($t=zs(Sn.startDate,Y),gt=!0)}const nn=Object.keys($e.attr);for(let Sn=0;Sn<nn.length;Sn++){const gn=nn[Sn];if("ID"===(f=gn)||"CLASS"===f||"START-DATE"===f||"DURATION"===f||"END-DATE"===f||"END-ON-NEXT"===f)continue;let Bn=ot[gn];if(Bn)gt&&!qe.durationKnown&&(Bn.endTime=$t);else{let On=$e.attr[gn];Bn=new ie(Tt,$t,""),fa(gn)&&(On=vd(On)),Bn.value={key:gn,data:On},Bn.type="com.apple.quicktime.HLS",Bn.id=Re,this.id3Track.addCue(Bn),ot[gn]=Bn}}r[Re]={cues:ot,dateRange:$e,durationKnown:gt}}var f}}class bg{constructor(n){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=n,this.config=n.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:n,levelDetails:t}=this;return void 0!==n.liveMaxLatencyDuration?n.liveMaxLatencyDuration:t?n.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:n}=this;if(null===n)return null;const{holdBack:t,partHoldBack:r,targetduration:c}=n,{liveSyncDuration:g,liveSyncDurationCount:v,lowLatencyMode:x}=this.config,Y=this.hls.userConfig;let ie=x&&r||t;return(Y.liveSyncDuration||Y.liveSyncDurationCount||0===ie)&&(ie=void 0!==g?g:v*c),ie+Math.min(1*this.stallCount,c)}get liveSyncPosition(){const n=this.estimateLiveEdge(),t=this.targetLatency,r=this.levelDetails;if(null===n||null===t||null===r)return null;const c=r.edge,x=c-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(c-r.totalduration,n-t-this.edgeStalled),x)}get drift(){const{levelDetails:n}=this;return null===n?1:n.drift}get edgeStalled(){const{levelDetails:n}=this;return null===n?0:Math.max(n.age-3*(this.config.lowLatencyMode&&n.partTarget||n.targetduration),0)}get forwardBufferLength(){const{media:n,levelDetails:t}=this;if(!n||!t)return 0;const r=n.buffered.length;return(r?n.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(at.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(at.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(at.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(at.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(at.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(at.ERROR,this.onError,this)}onMediaAttached(n,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(n,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(n,t){var r;t.details===mn.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&Qt.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:n,levelDetails:t}=this;if(!n||!t)return;this.currentTime=n.currentTime;const r=this.computeLatency();if(null===r)return;this._latency=r;const{lowLatencyMode:c,maxLiveSyncPlaybackRate:g}=this.config;if(!c||1===g)return;const v=this.targetLatency;if(null===v)return;const x=r-v,Y=Math.min(this.maxLatency,v+t.targetduration);if(t.live&&x<Y&&x>.05&&this.forwardBufferLength>1){const Me=Math.min(2,Math.max(1,g)),Re=Math.round(2/(1+Math.exp(-.75*x-this.edgeStalled))*20)/20;n.playbackRate=Math.min(Me,Math.max(1,Re))}else 1!==n.playbackRate&&0!==n.playbackRate&&(n.playbackRate=1)}estimateLiveEdge(){const{levelDetails:n}=this;return null===n?null:n.edge+n.age}computeLatency(){const n=this.estimateLiveEdge();return null===n?null:n-this.currentTime}}const dc=["NONE","TYPE-0","TYPE-1",null];class yu{constructor(n,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=n,this.part=t,this.skip=r}addDirectives(n){const t=new self.URL(n);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class hc{constructor(n){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[n.url],this._attrs=[n.attrs],this.bitrate=n.bitrate,n.details&&(this.details=n.details),this.id=n.id||0,this.name=n.name,this.width=n.width||0,this.height=n.height||0,this.audioCodec=n.audioCodec,this.videoCodec=n.videoCodec,this.unknownCodecs=n.unknownCodecs,this.codecSet=[n.videoCodec,n.audioCodec].filter(t=>t).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(n){const t=n%this.url.length;this._urlId!==t&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=t)}get audioGroupId(){var n;return null==(n=this.audioGroupIds)?void 0:n[this.urlId]}get textGroupId(){var n;return null==(n=this.textGroupIds)?void 0:n[this.urlId]}addFallback(n){this.url.push(n.url),this._attrs.push(n.attrs)}}function yd(f,n){const t=n.startPTS;if(cr(t)){let c,r=0;n.sn>f.sn?(r=t-f.start,c=f):(r=f.start-t,c=n),c.duration!==r&&(c.duration=r)}else n.start=n.sn>f.sn?f.cc===n.cc&&f.minEndPTS?f.start+(f.minEndPTS-f.start):f.start+f.duration:Math.max(f.start-n.duration,0)}function Eu(f,n,t,r,c,g){r-t<=0&&(Qt.warn("Fragment should have a positive duration",n),r=t+n.duration,g=c+n.duration);let x=t,Y=r;const ie=n.startPTS,Me=n.endPTS;if(cr(ie)){const Tt=Math.abs(ie-t);n.deltaPTS=cr(n.deltaPTS)?Math.max(Tt,n.deltaPTS):Tt,x=Math.max(t,ie),t=Math.min(t,ie),c=Math.min(c,n.startDTS),Y=Math.min(r,Me),r=Math.max(r,Me),g=Math.max(g,n.endDTS)}const Re=t-n.start;0!==n.start&&(n.start=t),n.duration=r-n.start,n.startPTS=t,n.maxStartPTS=x,n.startDTS=c,n.endPTS=r,n.minEndPTS=Y,n.endDTS=g;const $e=n.sn;if(!f||$e<f.startSN||$e>f.endSN)return 0;let qe;const ot=$e-f.startSN,gt=f.fragments;for(gt[ot]=n,qe=ot;qe>0;qe--)yd(gt[qe],gt[qe-1]);for(qe=ot;qe<gt.length-1;qe++)yd(gt[qe],gt[qe+1]);return f.fragmentHint&&yd(gt[gt.length-1],f.fragmentHint),f.PTSKnown=f.alignedSliding=!0,Re}function Kf(f,n){const t=n.startSN+n.skippedSegments-f.startSN,r=f.fragments;t<0||t>=r.length||bd(n,r[t].start)}function bd(f,n){if(n){const t=f.fragments;for(let r=f.skippedSegments;r<t.length;r++)t[r].start+=n;f.fragmentHint&&(f.fragmentHint.start+=n)}}function ma(f,n,t){var r;return null!=f&&f.details?Sd(null==(r=f.details)?void 0:r.partList,n,t):null}function Sd(f,n,t){if(f)for(let r=f.length;r--;){const c=f[r];if(c.index===t&&c.fragment.sn===n)return c}return null}function Pl(f){switch(f.details){case mn.FRAG_LOAD_TIMEOUT:case mn.KEY_LOAD_TIMEOUT:case mn.LEVEL_LOAD_TIMEOUT:case mn.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function Yf(f,n){const t=Pl(n);return f.default[(t?"timeout":"error")+"Retry"]}function Al(f,n){const t="linear"===f.backoff?1:Math.pow(2,n);return Math.min(t*f.retryDelayMs,f.maxRetryDelayMs)}function bu(f){return Li(Li({},f),{errorRetry:null,timeoutRetry:null})}function gc(f,n,t,r){return!!f&&n<f.maxNumRetry&&(function $f(f){return 0===f&&!1===navigator.onLine||!!f&&(f<400||f>499)}(r)||!!t)}const Md_search=function(f,n){let t=0,r=f.length-1,c=null,g=null;for(;t<=r;){c=(t+r)/2|0,g=f[c];const v=n(g);if(v>0)t=c+1;else{if(!(v<0))return g;r=c-1}}return null};function Il(f,n,t=0,r=0){let c=null;if(f?c=n[f.sn-n[0].sn+1]||null:0===t&&0===n[0].start&&(c=n[0]),c&&0===_a(t,r,c))return c;const g=Md_search(n,_a.bind(null,t,r));return!g||g===f&&c?c:g}function _a(f=0,n=0,t){if(t.start<=f&&t.start+t.duration>f)return 0;const r=Math.min(n,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=f?1:t.start-r>f&&t.start?-1:0}function Cu(f,n,t){const r=1e3*Math.min(n,t.duration+(t.deltaPTS?t.deltaPTS:0));return(t.endProgramDateTime||0)-r>f}function Sg(f,n,t){if(performance.now()-f.lastErrorPerfMs>3e5)return!0;const r=f.details;if(n.details===mn.FRAG_GAP&&r&&n.frag){const g=Il(null,r.fragments,n.frag.start);if(g&&!g.gap)return!0}if(t&&f.errors.length<t.errors.length){const c=f.errors[f.errors.length-1];if(r&&c.frag&&n.frag&&Math.abs(c.frag.start-n.frag.start)>3*r.targetduration)return!0}return!1}class Su{constructor(n,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=Qt.log.bind(Qt,`${t}:`),this.warn=Qt.warn.bind(Qt,`${t}:`),this.hls=n}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(n,t){const r=null==t?void 0:t.renditionReports;if(r){let c=-1;for(let g=0;g<r.length;g++){const v=r[g];let x;try{x=new self.URL(v.URI,t.url).href}catch(Y){Qt.warn(`Could not construct new URL for Rendition Report: ${Y}`),x=v.URI||""}if(x===n){c=g;break}x===n.substring(0,x.length)&&(c=g)}if(-1!==c){const g=r[c],v=parseInt(g["LAST-MSN"])||(null==t?void 0:t.lastPartSn);let x=parseInt(g["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){const Y=Math.min(t.age-t.partTarget,t.targetduration);x>=0&&Y>t.partTarget&&(x+=1)}return new yu(v,x>=0?x:void 0,"")}}}loadPlaylist(n){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(n){return this.canLoad&&!!n&&!!n.url&&(!n.details||n.details.live)}shouldReloadPlaylist(n){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(n)}playlistLoaded(n,t,r){const{details:c,stats:g}=t,v=self.performance.now(),x=g.loading.first?Math.max(0,v-g.loading.first):0;if(c.advancedDateTime=Date.now()-x,c.live||null!=r&&r.live){if(c.reloaded(r),r&&this.log(`live playlist ${n} ${c.advanced?"REFRESHED "+c.lastPartSn+"-"+c.lastPartIndex:"MISSED"}`),r&&c.fragments.length>0&&function Zf(f,n){let t=null;const r=f.fragments;for(let Y=r.length-1;Y>=0;Y--){const ie=r[Y].initSegment;if(ie){t=ie;break}}f.fragmentHint&&delete f.fragmentHint.endPTS;let g,c=0;if(function Td(f,n,t){const r=n.skippedSegments,c=Math.max(f.startSN,n.startSN)-n.startSN,g=(f.fragmentHint?1:0)+(r?n.endSN:Math.min(f.endSN,n.endSN))-n.startSN,v=n.startSN-f.startSN,x=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments,Y=f.fragmentHint?f.fragments.concat(f.fragmentHint):f.fragments;for(let ie=c;ie<=g;ie++){const Me=Y[v+ie];let Re=x[ie];r&&!Re&&ie<r&&(Re=n.fragments[ie]=Me),Me&&Re&&t(Me,Re)}}(f,n,(Y,ie)=>{Y.relurl&&(c=Y.cc-ie.cc),cr(Y.startPTS)&&cr(Y.endPTS)&&(ie.start=ie.startPTS=Y.startPTS,ie.startDTS=Y.startDTS,ie.maxStartPTS=Y.maxStartPTS,ie.endPTS=Y.endPTS,ie.endDTS=Y.endDTS,ie.minEndPTS=Y.minEndPTS,ie.duration=Y.endPTS-Y.startPTS,ie.duration&&(g=ie),n.PTSKnown=n.alignedSliding=!0),ie.elementaryStreams=Y.elementaryStreams,ie.loader=Y.loader,ie.stats=Y.stats,ie.urlId=Y.urlId,Y.initSegment&&(ie.initSegment=Y.initSegment,t=Y.initSegment)}),t&&(n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments).forEach(ie=>{var Me;(!ie.initSegment||ie.initSegment.relurl===(null==(Me=t)?void 0:Me.relurl))&&(ie.initSegment=t)}),n.skippedSegments)if(n.deltaUpdateFailed=n.fragments.some(Y=>!Y),n.deltaUpdateFailed){Qt.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let Y=n.skippedSegments;Y--;)n.fragments.shift();n.startSN=n.fragments[0].sn,n.startCC=n.fragments[0].cc}else n.canSkipDateRanges&&(n.dateRanges=function Ed(f,n,t){const r=Gi({},f);return t&&t.forEach(c=>{delete r[c]}),Object.keys(n).forEach(c=>{const g=new Af(n[c].attr,r[c]);g.isValid?r[c]=g:Qt.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(n[c].attr)}"`)}),r}(f.dateRanges,n.dateRanges,n.recentlyRemovedDateranges));const v=n.fragments;if(c){Qt.warn("discontinuity sliding from playlist, take drift into account");for(let Y=0;Y<v.length;Y++)v[Y].cc+=c}n.skippedSegments&&(n.startCC=n.fragments[0].cc),function Tu(f,n,t){if(f&&n){let r=0;for(let c=0,g=f.length;c<=g;c++){const v=f[c],x=n[c+r];v&&x&&v.index===x.index&&v.fragment.sn===x.fragment.sn?t(v,x):r--}}}(f.partList,n.partList,(Y,ie)=>{ie.elementaryStreams=Y.elementaryStreams,ie.stats=Y.stats}),g?Eu(n,g,g.startPTS,g.endPTS,g.startDTS,g.endDTS):Kf(f,n),v.length&&(n.totalduration=n.edge-v[0].start),n.driftStartTime=f.driftStartTime,n.driftStart=f.driftStart;const x=n.advancedDateTime;if(n.advanced&&x){const Y=n.edge;n.driftStart||(n.driftStartTime=x,n.driftStart=Y),n.driftEndTime=x,n.driftEnd=Y}else n.driftEndTime=f.driftEndTime,n.driftEnd=f.driftEnd,n.advancedDateTime=f.advancedDateTime}(r,c),!this.canLoad||!c.live)return;let Y,ie,Me;if(c.canBlockReload&&c.endSN&&c.advanced){const Tt=this.hls.config.lowLatencyMode,$t=c.lastPartSn,rn=c.endSN,nn=c.lastPartIndex,gn=$t===rn,Bn=Tt?0:nn;-1!==nn?(ie=gn?rn+1:$t,Me=gn?Bn:nn+1):ie=rn+1;const On=c.age;let Jn=Math.min(On+c.ageHeader-c.partTarget,1.5*c.targetduration);if(Jn>0){if(r&&Jn>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${Jn} with playlist age: ${c.age}`),Jn=0;else{const Dn=Math.floor(Jn/c.targetduration);ie+=Dn,void 0!==Me&&(Me+=Math.round(Jn%c.targetduration/c.partTarget)),this.log(`CDN Tune-in age: ${c.ageHeader}s last advanced ${On.toFixed(2)}s goal: ${Jn} skip sn ${Dn} to part ${Me}`)}c.tuneInGoal=Jn}if(Y=this.getDeliveryDirectives(c,t.deliveryDirectives,ie,Me),Tt||!gn)return void this.loadPlaylist(Y)}else c.canBlockReload&&(Y=this.getDeliveryDirectives(c,t.deliveryDirectives,ie,Me));const Re=this.hls.mainForwardBufferInfo,ot=function Wf(f,n=1/0){let t=1e3*f.targetduration;if(f.updated){const r=f.fragments,c=4;if(r.length&&t*c>n){const g=1e3*r[r.length-1].duration;g<t&&(t=g)}}else t/=2;return Math.round(t)}(c,1e3*(c.edge-(Re?Re.end-Re.len:0)));c.updated&&v>this.requestScheduled+ot&&(this.requestScheduled=g.loading.start),void 0!==ie&&c.canBlockReload?this.requestScheduled=g.loading.first+ot-(1e3*c.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+ot<v?this.requestScheduled=v:this.requestScheduled-v<=0&&(this.requestScheduled+=ot);let gt=this.requestScheduled-v;gt=Math.max(0,gt),this.log(`reload live playlist ${n} in ${Math.round(gt)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(Y),gt)}else this.clearTimer()}getDeliveryDirectives(n,t,r,c){let g=function Cg(f,n){const{canSkipUntil:t,canSkipDateRanges:r,endSN:c}=f;return t&&(void 0!==n?n-c:0)<t?r?"v2":"YES":""}(n,r);return null!=t&&t.skip&&n.deltaUpdateFailed&&(r=t.msn,c=t.part,g=""),new yu(r,c,g)}checkRetry(n){const t=n.details,r=Pl(n),c=n.errorAction,{action:g,retryCount:v=0,retryConfig:x}=c||{},Y=!!c&&!!x&&(5===g||!c.resolved&&2===g);if(Y){var ie;if(this.requestScheduled=-1,v>=x.maxNumRetry)return!1;if(r&&null!=(ie=n.context)&&ie.deliveryDirectives)this.warn(`Retrying playlist loading ${v+1}/${x.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const Me=Al(x,v);this.timer=self.setTimeout(()=>this.loadPlaylist(),Me),this.warn(`Retrying playlist loading ${v+1}/${x.maxNumRetry} after "${t}" in ${Me}ms`)}n.levelRetry=!0,c.resolved=!0}return Y}}let Ad;class qf extends Su{constructor(n,t){super(n,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(at.LEVEL_LOADED,this.onLevelLoaded,this),n.on(at.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(at.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(at.FRAG_LOADED,this.onFragLoaded,this),n.on(at.ERROR,this.onError,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(at.LEVEL_LOADED,this.onLevelLoaded,this),n.off(at.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(at.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(at.FRAG_LOADED,this.onFragLoaded,this),n.off(at.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(n,t){this.resetLevels()}onManifestLoaded(n,t){const r=[],c={};let g;t.levels.forEach(v=>{var x;const Y=v.attrs;-1!==(null==(x=v.audioCodec)?void 0:x.indexOf("mp4a.40.34"))&&(Ad||(Ad=/chrome|firefox/i.test(navigator.userAgent)),Ad&&(v.audioCodec=void 0));const{AUDIO:ie,CODECS:Me,"FRAME-RATE":Re,"PATHWAY-ID":$e,RESOLUTION:qe,SUBTITLES:ot}=Y,Tt=`${$e||"."}-${v.bitrate}-${qe}-${Re}-${Me}`;g=c[Tt],g?g.addFallback(v):(g=new hc(v),c[Tt]=g,r.push(g)),mc(g,"audio",ie),mc(g,"text",ot)}),this.filterAndSortMediaOptions(r,t)}filterAndSortMediaOptions(n,t){let r=[],c=[],g=!1,v=!1,x=!1,Y=n.filter(({audioCodec:qe,videoCodec:ot,width:gt,height:Tt,unknownCodecs:$t})=>(g||(g=!(!gt||!Tt)),v||(v=!!ot),x||(x=!!qe),!(null!=$t&&$t.length)&&(!qe||sc(qe,"audio"))&&(!ot||sc(ot,"video"))));if((g||v)&&x&&(Y=Y.filter(({videoCodec:qe,width:ot,height:gt})=>!!qe||!(!ot||!gt))),0===Y.length)return void Promise.resolve().then(()=>{if(this.hls){const qe=new Error("no level with compatible codecs found in manifest");this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:qe,reason:qe.message})}});t.audioTracks&&(r=t.audioTracks.filter(qe=>!qe.audioCodec||sc(qe.audioCodec,"audio")),Mu(r)),t.subtitles&&(c=t.subtitles,Mu(c));const ie=Y.slice(0);Y.sort((qe,ot)=>qe.attrs["HDCP-LEVEL"]!==ot.attrs["HDCP-LEVEL"]?(qe.attrs["HDCP-LEVEL"]||"")>(ot.attrs["HDCP-LEVEL"]||"")?1:-1:qe.bitrate!==ot.bitrate?qe.bitrate-ot.bitrate:qe.attrs["FRAME-RATE"]!==ot.attrs["FRAME-RATE"]?qe.attrs.decimalFloatingPoint("FRAME-RATE")-ot.attrs.decimalFloatingPoint("FRAME-RATE"):qe.attrs.SCORE!==ot.attrs.SCORE?qe.attrs.decimalFloatingPoint("SCORE")-ot.attrs.decimalFloatingPoint("SCORE"):g&&qe.height!==ot.height?qe.height-ot.height:0);let Me=ie[0];if(this.steering&&(Y=this.steering.filterParsedLevels(Y),Y.length!==ie.length))for(let qe=0;qe<ie.length;qe++)if(ie[qe].pathwayId===Y[0].pathwayId){Me=ie[qe];break}this._levels=Y;for(let qe=0;qe<Y.length;qe++)if(Y[qe]===Me){this._firstLevel=qe,this.log(`manifest loaded, ${Y.length} level(s) found, first bitrate: ${Me.bitrate}`);break}const $e={levels:Y,audioTracks:r,subtitleTracks:c,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:x,video:v,altAudio:!(x&&!v)&&r.some(qe=>!!qe.url)};this.hls.trigger(at.MANIFEST_PARSED,$e),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return 0===this._levels.length?null:this._levels}get level(){return this.currentLevelIndex}set level(n){const t=this._levels;if(0===t.length)return;if(n<0||n>=t.length){const Me=new Error("invalid level idx"),Re=n<0;if(this.hls.trigger(at.ERROR,{type:pr.OTHER_ERROR,details:mn.LEVEL_SWITCH_ERROR,level:n,fatal:Re,error:Me,reason:Me.message}),Re)return;n=Math.min(n,t.length-1)}const r=this.currentLevelIndex,c=this.currentLevel,g=c?c.attrs["PATHWAY-ID"]:void 0,v=t[n],x=v.attrs["PATHWAY-ID"];if(this.currentLevelIndex=n,this.currentLevel=v,r===n&&v.details&&c&&g===x)return;this.log(`Switching to level ${n}${x?" with Pathway "+x:""} from level ${r}${g?" with Pathway "+g:""}`);const Y=Gi({},v,{level:n,maxBitrate:v.maxBitrate,attrs:v.attrs,uri:v.uri,urlId:v.urlId});delete Y._attrs,delete Y._urlId,this.hls.trigger(at.LEVEL_SWITCHING,Y);const ie=v.details;if(!ie||ie.live){const Me=this.switchParams(v.uri,null==c?void 0:c.details);this.loadPlaylist(Me)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(n){this.manualLevelIndex=n,void 0===this._startLevel&&(this._startLevel=n),-1!==n&&(this.level=n)}get firstLevel(){return this._firstLevel}set firstLevel(n){this._firstLevel=n}get startLevel(){if(void 0===this._startLevel){const n=this.hls.config.startLevel;return void 0!==n?n:this._firstLevel}return this._startLevel}set startLevel(n){this._startLevel=n}onError(n,t){t.fatal||!t.context||"level"===t.context.type&&t.context.level===this.level&&this.checkRetry(t)}onFragLoaded(n,{frag:t}){if(void 0!==t&&"main"===t.type){const r=this._levels[t.level];void 0!==r&&(r.loadError=0)}}onLevelLoaded(n,t){var r;const{level:c,details:g}=t,v=this._levels[c];var x;if(!v)return this.warn(`Invalid level index ${c}`),void(null!=(x=t.deliveryDirectives)&&x.skip&&(g.deltaUpdateFailed=!0));c===this.currentLevelIndex?(0===v.fragmentError&&(v.loadError=0),this.playlistLoaded(c,t,v.details)):null!=(r=t.deliveryDirectives)&&r.skip&&(g.deltaUpdateFailed=!0)}onAudioTrackSwitched(n,t){const r=this.currentLevel;if(!r)return;const c=this.hls.audioTracks[t.id].groupId;if(r.audioGroupIds&&r.audioGroupId!==c){let g=-1;for(let v=0;v<r.audioGroupIds.length;v++)if(r.audioGroupIds[v]===c){g=v;break}-1!==g&&g!==r.urlId&&(r.urlId=g,this.canLoad&&this.startLoad())}}loadPlaylist(n){super.loadPlaylist();const t=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){const c=r.urlId;let g=r.uri;if(n)try{g=n.addDirectives(g)}catch(x){this.warn(`Could not construct new URL with HLS Delivery Directives: ${x}`)}const v=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${void 0!==(null==n?void 0:n.msn)?" at sn "+n.msn+" part "+n.part:""} with${v?" Pathway "+v:""} URI ${c+1}/${r.url.length} ${g}`),this.clearTimer(),this.hls.trigger(at.LEVEL_LOADING,{url:g,level:t,id:c,deliveryDirectives:n||null})}}get nextLoadLevel(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(n){this.level=n,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=n)}removeLevel(n,t){const r=(g,v)=>v!==t,c=this._levels.filter((g,v)=>v!==n||(g.url.length>1&&void 0!==t?(g.url=g.url.filter(r),g.audioGroupIds&&(g.audioGroupIds=g.audioGroupIds.filter(r)),g.textGroupIds&&(g.textGroupIds=g.textGroupIds.filter(r)),g.urlId=0,!0):(this.steering&&this.steering.removeLevel(g),!1)));this.hls.trigger(at.LEVELS_UPDATED,{levels:c})}onLevelsUpdated(n,{levels:t}){t.forEach((r,c)=>{const{details:g}=r;null!=g&&g.fragments&&g.fragments.forEach(v=>{v.level=c})}),this._levels=t}}function mc(f,n,t){!t||("audio"===n?(f.audioGroupIds||(f.audioGroupIds=[]),f.audioGroupIds[f.url.length-1]=t):"text"===n&&(f.textGroupIds||(f.textGroupIds=[]),f.textGroupIds[f.url.length-1]=t))}function Mu(f){const n={};f.forEach(t=>{const r=t.groupId||"";t.id=n[r]=n[r]||0,n[r]++})}class dm{constructor(n){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=n,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(at.BUFFER_APPENDED,this.onBufferAppended,this),n.on(at.FRAG_BUFFERED,this.onFragBuffered,this),n.on(at.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.BUFFER_APPENDED,this.onBufferAppended,this),n.off(at.FRAG_BUFFERED,this.onFragBuffered,this),n.off(at.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(n,t){const r=this.activePartLists[t];if(r)for(let c=r.length;c--;){const g=r[c];if(!g)break;const v=g.end;if(g.start<=n&&null!==v&&n<=v)return g}return this.getBufferedFrag(n,t)}getBufferedFrag(n,t){const{fragments:r}=this,c=Object.keys(r);for(let g=c.length;g--;){const v=r[c[g]];if((null==v?void 0:v.body.type)===t&&v.buffered){const x=v.body;if(x.start<=n&&n<=x.end)return x}}return null}detectEvictedFragments(n,t,r,c){this.timeRanges&&(this.timeRanges[n]=t);const g=(null==c?void 0:c.fragment.sn)||-1;Object.keys(this.fragments).forEach(v=>{const x=this.fragments[v];if(!x||g>=x.body.sn)return;if(!x.buffered&&!x.loaded)return void(x.body.type===r&&this.removeFragment(x.body));const Y=x.range[n];!Y||Y.time.some(ie=>{const Me=!this.isTimeBuffered(ie.startPTS,ie.endPTS,t);return Me&&this.removeFragment(x.body),Me})})}detectPartialFragments(n){const t=this.timeRanges,{frag:r,part:c}=n;if(!t||"initSegment"===r.sn)return;const g=Ya(r),v=this.fragments[g];if(!v)return;const x=!r.relurl;Object.keys(t).forEach(Y=>{const ie=r.elementaryStreams[Y];ie&&(v.range[Y]=this.getBufferedTimes(r,c,x||!0===ie.partial,t[Y]))}),v.loaded=null,Object.keys(v.range).length?(v.buffered=!0,v.body.endList&&(this.endListFragments[v.body.type]=v),Wa(v)||this.removeParts(r.sn-1,r.type)):this.removeFragment(v.body)}removeParts(n,t){const r=this.activePartLists[t];!r||(this.activePartLists[t]=r.filter(c=>c.fragment.sn>=n))}fragBuffered(n,t){const r=Ya(n);let c=this.fragments[r];!c&&t&&(c=this.fragments[r]={body:n,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},n.gap&&(this.hasGaps=!0)),c&&(c.loaded=null,c.buffered=!0)}getBufferedTimes(n,t,r,c){const g={time:[],partial:r},v=n.start,x=n.end,Y=n.minEndPTS||x,ie=n.maxStartPTS||v;for(let Me=0;Me<c.length;Me++){const Re=c.start(Me)-this.bufferPadding,$e=c.end(Me)+this.bufferPadding;if(ie>=Re&&Y<=$e){g.time.push({startPTS:Math.max(v,c.start(Me)),endPTS:Math.min(x,c.end(Me))});break}if(v<$e&&x>Re)g.partial=!0,g.time.push({startPTS:Math.max(v,c.start(Me)),endPTS:Math.min(x,c.end(Me))});else if(x<=Re)break}return g}getPartialFragment(n){let r,c,g,t=null,v=0;const{bufferPadding:x,fragments:Y}=this;return Object.keys(Y).forEach(ie=>{const Me=Y[ie];!Me||Wa(Me)&&(c=Me.body.start-x,g=Me.body.end+x,n>=c&&n<=g&&(r=Math.min(n-c,g-n),v<=r&&(t=Me.body,v=r)))}),t}isEndListAppended(n){const t=this.endListFragments[n];return void 0!==t&&(t.buffered||Wa(t))}getState(n){const t=Ya(n),r=this.fragments[t];return r?r.buffered?Wa(r)?"PARTIAL":"OK":"APPENDING":"NOT_LOADED"}isTimeBuffered(n,t,r){let c,g;for(let v=0;v<r.length;v++){if(c=r.start(v)-this.bufferPadding,g=r.end(v)+this.bufferPadding,n>=c&&t<=g)return!0;if(t<=c)return!1}return!1}onFragLoaded(n,t){const{frag:r,part:c}=t;if("initSegment"===r.sn||r.bitrateTest)return;const g=c?null:t,v=Ya(r);this.fragments[v]={body:r,appendedPTS:null,loaded:g,buffered:!1,range:Object.create(null)}}onBufferAppended(n,t){const{frag:r,part:c,timeRanges:g}=t;if("initSegment"===r.sn)return;const v=r.type;if(c){let x=this.activePartLists[v];x||(this.activePartLists[v]=x=[]),x.push(c)}this.timeRanges=g,Object.keys(g).forEach(x=>{this.detectEvictedFragments(x,g[x],v,c)})}onFragBuffered(n,t){this.detectPartialFragments(t)}hasFragment(n){const t=Ya(n);return!!this.fragments[t]}hasParts(n){var t;return!(null==(t=this.activePartLists[n])||!t.length)}removeFragmentsInRange(n,t,r,c,g){c&&!this.hasGaps||Object.keys(this.fragments).forEach(v=>{const x=this.fragments[v];if(!x)return;const Y=x.body;Y.type!==r||c&&!Y.gap||Y.start<t&&Y.end>n&&(x.buffered||g)&&this.removeFragment(Y)})}removeFragment(n){const t=Ya(n);n.stats.loaded=0,n.clearElementaryStreamInfo();const r=this.activePartLists[n.type];if(r){const c=n.sn;this.activePartLists[n.type]=r.filter(g=>g.fragment.sn!==c)}delete this.fragments[t],n.endList&&delete this.endListFragments[n.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function Wa(f){var n,t,r;return f.buffered&&(f.body.gap||(null==(n=f.range.video)?void 0:n.partial)||(null==(t=f.range.audio)?void 0:t.partial)||(null==(r=f.range.audiovideo)?void 0:r.partial))}function Ya(f){return`${f.type}_${f.level}_${f.urlId}_${f.sn}`}const Du=Math.pow(2,17);class N{constructor(n){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=n}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(n,t){const r=n.url;if(!r)return Promise.reject(new J({type:pr.NETWORK_ERROR,details:mn.FRAG_LOAD_ERROR,fatal:!1,frag:n,error:new Error("Fragment does not have a "+(r?"part list":"url")),networkDetails:null}));this.abort();const c=this.config,g=c.fLoader,v=c.loader;return new Promise((x,Y)=>{if(this.loader&&this.loader.destroy(),n.gap)return void Y(T(n));const ie=this.loader=n.loader=g?new g(c):new v(c),Me=Z(n),Re=bu(c.fragLoadPolicy.default),$e={loadPolicy:Re,timeout:Re.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===n.sn?1/0:Du};n.stats=ie.stats,ie.load(Me,$e,{onSuccess:(qe,ot,gt,Tt)=>{this.resetLoader(n,ie);let $t=qe.data;gt.resetIV&&n.decryptdata&&(n.decryptdata.iv=new Uint8Array($t.slice(0,16)),$t=$t.slice(16)),x({frag:n,part:null,payload:$t,networkDetails:Tt})},onError:(qe,ot,gt,Tt)=>{this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.FRAG_LOAD_ERROR,fatal:!1,frag:n,response:Li({url:r,data:void 0},qe),error:new Error(`HTTP Error ${qe.code} ${qe.text}`),networkDetails:gt,stats:Tt}))},onAbort:(qe,ot,gt)=>{this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.INTERNAL_ABORTED,fatal:!1,frag:n,error:new Error("Aborted"),networkDetails:gt,stats:qe}))},onTimeout:(qe,ot,gt)=>{this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,error:new Error(`Timeout after ${$e.timeout}ms`),networkDetails:gt,stats:qe}))},onProgress:(qe,ot,gt,Tt)=>{t&&t({frag:n,part:null,payload:gt,networkDetails:Tt})}})})}loadPart(n,t,r){this.abort();const c=this.config,g=c.fLoader,v=c.loader;return new Promise((x,Y)=>{if(this.loader&&this.loader.destroy(),n.gap||t.gap)return void Y(T(n,t));const ie=this.loader=n.loader=g?new g(c):new v(c),Me=Z(n,t),Re=bu(c.fragLoadPolicy.default),$e={loadPolicy:Re,timeout:Re.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:Du};t.stats=ie.stats,ie.load(Me,$e,{onSuccess:(qe,ot,gt,Tt)=>{this.resetLoader(n,ie),this.updateStatsFromPart(n,t);const $t={frag:n,part:t,payload:qe.data,networkDetails:Tt};r($t),x($t)},onError:(qe,ot,gt,Tt)=>{this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.FRAG_LOAD_ERROR,fatal:!1,frag:n,part:t,response:Li({url:Me.url,data:void 0},qe),error:new Error(`HTTP Error ${qe.code} ${qe.text}`),networkDetails:gt,stats:Tt}))},onAbort:(qe,ot,gt)=>{n.stats.aborted=t.stats.aborted,this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.INTERNAL_ABORTED,fatal:!1,frag:n,part:t,error:new Error("Aborted"),networkDetails:gt,stats:qe}))},onTimeout:(qe,ot,gt)=>{this.resetLoader(n,ie),Y(new J({type:pr.NETWORK_ERROR,details:mn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:n,part:t,error:new Error(`Timeout after ${$e.timeout}ms`),networkDetails:gt,stats:qe}))}})})}updateStatsFromPart(n,t){const r=n.stats,c=t.stats,g=c.total;if(r.loaded+=c.loaded,g){const Y=Math.round(n.duration/t.duration),ie=Math.min(Math.round(r.loaded/g),Y),Re=(Y-ie)*Math.round(r.loaded/ie);r.total=r.loaded+Re}else r.total=Math.max(r.loaded,r.total);const v=r.loading,x=c.loading;v.start?v.first+=x.first-x.start:(v.start=x.start,v.first=x.first),v.end=x.end}resetLoader(n,t){n.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function Z(f,n=null){const t=n||f,r={frag:f,part:n,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},c=t.byteRangeStartOffset,g=t.byteRangeEndOffset;if(cr(c)&&cr(g)){var v;let x=c,Y=g;if("initSegment"===f.sn&&"AES-128"===(null==(v=f.decryptdata)?void 0:v.method)){const ie=g-c;ie%16&&(Y=g+(16-ie%16)),0!==c&&(r.resetIV=!0,x=c-16)}r.rangeStart=x,r.rangeEnd=Y}return r}function T(f,n){const t=new Error(`GAP ${f.gap?"tag":"attribute"} found`),r={type:pr.MEDIA_ERROR,details:mn.FRAG_GAP,fatal:!1,frag:f,error:t,networkDetails:null};return n&&(r.part=n),(n||f).stats.aborted=!0,new J(r)}class J extends Error{constructor(n){super(n.error.message),this.data=void 0,this.data=n}}class Ee{constructor(n){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=n}abort(n){for(const t in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[t].loader;if(r){if(n&&n!==r.context.frag.type)return;r.abort()}}}detach(){for(const n in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[n];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[n]}}destroy(){this.detach();for(const n in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[n].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(n,t=mn.KEY_LOAD_ERROR,r,c,g){return new J({type:pr.NETWORK_ERROR,details:t,fatal:!1,frag:n,response:g,error:r,networkDetails:c})}loadClear(n,t){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:c}=n;for(let g=0;g<t.length;g++){const v=t[g];if(c<=v.cc&&("initSegment"===r||"initSegment"===v.sn||r<v.sn)){this.emeController.selectKeySystemFormat(v).then(x=>{v.setKeyFormat(x)});break}}}}load(n){return!n.decryptdata&&n.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(n).then(t=>this.loadInternal(n,t)):this.loadInternal(n)}loadInternal(n,t){var r,c;t&&n.setKeyFormat(t);const g=n.decryptdata;if(!g){const ie=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(n,mn.KEY_LOAD_ERROR,ie))}const v=g.uri;if(!v)return Promise.reject(this.createKeyLoadError(n,mn.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${v}"`)));let x=this.keyUriToKeyInfo[v];if(null!=(r=x)&&r.decryptdata.key)return g.key=x.decryptdata.key,Promise.resolve({frag:n,keyInfo:x});var Y;if(null!=(c=x)&&c.keyLoadPromise)switch(null==(Y=x.mediaKeySessionContext)?void 0:Y.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return x.keyLoadPromise.then(ie=>(g.key=ie.keyInfo.decryptdata.key,{frag:n,keyInfo:x}))}switch(x=this.keyUriToKeyInfo[v]={decryptdata:g,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},g.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===g.keyFormat?this.loadKeyHTTP(x,n):this.loadKeyEME(x,n);case"AES-128":return this.loadKeyHTTP(x,n);default:return Promise.reject(this.createKeyLoadError(n,mn.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${g.method}"`)))}}loadKeyEME(n,t){const r={frag:t,keyInfo:n};if(this.emeController&&this.config.emeEnabled){const c=this.emeController.loadKey(r);if(c)return(n.keyLoadPromise=c.then(g=>(n.mediaKeySessionContext=g,r))).catch(g=>{throw n.keyLoadPromise=null,g})}return Promise.resolve(r)}loadKeyHTTP(n,t){const r=this.config,g=new(0,r.loader)(r);return t.keyLoader=n.loader=g,n.keyLoadPromise=new Promise((v,x)=>{const Y={keyInfo:n,frag:t,responseType:"arraybuffer",url:n.decryptdata.uri},ie=r.keyLoadPolicy.default;g.load(Y,{loadPolicy:ie,timeout:ie.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:($e,qe,ot,gt)=>{const{frag:Tt,keyInfo:$t,url:rn}=ot;if(!Tt.decryptdata||$t!==this.keyUriToKeyInfo[rn])return x(this.createKeyLoadError(Tt,mn.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),gt));$t.decryptdata.key=Tt.decryptdata.key=new Uint8Array($e.data),Tt.keyLoader=null,$t.loader=null,v({frag:Tt,keyInfo:$t})},onError:($e,qe,ot,gt)=>{this.resetLoader(qe),x(this.createKeyLoadError(t,mn.KEY_LOAD_ERROR,new Error(`HTTP Error ${$e.code} loading key ${$e.text}`),ot,Li({url:Y.url,data:void 0},$e)))},onTimeout:($e,qe,ot)=>{this.resetLoader(qe),x(this.createKeyLoadError(t,mn.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),ot))},onAbort:($e,qe,ot)=>{this.resetLoader(qe),x(this.createKeyLoadError(t,mn.INTERNAL_ABORTED,new Error("key loading aborted"),ot))}})})}resetLoader(n){const{frag:t,keyInfo:r,url:c}=n,g=r.loader;t.keyLoader===g&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[c],g&&g.destroy()}}const Mt={length:0,start:()=>0,end:()=>0};class Lt{static isBuffered(n,t){try{if(n){const r=Lt.getBuffered(n);for(let c=0;c<r.length;c++)if(t>=r.start(c)&&t<=r.end(c))return!0}}catch(r){}return!1}static bufferInfo(n,t,r){try{if(n){const c=Lt.getBuffered(n),g=[];let v;for(v=0;v<c.length;v++)g.push({start:c.start(v),end:c.end(v)});return this.bufferedInfo(g,t,r)}}catch(c){}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(n,t,r){t=Math.max(0,t),n.sort(function(ie,Me){return ie.start-Me.start||Me.end-ie.end});let c=[];if(r)for(let ie=0;ie<n.length;ie++){const Me=c.length;if(Me){const Re=c[Me-1].end;n[ie].start-Re<r?n[ie].end>Re&&(c[Me-1].end=n[ie].end):c.push(n[ie])}else c.push(n[ie])}else c=n;let v,g=0,x=t,Y=t;for(let ie=0;ie<c.length;ie++){const Me=c[ie].start,Re=c[ie].end;if(t+r>=Me&&t<Re)x=Me,Y=Re,g=Y-t;else if(t+r<Me){v=Me;break}}return{len:g,start:x||0,end:Y||0,nextStart:v}}static getBuffered(n){try{return n.buffered}catch(t){return Qt.log("failed to get media.buffered",t),Mt}}}class Ht{constructor(n,t,r,c=0,g=-1,v=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=n,this.sn=t,this.id=r,this.size=c,this.part=g,this.partial=v}}function En(f,n){let t=null;for(let r=0,c=f.length;r<c;r++){const g=f[r];if(g&&g.cc===n){t=g;break}}return t}function In(f,n){if(f){const t=f.start+n;f.start=f.startPTS=t,f.endPTS=t+f.duration}}function Ar(f,n){const t=n.fragments;for(let r=0,c=t.length;r<c;r++)In(t[r],f);n.fragmentHint&&In(n.fragmentHint,f),n.alignedSliding=!0}function vr(f,n){if(!f.hasProgramDateTime||!n.hasProgramDateTime)return;const t=f.fragments,r=n.fragments;if(!t.length||!r.length)return;const g=r[Math.round(r.length/2)-1],v=En(t,g.cc)||t[Math.round(t.length/2)-1],x=g.programDateTime,Y=v.programDateTime;null!==x&&null!==Y&&Ar((Y-x)/1e3-(v.start-g.start),f)}class li{constructor(n,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=n,this.aesIV=t}decrypt(n,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,n)}}class Rr{constructor(n,t){this.subtle=void 0,this.key=void 0,this.subtle=n,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}class Nr{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(n){const t=new DataView(n),r=new Uint32Array(4);for(let c=0;c<4;c++)r[c]=t.getUint32(4*c);return r}initTable(){const n=this.sBox,t=this.invSBox,r=this.subMix,c=r[0],g=r[1],v=r[2],x=r[3],Y=this.invSubMix,ie=Y[0],Me=Y[1],Re=Y[2],$e=Y[3],qe=new Uint32Array(256);let ot=0,gt=0,Tt=0;for(Tt=0;Tt<256;Tt++)qe[Tt]=Tt<128?Tt<<1:Tt<<1^283;for(Tt=0;Tt<256;Tt++){let $t=gt^gt<<1^gt<<2^gt<<3^gt<<4;$t=$t>>>8^255&$t^99,n[ot]=$t,t[$t]=ot;const rn=qe[ot],nn=qe[rn],Sn=qe[nn];let gn=257*qe[$t]^16843008*$t;c[ot]=gn<<24|gn>>>8,g[ot]=gn<<16|gn>>>16,v[ot]=gn<<8|gn>>>24,x[ot]=gn,gn=16843009*Sn^65537*nn^257*rn^16843008*ot,ie[$t]=gn<<24|gn>>>8,Me[$t]=gn<<16|gn>>>16,Re[$t]=gn<<8|gn>>>24,$e[$t]=gn,ot?(ot=rn^qe[qe[qe[Sn^rn]]],gt^=qe[qe[gt]]):ot=gt=1}}expandKey(n){const t=this.uint8ArrayToUint32Array_(n);let r=!0,c=0;for(;c<t.length&&r;)r=t[c]===this.key[c],c++;if(r)return;this.key=t;const g=this.keySize=t.length;if(4!==g&&6!==g&&8!==g)throw new Error("Invalid aes key size="+g);const v=this.ksRows=4*(g+6+1);let x,Y;const ie=this.keySchedule=new Uint32Array(v),Me=this.invKeySchedule=new Uint32Array(v),Re=this.sBox,$e=this.rcon,qe=this.invSubMix,ot=qe[0],gt=qe[1],Tt=qe[2],$t=qe[3];let rn,nn;for(x=0;x<v;x++)x<g?rn=ie[x]=t[x]:(nn=rn,x%g==0?(nn=nn<<8|nn>>>24,nn=Re[nn>>>24]<<24|Re[nn>>>16&255]<<16|Re[nn>>>8&255]<<8|Re[255&nn],nn^=$e[x/g|0]<<24):g>6&&x%g==4&&(nn=Re[nn>>>24]<<24|Re[nn>>>16&255]<<16|Re[nn>>>8&255]<<8|Re[255&nn]),ie[x]=rn=(ie[x-g]^nn)>>>0);for(Y=0;Y<v;Y++)x=v-Y,nn=3&Y?ie[x]:ie[x-4],Me[Y]=Y<4||x<=4?nn:ot[Re[nn>>>24]]^gt[Re[nn>>>16&255]]^Tt[Re[nn>>>8&255]]^$t[Re[255&nn]],Me[Y]=Me[Y]>>>0}networkToHostOrderSwap(n){return n<<24|(65280&n)<<8|(16711680&n)>>8|n>>>24}decrypt(n,t,r){const c=this.keySize+6,g=this.invKeySchedule,v=this.invSBox,x=this.invSubMix,Y=x[0],ie=x[1],Me=x[2],Re=x[3],$e=this.uint8ArrayToUint32Array_(r);let qe=$e[0],ot=$e[1],gt=$e[2],Tt=$e[3];const $t=new Int32Array(n),rn=new Int32Array($t.length);let nn,Sn,gn,Bn,On,Zn,Jn,Dn,_r,nr,ci,Ki,Ci,Ai;const Ti=this.networkToHostOrderSwap;for(;t<$t.length;){for(_r=Ti($t[t]),nr=Ti($t[t+1]),ci=Ti($t[t+2]),Ki=Ti($t[t+3]),On=_r^g[0],Zn=Ki^g[1],Jn=ci^g[2],Dn=nr^g[3],Ci=4,Ai=1;Ai<c;Ai++)nn=Y[On>>>24]^ie[Zn>>16&255]^Me[Jn>>8&255]^Re[255&Dn]^g[Ci],Sn=Y[Zn>>>24]^ie[Jn>>16&255]^Me[Dn>>8&255]^Re[255&On]^g[Ci+1],gn=Y[Jn>>>24]^ie[Dn>>16&255]^Me[On>>8&255]^Re[255&Zn]^g[Ci+2],Bn=Y[Dn>>>24]^ie[On>>16&255]^Me[Zn>>8&255]^Re[255&Jn]^g[Ci+3],On=nn,Zn=Sn,Jn=gn,Dn=Bn,Ci+=4;nn=v[On>>>24]<<24^v[Zn>>16&255]<<16^v[Jn>>8&255]<<8^v[255&Dn]^g[Ci],Sn=v[Zn>>>24]<<24^v[Jn>>16&255]<<16^v[Dn>>8&255]<<8^v[255&On]^g[Ci+1],gn=v[Jn>>>24]<<24^v[Dn>>16&255]<<16^v[On>>8&255]<<8^v[255&Zn]^g[Ci+2],Bn=v[Dn>>>24]<<24^v[On>>16&255]<<16^v[Zn>>8&255]<<8^v[255&Jn]^g[Ci+3],rn[t]=Ti(nn^qe),rn[t+1]=Ti(Bn^ot),rn[t+2]=Ti(gn^gt),rn[t+3]=Ti(Sn^Tt),qe=_r,ot=nr,gt=ci,Tt=Ki,t+=4}return rn.buffer}}class Xr{constructor(n,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=n.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(r){}null===this.subtle&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:n,remainderData:t}=this;if(!n||t)return this.reset(),null;const r=new Uint8Array(n);return this.reset(),this.removePKCS7Padding?function Gr(f){const n=f.byteLength,t=n&&new DataView(f.buffer).getUint8(n-1);return t?Di(f,0,n-t):f}(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(n,t,r){return this.useSoftware?new Promise((c,g)=>{this.softwareDecrypt(new Uint8Array(n),t,r);const v=this.flush();v?c(v.buffer):g(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(n),t,r)}softwareDecrypt(n,t,r){const{currentIV:c,currentResult:g,remainderData:v}=this;this.logOnce("JS AES decrypt"),v&&(n=ha(v,n),this.remainderData=null);const x=this.getValidChunk(n);if(!x.length)return null;c&&(r=c);let Y=this.softwareDecrypter;Y||(Y=this.softwareDecrypter=new Nr),Y.expandKey(t);const ie=g;return this.currentResult=Y.decrypt(x.buffer,0,r),this.currentIV=Di(x,-16).buffer,ie||null}webCryptoDecrypt(n,t,r){const c=this.subtle;return(this.key!==t||!this.fastAesKey)&&(this.key=t,this.fastAesKey=new Rr(c,t)),this.fastAesKey.expandKey().then(g=>c?(this.logOnce("WebCrypto AES decrypt"),new li(c,new Uint8Array(r)).decrypt(n.buffer,g)):Promise.reject(new Error("web crypto not initialized"))).catch(g=>(Qt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${g.name}: ${g.message}`),this.onWebCryptoError(n,t,r)))}onWebCryptoError(n,t,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(n,t,r);const c=this.flush();if(c)return c.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(n){let t=n;const r=n.length-n.length%16;return r!==n.length&&(t=Di(n,0,r),this.remainderData=Di(n,r)),t}logOnce(n){!this.logEnabled||(Qt.log(`[decrypter]: ${n}`),this.logEnabled=!1)}}class Fi extends class We{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(n){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,n),!0)}clearInterval(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)}clearNextTick(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)}tick(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}{constructor(n,t,r,c,g){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state="STOPPED",this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=g,this.logPrefix=c,this.log=Qt.log.bind(Qt,`${c}:`),this.warn=Qt.warn.bind(Qt,`${c}:`),this.hls=n,this.fragmentLoader=new N(n.config),this.keyLoader=r,this.fragmentTracker=t,this.config=n.config,this.decrypter=new Xr(n.config),n.on(at.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(n){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const n=this.fragCurrent;null!=n&&n.loader&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state="STOPPED"}_streamEnded(n,t){if(t.live||n.nextStart||!n.end||!this.media)return!1;const r=t.partList;if(null!=r&&r.length){const g=r[r.length-1];return Lt.isBuffered(this.media,g.start+g.duration/2)}return this.fragmentTracker.isEndListAppended(t.fragments[t.fragments.length-1].type)}getLevelDetails(){var n;if(this.levels&&null!==this.levelLastLoaded)return null==(n=this.levels[this.levelLastLoaded])?void 0:n.details}onMediaAttached(n,t){const r=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const c=this.config;this.levels&&c.autoStartLoad&&"STOPPED"===this.state&&this.startLoad(c.startPosition)}onMediaDetaching(){const n=this.media;null!=n&&n.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),n&&this.onvseeking&&this.onvended&&(n.removeEventListener("seeking",this.onvseeking),n.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:n,fragCurrent:t,media:r,mediaBuffer:c,state:g}=this,v=r?r.currentTime:0,x=Lt.bufferInfo(c||r,v,n.maxBufferHole);if(this.log(`media seeking to ${cr(v)?v.toFixed(3):v}, state: ${g}`),"ENDED"===this.state)this.resetLoadingState();else if(t){const Y=n.maxFragLookUpTolerance,ie=t.start-Y,Me=t.start+t.duration+Y;if(!x.len||Me<x.start||ie>x.end){const Re=v>Me;(v<ie||Re)&&(Re&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(v,1/0,this.playlistType,!0),this.lastCurrentTime=v),!this.loadedmetadata&&!x.len&&(this.nextLoadPosition=this.startPosition=v),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(n,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state="STOPPED",this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(n,t,r){this._loadFragForPlayback(n,t,r)}_loadFragForPlayback(n,t,r){this._doFragLoad(n,t,r,g=>{if(this.fragContextChanged(n))return this.warn(`Fragment ${n.sn}${g.part?" p: "+g.part.index:""} of level ${n.level} was dropped during download.`),void this.fragmentTracker.removeFragment(n);n.stats.chunkCount++,this._handleFragmentLoadProgress(g)}).then(g=>{if(!g)return;const v=this.state;this.fragContextChanged(n)?("FRAG_LOADING"===v||!this.fragCurrent&&"PARSING"===v)&&(this.fragmentTracker.removeFragment(n),this.state="IDLE"):("payload"in g&&(this.log(`Loaded fragment ${n.sn} of level ${n.level}`),this.hls.trigger(at.FRAG_LOADED,g)),this._handleFragmentLoadComplete(g))}).catch(g=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(g),this.resetFragmentLoading(n))})}clearTrackerIfNeeded(n){var t;const{fragmentTracker:r}=this;if("APPENDING"===r.getState(n)){const v=this.getFwdBufferInfo(this.mediaBuffer,n.type),x=Math.max(n.duration,v?v.len:this.config.maxBufferLength);this.reduceMaxBufferLength(x)&&r.removeFragment(n)}else 0===(null==(t=this.mediaBuffer)?void 0:t.buffered.length)?r.removeAllFragments():r.hasParts(n.type)&&(r.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type}),"PARTIAL"===r.getState(n)&&r.removeFragment(n))}flushMainBuffer(n,t,r=null){n-t&&this.hls.trigger(at.BUFFER_FLUSHING,{startOffset:n,endOffset:t,type:r})}_loadInitSegment(n,t){this._doFragLoad(n,t).then(r=>{if(!r||this.fragContextChanged(n)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:c}=this,{payload:g}=r,v=n.decryptdata;if(g&&g.byteLength>0&&v&&v.key&&v.iv&&"AES-128"===v.method){const x=self.performance.now();return this.decrypter.decrypt(new Uint8Array(g),v.key.buffer,v.iv.buffer).catch(Y=>{throw c.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_DECRYPT_ERROR,fatal:!1,error:Y,reason:Y.message,frag:n}),Y}).then(Y=>{const ie=self.performance.now();return c.trigger(at.FRAG_DECRYPTED,{frag:n,payload:Y,stats:{tstart:x,tdecrypt:ie}}),r.payload=Y,r})}return r}).then(r=>{const{fragCurrent:c,hls:g,levels:v}=this;if(!v)throw new Error("init load aborted, missing levels");const x=n.stats;this.state="IDLE",t.fragmentError=0,n.data=new Uint8Array(r.payload),x.parsing.start=x.buffering.start=self.performance.now(),x.parsing.end=x.buffering.end=self.performance.now(),r.frag===c&&g.trigger(at.FRAG_BUFFERED,{stats:x,frag:c,part:null,id:n.type}),this.tick()}).catch(r=>{"STOPPED"===this.state||"ERROR"===this.state||(this.warn(r),this.resetFragmentLoading(n))})}fragContextChanged(n){const{fragCurrent:t}=this;return!n||!t||n.level!==t.level||n.sn!==t.sn||n.urlId!==t.urlId}fragBufferedComplete(n,t){var r,c,g,v;const x=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${n.type} sn: ${n.sn}${t?" part: "+t.index:""} of ${"main"===this.playlistType?"level":"track"} ${n.level} (frag:[${(null!=(r=n.startPTS)?r:NaN).toFixed(3)}-${(null!=(c=n.endPTS)?c:NaN).toFixed(3)}] > buffer:${x?function(f){let n="";const t=f.length;for(let r=0;r<t;r++)n+=`[${f.start(r).toFixed(3)}-${f.end(r).toFixed(3)}]`;return n}(Lt.getBuffered(x)):"(detached)"})`),this.state="IDLE",x&&(!this.loadedmetadata&&"main"==n.type&&x.buffered.length&&(null==(g=this.fragCurrent)?void 0:g.sn)===(null==(v=this.fragPrevious)?void 0:v.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(n){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:c,partsLoaded:g}=n,v=!g||0===g.length||g.some(Y=>!Y),x=new Ht(r.level,r.sn,r.stats.chunkCount+1,0,c?c.index:-1,!v);t.flush(x)}_handleFragmentLoadProgress(n){}_doFragLoad(n,t,r=null,c){var g;const v=null==t?void 0:t.details;if(!this.levels||!v)throw new Error(`frag load aborted, missing level${v?"":" detail"}s`);let x=null;if(!n.encrypted||null!=(g=n.decryptdata)&&g.key?!n.encrypted&&v.encryptedFragments.length&&this.keyLoader.loadClear(n,v.encryptedFragments):(this.log(`Loading key for ${n.sn} of [${v.startSN}-${v.endSN}], ${"[stream-controller]"===this.logPrefix?"level":"track"} ${n.level}`),this.state="KEY_LOADING",this.fragCurrent=n,x=this.keyLoader.load(n).then(Me=>{if(!this.fragContextChanged(Me.frag))return this.hls.trigger(at.KEY_LOADED,Me),"KEY_LOADING"===this.state&&(this.state="IDLE"),Me}),this.hls.trigger(at.KEY_LOADING,{frag:n}),null===this.fragCurrent&&(x=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(n.start,r||0),this.config.lowLatencyMode&&"initSegment"!==n.sn){const Me=v.partList;if(Me&&c){r>n.end&&v.fragmentHint&&(n=v.fragmentHint);const Re=this.getNextPart(Me,n,r);if(Re>-1){const $e=Me[Re];let qe;return this.log(`Loading part sn: ${n.sn} p: ${$e.index} cc: ${n.cc} of playlist [${v.startSN}-${v.endSN}] parts [0-${Re}-${Me.length-1}] ${"[stream-controller]"===this.logPrefix?"level":"track"}: ${n.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=$e.start+$e.duration,this.state="FRAG_LOADING",qe=x?x.then(ot=>!ot||this.fragContextChanged(ot.frag)?null:this.doFragPartsLoad(n,$e,t,c)).catch(ot=>this.handleFragLoadError(ot)):this.doFragPartsLoad(n,$e,t,c).catch(ot=>this.handleFragLoadError(ot)),this.hls.trigger(at.FRAG_LOADING,{frag:n,part:$e,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):qe}if(!n.url||this.loadedEndOfParts(Me,r))return Promise.resolve(null)}}this.log(`Loading fragment ${n.sn} cc: ${n.cc} ${v?"of ["+v.startSN+"-"+v.endSN+"] ":""}${"[stream-controller]"===this.logPrefix?"level":"track"}: ${n.level}, target: ${parseFloat(r.toFixed(3))}`),cr(n.sn)&&!this.bitrateTest&&(this.nextLoadPosition=n.start+n.duration),this.state="FRAG_LOADING";const Y=this.config.progressive;let ie;return ie=Y&&x?x.then(Me=>!Me||this.fragContextChanged(null==Me?void 0:Me.frag)?null:this.fragmentLoader.load(n,c)).catch(Me=>this.handleFragLoadError(Me)):Promise.all([this.fragmentLoader.load(n,Y?c:void 0),x]).then(([Me])=>(!Y&&Me&&c&&c(Me),Me)).catch(Me=>this.handleFragLoadError(Me)),this.hls.trigger(at.FRAG_LOADING,{frag:n,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):ie}doFragPartsLoad(n,t,r,c){return new Promise((g,v)=>{var x;const Y=[],ie=null==(x=r.details)?void 0:x.partList,Me=Re=>{this.fragmentLoader.loadPart(n,Re,c).then($e=>{Y[Re.index]=$e;const qe=$e.part;this.hls.trigger(at.FRAG_LOADED,$e);const ot=ma(r,n.sn,Re.index+1)||Sd(ie,n.sn,Re.index+1);if(!ot)return g({frag:n,part:qe,partsLoaded:Y});Me(ot)}).catch(v)};Me(t)})}handleFragLoadError(n){if("data"in n){const t=n.data;n.data&&t.details===mn.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(at.ERROR,t)}else this.hls.trigger(at.ERROR,{type:pr.OTHER_ERROR,details:mn.INTERNAL_EXCEPTION,err:n,error:n,fatal:!0});return null}_handleTransmuxerFlush(n){const t=this.getCurrentContext(n);if(!t||"PARSING"!==this.state)return void(!this.fragCurrent&&"STOPPED"!==this.state&&"ERROR"!==this.state&&(this.state="IDLE"));const{frag:r,part:c,level:g}=t,v=self.performance.now();r.stats.parsing.end=v,c&&(c.stats.parsing.end=v),this.updateLevelTiming(r,c,g,n.partial)}getCurrentContext(n){const{levels:t,fragCurrent:r}=this,{level:c,sn:g,part:v}=n;if(null==t||!t[c])return this.warn(`Levels object was unset while buffering fragment ${g} of level ${c}. The current chunk will not be buffered.`),null;const x=t[c],Y=v>-1?ma(x,g,v):null,ie=Y?Y.fragment:function Cd(f,n,t){if(null==f||!f.details)return null;const r=f.details;let c=r.fragments[n-r.startSN];return c||(c=r.fragmentHint,c&&c.sn===n)?c:n<r.startSN&&t&&t.sn===n?t:null}(x,g,r);return ie?(r&&r!==ie&&(ie.stats=r.stats),{frag:ie,part:Y,level:x}):null}bufferFragmentData(n,t,r,c){var g;if(!n||"PARSING"!==this.state)return;const{data1:v,data2:x}=n;let Y=v;v&&x&&(Y=ha(v,x)),null!=(g=Y)&&g.length&&(this.hls.trigger(at.BUFFER_APPENDING,{type:n.type,frag:t,part:r,chunkMeta:c,parent:t.type,data:Y}),n.dropped&&n.independent&&!r&&this.flushBufferGap(t))}flushBufferGap(n){const t=this.media;if(!t)return;if(!Lt.isBuffered(t,t.currentTime))return void this.flushMainBuffer(0,n.start);const r=t.currentTime,c=Lt.bufferInfo(t,r,0),v=Math.min(2*this.config.maxFragLookUpTolerance,.25*n.duration),x=Math.max(Math.min(n.start-v,c.end-v),r+v);n.start-x>v&&this.flushMainBuffer(x,n.start)}getFwdBufferInfo(n,t){const r=this.getLoadPosition();return cr(r)?this.getFwdBufferInfoAtPos(n,r,t):null}getFwdBufferInfoAtPos(n,t,r){const{config:{maxBufferHole:c}}=this,g=Lt.bufferInfo(n,t,c);if(0===g.len&&void 0!==g.nextStart){const v=this.fragmentTracker.getBufferedFrag(t,r);if(v&&g.nextStart<v.end)return Lt.bufferInfo(n,t,Math.max(g.nextStart,c))}return g}getMaxBufferLength(n){const{config:t}=this;let r;return r=n?Math.max(8*t.maxBufferSize/n,t.maxBufferLength):t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(n){const t=this.config;return t.maxMaxBufferLength>=(n||t.maxBufferLength)&&(t.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${t.maxMaxBufferLength}s`),!0)}getAppendedFrag(n,t="main"){const r=this.fragmentTracker.getAppendedFrag(n,"main");return r&&"fragment"in r?r.fragment:r}getNextFragment(n,t){const r=t.fragments,c=r.length;if(!c)return null;const{config:g}=this,v=r[0].start;let x;if(t.live){const Y=g.initialLiveManifestSize;if(c<Y)return this.warn(`Not enough fragments to start playback (have: ${c}, need: ${Y})`),null;!t.PTSKnown&&!this.startFragRequested&&-1===this.startPosition&&(x=this.getInitialLiveFragment(t,r),this.startPosition=x?this.hls.liveSyncPosition||x.start:n)}else n<=v&&(x=r[0]);return x||(x=this.getFragmentAtPosition(n,g.lowLatencyMode?t.partEnd:t.fragmentEnd,t)),this.mapToInitFragWhenRequired(x)}isLoopLoading(n,t){const r=this.fragmentTracker.getState(n);return("OK"===r||"PARTIAL"===r&&!!n.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(n,t,r,c,g){const v=n.gap,x=this.getNextFragment(this.nextLoadPosition,t);if(null===x)return x;if(n=x,v&&n&&!n.gap&&r.nextStart){const Y=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,c);if(null!==Y&&r.len+Y.len>=g)return this.log(`buffer full after gaps in "${c}" playlist starting at sn: ${n.sn}`),null}return n}mapToInitFragWhenRequired(n){return null==n||!n.initSegment||null!=n&&n.initSegment.data||this.bitrateTest?n:n.initSegment}getNextPart(n,t,r){let c=-1,g=!1,v=!0;for(let x=0,Y=n.length;x<Y;x++){const ie=n[x];if(v=v&&!ie.independent,c>-1&&r<ie.start)break;const Me=ie.loaded;Me?c=-1:(g||ie.independent||v)&&ie.fragment===t&&(c=x),g=Me}return c}loadedEndOfParts(n,t){const r=n[n.length-1];return r&&t>r.start&&r.loaded}getInitialLiveFragment(n,t){const r=this.fragPrevious;let c=null;if(r){if(n.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),c=function Dd(f,n,t){if(null===n||!Array.isArray(f)||!f.length||!cr(n))return null;if(n<(f[0].programDateTime||0))return null;if(n>=(f[f.length-1].endProgramDateTime||0))return null;t=t||0;for(let g=0;g<f.length;++g){const v=f[g];if(Cu(n,t,v))return v}return null}(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!c){const g=r.sn+1;if(g>=n.startSN&&g<=n.endSN){const v=t[g-n.startSN];r.cc===v.cc&&(c=v,this.log(`Live playlist, switching playlist, load frag with next SN: ${c.sn}`))}c||(c=function zf(f,n){return Md_search(f,t=>t.cc<n?1:t.cc>n?-1:0)}(t,r.cc),c&&this.log(`Live playlist, switching playlist, load frag with same CC: ${c.sn}`))}}else{const g=this.hls.liveSyncPosition;null!==g&&(c=this.getFragmentAtPosition(g,this.bitrateTest?n.fragmentEnd:n.edge,n))}return c}getFragmentAtPosition(n,t,r){const{config:c}=this;let{fragPrevious:g}=this,{fragments:v,endSN:x}=r;const{fragmentHint:Y}=r,ie=c.maxFragLookUpTolerance,Me=r.partList,Re=!!(c.lowLatencyMode&&null!=Me&&Me.length&&Y);let $e;if(Re&&Y&&!this.bitrateTest&&(v=v.concat(Y),x=Y.sn),$e=n<t?Il(g,v,n,n>t-ie?0:ie):v[v.length-1],$e){const qe=$e.sn-r.startSN,ot=this.fragmentTracker.getState($e);if(("OK"===ot||"PARTIAL"===ot&&$e.gap)&&(g=$e),g&&$e.sn===g.sn&&(!Re||Me[0].fragment.sn>$e.sn)&&g&&$e.level===g.level){const Tt=v[qe+1];$e=$e.sn<x&&"OK"!==this.fragmentTracker.getState(Tt)?Tt:null}}return $e}synchronizeToLiveEdge(n){const{config:t,media:r}=this;if(!r)return;const c=this.hls.liveSyncPosition,g=r.currentTime,x=n.edge,Y=g>=n.fragments[0].start-t.maxFragLookUpTolerance&&g<=x;if(null!==c&&r.duration>c&&(g<c||!Y)){const ie=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*n.targetduration;(!Y&&r.readyState<4||g<x-ie)&&(this.loadedmetadata||(this.nextLoadPosition=c),r.readyState&&(this.warn(`Playback: ${g.toFixed(3)} is located too far from the end of live sliding playlist: ${x}, reset currentTime to : ${c.toFixed(3)}`),r.currentTime=c))}}alignPlaylists(n,t){const{levels:r,levelLastLoaded:c,fragPrevious:g}=this,v=null!==c?r[c]:null,x=n.fragments.length;if(!x)return this.warn("No fragments in live playlist"),0;const Y=n.fragments[0].start,ie=!t,Me=n.alignedSliding&&cr(Y);if(ie||!Me&&!Y){!function sr(f,n,t){!n||(function xr(f,n,t){if(function ir(f,n,t){return!(!n.details||!(t.endCC>t.startCC||f&&f.cc<t.startCC))}(f,t,n)){const r=function $n(f,n,t=0){const r=f.fragments,c=n.fragments;if(!c.length||!r.length)return void Qt.log("No fragments to align");const g=En(r,c[0].cc);if(g&&(!g||g.startPTS))return g;Qt.log("No frag in previous level to align on")}(t.details,n);r&&cr(r.start)&&(Qt.log(`Adjusting PTS using last level due to CC increase within current level ${n.url}`),Ar(r.start,n))}}(f,t,n),!t.alignedSliding&&n.details&&function Fr(f,n){if(!n.fragments.length||!f.hasProgramDateTime||!n.hasProgramDateTime)return;const t=n.fragments[0].programDateTime,r=f.fragments[0].programDateTime,c=(r-t)/1e3+n.fragments[0].start;c&&cr(c)&&(Qt.log(`Adjusting PTS using programDateTime delta ${r-t}ms, sliding:${c.toFixed(3)} ${f.url} `),Ar(c,f))}(t,n.details),!t.alignedSliding&&n.details&&!t.skippedSegments&&Kf(n.details,t))}(g,v,n);const Re=n.fragments[0].start;return this.log(`Live playlist sliding: ${Re.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${n.startSN} prev-sn: ${g?g.sn:"na"} fragments: ${x}`),Re}return Y}waitForCdnTuneIn(n){return n.live&&n.canBlockReload&&n.partTarget&&n.tuneInGoal>Math.max(n.partHoldBack,3*n.partTarget)}setStartPosition(n,t){let r=this.startPosition;if(r<t&&(r=-1),-1===r||-1===this.lastCurrentTime){const c=null!==this.startTimeOffset,g=c?this.startTimeOffset:n.startTimeOffset;null!==g&&cr(g)?(r=t+g,g<0&&(r+=n.totalduration),r=Math.min(Math.max(t,r),t+n.totalduration),this.log(`Start time offset ${g} found in ${c?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):n.live?r=this.hls.liveSyncPosition||t:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:n}=this;let t=0;return this.loadedmetadata&&n?t=n.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(n,t){this.transmuxer&&"initSegment"!==n.sn&&n.stats.aborted&&(this.warn(`Fragment ${n.sn}${t?" part "+t.index:""} of level ${n.level} was aborted`),this.resetFragmentLoading(n))}resetFragmentLoading(n){(!this.fragCurrent||!this.fragContextChanged(n)&&"FRAG_LOADING_WAITING_RETRY"!==this.state)&&(this.state="IDLE")}onFragmentOrKeyLoadError(n,t){if(t.chunkMeta&&!t.frag){const Re=this.getCurrentContext(t.chunkMeta);Re&&(t.frag=Re.frag)}const r=t.frag;if(!r||r.type!==n||!this.levels)return;var c;if(this.fragContextChanged(r))return void this.warn(`Frag load error must match current frag to retry ${r.url} > ${null==(c=this.fragCurrent)?void 0:c.url}`);const g=t.details===mn.FRAG_GAP;g&&this.fragmentTracker.fragBuffered(r,!0);const v=t.errorAction,{action:x,retryCount:Y=0,retryConfig:ie}=v||{};if(v&&5===x&&ie){var Me;this.resetStartWhenNotLoaded(null!=(Me=this.levelLastLoaded)?Me:r.level);const Re=Al(ie,Y);this.warn(`Fragment ${r.sn} of ${n} ${r.level} errored with ${t.details}, retrying loading ${Y+1}/${ie.maxNumRetry} in ${Re}ms`),v.resolved=!0,this.retryDate=self.performance.now()+Re,this.state="FRAG_LOADING_WAITING_RETRY"}else ie&&v?(this.resetFragmentErrors(n),Y<ie.maxNumRetry?g||(v.resolved=!0):Qt.warn(`${t.details} reached or exceeded max retry (${Y})`)):this.state=2===(null==v?void 0:v.action)?"WAITING_LEVEL":"ERROR";this.tickImmediate()}reduceLengthAndFlushBuffer(n){if("PARSING"===this.state||"PARSED"===this.state){const t=n.parent,r=this.getFwdBufferInfo(this.mediaBuffer,t),c=r&&r.len>.5;c&&this.reduceMaxBufferLength(r.len);const g=!c;return g&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${t} buffer`),n.frag&&(this.fragmentTracker.removeFragment(n.frag),this.nextLoadPosition=n.frag.start),this.resetLoadingState(),g}return!1}resetFragmentErrors(n){"audio"===n&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),"STOPPED"!==this.state&&(this.state="IDLE")}afterBufferFlushed(n,t,r){if(!n)return;const c=Lt.getBuffered(n);this.fragmentTracker.detectEvictedFragments(t,c,r),"ENDED"===this.state&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state="IDLE"}resetStartWhenNotLoaded(n){if(!this.loadedmetadata){this.startFragRequested=!1;const t=this.levels?this.levels[n].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(n){var t;this.warn(`The loading context changed while buffering fragment ${n.sn} of level ${n.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(null!=(t=this.levelLastLoaded)?t:n.level),this.resetLoadingState()}removeUnbufferedFrags(n=0){this.fragmentTracker.removeFragmentsInRange(n,1/0,this.playlistType,!1,!0)}updateLevelTiming(n,t,r,c){var g;const v=r.details;if(v){if(Object.keys(n.elementaryStreams).reduce((Y,ie)=>{const Me=n.elementaryStreams[ie];if(Me){const Re=Me.endPTS-Me.startPTS;if(Re<=0)return this.warn(`Could not parse fragment ${n.sn} ${ie} duration reliably (${Re})`),Y||!1;const $e=c?0:Eu(v,n,Me.startPTS,Me.endPTS,Me.startDTS,Me.endDTS);return this.hls.trigger(at.LEVEL_PTS_UPDATED,{details:v,level:r,drift:$e,type:ie,frag:n,start:Me.startPTS,end:Me.endPTS}),!0}return Y},!1))r.fragmentError=0;else if(null===(null==(g=this.transmuxer)?void 0:g.error)){const Y=new Error(`Found no media in fragment ${n.sn} of level ${r.id} resetting transmuxer to fallback to playlist timing`);if(this.warn(Y.message),this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,fatal:!1,error:Y,frag:n,reason:`Found no media in msn ${n.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state="PARSED",this.hls.trigger(at.FRAG_PARSED,{frag:n,part:t})}else this.warn("level.details undefined")}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(n){var t,r,c;"demuxerWorker"===n.event&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(null!=(t=null!=(r=this.levelLastLoaded)?r:null==(c=this.fragCurrent)?void 0:c.level)?t:0),this.resetLoadingState())}set state(n){const t=this._state;t!==n&&(this._state=n,this.log(`${t}->${n}`))}get state(){return this._state}}function os(){return self.SourceBuffer||self.WebKitSourceBuffer}function zo(f="",n=9e4){return{type:f,id:-1,pid:-1,inputTimeScale:n,sequenceNumber:-1,samples:[],dropped:0}}class qs{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(n,t,r,c){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(n){this.initPTS=n,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(n,t){return!1}appendFrame(n,t,r){}demux(n,t){this.cachedData&&(n=ha(this.cachedData,n),this.cachedData=null);let g,r=Va(n,0),c=r?r.length:0;const v=this._audioTrack,x=this._id3Track,Y=r?(f=>{const n=Zs(f);for(let t=0;t<n.length;t++){const r=n[t];if(Ga(r))return Ff(r)}})(r):void 0,ie=n.length;for((null===this.basePTS||0===this.frameIndex&&cr(Y))&&(this.basePTS=_c(Y,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),r&&r.length>0&&x.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:"org.id3",duration:Number.POSITIVE_INFINITY});c<ie;){if(this.canParse(n,c)){const Me=this.appendFrame(v,n,c);Me?(this.frameIndex++,this.lastPTS=Me.sample.pts,c+=Me.length,g=c):c=ie}else _g(n,c)?(r=Va(n,c),x.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:"org.id3",duration:Number.POSITIVE_INFINITY}),c+=r.length,g=c):c++;if(c===ie&&g!==ie){const Me=Di(n,g);this.cachedData=this.cachedData?ha(this.cachedData,Me):Me}}return{audioTrack:v,videoTrack:zo(),id3Track:x,textTrack:zo()}}demuxSampleAes(n,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(n){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:zo(),id3Track:this._id3Track,textTrack:zo()}}destroy(){}}const _c=(f,n,t)=>cr(f)?90*f:9e4*n+(t?9e4*t.baseTime/t.timescale:0);function $a(f,n){return 255===f[n]&&240==(246&f[n+1])}function za(f,n){return 1&f[n+1]?7:9}function va(f,n){return(3&f[n+3])<<11|f[n+4]<<3|(224&f[n+5])>>>5}function ya(f,n){return n+1<f.length&&$a(f,n)}function Qs(f,n){if(ya(f,n)){const t=za(f,n);if(n+t>=f.length)return!1;const r=va(f,n);if(r<=t)return!1;const c=n+r;return c===f.length||ya(f,c)}return!1}function vc(f,n,t,r,c){if(!f.samplerate){const g=function Pu(f,n,t,r){let c,g,v,x;const Y=navigator.userAgent.toLowerCase(),ie=r,Me=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=1+((192&n[t+2])>>>6);const Re=(60&n[t+2])>>>2;if(!(Re>Me.length-1))return v=(1&n[t+2])<<2,v|=(192&n[t+3])>>>6,Qt.log(`manifest codec:${r}, ADTS type:${c}, samplingIndex:${Re}`),/firefox/i.test(Y)?Re>=6?(c=5,x=new Array(4),g=Re-3):(c=2,x=new Array(2),g=Re):-1!==Y.indexOf("android")?(c=2,x=new Array(2),g=Re):(c=5,x=new Array(4),r&&(-1!==r.indexOf("mp4a.40.29")||-1!==r.indexOf("mp4a.40.5"))||!r&&Re>=6?g=Re-3:((r&&-1!==r.indexOf("mp4a.40.2")&&(Re>=6&&1===v||/vivaldi/i.test(Y))||!r&&1===v)&&(c=2,x=new Array(2)),g=Re)),x[0]=c<<3,x[0]|=(14&Re)>>1,x[1]|=(1&Re)<<7,x[1]|=v<<3,5===c&&(x[1]|=(14&g)>>1,x[2]=(1&g)<<7,x[2]|=8,x[3]=0),{config:x,samplerate:Me[Re],channelCount:v,codec:"mp4a.40."+c,manifestCodec:ie};f.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${Re}`})}(n,t,r,c);if(!g)return;f.config=g.config,f.samplerate=g.samplerate,f.channelCount=g.channelCount,f.codec=g.codec,f.manifestCodec=g.manifestCodec,Qt.log(`parsed codec:${f.codec}, rate:${g.samplerate}, channels:${g.channelCount}`)}}function yc(f){return 9216e4/f}function Jf(f,n,t,r,c){const v=r+c*yc(f.samplerate),x=function Id(f,n){const t=za(f,n);if(n+t<=f.length){const r=va(f,n)-t;if(r>0)return{headerLength:t,frameLength:r}}}(n,t);let Y;if(x){const{frameLength:Re,headerLength:$e}=x,qe=$e+Re,ot=Math.max(0,t+qe-n.length);ot?(Y=new Uint8Array(qe-$e),Y.set(n.subarray(t+$e,n.length),0)):Y=n.subarray(t+$e,t+qe);const gt={unit:Y,pts:v};return ot||f.samples.push(gt),{sample:gt,length:qe,missing:ot}}const ie=n.length-t;return Y=new Uint8Array(ie),Y.set(n.subarray(t,n.length),0),{sample:{unit:Y,pts:v},length:ie,missing:-1}}const Mg=/\/emsg[-/]ID3/i;let Ec=null;const Xf=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Pg=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ag=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],qa=[0,1,1,4];function qo(f,n,t,r,c){if(t+24>n.length)return;const g=Ol(n,t);if(g&&t+g.frameLength<=n.length){const x=r+c*(9e4*g.samplesPerFrame/g.sampleRate),Y={unit:n.subarray(t,t+g.frameLength),pts:x,dts:x};return f.config=[],f.channelCount=g.channelCount,f.samplerate=g.sampleRate,f.samples.push(Y),{sample:Y,length:g.frameLength,missing:0}}}function Ol(f,n){const t=f[n+1]>>3&3,r=f[n+1]>>1&3,c=f[n+2]>>4&15,g=f[n+2]>>2&3;if(1!==t&&0!==c&&15!==c&&3!==g){const x=f[n+3]>>6,ie=1e3*Xf[14*(3===t?3-r:3===r?3:4)+c-1],Re=Pg[3*(3===t?0:2===t?1:2)+g],$e=3===x?1:2,qe=Ag[t][r],ot=qa[r],gt=8*qe*ot,Tt=Math.floor(qe*ie/Re+(f[n+2]>>1&1))*ot;if(null===Ec){const nn=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ec=nn?parseInt(nn[1]):0}return!!Ec&&Ec<=87&&2===r&&ie>=224e3&&0===x&&(f[n+3]=128|f[n+3]),{sampleRate:Re,channelCount:$e,frameLength:Tt,samplesPerFrame:gt}}}function Tc(f,n){return 255===f[n]&&224==(224&f[n+1])&&0!=(6&f[n+1])}function wl(f,n){return n+1<f.length&&Tc(f,n)}function Au(f,n){if(n+1<f.length&&Tc(f,n)){const t=4,r=Ol(f,n);let c=t;null!=r&&r.frameLength&&(c=r.frameLength);const g=n+c;return g===f.length||wl(f,g)}return!1}class Rl{constructor(n){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=n,this.bytesAvailable=n.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const n=this.data,t=this.bytesAvailable,r=n.byteLength-t,c=new Uint8Array(4),g=Math.min(4,t);if(0===g)throw new Error("no bytes available");c.set(n.subarray(r,r+g)),this.word=new DataView(c.buffer).getUint32(0),this.bitsAvailable=8*g,this.bytesAvailable-=g}skipBits(n){let t;n=Math.min(n,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>n?(this.word<<=n,this.bitsAvailable-=n):(t=(n-=this.bitsAvailable)>>3,n-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=n,this.bitsAvailable-=n)}readBits(n){let t=Math.min(this.bitsAvailable,n);const r=this.word>>>32-t;if(n>32&&Qt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return t=n-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let n;for(n=0;n<this.bitsAvailable;++n)if(0!=(this.word&2147483648>>>n))return this.word<<=n,this.bitsAvailable-=n,n;return this.loadWord(),n+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const n=this.skipLZ();return this.readBits(n+1)-1}readEG(){const n=this.readUEG();return 1&n?1+n>>>1:-1*(n>>>1)}readBoolean(){return 1===this.readBits(1)}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(n){let c,t=8,r=8;for(let g=0;g<n;g++)0!==r&&(c=this.readEG(),r=(t+c+256)%256),t=0===r?t:r}readSPS(){let g,v,x,n=0,t=0,r=0,c=0;const Y=this.readUByte.bind(this),ie=this.readBits.bind(this),Me=this.readUEG.bind(this),Re=this.readBoolean.bind(this),$e=this.skipBits.bind(this),qe=this.skipEG.bind(this),ot=this.skipUEG.bind(this),gt=this.skipScalingList.bind(this);Y();const Tt=Y();if(ie(5),$e(3),Y(),ot(),100===Tt||110===Tt||122===Tt||244===Tt||44===Tt||83===Tt||86===Tt||118===Tt||128===Tt){const Bn=Me();if(3===Bn&&$e(1),ot(),ot(),$e(1),Re())for(v=3!==Bn?8:12,x=0;x<v;x++)Re()&&gt(x<6?16:64)}ot();const $t=Me();if(0===$t)Me();else if(1===$t)for($e(1),qe(),qe(),g=Me(),x=0;x<g;x++)qe();ot(),$e(1);const rn=Me(),nn=Me(),Sn=ie(1);0===Sn&&$e(1),$e(1),Re()&&(n=Me(),t=Me(),r=Me(),c=Me());let gn=[1,1];if(Re()&&Re())switch(Y()){case 1:gn=[1,1];break;case 2:gn=[12,11];break;case 3:gn=[10,11];break;case 4:gn=[16,11];break;case 5:gn=[40,33];break;case 6:gn=[24,11];break;case 7:gn=[20,11];break;case 8:gn=[32,11];break;case 9:gn=[80,33];break;case 10:gn=[18,11];break;case 11:gn=[15,11];break;case 12:gn=[64,33];break;case 13:gn=[160,99];break;case 14:gn=[4,3];break;case 15:gn=[3,2];break;case 16:gn=[2,1];break;case 255:gn=[Y()<<8|Y(),Y()<<8|Y()]}return{width:Math.ceil(16*(rn+1)-2*n-2*t),height:(2-Sn)*(nn+1)*16-(Sn?2:4)*(r+c),pixelRatio:gn}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class xd{constructor(n,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Xr(t,{removePKCS7Padding:!1})}decryptBuffer(n){return this.decrypter.decrypt(n,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(n,t,r){const c=n[t].unit;if(c.length<=16)return;const g=c.subarray(16,c.length-c.length%16),v=g.buffer.slice(g.byteOffset,g.byteOffset+g.length);this.decryptBuffer(v).then(x=>{const Y=new Uint8Array(x);c.set(Y,16),this.decrypter.isSync()||this.decryptAacSamples(n,t+1,r)})}decryptAacSamples(n,t,r){for(;;t++){if(t>=n.length)return void r();if(!(n[t].unit.length<32||(this.decryptAacSample(n,t,r),this.decrypter.isSync())))return}}getAvcEncryptedData(n){const t=16*Math.floor((n.length-48)/160)+16,r=new Int8Array(t);let c=0;for(let g=32;g<n.length-16;g+=160,c+=16)r.set(n.subarray(g,g+16),c);return r}getAvcDecryptedUnit(n,t){const r=new Uint8Array(t);let c=0;for(let g=32;g<n.length-16;g+=160,c+=16)n.set(r.subarray(c,c+16),g);return n}decryptAvcSample(n,t,r,c,g){const v=lu(g.data),x=this.getAvcEncryptedData(v);this.decryptBuffer(x.buffer).then(Y=>{g.data=this.getAvcDecryptedUnit(v,Y),this.decrypter.isSync()||this.decryptAvcSamples(n,t,r+1,c)})}decryptAvcSamples(n,t,r,c){if(n instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=n.length)return void c();const g=n[t].units;for(;!(r>=g.length);r++){const v=g[r];if(!(v.data.length<=48||1!==v.type&&5!==v.type||(this.decryptAvcSample(n,t,r,c,v),this.decrypter.isSync())))return}}}}const Pi=188;class Ea{constructor(n,t,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=n,this.config=t,this.typeSupported=r}static probe(n){const t=Ea.syncOffset(n);return t>0&&Qt.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),-1!==t}static syncOffset(n){const t=n.length;let r=Math.min(940,n.length-Pi)+1,c=0;for(;c<r;){let g=!1,v=-1,x=0;for(let Y=c;Y<t;Y+=Pi){if(71!==n[Y]){if(x)return-1;break}if(x++,-1===v&&(v=Y,0!==v&&(r=Math.min(v+18612,n.length-Pi)+1)),g||(g=0===Iu(n,Y)),g&&x>1&&(0===v&&x>2||Y+Pi>r))return v}c++}return-1}static createTrack(n,t){return{container:"video"===n||"audio"===n?"video/mp2t":void 0,type:n,id:El[n],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===n?t:void 0}}resetInitSegment(n,t,r,c){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Ea.createTrack("video"),this._audioTrack=Ea.createTrack("audio",c),this._id3Track=Ea.createTrack("id3"),this._txtTrack=Ea.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r,this._duration=c}resetTimeStamp(){}resetContiguity(){const{_audioTrack:n,_avcTrack:t,_id3Track:r}=this;n&&(n.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(n,t,r=!1,c=!1){let g;r||(this.sampleAes=null);const v=this._avcTrack,x=this._audioTrack,Y=this._id3Track,ie=this._txtTrack;let Me=v.pid,Re=v.pesData,$e=x.pid,qe=Y.pid,ot=x.pesData,gt=Y.pesData,Tt=null,$t=this.pmtParsed,rn=this._pmtId,nn=n.length;if(this.remainderData&&(nn=(n=ha(this.remainderData,n)).length,this.remainderData=null),nn<Pi&&!c)return this.remainderData=n,{audioTrack:x,videoTrack:v,id3Track:Y,textTrack:ie};const Sn=Math.max(0,Ea.syncOffset(n));nn-=(nn-Sn)%Pi,nn<n.byteLength&&!c&&(this.remainderData=new Uint8Array(n.buffer,nn,n.buffer.byteLength-nn));let gn=0;for(let On=Sn;On<nn;On+=Pi)if(71===n[On]){const Zn=!!(64&n[On+1]),Jn=Iu(n,On);let _r;if((48&n[On+3])>>4>1){if(_r=On+5+n[On+4],_r===On+Pi)continue}else _r=On+4;switch(Jn){case Me:Zn&&(Re&&(g=Cc(Re))&&this.parseAVCPES(v,ie,g,!1),Re={data:[],size:0}),Re&&(Re.data.push(n.subarray(_r,On+Pi)),Re.size+=On+Pi-_r);break;case $e:if(Zn){if(ot&&(g=Cc(ot)))switch(x.segmentCodec){case"aac":this.parseAACPES(x,g);break;case"mp3":this.parseMPEGPES(x,g)}ot={data:[],size:0}}ot&&(ot.data.push(n.subarray(_r,On+Pi)),ot.size+=On+Pi-_r);break;case qe:Zn&&(gt&&(g=Cc(gt))&&this.parseID3PES(Y,g),gt={data:[],size:0}),gt&&(gt.data.push(n.subarray(_r,On+Pi)),gt.size+=On+Pi-_r);break;case 0:Zn&&(_r+=n[_r]+1),rn=this._pmtId=fm(n,_r);break;case rn:{Zn&&(_r+=n[_r]+1);const nr=Ig(n,_r,this.typeSupported,r);Me=nr.avc,Me>0&&(v.pid=Me),$e=nr.audio,$e>0&&(x.pid=$e,x.segmentCodec=nr.segmentCodec),qe=nr.id3,qe>0&&(Y.pid=qe),null!==Tt&&!$t&&(Qt.warn(`MPEG-TS PMT found at ${On} after unknown PID '${Tt}'. Backtracking to sync byte @${Sn} to parse all TS packets.`),Tt=null,On=Sn-188),$t=this.pmtParsed=!0;break}case 17:case 8191:break;default:Tt=Jn}}else gn++;if(gn>0){const On=new Error(`Found ${gn} TS packet/s that do not start with 0x47`);this.observer.emit(at.ERROR,at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,fatal:!1,error:On,reason:On.message})}v.pesData=Re,x.pesData=ot,Y.pesData=gt;const Bn={audioTrack:x,videoTrack:v,id3Track:Y,textTrack:ie};return c&&this.extractRemainingSamples(Bn),Bn}flush(){const{remainderData:n}=this;let t;return this.remainderData=null,t=n?this.demux(n,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(n){const{audioTrack:t,videoTrack:r,id3Track:c,textTrack:g}=n,v=r.pesData,x=t.pesData,Y=c.pesData;let ie;if(v&&(ie=Cc(v))?(this.parseAVCPES(r,g,ie,!0),r.pesData=null):r.pesData=v,x&&(ie=Cc(x))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,ie);break;case"mp3":this.parseMPEGPES(t,ie)}t.pesData=null}else null!=x&&x.size&&Qt.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=x;Y&&(ie=Cc(Y))?(this.parseID3PES(c,ie),c.pesData=null):c.pesData=Y}demuxSampleAes(n,t,r){const c=this.demux(n,r,!0,!this.config.progressive),g=this.sampleAes=new xd(this.observer,this.config,t);return this.decrypt(c,g)}decrypt(n,t){return new Promise(r=>{const{audioTrack:c,videoTrack:g}=n;c.samples&&"aac"===c.segmentCodec?t.decryptAacSamples(c.samples,0,()=>{g.samples?t.decryptAvcSamples(g.samples,0,0,()=>{r(n)}):r(n)}):g.samples&&t.decryptAvcSamples(g.samples,0,0,()=>{r(n)})})}destroy(){this._duration=0}parseAVCPES(n,t,r,c){const g=this.parseAVCNALu(n,r.data);let x,v=this.avcSample,Y=!1;r.data=null,v&&g.length&&!n.audFound&&(eh(v,n),v=this.avcSample=Od(!1,r.pts,r.dts,"")),g.forEach(ie=>{switch(ie.type){case 1:{x=!0,v||(v=this.avcSample=Od(!0,r.pts,r.dts,"")),v.frame=!0;const Me=ie.data;if(Y&&Me.length>4){const Re=new Rl(Me).readSliceType();(2===Re||4===Re||7===Re||9===Re)&&(v.key=!0)}break}case 5:x=!0,v||(v=this.avcSample=Od(!0,r.pts,r.dts,"")),v.key=!0,v.frame=!0;break;case 6:x=!0,bl(ie.data,1,r.pts,t.samples);break;case 7:if(x=!0,Y=!0,!n.sps){const Me=ie.data,$e=new Rl(Me).readSPS();n.width=$e.width,n.height=$e.height,n.pixelRatio=$e.pixelRatio,n.sps=[Me],n.duration=this._duration;const qe=Me.subarray(1,4);let ot="avc1.";for(let gt=0;gt<3;gt++){let Tt=qe[gt].toString(16);Tt.length<2&&(Tt="0"+Tt),ot+=Tt}n.codec=ot}break;case 8:x=!0,n.pps||(n.pps=[ie.data]);break;case 9:x=!1,n.audFound=!0,v&&eh(v,n),v=this.avcSample=Od(!1,r.pts,r.dts,"");break;case 12:x=!0;break;default:x=!1,v&&(v.debug+="unknown NAL "+ie.type+" ")}v&&x&&v.units.push(ie)}),c&&v&&(eh(v,n),this.avcSample=null)}getLastNalUnit(n){var t;let c,r=this.avcSample;if((!r||0===r.units.length)&&(r=n[n.length-1]),null!=(t=r)&&t.units){const g=r.units;c=g[g.length-1]}return c}parseAVCNALu(n,t){const r=t.byteLength;let c=n.naluState||0;const g=c,v=[];let Y,ie,Me,x=0,Re=-1,$e=0;for(-1===c&&(Re=0,$e=31&t[0],c=0,x=1);x<r;)if(Y=t[x++],c)if(1!==c)if(Y)if(1===Y){if(Re>=0){const qe={data:t.subarray(Re,x-c-1),type:$e};v.push(qe)}else{const qe=this.getLastNalUnit(n.samples);if(qe&&(g&&x<=4-g&&qe.state&&(qe.data=qe.data.subarray(0,qe.data.byteLength-g)),ie=x-c-1,ie>0)){const ot=new Uint8Array(qe.data.byteLength+ie);ot.set(qe.data,0),ot.set(t.subarray(0,ie),qe.data.byteLength),qe.data=ot,qe.state=0}}x<r?(Me=31&t[x],Re=x,$e=Me,c=0):c=-1}else c=0;else c=3;else c=Y?0:2;else c=Y?0:1;if(Re>=0&&c>=0){const qe={data:t.subarray(Re,r),type:$e,state:c};v.push(qe)}if(0===v.length){const qe=this.getLastNalUnit(n.samples);if(qe){const ot=new Uint8Array(qe.data.byteLength+t.byteLength);ot.set(qe.data,0),ot.set(t,qe.data.byteLength),qe.data=ot}}return n.naluState=c,v}parseAACPES(n,t){let r=0;const c=this.aacOverFlow;let v,x,Y,g=t.data;if(c){this.aacOverFlow=null;const Re=c.missing,$e=c.sample.unit.byteLength;if(-1===Re){const qe=new Uint8Array($e+g.byteLength);qe.set(c.sample.unit,0),qe.set(g,$e),g=qe}else{const qe=$e-Re;c.sample.unit.set(g.subarray(0,Re),qe),n.samples.push(c.sample),r=c.missing}}for(v=r,x=g.length;v<x-1&&!ya(g,v);v++);if(v!==r){let Re;const $e=v<x-1;Re=$e?`AAC PES did not start with ADTS header,offset:${v}`:"No ADTS header found in AAC PES";const qe=new Error(Re);if(Qt.warn(`parsing error: ${Re}`),this.observer.emit(at.ERROR,at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,fatal:!1,levelRetry:$e,error:qe,reason:Re}),!$e)return}if(vc(n,this.observer,g,v,this.audioCodec),void 0!==t.pts)Y=t.pts;else{if(!c)return void Qt.warn("[tsdemuxer]: AAC PES unknown PTS");{const Re=yc(n.samplerate);Y=c.sample.pts+Re}}let Me,ie=0;for(;v<x;){if(Me=Jf(n,g,v,Y,ie),v+=Me.length,Me.missing){this.aacOverFlow=Me;break}for(ie++;v<x-1&&!ya(g,v);v++);}}parseMPEGPES(n,t){const r=t.data,c=r.length;let g=0,v=0;const x=t.pts;if(void 0!==x)for(;v<c;)if(wl(r,v)){const Y=qo(n,r,v,x,g);if(!Y)break;v+=Y.length,g++}else v++;else Qt.warn("[tsdemuxer]: MPEG PES unknown PTS")}parseID3PES(n,t){if(void 0===t.pts)return void Qt.warn("[tsdemuxer]: ID3 PES unknown PTS");const r=Gi({},t,{type:this._avcTrack?ko_emsg:"org.id3",duration:Number.POSITIVE_INFINITY});n.samples.push(r)}}function Od(f,n,t,r){return{key:f,frame:!1,pts:n,dts:t,units:[],debug:r,length:0}}function Iu(f,n){return((31&f[n+1])<<8)+f[n+2]}function fm(f,n){return(31&f[n+10])<<8|f[n+11]}function Ig(f,n,t,r){const c={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},v=n+3+((15&f[n+1])<<8|f[n+2])-4;for(n+=12+((15&f[n+10])<<8|f[n+11]);n<v;){const Y=Iu(f,n);switch(f[n]){case 207:if(!r){Qt.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===c.audio&&(c.audio=Y);break;case 21:-1===c.id3&&(c.id3=Y);break;case 219:if(!r){Qt.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===c.avc&&(c.avc=Y);break;case 3:case 4:!0!==t.mpeg&&!0!==t.mp3?Qt.log("MPEG audio found, not supported in this browser"):-1===c.audio&&(c.audio=Y,c.segmentCodec="mp3");break;case 36:Qt.warn("Unsupported HEVC stream type found")}n+=5+((15&f[n+3])<<8|f[n+4])}return c}function Cc(f){let t,r,c,g,v,n=0;const x=f.data;if(!f||0===f.size)return null;for(;x[0].length<19&&x.length>1;){const ie=new Uint8Array(x[0].length+x[1].length);ie.set(x[0]),ie.set(x[1],x[0].length),x[0]=ie,x.splice(1,1)}if(t=x[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(r=(t[4]<<8)+t[5],r&&r>f.size-6)return null;const ie=t[7];192&ie&&(g=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&ie?(v=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,g-v>54e5&&(Qt.warn(`${Math.round((g-v)/9e4)}s delta between PTS and DTS, align them`),g=v)):v=g),c=t[8];let Me=c+9;if(f.size<=Me)return null;f.size-=Me;const Re=new Uint8Array(f.size);for(let $e=0,qe=x.length;$e<qe;$e++){t=x[$e];let ot=t.byteLength;if(Me){if(Me>ot){Me-=ot;continue}t=t.subarray(Me),ot-=Me,Me=0}Re.set(t,n),n+=ot}return r&&(r-=c+3),{data:Re,pts:g,dts:v,len:r}}return null}function eh(f,n){if(f.units.length&&f.frame){if(void 0===f.pts){const t=n.samples,r=t.length;if(!r)return void n.dropped++;{const c=t[r-1];f.pts=c.pts,f.dts=c.dts}}n.samples.push(f)}f.debug.length&&Qt.log(f.pts+"/"+f.dts+":"+f.debug)}class Nl{static getSilentFrame(n,t){if("mp4a.40.2"===n){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}}}const Xs=Math.pow(2,32)-1;let Ps=(()=>{class f{static init(){let t;for(t in f.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},f.types)f.types.hasOwnProperty(t)&&(f.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),c=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);f.HDLR_TYPES={video:r,audio:c};const g=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),v=new Uint8Array([0,0,0,0,0,0,0,0]);f.STTS=f.STSC=f.STCO=v,f.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),f.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),f.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),f.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const x=new Uint8Array([105,115,111,109]),Y=new Uint8Array([97,118,99,49]),ie=new Uint8Array([0,0,0,1]);f.FTYP=f.box(f.types.ftyp,x,ie,x,Y),f.DINF=f.box(f.types.dinf,f.box(f.types.dref,g))}static box(t,...r){let c=8,g=r.length;const v=g;for(;g--;)c+=r[g].byteLength;const x=new Uint8Array(c);for(x[0]=c>>24&255,x[1]=c>>16&255,x[2]=c>>8&255,x[3]=255&c,x.set(t,4),g=0,c=8;g<v;g++)x.set(r[g],c),c+=r[g].byteLength;return x}static hdlr(t){return f.box(f.types.hdlr,f.HDLR_TYPES[t])}static mdat(t){return f.box(f.types.mdat,t)}static mdhd(t,r){r*=t;const c=Math.floor(r/(Xs+1)),g=Math.floor(r%(Xs+1));return f.box(f.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,c>>24,c>>16&255,c>>8&255,255&c,g>>24,g>>16&255,g>>8&255,255&g,85,196,0,0]))}static mdia(t){return f.box(f.types.mdia,f.mdhd(t.timescale,t.duration),f.hdlr(t.type),f.minf(t))}static mfhd(t){return f.box(f.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}static minf(t){return f.box(f.types.minf,"audio"===t.type?f.box(f.types.smhd,f.SMHD):f.box(f.types.vmhd,f.VMHD),f.DINF,f.stbl(t))}static moof(t,r,c){return f.box(f.types.moof,f.mfhd(t),f.traf(c,r))}static moov(t){let r=t.length;const c=[];for(;r--;)c[r]=f.trak(t[r]);return f.box.apply(null,[f.types.moov,f.mvhd(t[0].timescale,t[0].duration)].concat(c).concat(f.mvex(t)))}static mvex(t){let r=t.length;const c=[];for(;r--;)c[r]=f.trex(t[r]);return f.box.apply(null,[f.types.mvex,...c])}static mvhd(t,r){r*=t;const c=Math.floor(r/(Xs+1)),g=Math.floor(r%(Xs+1)),v=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,c>>24,c>>16&255,c>>8&255,255&c,g>>24,g>>16&255,g>>8&255,255&g,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return f.box(f.types.mvhd,v)}static sdtp(t){const r=t.samples||[],c=new Uint8Array(4+r.length);let g,v;for(g=0;g<r.length;g++)v=r[g].flags,c[g+4]=v.dependsOn<<4|v.isDependedOn<<2|v.hasRedundancy;return f.box(f.types.sdtp,c)}static stbl(t){return f.box(f.types.stbl,f.stsd(t),f.box(f.types.stts,f.STTS),f.box(f.types.stsc,f.STSC),f.box(f.types.stsz,f.STSZ),f.box(f.types.stco,f.STCO))}static avc1(t){let g,v,x,r=[],c=[];for(g=0;g<t.sps.length;g++)v=t.sps[g],x=v.byteLength,r.push(x>>>8&255),r.push(255&x),r=r.concat(Array.prototype.slice.call(v));for(g=0;g<t.pps.length;g++)v=t.pps[g],x=v.byteLength,c.push(x>>>8&255),c.push(255&x),c=c.concat(Array.prototype.slice.call(v));const Y=f.box(f.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(c))),ie=t.width,Me=t.height,Re=t.pixelRatio[0],$e=t.pixelRatio[1];return f.box(f.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,ie>>8&255,255&ie,Me>>8&255,255&Me,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Y,f.box(f.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),f.box(f.types.pasp,new Uint8Array([Re>>24,Re>>16&255,Re>>8&255,255&Re,$e>>24,$e>>16&255,$e>>8&255,255&$e])))}static esds(t){const r=t.config.length;return new Uint8Array([0,0,0,0,3,23+r,0,1,0,4,15+r,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([r]).concat(t.config).concat([6,1,2]))}static mp4a(t){const r=t.samplerate;return f.box(f.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),f.box(f.types.esds,f.esds(t)))}static mp3(t){const r=t.samplerate;return f.box(f.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))}static stsd(t){return f.box(f.types.stsd,f.STSD,"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?f.mp3(t):f.mp4a(t):f.avc1(t))}static tkhd(t){const r=t.id,c=t.duration*t.timescale,g=t.width,v=t.height,x=Math.floor(c/(Xs+1)),Y=Math.floor(c%(Xs+1));return f.box(f.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,x>>24,x>>16&255,x>>8&255,255&x,Y>>24,Y>>16&255,Y>>8&255,255&Y,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,g>>8&255,255&g,0,0,v>>8&255,255&v,0,0]))}static traf(t,r){const c=f.sdtp(t),g=t.id,v=Math.floor(r/(Xs+1)),x=Math.floor(r%(Xs+1));return f.box(f.types.traf,f.box(f.types.tfhd,new Uint8Array([0,0,0,0,g>>24,g>>16&255,g>>8&255,255&g])),f.box(f.types.tfdt,new Uint8Array([1,0,0,0,v>>24,v>>16&255,v>>8&255,255&v,x>>24,x>>16&255,x>>8&255,255&x])),f.trun(t,c.length+16+20+8+16+8+8),c)}static trak(t){return t.duration=t.duration||4294967295,f.box(f.types.trak,f.tkhd(t),f.mdia(t))}static trex(t){const r=t.id;return f.box(f.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,r){const c=t.samples||[],g=c.length,v=12+16*g,x=new Uint8Array(v);let Y,ie,Me,Re,$e,qe;for(x.set(["video"===t.type?1:0,0,15,1,g>>>24&255,g>>>16&255,g>>>8&255,255&g,(r+=8+v)>>>24&255,r>>>16&255,r>>>8&255,255&r],0),Y=0;Y<g;Y++)ie=c[Y],Me=ie.duration,Re=ie.size,$e=ie.flags,qe=ie.cts,x.set([Me>>>24&255,Me>>>16&255,Me>>>8&255,255&Me,Re>>>24&255,Re>>>16&255,Re>>>8&255,255&Re,$e.isLeading<<2|$e.dependsOn,$e.isDependedOn<<6|$e.hasRedundancy<<4|$e.paddingValue<<1|$e.isNonSync,61440&$e.degradPrio,15&$e.degradPrio,qe>>>24&255,qe>>>16&255,qe>>>8&255,255&qe],12+16*Y);return f.box(f.types.trun,x)}static initSegment(t){f.types||f.init();const r=f.moov(t),c=new Uint8Array(f.FTYP.byteLength+r.byteLength);return c.set(f.FTYP),c.set(r,f.FTYP.byteLength),c}}return f.types=void 0,f.HDLR_TYPES=void 0,f.STTS=void 0,f.STSC=void 0,f.STCO=void 0,f.STSZ=void 0,f.VMHD=void 0,f.SMHD=void 0,f.STSD=void 0,f.FTYP=void 0,f.DINF=void 0,f})();function Ja(f,n,t=1,r=!1){const c=f*n*t;return r?Math.round(c):c}function Mc(f,n=!1){return Ja(f,1e3,1/9e4,n)}let Ta,Ll=null,nh=null;class Rd{constructor(n,t,r,c=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=n,this.config=t,this.typeSupported=r,this.ISGenerated=!1,null===Ll){const v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ll=v?parseInt(v[1]):0}if(null===nh){const g=navigator.userAgent.match(/Safari\/(\d+)/i);nh=g?parseInt(g[1]):0}}destroy(){}resetTimeStamp(n){Qt.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=n}resetNextTimestamp(){Qt.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){Qt.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(n){let t=!1;const r=n.reduce((c,g)=>{const v=g.pts-c;return v<-4294967296?(t=!0,As(c,g.pts)):v>0?c:g.pts},n[0].pts);return t&&Qt.debug("PTS rollover detected"),r}remux(n,t,r,c,g,v,x,Y){let ie,Me,Re,$e,qe,ot,gt=g,Tt=g;const rn=t.pid>-1,nn=t.samples.length,Sn=n.samples.length>0,gn=x&&nn>0||nn>1;if((!(n.pid>-1)||Sn)&&(!rn||gn)||this.ISGenerated||x){this.ISGenerated||(Re=this.generateIS(n,t,g,v));const On=this.isVideoContiguous;let Jn,Zn=-1;if(gn&&(Zn=function wg(f){for(let n=0;n<f.length;n++)if(f[n].key)return n;return-1}(t.samples),!On&&this.config.forceKeyFrameOnDiscontinuity))if(ot=!0,Zn>0){Qt.warn(`[mp4-remuxer]: Dropped ${Zn} out of ${nn} video samples due to a missing keyframe`);const Dn=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(Zn),t.dropped+=Zn,Tt+=(t.samples[0].pts-Dn)/t.inputTimeScale,Jn=Tt}else-1===Zn&&(Qt.warn(`[mp4-remuxer]: No keyframe found out of ${nn} video samples`),ot=!1);if(this.ISGenerated){if(Sn&&gn){const Dn=this.getVideoStartPts(t.samples),nr=(As(n.samples[0].pts,Dn)-Dn)/t.inputTimeScale;gt+=Math.max(0,nr),Tt+=Math.max(0,-nr)}if(Sn){if(n.samplerate||(Qt.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),Re=this.generateIS(n,t,g,v)),Me=this.remuxAudio(n,gt,this.isAudioContiguous,v,rn||gn||"audio"===Y?Tt:void 0),gn){const Dn=Me?Me.endPTS-Me.startPTS:0;t.inputTimeScale||(Qt.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),Re=this.generateIS(n,t,g,v)),ie=this.remuxVideo(t,Tt,On,Dn)}}else gn&&(ie=this.remuxVideo(t,Tt,On,0));ie&&(ie.firstKeyFrame=Zn,ie.independent=-1!==Zn,ie.firstKeyFramePTS=Jn)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(qe=rh(r,g,this._initPTS,this._initDTS)),c.samples.length&&($e=Rg(c,g,this._initPTS))),{audio:Me,video:ie,initSegment:Re,independent:ot,text:$e,id3:qe}}generateIS(n,t,r,c){const g=n.samples,v=t.samples,x=this.typeSupported,Y={},ie=this._initPTS;let $e,qe,ot,Me=!ie||c,Re="audio/mp4";if(Me&&($e=qe=1/0),n.config&&g.length&&("mp3"===(n.timescale=n.samplerate,n.segmentCodec)&&(x.mpeg?(Re="audio/mpeg",n.codec=""):x.mp3&&(n.codec="mp3")),Y.audio={id:"audio",container:Re,codec:n.codec,initSegment:"mp3"===n.segmentCodec&&x.mpeg?new Uint8Array(0):Ps.initSegment([n]),metadata:{channelCount:n.channelCount}},Me&&(ot=n.inputTimeScale,ie&&ot===ie.timescale?Me=!1:$e=qe=g[0].pts-Math.round(ot*r))),t.sps&&t.pps&&v.length&&(t.timescale=t.inputTimeScale,Y.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:Ps.initSegment([t]),metadata:{width:t.width,height:t.height}},Me))if(ot=t.inputTimeScale,ie&&ot===ie.timescale)Me=!1;else{const gt=this.getVideoStartPts(v),Tt=Math.round(ot*r);qe=Math.min(qe,As(v[0].dts,gt)-Tt),$e=Math.min($e,gt-Tt)}if(Object.keys(Y).length)return this.ISGenerated=!0,Me?(this._initPTS={baseTime:$e,timescale:ot},this._initDTS={baseTime:qe,timescale:ot}):$e=ot=void 0,{tracks:Y,initPTS:$e,timescale:ot}}remuxVideo(n,t,r,c){const g=n.inputTimeScale,v=n.samples,x=[],Y=v.length,ie=this._initPTS;let qe,ot,Me=this.nextAvcDts,Re=8,$e=this.videoSampleDuration,gt=Number.POSITIVE_INFINITY,Tt=Number.NEGATIVE_INFINITY,$t=!1;r&&null!==Me||(Me=t*g-(v[0].pts-As(v[0].dts,v[0].pts)));const rn=ie.baseTime*g/ie.timescale;for(let or=0;or<Y;or++){const mr=v[or];mr.pts=As(mr.pts-rn,Me),mr.dts=As(mr.dts-rn,Me),mr.dts<v[or>0?or-1:or].dts&&($t=!0)}$t&&v.sort(function(or,mr){return or.dts-mr.dts||or.pts-mr.pts}),qe=v[0].dts,ot=v[v.length-1].dts;const nn=ot-qe,Sn=nn?Math.round(nn/(Y-1)):$e||n.inputTimeScale/30;if(r){const or=qe-Me,mr=or>Sn,_i=or<-1;if((mr||_i)&&(Qt.warn(mr?`AVC: ${Mc(or,!0)} ms (${or}dts) hole between fragments detected, filling it`:`AVC: ${Mc(-or,!0)} ms (${or}dts) overlapping between fragments detected`),!_i||Me>=v[0].pts)){qe=Me;const hi=v[0].pts-or;v[0].dts=qe,v[0].pts=hi,Qt.log(`Video: First PTS/DTS adjusted: ${Mc(hi,!0)}/${Mc(qe,!0)}, delta: ${Mc(or,!0)} ms`)}}qe=Math.max(0,qe);let gn=0,Bn=0;for(let or=0;or<Y;or++){const mr=v[or],_i=mr.units,hi=_i.length;let ei=0;for(let ui=0;ui<hi;ui++)ei+=_i[ui].data.length;Bn+=ei,gn+=hi,mr.length=ei,mr.dts=Math.max(mr.dts,qe),gt=Math.min(mr.pts,gt),Tt=Math.max(mr.pts,Tt)}ot=v[Y-1].dts;const On=Bn+4*gn+8;let Zn;try{Zn=new Uint8Array(On)}catch(or){return void this.observer.emit(at.ERROR,at.ERROR,{type:pr.MUX_ERROR,details:mn.REMUX_ALLOC_ERROR,fatal:!1,error:or,bytes:On,reason:`fail allocating video mdat ${On}`})}const Jn=new DataView(Zn.buffer);Jn.setUint32(0,On),Zn.set(Ps.types.mdat,4);let Dn=!1,_r=Number.POSITIVE_INFINITY,nr=Number.POSITIVE_INFINITY,ci=Number.NEGATIVE_INFINITY,Ki=Number.NEGATIVE_INFINITY;for(let or=0;or<Y;or++){const mr=v[or],_i=mr.units;let ei,hi=0;for(let Es=0,Ts=_i.length;Es<Ts;Es++){const ki=_i[Es],ho=ki.data,ls=ki.data.byteLength;Jn.setUint32(Re,ls),Re+=4,Zn.set(ho,Re),Re+=ls,hi+=4+ls}if(or<Y-1)$e=v[or+1].dts-mr.dts,ei=v[or+1].pts-mr.pts;else{const Es=this.config,Ts=or>0?mr.dts-v[or-1].dts:Sn;if(ei=or>0?mr.pts-v[or-1].pts:Sn,Es.stretchShortVideoTrack&&null!==this.nextAudioPts){const ki=Math.floor(Es.maxBufferHole*g),ho=(c?gt+c*g:this.nextAudioPts)-mr.pts;ho>ki?($e=ho-Ts,$e<0?$e=Ts:Dn=!0,Qt.log(`[mp4-remuxer]: It is approximately ${ho/90} ms to the next segment; using duration ${$e/90} ms for the last video frame.`)):$e=Ts}else $e=Ts}const ui=Math.round(mr.pts-mr.dts);_r=Math.min(_r,$e),ci=Math.max(ci,$e),nr=Math.min(nr,ei),Ki=Math.max(Ki,ei),x.push(new ih(mr.key,$e,hi,ui))}if(x.length)if(Ll){if(Ll<70){const or=x[0].flags;or.dependsOn=2,or.isNonSync=0}}else if(nh&&Ki-nr<ci-_r&&Sn/ci<.025&&0===x[0].cts){Qt.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let or=qe;for(let mr=0,_i=x.length;mr<_i;mr++){const hi=or+x[mr].duration,ei=or+x[mr].cts;x[mr].duration=mr<_i-1?hi+x[mr+1].cts-ei:mr?x[mr-1].duration:Sn,x[mr].cts=0,or=hi}}$e=Dn||!$e?Sn:$e,this.nextAvcDts=Me=ot+$e,this.videoSampleDuration=$e,this.isVideoContiguous=!0;const Ti={data1:Ps.moof(n.sequenceNumber++,qe,Gi({},n,{samples:x})),data2:Zn,startPTS:gt/g,endPTS:(Tt+$e)/g,startDTS:qe/g,endDTS:Me/g,type:"video",hasAudio:!1,hasVideo:!0,nb:x.length,dropped:n.dropped};return n.samples=[],n.dropped=0,Ti}remuxAudio(n,t,r,c,g){const v=n.inputTimeScale,Y=v/(n.samplerate?n.samplerate:v),ie="aac"===n.segmentCodec?1024:1152,Me=ie*Y,Re=this._initPTS,$e="mp3"===n.segmentCodec&&this.typeSupported.mpeg,qe=[],ot=void 0!==g;let gt=n.samples,Tt=$e?0:8,$t=this.nextAudioPts||-1;const rn=t*v,nn=Re.baseTime*v/Re.timescale;if(this.isAudioContiguous=r=r||gt.length&&$t>0&&(c&&Math.abs(rn-$t)<9e3||Math.abs(As(gt[0].pts-nn,rn)-$t)<20*Me),gt.forEach(function(Ai){Ai.pts=As(Ai.pts-nn,rn)}),!r||$t<0){if(gt=gt.filter(Ai=>Ai.pts>=0),!gt.length)return;$t=0===g?0:c&&!ot?Math.max(0,rn):gt[0].pts}if("aac"===n.segmentCodec){const Ai=this.config.maxAudioFramesDrift;for(let Ti=0,or=$t;Ti<gt.length;Ti++){const mr=gt[Ti],_i=mr.pts,hi=_i-or,ei=Math.abs(1e3*hi/v);if(hi<=-Ai*Me&&ot)0===Ti&&(Qt.warn(`Audio frame @ ${(_i/v).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*hi/v)} ms.`),this.nextAudioPts=$t=or=_i);else if(hi>=Ai*Me&&ei<1e4&&ot){let ui=Math.round(hi/Me);or=_i-ui*Me,or<0&&(ui--,or+=Me),0===Ti&&(this.nextAudioPts=$t=or),Qt.warn(`[mp4-remuxer]: Injecting ${ui} audio frame @ ${(or/v).toFixed(3)}s due to ${Math.round(1e3*hi/v)} ms gap.`);for(let Es=0;Es<ui;Es++){const Ts=Math.max(or,0);let ki=Nl.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);ki||(Qt.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ki=mr.unit.subarray()),gt.splice(Ti,0,{unit:ki,pts:Ts}),or+=Me,Ti++}}mr.pts=or,or+=Me}}let Bn,Sn=null,gn=null,On=0,Zn=gt.length;for(;Zn--;)On+=gt[Zn].unit.byteLength;for(let Ai=0,Ti=gt.length;Ai<Ti;Ai++){const or=gt[Ai],mr=or.unit;let _i=or.pts;if(null!==gn)qe[Ai-1].duration=Math.round((_i-gn)/Y);else{if(r&&"aac"===n.segmentCodec&&(_i=$t),Sn=_i,!(On>0))return;On+=Tt;try{Bn=new Uint8Array(On)}catch(ei){return void this.observer.emit(at.ERROR,at.ERROR,{type:pr.MUX_ERROR,details:mn.REMUX_ALLOC_ERROR,fatal:!1,error:ei,bytes:On,reason:`fail allocating audio mdat ${On}`})}$e||(new DataView(Bn.buffer).setUint32(0,On),Bn.set(Ps.types.mdat,4))}Bn.set(mr,Tt);const hi=mr.byteLength;Tt+=hi,qe.push(new ih(!0,ie,hi,0)),gn=_i}const Jn=qe.length;if(!Jn)return;this.nextAudioPts=$t=gn+Y*qe[qe.length-1].duration;const _r=$e?new Uint8Array(0):Ps.moof(n.sequenceNumber++,Sn/Y,Gi({},n,{samples:qe}));n.samples=[];const nr=Sn/v,ci=$t/v,Ci={data1:_r,data2:Bn,startPTS:nr,endPTS:ci,startDTS:nr,endDTS:ci,type:"audio",hasAudio:!0,hasVideo:!1,nb:Jn};return this.isAudioContiguous=!0,Ci}remuxEmptyAudio(n,t,r,c){const g=n.inputTimeScale,Y=this.nextAudioPts,ie=this._initDTS,Me=9e4*ie.baseTime/ie.timescale,Re=(null!==Y?Y:c.startDTS*g)+Me,qe=g/(n.samplerate?n.samplerate:g)*1024,ot=Math.ceil((c.endDTS*g+Me-Re)/qe),gt=Nl.getSilentFrame(n.manifestCodec||n.codec,n.channelCount);if(Qt.warn("[mp4-remuxer]: remux empty Audio"),!gt)return void Qt.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");const Tt=[];for(let $t=0;$t<ot;$t++){const rn=Re+$t*qe;Tt.push({unit:gt,pts:rn,dts:rn})}return n.samples=Tt,this.remuxAudio(n,t,r,!1)}}function As(f,n){let t;if(null===n)return f;for(t=n<f?-8589934592:8589934592;Math.abs(f-n)>4294967296;)f+=t;return f}function rh(f,n,t,r){const c=f.samples.length;if(!c)return;const g=f.inputTimeScale;for(let x=0;x<c;x++){const Y=f.samples[x];Y.pts=As(Y.pts-t.baseTime*g/t.timescale,n*g)/g,Y.dts=As(Y.dts-r.baseTime*g/r.timescale,n*g)/g}const v=f.samples;return f.samples=[],{samples:v}}function Rg(f,n,t){const r=f.samples.length;if(!r)return;const c=f.inputTimeScale;for(let v=0;v<r;v++){const x=f.samples[v];x.pts=As(x.pts-9e4*t.baseTime/t.timescale,n*c)/c}f.samples.sort((v,x)=>v.pts-x.pts);const g=f.samples;return f.samples=[],{samples:g}}class ih{constructor(n,t,r,c){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=r,this.cts=c,this.flags=new gm(n)}}class gm{constructor(n){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=n?2:1,this.isNonSync=n?0:1}}function Ng(f,n){const t=null==f?void 0:f.codec;return t&&t.length>4?t:"hvc1"===t||"hev1"===t?"hvc1.1.6.L120.90":"av01"===t?"av01.0.04M.08":"avc1"===t||"video"===n?"avc1.42e01e":"mp4a.40.5"}try{Ta=self.performance.now.bind(self.performance)}catch(f){Qt.debug("Unable to use Performance API on this environment"),Ta="undefined"!=typeof self&&self.Date.now}const Lg=[{demux:class Dg{constructor(n,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(n,t,r,c){const g=this.videoTrack=zo("video",1),v=this.audioTrack=zo("audio",1),x=this.txtTrack=zo("text",1);if(this.id3Track=zo("id3",1),this.timeOffset=0,null==n||!n.byteLength)return;const Y=kf(n);if(Y.video){const{id:ie,timescale:Me,codec:Re}=Y.video;g.id=ie,g.timescale=x.timescale=Me,g.codec=Re}if(Y.audio){const{id:ie,timescale:Me,codec:Re}=Y.audio;v.id=ie,v.timescale=Me,v.codec=Re}x.id=El.text,g.sampleDuration=0,g.duration=v.duration=c}resetContiguity(){this.remainderData=null}static probe(n){return $r(n=n.length>16384?n.subarray(0,16384):n,["moof"]).length>0}demux(n,t){this.timeOffset=t;let r=n;const c=this.videoTrack,g=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=ha(this.remainderData,n));const x=function ld(f){const n={valid:null,remainder:null},t=$r(f,["moof"]);if(!t)return n;if(t.length<2)return n.remainder=f,n;const r=t[t.length-1];return n.valid=Di(f,0,r.byteOffset-8),n.remainder=Di(f,r.byteOffset-8),n}(r);this.remainderData=x.remainder,c.samples=x.valid||new Uint8Array}else c.samples=r;const v=this.extractID3Track(c,t);return g.samples=cd(t,c),{videoTrack:c,audioTrack:this.audioTrack,id3Track:v,textTrack:this.txtTrack}}flush(){const n=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const c=this.extractID3Track(t,this.timeOffset);return r.samples=cd(n,t),{videoTrack:t,audioTrack:zo(),id3Track:c,textTrack:zo()}}extractID3Track(n,t){const r=this.id3Track;if(n.samples.length){const c=$r(n.samples,["emsg"]);c&&c.forEach(g=>{const v=function ud(f){const n=f[0];let t="",r="",c=0,g=0,v=0,x=0,Y=0,ie=0;if(0===n){for(;"\0"!==Pr(f.subarray(ie,ie+1));)t+=Pr(f.subarray(ie,ie+1)),ie+=1;for(t+=Pr(f.subarray(ie,ie+1)),ie+=1;"\0"!==Pr(f.subarray(ie,ie+1));)r+=Pr(f.subarray(ie,ie+1)),ie+=1;r+=Pr(f.subarray(ie,ie+1)),ie+=1,c=Mr(f,12),g=Mr(f,16),x=Mr(f,20),Y=Mr(f,24),ie=28}else if(1===n){ie+=4,c=Mr(f,ie),ie+=4;const Re=Mr(f,ie);ie+=4;const $e=Mr(f,ie);for(ie+=4,v=$0(2,32)*Re+$e,Number.isSafeInteger(v)||(v=Number.MAX_SAFE_INTEGER,Qt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),x=Mr(f,ie),ie+=4,Y=Mr(f,ie),ie+=4;"\0"!==Pr(f.subarray(ie,ie+1));)t+=Pr(f.subarray(ie,ie+1)),ie+=1;for(t+=Pr(f.subarray(ie,ie+1)),ie+=1;"\0"!==Pr(f.subarray(ie,ie+1));)r+=Pr(f.subarray(ie,ie+1)),ie+=1;r+=Pr(f.subarray(ie,ie+1)),ie+=1}return{schemeIdUri:t,value:r,timeScale:c,presentationTime:v,presentationTimeDelta:g,eventDuration:x,id:Y,payload:f.subarray(ie,f.byteLength)}}(g);if(Mg.test(v.schemeIdUri)){const x=cr(v.presentationTime)?v.presentationTime/v.timeScale:t+v.presentationTimeDelta/v.timeScale;let Y=4294967295===v.eventDuration?Number.POSITIVE_INFINITY:v.eventDuration/v.timeScale;Y<=.001&&(Y=Number.POSITIVE_INFINITY);const ie=v.payload;r.samples.push({data:ie,len:ie.byteLength,dts:x,pts:x,type:ko_emsg,duration:Y})}})}return r}demuxSampleAes(n,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}},remux:class pm{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(n){this.initPTS=n,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(n,t,r,c){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(function Eg(f,n){if(!f||!n)return f;const t=n.keyId;return t&&n.isCommonEncryption&&$r(f,["moov","trak"]).forEach(c=>{const v=$r(c,["mdia","minf","stbl","stsd"])[0].subarray(8);let x=$r(v,["enca"]);const Y=x.length>0;Y||(x=$r(v,["encv"])),x.forEach(ie=>{$r(ie.subarray(Y?28:78),["sinf"]).forEach($e=>{const qe=Bf($e);if(qe){const ot=qe.subarray(8,24);ot.some(gt=>0!==gt)||(Qt.log(`[eme] Patching keyId in 'enc${Y?"a":"v"}>sinf>>tenc' box: ${Qi_hexDump(ot)} -> ${Qi_hexDump(t)}`),qe.set(t,8))}})})}),f}(n,c)),this.emitInitSegment=!0}generateInitSegment(n){let{audioCodec:t,videoCodec:r}=this;if(null==n||!n.byteLength)return this.initTracks=void 0,void(this.initData=void 0);const c=this.initData=kf(n);t||(t=Ng(c.audio,"audio")),r||(r=Ng(c.video,"video"));const g={};c.audio&&c.video?g.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:n,id:"main"}:c.audio?g.audio={container:"audio/mp4",codec:t,initSegment:n,id:"audio"}:c.video?g.video={container:"video/mp4",codec:r,initSegment:n,id:"main"}:Qt.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=g}remux(n,t,r,c,g,v){var x,Y;let{initPTS:ie,lastEndTime:Me}=this;const Re={audio:void 0,video:void 0,text:c,id3:r,initSegment:void 0};cr(Me)||(Me=this.lastEndTime=g||0);const $e=t.samples;if(null==$e||!$e.length)return Re;const qe={initPTS:void 0,timescale:1};let ot=this.initData;if(null!=(x=ot)&&x.length||(this.generateInitSegment($e),ot=this.initData),null==(Y=ot)||!Y.length)return Qt.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),Re;this.emitInitSegment&&(qe.tracks=this.initTracks,this.emitInitSegment=!1);const gt=function um(f,n){let t=0,r=0,c=0;const g=$r(f,["moof","traf"]);for(let v=0;v<g.length;v++){const x=g[v],Y=$r(x,["tfhd"])[0],Me=n[Mr(Y,4)];if(!Me)continue;const Re=Me.default,$e=Mr(Y,0)|(null==Re?void 0:Re.flags);let qe=null==Re?void 0:Re.duration;8&$e&&(qe=Mr(Y,2&$e?12:8));const ot=Me.timescale||9e4,gt=$r(x,["trun"]);for(let Tt=0;Tt<gt.length;Tt++)t=rc(gt[Tt]),!t&&qe&&(t=qe*Mr(gt[Tt],4)),"video"===Me.type?r+=t/ot:"audio"===Me.type&&(c+=t/ot)}if(0===r&&0===c){let v=0;const x=$r(f,["sidx"]);for(let Y=0;Y<x.length;Y++){const ie=yg(x[Y]);null!=ie&&ie.references&&(v+=ie.references.reduce((Me,Re)=>Me+Re.info.duration||0,0))}return v}return r||c}($e,ot),Tt=function cm(f,n){return $r(n,["moof","traf"]).reduce((t,r)=>{const c=$r(r,["tfdt"])[0],g=c[0],v=$r(r,["tfhd"]).reduce((x,Y)=>{const ie=Mr(Y,4),Me=f[ie];if(Me){let Re=Mr(c,4);if(1===g){if(Re===Ys)return Qt.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),x;Re*=Ys+1,Re+=Mr(c,8)}const qe=Re/(Me.timescale||9e4);if(isFinite(qe)&&(null===x||qe<x))return qe}return x},null);return null!==v&&isFinite(v)&&(null===t||v<t)?v:t},null)}(ot,$e),$t=null===Tt?g:Tt;(function ss(f,n,t,r){if(null===f)return!0;const c=Math.max(r,1);return Math.abs(n-f.baseTime/f.timescale-t)>c}(ie,$t,g,gt)||qe.timescale!==ie.timescale&&v)&&(qe.initPTS=$t-g,ie&&1===ie.timescale&&Qt.warn("Adjusting initPTS by "+(qe.initPTS-ie.baseTime)),this.initPTS=ie={baseTime:qe.initPTS,timescale:1});const rn=n?$t-ie.baseTime/ie.timescale:Me,nn=rn+gt;(function Co(f,n,t){$r(n,["moof","traf"]).forEach(r=>{$r(r,["tfhd"]).forEach(c=>{const g=Mr(c,4),v=f[g];if(!v)return;const x=v.timescale||9e4;$r(r,["tfdt"]).forEach(Y=>{const ie=Y[0];let Me=Mr(Y,4);if(0===ie)Me-=t*x,Me=Math.max(Me,0),au(Y,4,Me);else{Me*=Math.pow(2,32),Me+=Mr(Y,8),Me-=t*x,Me=Math.max(Me,0);const Re=Math.floor(Me/(Ys+1)),$e=Math.floor(Me%(Ys+1));au(Y,4,Re),au(Y,8,$e)}})})})})(ot,$e,ie.baseTime/ie.timescale),gt>0?this.lastEndTime=nn:(Qt.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Sn=!!ot.audio,gn=!!ot.video;let Bn="";Sn&&(Bn+="audio"),gn&&(Bn+="video");const On={data1:$e,startPTS:rn,startDTS:rn,endPTS:nn,endDTS:nn,type:Bn,hasAudio:Sn,hasVideo:gn,nb:1,dropped:0};return Re.audio="audio"===On.type?On:void 0,Re.video="audio"!==On.type?On:void 0,Re.initSegment=qe,Re.id3=rh(r,g,ie,ie),c.samples.length&&(Re.text=Rg(c,g,ie)),Re}}},{demux:Ea,remux:Rd},{demux:class Qf extends qs{constructor(n,t){super(),this.observer=void 0,this.config=void 0,this.observer=n,this.config=t}resetInitSegment(n,t,r,c){super.resetInitSegment(n,t,r,c),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:c,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let r=(Va(n,0)||[]).length;for(let c=n.length;r<c;r++)if(Qs(n,r))return Qt.log("ADTS sync word found !"),!0;return!1}canParse(n,t){return function xl(f,n){return function Js(f,n){return n+5<f.length}(f,n)&&$a(f,n)&&va(f,n)<=f.length-n}(n,t)}appendFrame(n,t,r){vc(n,this.observer,t,r,n.manifestCodec);const c=Jf(n,t,r,this.basePTS,this.frameIndex);if(c&&0===c.missing)return c}},remux:Rd},{demux:class xu extends qs{resetInitSegment(n,t,r,c){super.resetInitSegment(n,t,r,c),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:c,inputTimeScale:9e4,dropped:0}}static probe(n){if(!n)return!1;let r=(Va(n,0)||[]).length;for(let c=n.length;r<c;r++)if(Au(n,r))return Qt.log("MPEG Audio sync word found !"),!0;return!1}canParse(n,t){return function bc(f,n){return Tc(f,n)&&4<=f.length-n}(n,t)}appendFrame(n,t,r){if(null!==this.basePTS)return qo(n,t,r,this.basePTS,this.frameIndex)}},remux:Rd}];class mm{constructor(n,t,r,c,g){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=n,this.typeSupported=t,this.config=r,this.vendor=c,this.id=g}configure(n){this.transmuxConfig=n,this.decrypter&&this.decrypter.reset()}push(n,t,r,c){const g=r.transmuxing;g.executeStart=Ta();let v=new Uint8Array(n);const{currentTransmuxState:x,transmuxConfig:Y}=this;c&&(this.currentTransmuxState=c);const{contiguous:ie,discontinuity:Me,trackSwitch:Re,accurateTimeOffset:$e,timeOffset:qe,initSegmentChange:ot}=c||x,{audioCodec:gt,videoCodec:Tt,defaultInitPts:$t,duration:rn,initSegmentData:nn}=Y,Sn=function Fg(f,n){let t=null;return f.byteLength>0&&null!=n&&null!=n.key&&null!==n.iv&&null!=n.method&&(t=n),t}(v,t);if(Sn&&"AES-128"===Sn.method){const Zn=this.getDecrypter();if(!Zn.isSync())return this.decryptionPromise=Zn.webCryptoDecrypt(v,Sn.key.buffer,Sn.iv.buffer).then(Jn=>{const Dn=this.push(Jn,null,r);return this.decryptionPromise=null,Dn}),this.decryptionPromise;{let Jn=Zn.softwareDecrypt(v,Sn.key.buffer,Sn.iv.buffer);if(r.part>-1&&(Jn=Zn.flush()),!Jn)return g.executeEnd=Ta(),kg(r);v=new Uint8Array(Jn)}}const gn=this.needsProbing(Me,Re);if(gn){const Zn=this.configureTransmuxer(v);if(Zn)return Qt.warn(`[transmuxer] ${Zn.message}`),this.observer.emit(at.ERROR,at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,fatal:!1,error:Zn,reason:Zn.message}),g.executeEnd=Ta(),kg(r)}(Me||Re||ot||gn)&&this.resetInitSegment(nn,gt,Tt,rn,t),(Me||ot||gn)&&this.resetInitialTimestamp($t),ie||this.resetContiguity();const Bn=this.transmux(v,Sn,qe,$e,r),On=this.currentTransmuxState;return On.contiguous=!0,On.discontinuity=!1,On.trackSwitch=!1,g.executeEnd=Ta(),Bn}flush(n){const t=n.transmuxing;t.executeStart=Ta();const{decrypter:r,currentTransmuxState:c,decryptionPromise:g}=this;if(g)return g.then(()=>this.flush(n));const v=[],{timeOffset:x}=c;if(r){const Re=r.flush();Re&&v.push(this.push(Re,null,n))}const{demuxer:Y,remuxer:ie}=this;if(!Y||!ie)return t.executeEnd=Ta(),[kg(n)];const Me=Y.flush(x);return Nd(Me)?Me.then(Re=>(this.flushRemux(v,Re,n),v)):(this.flushRemux(v,Me,n),v)}flushRemux(n,t,r){const{audioTrack:c,videoTrack:g,id3Track:v,textTrack:x}=t,{accurateTimeOffset:Y,timeOffset:ie}=this.currentTransmuxState;Qt.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const Me=this.remuxer.remux(c,g,v,x,ie,Y,!0,this.id);n.push({remuxResult:Me,chunkMeta:r}),r.transmuxing.executeEnd=Ta()}resetInitialTimestamp(n){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(n),r.resetTimeStamp(n))}resetContiguity(){const{demuxer:n,remuxer:t}=this;!n||!t||(n.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(n,t,r,c,g){const{demuxer:v,remuxer:x}=this;!v||!x||(v.resetInitSegment(n,t,r,c),x.resetInitSegment(n,t,r,g))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(n,t,r,c,g){let v;return v=t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(n,t,r,c,g):this.transmuxUnencrypted(n,r,c,g),v}transmuxUnencrypted(n,t,r,c){const{audioTrack:g,videoTrack:v,id3Track:x,textTrack:Y}=this.demuxer.demux(n,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(g,v,x,Y,t,r,!1,this.id),chunkMeta:c}}transmuxSampleAes(n,t,r,c,g){return this.demuxer.demuxSampleAes(n,t,r).then(v=>({remuxResult:this.remuxer.remux(v.audioTrack,v.videoTrack,v.id3Track,v.textTrack,r,c,!1,this.id),chunkMeta:g}))}configureTransmuxer(n){const{config:t,observer:r,typeSupported:c,vendor:g}=this;let v;for(let Re=0,$e=Lg.length;Re<$e;Re++)if(Lg[Re].demux.probe(n)){v=Lg[Re];break}if(!v)return new Error("Failed to find demuxer by probing fragment data");const x=this.demuxer,Y=this.remuxer,ie=v.remux,Me=v.demux;(!Y||!(Y instanceof ie))&&(this.remuxer=new ie(r,t,c,g)),(!x||!(x instanceof Me))&&(this.demuxer=new Me(r,t,c),this.probe=Me.probe)}needsProbing(n,t){return!this.demuxer||!this.remuxer||n||t}getDecrypter(){let n=this.decrypter;return n||(n=this.decrypter=new Xr(this.config)),n}}const kg=f=>({remuxResult:{},chunkMeta:f});function Nd(f){return"then"in f&&f.then instanceof Function}class oh{constructor(n,t,r,c,g){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=n,this.videoCodec=t,this.initSegmentData=r,this.duration=c,this.defaultInitPts=g||null}}class Bg{constructor(n,t,r,c,g,v){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=n,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=c,this.timeOffset=g,this.initSegmentChange=v}}var Ug={exports:{}};!function(f){var n=Object.prototype.hasOwnProperty,t="~";function r(){}function c(Y,ie,Me){this.fn=Y,this.context=ie,this.once=Me||!1}function g(Y,ie,Me,Re,$e){if("function"!=typeof Me)throw new TypeError("The listener must be a function");var qe=new c(Me,Re||Y,$e),ot=t?t+ie:ie;return Y._events[ot]?Y._events[ot].fn?Y._events[ot]=[Y._events[ot],qe]:Y._events[ot].push(qe):(Y._events[ot]=qe,Y._eventsCount++),Y}function v(Y,ie){0==--Y._eventsCount?Y._events=new r:delete Y._events[ie]}function x(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(t=!1)),x.prototype.eventNames=function(){var Me,Re,ie=[];if(0===this._eventsCount)return ie;for(Re in Me=this._events)n.call(Me,Re)&&ie.push(t?Re.slice(1):Re);return Object.getOwnPropertySymbols?ie.concat(Object.getOwnPropertySymbols(Me)):ie},x.prototype.listeners=function(ie){var Re=this._events[t?t+ie:ie];if(!Re)return[];if(Re.fn)return[Re.fn];for(var $e=0,qe=Re.length,ot=new Array(qe);$e<qe;$e++)ot[$e]=Re[$e].fn;return ot},x.prototype.listenerCount=function(ie){var Re=this._events[t?t+ie:ie];return Re?Re.fn?1:Re.length:0},x.prototype.emit=function(ie,Me,Re,$e,qe,ot){var gt=t?t+ie:ie;if(!this._events[gt])return!1;var rn,nn,Tt=this._events[gt],$t=arguments.length;if(Tt.fn){switch(Tt.once&&this.removeListener(ie,Tt.fn,void 0,!0),$t){case 1:return Tt.fn.call(Tt.context),!0;case 2:return Tt.fn.call(Tt.context,Me),!0;case 3:return Tt.fn.call(Tt.context,Me,Re),!0;case 4:return Tt.fn.call(Tt.context,Me,Re,$e),!0;case 5:return Tt.fn.call(Tt.context,Me,Re,$e,qe),!0;case 6:return Tt.fn.call(Tt.context,Me,Re,$e,qe,ot),!0}for(nn=1,rn=new Array($t-1);nn<$t;nn++)rn[nn-1]=arguments[nn];Tt.fn.apply(Tt.context,rn)}else{var gn,Sn=Tt.length;for(nn=0;nn<Sn;nn++)switch(Tt[nn].once&&this.removeListener(ie,Tt[nn].fn,void 0,!0),$t){case 1:Tt[nn].fn.call(Tt[nn].context);break;case 2:Tt[nn].fn.call(Tt[nn].context,Me);break;case 3:Tt[nn].fn.call(Tt[nn].context,Me,Re);break;case 4:Tt[nn].fn.call(Tt[nn].context,Me,Re,$e);break;default:if(!rn)for(gn=1,rn=new Array($t-1);gn<$t;gn++)rn[gn-1]=arguments[gn];Tt[nn].fn.apply(Tt[nn].context,rn)}}return!0},x.prototype.on=function(ie,Me,Re){return g(this,ie,Me,Re,!1)},x.prototype.once=function(ie,Me,Re){return g(this,ie,Me,Re,!0)},x.prototype.removeListener=function(ie,Me,Re,$e){var qe=t?t+ie:ie;if(!this._events[qe])return this;if(!Me)return v(this,qe),this;var ot=this._events[qe];if(ot.fn)ot.fn===Me&&(!$e||ot.once)&&(!Re||ot.context===Re)&&v(this,qe);else{for(var gt=0,Tt=[],$t=ot.length;gt<$t;gt++)(ot[gt].fn!==Me||$e&&!ot[gt].once||Re&&ot[gt].context!==Re)&&Tt.push(ot[gt]);Tt.length?this._events[qe]=1===Tt.length?Tt[0]:Tt:v(this,qe)}return this},x.prototype.removeAllListeners=function(ie){var Me;return ie?this._events[Me=t?t+ie:ie]&&v(this,Me):(this._events=new r,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=t,x.EventEmitter=x,f.exports=x}(Ug);var sh=Xu(Ug.exports);const Ld=oc()||{isTypeSupported:()=>!1};class jg{constructor(n,t,r,c){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const g=n.config;this.hls=n,this.id=t,this.useWorker=!!g.enableWorker,this.onTransmuxComplete=r,this.onFlush=c;const v=(ie,Me)=>{(Me=Me||{}).frag=this.frag,Me.id=this.id,ie===at.ERROR&&(this.error=Me.error),this.hls.trigger(ie,Me)};this.observer=new sh,this.observer.on(at.FRAG_DECRYPTED,v),this.observer.on(at.ERROR,v);const x={mp4:Ld.isTypeSupported("video/mp4"),mpeg:Ld.isTypeSupported("audio/mpeg"),mp3:Ld.isTypeSupported('audio/mp4; codecs="mp3"')},Y=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker&&(g.workerPath||function Ds(){return"function"==typeof __HLS_WORKER_BUNDLE__}()))try{g.workerPath?(Qt.log(`loading Web Worker ${g.workerPath} for "${t}"`),this.workerContext=function Bo(f){const n=new self.URL(f,self.location.href).href;return{worker:new self.Worker(n),scriptURL:n}}(g.workerPath)):(Qt.log(`injecting Web Worker for "${t}"`),this.workerContext=function fo(){const f=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(f);return{worker:new self.Worker(n),objectURL:n}}()),this.onwmsg=Re=>this.onWorkerMessage(Re);const{worker:Me}=this.workerContext;Me.addEventListener("message",this.onwmsg),Me.onerror=Re=>{const $e=new Error(`${Re.message}  (${Re.filename}:${Re.lineno})`);g.enableWorker=!1,Qt.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(at.ERROR,{type:pr.OTHER_ERROR,details:mn.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:$e})},Me.postMessage({cmd:"init",typeSupported:x,vendor:Y,id:t,config:JSON.stringify(g)})}catch(Me){Qt.warn(`Error setting up "${t}" Web Worker, fallback to inline`,Me),this.resetWorker(),this.error=null,this.transmuxer=new mm(this.observer,x,g,Y,t)}else this.transmuxer=new mm(this.observer,x,g,Y,t)}resetWorker(){if(this.workerContext){const{worker:n,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),n.removeEventListener("message",this.onwmsg),n.onerror=null,n.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(n,t,r,c,g,v,x,Y,ie,Me){var Re,$e;ie.transmuxing.start=self.performance.now();const{transmuxer:qe}=this,ot=v?v.start:g.start,gt=g.decryptdata,Tt=this.frag,$t=!(Tt&&g.cc===Tt.cc),rn=!(Tt&&ie.level===Tt.level),nn=Tt?ie.sn-Tt.sn:-1,Sn=this.part?ie.part-this.part.index:-1,Bn=!rn&&(1===nn||0===nn&&(1===Sn||0===nn&&ie.id>1&&ie.id===(null==Tt?void 0:Tt.stats.chunkCount)&&Sn<=0)),On=self.performance.now();(rn||nn||0===g.stats.parsing.start)&&(g.stats.parsing.start=On),v&&(Sn||!Bn)&&(v.stats.parsing.start=On);const Zn=!(Tt&&(null==(Re=g.initSegment)?void 0:Re.url)===(null==($e=Tt.initSegment)?void 0:$e.url)),Jn=new Bg($t,Bn,Y,rn,ot,Zn);if(!Bn||$t||Zn){Qt.log(`[transmuxer-interface, ${g.type}]: Starting new transmux session for sn: ${ie.sn} p: ${ie.part} level: ${ie.level} id: ${ie.id}\n        discontinuity: ${$t}\n        trackSwitch: ${rn}\n        contiguous: ${Bn}\n        accurateTimeOffset: ${Y}\n        timeOffset: ${ot}\n        initSegmentChange: ${Zn}`);const Dn=new oh(r,c,t,x,Me);this.configureTransmuxer(Dn)}if(this.frag=g,this.part=v,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:n,decryptdata:gt,chunkMeta:ie,state:Jn},n instanceof ArrayBuffer?[n]:[]);else if(qe){const Dn=qe.push(n,gt,ie,Jn);Nd(Dn)?(qe.async=!0,Dn.then(_r=>{this.handleTransmuxComplete(_r)}).catch(_r=>{this.transmuxerError(_r,ie,"transmuxer-interface push error")})):(qe.async=!1,this.handleTransmuxComplete(Dn))}}flush(n){n.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:n});else if(t){let r=t.flush(n);Nd(r)||t.async?(Nd(r)||(r=Promise.resolve(r)),r.then(g=>{this.handleFlushResult(g,n)}).catch(g=>{this.transmuxerError(g,n,"transmuxer-interface flush error")})):this.handleFlushResult(r,n)}}transmuxerError(n,t,r){!this.hls||(this.error=n,this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:n,err:n,reason:r}))}handleFlushResult(n,t){n.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}onWorkerMessage(n){const t=n.data,r=this.hls;switch(t.event){case"init":{var c;const g=null==(c=this.workerContext)?void 0:c.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":Qt[t.data.logType]&&Qt[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}}configureTransmuxer(n){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:n}):t&&t.configure(n)}handleTransmuxComplete(n){n.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(n)}}class Hg{constructor(n,t,r,c){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=n,this.media=t,this.fragmentTracker=r,this.hls=c}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(n,t){const{config:r,media:c,stalled:g}=this;if(null===c)return;const{currentTime:v,seeking:x}=c,Y=this.seeking&&!x,ie=!this.seeking&&x;if(this.seeking=x,v!==n){if(this.moved=!0,null!==g){if(this.stallReported){const $t=self.performance.now()-g;Qt.warn(`playback not stuck anymore @${v}, after ${Math.round($t)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(ie||Y)return void(this.stalled=null);if(c.paused&&!x||c.ended||0===c.playbackRate||!Lt.getBuffered(c).length)return;const Me=Lt.bufferInfo(c,v,0),$e=Me.nextStart||0;if(!(Me.len>0||$e))return;if(x){const $t=Me.len>2,rn=!$e||t&&t.start<=v||$e-v>2&&!this.fragmentTracker.getPartialFragment(v);if($t||rn)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var qe;const $t=Math.max($e,Me.start||0)-v,rn=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,Sn=(null==rn||null==(qe=rn.details)?void 0:qe.live)?2*rn.details.targetduration:2,gn=this.fragmentTracker.getPartialFragment(v);if($t>0&&($t<=Sn||gn))return void this._trySkipBufferHole(gn)}const ot=self.performance.now();if(null===g)return void(this.stalled=ot);const gt=ot-g;if(!x&&gt>=250&&(this._reportStall(Me),!this.media))return;const Tt=Lt.bufferInfo(c,v,r.maxBufferHole);this._tryFixBufferStall(Tt,gt)}_tryFixBufferStall(n,t){const{config:r,fragmentTracker:c,media:g}=this;if(null===g)return;const v=g.currentTime,x=c.getPartialFragment(v);x&&(this._trySkipBufferHole(x)||!this.media)||(n.len>r.maxBufferHole||n.nextStart&&n.nextStart-v<r.maxBufferHole)&&t>1e3*r.highBufferWatchdogPeriod&&(Qt.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(n){const{hls:t,media:r,stallReported:c}=this;if(!c&&r){this.stallReported=!0;const g=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(n)})`);Qt.warn(g.message),t.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_STALLED_ERROR,fatal:!1,error:g,buffer:n.len})}}_trySkipBufferHole(n){const{config:t,hls:r,media:c}=this;if(null===c)return 0;const g=c.currentTime,v=Lt.bufferInfo(c,g,0),x=g<v.start?v.start:v.nextStart;if(x){const Y=v.len<=t.maxBufferHole,ie=v.len>0&&v.len<1&&c.readyState<3,Me=x-g;if(Me>0&&(Y||ie)){if(Me>t.maxBufferHole){const{fragmentTracker:$e}=this;let qe=!1;if(0===g){const ot=$e.getAppendedFrag(0,"main");ot&&x<ot.end&&(qe=!0)}if(!qe){const ot=n||$e.getAppendedFrag(g,"main");if(ot){let gt=!1,Tt=ot.end;for(;Tt<x;){const $t=$e.getPartialFragment(Tt);if(!$t){gt=!0;break}Tt+=$t.duration}if(gt)return 0}}}const Re=Math.max(x+.05,g+.1);if(Qt.warn(`skipping hole, adjusting currentTime from ${g} to ${Re}`),this.moved=!0,this.stalled=null,c.currentTime=Re,n&&!n.gap){const $e=new Error(`fragment loaded with buffer holes, seeking from ${g} to ${Re}`);r.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:$e,reason:$e.message,frag:n})}return Re}}return 0}_tryNudgeBuffer(){const{config:n,hls:t,media:r,nudgeRetry:c}=this;if(null===r)return;const g=r.currentTime;if(this.nudgeRetry++,c<n.nudgeMaxRetry){const v=g+(c+1)*n.nudgeOffset,x=new Error(`Nudging 'currentTime' from ${g} to ${v}`);Qt.warn(x.message),r.currentTime=v,t.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_NUDGE_ON_STALL,error:x,fatal:!1})}else{const v=new Error(`Playhead still not moving while enough data buffered @${g} after ${n.nudgeMaxRetry} nudges`);Qt.error(v.message),t.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_STALLED_ERROR,error:v,fatal:!0})}}}class ea extends Fi{constructor(n,t,r){super(n,t,r,"[stream-controller]","main"),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.LEVEL_LOADING,this.onLevelLoading,this),n.on(at.LEVEL_LOADED,this.onLevelLoaded,this),n.on(at.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.on(at.ERROR,this.onError,this),n.on(at.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(at.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.on(at.BUFFER_CREATED,this.onBufferCreated,this),n.on(at.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(at.LEVELS_UPDATED,this.onLevelsUpdated,this),n.on(at.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.LEVEL_LOADED,this.onLevelLoaded,this),n.off(at.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),n.off(at.ERROR,this.onError,this),n.off(at.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(at.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),n.off(at.BUFFER_CREATED,this.onBufferCreated,this),n.off(at.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(at.LEVELS_UPDATED,this.onLevelsUpdated,this),n.off(at.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(n){if(this.levels){const{lastCurrentTime:t,hls:r}=this;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){let c=r.startLevel;-1===c&&(r.config.testBandwidth&&this.levels.length>1?(c=0,this.bitrateTest=!0):c=r.nextAutoLevel),this.level=r.nextLoadLevel=c,this.loadedmetadata=!1}t>0&&-1===n&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),n=t),this.state="IDLE",this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}else this._forceStartLoad=!0,this.state="STOPPED"}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case"WAITING_LEVEL":{var n;const{levels:r,level:c}=this,g=null==r||null==(n=r[c])?void 0:n.details;if(g&&(!g.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(g))break;this.state="IDLE";break}if(this.hls.nextLoadLevel!==this.level){this.state="IDLE";break}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const r=self.performance.now(),c=this.retryDate;(!c||r>=c||null!=(t=this.media)&&t.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state="IDLE")}}"IDLE"===this.state&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:n,levelLastLoaded:t,levels:r,media:c}=this,{config:g,nextLoadLevel:v}=n;if(null===t||!c&&(this.startFragRequested||!g.startFragPrefetch)||this.altAudio&&this.audioOnly||null==r||!r[v])return;const x=r[v],Y=this.getMainFwdBufferInfo();if(null===Y)return;const ie=this.getLevelDetails();if(ie&&this._streamEnded(Y,ie)){const Tt={};return this.altAudio&&(Tt.type="video"),this.hls.trigger(at.BUFFER_EOS,Tt),void(this.state="ENDED")}n.loadLevel!==v&&-1===n.manualLevel&&this.log(`Adapting to level ${v} from level ${this.level}`),this.level=n.nextLoadLevel=v;const Me=x.details;if(!Me||"WAITING_LEVEL"===this.state||Me.live&&this.levelLastLoaded!==v)return this.level=v,void(this.state="WAITING_LEVEL");const Re=Y.len,$e=this.getMaxBufferLength(x.maxBitrate);if(Re>=$e)return;this.backtrackFragment&&this.backtrackFragment.start>Y.end&&(this.backtrackFragment=null);const qe=this.backtrackFragment?this.backtrackFragment.start:Y.end;let ot=this.getNextFragment(qe,Me);if(this.couldBacktrack&&!this.fragPrevious&&ot&&"initSegment"!==ot.sn&&"OK"!==this.fragmentTracker.getState(ot)){var gt;const $t=(null!=(gt=this.backtrackFragment)?gt:ot).sn-Me.startSN,rn=Me.fragments[$t-1];rn&&ot.cc===rn.cc&&(ot=rn,this.fragmentTracker.removeFragment(rn))}else this.backtrackFragment&&Y.len&&(this.backtrackFragment=null);if(ot&&this.isLoopLoading(ot,qe)){if(!ot.gap){const $t=this.audioOnly&&!this.altAudio?"audio":"video",rn=("video"===$t?this.videoBuffer:this.mediaBuffer)||this.media;rn&&this.afterBufferFlushed(rn,$t,"main")}ot=this.getNextFragmentLoopLoading(ot,Me,Y,"main",$e)}!ot||(ot.initSegment&&!ot.initSegment.data&&!this.bitrateTest&&(ot=ot.initSegment),this.loadFragment(ot,x,qe))}loadFragment(n,t,r){const c=this.fragmentTracker.getState(n);this.fragCurrent=n,"NOT_LOADED"===c||"PARTIAL"===c?"initSegment"===n.sn?this._loadInitSegment(n,t):this.bitrateTest?(this.log(`Fragment ${n.sn} of level ${n.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(n,t)):(this.startFragRequested=!0,super.loadFragment(n,t,r)):this.clearTrackerIfNeeded(n)}getBufferedFrag(n){return this.fragmentTracker.getBufferedFrag(n,"main")}followingBufferedFrag(n){return n?this.getBufferedFrag(n.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:n,media:t}=this;if(null!=t&&t.readyState){let r;const c=this.getAppendedFrag(t.currentTime);c&&c.start>1&&this.flushMainBuffer(0,c.start-1);const g=this.getLevelDetails();if(null!=g&&g.live){const x=this.getMainFwdBufferInfo();if(!x||x.len<2*g.targetduration)return}if(!t.paused&&n){const Y=n[this.hls.nextLoadLevel],ie=this.fragLastKbps;r=ie&&this.fragCurrent?this.fragCurrent.duration*Y.maxBitrate/(1e3*ie)+1:0}else r=0;const v=this.getBufferedFrag(t.currentTime+r);if(v){const x=this.followingBufferedFrag(v);if(x){this.abortCurrentFrag();const ie=x.duration,Me=Math.max(v.end,(x.maxStartPTS?x.maxStartPTS:x.start)+Math.min(Math.max(ie-this.config.maxFragLookUpTolerance,.5*ie),.75*ie));this.flushMainBuffer(Me,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const n=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,n&&(n.abortRequests(),this.fragmentTracker.removeFragment(n)),this.state){case"KEY_LOADING":case"FRAG_LOADING":case"FRAG_LOADING_WAITING_RETRY":case"PARSING":case"PARSED":this.state="IDLE"}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(n,t){super.flushMainBuffer(n,t,this.altAudio?"video":null)}onMediaAttached(n,t){super.onMediaAttached(n,t);const r=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new Hg(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:n}=this;n&&this.onvplaying&&this.onvseeked&&(n.removeEventListener("playing",this.onvplaying),n.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const n=this.media,t=n?n.currentTime:null;cr(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`)}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(at.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(n,t){let g,r=!1,c=!1;t.levels.forEach(v=>{g=v.audioCodec,g&&(-1!==g.indexOf("mp4a.40.2")&&(r=!0),-1!==g.indexOf("mp4a.40.5")&&(c=!0))}),this.audioCodecSwitch=r&&c&&!function vs(){var f;const n=os();return"function"==typeof(null==n||null==(f=n.prototype)?void 0:f.changeType)}(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(n,t){const{levels:r}=this;if(!r||"IDLE"!==this.state)return;const c=r[t.level];(!c.details||c.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(c.details))&&(this.state="WAITING_LEVEL")}onLevelLoaded(n,t){var r;const{levels:c}=this,g=t.level,v=t.details,x=v.totalduration;if(!c)return void this.warn(`Levels were reset while loading level ${g}`);this.log(`Level ${g} loaded [${v.startSN},${v.endSN}]${v.lastPartSn?`[part-${v.lastPartSn}-${v.lastPartIndex}]`:""}, cc [${v.startCC}, ${v.endCC}] duration:${x}`);const Y=c[g],ie=this.fragCurrent;ie&&("FRAG_LOADING"===this.state||"FRAG_LOADING_WAITING_RETRY"===this.state)&&(ie.level!==t.level||ie.urlId!==Y.urlId)&&ie.loader&&this.abortCurrentFrag();let Me=0;if(v.live||null!=(r=Y.details)&&r.live){if(v.fragments[0]||(v.deltaUpdateFailed=!0),v.deltaUpdateFailed)return;Me=this.alignPlaylists(v,Y.details)}if(Y.details=v,this.levelLastLoaded=g,this.hls.trigger(at.LEVEL_UPDATED,{details:v,level:g}),"WAITING_LEVEL"===this.state){if(this.waitForCdnTuneIn(v))return;this.state="IDLE"}this.startFragRequested?v.live&&this.synchronizeToLiveEdge(v):this.setStartPosition(v,Me),this.tick()}_handleFragmentLoadProgress(n){var t;const{frag:r,part:c,payload:g}=n,{levels:v}=this;if(!v)return void this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const x=v[r.level],Y=x.details;if(!Y)return this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),void this.fragmentTracker.removeFragment(r);const ie=x.videoCodec,Me=Y.PTSKnown||!Y.live,Re=null==(t=r.initSegment)?void 0:t.data,$e=this._getAudioCodec(x),qe=this.transmuxer=this.transmuxer||new jg(this.hls,"main",this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),ot=c?c.index:-1,Tt=new Ht(r.level,r.sn,r.stats.chunkCount,g.byteLength,ot,-1!==ot);qe.push(g,Re,$e,ie,r,c,Y.totalduration,Me,Tt,this.initPTS[r.cc])}onAudioTrackSwitching(n,t){const r=this.altAudio;if(!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const v=this.fragCurrent;v&&(this.log("Switching to main audio track, cancel main fragment load"),v.abortRequests(),this.fragmentTracker.removeFragment(v)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const g=this.hls;r&&(g.trigger(at.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),g.trigger(at.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(n,t){const c=!!this.hls.audioTracks[t.id].url;if(c){const g=this.videoBuffer;g&&this.mediaBuffer!==g&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=g)}this.altAudio=c,this.tick()}onBufferCreated(n,t){const r=t.tracks;let c,g,v=!1;for(const x in r){const Y=r[x];if("main"===Y.id){if(g=x,c=Y,"video"===x){const ie=r[x];ie&&(this.videoBuffer=ie.buffer)}}else v=!0}v&&c?(this.log(`Alternate track found, use ${g}.buffered to schedule main fragment loading`),this.mediaBuffer=c.buffer):this.mediaBuffer=this.media}onFragBuffered(n,t){const{frag:r,part:c}=t;if(r&&"main"!==r.type)return;if(this.fragContextChanged(r))return this.warn(`Fragment ${r.sn}${c?" p: "+c.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),void("PARSED"===this.state&&(this.state="IDLE"));const g=c?c.stats:r.stats;this.fragLastKbps=Math.round(8*g.total/(g.buffering.end-g.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,c)}onError(n,t){var r;if(t.fatal)this.state="ERROR";else switch(t.details){case mn.FRAG_GAP:case mn.FRAG_PARSING_ERROR:case mn.FRAG_DECRYPT_ERROR:case mn.FRAG_LOAD_ERROR:case mn.FRAG_LOAD_TIMEOUT:case mn.KEY_LOAD_ERROR:case mn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError("main",t);break;case mn.LEVEL_LOAD_ERROR:case mn.LEVEL_LOAD_TIMEOUT:case mn.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_LEVEL"===this.state&&"level"===(null==(r=t.context)?void 0:r.type)&&(this.state="IDLE");break;case mn.BUFFER_FULL_ERROR:if(!t.parent||"main"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case mn.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}checkBuffer(){const{media:n,gapController:t}=this;n&&t&&n.readyState&&(!this.loadedmetadata&&Lt.getBuffered(n).length||t.poll(this.lastCurrentTime,"IDLE"!==this.state?this.fragCurrent:null),this.lastCurrentTime=n.currentTime)}onFragLoadEmergencyAborted(){this.state="IDLE",this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(n,{type:t}){("audio"!==t||this.audioOnly&&!this.altAudio)&&this.afterBufferFlushed(("video"===t?this.videoBuffer:this.mediaBuffer)||this.media,t,"main")}onLevelsUpdated(n,t){this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:n}=this;if(!n)return;const t=n.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(n.seeking)return void this.log(`could not seek to ${r}, already seeking at ${t}`);const c=Lt.getBuffered(n),v=(c.length?c.start(0):0)-r;v>0&&(v<this.config.maxBufferHole||v<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${v} to match buffer start`),r+=v,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${t}`),n.currentTime=r}}_getAudioCodec(n){let t=this.config.defaultAudioCodec||n.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t}_loadBitrateTestFrag(n,t){n.bitrateTest=!0,this._doFragLoad(n,t).then(r=>{const{hls:c}=this;if(!r||this.fragContextChanged(n))return;t.fragmentError=0,this.state="IDLE",this.startFragRequested=!1,this.bitrateTest=!1;const g=n.stats;g.parsing.start=g.parsing.end=g.buffering.start=g.buffering.end=self.performance.now(),c.trigger(at.FRAG_LOADED,r),n.bitrateTest=!1})}_handleTransmuxComplete(n){var t;const r="main",{hls:c}=this,{remuxResult:g,chunkMeta:v}=n,x=this.getCurrentContext(v);if(!x)return void this.resetWhenMissingContext(v);const{frag:Y,part:ie,level:Me}=x,{video:Re,text:$e,id3:qe,initSegment:ot}=g,{details:gt}=Me,Tt=this.altAudio?void 0:g.audio;if(this.fragContextChanged(Y))return void this.fragmentTracker.removeFragment(Y);if(this.state="PARSING",ot){if(null!=ot&&ot.tracks){const Sn=Y.initSegment||Y;this._bufferInitSegment(Me,ot.tracks,Sn,v),c.trigger(at.FRAG_PARSING_INIT_SEGMENT,{frag:Sn,id:r,tracks:ot.tracks})}const rn=ot.initPTS,nn=ot.timescale;cr(rn)&&(this.initPTS[Y.cc]={baseTime:rn,timescale:nn},c.trigger(at.INIT_PTS_FOUND,{frag:Y,id:r,initPTS:rn,timescale:nn}))}const $t=Y.sn!==(null==gt?void 0:gt.startSN);if(Re&&!1!==g.independent){if(gt){const{startPTS:rn,endPTS:nn,startDTS:Sn,endDTS:gn}=Re;if(ie)ie.elementaryStreams[Re.type]={startPTS:rn,endPTS:nn,startDTS:Sn,endDTS:gn};else if(Re.firstKeyFrame&&Re.independent&&1===v.id&&(this.couldBacktrack=!0),Re.dropped&&Re.independent){const Bn=this.getMainFwdBufferInfo(),On=(Bn?Bn.end:this.getLoadPosition())+this.config.maxBufferHole,Zn=Re.firstKeyFramePTS?Re.firstKeyFramePTS:rn;if($t&&On<Zn-this.config.maxBufferHole)return void this.backtrack(Y);Y.setElementaryStreamInfo(Re.type,Y.start,nn,Y.start,gn,!0)}Y.setElementaryStreamInfo(Re.type,rn,nn,Sn,gn),this.backtrackFragment&&(this.backtrackFragment=Y),this.bufferFragmentData(Re,Y,ie,v)}}else if($t&&!1===g.independent)return void this.backtrack(Y);if(Tt){const{startPTS:rn,endPTS:nn,startDTS:Sn,endDTS:gn}=Tt;ie&&(ie.elementaryStreams.audio={startPTS:rn,endPTS:nn,startDTS:Sn,endDTS:gn}),Y.setElementaryStreamInfo("audio",rn,nn,Sn,gn),this.bufferFragmentData(Tt,Y,ie,v)}gt&&null!=qe&&null!=(t=qe.samples)&&t.length&&c.trigger(at.FRAG_PARSING_METADATA,{id:r,frag:Y,details:gt,samples:qe.samples}),gt&&$e&&c.trigger(at.FRAG_PARSING_USERDATA,{id:r,frag:Y,details:gt,samples:$e.samples})}_bufferInitSegment(n,t,r,c){if("PARSING"!==this.state)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:g,video:v,audiovideo:x}=t;if(g){let Y=n.audioCodec;const ie=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(Y&&(Y=-1!==Y.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==g.metadata.channelCount&&-1===ie.indexOf("firefox")&&(Y="mp4a.40.5")),-1!==ie.indexOf("android")&&"audio/mpeg"!==g.container&&(Y="mp4a.40.2",this.log(`Android: force audio codec to ${Y}`)),n.audioCodec&&n.audioCodec!==Y&&this.log(`Swapping manifest audio codec "${n.audioCodec}" for "${Y}"`),g.levelCodec=Y,g.id="main",this.log(`Init audio buffer, container:${g.container}, codecs[selected/level/parsed]=[${Y||""}/${n.audioCodec||""}/${g.codec}]`)}v&&(v.levelCodec=n.videoCodec,v.id="main",this.log(`Init video buffer, container:${v.container}, codecs[level/parsed]=[${n.videoCodec||""}/${v.codec}]`)),x&&this.log(`Init audiovideo buffer, container:${x.container}, codecs[level/parsed]=[${n.attrs.CODECS||""}/${x.codec}]`),this.hls.trigger(at.BUFFER_CODECS,t),Object.keys(t).forEach(Y=>{const Me=t[Y].initSegment;null!=Me&&Me.byteLength&&this.hls.trigger(at.BUFFER_APPENDING,{type:Y,data:Me,frag:r,part:null,chunkMeta:c,parent:r.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,"main")}backtrack(n){this.couldBacktrack=!0,this.backtrackFragment=n,this.resetTransmuxer(),this.flushBufferGap(n),this.fragmentTracker.removeFragment(n),this.fragPrevious=null,this.nextLoadPosition=n.start,this.state="IDLE"}checkFragmentChanged(){const n=this.media;let t=null;if(n&&n.readyState>1&&!1===n.seeking){const r=n.currentTime;if(Lt.isBuffered(n,r)?t=this.getAppendedFrag(r):Lt.isBuffered(n,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const c=this.fragPlaying,g=t.level;(!c||t.sn!==c.sn||c.level!==g||t.urlId!==c.urlId)&&(this.fragPlaying=t,this.hls.trigger(at.FRAG_CHANGED,{frag:t}),(!c||c.level!==g)&&this.hls.trigger(at.LEVEL_SWITCHED,{level:g}))}}}get nextLevel(){const n=this.nextBufferedFrag;return n?n.level:-1}get currentFrag(){const n=this.media;return n?this.fragPlaying||this.getAppendedFrag(n.currentTime):null}get currentProgramDateTime(){const n=this.media;if(n){const t=n.currentTime,r=this.currentFrag;if(r&&cr(t)&&cr(r.programDateTime))return new Date(r.programDateTime+1e3*(t-r.start))}return null}get currentLevel(){const n=this.currentFrag;return n?n.level:-1}get nextBufferedFrag(){const n=this.currentFrag;return n?this.followingBufferedFrag(n):null}get forceStartLoad(){return this._forceStartLoad}}class Qa{constructor(n,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=n,this.alpha_=n?Math.exp(Math.log(.5)/n):0,this.estimate_=t,this.totalWeight_=r}sample(n,t){const r=Math.pow(this.alpha_,n);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=n}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const n=1-Math.pow(this.alpha_,this.totalWeight_);if(n)return this.estimate_/n}return this.estimate_}}class Em{constructor(n,t,r,c=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Qa(n),this.fast_=new Qa(t),this.defaultTTFB_=c,this.ttfb_=new Qa(n)}update(n,t){const{slow_:r,fast_:c,ttfb_:g}=this;r.halfLife!==n&&(this.slow_=new Qa(n,r.getEstimate(),r.getTotalWeight())),c.halfLife!==t&&(this.fast_=new Qa(t,c.getEstimate(),c.getTotalWeight())),g.halfLife!==n&&(this.ttfb_=new Qa(n,g.getEstimate(),g.getTotalWeight()))}sample(n,t){const c=(n=Math.max(n,this.minDelayMs_))/1e3,g=8*t/c;this.fast_.sample(c,g),this.slow_.sample(c,g)}sampleTTFB(n){const t=n/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(n,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class bm{constructor(){this.chunks=[],this.dataLength=0}push(n){this.chunks.push(n),this.dataLength+=n.length}flush(){const{chunks:n,dataLength:t}=this;let r;return n.length?(r=1===n.length?n[0]:function Zg(f,n){const t=new Uint8Array(n);let r=0;for(let c=0;c<f.length;c++){const g=f[c];t.set(g,r),r+=g.length}return t}(n,t),this.reset(),r):new Uint8Array(0)}reset(){this.chunks.length=0,this.dataLength=0}}function Fd(f,n){if(f.length!==n.length)return!1;for(let t=0;t<f.length;t++)if(!Mm(f[t].attrs,n[t].attrs))return!1;return!0}function Mm(f,n){const t=f["STABLE-RENDITION-ID"];return t?t===n["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(r=>f[r]!==n[r])}class lh{constructor(n){this.buffered=void 0;const t=(r,c,g)=>{if((c>>>=0)>g-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${c}) is greater than the maximum bound (${g})`);return n[c][r]};this.buffered={get length(){return n.length},end:r=>t("end",r,n.length),start:r=>t("start",r,n.length)}}}function Ou(f){const n=[];for(let t=0;t<f.length;t++){const r=f[t];("subtitles"===r.kind||"captions"===r.kind)&&r.label&&n.push(f[t])}return n}class ch{constructor(n){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=n}append(n,t){const r=this.queues[t];r.push(n),1===r.length&&this.buffers[t]&&this.executeNext(t)}insertAbort(n,t){this.queues[t].unshift(n),this.executeNext(t)}appendBlocker(n){let t;const r=new Promise(g=>{t=g});return this.append({execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}},n),r}executeNext(n){const{buffers:t,queues:r}=this,c=t[n],g=r[n];if(g.length){const v=g[0];try{v.execute()}catch(x){Qt.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),v.onError(x),null!=c&&c.updating||(g.shift(),this.executeNext(n))}}}shiftAndExecuteNext(n){this.queues[n].shift(),this.executeNext(n)}current(n){return this.queues[n][0]}}const uh=oc(),Yg=/([ha]vc.)(?:\.[^.,]+)+/,Bd={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Am=function(n){let t=n;return Bd.hasOwnProperty(n)&&(t=Bd[n]),String.fromCharCode(t)},ta=100,$g={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},zg={17:2,18:4,21:6,22:8,23:10,19:13,20:15},qg={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Jg={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ba=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Ud{constructor(){this.time=null,this.verboseLevel=0}log(n,t){if(this.verboseLevel>=n){const r="function"==typeof t?t():t;Qt.log(`${this.time} [${n}] ${r}`)}}}const Fl=function(n){const t=[];for(let r=0;r<n.length;r++)t.push(n[r].toString(16));return t};class Qg{constructor(n,t,r,c,g){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=n||"white",this.underline=t||!1,this.italics=r||!1,this.background=c||"black",this.flash=g||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(n){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const c=t[r];n.hasOwnProperty(c)&&(this[c]=n[c])}}isDefault(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash}equals(n){return this.foreground===n.foreground&&this.underline===n.underline&&this.italics===n.italics&&this.background===n.background&&this.flash===n.flash}copy(n){this.foreground=n.foreground,this.underline=n.underline,this.italics=n.italics,this.background=n.background,this.flash=n.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class sv{constructor(n,t,r,c,g,v){this.uchar=void 0,this.penState=void 0,this.uchar=n||" ",this.penState=new Qg(t,r,c,g,v)}reset(){this.uchar=" ",this.penState.reset()}setChar(n,t){this.uchar=n,this.penState.copy(t)}setPenState(n){this.penState.copy(n)}equals(n){return this.uchar===n.uchar&&this.penState.equals(n.penState)}copy(n){this.uchar=n.uchar,this.penState.copy(n.penState)}isEmpty(){return" "===this.uchar&&this.penState.isDefault()}}class dh{constructor(n){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let t=0;t<ta;t++)this.chars.push(new sv);this.logger=n,this.pos=0,this.currPenState=new Qg}equals(n){let t=!0;for(let r=0;r<ta;r++)if(!this.chars[r].equals(n.chars[r])){t=!1;break}return t}copy(n){for(let t=0;t<ta;t++)this.chars[t].copy(n.chars[t])}isEmpty(){let n=!0;for(let t=0;t<ta;t++)if(!this.chars[t].isEmpty()){n=!1;break}return n}setCursor(n){this.pos!==n&&(this.pos=n),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>ta&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=ta)}moveCursor(n){const t=this.pos+n;if(n>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(n){n>=144&&this.backSpace();const t=Am(n);this.pos>=ta?this.logger.log(0,()=>"Cannot insert "+n.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))}clearFromPos(n){let t;for(t=n;t<ta;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const n=[];let t=!0;for(let r=0;r<ta;r++){const c=this.chars[r].uchar;" "!==c&&(t=!1),n.push(c)}return t?"":n.join("")}setPenStyles(n){this.currPenState.setStyles(n),this.chars[this.pos].setPenState(this.currPenState)}}class jd{constructor(n){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let t=0;t<15;t++)this.rows.push(new dh(n));this.logger=n,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let n=0;n<15;n++)this.rows[n].clear();this.currRow=14}equals(n){let t=!0;for(let r=0;r<15;r++)if(!this.rows[r].equals(n.rows[r])){t=!1;break}return t}copy(n){for(let t=0;t<15;t++)this.rows[t].copy(n.rows[t])}isEmpty(){let n=!0;for(let t=0;t<15;t++)if(!this.rows[t].isEmpty()){n=!1;break}return n}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(n){this.rows[this.currRow].insertChar(n)}setPen(n){this.rows[this.currRow].setPenStyles(n)}moveCursor(n){this.rows[this.currRow].moveCursor(n)}setCursor(n){this.logger.log(2,"setCursor: "+n),this.rows[this.currRow].setCursor(n)}setPAC(n){this.logger.log(2,()=>"pacData = "+JSON.stringify(n));let t=n.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let x=0;x<15;x++)this.rows[x].clear();const g=this.currRow+1-this.nrRollUpRows,v=this.lastOutputScreen;if(v){const x=v.rows[g].cueStartTime,Y=this.logger.time;if(x&&null!==Y&&x<Y)for(let ie=0;ie<this.nrRollUpRows;ie++)this.rows[t-this.nrRollUpRows+ie+1].copy(v.rows[g+ie])}}this.currRow=t;const r=this.rows[this.currRow];if(null!==n.indent){const v=Math.max(n.indent-1,0);r.setCursor(n.indent),n.color=r.chars[v].penState.foreground}this.setPen({foreground:n.color,underline:n.underline,italics:n.italics,background:"black",flash:!1})}setBkgData(n){this.logger.log(2,()=>"bkgData = "+JSON.stringify(n)),this.backSpace(),this.setPen(n),this.insertChar(32)}setRollUpRows(n){this.nrRollUpRows=n}rollUp(){if(null===this.nrRollUpRows)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const t=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(n){n=n||!1;const t=[];let r="",c=-1;for(let g=0;g<15;g++){const v=this.rows[g].getTextString();v&&(c=g+1,t.push(n?"Row "+c+": '"+v+"'":v.trim()))}return t.length>0&&(r=n?"["+t.join(" | ")+"]":t.join("\n")),r}getTextAndFormat(){return this.rows}}class Vd{constructor(n,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=n,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new jd(r),this.nonDisplayedMemory=new jd(r),this.lastOutputScreen=new jd(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(n){this.outputFilter=n}setPAC(n){this.writeScreen.setPAC(n)}setBkgData(n){this.writeScreen.setBkgData(n)}setMode(n){n!==this.mode&&(this.mode=n,this.logger.log(2,()=>"MODE="+n),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=n)}insertChars(n){for(let r=0;r<n.length;r++)this.writeScreen.insertChar(n[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(n){this.logger.log(2,"RU("+n+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(n)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){const n=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=n,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(n){this.logger.log(2,"TO("+n+") - Tab Offset"),this.writeScreen.moveCursor(n)}ccMIDROW(n){const t={flash:!1};if(t.underline=n%2==1,t.italics=n>=46,t.italics)t.foreground="white";else{const r=Math.floor(n/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(n=!1){const t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),n&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(n){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,n,this.displayedMemory),this.cueStartTime=n))}}class Dc{constructor(n,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const c=new Ud;this.channels=[null,new Vd(n,t,c),new Vd(n+1,r,c)],this.cmdHistory={a:null,b:null},this.logger=c}getHandler(n){return this.channels[n].getHandler()}setHandler(n,t){this.channels[n].setHandler(t)}addData(n,t){let r,c,g,v=!1;this.logger.time=n;for(let x=0;x<t.length;x+=2)if(c=127&t[x],g=127&t[x+1],0!==c||0!==g){if(this.logger.log(3,"["+Fl([t[x],t[x+1]])+"] -> ("+Fl([c,g])+")"),r=this.parseCmd(c,g),r||(r=this.parseMidrow(c,g)),r||(r=this.parsePAC(c,g)),r||(r=this.parseBackgroundAttributes(c,g)),!r&&(v=this.parseChars(c,g),v)){const Y=this.currentChannel;Y&&Y>0?this.channels[Y].insertChars(v):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!r&&!v&&this.logger.log(2,"Couldn't parse cleaned data "+Fl([c,g])+" orig: "+Fl([t[x],t[x+1]]))}}parseCmd(n,t){const{cmdHistory:r}=this;if(!((20===n||28===n||21===n||29===n)&&t>=32&&t<=47||(23===n||31===n)&&t>=33&&t<=35))return!1;if(Gd(n,t,r))return Pc(null,null,r),this.logger.log(3,"Repeated command ("+Fl([n,t])+") is dropped"),!0;const v=20===n||21===n||23===n?1:2,x=this.channels[v];return 20===n||21===n||28===n||29===n?32===t?x.ccRCL():33===t?x.ccBS():34===t?x.ccAOF():35===t?x.ccAON():36===t?x.ccDER():37===t?x.ccRU(2):38===t?x.ccRU(3):39===t?x.ccRU(4):40===t?x.ccFON():41===t?x.ccRDC():42===t?x.ccTR():43===t?x.ccRTD():44===t?x.ccEDM():45===t?x.ccCR():46===t?x.ccENM():47===t&&x.ccEOC():x.ccTO(t-32),Pc(n,t,r),this.currentChannel=v,!0}parseMidrow(n,t){let r=0;if((17===n||25===n)&&t>=32&&t<=47){if(r=17===n?1:2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const c=this.channels[r];return!!c&&(c.ccMIDROW(t),this.logger.log(3,"MIDROW ("+Fl([n,t])+")"),!0)}return!1}parsePAC(n,t){let r;const c=this.cmdHistory;if(!((n>=17&&n<=23||n>=25&&n<=31)&&t>=64&&t<=127||(16===n||24===n)&&t>=64&&t<=95))return!1;if(Gd(n,t,c))return Pc(null,null,c),!0;const x=n<=23?1:2;r=t>=64&&t<=95?1===x?$g[n]:qg[n]:1===x?zg[n]:Jg[n];const Y=this.channels[x];return!!Y&&(Y.setPAC(this.interpretPAC(r,t)),Pc(n,t,c),this.currentChannel=x,!0)}interpretPAC(n,t){let r;const c={color:null,italics:!1,indent:null,underline:!1,row:n};return r=t>95?t-96:t-64,c.underline=1==(1&r),r<=13?c.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(c.italics=!0,c.color="white"):c.indent=4*Math.floor((r-16)/2),c}parseChars(n,t){let r,c=null,g=null;if(n>=25?(r=2,g=n-8):(r=1,g=n),g>=17&&g<=19){let v;v=17===g?t+80:18===g?t+112:t+144,this.logger.log(2,"Special char '"+Am(v)+"' in channel "+r),c=[v]}else n>=32&&n<=127&&(c=0===t?[n]:[n,t]);if(c){const v=Fl(c);this.logger.log(3,"Char codes =  "+v.join(",")),Pc(n,t,this.cmdHistory)}return c}parseBackgroundAttributes(n,t){if(!((16===n||24===n)&&t>=32&&t<=47||(23===n||31===n)&&t>=45&&t<=47))return!1;let g;const v={};return 16===n||24===n?(g=Math.floor((t-32)/2),v.background=ba[g],t%2==1&&(v.background=v.background+"_semi")):45===t?v.background="transparent":(v.foreground="black",47===t&&(v.underline=!0)),this.channels[n<=23?1:2].setBkgData(v),Pc(n,t,this.cmdHistory),!0}reset(){for(let n=0;n<Object.keys(this.channels).length;n++){const t=this.channels[n];t&&t.reset()}this.cmdHistory={a:null,b:null}}cueSplitAtTime(n){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(n)}}}function Pc(f,n,t){t.a=f,t.b=n}function Gd(f,n,t){return t.a===f&&t.b===n}class wu{constructor(n,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=n,this.trackName=t}dispatchCue(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(n,t,r){(null===this.startTime||this.startTime>n)&&(this.startTime=n),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var Hd=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;const f=["","lr","rl"],n=["start","middle","end","left","right"];function t(x,Y){if("string"!=typeof Y||!Array.isArray(x))return!1;const ie=Y.toLowerCase();return!!~x.indexOf(ie)&&ie}function c(x){return t(n,x)}function g(x,...Y){let ie=1;for(;ie<arguments.length;ie++){const Me=arguments[ie];for(const Re in Me)x[Re]=Me[Re]}return x}function v(x,Y,ie){const Me=this,Re={enumerable:!0};Me.hasBeenReset=!1;let $e="",qe=!1,ot=x,gt=Y,Tt=ie,$t=null,rn="",nn=!0,Sn="auto",gn="start",Bn=50,On="middle",Zn=50,Jn="middle";Object.defineProperty(Me,"id",g({},Re,{get:function(){return $e},set:function(Dn){$e=""+Dn}})),Object.defineProperty(Me,"pauseOnExit",g({},Re,{get:function(){return qe},set:function(Dn){qe=!!Dn}})),Object.defineProperty(Me,"startTime",g({},Re,{get:function(){return ot},set:function(Dn){if("number"!=typeof Dn)throw new TypeError("Start time must be set to a number.");ot=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"endTime",g({},Re,{get:function(){return gt},set:function(Dn){if("number"!=typeof Dn)throw new TypeError("End time must be set to a number.");gt=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"text",g({},Re,{get:function(){return Tt},set:function(Dn){Tt=""+Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"region",g({},Re,{get:function(){return $t},set:function(Dn){$t=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"vertical",g({},Re,{get:function(){return rn},set:function(Dn){const _r=function r(x){return t(f,x)}(Dn);if(!1===_r)throw new SyntaxError("An invalid or illegal string was specified.");rn=_r,this.hasBeenReset=!0}})),Object.defineProperty(Me,"snapToLines",g({},Re,{get:function(){return nn},set:function(Dn){nn=!!Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"line",g({},Re,{get:function(){return Sn},set:function(Dn){if("number"!=typeof Dn&&"auto"!==Dn)throw new SyntaxError("An invalid number or illegal string was specified.");Sn=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"lineAlign",g({},Re,{get:function(){return gn},set:function(Dn){const _r=c(Dn);if(!_r)throw new SyntaxError("An invalid or illegal string was specified.");gn=_r,this.hasBeenReset=!0}})),Object.defineProperty(Me,"position",g({},Re,{get:function(){return Bn},set:function(Dn){if(Dn<0||Dn>100)throw new Error("Position must be between 0 and 100.");Bn=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"positionAlign",g({},Re,{get:function(){return On},set:function(Dn){const _r=c(Dn);if(!_r)throw new SyntaxError("An invalid or illegal string was specified.");On=_r,this.hasBeenReset=!0}})),Object.defineProperty(Me,"size",g({},Re,{get:function(){return Zn},set:function(Dn){if(Dn<0||Dn>100)throw new Error("Size must be between 0 and 100.");Zn=Dn,this.hasBeenReset=!0}})),Object.defineProperty(Me,"align",g({},Re,{get:function(){return Jn},set:function(Dn){const _r=c(Dn);if(!_r)throw new SyntaxError("An invalid or illegal string was specified.");Jn=_r,this.hasBeenReset=!0}})),Me.displayState=void 0}return v.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},v}();class Im{decode(n,t){if(!n)return"";if("string"!=typeof n)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}function Zd(f){function n(r,c,g,v){return 3600*(0|r)+60*(0|c)+(0|g)+parseFloat(v||0)}const t=f.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?n(t[2],t[3],0,t[4]):n(t[1],t[2],t[3],t[4]):null}class xm{constructor(){this.values=Object.create(null)}set(n,t){!this.get(n)&&""!==t&&(this.values[n]=t)}get(n,t,r){return r?this.has(n)?this.values[n]:t[r]:this.has(n)?this.values[n]:t}has(n){return n in this.values}alt(n,t,r){for(let c=0;c<r.length;++c)if(t===r[c]){this.set(n,t);break}}integer(n,t){/^-?\d+$/.test(t)&&this.set(n,parseInt(t,10))}percent(n,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(n,r),!0}return!1}}function Xg(f,n,t,r){const c=r?f.split(r):[f];for(const g in c){if("string"!=typeof c[g])continue;const v=c[g].split(t);2===v.length&&n(v[0],v[1])}}const Kd=new Hd(0,0,""),Ca="middle"===Kd.align?"middle":"center";function ep(f,n,t){const r=f;function c(){const x=Zd(f);if(null===x)throw new Error("Malformed timestamp: "+r);return f=f.replace(/^[^\sa-zA-Z-]+/,""),x}function v(){f=f.replace(/^\s+/,"")}if(v(),n.startTime=c(),v(),"--\x3e"!==f.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);f=f.slice(3),v(),n.endTime=c(),v(),function g(x,Y){const ie=new xm;Xg(x,function($e,qe){let ot;switch($e){case"region":for(let gt=t.length-1;gt>=0;gt--)if(t[gt].id===qe){ie.set($e,t[gt].region);break}break;case"vertical":ie.alt($e,qe,["rl","lr"]);break;case"line":ot=qe.split(","),ie.integer($e,ot[0]),ie.percent($e,ot[0])&&ie.set("snapToLines",!1),ie.alt($e,ot[0],["auto"]),2===ot.length&&ie.alt("lineAlign",ot[1],["start",Ca,"end"]);break;case"position":ot=qe.split(","),ie.percent($e,ot[0]),2===ot.length&&ie.alt("positionAlign",ot[1],["start",Ca,"end","line-left","line-right","auto"]);break;case"size":ie.percent($e,qe);break;case"align":ie.alt($e,qe,["start",Ca,"end","left","right"])}},/:/,/\s/),Y.region=ie.get("region",null),Y.vertical=ie.get("vertical","");let Me=ie.get("line","auto");"auto"===Me&&-1===Kd.line&&(Me=-1),Y.line=Me,Y.lineAlign=ie.get("lineAlign","start"),Y.snapToLines=ie.get("snapToLines",!0),Y.size=ie.get("size",100),Y.align=ie.get("align",Ca);let Re=ie.get("position","auto");"auto"===Re&&50===Kd.position&&(Re="start"===Y.align||"left"===Y.align?0:"end"===Y.align||"right"===Y.align?100:50),Y.position=Re}(f,n)}function tp(f){return f.replace(/<br(?: \/)?>/gi,"\n")}class Om{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Im,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(n){const t=this;function r(){let g=t.buffer,v=0;for(g=tp(g);v<g.length&&"\r"!==g[v]&&"\n"!==g[v];)++v;const x=g.slice(0,v);return"\r"===g[v]&&++v,"\n"===g[v]&&++v,t.buffer=g.slice(v),x}function c(g){Xg(g,function(v,x){},/:/)}n&&(t.buffer+=t.decoder.decode(n,{stream:!0}));try{let g="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;g=r();const x=g.match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(null==x||!x[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let v=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(v?v=!1:g=r(),t.state){case"HEADER":/:/.test(g)?c(g):g||(t.state="ID");continue;case"NOTE":g||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(g)){t.state="NOTE";break}if(!g)continue;if(t.cue=new Hd(0,0,""),t.state="CUE",-1===g.indexOf("--\x3e")){t.cue.id=g;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{ep(g,t.cue,t.regionList)}catch(x){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const x=-1!==g.indexOf("--\x3e");if(!g||x&&(v=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=g}continue;case"BADCUE":g||(t.state="ID")}}}catch(g){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this}flush(){const n=this;try{if((n.cue||"HEADER"===n.state)&&(n.buffer+="\n\n",n.parse()),"INITIAL"===n.state||"BADWEBVTT"===n.state)throw new Error("Malformed WebVTT signature.")}catch(t){n.onparsingerror&&n.onparsingerror(t)}return n.onflush&&n.onflush(),this}}const Ac=/\r\n|\n\r|\n|\r/g,hh=function(n,t,r=0){return n.slice(r,r+t.length)===t},gh=function(n){let t=5381,r=n.length;for(;r;)t=33*t^n.charCodeAt(--r);return(t>>>0).toString()};function ph(f,n,t){return gh(f.toString())+gh(n.toString())+gh(t)}const Wd="stpp.ttml.im1t",_h=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,vh=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,np={left:"start",center:"center",right:"end",start:"start",end:"end"};function rp(f,n,t,r){const c=$r(new Uint8Array(f),["mdat"]);if(0===c.length)return void r(new Error("Could not parse IMSC1 mdat"));const g=c.map(x=>_s(x)),v=function hm(f,n,t=1,r=!1){return Ja(f,n,1/t,r)}(n.baseTime,1,n.timescale);try{g.forEach(x=>t(function Rm(f,n){const c=(new DOMParser).parseFromString(f,"text/xml").getElementsByTagName("tt")[0];if(!c)throw new Error("Invalid ttml");const g={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},v=Object.keys(g).reduce((Re,$e)=>(Re[$e]=c.getAttribute(`ttp:${$e}`)||g[$e],Re),{}),x="preserve"!==c.getAttribute("xml:space"),Y=ip(yh(c,"styling","style")),ie=ip(yh(c,"layout","region")),Me=yh(c,"body","[begin]");return[].map.call(Me,Re=>{const $e=Eh(Re,x);if(!$e||!Re.hasAttribute("begin"))return null;const qe=Th(Re.getAttribute("begin"),v),ot=Th(Re.getAttribute("dur"),v);let gt=Th(Re.getAttribute("end"),v);if(null===qe)throw op(Re);if(null===gt){if(null===ot)throw op(Re);gt=qe+ot}const Tt=new Hd(qe-n,gt-n,$e);Tt.id=ph(Tt.startTime,Tt.endTime,Tt.text);const nn=function av(f,n,t){const r="http://www.w3.org/ns/ttml#styling";let c=null;const v=null!=f&&f.hasAttribute("style")?f.getAttribute("style"):null;return v&&t.hasOwnProperty(v)&&(c=t[v]),["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce((x,Y)=>{const ie=Yd(n,r,Y)||Yd(f,r,Y)||Yd(c,r,Y);return ie&&(x[Y]=ie),x},{})}(ie[Re.getAttribute("region")],Y[Re.getAttribute("style")],Y),{textAlign:Sn}=nn;if(Sn){const gn=np[Sn];gn&&(Tt.lineAlign=gn),Tt.align=Sn}return Gi(Tt,nn),Tt}).filter(Re=>null!==Re)}(x,v)))}catch(x){r(x)}}function yh(f,n,t){const r=f.getElementsByTagName(n)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function ip(f){return f.reduce((n,t)=>{const r=t.getAttribute("xml:id");return r&&(n[r]=t),n},{})}function Eh(f,n){return[].slice.call(f.childNodes).reduce((t,r,c)=>{var g;return"br"===r.nodeName&&c?t+"\n":null!=(g=r.childNodes)&&g.length?Eh(r,n):n?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function Yd(f,n,t){return f&&f.hasAttributeNS(n,t)?f.getAttributeNS(n,t):null}function op(f){return new Error(`Could not parse ttml timestamp ${f}`)}function Th(f,n){if(!f)return null;let t=Zd(f);return null===t&&(_h.test(f)?t=function lv(f,n){const t=_h.exec(f);return 3600*(0|t[1])+60*(0|t[2])+(0|t[3])+((0|t[4])+(0|t[5])/n.subFrameRate)/n.frameRate}(f,n):vh.test(f)&&(t=function cv(f,n){const t=vh.exec(f),r=Number(t[1]);switch(t[2]){case"h":return 3600*r;case"m":return 60*r;case"ms":return 1e3*r;case"f":return r/n.frameRate;case"t":return r/n.tickRate}return r}(f,n))),t}function Nm(f,n){return!!f&&f.label===n.name&&!(f.textTrack1||f.textTrack2)}function sp(f,n,t,r){return Math.min(n,r)-Math.max(f,t)}class ap{constructor(n){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=n,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(n){this.streamController=n}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:n}=this;n.on(at.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.on(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.BUFFER_CODECS,this.onBufferCodecs,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:n}=this;n.off(at.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),n.off(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.BUFFER_CODECS,this.onBufferCodecs,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(n,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(n,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null}onManifestParsed(n,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onBufferCodecs(n,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const n=this.hls.levels;if(n.length){const t=this.hls;t.autoLevelCapping=this.getMaxLevel(n.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(n){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((c,g)=>this.isLevelAllowed(c)&&g<=n);return this.clientRect=null,ap.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const n=this.media,t={width:0,height:0};if(n){const r=n.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||n.width||0,t.height=r.bottom-r.top||n.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let n=1;if(!this.hls.config.ignoreDevicePixelRatio)try{n=self.devicePixelRatio}catch(t){}return n}isLevelAllowed(n){return!this.restrictedLevels.some(r=>n.bitrate===r.bitrate&&n.width===r.width&&n.height===r.height)}static getMaxLevelByMediaSize(n,t,r){if(null==n||!n.length)return-1;const c=(v,x)=>!x||v.width!==x.width||v.height!==x.height;let g=n.length-1;for(let v=0;v<n.length;v+=1){const x=n[v];if((x.width>=t||x.height>=r)&&c(x,n[v+1])){g=v;break}}return g}}const Sh="[eme]";let uv=(()=>{class f{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=f.CDMCleanupPromise?[f.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=Qt.debug.bind(Qt,Sh),this.log=Qt.log.bind(Qt,Sh),this.warn=Qt.warn.bind(Qt,Sh),this.error=Qt.error.bind(Qt,Sh),this.hls=t,this.config=t.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(at.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(at.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(at.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(at.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(at.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(at.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:r,widevineLicenseUrl:c}=this.config,g=r[t];if(g)return g.licenseUrl;if(t===Ei.WIDEVINE&&c)return c;throw new Error(`no license server URL configured for key-system "${t}"`)}getServerCertificateUrl(t){const{drmSystems:r}=this.config,c=r[t];if(c)return c.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const r=this.hls.levels,c=(x,Y,ie)=>!!x&&ie.indexOf(x)===Y,g=r.map(x=>x.audioCodec).filter(c),v=r.map(x=>x.videoCodec).filter(c);return g.length+v.length===0&&v.push("avc1.42e01e"),new Promise((x,Y)=>{const ie=Me=>{const Re=Me.shift();this.getMediaKeysPromise(Re,g,v).then($e=>x({keySystem:Re,mediaKeys:$e})).catch($e=>{Me.length?ie(Me):Y($e instanceof as?$e:new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_NO_ACCESS,error:$e,fatal:!0},$e.message))})};ie(t)})}requestMediaKeySystemAccess(t,r){const{requestMediaKeySystemAccessFunc:c}=this.config;if("function"!=typeof c){let g=`Configured requestMediaKeySystemAccess is not a function ${c}`;return null===_l&&"http:"===self.location.protocol&&(g=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(g))}return c(t,r)}getMediaKeysPromise(t,r,c){const g=function iu(f,n,t,r){let c;switch(f){case Ei.FAIRPLAY:c=["cenc","sinf"];break;case Ei.WIDEVINE:case Ei.PLAYREADY:c=["cenc"];break;case Ei.CLEARKEY:c=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${f}`)}return function Ms(f,n,t,r){return[{initDataTypes:f,persistentState:r.persistentState||"not-allowed",distinctiveIdentifier:r.distinctiveIdentifier||"not-allowed",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:n.map(g=>({contentType:`audio/mp4; codecs="${g}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(g=>({contentType:`video/mp4; codecs="${g}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}(c,n,t,r)}(t,r,c,this.config.drmSystemOptions),v=this.keySystemAccessPromises[t];let x=null==v?void 0:v.keySystemAccess;if(!x){this.log(`Requesting encrypted media "${t}" key-system access with config: ${JSON.stringify(g)}`),x=this.requestMediaKeySystemAccess(t,g);const Y=this.keySystemAccessPromises[t]={keySystemAccess:x};return x.catch(ie=>{this.log(`Failed to obtain access to key-system "${t}": ${ie}`)}),x.then(ie=>{this.log(`Access for key-system "${ie.keySystem}" obtained`);const Me=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),Y.mediaKeys=ie.createMediaKeys().then(Re=>(this.log(`Media-keys created for "${t}"`),Me.then($e=>$e?this.setMediaKeysServerCertificate(Re,t,$e):Re))),Y.mediaKeys.catch(Re=>{this.error(`Failed to create media-keys for "${t}"}: ${Re}`)}),Y.mediaKeys})}return x.then(()=>v.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:r,mediaKeys:c}){this.log(`Creating key-system session "${r}" keyId: ${Qi_hexDump(t.keyId||[])}`);const g=c.createSession(),v={decryptdata:t,keySystem:r,mediaKeys:c,mediaKeysSession:g,keyStatus:"status-pending"};return this.mediaKeySessions.push(v),v}renewKeySession(t){const r=t.decryptdata;if(r.pssh){const c=this.createMediaKeySessionContext(t),g=this.getKeyIdString(r);this.keyIdToKeySessionPromise[g]=this.generateRequestWithPreferredKeySession(c,"cenc",r.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return Qi_hexDump(t.keyId)}updateKeySession(t,r){var c;const g=t.mediaKeysSession;return this.log(`Updating key-session "${g.sessionId}" for keyID ${Qi_hexDump((null==(c=t.decryptdata)?void 0:c.keyId)||[])}\n      } (data length: ${r&&r.byteLength})`),g.update(r)}selectKeySystemFormat(t){const r=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise((r,c)=>{const g=od(this.config),v=t.map(wf).filter(x=>!!x&&-1!==g.indexOf(x));return this.getKeySystemSelectionPromise(v).then(({keySystem:x})=>{const Y=mg(x);Y?r(Y):c(new Error(`Unable to find format for key-system "${x}"`))}).catch(c)})}loadKey(t){const r=t.keyInfo.decryptdata,c=this.getKeyIdString(r),g=`(keyId: ${c} format: "${r.keyFormat}" method: ${r.method} uri: ${r.uri})`;this.log(`Starting session for key ${g}`);let v=this.keyIdToKeySessionPromise[c];return v||(v=this.keyIdToKeySessionPromise[c]=this.getKeySystemForKeyPromise(r).then(({keySystem:x,mediaKeys:Y})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${g}`),this.attemptSetMediaKeys(x,Y).then(()=>{this.throwIfDestroyed();const ie=this.createMediaKeySessionContext({keySystem:x,mediaKeys:Y,decryptdata:r});return this.generateRequestWithPreferredKeySession(ie,"cenc",r.pssh,"playlist-key")}))),v.catch(x=>this.handleError(x))),v}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){!this.hls||(this.error(t.message),this.hls.trigger(at.ERROR,t instanceof as?t.data:{type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const r=this.getKeyIdString(t),c=this.keyIdToKeySessionPromise[r];if(!c){const g=wf(t.keyFormat),v=g?[g]:od(this.config);return this.attemptKeySystemAccess(v)}return c}getKeySystemSelectionPromise(t){if(t.length||(t=od(this.config)),0===t.length)throw new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}_onMediaEncrypted(t){const{initDataType:r,initData:c}=t;if(this.debug(`"${t.type}" event: init data type: "${r}"`),null===c)return;let g,v;if("sinf"===r&&this.config.drmSystems[Ei.FAIRPLAY]){const Re=Pr(new Uint8Array(c));try{const $e=id(JSON.parse(Re).sinf),qe=Bf(new Uint8Array($e));if(!qe)return;g=qe.subarray(8,24),v=Ei.FAIRPLAY}catch($e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{const Re=function Sl(f){if(!(f instanceof ArrayBuffer)||f.byteLength<32)return null;const n={version:0,systemId:"",kids:null,data:null},t=new DataView(f),r=t.getUint32(0);if(f.byteLength!==r&&r>44||1886614376!==t.getUint32(4)||(n.version=t.getUint32(8)>>>24,n.version>1))return null;n.systemId=Qi_hexDump(new Uint8Array(f,12,16));const g=t.getUint32(28);if(0===n.version){if(r-32<g)return null;n.data=new Uint8Array(f,32,g)}else if(1===n.version){n.kids=[];for(let v=0;v<g;v++)n.kids.push(new Uint8Array(f,32+16*v,16))}return n}(c);if(null===Re)return;0===Re.version&&"edef8ba979d64acea3c827dcd51d21ed"===Re.systemId&&Re.data&&(g=Re.data.subarray(8,24)),v=function pg(f){if("edef8ba979d64acea3c827dcd51d21ed"===f)return Ei.WIDEVINE}(Re.systemId)}if(!v||!g)return;const x=Qi_hexDump(g),{keyIdToKeySessionPromise:Y,mediaKeySessions:ie}=this;let Me=Y[x];for(let Re=0;Re<ie.length;Re++){const $e=ie[Re],qe=$e.decryptdata;if(qe.pssh||!qe.keyId)continue;const ot=Qi_hexDump(qe.keyId);if(x===ot||-1!==qe.uri.replace(/-/g,"").indexOf(x)){Me=Y[ot],delete Y[ot],qe.pssh=new Uint8Array(c),qe.keyId=g,Me=Y[x]=Me.then(()=>this.generateRequestWithPreferredKeySession($e,r,c,"encrypted-event-key-match"));break}}Me||(Me=Y[x]=this.getKeySystemSelectionPromise([v]).then(({keySystem:Re,mediaKeys:$e})=>{var qe;this.throwIfDestroyed();const ot=new ga("ISO-23001-7",x,null!=(qe=mg(Re))?qe:"");return ot.pssh=new Uint8Array(c),ot.keyId=g,this.attemptSetMediaKeys(Re,$e).then(()=>{this.throwIfDestroyed();const gt=this.createMediaKeySessionContext({decryptdata:ot,keySystem:Re,mediaKeys:$e});return this.generateRequestWithPreferredKeySession(gt,r,c,"encrypted-event-no-match")})})),Me.catch(Re=>this.handleError(Re))}_onWaitingForKey(t){this.log(`"${t.type}" event`)}attemptSetMediaKeys(t,r){const c=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const g=Promise.all(c).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(r)});return this.setMediaKeysQueue.push(g),g.then(()=>{this.log(`Media-keys set for "${t}"`),c.push(g),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(v=>-1===c.indexOf(v))})}generateRequestWithPreferredKeySession(t,r,c,g){var v,x;const Y=null==(v=this.config.drmSystems)||null==(x=v[t.keySystem])?void 0:x.generateRequest;if(Y)try{const qe=Y.call(this.hls,r,c,t);if(!qe)throw new Error("Invalid response from configured generateRequest filter");r=qe.initDataType,c=t.decryptdata.pssh=qe.initData?new Uint8Array(qe.initData):null}catch(qe){var ie;if(this.warn(qe.message),null!=(ie=this.hls)&&ie.config.debug)throw qe}if(null===c)return this.log(`Skipping key-session request for "${g}" (no initData)`),Promise.resolve(t);const Me=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${g}": ${Me} (init data type: ${r} length: ${c?c.byteLength:null})`);const Re=new sh;t.mediaKeysSession.onmessage=qe=>{const ot=t.mediaKeysSession;if(!ot)return void Re.emit("error",new Error("invalid state"));const{messageType:gt,message:Tt}=qe;this.log(`"${gt}" message event for session "${ot.sessionId}" message size: ${Tt.byteLength}`),"license-request"===gt||"license-renewal"===gt?this.renewLicense(t,Tt).catch($t=>{this.handleError($t),Re.emit("error",$t)}):"license-release"===gt?t.keySystem===Ei.FAIRPLAY&&(this.updateKeySession(t,Of("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${gt}"`)},t.mediaKeysSession.onkeystatuseschange=qe=>{if(!t.mediaKeysSession)return void Re.emit("error",new Error("invalid state"));this.onKeyStatusChange(t);const gt=t.keyStatus;Re.emit("keyStatus",gt),"expired"===gt&&(this.warn(`${t.keySystem} expired for key ${Me}`),this.renewKeySession(t))};const $e=new Promise((qe,ot)=>{Re.on("error",ot),Re.on("keyStatus",gt=>{gt.startsWith("usable")?qe():"output-restricted"===gt?ot(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===gt?ot(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${gt}"`)):"expired"===gt?ot(new Error("key expired while generating request")):this.warn(`unhandled key status change "${gt}"`)})});return t.mediaKeysSession.generateRequest(r,c).then(()=>{var qe;this.log(`Request generated for key-session "${null==(qe=t.mediaKeysSession)?void 0:qe.sessionId}" keyId: ${Me}`)}).catch(qe=>{throw new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_NO_SESSION,error:qe,fatal:!1},`Error generating key-session request: ${qe}`)}).then(()=>$e).catch(qe=>{throw Re.removeAllListeners(),this.removeSession(t),qe}).then(()=>(Re.removeAllListeners(),t))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach((r,c)=>{this.log(`key status change "${r}" for keyStatuses keyId: ${Qi_hexDump("buffer"in c?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c))} session keyId: ${Qi_hexDump(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=r})}fetchServerCertificate(t){const r=this.config,g=new(0,r.loader)(r),v=this.getServerCertificateUrl(t);return v?(this.log(`Fetching serverCertificate for "${t}"`),new Promise((x,Y)=>{const ie={responseType:"arraybuffer",url:v},Me=r.certLoadPolicy.default;g.load(ie,{loadPolicy:Me,timeout:Me.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},{onSuccess:(qe,ot,gt,Tt)=>{x(qe.data)},onError:(qe,ot,gt,Tt)=>{Y(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:gt,response:Li({url:ie.url,data:void 0},qe)},`"${t}" certificate request failed (${v}). Status: ${qe.code} (${qe.text})`))},onTimeout:(qe,ot,gt)=>{Y(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:gt,response:{url:ie.url,data:void 0}},`"${t}" certificate request timed out (${v})`))},onAbort:(qe,ot,gt)=>{Y(new Error("aborted"))}})})):Promise.resolve()}setMediaKeysServerCertificate(t,r,c){return new Promise((g,v)=>{t.setServerCertificate(c).then(x=>{this.log(`setServerCertificate ${x?"success":"not supported by CDM"} (${null==c?void 0:c.byteLength}) on "${r}"`),g(t)}).catch(x=>{v(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:x,fatal:!0},x.message))})})}renewLicense(t,r){return this.requestLicense(t,new Uint8Array(r)).then(c=>this.updateKeySession(t,new Uint8Array(c)).catch(g=>{throw new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:g,fatal:!0},g.message)}))}setupLicenseXHR(t,r,c,g){const v=this.config.licenseXhrSetup;return v?Promise.resolve().then(()=>{if(!c.decryptdata)throw new Error("Key removed");return v.call(this.hls,t,r,c,g)}).catch(x=>{if(!c.decryptdata)throw x;return t.open("POST",r,!0),v.call(this.hls,t,r,c,g)}).then(x=>(t.readyState||t.open("POST",r,!0),{xhr:t,licenseChallenge:x||g})):(t.open("POST",r,!0),Promise.resolve({xhr:t,licenseChallenge:g}))}requestLicense(t,r){const c=this.config.keyLoadPolicy.default;return new Promise((g,v)=>{const x=this.getLicenseServerUrl(t.keySystem);this.log(`Sending license request to URL: ${x}`);const Y=new XMLHttpRequest;Y.responseType="arraybuffer",Y.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return v(new Error("invalid state"));if(4===Y.readyState)if(200===Y.status){this._requestLicenseFailureCount=0;let ie=Y.response;this.log(`License received ${ie instanceof ArrayBuffer?ie.byteLength:ie}`);const Me=this.config.licenseResponseCallback;if(Me)try{ie=Me.call(this.hls,Y,x,t)}catch(Re){this.error(Re)}g(ie)}else{const ie=c.errorRetry,Me=ie?ie.maxNumRetry:0;this._requestLicenseFailureCount++,this._requestLicenseFailureCount>Me||Y.status>=400&&Y.status<500?v(new as({type:pr.KEY_SYSTEM_ERROR,details:mn.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:Y,response:{url:x,data:void 0,code:Y.status,text:Y.statusText}},`License Request XHR failed (${x}). Status: ${Y.status} (${Y.statusText})`)):(this.warn(`Retrying license request, ${Me-this._requestLicenseFailureCount+1} attempts left`),this.requestLicense(t,r).then(g,v))}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=Y,this.setupLicenseXHR(Y,x,t,r).then(({xhr:ie,licenseChallenge:Me})=>{ie.send(Me)})})}onMediaAttached(t,r){if(!this.config.emeEnabled)return;const c=r.media;this.media=c,c.addEventListener("encrypted",this.onMediaEncrypted),c.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media,r=this.mediaKeySessions;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},ga.clearKeyUriToKeyIdMap();const c=r.length;f.CDMCleanupPromise=Promise.all(r.map(g=>this.removeSession(g)).concat(null==t?void 0:t.setMediaKeys(null).catch(g=>{this.log(`Could not clear media keys: ${g}. media.src: ${null==t?void 0:t.src}`)}))).then(()=>{c&&(this.log("finished closing key sessions and clearing media keys"),r.length=0)}).catch(g=>{this.log(`Could not close sessions and clear media keys: ${g}. media.src: ${null==t?void 0:t.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:r}){if(r&&this.config.emeEnabled&&!this.keyFormatPromise){const c=r.reduce((g,v)=>(-1===g.indexOf(v.keyFormat)&&g.push(v.keyFormat),g),[]);this.log(`Selecting key-system from session-keys ${c.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(c)}}removeSession(t){const{mediaKeysSession:r,licenseXhr:c}=t;if(r){this.log(`Remove licenses and keys and close session ${r.sessionId}`),r.onmessage=null,r.onkeystatuseschange=null,c&&c.readyState!==XMLHttpRequest.DONE&&c.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const g=this.mediaKeySessions.indexOf(t);return g>-1&&this.mediaKeySessions.splice(g,1),r.remove().catch(v=>{this.log(`Could not remove session: ${v}`)}).then(()=>r.close()).catch(v=>{this.log(`Could not close session: ${v}`)})}}}return f.CDMCleanupPromise=void 0,f})();class as extends Error{constructor(n,t){super(t),this.data=void 0,n.error||(n.error=new Error(t)),this.data=n,n.err=n.error}}class kl{constructor(n){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=c=>{try{this.apply(c,{ot:"m",su:!this.initialized})}catch(g){Qt.warn("Could not generate manifest CMCD data.",g)}},this.applyFragmentData=c=>{try{const g=c.frag,v=this.hls.levels[g.level],x=this.getObjectType(g),Y={d:1e3*g.duration,ot:x};("v"===x||"a"===x||"av"==x)&&(Y.br=v.bitrate/1e3,Y.tb=this.getTopBandwidth(x)/1e3,Y.bl=this.getBufferLength(x)),this.apply(c,Y)}catch(g){Qt.warn("Could not generate segment CMCD data.",g)}},this.hls=n;const t=this.config=n.config,{cmcd:r}=t;null!=r&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||kl.uuid(),this.cid=r.contentId,this.useHeaders=!0===r.useHeaders,this.registerListeners())}registerListeners(){const n=this.hls;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHED,this.onMediaDetached,this),n.on(at.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const n=this.hls;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHED,this.onMediaDetached,this),n.off(at.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(n,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){!this.media||(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(n,t){var r,c;this.audioBuffer=null==(r=t.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(c=t.tracks.video)?void 0:c.buffer}createData(){var n;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(n=this.media)?void 0:n.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(n,t={}){if(Gi(t,this.createData()),this.starved&&("i"===t.ot||"v"===t.ot||"av"===t.ot)&&(t.bs=!0,t.su=!0,this.starved=!1),null==t.su&&(t.su=this.buffering),this.useHeaders){const c=kl.toHeaders(t);if(!Object.keys(c).length)return;n.headers||(n.headers={}),Gi(n.headers,c)}else{const c=kl.toQuery(t);if(!c)return;n.url=kl.appendQueryToUri(n.url,c)}}getObjectType(n){const{type:t}=n;return"subtitle"===t?"tt":"initSegment"===n.sn?"i":"audio"===t?"a":"main"===t?this.hls.audioTracks.length?"v":"av":void 0}getTopBandwidth(n){let r,t=0;const c=this.hls;if("a"===n)r=c.audioTracks;else{const g=c.maxAutoLevel;r=c.levels.slice(0,g>-1?g+1:c.levels.length)}for(const g of r)g.bitrate>t&&(t=g.bitrate);return t>0?t:NaN}getBufferLength(n){const t=this.hls.media,r="a"===n?this.audioBuffer:this.videoBuffer;return r&&t?1e3*Lt.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len:NaN}createPlaylistLoader(){const{pLoader:n}=this.config,t=this.applyPlaylistData,r=n||this.config.loader;return class{constructor(g){this.loader=void 0,this.loader=new r(g)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(g,v,x){t(g),this.loader.load(g,v,x)}}}createFragmentLoader(){const{fLoader:n}=this.config,t=this.applyFragmentData,r=n||this.config.loader;return class{constructor(g){this.loader=void 0,this.loader=new r(g)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(g,v,x){t(g),this.loader.load(g,v,x)}}}static uuid(){const n=URL.createObjectURL(new Blob),t=n.toString();return URL.revokeObjectURL(n),t.slice(t.lastIndexOf("/")+1)}static serialize(n){const t=[],r=ie=>!Number.isNaN(ie)&&null!=ie&&""!==ie&&!1!==ie,c=ie=>Math.round(ie),g=ie=>100*c(ie/100),x={br:c,d:c,bl:g,dl:g,mtp:g,nor:ie=>encodeURIComponent(ie),rtp:g,tb:c},Y=Object.keys(n||{}).sort();for(const ie of Y){let Me=n[ie];if(!r(Me)||"v"===ie&&1===Me||"pr"==ie&&1===Me)continue;const Re=x[ie];Re&&(Me=Re(Me));const $e=typeof Me;let qe;qe="ot"===ie||"sf"===ie||"st"===ie?`${ie}=${Me}`:"boolean"===$e?ie:"number"===$e?`${ie}=${Me}`:`${ie}=${JSON.stringify(Me)}`,t.push(qe)}return t.join(",")}static toHeaders(n){const t=Object.keys(n),r={},c=["Object","Request","Session","Status"],g=[{},{},{},{}],v={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const x of t)g[null!=v[x]?v[x]:1][x]=n[x];for(let x=0;x<g.length;x++){const Y=kl.serialize(g[x]);Y&&(r[`CMCD-${c[x]}`]=Y)}return r}static toQuery(n){return`CMCD=${encodeURIComponent(kl.serialize(n))}`}static appendQueryToUri(n,t){if(!t)return n;const r=n.includes("?")?"&":"?";return`${n}${r}${t}`}}function up(f,n,t,r){!f||Object.keys(n).forEach(c=>{const g=f.filter(v=>v.groupId===c).map(v=>{const x=Gi({},v);return x.details=void 0,x.attrs=new yi(x.attrs),x.url=x.attrs.URI=$d(v.url,v.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),x.groupId=x.attrs["GROUP-ID"]=n[c],x.attrs["PATHWAY-ID"]=r,x});f.push(...g)})}function $d(f,n,t,r){const{HOST:c,PARAMS:g,[t]:v}=r;let x;n&&(x=null==v?void 0:v[n],x&&(f=x));const Y=new self.URL(f);return c&&!x&&(Y.host=c),g&&Object.keys(g).sort().forEach(ie=>{ie&&Y.searchParams.set(ie,g[ie])}),Y.href}const Fm=/^age:\s*[\d.]+\s*$/im;class dp{constructor(n){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=n&&n.xhrSetup||null,this.stats=new ru,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const n=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),n&&(n.onreadystatechange=null,n.onprogress=null,4!==n.readyState&&(this.stats.aborted=!0,n.abort()))}abort(){var n;this.abortInternal(),null!=(n=this.callbacks)&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(n,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=n,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:n,context:t}=this;if(!n)return;const r=this.loader=new self.XMLHttpRequest,c=this.stats;c.loading.first=0,c.loaded=0,c.aborted=!1;const g=this.xhrSetup;g?Promise.resolve().then(()=>{if(!this.stats.aborted)return g(r,t.url)}).catch(v=>(r.open("GET",t.url,!0),g(r,t.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(r,t,n)}).catch(v=>{this.callbacks.onError({code:r.status,text:v.message},t,r,c)}):this.openAndSendXhr(r,t,n)}openAndSendXhr(n,t,r){n.readyState||n.open("GET",t.url,!0);const c=this.context.headers,{maxTimeToFirstByteMs:g,maxLoadTimeMs:v}=r.loadPolicy;if(c)for(const x in c)n.setRequestHeader(x,c[x]);t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=g&&cr(g)?g:v,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),n.send()}readystatechange(){const{context:n,loader:t,stats:r}=this;if(!n||!t)return;const c=t.readyState,g=this.config;if(!r.aborted&&c>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),g.timeout!==g.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),g.timeout=g.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),g.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===c)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const v=t.status,x="text"!==t.responseType;if(v>=200&&v<300&&(x&&t.response||null!==t.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const Y=x?t.response:t.responseText;if(r.loaded=r.total="arraybuffer"===t.responseType?Y.byteLength:Y.length,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;const Me=this.callbacks.onProgress;if(Me&&Me(r,n,Y,t),!this.callbacks)return;this.callbacks.onSuccess({url:t.responseURL,data:Y,code:v},r,n,t)}else{const Y=g.loadPolicy.errorRetry;gc(Y,r.retry,!1,v)?this.retry(Y):(Qt.error(`${v} while loading ${n.url}`),this.callbacks.onError({code:v,text:t.statusText},n,t,r))}}}loadtimeout(){var n;const t=null==(n=this.config)?void 0:n.loadPolicy.timeoutRetry;if(gc(t,this.stats.retry,!0))this.retry(t);else{Qt.warn(`timeout while loading ${this.context.url}`);const c=this.callbacks;c&&(this.abortInternal(),c.onTimeout(this.stats,this.context,this.loader))}}retry(n){const{context:t,stats:r}=this;this.retryDelay=Al(n,r.retry),r.retry++,Qt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t.url}, retrying ${r.retry}/${n.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(n){const t=this.stats;t.loaded=n.loaded,n.lengthComputable&&(t.total=n.total)}getCacheAge(){let n=null;if(this.loader&&Fm.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");n=t?parseFloat(t):null}return n}getResponseHeader(n){return this.loader&&new RegExp(`^${n}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(n):null}}const Bm=/(\d+)-(\d+)\/(\d+)/;class fp{constructor(n){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=n.fetchSetup||jm,this.controller=new self.AbortController,this.stats=new ru}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const n=this.response;null!=n&&n.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var n;this.abortInternal(),null!=(n=this.callbacks)&&n.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(n,t,r){const c=this.stats;if(c.loading.start)throw new Error("Loader can only be used once.");c.loading.start=self.performance.now();const g=function Um(f,n){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:n,headers:new self.Headers(Gi({},f.headers))};return f.rangeEnd&&t.headers.set("Range","bytes="+f.rangeStart+"-"+String(f.rangeEnd-1)),t}(n,this.controller.signal),v=r.onProgress,x="arraybuffer"===n.responseType,Y=x?"byteLength":"length",{maxTimeToFirstByteMs:ie,maxLoadTimeMs:Me}=t.loadPolicy;this.context=n,this.config=t,this.callbacks=r,this.request=this.fetchSetup(n,g),self.clearTimeout(this.requestTimeout),t.timeout=ie&&cr(ie)?ie:Me,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(c,n,this.response)},t.timeout),self.fetch(this.request).then(Re=>{this.response=this.loader=Re;const $e=Math.max(self.performance.now(),c.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=Me,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(c,n,this.response)},Me-($e-c.loading.start)),!Re.ok){const{status:qe,statusText:ot}=Re;throw new Ru(ot||"fetch, bad network response",qe,Re)}return c.loading.first=$e,c.total=function Ic(f){const n=f.get("Content-Range");if(n){const r=function zd(f){const n=Bm.exec(f);if(n)return parseInt(n[2])-parseInt(n[1])+1}(n);if(cr(r))return r}const t=f.get("Content-Length");if(t)return parseInt(t)}(Re.headers)||c.total,v&&cr(t.highWaterMark)?this.loadProgressively(Re,c,n,t.highWaterMark,v):x?Re.arrayBuffer():"json"===n.responseType?Re.json():Re.text()}).then(Re=>{const{response:$e}=this;self.clearTimeout(this.requestTimeout),c.loading.end=Math.max(self.performance.now(),c.loading.first);const qe=Re[Y];qe&&(c.loaded=c.total=qe);const ot={url:$e.url,data:Re,code:$e.status};v&&!cr(t.highWaterMark)&&v(c,n,Re,$e),r.onSuccess(ot,c,n,$e)}).catch(Re=>{self.clearTimeout(this.requestTimeout),c.aborted||r.onError({code:Re&&Re.code||0,text:Re?Re.message:null},n,Re?Re.details:null,c)})}getCacheAge(){let n=null;if(this.response){const t=this.response.headers.get("age");n=t?parseFloat(t):null}return n}getResponseHeader(n){return this.response?this.response.headers.get(n):null}loadProgressively(n,t,r,c=0,g){const v=new bm,x=n.body.getReader(),Y=()=>x.read().then(ie=>{if(ie.done)return v.dataLength&&g(t,r,v.flush(),n),Promise.resolve(new ArrayBuffer(0));const Me=ie.value,Re=Me.length;return t.loaded+=Re,Re<c||v.dataLength?(v.push(Me),v.dataLength>=c&&g(t,r,v.flush(),n)):g(t,r,Me,n),Y()}).catch(()=>Promise.reject());return Y()}}function jm(f,n){return new self.Request(f.url,n)}class Ru extends Error{constructor(n,t,r){super(n),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const Vm=/\s/,Gm={newCue(f,n,t,r){const c=[];let g,v,x,Y,ie;const Me=self.VTTCue||self.TextTrackCue;for(let $e=0;$e<r.rows.length;$e++)if(g=r.rows[$e],x=!0,Y=0,ie="",!g.isEmpty()){var Re;for(let gt=0;gt<g.chars.length;gt++)Vm.test(g.chars[gt].uchar)&&x?Y++:(ie+=g.chars[gt].uchar,x=!1);g.cueStartTime=n,n===t&&(t+=1e-4),Y>=16?Y--:Y++;const qe=tp(ie.trim()),ot=ph(n,t,qe);null!=f&&null!=(Re=f.cues)&&Re.getCueById(ot)||(v=new Me(n,t,qe),v.id=ot,v.line=$e+1,v.align="left",v.position=10+Math.min(80,10*Math.floor(8*Y/32)),c.push(v))}return f&&c.length&&(c.sort(($e,qe)=>"auto"===$e.line||"auto"===qe.line?0:$e.line>8&&qe.line>8?qe.line-$e.line:$e.line-qe.line),c.forEach($e=>mu(f,$e))),c}},na=Li(Li({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:dp,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:class Tm{constructor(n){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=n;const t=n.config;this.bwEstimator=new Em(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(at.FRAG_LOADING,this.onFragLoading,this),n.on(at.FRAG_LOADED,this.onFragLoaded,this),n.on(at.FRAG_BUFFERED,this.onFragBuffered,this),n.on(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(at.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:n}=this;n.off(at.FRAG_LOADING,this.onFragLoading,this),n.off(at.FRAG_LOADED,this.onFragLoaded,this),n.off(at.FRAG_BUFFERED,this.onFragBuffered,this),n.off(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(at.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(n,t){var r;const c=t.frag;this.ignoreFragment(c)||(this.fragCurrent=c,this.partCurrent=null!=(r=t.part)?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(n,t){this.clearTimer()}getTimeToLoadFrag(n,t,r,c){return n+r/t+(c?this.lastLevelLoadSec:0)}onLevelLoaded(n,t){const r=this.hls.config,{total:c,bwEstimate:g}=t.stats;cr(c)&&cr(g)&&(this.lastLevelLoadSec=8*c/g),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:n,partCurrent:t,hls:r}=this,{autoLevelEnabled:c,media:g}=r;if(!n||!g)return;const v=performance.now(),x=t?t.stats:n.stats,Y=t?t.duration:n.duration,ie=v-x.loading.start;if(x.aborted||x.loaded&&x.loaded===x.total||0===n.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(!c||g.paused||!g.playbackRate||!g.readyState)return;const Me=r.mainForwardBufferInfo;if(null===Me)return;const Re=this.bwEstimator.getEstimateTTFB(),$e=Math.abs(g.playbackRate);if(ie<=Math.max(Re,Y/(2*$e)*1e3))return;const qe=Me.len/$e;if(qe>=2*Y/$e)return;const ot=x.loading.first?x.loading.first-x.loading.start:-1,gt=x.loaded&&ot>-1,Tt=this.bwEstimator.getEstimate(),{levels:$t,minAutoLevel:rn}=r,Sn=x.total||Math.max(x.loaded,Math.round(Y*$t[n.level].maxBitrate/8));let gn=ie-ot;gn<1&&gt&&(gn=Math.min(ie,8*x.loaded/Tt));const Bn=gt?1e3*x.loaded/gn:0,On=Bn?(Sn-x.loaded)/Bn:8*Sn/Tt+Re/1e3;if(On<=qe)return;const Zn=Bn?8*Bn:Tt;let Dn,Jn=Number.POSITIVE_INFINITY;for(Dn=n.level-1;Dn>rn&&(Jn=this.getTimeToLoadFrag(Re/1e3,Zn,Y*$t[Dn].maxBitrate,!$t[Dn].details),!(Jn<qe));Dn--);Jn>=On||Jn>10*Y||(r.nextLoadLevel=Dn,gt?this.bwEstimator.sample(ie-Math.min(Re,ot),x.loaded):this.bwEstimator.sampleTTFB(ie),this.clearTimer(),Qt.warn(`[abr] Fragment ${n.sn}${t?" part "+t.index:""} of level ${n.level} is loading too slowly;\n      Time to underbuffer: ${qe.toFixed(3)} s\n      Estimated load time for current fragment: ${On.toFixed(3)} s\n      Estimated load time for down switch fragment: ${Jn.toFixed(3)} s\n      TTFB estimate: ${ot}\n      Current BW estimate: ${cr(Tt)?(Tt/1024).toFixed(3):"Unknown"} Kb/s\n      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s\n      Aborting and switching to level ${Dn}`),n.loader&&(this.fragCurrent=this.partCurrent=null,n.abortRequests()),r.trigger(at.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,part:t,stats:x}))}onFragLoaded(n,{frag:t,part:r}){const c=r?r.stats:t.stats;if("main"===t.type&&this.bwEstimator.sampleTTFB(c.loading.first-c.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const v=this.hls.levels[t.level],x=(v.loaded?v.loaded.bytes:0)+c.loaded,Y=(v.loaded?v.loaded.duration:0)+(r?r.duration:t.duration);v.loaded={bytes:x,duration:Y},v.realBitrate=Math.round(8*x/Y)}t.bitrateTest&&(this.onFragBuffered(at.FRAG_BUFFERED,{stats:c,frag:t,part:r,id:t.type}),t.bitrateTest=!1)}}onFragBuffered(n,t){const{frag:r,part:c}=t,g=null!=c&&c.stats.loaded?c.stats:r.stats;if(g.aborted||this.ignoreFragment(r))return;const v=g.parsing.end-g.loading.start-Math.min(g.loading.first-g.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(v,g.loaded),g.bwEstimate=this.bwEstimator.getEstimate(),this.bitrateTestDelay=r.bitrateTest?v/1e3:0}ignoreFragment(n){return"main"!==n.type||"initSegment"===n.sn}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const n=this._nextAutoLevel;if(-1!==n&&!this.bwEstimator.canEstimate())return n;let r=this.getNextABRAutoLevel();if(-1!==n){const c=this.hls.levels;if(c.length>Math.max(n,r)&&c[n].loadError<=c[r].loadError)return n}return-1!==n&&(r=Math.min(n,r)),r}getNextABRAutoLevel(){const{fragCurrent:n,partCurrent:t,hls:r}=this,{maxAutoLevel:c,config:g,minAutoLevel:v,media:x}=r,Y=t?t.duration:n?n.duration:0,ie=x&&0!==x.playbackRate?Math.abs(x.playbackRate):1,Me=this.bwEstimator?this.bwEstimator.getEstimate():g.abrEwmaDefaultEstimate,Re=r.mainForwardBufferInfo,$e=(Re?Re.len:0)/ie;let qe=this.findBestLevel(Me,v,c,$e,g.abrBandWidthFactor,g.abrBandWidthUpFactor);if(qe>=0)return qe;Qt.trace(`[abr] ${$e?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let ot=Y?Math.min(Y,g.maxStarvationDelay):g.maxStarvationDelay,gt=g.abrBandWidthFactor,Tt=g.abrBandWidthUpFactor;if(!$e){const $t=this.bitrateTestDelay;$t&&(ot=(Y?Math.min(Y,g.maxLoadingDelay):g.maxLoadingDelay)-$t,Qt.trace(`[abr] bitrate test took ${Math.round(1e3*$t)}ms, set first fragment max fetchDuration to ${Math.round(1e3*ot)} ms`),gt=Tt=1)}return qe=this.findBestLevel(Me,v,c,$e+ot,gt,Tt),Math.max(qe,0)}findBestLevel(n,t,r,c,g,v){var x;const{fragCurrent:Y,partCurrent:ie,lastLoadedFragLevel:Me}=this,{levels:Re}=this.hls,$e=Re[Me],qe=!(null==$e||null==(x=$e.details)||!x.live),ot=null==$e?void 0:$e.codecSet,gt=ie?ie.duration:Y?Y.duration:0,Tt=this.bwEstimator.getEstimateTTFB()/1e3;let $t=t,rn=-1;for(let nn=r;nn>=t;nn--){const Sn=Re[nn];if(!Sn||ot&&Sn.codecSet!==ot){Sn&&($t=Math.min(nn,$t),rn=Math.max(nn,rn));continue}-1!==rn&&Qt.trace(`[abr] Skipped level(s) ${$t}-${rn} with CODECS:"${Re[rn].attrs.CODECS}"; not compatible with "${$e.attrs.CODECS}"`);const gn=Sn.details,Bn=(ie?null==gn?void 0:gn.partTarget:null==gn?void 0:gn.averagetargetduration)||gt;let On;On=nn<=Me?g*n:v*n;const Zn=Re[nn].maxBitrate,Jn=this.getTimeToLoadFrag(Tt,On,Zn*Bn,void 0===gn);if(Qt.trace(`[abr] level:${nn} adjustedbw-bitrate:${Math.round(On-Zn)} avgDuration:${Bn.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${Jn.toFixed(1)}`),On>Zn&&(0===Jn||!cr(Jn)||qe&&!this.bitrateTestDelay||Jn<c))return nn}return-1}set nextAutoLevel(n){this._nextAutoLevel=n}},bufferController:class Pm{constructor(n){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:t,mediaSource:r}=this;Qt.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(at.MEDIA_ATTACHED,{media:t})),r&&r.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{Qt.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{Qt.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:t,_objectUrl:r}=this;t&&t.src!==r&&Qt.error(`Media element src was set while attaching MediaSource (${r} > ${t.src})`)},this.hls=n,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.BUFFER_RESET,this.onBufferReset,this),n.on(at.BUFFER_APPENDING,this.onBufferAppending,this),n.on(at.BUFFER_CODECS,this.onBufferCodecs,this),n.on(at.BUFFER_EOS,this.onBufferEos,this),n.on(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(at.LEVEL_UPDATED,this.onLevelUpdated,this),n.on(at.FRAG_PARSED,this.onFragParsed,this),n.on(at.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.BUFFER_RESET,this.onBufferReset,this),n.off(at.BUFFER_APPENDING,this.onBufferAppending,this),n.off(at.BUFFER_CODECS,this.onBufferCodecs,this),n.off(at.BUFFER_EOS,this.onBufferEos,this),n.off(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(at.LEVEL_UPDATED,this.onLevelUpdated,this),n.off(at.FRAG_PARSED,this.onFragParsed,this),n.off(at.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new ch(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(n,t){let r=2;(t.audio&&!t.video||!t.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,Qt.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(n,t){const r=this.media=t.media;if(r&&uh){const c=this.mediaSource=new uh;c.addEventListener("sourceopen",this._onMediaSourceOpen),c.addEventListener("sourceended",this._onMediaSourceEnded),c.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(c),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:n,mediaSource:t,_objectUrl:r}=this;if(t){if(Qt.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(c){Qt.warn(`[buffer-controller]: onMediaDetaching: ${c.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),n&&(n.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),n.src===r?(n.removeAttribute("src"),n.load()):Qt.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(at.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(n=>{const t=this.sourceBuffer[n];try{t&&(this.removeBufferListeners(n),this.mediaSource&&this.mediaSource.removeSourceBuffer(t),this.sourceBuffer[n]=void 0)}catch(r){Qt.warn(`[buffer-controller]: Failed to reset the ${n} buffer`,r)}}),this._initSourceBuffer()}onBufferCodecs(n,t){const r=this.getSourceBufferTypes().length;Object.keys(t).forEach(c=>{if(r){const g=this.tracks[c];if(g&&"function"==typeof g.buffer.changeType){const{id:v,codec:x,levelCodec:Y,container:ie,metadata:Me}=t[c],Re=(g.levelCodec||g.codec).replace(Yg,"$1"),$e=(Y||x).replace(Yg,"$1");Re!==$e&&(this.appendChangeType(c,`${ie};codecs=${Y||x}`),Qt.log(`[buffer-controller]: switching codec ${Re} to ${$e}`),this.tracks[c]={buffer:g.buffer,codec:x,container:ie,levelCodec:Y,metadata:Me,id:v})}}else this.pendingTracks[c]=t[c]}),!r&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())}appendChangeType(n,t){const{operationQueue:r}=this,c={execute:()=>{const g=this.sourceBuffer[n];g&&(Qt.log(`[buffer-controller]: changing ${n} sourceBuffer type to ${t}`),g.changeType(t)),r.shiftAndExecuteNext(n)},onStart:()=>{},onComplete:()=>{},onError:g=>{Qt.warn(`[buffer-controller]: Failed to change ${n} SourceBuffer type`,g)}};r.append(c,n)}onBufferAppending(n,t){const{hls:r,operationQueue:c,tracks:g}=this,{data:v,type:x,frag:Y,part:ie,chunkMeta:Me}=t,Re=Me.buffering[x],$e=self.performance.now();Re.start=$e;const qe=Y.stats.buffering,ot=ie?ie.stats.buffering:null;0===qe.start&&(qe.start=$e),ot&&0===ot.start&&(ot.start=$e);const gt=g.audio;let Tt=!1;"audio"===x&&"audio/mpeg"===(null==gt?void 0:gt.container)&&(Tt=!this.lastMpegAudioChunk||1===Me.id||this.lastMpegAudioChunk.sn!==Me.sn,this.lastMpegAudioChunk=Me);const $t=Y.start;c.append({execute:()=>{if(Re.executeStart=self.performance.now(),Tt){const nn=this.sourceBuffer[x];if(nn){const Sn=$t-nn.timestampOffset;Math.abs(Sn)>=.1&&(Qt.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${$t} (delta: ${Sn}) sn: ${Y.sn})`),nn.timestampOffset=$t)}}this.appendExecutor(v,x)},onStart:()=>{},onComplete:()=>{const nn=self.performance.now();Re.executeEnd=Re.end=nn,0===qe.first&&(qe.first=nn),ot&&0===ot.first&&(ot.first=nn);const{sourceBuffer:Sn}=this,gn={};for(const Bn in Sn)gn[Bn]=Lt.getBuffered(Sn[Bn]);this.appendError=0,this.hls.trigger(at.BUFFER_APPENDED,{type:x,frag:Y,part:ie,chunkMeta:Me,parent:Y.type,timeRanges:gn})},onError:nn=>{Qt.error(`[buffer-controller]: Error encountered while trying to append to the ${x} SourceBuffer`,nn);const Sn={type:pr.MEDIA_ERROR,parent:Y.type,details:mn.BUFFER_APPEND_ERROR,frag:Y,part:ie,chunkMeta:Me,error:nn,err:nn,fatal:!1};nn.code===DOMException.QUOTA_EXCEEDED_ERR?Sn.details=mn.BUFFER_FULL_ERROR:(this.appendError++,Sn.details=mn.BUFFER_APPEND_ERROR,this.appendError>r.config.appendErrorMaxRetry&&(Qt.error(`[buffer-controller]: Failed ${r.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),Sn.fatal=!0)),r.trigger(at.ERROR,Sn)}},x)}onBufferFlushing(n,t){const{operationQueue:r}=this,c=g=>({execute:this.removeExecutor.bind(this,g,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(at.BUFFER_FLUSHED,{type:g})},onError:v=>{Qt.warn(`[buffer-controller]: Failed to remove from ${g} SourceBuffer`,v)}});t.type?r.append(c(t.type),t.type):this.getSourceBufferTypes().forEach(g=>{r.append(c(g),g)})}onFragParsed(n,t){const{frag:r,part:c}=t,g=[],v=c?c.elementaryStreams:r.elementaryStreams;v.audiovideo?g.push("audiovideo"):(v.audio&&g.push("audio"),v.video&&g.push("video")),0===g.length&&Qt.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(()=>{const Y=self.performance.now();r.stats.buffering.end=Y,c&&(c.stats.buffering.end=Y),this.hls.trigger(at.FRAG_BUFFERED,{frag:r,part:c,stats:c?c.stats:r.stats,id:r.type})},g)}onFragChanged(n,t){this.flushBackBuffer()}onBufferEos(n,t){this.getSourceBufferTypes().reduce((c,g)=>{const v=this.sourceBuffer[g];return v&&(!t.type||t.type===g)&&(v.ending=!0,v.ended||(v.ended=!0,Qt.log(`[buffer-controller]: ${g} sourceBuffer now EOS`))),c&&!(v&&!v.ended)},!0)&&(Qt.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(g=>{const v=this.sourceBuffer[g];v&&(v.ending=!1)});const{mediaSource:c}=this;c&&"open"===c.readyState?(Qt.log("[buffer-controller]: Calling mediaSource.endOfStream()"),c.endOfStream()):c&&Qt.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${c.readyState}`)}))}onLevelUpdated(n,{details:t}){!t.fragments.length||(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:n,details:t,media:r,sourceBuffer:c}=this;if(!r||null===t)return;const g=this.getSourceBufferTypes();if(!g.length)return;const v=t.live&&null!==n.config.liveBackBufferLength?n.config.liveBackBufferLength:n.config.backBufferLength;if(!cr(v)||v<0)return;const x=r.currentTime,Y=t.levelTargetDuration,ie=Math.max(v,Y),Me=Math.floor(x/Y)*Y-ie;g.forEach(Re=>{const $e=c[Re];if($e){const qe=Lt.getBuffered($e);if(qe.length>0&&Me>qe.start(0)){if(n.trigger(at.BACK_BUFFER_REACHED,{bufferEnd:Me}),t.live)n.trigger(at.LIVE_BACK_BUFFER_REACHED,{bufferEnd:Me});else if($e.ended&&qe.end(qe.length-1)-x<2*Y)return void Qt.info(`[buffer-controller]: Cannot flush ${Re} back buffer while SourceBuffer is in ended state`);n.trigger(at.BUFFER_FLUSHING,{startOffset:0,endOffset:Me,type:Re})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)return;const{details:n,hls:t,media:r,mediaSource:c}=this,g=n.fragments[0].start+n.totalduration,v=r.duration,x=cr(c.duration)?c.duration:0;n.live&&t.config.liveDurationInfinity?(Qt.log("[buffer-controller]: Media Source duration is set to Infinity"),c.duration=1/0,this.updateSeekableRange(n)):(g>x&&g>v||!cr(v))&&(Qt.log(`[buffer-controller]: Updating Media Source duration to ${g.toFixed(3)}`),c.duration=g)}updateSeekableRange(n){const t=this.mediaSource,r=n.fragments;if(r.length&&n.live&&null!=t&&t.setLiveSeekableRange){const g=Math.max(0,r[0].start),v=Math.max(g,g+n.totalduration);t.setLiveSeekableRange(g,v)}}checkPendingTracks(){const{bufferCodecEventsExpected:n,operationQueue:t,pendingTracks:r}=this,c=Object.keys(r).length;if(c&&!n||2===c){this.createSourceBuffers(r),this.pendingTracks={};const g=this.getSourceBufferTypes();if(g.length)this.hls.trigger(at.BUFFER_CREATED,{tracks:this.tracks}),g.forEach(v=>{t.executeNext(v)});else{const v=new Error("could not create source buffer for media codec(s)");this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:v,reason:v.message})}}}createSourceBuffers(n){const{sourceBuffer:t,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const c in n)if(!t[c]){const g=n[c];if(!g)throw Error(`source buffer exists for track ${c}, however track does not`);const v=g.levelCodec||g.codec,x=`${g.container};codecs=${v}`;Qt.log(`[buffer-controller]: creating sourceBuffer(${x})`);try{const Y=t[c]=r.addSourceBuffer(x),ie=c;this.addBufferListener(ie,"updatestart",this._onSBUpdateStart),this.addBufferListener(ie,"updateend",this._onSBUpdateEnd),this.addBufferListener(ie,"error",this._onSBUpdateError),this.tracks[c]={buffer:Y,codec:v,container:g.container,levelCodec:g.levelCodec,metadata:g.metadata,id:g.id}}catch(Y){Qt.error(`[buffer-controller]: error while trying to add sourceBuffer: ${Y.message}`),this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:Y,mimeType:x})}}}_onSBUpdateStart(n){const{operationQueue:t}=this;t.current(n).onStart()}_onSBUpdateEnd(n){const{operationQueue:t}=this;t.current(n).onComplete(),t.shiftAndExecuteNext(n)}_onSBUpdateError(n,t){const r=new Error(`${n} SourceBuffer error`);Qt.error(`[buffer-controller]: ${r}`,t),this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.BUFFER_APPENDING_ERROR,error:r,fatal:!1});const c=this.operationQueue.current(n);c&&c.onError(t)}removeExecutor(n,t,r){const{media:c,mediaSource:g,operationQueue:v,sourceBuffer:x}=this,Y=x[n];if(!c||!g||!Y)return Qt.warn(`[buffer-controller]: Attempting to remove from the ${n} SourceBuffer, but it does not exist`),void v.shiftAndExecuteNext(n);const ie=cr(c.duration)?c.duration:1/0,Me=cr(g.duration)?g.duration:1/0,Re=Math.max(0,t),$e=Math.min(r,ie,Me);$e>Re&&!Y.ending?(Y.ended=!1,Qt.log(`[buffer-controller]: Removing [${Re},${$e}] from the ${n} SourceBuffer`),Y.remove(Re,$e)):v.shiftAndExecuteNext(n)}appendExecutor(n,t){const{operationQueue:r,sourceBuffer:c}=this,g=c[t];if(!g)return Qt.warn(`[buffer-controller]: Attempting to append to the ${t} SourceBuffer, but it does not exist`),void r.shiftAndExecuteNext(t);g.ended=!1,g.appendBuffer(n)}blockBuffers(n,t=this.getSourceBufferTypes()){if(!t.length)return Qt.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(n);const{operationQueue:r}=this,c=t.map(g=>r.appendBlocker(g));Promise.all(c).then(()=>{n(),t.forEach(g=>{const v=this.sourceBuffer[g];null!=v&&v.updating||r.shiftAndExecuteNext(g)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(n,t,r){const c=this.sourceBuffer[n];if(!c)return;const g=r.bind(this,n);this.listeners[n].push({event:t,listener:g}),c.addEventListener(t,g)}removeBufferListeners(n){const t=this.sourceBuffer[n];!t||this.listeners[n].forEach(r=>{t.removeEventListener(r.event,r.listener)})}},capLevelController:ap,errorController:class pc{constructor(n){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=n,this.log=Qt.log.bind(Qt,"[info]:"),this.warn=Qt.warn.bind(Qt,"[warning]:"),this.error=Qt.error.bind(Qt,"[error]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(at.ERROR,this.onError,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const n=this.hls;!n||(n.off(at.ERROR,this.onError,this),n.off(at.ERROR,this.onErrorOut,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(n){this.playlistError=0}stopLoad(){}getVariantLevelIndex(n){return"main"===(null==n?void 0:n.type)?n.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(n,t){var r;if(t.fatal)return;const c=this.hls,g=t.context;switch(t.details){case mn.FRAG_LOAD_ERROR:case mn.FRAG_LOAD_TIMEOUT:case mn.KEY_LOAD_ERROR:case mn.KEY_LOAD_TIMEOUT:return void(t.errorAction=this.getFragRetryOrSwitchAction(t));case mn.FRAG_GAP:case mn.FRAG_PARSING_ERROR:case mn.FRAG_DECRYPT_ERROR:return t.errorAction=this.getFragRetryOrSwitchAction(t),void(t.errorAction.action=2);case mn.LEVEL_EMPTY_ERROR:case mn.LEVEL_PARSING_ERROR:{var v,x;const Y="main"===t.parent?t.level:c.loadLevel;t.details===mn.LEVEL_EMPTY_ERROR&&null!=(v=t.context)&&null!=(x=v.levelDetails)&&x.live?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,Y):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,Y))}return;case mn.LEVEL_LOAD_ERROR:case mn.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==g?void 0:g.level)&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,g.level)));case mn.AUDIO_TRACK_LOAD_ERROR:case mn.AUDIO_TRACK_LOAD_TIMEOUT:case mn.SUBTITLE_LOAD_ERROR:case mn.SUBTITLE_TRACK_LOAD_TIMEOUT:if(g){const Y=c.levels[c.loadLevel];if(Y&&("audioTrack"===g.type&&g.groupId===Y.audioGroupId||"subtitleTrack"===g.type&&g.groupId===Y.textGroupId))return t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c.loadLevel),t.errorAction.action=2,void(t.errorAction.flags=1)}return;case mn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const Y=c.levels[c.loadLevel],ie=null==Y?void 0:Y.attrs["HDCP-LEVEL"];ie&&(t.errorAction={action:2,flags:2,hdcpLevel:ie})}return;case mn.BUFFER_ADD_CODEC_ERROR:case mn.REMUX_ALLOC_ERROR:return void(t.errorAction=this.getLevelSwitchAction(t,null!=(r=t.level)?r:c.loadLevel));case mn.INTERNAL_EXCEPTION:case mn.BUFFER_APPENDING_ERROR:case mn.BUFFER_APPEND_ERROR:case mn.BUFFER_FULL_ERROR:case mn.LEVEL_SWITCH_ERROR:case mn.BUFFER_STALLED_ERROR:case mn.BUFFER_SEEK_OVER_HOLE:case mn.BUFFER_NUDGE_ON_STALL:return void(t.errorAction={action:0,flags:0})}if(t.type===pr.KEY_SYSTEM_ERROR){const Y=this.getVariantLevelIndex(t.frag);return t.levelRetry=!1,void(t.errorAction=this.getLevelSwitchAction(t,Y))}}getPlaylistRetryOrSwitchAction(n,t){var r;const g=Yf(this.hls.config.playlistLoadPolicy,n),v=this.playlistError++,x=null==(r=n.response)?void 0:r.code;if(gc(g,v,Pl(n),x))return{action:5,flags:0,retryConfig:g,retryCount:v};const ie=this.getLevelSwitchAction(n,t);return g&&(ie.retryConfig=g,ie.retryCount=v),ie}getFragRetryOrSwitchAction(n){const t=this.hls,r=this.getVariantLevelIndex(n.frag),c=t.levels[r],{fragLoadPolicy:g,keyLoadPolicy:v}=t.config,x=Yf(n.details.startsWith("key")?v:g,n),Y=t.levels.reduce((Re,$e)=>Re+$e.fragmentError,0);if(c){var ie;n.details!==mn.FRAG_GAP&&c.fragmentError++;const Re=null==(ie=n.response)?void 0:ie.code;if(gc(x,Y,Pl(n),Re))return{action:5,flags:0,retryConfig:x,retryCount:Y}}const Me=this.getLevelSwitchAction(n,r);return x&&(Me.retryConfig=x,Me.retryCount=Y),Me}getLevelSwitchAction(n,t){const r=this.hls;null==t&&(t=r.loadLevel);const c=this.hls.levels[t];if(c&&(c.loadError++,r.autoLevelEnabled)){var g,v;let x=-1;const{levels:Y,loadLevel:ie,minAutoLevel:Me,maxAutoLevel:Re}=r,$e=null==(g=n.frag)?void 0:g.type,{type:qe,groupId:ot}=null!=(v=n.context)?v:{};for(let gt=Y.length;gt--;){const Tt=(gt+ie)%Y.length;if(Tt!==ie&&Tt>=Me&&Tt<=Re&&0===Y[Tt].loadError){const $t=Y[Tt];if(n.details===mn.FRAG_GAP&&n.frag){const rn=Y[Tt].details;if(rn){const nn=Il(n.frag,rn.fragments,n.frag.start);if(null!=nn&&nn.gap)continue}}else{if("audioTrack"===qe&&ot===$t.audioGroupId||"subtitleTrack"===qe&&ot===$t.textGroupId)continue;if("audio"===$e&&c.audioGroupId===$t.audioGroupId||"subtitle"===$e&&c.textGroupId===$t.textGroupId)continue}x=Tt;break}}if(x>-1&&r.loadLevel!==x)return n.levelRetry=!0,this.playlistError=0,{action:2,flags:0,nextAutoLevel:x}}return{action:2,flags:1}}onErrorOut(n,t){var r;switch(null==(r=t.errorAction)?void 0:r.action){case 0:break;case 2:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==mn.FRAG_GAP&&(t.fatal=!0)}t.fatal&&this.hls.stopLoad()}sendAlternateToPenaltyBox(n){const t=this.hls,r=n.errorAction;if(!r)return;const{flags:c,hdcpLevel:g,nextAutoLevel:v}=r;switch(c){case 0:this.switchLevel(n,v);break;case 1:r.resolved||(r.resolved=this.redundantFailover(n));break;case 2:g&&(t.maxHdcpLevel=dc[dc.indexOf(g)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`)}r.resolved||this.switchLevel(n,v)}switchLevel(n,t){void 0!==t&&n.errorAction&&(this.warn(`switching to level ${t} after ${n.details}`),this.hls.nextAutoLevel=t,n.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(n){const{hls:t,penalizedRenditions:r}=this,c="main"===n.parent?n.level:t.loadLevel,g=t.levels[c],v=g.url.length,x=n.frag?n.frag.urlId:g.urlId;g.urlId===x&&(!n.frag||g.details)&&this.penalizeRendition(g,n);for(let Y=1;Y<v;Y++){const ie=(x+Y)%v,Me=r[ie];if(!Me||Sg(Me,n,r[x]))return this.warn(`Switching to Redundant Stream ${ie+1}/${v}: "${g.url[ie]}" after ${n.details}`),this.playlistError=0,t.levels.forEach(Re=>{Re.urlId=ie}),t.nextLoadLevel=c,!0}return!1}penalizeRendition(n,t){const{penalizedRenditions:r}=this,c=r[n.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};c.lastErrorPerfMs=performance.now(),c.errors.push(t),c.details=n.details,r[n.urlId]=c}},fpsController:class xs{constructor(n){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=n,this.registerListeners()}setStreamController(n){this.streamController=n}registerListeners(){this.hls.on(at.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(at.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(n,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const c=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=c,c&&"function"==typeof c.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(n,t,r){const c=performance.now();if(t){if(this.lastTime){const v=r-this.lastDroppedFrames,x=t-this.lastDecodedFrames,Y=1e3*v/(c-this.lastTime),ie=this.hls;if(ie.trigger(at.FPS_DROP,{currentDropped:v,currentDecoded:x,totalDroppedFrames:r}),Y>0&&v>ie.config.fpsDroppedMonitoringThreshold*x){let Me=ie.currentLevel;Qt.warn("drop FPS ratio greater than max allowed value for currentLevel: "+Me),Me>0&&(-1===ie.autoLevelCapping||ie.autoLevelCapping>=Me)&&(Me-=1,ie.trigger(at.FPS_DROP_LEVEL_CAPPING,{level:Me,droppedLevel:ie.currentLevel}),ie.autoLevelCapping=Me,this.streamController.nextLevelSwitch())}}this.lastTime=c,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const n=this.media;if(n)if(this.isVideoPlaybackQualityAvailable){const t=n.getVideoPlaybackQuality();this.checkFPS(n,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(n,n.webkitDecodedFrameCount,n.webkitDroppedFrameCount)}},stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:_l,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},function Nu(){return{cueHandler:Gm,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}()),{},{subtitleStreamController:class kd extends Fi{constructor(n,t,r){super(n,t,r,"[subtitle-stream-controller]","subtitle"),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.LEVEL_LOADED,this.onLevelLoaded,this),n.on(at.ERROR,this.onError,this),n.on(at.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(at.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.on(at.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(at.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.on(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.on(at.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.LEVEL_LOADED,this.onLevelLoaded,this),n.off(at.ERROR,this.onError,this),n.off(at.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(at.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),n.off(at.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(at.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),n.off(at.BUFFER_FLUSHING,this.onBufferFlushing,this),n.off(at.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(n){this.stopLoad(),this.state="IDLE",this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(n,t){this.mainDetails=t.details}onSubtitleFragProcessed(n,t){const{frag:r,success:c}=t;if(this.fragPrevious=r,this.state="IDLE",!c)return;const g=this.tracksBuffered[this.currentTrackId];if(!g)return;let v;const x=r.start;for(let ie=0;ie<g.length;ie++)if(x>=g[ie].start&&x<=g[ie].end){v=g[ie];break}const Y=r.start+r.duration;v?v.end=Y:(v={start:x,end:Y},g.push(v)),this.fragmentTracker.fragBuffered(r)}onBufferFlushing(n,t){const{startOffset:r,endOffset:c}=t;if(0===r&&c!==Number.POSITIVE_INFINITY){const g=c-1;if(g<=0)return;t.endOffsetSubtitles=Math.max(0,g),this.tracksBuffered.forEach(v=>{for(let x=0;x<v.length;)if(v[x].end<=g)v.shift();else{if(!(v[x].start<g))break;v[x].start=g,x++}}),this.fragmentTracker.removeFragmentsInRange(r,g,"subtitle")}}onFragBuffered(n,t){var r;this.loadedmetadata||"main"!==t.frag.type||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)}onError(n,t){const r=t.frag;"subtitle"===(null==r?void 0:r.type)&&(this.fragCurrent&&this.fragCurrent.abortRequests(),"STOPPED"!==this.state&&(this.state="IDLE"))}onSubtitleTracksUpdated(n,{subtitleTracks:t}){Fd(this.levels,t)?this.levels=t.map(r=>new hc(r)):(this.tracksBuffered=[],this.levels=t.map(r=>{const c=new hc(r);return this.tracksBuffered[c.id]=[],c}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,"subtitle"),this.fragPrevious=null,this.mediaBuffer=null)}onSubtitleTrackSwitch(n,t){if(this.currentTrackId=t.id,!this.levels.length||-1===this.currentTrackId)return void this.clearInterval();const r=this.levels[this.currentTrackId];this.mediaBuffer=null!=r&&r.details?this.mediaBufferTimeRanges:null,r&&this.setInterval(500)}onSubtitleTrackLoaded(n,t){var r;const{details:c,id:g}=t,{currentTrackId:v,levels:x}=this;if(!x.length)return;const Y=x[v];if(g>=x.length||g!==v||!Y)return;this.mediaBuffer=this.mediaBufferTimeRanges;let ie=0;if(c.live||null!=(r=Y.details)&&r.live){const Me=this.mainDetails;if(c.deltaUpdateFailed||!Me)return;const Re=Me.fragments[0];Y.details?(ie=this.alignPlaylists(c,Y.details),0===ie&&Re&&(ie=Re.start,bd(c,ie))):c.hasProgramDateTime&&Me.hasProgramDateTime?(vr(c,Me),ie=c.fragments[0].start):Re&&(ie=Re.start,bd(c,ie))}Y.details=c,this.levelLastLoaded=g,!this.startFragRequested&&(this.mainDetails||!c.live)&&this.setStartPosition(Y.details,ie),this.tick(),c.live&&!this.fragCurrent&&this.media&&"IDLE"===this.state&&(Il(null,c.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),Y.details=void 0))}_handleFragmentLoadComplete(n){const{frag:t,payload:r}=n,c=t.decryptdata,g=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&c&&c.key&&c.iv&&"AES-128"===c.method){const v=performance.now();this.decrypter.decrypt(new Uint8Array(r),c.key.buffer,c.iv.buffer).catch(x=>{throw g.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.FRAG_DECRYPT_ERROR,fatal:!1,error:x,reason:x.message,frag:t}),x}).then(x=>{const Y=performance.now();g.trigger(at.FRAG_DECRYPTED,{frag:t,payload:x,stats:{tstart:v,tdecrypt:Y}})}).catch(x=>{this.warn(`${x.name}: ${x.message}`),this.state="IDLE"})}}doTick(){if(this.media){if("IDLE"===this.state){const{currentTrackId:n,levels:t}=this,r=t[n];if(!t.length||!r||!r.details)return;const{config:c}=this,g=this.getLoadPosition(),v=Lt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],g,c.maxBufferHole),{end:x,len:Y}=v,ie=this.getFwdBufferInfo(this.media,"main"),Me=r.details;if(Y>this.getMaxBufferLength(null==ie?void 0:ie.len)+Me.levelTargetDuration)return;const $e=Me.fragments,qe=$e.length,ot=Me.edge;let gt=null;const Tt=this.fragPrevious;if(x<ot){const $t=c.maxFragLookUpTolerance,rn=x>ot-$t?0:$t;gt=Il(Tt,$e,Math.max($e[0].start,x),rn),!gt&&Tt&&Tt.start<$e[0].start&&(gt=$e[0])}else gt=$e[qe-1];if(!gt)return;if(gt=this.mapToInitFragWhenRequired(gt),"initSegment"!==gt.sn){const rn=$e[gt.sn-Me.startSN-1];rn&&rn.cc===gt.cc&&"NOT_LOADED"===this.fragmentTracker.getState(rn)&&(gt=rn)}"NOT_LOADED"===this.fragmentTracker.getState(gt)&&this.loadFragment(gt,r,x)}}else this.state="IDLE"}getMaxBufferLength(n){const t=super.getMaxBufferLength();return n?Math.max(t,n):t}loadFragment(n,t,r){this.fragCurrent=n,"initSegment"===n.sn?this._loadInitSegment(n,t):(this.startFragRequested=!0,super.loadFragment(n,t,r))}get mediaBufferTimeRanges(){return new lh(this.tracksBuffered[this.currentTrackId]||[])}},subtitleTrackController:class Dm extends Su{constructor(n){super(n,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(n){this._subtitleDisplay=n,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.LEVEL_LOADING,this.onLevelLoading,this),n.on(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(at.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.on(at.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.LEVEL_LOADING,this.onLevelLoading,this),n.off(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(at.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),n.off(at.ERROR,this.onError,this)}onMediaAttached(n,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(n){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,n)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Ou(this.media.textTracks).forEach(t=>{Za(t)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(n,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(n,t){const{id:r,details:c}=t,{trackId:g}=this,v=this.tracksInGroup[g];if(!v)return void this.warn(`Invalid subtitle track id ${r}`);const x=v.details;v.details=t.details,this.log(`subtitle track ${r} loaded [${c.startSN}-${c.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,x)}onLevelLoading(n,t){this.switchLevel(t.level)}onLevelSwitching(n,t){this.switchLevel(t.level)}switchLevel(n){const t=this.hls.levels[n];if(null==t||!t.textGroupIds)return;const r=t.textGroupIds[t.urlId],c=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==r){const g=this.tracks.filter(Y=>!r||Y.groupId===r);this.tracksInGroup=g;const v=this.findTrackId(null==c?void 0:c.name)||this.findTrackId();this.groupId=r||null;const x={subtitleTracks:g};this.log(`Updating subtitle tracks, ${g.length} track(s) found in "${r}" group-id`),this.hls.trigger(at.SUBTITLE_TRACKS_UPDATED,x),-1!==v&&this.setSubtitleTrack(v,c)}else this.shouldReloadPlaylist(c)&&this.setSubtitleTrack(this.trackId,c)}findTrackId(n){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const c=t[r];if((!this.selectDefaultTrack||c.default)&&(!n||n===c.name))return c.id}return-1}onError(n,t){t.fatal||!t.context||"subtitleTrack"===t.context.type&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&this.checkRetry(t)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(n){this.selectDefaultTrack=!1,this.setSubtitleTrack(n,this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0)}loadPlaylist(n){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const r=t.id,c=t.groupId;let g=t.url;if(n)try{g=n.addDirectives(g)}catch(v){this.warn(`Could not construct new URL with HLS Delivery Directives: ${v}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(at.SUBTITLE_TRACK_LOADING,{url:g,id:r,groupId:c,deliveryDirectives:n||null})}}toggleTrackModes(n){const{media:t,trackId:r}=this;if(!t)return;const c=Ou(t.textTracks),g=c.filter(x=>x.groupId===this.groupId);if(-1===n)[].slice.call(c).forEach(x=>{x.mode="disabled"});else{const x=g[r];x&&(x.mode="disabled")}const v=g[n];v&&(v.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(n,t){var r;const c=this.tracksInGroup;if(!this.media)return void(this.queuedDefaultTrack=n);if(this.trackId!==n&&this.toggleTrackModes(n),this.trackId===n&&(-1===n||null!=(r=c[n])&&r.details)||n<-1||n>=c.length)return;this.clearTimer();const g=c[n];if(this.log(`Switching to subtitle-track ${n}`+(g?` "${g.name}" lang:${g.lang} group:${g.groupId}`:"")),this.trackId=n,g){const{id:v,groupId:x="",name:Y,type:ie,url:Me}=g;this.hls.trigger(at.SUBTITLE_TRACK_SWITCH,{id:v,groupId:x,name:Y,type:ie,url:Me});const Re=this.switchParams(g.url,null==t?void 0:t.details);this.loadPlaylist(Re)}else this.hls.trigger(at.SUBTITLE_TRACK_SWITCH,{id:n})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=-1;const t=Ou(this.media.textTracks);for(let r=0;r<t.length;r++)if("hidden"===t[r].mode)n=r;else if("showing"===t[r].mode){n=r;break}this.subtitleTrack!==n&&(this.subtitleTrack=n)}},timelineController:class bh{constructor(n){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=n,this.config=n.config,this.Cues=n.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const t=new wu(this,"textTrack1"),r=new wu(this,"textTrack2"),c=new wu(this,"textTrack3"),g=new wu(this,"textTrack4");this.cea608Parser1=new Dc(1,t,r),this.cea608Parser2=new Dc(3,c,g)}n.on(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(at.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.on(at.FRAG_LOADING,this.onFragLoading,this),n.on(at.FRAG_LOADED,this.onFragLoaded,this),n.on(at.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.on(at.FRAG_DECRYPTED,this.onFragDecrypted,this),n.on(at.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(at.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.on(at.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:n}=this;n.off(at.MEDIA_ATTACHING,this.onMediaAttaching,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(at.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),n.off(at.FRAG_LOADING,this.onFragLoading,this),n.off(at.FRAG_LOADED,this.onFragLoaded,this),n.off(at.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),n.off(at.FRAG_DECRYPTED,this.onFragDecrypted,this),n.off(at.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(at.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),n.off(at.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(n,t,r,c,g){let v=!1;for(let x=g.length;x--;){const Y=g[x],ie=sp(Y[0],Y[1],t,r);if(ie>=0&&(Y[0]=Math.min(Y[0],t),Y[1]=Math.max(Y[1],r),v=!0,ie/(r-t)>.5))return}if(v||g.push([t,r]),this.config.renderTextTracksNatively)this.Cues.newCue(this.captionsTracks[n],t,r,c);else{const x=this.Cues.newCue(null,t,r,c);this.hls.trigger(at.CUES_PARSED,{type:"captions",cues:x,track:n})}}onInitPtsFound(n,{frag:t,id:r,initPTS:c,timescale:g}){const{unparsedVttFrags:v}=this;"main"===r&&(this.initPTS[t.cc]={baseTime:c,timescale:g}),v.length&&(this.unparsedVttFrags=[],v.forEach(x=>{this.onFragLoaded(at.FRAG_LOADED,x)}))}getExistingTrack(n){const{media:t}=this;if(t)for(let r=0;r<t.textTracks.length;r++){const c=t.textTracks[r];if(c[n])return c}return null}createCaptionsTrack(n){this.config.renderTextTracksNatively?this.createNativeTrack(n):this.createNonNativeTrack(n)}createNativeTrack(n){if(this.captionsTracks[n])return;const{captionsProperties:t,captionsTracks:r,media:c}=this,{label:g,languageCode:v}=t[n],x=this.getExistingTrack(n);if(x)r[n]=x,Za(r[n]),Dl(r[n],c);else{const Y=this.createTextTrack("captions",g,v);Y&&(Y[n]=!0,r[n]=Y)}}createNonNativeTrack(n){if(this.nonNativeCaptionsTracks[n])return;const t=this.captionsProperties[n];if(!t)return;const c={_id:n,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[n]=c,this.hls.trigger(at.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[c]})}createTextTrack(n,t,r){const c=this.media;if(c)return c.addTextTrack(n,t,r)}onMediaAttaching(n,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:n}=this;Object.keys(n).forEach(t=>{Za(n[t]),delete n[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:n}=this;if(!n)return;const t=n.textTracks;if(t)for(let r=0;r<t.length;r++)Za(t[r])}onSubtitleTracksUpdated(n,t){const r=t.subtitleTracks||[],c=r.some(g=>g.textCodec===Wd);if(this.config.enableWebVTT||c&&this.config.enableIMSC1){if(Fd(this.tracks,r))return void(this.tracks=r);if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const v=this.media?this.media.textTracks:null;this.tracks.forEach((x,Y)=>{let ie;if(v&&Y<v.length){let Me=null;for(let Re=0;Re<v.length;Re++)if(Nm(v[Re],x)){Me=v[Re];break}Me&&(ie=Me)}if(ie)Za(ie);else{const Me=this._captionsOrSubtitlesFromCharacteristics(x);ie=this.createTextTrack(Me,x.name,x.lang),ie&&(ie.mode="disabled")}ie&&(ie.groupId=x.groupId,this.textTracks.push(ie))})}else if(this.tracks.length){const v=this.tracks.map(x=>({label:x.name,kind:x.type.toLowerCase(),default:x.default,subtitleTrack:x}));this.hls.trigger(at.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:v})}}}_captionsOrSubtitlesFromCharacteristics(n){if(n.attrs.CHARACTERISTICS){const t=/transcribes-spoken-dialog/gi.test(n.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(n.attrs.CHARACTERISTICS);if(t&&r)return"captions"}return"subtitles"}onManifestLoaded(n,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const c=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!c)return;const v=this.captionsProperties[`textTrack${c[1]}`];!v||(v.label=r.name,r.lang&&(v.languageCode=r.lang),v.media=r)})}closedCaptionsForLevel(n){const t=this.hls.levels[n.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(n,t){const{cea608Parser1:r,cea608Parser2:c,lastSn:g,lastPartIndex:v}=this;if(this.enabled&&r&&c&&"main"===t.frag.type){var x,Y;const ie=t.frag.sn,Me=null!=(x=null==t||null==(Y=t.part)?void 0:Y.index)?x:-1;ie===g+1||ie===g&&Me===v+1||(r.reset(),c.reset()),this.lastSn=ie,this.lastPartIndex=Me}}onFragLoaded(n,t){const{frag:r,payload:c}=t;if("subtitle"===r.type)if(c.byteLength){const g=r.decryptdata,v="stats"in t;if(null==g||!g.encrypted||v){const x=this.tracks[r.level],Y=this.vttCCs;Y[r.cc]||(Y[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),x&&x.textCodec===Wd?this._parseIMSC1(r,c):this._parseVTTs(t)}}else this.hls.trigger(at.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(n,t){const r=this.hls;rp(t,this.initPTS[n.cc],c=>{this._appendCues(c,n.level),r.trigger(at.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},c=>{Qt.log(`Failed to parse IMSC1: ${c}`),r.trigger(at.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:c})})}_parseVTTs(n){var t;const{frag:r,payload:c}=n,{initPTS:g,unparsedVttFrags:v}=this,x=g.length-1;if(!g[r.cc]&&-1===x)return void v.push(n);const Y=this.hls;!function mh(f,n,t,r,c,g,v){const x=new Om,Y=_s(new Uint8Array(f)).trim().replace(Ac,"\n").split("\n"),ie=[],Me=n?function xg(f,n=1){return Ja(f,9e4,1/n)}(n.baseTime,n.timescale):0;let ot,Re="00:00.000",$e=0,qe=0,gt=!0;x.oncue=function(Tt){const $t=t[r];let rn=t.ccOffset;const nn=($e-Me)/9e4;if(null!=$t&&$t.new&&(void 0!==qe?rn=t.ccOffset=$t.start:function(n,t,r){let c=n[t],g=n[c.prevCC];if(!g||!g.new&&c.new)return n.ccOffset=n.presentationOffset=c.start,void(c.new=!1);for(;null!=(v=g)&&v.new;){var v;n.ccOffset+=c.start-g.start,c.new=!1,c=g,g=n[c.prevCC]}n.presentationOffset=r}(t,r,nn)),nn){if(!n)return void(ot=new Error("Missing initPTS for VTT MPEGTS"));rn=nn-t.presentationOffset}const Sn=Tt.endTime-Tt.startTime,gn=As(9e4*(Tt.startTime+rn-qe),9e4*c)/9e4;Tt.startTime=Math.max(gn,0),Tt.endTime=Math.max(gn+Sn,0);const Bn=Tt.text.trim();Tt.text=decodeURIComponent(encodeURIComponent(Bn)),Tt.id||(Tt.id=ph(Tt.startTime,Tt.endTime,Bn)),Tt.endTime>0&&ie.push(Tt)},x.onparsingerror=function(Tt){ot=Tt},x.onflush=function(){ot?v(ot):g(ie)},Y.forEach(Tt=>{if(gt){if(hh(Tt,"X-TIMESTAMP-MAP=")){gt=!1,Tt.slice(16).split(",").forEach($t=>{hh($t,"LOCAL:")?Re=$t.slice(6):hh($t,"MPEGTS:")&&($e=parseInt($t.slice(7)))});try{qe=function(n){let t=parseInt(n.slice(-3));const r=parseInt(n.slice(-6,-4)),c=parseInt(n.slice(-9,-7)),g=n.length>9?parseInt(n.substring(0,n.indexOf(":"))):0;if(!(cr(t)&&cr(r)&&cr(c)&&cr(g)))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${n}`);return t+=1e3*r,t+=6e4*c,t+=36e5*g,t}(Re)/1e3}catch($t){ot=$t}return}""===Tt&&(gt=!1)}x.parse(Tt+"\n")}),x.flush()}(null!=(t=r.initSegment)&&t.data?ha(r.initSegment.data,new Uint8Array(c)):c,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,Me=>{this._appendCues(Me,r.level),Y.trigger(at.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},Me=>{const Re="Missing initPTS for VTT MPEGTS"===Me.message;Re?v.push(n):this._fallbackToIMSC1(r,c),Qt.log(`Failed to parse VTT cue: ${Me}`),!(Re&&x>r.cc)&&Y.trigger(at.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Me})})}_fallbackToIMSC1(n,t){const r=this.tracks[n.level];r.textCodec||rp(t,this.initPTS[n.cc],()=>{r.textCodec=Wd,this._parseIMSC1(n,t)},()=>{r.textCodec="wvtt"})}_appendCues(n,t){const r=this.hls;if(this.config.renderTextTracksNatively){const c=this.textTracks[t];if(!c||"disabled"===c.mode)return;n.forEach(g=>mu(c,g))}else{const c=this.tracks[t];if(!c)return;r.trigger(at.CUES_PARSED,{type:"subtitles",cues:n,track:c.default?"default":"subtitles"+t})}}onFragDecrypted(n,t){const{frag:r}=t;"subtitle"===r.type&&this.onFragLoaded(at.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(n,t){const{cea608Parser1:r,cea608Parser2:c}=this;if(!this.enabled||!r||!c)return;const{frag:g,samples:v}=t;if("main"!==g.type||"NONE"!==this.closedCaptionsForLevel(g))for(let x=0;x<v.length;x++){const Y=v[x].bytes;if(Y){const ie=this.extractCea608Data(Y);r.addData(v[x].pts,ie[0]),c.addData(v[x].pts,ie[1])}}}onBufferFlushing(n,{startOffset:t,endOffset:r,endOffsetSubtitles:c,type:g}){const{media:v}=this;if(v&&!(v.currentTime<r)){if(!g||"video"===g){const{captionsTracks:x}=this;Object.keys(x).forEach(Y=>Ka(x[Y],t,r))}if(this.config.renderTextTracksNatively&&0===t&&void 0!==c){const{textTracks:x}=this;Object.keys(x).forEach(Y=>Ka(x[Y],t,c))}}}extractCea608Data(n){const t=[[],[]],r=31&n[0];let c=2;for(let g=0;g<r;g++){const v=n[c++],x=127&n[c++],Y=127&n[c++];if((0!==x||0!==Y)&&0!=(4&v)){const Me=3&v;(0===Me||1===Me)&&(t[Me].push(x),t[Me].push(Y))}}return t}},audioStreamController:class Cm extends Fi{constructor(n,t,r){super(n,t,r,"[audio-stream-controller]","audio"),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:n}=this;n.on(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.on(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.LEVEL_LOADED,this.onLevelLoaded,this),n.on(at.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.on(at.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.on(at.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(at.ERROR,this.onError,this),n.on(at.BUFFER_RESET,this.onBufferReset,this),n.on(at.BUFFER_CREATED,this.onBufferCreated,this),n.on(at.BUFFER_FLUSHED,this.onBufferFlushed,this),n.on(at.INIT_PTS_FOUND,this.onInitPtsFound,this),n.on(at.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:n}=this;n.off(at.MEDIA_ATTACHED,this.onMediaAttached,this),n.off(at.MEDIA_DETACHING,this.onMediaDetaching,this),n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.LEVEL_LOADED,this.onLevelLoaded,this),n.off(at.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),n.off(at.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),n.off(at.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(at.ERROR,this.onError,this),n.off(at.BUFFER_RESET,this.onBufferReset,this),n.off(at.BUFFER_CREATED,this.onBufferCreated,this),n.off(at.BUFFER_FLUSHED,this.onBufferFlushed,this),n.off(at.INIT_PTS_FOUND,this.onInitPtsFound,this),n.off(at.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(n,{frag:t,id:r,initPTS:c,timescale:g}){if("main"===r){const v=t.cc;this.initPTS[t.cc]={baseTime:c,timescale:g},this.log(`InitPTS for cc: ${v} found from main: ${c}`),this.videoTrackCC=v,"WAITING_INIT_PTS"===this.state&&this.tick()}}startLoad(n){if(!this.levels)return this.startPosition=n,void(this.state="STOPPED");const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),t>0&&-1===n?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),n=t,this.state="IDLE"):(this.loadedmetadata=!1,this.state="WAITING_TRACK"),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=n,this.tick()}doTick(){switch(this.state){case"IDLE":this.doTickIdle();break;case"WAITING_TRACK":{var n;const{levels:r,trackId:c}=this,g=null==r||null==(n=r[c])?void 0:n.details;if(g){if(this.waitForCdnTuneIn(g))break;this.state="WAITING_INIT_PTS"}break}case"FRAG_LOADING_WAITING_RETRY":{var t;const r=performance.now(),c=this.retryDate;(!c||r>=c||null!=(t=this.media)&&t.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state="IDLE");break}case"WAITING_INIT_PTS":{const r=this.waitingData;if(r){const{frag:c,part:g,cache:v,complete:x}=r;if(void 0!==this.initPTS[c.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state="FRAG_LOADING";const ie={frag:c,part:g,payload:v.flush(),networkDetails:null};this._handleFragmentLoadProgress(ie),x&&super._handleFragmentLoadComplete(ie)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${c.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const Y=this.getLoadPosition(),ie=Lt.bufferInfo(this.mediaBuffer,Y,this.config.maxBufferHole);_a(ie.end,this.config.maxFragLookUpTolerance,c)<0&&(this.log(`Waiting fragment cc (${c.cc}) @ ${c.start} cancelled because another fragment at ${ie.end} is needed`),this.clearWaitingFragment())}}else this.state="IDLE"}}this.onTickEnd()}clearWaitingFragment(){const n=this.waitingData;n&&(this.fragmentTracker.removeFragment(n.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state="IDLE")}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:n}=this;null==n||!n.readyState||(this.lastCurrentTime=n.currentTime)}doTickIdle(){const{hls:n,levels:t,media:r,trackId:c}=this;if(null==t||!t[c]||!r&&(this.startFragRequested||!n.config.startFragPrefetch))return;const v=t[c],x=v.details;if(!x||x.live&&this.levelLastLoaded!==c||this.waitForCdnTuneIn(x))return void(this.state="WAITING_TRACK");const Y=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&Y&&(this.bufferFlushed=!1,this.afterBufferFlushed(Y,"audio","audio"));const ie=this.getFwdBufferInfo(Y,"audio");if(null===ie)return;const{bufferedTrack:Me,switchingTrack:Re}=this;if(!Re&&this._streamEnded(ie,x))return n.trigger(at.BUFFER_EOS,{type:"audio"}),void(this.state="ENDED");const $e=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,"main"),qe=ie.len,ot=this.getMaxBufferLength(null==$e?void 0:$e.len);if(qe>=ot&&!Re)return;const Tt=x.fragments[0].start;let $t=ie.end;if(Re&&r){const gn=this.getLoadPosition();Me&&Re.attrs!==Me.attrs&&($t=gn),x.PTSKnown&&gn<Tt&&(ie.end>Tt||ie.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=Tt+.05)}let rn=this.getNextFragment($t,x),nn=!1;if(rn&&this.isLoopLoading(rn,$t)&&(nn=!!rn.gap,rn=this.getNextFragmentLoopLoading(rn,x,ie,"main",ot)),!rn)return void(this.bufferFlushed=!0);const Sn=$e&&rn.start>$e.end+x.targetduration;if(Sn||(null==$e||!$e.len)&&ie.len){const gn=this.getAppendedFrag(rn.start,"main");if(null===gn||(nn||(nn=!!gn.gap||!!Sn&&0===$e.len),Sn&&!nn||nn&&ie.nextStart&&ie.nextStart<gn.end))return}this.loadFragment(rn,v,$t)}getMaxBufferLength(n){const t=super.getMaxBufferLength();return n?Math.min(Math.max(t,n),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(n,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new hc(r))}onAudioTrackSwitching(n,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:c}=this;c&&(c.abortRequests(),this.removeUnbufferedFrags(c.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=t,this.state="IDLE"):(this.switchingTrack=null,this.bufferedTrack=t,this.state="STOPPED"),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(n,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(at.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(n,t){var r;if(null==this.mainDetails)return void(this.cachedTrackLoadedData=t);const{levels:c}=this,{details:g,id:v}=t;if(!c)return void this.warn(`Audio tracks were reset while loading level ${v}`);this.log(`Track ${v} loaded [${g.startSN},${g.endSN}]${g.lastPartSn?`[part-${g.lastPartSn}-${g.lastPartIndex}]`:""},duration:${g.totalduration}`);const x=c[v];let Y=0;if(g.live||null!=(r=x.details)&&r.live){const ie=this.mainDetails;if(g.fragments[0]||(g.deltaUpdateFailed=!0),g.deltaUpdateFailed||!ie)return;!x.details&&g.hasProgramDateTime&&ie.hasProgramDateTime?(vr(g,ie),Y=g.fragments[0].start):Y=this.alignPlaylists(g,x.details)}x.details=g,this.levelLastLoaded=v,!this.startFragRequested&&(this.mainDetails||!g.live)&&this.setStartPosition(x.details,Y),"WAITING_TRACK"===this.state&&!this.waitForCdnTuneIn(g)&&(this.state="IDLE"),this.tick()}_handleFragmentLoadProgress(n){var t;const{frag:r,part:c,payload:g}=n,{config:v,trackId:x,levels:Y}=this;if(!Y)return void this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);const ie=Y[x];if(!ie)return void this.warn("Audio track is undefined on fragment load progress");const Me=ie.details;if(!Me)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);const Re=v.defaultAudioCodec||ie.audioCodec||"mp4a.40.2";let $e=this.transmuxer;$e||($e=this.transmuxer=new jg(this.hls,"audio",this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const qe=this.initPTS[r.cc],ot=null==(t=r.initSegment)?void 0:t.data;if(void 0!==qe){const gt=!1,Tt=c?c.index:-1,rn=new Ht(r.level,r.sn,r.stats.chunkCount,g.byteLength,Tt,-1!==Tt);$e.push(g,ot,Re,"",r,c,Me.totalduration,gt,rn,qe)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${Me.startSN} ,${Me.endSN}],track ${x}`);const{cache:gt}=this.waitingData=this.waitingData||{frag:r,part:c,cache:new bm,complete:!1};gt.push(new Uint8Array(g)),this.waitingVideoCC=this.videoTrackCC,this.state="WAITING_INIT_PTS"}}_handleFragmentLoadComplete(n){this.waitingData?this.waitingData.complete=!0:super._handleFragmentLoadComplete(n)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(n,t){const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(n,t){const{frag:r,part:c}=t;if("audio"===r.type)if(this.fragContextChanged(r))this.warn(`Fragment ${r.sn}${c?" p: "+c.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);else{if("initSegment"!==r.sn){this.fragPrevious=r;const g=this.switchingTrack;g&&(this.bufferedTrack=g,this.switchingTrack=null,this.hls.trigger(at.AUDIO_TRACK_SWITCHED,Li({},g)))}this.fragBufferedComplete(r,c)}else if(!this.loadedmetadata&&"main"===r.type){const g=this.videoBuffer||this.media;g&&Lt.getBuffered(g).length&&(this.loadedmetadata=!0)}}onError(n,t){var r;if(t.fatal)this.state="ERROR";else switch(t.details){case mn.FRAG_GAP:case mn.FRAG_PARSING_ERROR:case mn.FRAG_DECRYPT_ERROR:case mn.FRAG_LOAD_ERROR:case mn.FRAG_LOAD_TIMEOUT:case mn.KEY_LOAD_ERROR:case mn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError("audio",t);break;case mn.AUDIO_TRACK_LOAD_ERROR:case mn.AUDIO_TRACK_LOAD_TIMEOUT:case mn.LEVEL_PARSING_ERROR:!t.levelRetry&&"WAITING_TRACK"===this.state&&"audioTrack"===(null==(r=t.context)?void 0:r.type)&&(this.state="IDLE");break;case mn.BUFFER_FULL_ERROR:if(!t.parent||"audio"!==t.parent)return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case mn.INTERNAL_EXCEPTION:this.recoverWorkerError(t)}}onBufferFlushed(n,{type:t}){"audio"===t&&(this.bufferFlushed=!0,"ENDED"===this.state&&(this.state="IDLE"))}_handleTransmuxComplete(n){var t;const r="audio",{hls:c}=this,{remuxResult:g,chunkMeta:v}=n,x=this.getCurrentContext(v);if(!x)return void this.resetWhenMissingContext(v);const{frag:Y,part:ie,level:Me}=x,{details:Re}=Me,{audio:$e,text:qe,id3:ot,initSegment:gt}=g;if(!this.fragContextChanged(Y)&&Re){if(this.state="PARSING",this.switchingTrack&&$e&&this.completeAudioSwitch(this.switchingTrack),null!=gt&&gt.tracks){const Tt=Y.initSegment||Y;this._bufferInitSegment(gt.tracks,Tt,v),c.trigger(at.FRAG_PARSING_INIT_SEGMENT,{frag:Tt,id:r,tracks:gt.tracks})}if($e){const{startPTS:Tt,endPTS:$t,startDTS:rn,endDTS:nn}=$e;ie&&(ie.elementaryStreams.audio={startPTS:Tt,endPTS:$t,startDTS:rn,endDTS:nn}),Y.setElementaryStreamInfo("audio",Tt,$t,rn,nn),this.bufferFragmentData($e,Y,ie,v)}if(null!=ot&&null!=(t=ot.samples)&&t.length){const Tt=Gi({id:r,frag:Y,details:Re},ot);c.trigger(at.FRAG_PARSING_METADATA,Tt)}if(qe){const Tt=Gi({id:r,frag:Y,details:Re},qe);c.trigger(at.FRAG_PARSING_USERDATA,Tt)}}else this.fragmentTracker.removeFragment(Y)}_bufferInitSegment(n,t,r){if("PARSING"!==this.state)return;n.video&&delete n.video;const c=n.audio;if(!c)return;c.levelCodec=c.codec,c.id="audio",this.log(`Init audio buffer, container:${c.container}, codecs[parsed]=[${c.codec}]`),this.hls.trigger(at.BUFFER_CODECS,n);const g=c.initSegment;null!=g&&g.byteLength&&this.hls.trigger(at.BUFFER_APPENDING,{type:"audio",frag:t,part:null,chunkMeta:r,parent:t.type,data:g}),this.tick()}loadFragment(n,t,r){const c=this.fragmentTracker.getState(n);var g;this.fragCurrent=n,this.switchingTrack||"NOT_LOADED"===c||"PARTIAL"===c?"initSegment"===n.sn?this._loadInitSegment(n,t):null!=(g=t.details)&&g.live&&!this.initPTS[n.cc]?(this.log(`Waiting for video PTS in continuity counter ${n.cc} of live stream before loading audio fragment ${n.sn} of level ${this.trackId}`),this.state="WAITING_INIT_PTS"):(this.startFragRequested=!0,super.loadFragment(n,t,r)):this.clearTrackerIfNeeded(n)}completeAudioSwitch(n){const{hls:t,media:r,bufferedTrack:c}=this,g=null==c?void 0:c.attrs,v=n.attrs;r&&g&&(g.CHANNELS!==v.CHANNELS||g.NAME!==v.NAME||g.LANGUAGE!==v.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=n,this.switchingTrack=null,t.trigger(at.AUDIO_TRACK_SWITCHED,Li({},n))}},audioTrackController:class Sm extends Su{constructor(n){super(n,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:n}=this;n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.LEVEL_LOADING,this.onLevelLoading,this),n.on(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.on(at.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.on(at.ERROR,this.onError,this)}unregisterListeners(){const{hls:n}=this;n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.LEVEL_LOADING,this.onLevelLoading,this),n.off(at.LEVEL_SWITCHING,this.onLevelSwitching,this),n.off(at.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),n.off(at.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(n,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(n,t){const{id:r,groupId:c,details:g}=t,v=this.tracksInGroup[r];if(!v||v.groupId!==c)return void this.warn(`Track with id:${r} and group:${c} not found in active group ${v.groupId}`);const x=v.details;v.details=t.details,this.log(`audio-track ${r} "${v.name}" lang:${v.lang} group:${c} loaded [${g.startSN}-${g.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,x)}onLevelLoading(n,t){this.switchLevel(t.level)}onLevelSwitching(n,t){this.switchLevel(t.level)}switchLevel(n){const t=this.hls.levels[n];if(null==t||!t.audioGroupIds)return;const r=t.audioGroupIds[t.urlId];if(this.groupId!==r){this.groupId=r||null;const c=this.tracks.filter(v=>!r||v.groupId===r);this.selectDefaultTrack&&!c.some(v=>v.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=c;const g={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group:${r}`),this.hls.trigger(at.AUDIO_TRACKS_UPDATED,g),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(n,t){t.fatal||!t.context||"audioTrack"===t.context.type&&t.context.id===this.trackId&&t.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(t))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(n){this.selectDefaultTrack=!1,this.setAudioTrack(n)}setAudioTrack(n){const t=this.tracksInGroup;if(n<0||n>=t.length)return void this.warn("Invalid id passed to audio-track controller");this.clearTimer();const r=this.currentTrack,c=t[n],{groupId:g,name:v}=c;if(this.log(`Switching to audio-track ${n} "${v}" lang:${c.lang} group:${g}`),this.trackId=n,this.currentTrack=c,this.selectDefaultTrack=!1,this.hls.trigger(at.AUDIO_TRACK_SWITCHING,Li({},c)),c.details&&!c.details.live)return;const x=this.switchParams(c.url,null==r?void 0:r.details);this.loadPlaylist(x)}selectInitialTrack(){const n=this.tracksInGroup,t=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==t)this.setAudioTrack(t);else{const r=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${n.length}`);this.warn(r.message),this.hls.trigger(at.ERROR,{type:pr.MEDIA_ERROR,details:mn.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:r})}}findTrackId(n){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const c=t[r];if((!this.selectDefaultTrack||c.default)&&(!n||void 0!==n.attrs["STABLE-RENDITION-ID"]&&n.attrs["STABLE-RENDITION-ID"]===c.attrs["STABLE-RENDITION-ID"]||n.name===c.name&&n.lang===c.lang))return c.id}return-1}loadPlaylist(n){super.loadPlaylist();const t=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(t)){const r=t.id,c=t.groupId;let g=t.url;if(n)try{g=n.addDirectives(g)}catch(v){this.warn(`Could not construct new URL with HLS Delivery Directives: ${v}`)}this.log(`loading audio-track playlist ${r} "${t.name}" lang:${t.lang} group:${c}`),this.clearTimer(),this.hls.trigger(at.AUDIO_TRACK_LOADING,{url:g,id:r,groupId:c,deliveryDirectives:n||null})}}},emeController:uv,cmcdController:kl,contentSteeringController:class Mh{constructor(n){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=n,this.log=Qt.log.bind(Qt,"[content-steering]:"),this.registerListeners()}registerListeners(){const n=this.hls;n.on(at.MANIFEST_LOADING,this.onManifestLoading,this),n.on(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.on(at.MANIFEST_PARSED,this.onManifestParsed,this),n.on(at.ERROR,this.onError,this)}unregisterListeners(){const n=this.hls;!n||(n.off(at.MANIFEST_LOADING,this.onManifestLoading,this),n.off(at.MANIFEST_LOADED,this.onManifestLoaded,this),n.off(at.MANIFEST_PARSED,this.onManifestParsed,this),n.off(at.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const n=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,n)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(n){const t=this.levels;t&&(this.levels=t.filter(r=>r!==n))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(n,t){const{contentSteering:r}=t;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(n,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(n,t){const{errorAction:r}=t;if(2===(null==r?void 0:r.action)&&1===r.flags){let c=this.pathwayPriority;const g=this.pathwayId;this.penalizedPathways[g]||(this.penalizedPathways[g]=performance.now()),!c&&this.levels&&(c=this.levels.reduce((v,x)=>(-1===v.indexOf(x.pathwayId)&&v.push(x.pathwayId),v),[])),c&&c.length>1&&(this.updatePathwayPriority(c),r.resolved=this.pathwayId!==g)}}filterParsedLevels(n){this.levels=n;let t=this.getLevelsForPathway(this.pathwayId);if(0===t.length){const r=n[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==n.length?(this.log(`Found ${t.length}/${n.length} levels in Pathway "${this.pathwayId}"`),t):n}getLevelsForPathway(n){return null===this.levels?[]:this.levels.filter(t=>n===t.pathwayId)}updatePathwayPriority(n){let t;this.pathwayPriority=n;const r=this.penalizedPathways,c=performance.now();Object.keys(r).forEach(g=>{c-r[g]>3e5&&delete r[g]});for(let g=0;g<n.length;g++){const v=n[g];if(r[v])continue;if(v===this.pathwayId)return;const x=this.hls.nextLoadLevel,Y=this.hls.levels[x];if(t=this.getLevelsForPathway(v),t.length>0){this.log(`Setting Pathway to "${v}"`),this.pathwayId=v,this.hls.trigger(at.LEVELS_UPDATED,{levels:t});const ie=this.hls.levels[x];Y&&ie&&this.levels&&(ie.attrs["STABLE-VARIANT-ID"]!==Y.attrs["STABLE-VARIANT-ID"]&&ie.bitrate!==Y.bitrate&&this.log(`Unstable Pathways change from bitrate ${Y.bitrate} to ${ie.bitrate}`),this.hls.nextLoadLevel=x);break}}}clonePathways(n){const t=this.levels;if(!t)return;const r={},c={};n.forEach(g=>{const{ID:v,"BASE-ID":x,"URI-REPLACEMENT":Y}=g;if(t.some(Me=>Me.pathwayId===v))return;const ie=this.getLevelsForPathway(x).map(Me=>{const Re=Gi({},Me);Re.details=void 0,Re.url=$d(Me.uri,Me.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",Y);const $e=new yi(Me.attrs);$e["PATHWAY-ID"]=v;const qe=$e.AUDIO&&`${$e.AUDIO}_clone_${v}`,ot=$e.SUBTITLES&&`${$e.SUBTITLES}_clone_${v}`;qe&&(r[$e.AUDIO]=qe,$e.AUDIO=qe),ot&&(c[$e.SUBTITLES]=ot,$e.SUBTITLES=ot),Re.attrs=$e;const gt=new hc(Re);return mc(gt,"audio",qe),mc(gt,"text",ot),gt});t.push(...ie),up(this.audioTracks,r,Y,v),up(this.subtitleTracks,c,Y,v)})}loadSteeringManifest(n){const t=this.hls.config,r=t.loader;let c;this.loader&&this.loader.destroy(),this.loader=new r(t);try{c=new self.URL(n)}catch(Me){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest URI: ${n}`)}if("data:"!==c.protocol){const Me=0|(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate);c.searchParams.set("_HLS_pathway",this.pathwayId),c.searchParams.set("_HLS_throughput",""+Me)}const g={responseType:"json",url:c.href},v=t.steeringManifestLoadPolicy.default,x=v.errorRetry||v.timeoutRetry||{},Y={loadPolicy:v,timeout:v.maxLoadTimeMs,maxRetry:x.maxNumRetry||0,retryDelay:x.retryDelayMs||0,maxRetryDelay:x.maxRetryDelayMs||0},ie={onSuccess:(Me,Re,$e,qe)=>{this.log(`Loaded steering manifest: "${c}"`);const ot=Me.data;if(1!==ot.VERSION)return void this.log(`Steering VERSION ${ot.VERSION} not supported!`);this.updated=performance.now(),this.timeToLoad=ot.TTL;const{"RELOAD-URI":gt,"PATHWAY-CLONES":Tt,"PATHWAY-PRIORITY":$t}=ot;if(gt)try{this.uri=new self.URL(gt,c).href}catch(rn){return this.enabled=!1,void this.log(`Failed to parse Steering Manifest RELOAD-URI: ${gt}`)}this.scheduleRefresh(this.uri||$e.url),Tt&&this.clonePathways(Tt),$t&&this.updatePathwayPriority($t)},onError:(Me,Re,$e,qe)=>{if(this.log(`Error loading steering manifest: ${Me.code} ${Me.text} (${Re.url})`),this.stopLoad(),410===Me.code)return this.enabled=!1,void this.log(`Steering manifest ${Re.url} no longer available`);let ot=1e3*this.timeToLoad;if(429!==Me.code)this.scheduleRefresh(this.uri||Re.url,ot);else{const gt=this.loader;if("function"==typeof(null==gt?void 0:gt.getResponseHeader)){const Tt=gt.getResponseHeader("Retry-After");Tt&&(ot=1e3*parseFloat(Tt))}this.log(`Steering manifest ${Re.url} rate limited`)}},onTimeout:(Me,Re,$e)=>{this.log(`Timeout loading steering manifest (${Re.url})`),this.scheduleRefresh(this.uri||Re.url)}};this.log(`Requesting steering manifest: ${c}`),this.loader.load(g,Y,ie)}scheduleRefresh(n,t=1e3*this.timeToLoad){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(n)},t)}}});function Sa(f){return f&&"object"==typeof f?Array.isArray(f)?f.map(Sa):Object.keys(f).reduce((n,t)=>(n[t]=Sa(f[t]),n),{}):f}let so=(()=>{class f{static get version(){return"1.4.8"}static isSupported(){return function Zi(){const f=oc();if(!f)return!1;const n=os();return!(!f||"function"!=typeof f.isTypeSupported||!f.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')||n&&(!n.prototype||"function"!=typeof n.prototype.appendBuffer||"function"!=typeof n.prototype.remove))}()}static get Events(){return at}static get ErrorTypes(){return pr}static get ErrorDetails(){return mn}static get DefaultConfig(){return f.defaultConfig?f.defaultConfig:na}static set DefaultConfig(t){f.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new sh,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,function Df(f,n){if(self.console&&!0===f||"object"==typeof f){!function Mf(f,...n){n.forEach(function(t){ms[t]=f[t]?f[t].bind(f):function Sf(f){const n=self.console[f];return n?n.bind(self.console,`[${f}] >`):ps}(t)})}(f,"debug","log","info","warn","error");try{ms.log(`Debug logs enabled for "${n}" in hls.js version 1.4.8`)}catch(t){ms=pl}}else ms=pl}(t.debug||!1,"Hls instance");const r=this.config=function Mo(f,n){if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==n.liveMaxLatencyDurationCount&&(void 0===n.liveSyncDurationCount||n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(void 0===n.liveSyncDuration||n.liveMaxLatencyDuration<=n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=Sa(f),c=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach(g=>{const v=`${"level"===g?"playlist":g}LoadPolicy`,x=void 0===n[v],Y=[];c.forEach(ie=>{const Me=`${g}Loading${ie}`,Re=n[Me];if(void 0!==Re&&x){Y.push(Me);const $e=t[v].default;switch(n[v]={default:$e},ie){case"TimeOut":$e.maxLoadTimeMs=Re,$e.maxTimeToFirstByteMs=Re;break;case"MaxRetry":$e.errorRetry.maxNumRetry=Re,$e.timeoutRetry.maxNumRetry=Re;break;case"RetryDelay":$e.errorRetry.retryDelayMs=Re,$e.timeoutRetry.retryDelayMs=Re;break;case"MaxRetryTimeout":$e.errorRetry.maxRetryDelayMs=Re,$e.timeoutRetry.maxRetryDelayMs=Re}}}),Y.length&&Qt.warn(`hls.js config: "${Y.join('", "')}" setting(s) are deprecated, use "${v}": ${JSON.stringify(n[v])}`)}),Li(Li({},t),n)}(f.DefaultConfig,t);this.userConfig=t,this._autoLevelCapping=-1,r.progressive&&function qd(f){const n=f.loader;n!==fp&&n!==dp?(Qt.log("[config]: Custom loader detected, cannot enable progressive streaming"),f.progressive=!1):function km(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(f){}return!1}()&&(f.loader=fp,f.progressive=!0,f.enableSoftwareAES=!0,Qt.log("[config]: Progressive streaming enabled, using FetchLoader"))}(r);const{abrController:c,bufferController:g,capLevelController:v,errorController:x,fpsController:Y}=r,ie=new x(this),Me=this.abrController=new c(this),Re=this.bufferController=new g(this),$e=this.capLevelController=new v(this),qe=new Y(this),ot=new lc(this),gt=new Hf(this),Tt=r.contentSteeringController,$t=Tt?new Tt(this):null,rn=this.levelController=new qf(this,$t),nn=new dm(this),Sn=new Ee(this.config),gn=this.streamController=new ea(this,nn,Sn);$e.setStreamController(gn),qe.setStreamController(gn);const Bn=[ot,rn,gn];$t&&Bn.splice(1,0,$t),this.networkControllers=Bn;const On=[Me,Re,$e,qe,gt,nn];this.audioTrackController=this.createController(r.audioTrackController,Bn);const Zn=r.audioStreamController;Zn&&Bn.push(new Zn(this,nn,Sn)),this.subtitleTrackController=this.createController(r.subtitleTrackController,Bn);const Jn=r.subtitleStreamController;Jn&&Bn.push(new Jn(this,nn,Sn)),this.createController(r.timelineController,On),Sn.emeController=this.emeController=this.createController(r.emeController,On),this.cmcdController=this.createController(r.cmcdController,On),this.latencyController=this.createController(bg,On),this.coreComponents=On,Bn.push(ie);const Dn=ie.onErrorOut;"function"==typeof Dn&&this.on(at.ERROR,Dn,ie)}createController(t,r){if(t){const c=new t(this);return r&&r.push(c),c}return null}on(t,r,c=this){this._emitter.on(t,r,c)}once(t,r,c=this){this._emitter.once(t,r,c)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,r,c=this,g){this._emitter.off(t,r,c,g)}listeners(t){return this._emitter.listeners(t)}emit(t,r,c){return this._emitter.emit(t,r,c)}trigger(t,r){if(this.config.debug)return this.emit(t,t,r);try{return this.emit(t,t,r)}catch(c){Qt.error("An internal error happened while handling event "+t+'. Error message: "'+c.message+'". Here is a stacktrace:',c),this.trigger(at.ERROR,{type:pr.OTHER_ERROR,details:mn.INTERNAL_EXCEPTION,fatal:!1,event:t,error:c})}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){Qt.log("destroy"),this.trigger(at.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(r=>r.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(r=>r.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){Qt.log("attachMedia"),this._media=t,this.trigger(at.MEDIA_ATTACHING,{media:t})}detachMedia(){Qt.log("detachMedia"),this.trigger(at.MEDIA_DETACHING,void 0),this._media=null}loadSource(t){this.stopLoad();const r=this.media,c=this.url,g=this.url=tu.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});Qt.log(`loadSource:${g}`),r&&c&&(c!==g||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(r)),this.trigger(at.MANIFEST_LOADING,{url:t})}startLoad(t=-1){Qt.log(`startLoad(${t})`),this.networkControllers.forEach(r=>{r.startLoad(t)})}stopLoad(){Qt.log("stopLoad"),this.networkControllers.forEach(t=>{t.stopLoad()})}swapAudioCodec(){Qt.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){Qt.log("recoverMediaError");const t=this._media;this.detachMedia(),t&&this.attachMedia(t)}removeLevel(t,r=0){this.levelController.removeLevel(t,r)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){Qt.log(`set currentLevel:${t}`),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){Qt.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){Qt.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){Qt.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){return this.levelController.startLevel}set startLevel(t){Qt.log(`set startLevel:${t}`),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const r=!!t;r!==this.config.capLevelToPlayerSize&&(r?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=r)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(Qt.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){dc.indexOf(t)>-1&&(this._maxHdcpLevel=t)}get autoLevelEnabled(){return-1===this.levelController.manualLevel}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:r}}=this;if(!t)return 0;const c=t.length;for(let g=0;g<c;g++)if(t[g].maxBitrate>=r)return g;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:r,maxHdcpLevel:c}=this;let g;if(g=-1===r&&t&&t.length?t.length-1:r,c)for(let v=g;v--;){const x=t[v].attrs["HDCP-LEVEL"];if(x&&x<=c)return v}return g}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const r=this.audioTrackController;r&&(r.audioTrack=t)}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const r=this.subtitleTrackController;r&&(r.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return!!t&&t.subtitleDisplay}set subtitleDisplay(t){const r=this.subtitleTrackController;r&&(r.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}return f.defaultConfig=void 0,f})();const Ph=["controlsContainer"],xc=["settingsContainer"],Oc=["videoPrincipalContainer"],wc=["videoTarget"];function Rc(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).goToPreviousEpisode()}),e._UZ(1,"img",37),e.ALo(2,"async"),e.ALo(3,"formatDataPipe"),e.qZA()}2&f&&(e.xp6(1),e.Q6J("src",e.lcZ(2,1,e.xi3(3,3,"previous-episode.png","GetImageURLByKey")),e.LSH))}function Nc(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).goToNextEpisode()}),e._UZ(1,"img",37),e.ALo(2,"async"),e.ALo(3,"formatDataPipe"),e.qZA()}2&f&&(e.xp6(1),e.Q6J("src",e.lcZ(2,1,e.xi3(3,3,"next-episode.png","GetImageURLByKey")),e.LSH))}function Lc(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",55,56),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).playOrPauseVideo()}),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const c=e.MAs(1);return e.oxw(2).focusButton(c)}),e.qZA(),e._UZ(3,"img",39),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA()}2&f&&(e.xp6(3),e.Q6J("src",e.lcZ(4,1,e.xi3(5,3,"play-video.png","GetImageURLByKey")),e.LSH))}function Fc(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",57,58),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).playOrPauseVideo()}),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const c=e.MAs(1);return e.oxw(2).focusButton(c)}),e.qZA(),e._UZ(3,"img",39),e.ALo(4,"async"),e.ALo(5,"formatDataPipe"),e.qZA()}2&f&&(e.xp6(3),e.Q6J("src",e.lcZ(4,1,e.xi3(5,3,"pause-video.png","GetImageURLByKey")),e.LSH))}const kc=function(f){return{"show-controls":f}};function Bc(f,n){if(1&f&&(e.TgZ(0,"div",59),e._uU(1," Cargando video... "),e.qZA()),2&f){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,kc,t.showControls))}}const Ah=function(f){return{selected:f}};function hp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(3).onClickPrincipalSettingsOption(g)}),e._uU(1),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(3);e.MGl("id","stream_option_",t.index,""),e.Q6J("ngClass",e.VKq(3,Ah,r.currentSelectedPrincipalSettingOption&&t.index==r.currentSelectedPrincipalSettingOption.index)),e.xp6(1),e.hij(" ",t.name," ")}}function gp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(4).onClickStreamOption(g)}),e._uU(1),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(4);e.hYB("id","stream_option_",r.currentSelectedPrincipalSettingOption.id,"_suboption_",t.index,""),e.Q6J("ngClass",e.VKq(4,Ah,r.currentSelectedPrincipalSettingOption.selectedOption&&r.currentSelectedPrincipalSettingOption.selectedOption.index==t.index)),e.xp6(1),e.hij(" ",t.name," ")}}function pp(f,n){if(1&f&&(e.TgZ(0,"section",71),e.YNc(1,gp,2,6,"ng-template",68),e.qZA()),2&f){const t=e.oxw(3);e.MGl("id","streams_suboptions_section_",t.currentSelectedPrincipalSettingOption.index,""),e.xp6(1),e.Q6J("ngForOf",t.currentSelectedPrincipalSettingOption.listOptions)}}function mp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"section",60,61),e.TgZ(2,"img",9),e.NdJ("error",function(){e.CHM(t);const c=e.MAs(1);return e.oxw(2).initializeSettingsContainer(c)}),e.qZA(),e.TgZ(3,"div",62),e.TgZ(4,"section",63),e.TgZ(5,"div",64),e.TgZ(6,"div",65),e.TgZ(7,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).hideSettings()}),e._UZ(8,"img",12),e.ALo(9,"async"),e.ALo(10,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"section",67),e.YNc(12,hp,2,5,"ng-template",68),e.qZA(),e.YNc(13,pp,2,2,"section",69),e.qZA(),e.qZA()}if(2&f){const t=e.oxw(2);e.xp6(8),e.Q6J("src",e.lcZ(9,3,e.xi3(10,5,"back-button-short.png","GetImageURLByKey")),e.LSH),e.xp6(4),e.Q6J("ngForOf",t.listPrincipalSettingsOptions),e.xp6(1),e.Q6J("ngIf",t.currentSelectedPrincipalSettingOption)}}function _p(f,n){if(1&f&&e._UZ(0,"div",72),2&f){const t=n.$implicit,r=e.oxw(3);e.Udp("display",r.checkIfDisplaySubtitles(t)?"block":"none"),e.Q6J("innerHtml",t.text,e.oJD)}}function vp(f,n){if(1&f&&e.YNc(0,_p,1,3,"ng-template",68),2&f){const t=e.oxw(2);e.Q6J("ngForOf",t.currentSubtitleData)}}const yp=function(f){return{small:f}};function Ep(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"video",73,74),e.NdJ("error",function(){return e.CHM(t),e.oxw(2).onErrorVideo()})("loadedmetadata",function(){return e.CHM(t),e.oxw(2).onLoadedMetadata()})("loadeddata",function(){return e.CHM(t),e.oxw(2).onLoadedData()})("ended",function(){return e.CHM(t),e.oxw(2).OnEndedVideo()}),e.qZA()}if(2&f){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,yp,t.isSmallDevice()))}}const Hm=function(f){return{show:f}};function Tp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("click",function(){e.CHM(t);const c=e.MAs(1),g=e.oxw();return!g.isMobileDevice()&&g.onClickVideoContainer(c)})("touchstart",function(){e.CHM(t);const c=e.MAs(1),g=e.oxw();return g.isMobileDevice()&&g.onTouchVideoContainer(c)})("mousemove",function(){e.CHM(t);const c=e.MAs(1);return e.oxw().onMouseMoveVideoContainer(c)}),e.TgZ(2,"div",6),e.TgZ(3,"section",7,8),e.TgZ(5,"img",9),e.NdJ("error",function(){e.CHM(t);const c=e.MAs(4);return e.oxw().initializeControlsContainer(c)}),e.qZA(),e.TgZ(6,"section",10),e.TgZ(7,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeVideo()}),e._UZ(8,"img",12),e.ALo(9,"async"),e.ALo(10,"formatDataPipe"),e.qZA(),e.TgZ(11,"div",13),e._uU(12),e.qZA(),e.qZA(),e.TgZ(13,"div",14),e.TgZ(14,"div",15),e.TgZ(15,"div",16),e.TgZ(16,"div",17,18),e._uU(18),e.qZA(),e.TgZ(19,"div",19),e.TgZ(20,"div",20),e.NdJ("contextmenu",function(){e.CHM(t);const c=e.MAs(25),g=e.oxw();return!g.isMobileDevice()&&g.onClickSlider(c)})("click",function(){e.CHM(t);const c=e.MAs(25);return e.oxw().onClickSlider(c)})("touchend",function(){e.CHM(t);const c=e.MAs(25),g=e.oxw();return g.isMobileDevice()&&g.onClickSlider(c)})("touchstart",function(c){e.CHM(t);const g=e.MAs(25),v=e.MAs(17),x=e.oxw();return x.isMobileDevice()&&x.onTouchStartSlider(c,g,v)})("touchmove",function(c){e.CHM(t);const g=e.MAs(25),v=e.MAs(17),x=e.oxw();return x.isMobileDevice()&&x.onTouchMoveSlider(c,g,v)})("mousedown",function(c){e.CHM(t);const g=e.MAs(25);return e.oxw().onMouseDownSlider(c,g)})("mousemove",function(c){e.CHM(t);const g=e.MAs(25);return e.oxw().onMouseMoveSlider(c,g)}),e._UZ(21,"div",21,22),e.TgZ(23,"div",23),e.TgZ(24,"div",24,25),e.TgZ(26,"div",26,25),e._UZ(28,"div",27,28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",17,29),e._uU(32),e.qZA(),e.qZA(),e.TgZ(33,"section",30),e.TgZ(34,"div",31),e.YNc(35,Rc,4,6,"button",32),e.qZA(),e.TgZ(36,"div",33),e.TgZ(37,"div",34),e.YNc(38,Nc,4,6,"button",35),e.TgZ(39,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().onChangeObjectContain()}),e._UZ(40,"img",37),e.ALo(41,"async"),e.ALo(42,"formatDataPipe"),e.qZA(),e.TgZ(43,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleFullScreenVideo()}),e._UZ(44,"img",39),e.ALo(45,"async"),e.ALo(46,"formatDataPipe"),e.qZA(),e.TgZ(47,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().showSettings()}),e._UZ(48,"img",41),e.ALo(49,"async"),e.ALo(50,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",42),e.TgZ(52,"div",43),e.TgZ(53,"section",44),e.TgZ(54,"button",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().rewindVideo()}),e._UZ(55,"img",39),e.ALo(56,"async"),e.ALo(57,"formatDataPipe"),e.qZA(),e.YNc(58,Lc,6,6,"button",46),e.YNc(59,Fc,6,6,"button",47),e.TgZ(60,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().forwardVideo()}),e._UZ(61,"img",39),e.ALo(62,"async"),e.ALo(63,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(64,Bc,2,3,"div",49),e.YNc(65,mp,14,8,"section",50),e.YNc(66,vp,1,1,"ng-template",51),e.YNc(67,Ep,2,3,"video",52),e.qZA(),e.qZA()}if(2&f){const t=e.MAs(17),r=e.MAs(22),c=e.MAs(31),g=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(58,Hm,g.showControls)),e.xp6(5),e.Q6J("src",e.lcZ(9,28,e.xi3(10,30,"back-button-short.png","GetImageURLByKey")),e.LSH),e.xp6(4),e.hij(" ",g.builderVideo.TranscodePrepareVideo.Title," "),e.xp6(4),e.Udp("visibility",g.showControls?"":"hidden"),e.xp6(2),e.hij(" ",g.getVideoTime()," "),e.xp6(1),e.Udp("width","calc(100% - "+(t.offsetWidth+c.offsetWidth)+"px)"),e.xp6(5),e.Udp("width",r.offsetWidth+"px"),e.xp6(4),e.Udp("width",g.getSliderPogressWidth()),e.xp6(2),e.Udp("visibility",g.showControls?"":"hidden"),e.xp6(2),e.hij(" ",g.getDurationTime()," "),e.xp6(3),e.Q6J("ngIf",g.isEnablePreviousEpisodeButton()),e.xp6(3),e.Q6J("ngIf",g.isEnableNextEpisodeButton()),e.xp6(2),e.Q6J("src",e.lcZ(41,33,e.xi3(42,35,"aspect-ratio.png","GetImageURLByKey")),e.LSH),e.xp6(4),e.Q6J("src",e.lcZ(45,38,e.xi3(46,40,"full-screen-video.png","GetImageURLByKey")),e.LSH),e.xp6(4),e.Q6J("src",e.lcZ(49,43,e.xi3(50,45,"settings.png","GetImageURLByKey")),e.LSH),e.xp6(7),e.Q6J("src",e.lcZ(56,48,e.xi3(57,50,"rewind.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngIf",!g.isPlayingVideo()),e.xp6(1),e.Q6J("ngIf",g.isPlayingVideo()),e.xp6(2),e.Q6J("src",e.lcZ(62,53,e.xi3(63,55,"forward.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngIf",!g.loadedData),e.xp6(1),e.Q6J("ngIf",g.showingSettings),e.xp6(1),e.Q6J("ngIf",g.currentSubtitleData),e.xp6(1),e.Q6J("ngIf",g.showVideoTarget)}}function Zm(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-confirm-message-modal",75),e.NdJ("close",function(){return e.CHM(t),e.oxw().onDeclineReplyVideo()})("confirm",function(){return e.CHM(t),e.oxw().onConfirmReplyVideo()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("message",t.getConfirmMessage())}}let Ih=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(t,r,c,g),this.restProvider=t,this.events=r,this.domSanitizer=c,this.sharedData=g,this.ref=v,this.http=x,this.fullscreen=new e.vpe,this.outputCloseVideo=new e.vpe,this._window=window,this.showVideo=!0,this.lastCurrentTime=0,this.showControls=!1,this.currentSubtitleData=void 0,this.haveError=!1,this.currentEpisode={},this.lastClickSeekButton=new Date,this.countSeekSecondsToAdvance=0,this.isUpdatingVideoSource=!1,this.showingSettings=!1,this.listPrincipalSettingsOptions=[{index:0,name:"AUDIO",listOptions:[],selectedOption:null},{index:1,name:"SUBT\xcdTULOS",listOptions:[],selectedOption:null}],this.lastRealVideoTime=0,this.initializeVideo=!1,this.showVideoTarget=!1,this.loadedData=!1,this.showReplyVideoMessageBox=!1}onTouchVideoContainer(t){this.showingSettings?this.initializeSettingsContainer(this.settingsContainer.nativeElement):(this.initializeControlsContainer(this.controlsContainer.nativeElement),this.isMobileDevice()&&this.showControlsTemporarily(t))}onClickVideoContainer(t){this.showingSettings?this.initializeSettingsContainer(this.settingsContainer.nativeElement):(this.initializeControlsContainer(this.controlsContainer.nativeElement),t.clicked=!0,setTimeout(()=>{t.clicked=!1},2e3),this.isMobileDevice()||this.showControlsTemporarily(t))}onTouchStartSlider(t,r,c){this.sliderContainer=r,r.startMove=!0,this.lastTmpVideoTime=(t.changedTouches[0].clientX-c.offsetWidth-8-4)/r.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100}onTouchMoveSlider(t,r,c){r.startMove&&(this.lastTmpVideoTime=(t.changedTouches[0].clientX-c.offsetWidth-8-4)/r.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100)}goToNextEpisode(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,c=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber+1,g=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(v=>v.EpisodeNumber==c);if(-1!=g)this.getVideoByEpisode(this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes[g]);else{let v=t+1,x=this.builderVideo.ItemDetail.ListSeasons.findIndex(Y=>Y.SeasonNumber==v);if(-1!=x){let Y=this.builderVideo.ItemDetail.ListSeasons[x];this.builderVideo.ItemDetail.CurrentSeason=Y,Y&&Y.ListEpisodes&&Y.ListEpisodes.length&&this.getVideoByEpisode(Y.ListEpisodes[0])}}}}initializeVideoData(){let t=this;this.sharedData.listProcessGUIDs.push(this.builderVideo.TranscodePrepareVideo.ProcessGUID),this.builderVideo.LoadStatus=ae.O5.Empty,this.restProvider.executeHttpMethodByUrl(ae.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/GetVideoData",this.builderVideo.TranscodePrepareVideo).then(c=>{this.builderVideo.LoadStatus=ae.O5.Generated;const g=Sr().decode(c);let v=JSON.parse(g);this.builderVideo.TranscodeRunVideo=v,this.builderVideo.TranscodePrepareVideo=v.TranscodePrepareVideo,this.initializeStreams(),this.customMouseOutEvent=function(ie){t.sliderContainer&&t.sliderContainer.startMove&&t.onClickSlider(t.sliderContainer)},window.addEventListener("click",this.customMouseOutEvent),setTimeout(()=>{this.executeHideControls()},1e3),window.addEventListener("beforeunload",function(ie){t.deleteAllProcessesAndDirectories()}),this.onInitializeVideo()},c=>{this.showReplyVideoMessageBox=!0,console.error(c)}),this.sharedData.userData&&(window.setInterval(function(){t.ref.detectChanges()},0),this.currentInterval=window.setInterval(function(){t.UpdateVideoProfile()},1e4))}getVideoByEpisode(t){this.deleteAllProcessesAndDirectories();var r=this.GetTranscodeVideoFromEpisode(t);this.builderVideo.TranscodePrepareVideo=r,this.builderVideo.ItemDetail.ListSeasons&&(this.builderVideo.ItemDetail.CurrentSeason=this.builderVideo.ItemDetail.ListSeasons.find(g=>g.SeasonNumber==t.SeasonNumber),this.builderVideo.ItemDetail.CurrentEpisode=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.find(g=>g.EpisodeNumber==t.EpisodeNumber)),this.lastRealVideoTime=0,this.resetStream(),this.sharedData.listProcessGUIDs.push(this.builderVideo.TranscodePrepareVideo.ProcessGUID),this.builderVideo.LoadStatus=ae.O5.Empty,this.restProvider.executeHttpMethodByUrl(ae.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/GetVideoData",this.builderVideo.TranscodePrepareVideo).then(g=>{this.builderVideo.LoadStatus=ae.O5.Generated;const v=Sr().decode(g);let x=JSON.parse(v);this.builderVideo.TranscodeRunVideo=x,this.builderVideo.TranscodePrepareVideo=x.TranscodePrepareVideo,this.initializeStreams(),this.getVideoSource()},g=>{this.showReplyVideoMessageBox=!0,console.error(g)})}goToPreviousEpisode(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,c=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber-1,g=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(v=>v.EpisodeNumber==c);if(-1!=g)this.getVideoByEpisode(this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes[g]);else{let v=t+1,x=this.builderVideo.ItemDetail.ListSeasons.findIndex(Y=>Y.SeasonNumber==v);if(-1!=x){let Y=this.builderVideo.ItemDetail.ListSeasons[x];this.builderVideo.ItemDetail.CurrentSeason=Y,Y&&Y.ListEpisodes&&Y.ListEpisodes.length&&this.getVideoByEpisode(Y.ListEpisodes[Y.ListEpisodes.length-1])}}}}isEnablePreviousEpisodeButton(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,c=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber-1;if(-1!=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(v=>v.EpisodeNumber==c))return!0;{let v=t-1,x=this.builderVideo.ItemDetail.ListSeasons.findIndex(Y=>Y.SeasonNumber==v);if(-1!=x){let Y=this.builderVideo.ItemDetail.ListSeasons[x];return!!(Y&&Y.ListEpisodes&&Y.ListEpisodes.length)}return!1}}return!1}isEnableNextEpisodeButton(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.ItemDetail.ListSeasons&&this.builderVideo.ItemDetail.ListSeasons.length>0&&this.builderVideo.ItemDetail.CurrentSeason){let t=this.builderVideo.ItemDetail.CurrentSeason.SeasonNumber,c=this.builderVideo.ItemDetail.CurrentEpisode.EpisodeNumber+1;if(-1!=this.builderVideo.ItemDetail.CurrentSeason.ListEpisodes.findIndex(v=>v.EpisodeNumber==c))return!0;{let v=t+1,x=this.builderVideo.ItemDetail.ListSeasons.findIndex(Y=>Y.SeasonNumber==v);if(-1!=x){let Y=this.builderVideo.ItemDetail.ListSeasons[x];return!!(Y&&Y.ListEpisodes&&Y.ListEpisodes.length)}return!1}}return!1}showSettings(){this.showControls=!1,this.ref.detectChanges(),this.showingSettings=!0,this.ref.detectChanges()}initializeControlsContainer(t){let r=this;this.customKeyboardControlsEvent&&t.removeEventListener("keydown",this.customKeyboardControlsEvent),this.showingSettings=!1,this.focusContainer(t,this.ref),this.customKeyboardControlsEvent=function(g){461==g.keyCode||27==g.keyCode?r.closeVideo():r.loadedData&&(r.showControlsTemporarily(t),r.setKeyActionsInBrowser(g,t,!0))},t.addEventListener("keydown",this.customKeyboardControlsEvent)}initializeSettingsContainer(t){let r=this;this.customKeyboardSettingsEvent&&t.removeEventListener("keydown",this.customKeyboardSettingsEvent),this.focusContainer(t,this.ref),this.customKeyboardSettingsEvent=function(g){461==g.keyCode||27==g.keyCode?r.hideSettings():r.setKeyActionsInBrowser(g,t)},t.addEventListener("keydown",this.customKeyboardSettingsEvent)}hideSettings(){this.showingSettings=!1,this.ref.detectChanges(),this.initializeControlsContainer(this.controlsContainer.nativeElement)}onClickPrincipalSettingsOption(t){this.currentSelectedPrincipalSettingOption=t}onClickStreamOption(t){this.currentSelectedPrincipalSettingOption.selectedOption=t,this.showingSettings=!1,this.ref.detectChanges(),this.initializeControlsContainer(this.controlsContainer.nativeElement),0==this.currentSelectedPrincipalSettingOption.index&&(this.hls.audioTrack=t.index),1==this.currentSelectedPrincipalSettingOption.index&&(1e6==t.index?this.hls.subtitleDisplay=!1:(this.hls.subtitleTrack=t.index,this.hls.subtitleDisplay=!0))}getSubtitle(t){let r=this;this.http.get(t,{responseType:"text"}).subscribe(c=>{c&&(0,da.Q)(c)&&(0,da.Q)(c).entries?(r.currentSubtitleData=(0,da.Q)(c).entries,0==r.currentSubtitleData.length?setTimeout(()=>{r.getSubtitle(t)},1e3):r.ref.detectChanges()):(console.error("No hay data en los subtitulos aun"),setTimeout(()=>{r.getSubtitle(t)},1e3))},c=>{console.error(c),setTimeout(()=>{r.getSubtitle(t)},1e3)})}showSubtitle(){}closeVideo(){this.currentInterval&&window.clearInterval(this.currentInterval),this.intervalVideoTime&&window.clearInterval(this.intervalVideoTime),this.deleteAllProcessesAndDirectories(),this.outputCloseVideo.emit(!0)}focusButton(t){t.focus(),this.sharedData.currentSelectedElement=t}setKeyActionsInBrowser(t,r,c){var g=t.keyCode;let v=Array.from(r.querySelectorAll("section")),x=v.findIndex($e=>$e.id==this.sharedData.currentActiveSection.id),ie=Array.from(v[x].querySelectorAll("button")),Me=ie.length,Re=ie.findIndex($e=>$e.id==this.sharedData.currentSelectedElement.id);if(39==g){let $e=Re+1;if(console.log(":::::::::::"),console.log("currentSectionIndex::"+x),console.log("currentElementIndex::"+Re),console.log("newElementIndex::"+$e),$e<Me){let qe=ie[$e];this.sharedData.currentSelectedElement=qe,qe.focus()}else"forwardButton"==this.sharedData.currentSelectedElement.id&&this.forwardVideo()}if(37==g){let $e=Re-1;if(console.log(":::::::::::"),console.log("currentSectionIndex::"+x),console.log("currentElementIndex::"+Re),console.log("newElementIndex::"+$e),$e>=0){let qe=ie[$e];this.sharedData.currentSelectedElement=qe,qe.focus()}else"rewindButton"==this.sharedData.currentSelectedElement.id&&this.rewindVideo()}if(40==g){let $e=x+1;if($e<v.length){let qe=v[$e];this.sharedData.currentActiveSection=qe;let gt=Array.from(qe.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=gt,gt.focus()}}if(38==g){let $e=x-1;if($e>=0){let qe=v[$e];this.sharedData.currentActiveSection=qe;let gt=Array.from(qe.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=gt,gt.focus()}}}ngAfterViewInit(){}getConfirmMessage(){var t="Vacio";switch(this.builderVideo.LoadStatus){case ae.O5.Empty:t="Vac\xedo";break;case ae.O5.Generated:t="Generado";break;case ae.O5.Initialized:t="Inicializado";break;case ae.O5.LoadedMetada:t="Cargado Metadata";break;case ae.O5.LoadedData:t="Cargado Data"}return"Hubo un error al intentar reproducir el video, se quedo con el estado de "+t+", desea intentarlo de nuevo?"}updateAudioAndVideoList(){if(this.listPrincipalSettingsOptions[0].listOptions=[],this.listPrincipalSettingsOptions[0].selectedOption=void 0,this.listPrincipalSettingsOptions[1].listOptions=[],this.listPrincipalSettingsOptions[1].selectedOption=void 0,this.builderVideo.TranscodePrepareVideo.ListAudioStreams&&this.builderVideo.TranscodePrepareVideo.ListAudioStreams.length>0&&(this.builderVideo.TranscodePrepareVideo.ListAudioStreams.forEach(t=>{let r="";"spa"==t.language&&(r="Espa\xf1ol"),"eng"==t.language&&(r="Ingles"),t.title&&(r=r+" ("+t.title+")"),t.name=r}),this.listPrincipalSettingsOptions[0].listOptions=this.builderVideo.TranscodePrepareVideo.ListAudioStreams,this.listPrincipalSettingsOptions[0].selectedOption=this.builderVideo.TranscodePrepareVideo.ListAudioStreams.find(t=>1==t.isDefault)),this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams&&this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.length>0){this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.forEach(c=>{let g="";"spa"==c.language&&(g="Espa\xf1ol"),"eng"==c.language&&(g="Ingles"),c.title&&(g=g+" ("+c.title+")"),c.name=g});let t=[];t.push({index:1e6,name:"Ninguno"}),t=t.concat(this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams),this.listPrincipalSettingsOptions[1].listOptions=t;let r=this.builderVideo.TranscodePrepareVideo.ListSubtitlesStreams.find(c=>1==c.isDefault);null==r&&(r=t.find(c=>1e6==c.index)),this.listPrincipalSettingsOptions[1].selectedOption=r}this.currentSelectedPrincipalSettingOption=this.listPrincipalSettingsOptions[0]}initializeStreams(){this.updateAudioAndVideoList(),this.lastRealVideoTime=null!=this.builderVideo.TranscodePrepareVideo.CurrentTime?this.builderVideo.TranscodePrepareVideo.CurrentTime:0}UpdateVideoProfile(){if(null!=this.builderVideo.TranscodePrepareVideo.TotalSeconds){var t=0;this.getCurrentVideoTime()>0&&this.getCurrentVideoTime()<=this.builderVideo.TranscodePrepareVideo.TotalSeconds&&((t=this.getCurrentVideoTime())-20<0?t=0:t-=20),this.restProvider.executeSinovadApiService(ae.yw.PUT,"/videos/UpdateVideoProfile",{VideoId:this.builderVideo.TranscodePrepareVideo.VideoId,ProfileId:this.sharedData.currentProfile.Id,DurationTime:this.builderVideo.TranscodePrepareVideo.TotalSeconds,CurrentTime:t}).then(c=>{},c=>{console.error(c)})}}ngOnInit(){this.initializeVideoData()}executeHideControls(){this.sliderContainer&&this.sliderContainer.startMove?setTimeout(()=>{this.executeHideControls()},2e3):this.showControls=!1}getDurationTime(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.TotalSeconds?this.getFormatTime(this.builderVideo.TranscodePrepareVideo.TotalSeconds):"00:00:00"}getFormatTime(t){var r=parseInt(t,10),c=Math.floor(r/3600),g=Math.floor((r-3600*c)/60),v=r-3600*c-60*g;return c<10&&(c="0"+c),g<10&&(g="0"+g),v<10&&(v="0"+v),c+":"+g+":"+v}getVideoTime(){if(this.lastTmpVideoTime)return this.getFormatTime(this.lastTmpVideoTime);{let t=this.getCurrentVideoTime();return null!=t&&t>0?this.getFormatTime(t):"00:00:00"}}onMouseDownSlider(t,r){this.sliderContainer=r,r.startMove=!0,this.calculateNewTimeToGo(t,r)}onMouseMoveSlider(t,r){r.startMove&&this.calculateNewTimeToGo(t,r)}calculateNewTimeToGo(t,r){this.lastTmpVideoTime=t.offsetX/r.offsetWidth*100*this.builderVideo.TranscodePrepareVideo.TotalSeconds/100}resetStream(){this.showVideoTarget=!1,this.loadedData=!1,null!=this.dashMediaPlayer&&(this.dashMediaPlayer.resetSettings(),this.dashMediaPlayer.reset(),this.dashMediaPlayer.destroy(),this.dashMediaPlayer=void 0),this.hls&&(this.hls.destroy(),this.hls=void 0)}onClickSlider(t){if(this.lastTmpVideoTime){if(t.startMove=!1,this.lastTmpVideoTime>this.getCurrentVideoTime()){let r=this.lastTmpVideoTime-this.getCurrentVideoTime();this.executeForwardVideo(r)}else if(this.lastTmpVideoTime<this.getCurrentVideoTime()){let r=this.getCurrentVideoTime()-this.lastTmpVideoTime;this.executeRewindVideo(r)}this.lastTmpVideoTime=void 0}}updateVideoData(t){this.deleteAllProcessesAndDirectories();let r=(0,Wr.Z)();this.sharedData.listProcessGUIDs.push(r),this.builderVideo.TranscodePrepareVideo.TimeSpan=t.toString(),this.builderVideo.TranscodePrepareVideo.ProcessGUID=r,this.builderVideo.LoadStatus=ae.O5.Empty,this.restProvider.executeHttpMethodByUrl(ae.yw.POST,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos/UpdateVideoData",this.builderVideo.TranscodePrepareVideo).then(g=>{this.builderVideo.LoadStatus=ae.O5.Generated;const v=Sr().decode(g);let x=JSON.parse(v);this.builderVideo.TranscodeRunVideo=x,this.updateAudioAndVideoList(),this.getVideoSource()},g=>{this.showReplyVideoMessageBox=!0,console.error(g)})}deleteAllProcessesAndDirectories(){this.sharedData.listProcessGUIDs&&this.sharedData.listProcessGUIDs.length>0&&this.deleteProcessesAndDirectories()}deleteProcessesAndDirectories(){var t=this.sharedData.listProcessGUIDs.join(",");this.restProvider.executeHttpMethodByUrl(ae.yw.DELETE,this.builderVideo.TranscodePrepareVideo.MediaServerUrl+"/transcodeVideos?guids="+t).then(c=>{const g=Sr().decode(c);let v=JSON.parse(g);if(v&&v.length>0&&this.sharedData.listProcessGUIDs.length>0)for(var x=0;x<v.length;x++){let Y=v[x],ie=this.sharedData.listProcessGUIDs.findIndex(Me=>Me==Y);-1!=ie&&this.sharedData.listProcessGUIDs.splice(ie,1)}},c=>{console.error(c)})}getSliderPogressWidth(){if(this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.TotalSeconds){let t=this.builderVideo.TranscodePrepareVideo.TotalSeconds,c=(this.lastTmpVideoTime?this.lastTmpVideoTime:this.getCurrentVideoTime())/t*100;return c>100&&(c=100),c+"%"}return 0}OnEndedVideo(){this.isEnableNextEpisodeButton()&&this.goToNextEpisode()}isPlayingVideo(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==ae.Ln.MPEGDASH?!(!this.dashMediaPlayer||this.dashMediaPlayer.isPaused()):!(!this.videoTarget||0!=this.videoTarget.nativeElement.paused)}playOrPauseVideo(){console.log("subtitle tracks"),console.log(this.hls.subtitleTracks),console.log("audio tracks"),console.log(this.hls.audioTracks),this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==ae.Ln.MPEGDASH?this.dashMediaPlayer&&(this.dashMediaPlayer.isPaused()?this.dashMediaPlayer.play():this.dashMediaPlayer.pause()):this.videoTarget&&(this.videoTarget.nativeElement.paused?this.videoTarget.nativeElement.play():this.videoTarget.nativeElement.pause())}showVideoInFullScreen(){this.fullscreen.emit(!0)}toggleFullScreenVideo(){document.fullscreenElement||this.showVideoInFullScreen()}displayVideoUsingDash(t){let r=this;this.dashMediaPlayer=is.MediaPlayer().create(),this.dashMediaPlayer.updateSettings({streaming:{gaps:{jumpGaps:!0,jumpLargeGaps:!0,enableSeekFix:!0,enableStallFix:!0},buffer:{bufferPruningInterval:this.builderVideo.TranscodePrepareVideo.TotalSeconds,bufferToKeep:this.builderVideo.TranscodePrepareVideo.TotalSeconds}}}),this.dashMediaPlayer.initialize(this.videoTarget.nativeElement,t),this.dashMediaPlayer.on(is.MediaPlayer.events.ERROR,function(c){console.log(c),console.error("hubo un error")}),this.dashMediaPlayer.on(is.MediaPlayer.events.PLAYBACK_ERROR,function(c){console.log(c),console.error("hubo un error de playback")}),this.dashMediaPlayer.on(is.MediaPlayer.events.PLAYBACK_WAITING,function(c){console.error("PLAYBACK_WAITING"),console.log(c)}),this.dashMediaPlayer.on(is.MediaPlayer.events.BUFFER_EMPTY,function(c){console.error("BUFFER_EMPTY"),console.log(c)}),this.dashMediaPlayer.on(is.MediaPlayer.events.STREAM_INITIALIZED,function(c){console.error("STREAM_INITIALIZED"),r.initializeVideo=!0,console.log(c)}),this.ref.detectChanges(),this.dashMediaPlayer.play(),this.showVideoInFullScreen()}onInitializeVideo(){this.executeInitializeVideo()}getCurrentVideoTime(){return this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==ae.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.time()?this.lastRealVideoTime+this.dashMediaPlayer.time():this.lastRealVideoTime:this.videoTarget&&null!=this.videoTarget.nativeElement.currentTime?this.lastRealVideoTime+this.videoTarget.nativeElement.currentTime:this.lastRealVideoTime}checkIfDisplaySubtitles(t){let c=1e3*(this.getCurrentVideoTime()-1);return t.from<=c&&t.to>=c}onDeclineReplyVideo(){this.showReplyVideoMessageBox=!1,this.closeVideo()}onConfirmReplyVideo(){this.showReplyVideoMessageBox=!1,this.lastRealVideoTime=this.getCurrentVideoTime()-2>=0?this.getCurrentVideoTime()-2:0,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)}onLoadedMetadata(){this.builderVideo.LoadStatus=ae.O5.LoadedMetada,console.log("onLoadedMetadata")}onLoadedData(){console.log("onLoadedData"),this.builderVideo.LoadStatus=ae.O5.LoadedData,this.loadedData=!0,this.showReplyVideoMessageBox=!1,this.videoTarget&&(this.videoTarget.nativeElement.currentTime=0,this.videoTarget.nativeElement.play())}onErrorVideo(){console.log("onErrorVideo")}executeInitializeVideo(){this.getVideoSource()}testAnyVideo(){}getVideoSource(){let t=this;this.http.get(this.builderVideo.TranscodeRunVideo.VideoPath,{headers:void 0,responseType:"blob"}).subscribe(r=>{this.builderVideo.LoadStatus=ae.O5.Initialized,this.showVideoTarget=!0,this.ref.detectChanges(),-1!=this.builderVideo.TranscodeRunVideo.VideoPath.indexOf("mpd")?this.displayVideoUsingDash(this.builderVideo.TranscodeRunVideo.VideoPath):-1!=this.builderVideo.TranscodeRunVideo.VideoPath.indexOf("m3u8")?this.displayVideoUsingHLS(this.builderVideo.TranscodeRunVideo.VideoPath):(this.videoTarget.nativeElement.src=this.builderVideo.TranscodeRunVideo.VideoPath,this.videoTarget.nativeElement.currentTime=this.lastRealVideoTime,this.lastRealVideoTime=0,this.videoTarget.nativeElement.play())},r=>{console.error(r),t.showReplyVideoMessageBox=!0})}displayVideoUsingHLS(t){let r=this;setTimeout(()=>{r.builderVideo.LoadStatus!=ae.O5.LoadedData&&(r.showReplyVideoMessageBox=!0)},1e4,r),this.showVideoInFullScreen(),so.isSupported()?(this.hls=new so,this.hls.attachMedia(this.videoTarget.nativeElement),this.hls.loadSource(t),this.hls.on(so.Events.MEDIA_ATTACHED,function(c){console.log("MEDIA_ATTACHED"),console.log(c)}),this.hls.on(so.Events.AUDIO_TRACK_LOADED,function(c){console.log("AUDIO_LOADED"),console.log(c)}),this.hls.on(so.Events.MANIFEST_LOADED,function(c){console.log("MANIFEST_LOADED"),console.log(c)}),this.hls.on(so.Events.MANIFEST_PARSED,function(c){console.log("MANIFEST_PARSED"),console.log(c)}),this.hls.on(so.Events.ERROR,function(c){r.videoTarget.nativeElement.CurrentTime=r.videoTarget.nativeElement.CurrentTime+1,console.error("Ocurrio un error"),console.log(c)})):(this.loadedData=!0,this.videoTarget&&(this.videoTarget.nativeElement.src=t,this.videoTarget.nativeElement.currentTime=0,this.videoTarget.nativeElement.play()))}onChangeObjectContain(){"contain"==this.videoTarget.nativeElement.style.objectFit||""==this.videoTarget.nativeElement.style.objectFit?this.videoTarget.nativeElement.style.objectFit="cover":"cover"==this.videoTarget.nativeElement.style.objectFit?this.videoTarget.nativeElement.style.objectFit="fill":"fill"==this.videoTarget.nativeElement.style.objectFit&&(this.videoTarget.nativeElement.style.objectFit="contain")}callUpdateVideoData(t){let r=(0,Wr.Z)();this.lastTimeSpanChangeGUID=r,setTimeout(()=>{r==this.lastTimeSpanChangeGUID&&this.updateVideoData(t)},1e3)}rewindVideo(){this.executeRewindVideo(10)}executeRewindVideo(t){this.initializeVideo=!1;let r=0;r=this.getCurrentVideoTime()-t>=0?t:this.getCurrentVideoTime(),this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==ae.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.time()>r?this.dashMediaPlayer.seek(this.dashMediaPlayer.time()-r):(this.lastRealVideoTime=this.getCurrentVideoTime()-r,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)):this.videoTarget&&null!=this.videoTarget.nativeElement.currentTime&&this.videoTarget.nativeElement.currentTime>r?this.videoTarget.nativeElement.currentTime=this.videoTarget.nativeElement.currentTime-r:(this.lastRealVideoTime=this.getCurrentVideoTime()-r,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime))}forwardVideo(){this.executeForwardVideo(10)}executeForwardVideo(t){if(this.initializeVideo=!1,this.getCurrentVideoTime()<this.builderVideo.TranscodePrepareVideo.TotalSeconds){let r=0;r=this.getCurrentVideoTime()+t>this.builderVideo.TranscodePrepareVideo.TotalSeconds?this.builderVideo.TranscodePrepareVideo.TotalSeconds>this.getCurrentVideoTime()?this.builderVideo.TranscodePrepareVideo.TotalSeconds-this.getCurrentVideoTime():0:t,this.builderVideo.TranscodePrepareVideo&&this.builderVideo.TranscodePrepareVideo.VideoTransmissionTypeId==ae.Ln.MPEGDASH?this.dashMediaPlayer&&this.dashMediaPlayer.duration()-this.dashMediaPlayer.time()>=r?this.dashMediaPlayer.seek(this.dashMediaPlayer.time()+r):(this.lastRealVideoTime=this.getCurrentVideoTime()+r,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime)):this.videoTarget&&null!=this.videoTarget.nativeElement.duration&&null!=this.videoTarget.nativeElement.currentTime&&this.videoTarget.nativeElement.duration-this.videoTarget.nativeElement.currentTime>=r?this.videoTarget.nativeElement.currentTime=this.videoTarget.nativeElement.currentTime+r:(this.lastRealVideoTime=this.getCurrentVideoTime()+r,this.resetStream(),this.callUpdateVideoData(this.lastRealVideoTime))}}onMouseMoveVideoContainer(t){!this.showControls&&!t.clicked&&!this.showingSettings&&this.showControlsTemporarily(t)}executeShowControlsTemporarily(t,r){this.showControls=!0,this.ref.detectChanges(),setTimeout(()=>{t.guid==r&&this.executeHideControls()},2e3)}showControlsTemporarily(t){if(!this.showControls){let r=(0,Wr.Z)();t.guid=r,this.isMobileDevice()?setTimeout(()=>{this.executeShowControlsTemporarily(t,r)},250):this.executeShowControlsTemporarily(t,r)}}toogleVideoControls(t){this.showControls?this.showControls=!0:this.showControlsTemporarily(t)}ngOnDestroy(){this.dashMediaPlayer&&(this.dashMediaPlayer.reset(),this.dashMediaPlayer.destroy()),this.hls&&(this.hls.detachMedia(),this.hls.destroy()),window.removeEventListener("click",this.customMouseOutEvent)}onResize(t){}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g),e.Y36(e.sBO),e.Y36(C.eN))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-video"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Ph,5),e.Gf(xc,5),e.Gf(Oc,5),e.Gf(wc,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.controlsContainer=c.first),e.iGM(c=e.CRH())&&(r.settingsContainer=c.first),e.iGM(c=e.CRH())&&(r.videoPrincipalContainer=c.first),e.iGM(c=e.CRH())&&(r.videoTarget=c.first)}},hostBindings:function(t,r){1&t&&e.NdJ("resize",function(g){return r.onResize(g)},!1,e.Jf7)},inputs:{builderVideo:"builderVideo"},outputs:{fullscreen:"fullscreen",outputCloseVideo:"outputCloseVideo"},features:[e.qOj],decls:4,vars:2,consts:[["id","videoPrincipalContainer",1,"sinovad-video-principal-container","sinovad-custom-container",2,"width","100%","height","100%"],["videoPrincipalContainer",""],["class","sinovad-video-container",3,"click","touchstart","mousemove",4,"ngIf"],[3,"message","close","confirm",4,"ngIf"],[1,"sinovad-video-container",3,"click","touchstart","mousemove"],["videoContainer",""],[1,"sinovad-full-screen-video-container"],["tabindex","0",1,"sinovad-controls-container",3,"ngClass"],["controlsContainer",""],["src","",2,"display","none",3,"error"],["id","videoHeaderSection","tabindex","0",1,"sinovad-video-header-section"],["id","backVideoButton",1,"sinovad-video-control-button",3,"click"],[3,"src"],[1,"sinovad-video-header-section-title-container"],[1,"sinovad-full-screen-video-popup-footer"],[2,"width","100%"],[1,"solitv-progress-bar"],[1,"sinovad-current-time"],["controlLeft",""],[1,"solitv-slider-container"],["tabindex","-1",1,"solitv-slider-content",3,"contextmenu","click","touchend","touchstart","touchmove","mousedown","mousemove"],[1,"sinovad-slider-fills"],["silderFills",""],[2,"width","0px"],[1,"sinovad-slider-fills-progress-container"],["sliderContainer",""],[1,"sinovad-slider-fills-progress-content"],[1,"sinovad-slider-fills-progress"],["silderProgress",""],["controlRight",""],["id","section_video_secondary_buttons","tabindex","0",1,"sinovad-full-screen-video-popup-episode-buttons-section","sinovad-section"],[1,"sinovad-full-screen-video-popup-episode-buttons-section-left"],["id","previousButton","class","sinovad-video-control-button",3,"click",4,"ngIf"],[1,"sinovad-full-screen-video-popup-episode-buttons-section-right"],[2,"display","flex","align-items","center","float","right"],["id","nextButton","class","sinovad-video-control-button",3,"click",4,"ngIf"],["id","aspectRatio",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","40px",3,"src"],["id","fullScreenButton",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","30px",3,"src"],["id","settingsOption",1,"sinovad-video-control-button",2,"margin-left","20px",3,"click"],["width","36px",3,"src"],[1,"sinovad-section",2,"display","flex","height","50px"],[1,"sinovad-full-screen-video-popup-footer-center"],["id","section_video_principal_buttons","tabindex","0",1,"sinovad-full-screen-video-popup-footer-center-content"],["id","rewindButton",1,"sinovad-video-control-button",2,"margin-right","25px",3,"click"],["id","playButton","class","sinovad-video-control-button principal",3,"click",4,"ngIf"],["id","stopButton","class","sinovad-video-control-button principal",3,"click",4,"ngIf"],["id","forwardButton",1,"sinovad-video-control-button",2,"margin-left","25px",3,"click"],["class","sinovad-loading-video",3,"ngClass",4,"ngIf"],["class","easy-media-settings-section-container","tabindex","0",4,"ngIf"],[3,"ngIf"],["id","video","class","sinovad-custom-video",3,"ngClass","error","loadedmetadata","loadeddata","ended",4,"ngIf"],["id","previousButton",1,"sinovad-video-control-button",3,"click"],["id","nextButton",1,"sinovad-video-control-button",3,"click"],["id","playButton",1,"sinovad-video-control-button","principal",3,"click"],["playButton",""],["id","stopButton",1,"sinovad-video-control-button","principal",3,"click"],["stopButton",""],[1,"sinovad-loading-video",3,"ngClass"],["tabindex","0",1,"easy-media-settings-section-container"],["settingsContainer",""],[1,"easy-media-settings-section-content"],["id","section_settings_back_button","tabindex","0",1,"sinovad-settings-options-header-section"],[1,"sinovad-settings-section-container-left"],[1,"sinovad-settings-section-content-left"],["id","closeSettings",1,"sinovad-video-settings-button",3,"click"],["id","streams_options_section","tabindex","0",1,"sinovad-settings-options-section"],["ngFor","",3,"ngForOf"],["class","sinovad-settings-suboptions-section","tabindex","0",3,"id",4,"ngIf"],[3,"id","ngClass","click"],["tabindex","0",1,"sinovad-settings-suboptions-section",3,"id"],[1,"sinovad-subtitles-forzed-section",3,"innerHtml"],["id","video",1,"sinovad-custom-video",3,"ngClass","error","loadedmetadata","loadeddata","ended"],["videoTarget",""],[3,"message","close","confirm"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Tp,68,60,"div",2),e.qZA(),e.YNc(3,Zm,1,1,"app-confirm-message-modal",3)),2&t&&(e.xp6(2),e.Q6J("ngIf",r.showVideo),e.xp6(1),e.Q6J("ngIf",r.showReplyVideoMessageBox))},directives:[V.O5,V.mk,V.sg,Ln],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}video[_ngcontent-%COMP%]::cue{background-color:transparent;font-size:45px;color:#ff0;text-align:center;font-weight:700;text-shadow:2px 2px black}video.small[_ngcontent-%COMP%]::cue{font-size:25px}.sinovad-loading-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;padding-bottom:0;left:0;background-color:#000;z-index:9999;display:flex;align-items:center;justify-content:center;font-size:30px;color:#fff}.sinovad-loading-video.show-controls[_ngcontent-%COMP%]{padding-bottom:300px;top:150px}.easy-media-settings-section-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:auto;background:rgba(0,0,0,.5);padding:0 0 50px;z-index:99999}.easy-media-settings-section-content[_ngcontent-%COMP%]{display:block}.sinovad-settings-options-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:48px;border-bottom:1px solid #dedede;margin-bottom:50px}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;outline:none;padding:20px;background-color:transparent;border:none;font-size:30px;border-radius:5px;cursor:pointer}.sinovad-settings-options-section[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{color:#000;background-color:#fff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-settings-options-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:40px}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff;outline:none;padding:10px;background-color:transparent;border:none;font-size:30px;cursor:pointer;margin-right:6px;border-radius:5px}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%]{color:#000;background-color:#fff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#007bff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{color:#007bff}.sinovad-settings-suboptions-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{color:#007bff!important}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%;background:black}.sinovad-full-screen-video-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;-webkit-user-select:none;-moz-user-select:none;user-select:none}.sinovad-full-screen-video-popup[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.sinovad-video-header-section[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding-left:0;z-index:999;display:flex;width:100%;background:rgba(0,0,0,.5)}.sinovad-video-header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:60px;display:flex;align-items:center;width:70px;justify-content:center;cursor:pointer}.sinovad-video-header-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:40px}.sinovad-full-screen-video-popup-footer[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;padding-left:0;z-index:999;display:flex;width:100%;background:rgba(0,0,0,.5)}.solitv-progress-bar[_ngcontent-%COMP%]{background:transparent;height:40px;pointer-events:auto;position:relative;width:100%;display:flex;align-items:center;padding-left:4px;padding-right:4px}.solitv-slider-container[_ngcontent-%COMP%]{box-sizing:border-box;cursor:pointer;height:100%;pointer-events:auto;position:relative;touch-action:none;padding-left:8px;padding-right:8px}.solitv-slider-content[_ngcontent-%COMP%]{height:100%;padding-top:20px;cursor:pointer;outline:none}.sinovad-slider-fills[_ngcontent-%COMP%]{height:3px;overflow:hidden;pointer-events:none;width:100%;background:white;opacity:.5}.sinovad-slider-fills-progress-container[_ngcontent-%COMP%]{position:relative}.sinovad-slider-fills-progress-content[_ngcontent-%COMP%]{width:100%;height:8px;margin-top:-6px}.sinovad-slider-fills-progress[_ngcontent-%COMP%]{cursor:pointer;background:white;height:100%;width:0%}.sinovad-video-control-button[_ngcontent-%COMP%]{color:#fff;background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;width:40px;height:40px;opacity:.9}.sinovad-video-control-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset}.sinovad-video-control-button[_ngcontent-%COMP%]:hover{background:#007bff}.sinovad-video-control-button[_ngcontent-%COMP%]:focus-visible{background:#007bff}.sinovad-video-control-button[_ngcontent-%COMP%]:focus{background:#007bff!important}.sinovad-settings-options-header-section[_ngcontent-%COMP%]{display:flex}.sinovad-settings-section-container-left[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;float:left}.sinovad-settings-section-content-left[_ngcontent-%COMP%]{position:relative}.sinovad-video-settings-button[_ngcontent-%COMP%]{color:#fff;background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;width:70px;height:60px;opacity:.9}.sinovad-video-settings-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:30px;height:40px}.sinovad-video-settings-button[_ngcontent-%COMP%]:hover{background:#007bff!important}.sinovad-video-settings-button[_ngcontent-%COMP%]:focus-visible{background:#007bff!important}.sinovad-video-settings-button[_ngcontent-%COMP%]:focus{background:#007bff!important}.sinovad-video-container[_ngcontent-%COMP%]{width:100%;height:100%}.sinovad-controls-container[_ngcontent-%COMP%]{z-index:-99;pointer-events:none}.sinovad-controls-container.show[_ngcontent-%COMP%]{z-index:unset;pointer-events:unset}.sinovad-custom-video[_ngcontent-%COMP%]{width:100%;height:100%}.sinovad-full-screen-video-popup-episode-buttons-section[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:40px}.sinovad-full-screen-video-popup-episode-buttons-section-left[_ngcontent-%COMP%]{display:block;float:left;width:100%;padding-left:10px}.sinovad-full-screen-video-popup-episode-buttons-section-right[_ngcontent-%COMP%]{display:block;float:right;width:100%;padding-right:10px}.sinovad-full-screen-video-popup-episode-buttons-section-right[_ngcontent-%COMP%]   .sinovad-video-control-button[_ngcontent-%COMP%]{float:right}.sinovad-full-screen-video-popup-footer-left[_ngcontent-%COMP%]{display:block;float:left;width:170px}.sinovad-full-screen-video-popup-footer-left-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:left;width:100%;height:100%;color:#fff}.sinovad-current-time[_ngcontent-%COMP%]{color:#fff;font-size:25px}.sinovad-full-screen-video-popup-footer-center[_ngcontent-%COMP%]{display:block;float:left;width:100%}.sinovad-full-screen-video-popup-footer-center-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:left;width:100%;height:100%;justify-content:center}.sinovad-full-screen-video-popup-footer-right[_ngcontent-%COMP%]{width:100px;display:block;float:right}.sinovad-full-screen-video-popup-footer-right-content[_ngcontent-%COMP%]{display:flex;align-items:center;float:right;height:100%}.sinovad-video-header-section-title-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:35px;color:#fff;justify-content:center;width:100%;padding-right:70px}.sinovad-subtitles-forzed-section[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:10px;font-size:45px;color:#ff0;text-align:center;font-weight:700;text-shadow:2px 2px black}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;color:#fff;padding:10px}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:6px;font-size:18px;font-weight:700}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:#fff;color:#000;height:30px;font-size:18px;border-radius:5px}.sinovad-custom-video-object-fit[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff;color:#000}.small[_nghost-%COMP%]   .sinovad-video-header-section-title-container[_ngcontent-%COMP%]{font-size:25px}"]}),f})(),xh=(()=>{class f extends Pe.X{constructor(t,r,c,g,v){super(t,c,g,v),this.restProvider=t,this.http=r,this.events=c,this.domSanitizer=g,this.sharedData=v}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-splash-screen"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"sinovad-splash-screen-container"],["container",""],[2,"text-align","center"],["role","status",1,"spinner-grow"],[3,"src"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.ALo(5,"async"),e.ALo(6,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA()),2&t){const c=e.MAs(1);e.xp6(4),e.Udp("width",c.offsetWidth/3+"px"),e.Q6J("src",e.lcZ(5,3,e.xi3(6,5,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH)}},pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{width:100%;height:100%;background-color:#000;position:absolute;z-index:99999;top:0;left:0}.sinovad-splash-screen-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.sinovad-splash-screen-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%}.spinner-grow[_ngcontent-%COMP%]{background:black;width:unset;height:unset}"]}),f})();function Km(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-sidebar-administrator",18),e.NdJ("prepareRouterOutlet",function(){return e.CHM(t),e.oxw(3).prepareRouterOutlet()})("collapseSidebar",function(){return e.CHM(t),e.oxw(3).isCollapsedSidebar=!0}),e.qZA()}if(2&f){const t=e.oxw(3);e.Q6J("unselectSidebarOption",t.unselectSidebarOption)("selectHomeUserOption",t.selectHomeUserOption)}}function Wm(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-sidebar-account",19),e.NdJ("collapseSidebar",function(){return e.CHM(t),e.oxw(3).isCollapsedSidebar=!0}),e.qZA()}}function bp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-sidebar-media",19),e.NdJ("collapseSidebar",function(){return e.CHM(t),e.oxw(3).isCollapsedSidebar=!0}),e.qZA()}}function Ym(f,n){if(1&f&&(e.TgZ(0,"section",14,15),e.YNc(2,Km,1,2,"app-sidebar-administrator",16),e.YNc(3,Wm,1,0,"app-sidebar-account",17),e.YNc(4,bp,1,0,"app-sidebar-media",17),e.qZA()),2&f){const t=e.oxw(2);e.Udp("height","100%"),e.xp6(2),e.Q6J("ngIf",t.showingSidebarAdminMode),e.xp6(1),e.Q6J("ngIf",t.showingSidebarAccount),e.xp6(1),e.Q6J("ngIf",t.showingSidebarMedia)}}function Cp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"router-outlet",20),e.NdJ("activate",function(c){return e.CHM(t),e.oxw(2).onActivate(c)}),e.qZA()}}const Sp=function(f){return{small:f}},$m=function(f){return{locked:f}};function dv(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",null,5),e.TgZ(3,"app-header-web-admin",6),e.NdJ("showAdminMode",function(){return e.CHM(t),e.oxw().showAdminMode()})("goHome",function(){return e.CHM(t),e.oxw().showHome()})("executeSearch",function(c){return e.CHM(t),e.oxw().onSearchMedia(c)})("toggleSidebar",function(){return e.CHM(t),e.oxw().onClickToggleSidebarButton()})("showSplashScreen",function(){return e.CHM(t),e.oxw().showSplashScreen=!0})("logout",function(){return e.CHM(t),e.oxw().logOut()})("showHomeUser",function(){return e.CHM(t),e.oxw().showHome()})("logout",function(){return e.CHM(t),e.oxw().logOut()}),e.qZA(),e.qZA(),e.TgZ(4,"div",7),e.TgZ(5,"div",null,8),e.YNc(7,Ym,5,5,"section",9),e.qZA(),e.TgZ(8,"section",10,11),e.YNc(10,Cp,1,0,"ng-template",12),e.qZA(),e.qZA(),e._UZ(11,"div",null,13),e.qZA()}if(2&f){const t=e.MAs(2),r=e.MAs(6),c=e.MAs(12),g=e.oxw();e.Q6J("ngClass",e.VKq(10,Sp,g.isSmallDevice())),e.xp6(3),e.Q6J("showingSidebarAccount",g.showingSidebarAccount)("showingSidebarAdminMode",g.showingSidebarAdminMode),e.xp6(1),e.Udp("height","calc(100% - "+(t.offsetHeight+c.offsetHeight)+"px)"),e.xp6(3),e.Q6J("ngIf",!g.isSmallDevice()||!g.isCollapsedSidebar),e.xp6(1),e.Udp("width","calc(100% - "+r.offsetWidth+"px)"),e.Q6J("ngClass",e.VKq(12,$m,g.isSmallDevice()&&!g.isCollapsedSidebar)),e.xp6(2),e.Q6J("ngIf",!g.hideContent)}}function zm(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"router-outlet",20),e.NdJ("activate",function(c){return e.CHM(t),e.oxw().onActivate(c)}),e.qZA(),e.qZA()}}function Oh(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"section",22),e.TgZ(1,"app-video",23),e.NdJ("fullscreen",function(){return e.CHM(t),e.oxw().showVideoInFullScreen()})("outputCloseVideo",function(){return e.CHM(t),e.oxw().closeVideo()}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,Sp,t.isSmallDevice()))("builderVideo",t.sharedData.currentVideo)}}function wh(f,n){1&f&&e._UZ(0,"app-splash-screen")}let Mp=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(r,x,Y,ie),this.route=t,this.restProvider=r,this.router=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.toggleVideo=new e.vpe,this.showVideoPopUp=!1,this.showSplashScreen=!1,this.hideContent=!1,this._window=window,this.isCollapsedSidebar=!1,this.selectHomeUserOption=new e.vpe,this.unselectSidebarOption=new e.vpe,this.refreshSidebarOption=new e.vpe,this.showingSidebarAccount=!1,this.showingSidebarAdminMode=!1,this.showingSidebarMedia=!1}showVideoInFullScreen(){this.toggleVideo.emit(!0)}ngOnInit(){}logOut(){this.sharedData.currentProfile=void 0,this.sharedData.userData=void 0,this.sharedData.apiToken=void 0,localStorage.removeItem("apiToken"),this.router.navigate(["landing"],{skipLocationChange:!1})}toogleMenu(){this.ref.detectChanges()}onClickToggleSidebarButton(){this.isCollapsedSidebar=!this.isCollapsedSidebar}prepareRouterOutlet(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges()}refresh(){this.refreshSidebarOption.emit(!0)}showAdminMode(){this.showingSidebarAdminMode=!0,this.showingSidebarAccount=!1,this.showingSidebarMedia=!1}showHome(){this.showingSidebarAccount=!1,this.router.navigateByUrl("/home").then(t=>{this.isSmallDevice()&&(this.isCollapsedSidebar=!0),this.prepareRouterOutlet(),this.selectHomeUserOption.emit(!0)},t=>{console.error(t)})}onSearchMedia(t){null!=t&&""!=t?(this.unselectSidebarOption.emit(!0),this.hideContent=!0,this.ref.detectChanges(),this.router.navigateByUrl("/search?text="+t).then(r=>{this.hideContent=!1,this.ref.detectChanges()})):this.showHome()}closeVideo(){this.sharedData.currentVideo=void 0,this.showHome(),this.toggleVideo.emit(!1)}onActivate(t){let r=this;this.isCollapsedSidebar=!0,(t instanceof la||t instanceof aa||t instanceof $l||t instanceof ks||t instanceof Cs)&&(this.showingSidebarMedia=!0,this.showingSidebarAccount=!1,this.showingSidebarAdminMode=!1,t.toggleVideo.subscribe(c=>{r.toggleVideo.emit(c)})),t instanceof sa&&(this.showingSidebarMedia=!0,this.showingSidebarAccount=!1,this.showingSidebarAdminMode=!1,t.selectProfile.subscribe(c=>{r.sharedData.currentProfile=c,r.showHome()}),t.loadedProfiles.subscribe(c=>{r.showSplashScreen=!1})),t instanceof Hl&&t.showSplashScreen.subscribe(c=>{r.showSplashScreen=!0}),t instanceof X&&(this.showingSidebarAccount=!0,this.showingSidebarAdminMode=!1,this.showingSidebarMedia=!1),t instanceof Vr&&(this.showingSidebarAccount=!0,this.showingSidebarAdminMode=!1,this.showingSidebarMedia=!1),t instanceof eg&&(this.showingSidebarAccount=!0,this.showingSidebarAdminMode=!1,this.showingSidebarMedia=!1),t instanceof Ni&&(this.showingSidebarAccount=!0,this.showingSidebarAdminMode=!1,this.showingSidebarMedia=!1,t.showInitial.subscribe(c=>{r.showHome()})),t instanceof Bt&&(this.showingSidebarAccount=!1,this.showingSidebarAdminMode=!0,this.showingSidebarMedia=!1,t.currentMediaTypeID=r.currentMediaTypeID,t.title=this.title,r.ref.detectChanges()),(t instanceof Ot||t instanceof hn||t instanceof _n||t instanceof Dt||t instanceof Jt||t instanceof Yt)&&(this.showingSidebarAccount=!1,this.showingSidebarAdminMode=!0,this.showingSidebarMedia=!1)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.gz),e.Y36(He.C),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-root-web-admin"]],outputs:{toggleVideo:"toggleVideo"},features:[e.qOj],decls:4,vars:4,consts:[["class","sinovad-page-container",3,"ngClass",4,"ngIf"],["class","sinovad-page-container",4,"ngIf"],["class","sinovad-container-video",4,"ngIf"],[4,"ngIf"],[1,"sinovad-page-container",3,"ngClass"],["header",""],[3,"showingSidebarAccount","showingSidebarAdminMode","showAdminMode","goHome","executeSearch","toggleSidebar","showSplashScreen","logout","showHomeUser"],[1,"sinovad-menu-body-container"],["menu",""],["id","menuContainer","class","sinovad-menu-container","tabindex","0",3,"height",4,"ngIf"],["id","bodyContainer","tabindex","0",1,"sinovad-body-container",3,"ngClass"],["principalContainer",""],[3,"ngIf"],["footer",""],["id","menuContainer","tabindex","0",1,"sinovad-menu-container"],["menuContainer",""],[3,"unselectSidebarOption","selectHomeUserOption","prepareRouterOutlet","collapseSidebar",4,"ngIf"],[3,"collapseSidebar",4,"ngIf"],[3,"unselectSidebarOption","selectHomeUserOption","prepareRouterOutlet","collapseSidebar"],[3,"collapseSidebar"],[1,"small",3,"activate"],[1,"sinovad-page-container"],[1,"sinovad-container-video"],[3,"ngClass","builderVideo","fullscreen","outputCloseVideo"]],template:function(t,r){1&t&&(e.YNc(0,dv,13,14,"div",0),e.YNc(1,zm,2,0,"div",1),e.YNc(2,Oh,2,4,"section",2),e.YNc(3,wh,1,0,"app-splash-screen",3)),2&t&&(e.Q6J("ngIf",null!=r.sharedData.apiToken&&null!=r.sharedData.userData&&!r.sharedData.pageNotFoundShowing),e.xp6(1),e.Q6J("ngIf",null==r.sharedData.apiToken&&null==r.sharedData.userData||r.sharedData.pageNotFoundShowing),e.xp6(1),e.Q6J("ngIf",r.sharedData.currentVideo),e.xp6(1),e.Q6J("ngIf",r.showSplashScreen))},directives:[V.O5,V.mk,zu,ff,Qu,Tf,R.lC,Ih,xh],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{background:#00000099;position:relative}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.sinovad-body-container.locked[_ngcontent-%COMP%]{pointer-events:none}"]}),f})();const fv=["mainContainer"],hv=["initialSound"];function gv(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-root-web-admin",3),e.NdJ("toggleVideo",function(c){return e.CHM(t),e.oxw().executeToggleVideo(c)}),e.qZA()}}const qm=function(f){return{small:f}};let Dp=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.router=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.togglevideo=new e.vpe,this.instance=new e.vpe,this.showRootPage=!1}ngOnInit(){const t=window.location.search;if(""!=t){var r=new URLSearchParams(t).get("apiToken");null!=r&&localStorage.setItem("apiToken",r)}var c=this;window.configurationData&&(this.sharedData.configurationData=window.configurationData),this.intervalCheckMediaServers=window.setInterval(function(){c.checkSecureConnectionMediaServers()},15e3),localStorage.getItem("apiToken")?(this.sharedData.apiToken=localStorage.getItem("apiToken"),this.getUser().then(g=>{this.getMenus(),this.getMediaServers(),this.getProfiles().then(v=>{this.showRootPage=!0,this.ref.detectChanges(),this.router.navigateByUrl(window.location.pathname+window.location.search).then(x=>{},x=>{this.router.navigateByUrl("/404")})},v=>{console.error(v)})},g=>{console.error(g)}),this.ref.detectChanges()):(this.sharedData.apiToken=void 0,setTimeout(()=>{this.showRootPage=!0,this.ref.detectChanges(),this.router.navigateByUrl(window.location.pathname).then(g=>{},g=>{this.router.navigateByUrl("/landing")})},100))}ngOnDestroy(){this.intervalCheckMediaServers&&window.clearInterval(this.intervalCheckMediaServers)}executeAudio(){}onEndedAudio(){}refreshApp(){}ngAfterViewInit(){setTimeout(()=>{this.instance.emit(this)},250);let t=this;window.addEventListener("click",function(g){t.sharedData.configurationData.alwaysFullScreen&&t.showPageInFullScreen()})}showPageInFullScreen(){if(!document.fullscreenElement){var t=this.mainContainer.nativeElement;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen(),this.mainContainer.nativeElement.click(),this.ref.detectChanges()}}executeToggleVideo(t){this.togglevideo.emit(t),t?this.showPageInFullScreen():this.sharedData.configurationData.alwaysFullScreen||document.fullscreenElement&&document.exitFullscreen()}onActivate(t){let r=this;t instanceof Mp&&t.toggleVideo.subscribe(c=>{r.executeToggleVideo(c)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sinovad-web"]],viewQuery:function(t,r){if(1&t&&(e.Gf(fv,5),e.Gf(hv,7)),2&t){let c;e.iGM(c=e.CRH())&&(r.mainContainer=c.first),e.iGM(c=e.CRH())&&(r.initialSound=c.first)}},outputs:{togglevideo:"togglevideo",instance:"instance"},features:[e.qOj],decls:3,vars:4,consts:[["id","sinovadMainContainer",1,"sinovad-main-container",3,"ngClass"],["mainContainer",""],[3,"toggleVideo",4,"ngIf"],[3,"toggleVideo"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,gv,1,0,"app-root-web-admin",2),e.qZA()),2&t&&(e.Q6J("ngClass",e.VKq(2,qm,r.isSmallDevice())),e.xp6(2),e.Q6J("ngIf",r.showRootPage))},directives:[V.mk,V.O5,Mp],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}.sinovad-main-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}"]}),f})();var pv=w(5905);const Jm=["modalTarget"];function Uc(f,n){1&f&&(e.TgZ(0,"span"),e._uU(1,"Escribe un nombre de perfil"),e.qZA())}function Qm(f,n){1&f&&(e.TgZ(0,"span"),e._uU(1,"Editar nombre de perfil"),e.qZA())}function Pp(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"section",1,2),e.TgZ(2,"div",3),e.TgZ(3,"section",4),e.TgZ(4,"div",5),e.TgZ(5,"div",6),e.TgZ(6,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeForm()}),e._UZ(7,"img",8),e.ALo(8,"async"),e.ALo(9,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.YNc(10,Uc,2,0,"span",9),e.YNc(11,Qm,2,0,"span",9),e.qZA(),e.TgZ(12,"section",10),e.TgZ(13,"input",11,12),e.NdJ("click",function(){e.CHM(t);const c=e.MAs(14);return e.oxw().showKeyboard(c)})("change",function(c){return e.CHM(t),e.oxw().onChangeProfileName(c)}),e.qZA(),e.qZA(),e.TgZ(15,"section",13),e.TgZ(16,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().saveProfile()}),e._uU(17," GUARDAR "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(7),e.Q6J("src",e.lcZ(8,4,e.xi3(9,6,"back-screen.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngIf",!t.currentTmpProfile.Id),e.xp6(1),e.Q6J("ngIf",t.currentTmpProfile.Id),e.xp6(2),e.Q6J("value",t.currentTmpProfile.FullName)}}let Xm=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.modalService=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.close=new e.vpe,this.closeWithChanges=new e.vpe}ngOnDestroy(){this.profileFormContainer.removeEventListener("keydown",this.customKeyboardProfileFormEvent)}ngAfterViewInit(){let t=this;this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}),this.modalReference.shown.subscribe(r=>{t.initializeProfileFormControls()})}initializeProfileFormControls(){this.profileFormContainer=document.getElementById("profileFormSection"),this.customKeyboardProfileFormEvent&&this.profileFormContainer.removeEventListener("keydown",this.customKeyboardProfileFormEvent),this.focusFullScreenContainer(this.profileFormContainer,this.ref);let t=this;this.customKeyboardProfileFormEvent=function(c){t.setKeyboardActionsFullScreenPage(c,t.profileFormContainer,t.ref)},this.profileFormContainer.addEventListener("keydown",this.customKeyboardProfileFormEvent)}onChangeProfileName(t){this.currentTmpProfile.FullName=t.target.value}showKeyboard(t){t.autofocus=!0,t.focus()}saveProfile(){this.restProvider.executeSinovadApiService(this.currentTmpProfile.Id>0?ae.yw.PUT:ae.yw.POST,this.currentTmpProfile.Id>0?"/profiles/Update":"/profiles/Create",this.currentTmpProfile).then(c=>{this.modalReference.close(),this.closeWithChanges.emit(!0)},c=>{console.error(c)})}closeForm(){this.modalReference.close(),this.close.emit(!0)}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-profile-form-tv"]],viewQuery:function(t,r){if(1&t&&e.Gf(Jm,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},inputs:{currentTmpProfile:"currentTmpProfile"},outputs:{close:"close",closeWithChanges:"closeWithChanges"},features:[e.qOj],decls:2,vars:0,consts:[["modalTarget",""],["id","profileFormSection","tabindex","0",1,"sinovad-profile-form-container"],["profileFormContainer",""],[1,"sinovad-profiles-view-content"],["id","profile_form_section_header","tabindex","0",1,"sinovad-profiles-view-header"],[1,"sinovad-screen-back-container"],[1,"sinovad-screen-back-content"],["id","button_close_form",3,"click"],[3,"src"],[4,"ngIf"],["id","profile_form_section_body","tabindex","0",1,"sinovad-profile-form-input-container"],["type","text","id","button_name_profile","placeholder","Nombre de Perfil",3,"value","click","change"],["input",""],["id","profile_form_section_footer","tabindex","0",1,"sinovad-profile-form-footer"],["id","button_save_profile",3,"click"]],template:function(t,r){1&t&&e.YNc(0,Pp,18,9,"ng-template",null,0,e.W1O)},directives:[V.O5],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.sinovad-profiles-section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}section[_ngcontent-%COMP%]{outline:none}input[_ngcontent-%COMP%]{outline:none}.sinovad-profiles-view-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;padding-top:40px}.sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:45px;color:#fff;text-align:center;padding-bottom:60px}.sinovad-profiles-view-body[_ngcontent-%COMP%]{overflow-y:auto}.sinovad-initials-profile[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:100px;border:none;display:flex;align-items:center;justify-content:center;font-size:80px;background:blueviolet;color:#fff}.sinovad-initials-profile.add[_ngcontent-%COMP%]{background:lightslategrey}.sinovad-initials-profile.add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;padding-top:10px}.sinovad-profile-form-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:99;position:absolute;top:0;left:0;background:black}.sinovad-profile-form-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50px;min-width:60%;font-size:25px;padding:0 16px;border:none;background:lightslategrey;color:#fff;opacity:.8;border:2px solid transparent}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.sinovad-profile-form-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:60px;height:60px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;opacity:.8;padding:10px 90px;background:red;color:#fff;font-size:20px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px 94px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px 94px}.sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px 94px}.sinovad-screen-back-container[_ngcontent-%COMP%]{position:relative}.sinovad-screen-back-content[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;left:0;position:absolute;margin-left:20px;opacity:.8;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{width:54px}.small[_nghost-%COMP%]   .sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:23px;padding-bottom:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]{padding-top:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px 20px;font-size:20px}.small[_nghost-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:130px;height:130px;font-size:60px}.small[_nghost-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{font-size:23px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]{gap:20px}.small[_nghost-%COMP%]   .sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{bottom:2px;margin-left:0;height:unset;padding:0}.small[_nghost-%COMP%]   .sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:30px}.small[_nghost-%COMP%]   .sinovad-profile-form-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:20px}.small[_nghost-%COMP%]   .sinovad-profile-form-footer[_ngcontent-%COMP%]{margin-top:10px}.small[_nghost-%COMP%]   .sinovad-profile-form-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 30px;font-size:20px}"]}),f})();const Ap=["modalTarget"];function Jd(f,n){if(1&f&&(e.TgZ(0,"div",22),e._uU(1),e.qZA()),2&f){const t=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.hij(" ",r.getInitials(t)," ")}}function e_(f,n){if(1&f&&(e._UZ(0,"img",22),e.ALo(1,"async"),e.ALo(2,"formatDataPipe")),2&f){const t=e.oxw().$implicit;e.uIk("src",e.lcZ(1,1,e.xi3(2,3,t.Id,"GetAvatarImageURLByProfileId")),e.LSH)}}function Ip(f,n){1&f&&(e.TgZ(0,"div",23),e.TgZ(1,"div",24),e._UZ(2,"img",25),e.ALo(3,"async"),e.ALo(4,"formatDataPipe"),e.qZA(),e.qZA()),2&f&&(e.xp6(2),e.Q6J("src",e.lcZ(3,1,e.xi3(4,3,"edit-profile.png","GetImageURLByKey")),e.LSH))}function t_(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(4).onSelectProfile(g)}),e.YNc(1,Jd,2,1,"div",20),e.YNc(2,e_,3,6,"img",20),e.YNc(3,Ip,5,6,"div",21),e.TgZ(4,"div",14),e._uU(5),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(4);e.MGl("id","profile_",t.Id,""),e.xp6(1),e.Q6J("ngIf",null==t.AvatarPath),e.xp6(1),e.Q6J("ngIf",null!=t.AvatarPath),e.xp6(1),e.Q6J("ngIf",r.enableEditMode),e.xp6(2),e.hij(" ",t.FullName," ")}}function n_(f,n){if(1&f&&e.YNc(0,t_,6,5,"ng-template",18),2&f){const t=e.oxw(3);e.Q6J("ngForOf",t.sharedData.listProfiles)}}function r_(f,n){1&f&&e._uU(0," EDITAR ")}function i_(f,n){1&f&&e._uU(0," LISTO ")}function o_(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"section",3),e.TgZ(1,"div",4,5),e.TgZ(3,"div",6,7),e._uU(5," \xbfQui\xe9n eres? "),e.qZA(),e.TgZ(6,"div",8),e.TgZ(7,"section",9,10),e.YNc(9,n_,1,1,"ng-template",0),e.TgZ(10,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).showNewProfile()}),e.TgZ(11,"div",12),e._UZ(12,"img",13),e.ALo(13,"async"),e.ALo(14,"formatDataPipe"),e.qZA(),e.TgZ(15,"div",14),e._uU(16," Crear Perfil "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"section",15,16),e.TgZ(19,"button",17),e.NdJ("click",function(){e.CHM(t);const c=e.oxw(2);return c.enableEditMode?c.confirmEdit():c.changeToEditMode()}),e.YNc(20,r_,1,0,"ng-template",0),e.YNc(21,i_,1,0,"ng-template",0),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&f){const t=e.MAs(4),r=e.MAs(18),c=e.oxw(2);e.xp6(6),e.Udp("height",c.isSmallDevice()?"calc(100% - "+(t.offsetHeight+r.offsetHeight)+"px)":""),e.xp6(3),e.Q6J("ngIf",c.sharedData.listProfiles),e.xp6(3),e.Q6J("src",e.lcZ(13,6,e.xi3(14,8,"plus.png","GetImageURLByKey")),e.LSH),e.xp6(8),e.Q6J("ngIf",!c.enableEditMode),e.xp6(1),e.Q6J("ngIf",c.enableEditMode)}}function xp(f,n){1&f&&e.YNc(0,o_,22,11,"ng-template",null,2,e.W1O)}function s_(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-profile-form-tv",26),e.NdJ("close",function(){return e.CHM(t),e.oxw().onCloseForm()})("closeWithChanges",function(){return e.CHM(t),e.oxw().onSaveProfile()}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("currentTmpProfile",t.currentTmpProfile)}}let Op=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.modalService=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this.enableEditMode=!1,this.showForm=!1,this.selectProfile=new e.vpe,this.showProfiles=new e.vpe,this.loadedProfiles=new e.vpe,this.showModal=!1}ngOnInit(){this.showModal=!0,this.performGetProfiles()}ngAfterViewInit(){}ngOnDestroy(){null!=this.profilesViewContainer&&this.profilesViewContainer.removeEventListener("keydown",this.customKeyboardControlsEvent)}performGetProfiles(){return new Promise((t,r)=>{this.getProfiles().then(c=>{if(this.showModal){let g=this;this.modalReference=this.modalService.open(this.modalTarget,{container:"#sinovadMainContainer",modalDialogClass:"modal-dialog modal-fullscreen",scrollable:!0,ariaLabelledBy:"exampleModalCenteredScrollableTitle"}),this.modalReference.shown.subscribe(v=>{g.initializeProfilesViewControls(),g.showProfiles.emit(!0),g.loadedProfiles.emit(!0)})}t(!0)},c=>{r(c)})})}initializeProfilesViewControls(){this.profilesViewContainer=document.getElementById("profilesViewSection"),this.customKeyboardControlsEvent&&this.profilesViewContainer.removeEventListener("keydown",this.customKeyboardControlsEvent),this.focusFullScreenContainer(this.profilesViewContainer,this.ref);let t=this;this.customKeyboardControlsEvent=function(c){t.setKeyboardActionsFullScreenPage(c,t.profilesViewContainer,t.ref)},this.profilesViewContainer.addEventListener("keydown",this.customKeyboardControlsEvent)}changeToEditMode(){this.enableEditMode=!0}confirmEdit(){this.enableEditMode=!1}showNewProfile(){this.currentTmpProfile={FullName:"",UserId:this.sharedData.userData.Id},this.showForm=!0}editProfile(t){this.currentTmpProfile=JSON.parse(JSON.stringify(t)),this.showForm=!0}onSelectProfile(t){this.enableEditMode?this.editProfile(t):this.enterProfile(t)}enterProfile(t){this.modalReference.close(),this.selectProfile.emit(t)}onCloseForm(){this.showForm=!1,this.initializeProfilesViewControls()}onSaveProfile(){this.showForm=!1,this.getProfiles().then(t=>{this.ref.detectChanges(),setTimeout(()=>{this.initializeProfilesViewControls()},100)},t=>{})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(jt.FF),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-profiles-view-tv"]],viewQuery:function(t,r){if(1&t&&e.Gf(Ap,5),2&t){let c;e.iGM(c=e.CRH())&&(r.modalTarget=c.first)}},outputs:{selectProfile:"selectProfile",showProfiles:"showProfiles",loadedProfiles:"loadedProfiles"},features:[e.qOj],decls:2,vars:2,consts:[[3,"ngIf"],[3,"currentTmpProfile","close","closeWithChanges",4,"ngIf"],["modalTarget",""],["id","profilesViewSection","tabindex","0",1,"sinovad-profiles-view-container","sinovad-profiles-section"],[1,"sinovad-profiles-view-content"],["profilesViewContent",""],[1,"sinovad-profiles-view-header"],["profilesViewHeader",""],[1,"sinovad-profiles-view-body"],["id","profiles_view_list_profiles_section","tabindex","0",1,"sinovad-profiles-view-list-container"],["profilesViewBody",""],["id","create_new_profile",3,"click"],[1,"sinovad-initials-profile","add"],["width","40px",3,"src"],[1,"sinovad-fullname-profile"],["id","profiles_view_footer_section","tabindex","0",1,"sinovad-profiles-view-footer"],["profilesViewFooter",""],["id","edit-ready-profile-button",3,"click"],["ngFor","",3,"ngForOf"],[3,"id","click"],["class","sinovad-initials-profile",4,"ngIf"],["class","sinovad-icon-edit-profile-container",4,"ngIf"],[1,"sinovad-initials-profile"],[1,"sinovad-icon-edit-profile-container"],[1,"sinovad-icon-edit-profile-content"],[3,"src"],[3,"currentTmpProfile","close","closeWithChanges"]],template:function(t,r){1&t&&(e.YNc(0,xp,2,0,"ng-template",0),e.YNc(1,s_,1,1,"app-profile-form-tv",1)),2&t&&(e.Q6J("ngIf",r.showModal),e.xp6(1),e.Q6J("ngIf",r.showForm))},directives:[V.O5,V.sg,Xm],pipes:[V.Ov,qr.A],styles:["[_nghost-%COMP%]{width:100%;height:100%}.sinovad-profiles-section[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}section[_ngcontent-%COMP%]{outline:none}input[_ngcontent-%COMP%]{outline:none}.sinovad-profiles-view-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.sinovad-profiles-view-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;padding-top:40px}.sinovad-profiles-view-header[_ngcontent-%COMP%]{font-size:45px;color:#fff;text-align:center;padding-bottom:60px}.sinovad-profiles-view-body[_ngcontent-%COMP%]{overflow-y:auto}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;outline:none;opacity:.8;padding:0;margin-right:20px}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-profiles-view-list-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   .sinovad-initials-profile[_ngcontent-%COMP%]{border:2px solid white}.sinovad-profiles-view-footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding-top:60px;padding-bottom:30px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;outline:none;opacity:.8;padding:10px 60px;background:lightslategrey;color:#f5f5f5;font-size:26px}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:white;color:#000;opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{background:white;color:#000;opacity:1}.sinovad-profiles-view-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{background:white;color:#000;opacity:1}.sinovad-initials-profile[_ngcontent-%COMP%]{width:180px;height:180px;border-radius:100px;border:none;display:flex;align-items:center;justify-content:center;font-size:80px;background:lightslategrey;color:#fff}.sinovad-initials-profile.add[_ngcontent-%COMP%]{background:#007bff}.sinovad-initials-profile.add[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90px}.sinovad-icon-edit-profile-container[_ngcontent-%COMP%]{display:block;position:relative}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]{display:block;position:absolute;right:0;top:-55px;background:white;border-radius:25px;padding:10px;border:none}.sinovad-icon-edit-profile-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;color:#fff;font-size:30px;padding-top:10px}.sinovad-screen-back-container[_ngcontent-%COMP%]{position:relative}.sinovad-screen-back-content[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;left:0;position:absolute;margin-left:20px;opacity:.8;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible   img[_ngcontent-%COMP%]{width:54px}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1}.sinovad-screen-back-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus   img[_ngcontent-%COMP%]{width:54px}"]}),f})();function wp(f,n){if(1&f&&(e.TgZ(0,"div",9),e._uU(1),e.qZA(),e.TgZ(2,"div",10),e._uU(3),e.qZA()),2&f){const t=e.oxw();e.xp6(1),e.hij(" ",t.getInitials(t.sharedData.currentProfile)," "),e.xp6(2),e.hij(" ",t.sharedData.currentProfile.FullName," ")}}const Rh=function(f){return{selected:f}};function mv(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"button",12,2),e.NdJ("click",function(){const g=e.CHM(t).$implicit;return e.oxw(2).onClickMenuOption(g)}),e._UZ(2,"i"),e.TgZ(3,"span",13),e._uU(4),e.qZA(),e.qZA()}if(2&f){const t=n.$implicit,r=e.oxw(2);e.MGl("id","menu_button_",t.index,""),e.Q6J("ngClass",e.VKq(6,Rh,r.selectedMenuOption&&t.index==r.selectedMenuOption.index)),e.xp6(2),e.Tol(t.iconClass),e.xp6(2),e.Oqu(t.name)}}function Nh(f,n){if(1&f&&(e.TgZ(0,"div",11),e.YNc(1,mv,5,8,"ng-template",4),e.qZA()),2&f){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t.listOptions)}}const a_=function(f){return{small:f}};function _v(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-profiles-view-tv",14),e.NdJ("showProfiles",function(){return e.CHM(t),e.oxw().showProfiles.emit(!0)})("selectProfile",function(c){return e.CHM(t),e.oxw().onSelectProfile(c)}),e.qZA()}if(2&f){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,a_,t.isSmallDevice()))}}let Lu=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x){super(r,g,v,x),this.ref=t,this.restProvider=r,this.http=c,this.events=g,this.domSanitizer=v,this.sharedData=x,this.showProfiles=new e.vpe,this.selectOption=new e.vpe,this.listModules=[],this.showProfilesView=!1,this.allModules=[{index:1,order:1,listOptions:[{index:1,name:"Inicio",method:"ShowInitial",iconClass:"fa-solid fa-house"},{index:2,name:"Pel\xedculas",method:"ShowMovies",iconClass:"fa-solid fa-film"},{index:3,name:"Series",method:"ShowSeries",iconClass:"fa-solid fa-tv"},{index:4,name:"B\xfasqueda",method:"ShowSearch",iconClass:"fa-solid fa-magnifying-glass"},{index:5,name:"Cerrar Sesi\xf3n",method:"logOut",iconClass:"fa-solid fa-right-from-bracket"}]}]}ngOnInit(){this.listModules=this.allModules,this.showProfilesView=!0}onClickAvatarButton(){this.showProfilesView=!0}onClickMenuOption(t){this.selectedMenuOption=t,this.selectOption.emit(this.selectedMenuOption)}onSelectProfile(t){this.sharedData.currentProfile=t,this.selectedMenuOption=this.listModules[0].listOptions[0],this.selectOption.emit(this.selectedMenuOption),this.showProfilesView=!1}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(e.sBO),e.Y36(He.C),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sidebar-tv"]],outputs:{showProfiles:"showProfiles",selectOption:"selectOption"},features:[e.qOj],decls:12,vars:9,consts:[[1,"sinovad-avatar-container"],["id","avatar_button",1,"sinovad-avatar-button",3,"click"],["button",""],[3,"ngIf"],["ngFor","",3,"ngForOf"],[1,"sinovad-icon-container"],[1,"sinovad-icon-content"],[3,"src"],[3,"ngClass","showProfiles","selectProfile",4,"ngIf"],[1,"sinovad-initials-profile"],[1,"sinovad-fullname-profile"],[1,"sinovad-module-container"],[1,"sinovad-menu-button",3,"id","ngClass","click"],[1,"ms-2"],[3,"ngClass","showProfiles","selectProfile"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1,2),e.NdJ("click",function(){return r.onClickAvatarButton()}),e.YNc(3,wp,4,2,"ng-template",3),e.qZA(),e.qZA(),e.YNc(4,Nh,2,1,"ng-template",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div"),e._UZ(8,"img",7),e.ALo(9,"async"),e.ALo(10,"formatDataPipe"),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,_v,1,3,"app-profiles-view-tv",8)),2&t&&(e.xp6(3),e.Q6J("ngIf",r.sharedData.currentProfile),e.xp6(1),e.Q6J("ngForOf",r.listModules),e.xp6(4),e.Q6J("src",e.lcZ(9,4,e.xi3(10,6,"sinovad-logo.png","GetImageURLByKey")),e.LSH),e.xp6(3),e.Q6J("ngIf",r.showProfilesView))},directives:[V.O5,V.sg,V.mk,Op],pipes:[V.Ov,qr.A],styles:[".sinovad-avatar-container[_ngcontent-%COMP%]{padding:20px}.sinovad-icon-container[_ngcontent-%COMP%]{padding:10px;display:flex;align-items:center;justify-content:center}.sinovad-icon-content[_ngcontent-%COMP%]{display:block;text-align:center}.sinovad-icon-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:160px}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-avatar-button[_ngcontent-%COMP%]{display:block;padding-bottom:10px;padding-left:0;background:transparent;border:none;cursor:pointer;color:#fff;opacity:.7;display:flex;align-items:center}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-initials-profile[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:25px;border:1px solid white;display:flex;align-items:center;justify-content:center;font-size:30px}.sinovad-avatar-button[_ngcontent-%COMP%]   .sinovad-fullname-profile[_ngcontent-%COMP%]{display:block;margin-left:10px;font-size:20px}.sinovad-avatar-button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:hover   .sinovad-initials-profile[_ngcontent-%COMP%]{border-color:#fff;border:2px solid white}.sinovad-avatar-button[_ngcontent-%COMP%]:focus-visible{color:#fff;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:focus-visible   .sinovad-initials-profile[_ngcontent-%COMP%]{border-color:#fff;border:2px solid white}.sinovad-avatar-button[_ngcontent-%COMP%]:focus{color:#fff!important;opacity:1}.sinovad-avatar-button[_ngcontent-%COMP%]:focus   .sinovad-initials-profile[_ngcontent-%COMP%]{border-color:#fff!important;border:2px solid white}.sinovad-menu-button[_ngcontent-%COMP%]{display:block;background:transparent;color:#fff;border:none;padding:10px 10px 10px 20px;cursor:pointer;font-size:18px;width:100%;text-align:left;opacity:.7}.sinovad-menu-button.selected[_ngcontent-%COMP%]{color:#007bff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:focus-visible{color:#fff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:focus{color:#fff;opacity:1}.sinovad-menu-button[_ngcontent-%COMP%]:hover{color:#fff;opacity:1}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:200px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.small[_ngcontent-%COMP%]   .sinovad-body-container[_ngcontent-%COMP%]{width:100%!important}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:999}"]}),f})();const Rp=["menuContainer"],Lh=["principalContainer"];function Fh(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"app-sidebar-tv",12),e.NdJ("showProfiles",function(){return e.CHM(t),e.oxw().showSplashScreen=!1})("selectOption",function(c){return e.CHM(t),e.oxw().onClickMenuOption(c)}),e.qZA()}}function l_(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"router-outlet",13),e.NdJ("activate",function(c){return e.CHM(t),e.oxw().onActivate(c)}),e.qZA()}}const kh=function(f){return{small:f}};function Bh(f,n){if(1&f){const t=e.EpF();e.TgZ(0,"section",14),e.TgZ(1,"app-video",15),e.NdJ("fullscreen",function(){return e.CHM(t),e.oxw().showVideoInFullScreen()})("outputCloseVideo",function(){return e.CHM(t),e.oxw().closeVideo()}),e.qZA(),e.qZA()}if(2&f){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(2,kh,t.isSmallDevice()))("builderVideo",t.sharedData.currentVideo)}}function Np(f,n){1&f&&e._UZ(0,"app-splash-screen")}let c_=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(t,x,Y,ie),this.restProvider=t,this.route=r,this.router=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie,this.fullScreen=new e.vpe,this.toggleVideo=new e.vpe,this.showVideoPopUp=!1,this.showSplashScreen=!0,this.hideContent=!1,this._window=window}showVideoInFullScreen(){this.fullScreen.emit(!0)}ngOnInit(){this.sharedData.apiToken=localStorage.getItem("apiToken"),this.getUser().then(t=>{},t=>{console.error(t)})}ngAfterViewInit(){let t=this;this.customKeyboardEventVerticalContainer=function(c){t.setKeyboardActionsInButtonsVerticalContainer(c)},this.customKeyboardEventVerticalHorizontalContainer=function(c){t.setKeyboardActionsSectionVerticalButtonsHorizontal(c,t.principalContainer,t.menuContainer,t.ref)},this.menuContainer.nativeElement.addEventListener("keydown",this.customKeyboardEventVerticalContainer),this.principalContainer.nativeElement.addEventListener("keydown",this.customKeyboardEventVerticalHorizontalContainer)}logOut(){this.sharedData.currentProfile=void 0,this.sharedData.userData=void 0,this.sharedData.apiToken=void 0,this.sharedData.listProfiles=[],localStorage.removeItem("apiToken"),this.router.navigate([{outlets:{rostp:["logintv"]}}],{skipLocationChange:!1})}onClickHeader(t){}onClickBody(){this.focusContainer(this.principalContainer.nativeElement,this.ref)}toogleMenu(){this.ref.detectChanges()}setKeyboardActionsInButtonsVerticalContainer(t){var r=t.keyCode;let c=Array.from(this.menuContainer.nativeElement.getElementsByTagName("button")),g=c.length,v=c.findIndex(x=>x.id==this.sharedData.currentSelectedElement.id);if(39==r){let Y=Array.from(this.principalContainer.nativeElement.querySelectorAll("section"))[0];this.sharedData.currentActiveSection=Y;let Me=Array.from(Y.querySelectorAll("button"))[0];this.sharedData.currentSelectedElement=Me,Me.focus()}if(40==r){let x=v+1;if(x<g){let Y=c[x];Y.focus(),this.sharedData.currentSelectedElement=Y,this.ref.detectChanges()}}if(38==r){let x=v-1;if(x>=0){let Y=c[x];Y.focus(),this.sharedData.currentSelectedElement=Y,this.ref.detectChanges()}else{let Y=Array.from(document.getElementsByTagName("header"));if(Y&&Y.length>0){let ie=Y[0],Me=Array.from(ie.querySelectorAll("input, button"));if(Me&&Me.length>0){this.sharedData.currentActiveSection=ie;let Re=Me[0];this.sharedData.currentSelectedElement=Re,Re.focus()}}}}}onClickMenuOption(t){this.selectedMenuOption=t,this[t.method]()}refresh(){this.selectedMenuOption&&this[this.selectedMenuOption.method](),this.ref.detectChanges()}ShowSeries(){this.itemViewData=void 0,this.title="Series de TV",this.currentMediaTypeID=ae.DD.TvSerie,this.showHorizontalItemList()}ShowMovies(){this.itemViewData=void 0,this.title="Pel\xedculas",this.currentMediaTypeID=ae.DD.Movie,this.showHorizontalItemList()}ShowSearch(){this.itemViewData=void 0,this.title=void 0,this.currentMediaTypeID=void 0,this.showVerticalItemList()}ShowInitial(){this.title=void 0,this.itemViewData=void 0,this.currentMediaTypeID=void 0,this.showHorizontalItemList()}closeVideo(){this.sharedData.currentVideo=void 0,this.showHorizontalItemList(),this.toggleVideo.emit(!1)}showHorizontalItemList(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.ref.detectChanges(),this.router.navigate([{outlets:{rohtp:["hilp"]}}],{relativeTo:this.route,skipLocationChange:!0})}showVerticalItemList(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([{outlets:{rohtp:["svtp"]}}],{relativeTo:this.route,skipLocationChange:!0})}showItemView(){this.hideContent=!0,this.ref.detectChanges(),this.hideContent=!1,this.router.navigate([{outlets:{rohtp:["ivp"]}}],{relativeTo:this.route,skipLocationChange:!0})}onActivate(t){let r=this;t instanceof dl.j&&(t.currentMediaTypeID=this.currentMediaTypeID,t.title=this.title,t.toggleVideo.subscribe(c=>{r.toggleVideo.emit(c)}),t.focus.subscribe(c=>{this.focusInElementInContainer(r.principalContainer.nativeElement,r.ref)}),t.showItemView.subscribe(c=>{r.itemViewData=c,r.showItemView()})),t instanceof pv.c&&t.showItemView.subscribe(c=>{r.itemViewData=c,r.showItemView()}),t instanceof oa.e&&(t.detail=r.itemViewData,t.toggleVideo.subscribe(c=>{r.toggleVideo.emit(c)}),r.ref.detectChanges(),r.focusInElementInContainer(this.principalContainer.nativeElement,this.ref))}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(He.C),e.Y36(R.gz),e.Y36(R.F0),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-main-tv"]],viewQuery:function(t,r){if(1&t&&(e.Gf(Rp,5),e.Gf(Lh,5)),2&t){let c;e.iGM(c=e.CRH())&&(r.menuContainer=c.first),e.iGM(c=e.CRH())&&(r.principalContainer=c.first)}},outputs:{fullScreen:"fullScreen",toggleVideo:"toggleVideo"},features:[e.qOj],decls:13,vars:10,consts:[[1,"sinovad-page-container"],[1,"sinovad-menu-body-container"],["menuBodyContainer",""],["menu",""],["id","menuContainer","tabindex","0",1,"sinovad-menu-container",3,"click"],["menuContainer",""],[3,"showProfiles","selectOption",4,"ngIf"],["id","bodyContainer","tabindex","0",1,"sinovad-body-container",3,"click"],["principalContainer",""],[3,"ngIf"],["class","sinovad-container-video",4,"ngIf"],[4,"ngIf"],[3,"showProfiles","selectOption"],["name","rohtp",1,"small",3,"activate"],[1,"sinovad-container-video"],[3,"ngClass","builderVideo","fullscreen","outputCloseVideo"]],template:function(t,r){if(1&t){const c=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1,2),e.TgZ(3,"div",null,3),e.TgZ(5,"section",4,5),e.NdJ("click",function(){e.CHM(c);const v=e.MAs(6);return r.focusContainer(v,r.ref)}),e.YNc(7,Fh,1,0,"app-sidebar-tv",6),e.qZA(),e.qZA(),e.TgZ(8,"section",7,8),e.NdJ("click",function(){return r.onClickBody()}),e.YNc(10,l_,1,0,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,Bh,2,4,"section",10),e.YNc(12,Np,1,0,"app-splash-screen",11)}if(2&t){const c=e.MAs(4);e.xp6(1),e.Udp("height","100%"),e.xp6(4),e.Udp("height","100%"),e.xp6(2),e.Q6J("ngIf",r.sharedData.userData),e.xp6(1),e.Udp("width","calc(100% - "+c.offsetWidth+"px)"),e.xp6(2),e.Q6J("ngIf",!r.hideContent),e.xp6(1),e.Q6J("ngIf",r.sharedData.currentVideo),e.xp6(1),e.Q6J("ngIf",r.showSplashScreen)}},directives:[V.O5,Lu,R.lC,Ih,V.mk,xh],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-module-container[_ngcontent-%COMP%]{border-top:1px solid #dedede}.sinovad-container-video[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;z-index:1054;display:flex;align-items:center;justify-content:center;background:black;top:0;left:0}.sinovad-page-container[_ngcontent-%COMP%]{display:block;position:absolute;width:100%;height:100%}.sinovad-header-container[_ngcontent-%COMP%]{height:60px;background:rgba(0,0,0,.15)}.sinovad-menu-body-container[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.sinovad-menu-container[_ngcontent-%COMP%]{width:200px;display:block;background:black;overflow-y:auto}.sinovad-body-container[_ngcontent-%COMP%]{display:block;height:100%}.small[_ngcontent-%COMP%]   .sinovad-body-container[_ngcontent-%COMP%]{width:100%!important}.small[_ngcontent-%COMP%]   .sinovad-menu-container[_ngcontent-%COMP%]{position:absolute;z-index:999}"]}),f})();const u_=["loginFormContainer"];function Lp(f,n){1&f&&(e.TgZ(0,"div",19),e.TgZ(1,"div",20),e._UZ(2,"div"),e._UZ(3,"div"),e._UZ(4,"div"),e._UZ(5,"div"),e._UZ(6,"div"),e._UZ(7,"div"),e._UZ(8,"div"),e._UZ(9,"div"),e._UZ(10,"div"),e._UZ(11,"div"),e._UZ(12,"div"),e._UZ(13,"div"),e.qZA(),e.qZA())}const Fp=function(f){return{small:f}},kp=[{path:"maintv",component:c_,outlet:"rostp",loadChildren:()=>w.e(200).then(w.bind(w,6200)).then(f=>f.MainTvPageModule)},{path:"logintv",outlet:"rostp",component:(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y){super(r,v,x,Y),this.router=t,this.restProvider=r,this.ref=c,this.http=g,this.events=v,this.domSanitizer=x,this.sharedData=Y,this._window=window,this.showLoading=!1,this.user=new ra}ngOnInit(){}ngOnDestroy(){this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent)}ngAfterViewInit(){this.initializeLoginViewControls()}initializeLoginViewControls(){this.customKeyboardControlsEvent&&this.loginFormContainer.nativeElement.removeEventListener("keydown",this.customKeyboardControlsEvent),this.focusFullScreenContainer(this.loginFormContainer.nativeElement,this.ref);let t=this;this.customKeyboardControlsEvent=function(c){t.setKeyboardActionsFullScreenPage(c,t.loginFormContainer.nativeElement,t.ref)},this.loginFormContainer.nativeElement.addEventListener("keydown",this.customKeyboardControlsEvent)}login(){this.showLoading=!0,this.restProvider.executeSinovadApiService(ae.yw.POST,"/users/Login",this.user).then(t=>{localStorage.setItem("apiToken",t.Data),this.router.navigate([{outlets:{rostp:["maintv"]}}],{skipLocationChange:!1})},t=>{this.showLoading=!1,this.errorMessage=t,console.error(t)})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.F0),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-login-tv"]],viewQuery:function(t,r){if(1&t&&e.Gf(u_,5),2&t){let c;e.iGM(c=e.CRH())&&(r.loginFormContainer=c.first)}},features:[e.qOj],decls:32,vars:13,consts:[["id","sinovad-form-container","tabindex","0",1,"sinovad-container",3,"ngClass"],["loginFormContainer",""],[1,"sinovad-login-form-content"],[1,"sinovad-logo-container"],[3,"src"],[1,"sinovad-login-title-container"],["id","sinovad-form-container-UserName-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],[1,"sinovad-form-caption-input-content"],[1,"sinovad-login-form-caption-container"],[1,"sinovad-form-textinput-container"],["id","UserName-input","type","text",3,"ngModel","ngModelChange"],["UserName",""],["id","sinovad-form-container-password-section","tabindex","0",1,"sinovad-login-form-caption-input-container"],["id","password-input","type","password",3,"ngModel","ngModelChange"],["password",""],["id","sinovad-form-container-button-section","tabindex","0",1,"sinovad-login-form-button-section"],["id","log-in-button",1,"sinovad-btn-enter",3,"click"],[1,"sinovad-login-form-error-message-container"],["class","sinovad-spinner-container",4,"ngIf"],[1,"sinovad-spinner-container"],[1,"lds-spinner"]],template:function(t,r){1&t&&(e.TgZ(0,"section",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e._UZ(5,"img",4),e.ALo(6,"async"),e.ALo(7,"formatDataPipe"),e.qZA(),e.TgZ(8,"div",5),e._uU(9," Inicia sesi\xf3n "),e.qZA(),e.TgZ(10,"section",6),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"span"),e._uU(14," Usuario "),e.qZA(),e.qZA(),e.TgZ(15,"div",9),e.TgZ(16,"input",10,11),e.NdJ("ngModelChange",function(g){return r.user.UserName=g}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"section",12),e.TgZ(19,"div",7),e.TgZ(20,"div",8),e.TgZ(21,"span"),e._uU(22," Contrase\xf1a "),e.qZA(),e.qZA(),e.TgZ(23,"div",9),e.TgZ(24,"input",13,14),e.NdJ("ngModelChange",function(g){return r.user.Password=g}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"section",15),e.TgZ(27,"button",16),e.NdJ("click",function(){return r.login()}),e._uU(28,"INGRESAR"),e.qZA(),e.qZA(),e.TgZ(29,"div",17),e._uU(30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(31,Lp,14,0,"div",18)),2&t&&(e.Q6J("ngClass",e.VKq(11,Fp,r.isSmallDevice())),e.xp6(5),e.Q6J("src",e.lcZ(6,6,e.xi3(7,8,"sinovad-stream-large-logo.png","GetImageURLByKey")),e.LSH),e.xp6(11),e.Q6J("ngModel",r.user.UserName),e.xp6(8),e.Q6J("ngModel",r.user.Password),e.xp6(6),e.hij(" ",r.errorMessage," "),e.xp6(1),e.Q6J("ngIf",r.showLoading))},directives:[V.mk,Q.Fj,Q.JJ,Q.On,V.O5],pipes:[V.Ov,qr.A],styles:['[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:black}button[_ngcontent-%COMP%]{outline:none!important;cursor:pointer!important;box-sizing:border-box!important}.sinovad-container[_ngcontent-%COMP%]{width:100%;height:100%;color:#fff;position:absolute;align-items:center;justify-content:center;display:flex}.sinovad-logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:500px}.sinovad-login-form-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:60px;padding:10px 15px;cursor:pointer;height:60px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-back-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:unset;width:100%;height:100%}.sinovad-login-form-content[_ngcontent-%COMP%]{color:#fff;padding:40px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]{height:80px;display:flex;align-items:center;justify-content:center}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:100%;cursor:pointer;padding:10px;text-align:center;border-radius:5px;font-size:30px;opacity:.8}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-enter[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   .sinovad-btn-recover[_ngcontent-%COMP%]{background-color:#2e303d;color:#fff}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus-visible{opacity:1;padding:12px}.sinovad-login-form-content[_ngcontent-%COMP%]   .sinovad-login-form-button-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{opacity:1;padding:12px}.sinovad-login-title-container[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:40px;font-weight:700;margin-bottom:20px}.sinovad-login-form-caption-input-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.sinovad-form-caption-input-content[_ngcontent-%COMP%]{width:100%}.sinovad-login-form-caption-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:30px;margin-bottom:4px}.sinovad-form-textinput-container[_ngcontent-%COMP%]{display:block;color:#000}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border-radius:5px;padding:10px;color:#fff;outline:none;background:lightslategrey;border:none;font-size:30px;opacity:.8;border:2px solid transparent}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#fff}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{opacity:1;border:2px solid white}.sinovad-form-textinput-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{opacity:1;border:2px solid white}.sinovad-login-form-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:50px}.sinovad-login-form-button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:30px;border:1px solid #dedede;border-radius:5px;padding-left:10px;padding-right:10px}.sinovad-login-form-error-message-container[_ngcontent-%COMP%]{color:red;text-align:center;font-size:40px;white-space:pre-line}.sinovad-spinner-container[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:center;z-index:999;justify-content:center;background:rgba(0,0,0,.5)}.lds-spinner[_ngcontent-%COMP%]{color:official;display:inline-block;position:relative;width:80px;height:80px}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{transform-origin:40px 40px;animation:lds-spinner 1.2s linear infinite}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{content:" ";display:block;position:absolute;top:3px;left:37px;width:6px;height:18px;border-radius:20%;background:#fff}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0);animation-delay:-1.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){transform:rotate(30deg);animation-delay:-1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){transform:rotate(60deg);animation-delay:-.9s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){transform:rotate(90deg);animation-delay:-.8s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){transform:rotate(120deg);animation-delay:-.7s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){transform:rotate(150deg);animation-delay:-.6s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){transform:rotate(180deg);animation-delay:-.5s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){transform:rotate(210deg);animation-delay:-.4s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){transform:rotate(240deg);animation-delay:-.3s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){transform:rotate(270deg);animation-delay:-.2s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){transform:rotate(300deg);animation-delay:-.1s}.lds-spinner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){transform:rotate(330deg);animation-delay:0s}@keyframes lds-spinner{0%{opacity:1}to{opacity:0}}']}),f})(),loadChildren:()=>w.e(460).then(w.bind(w,7460)).then(f=>f.LoginTvPageModule)}];let Uh=(()=>{class f{}return f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[[i.b2,V.ez,Q.u5,de.m,Q.UX,R.Bz.forRoot(kp)]]}),f})();const Bp=["mainContainer"],Up=function(f){return{small:f}};let jh=(()=>{class f extends Pe.X{constructor(t,r,c,g,v,x,Y,ie){super(c,x,Y,ie),this.route=t,this.router=r,this.restProvider=c,this.ref=g,this.http=v,this.events=x,this.domSanitizer=Y,this.sharedData=ie}ngOnInit(){window.configurationData&&(this.sharedData.configurationData=window.configurationData),localStorage.getItem("apiToken")?this.router.navigate([{outlets:{rostp:["maintv"]}}],{relativeTo:this.route,skipLocationChange:!0}):this.router.navigate([{outlets:{rostp:["logintv"]}}],{relativeTo:this.route,skipLocationChange:!0})}onActivate(t){let r=this;t instanceof c_&&t.fullScreen.subscribe(c=>{r.showPageInFullScreen()})}showPageInFullScreen(){if(!document.fullscreenElement){var t=this.mainContainer.nativeElement;t.requestFullScreen?t.requestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.mozRequestFullScreen&&t.mozRequestFullScreen()}}ngAfterViewInit(){let t=this;window.addEventListener("click",function(g){t.showPageInFullScreen()})}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(R.gz),e.Y36(R.F0),e.Y36(He.C),e.Y36(e.sBO),e.Y36(C.eN),e.Y36(Le.n),e.Y36(i.H7),e.Y36(ye.g))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-sinovad-tv"]],viewQuery:function(t,r){if(1&t&&e.Gf(Bp,5),2&t){let c;e.iGM(c=e.CRH())&&(r.mainContainer=c.first)}},features:[e.qOj],decls:3,vars:3,consts:[["id","sinovadMainContainer",1,"sinovad-main-container",3,"ngClass"],["mainContainer",""],["name","rostp",3,"activate"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0,1),e.TgZ(2,"router-outlet",2),e.NdJ("activate",function(g){return r.onActivate(g)}),e.qZA(),e.qZA()),2&t&&e.Q6J("ngClass",e.VKq(1,Up,r.isSmallDevice()))},directives:[V.mk,R.lC],styles:["[_nghost-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}.sinovad-main-container[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background:#1F212B;overflow-y:hidden}"]}),f})(),jp=(()=>{class f{constructor(t){this.injector=t}ngDoBootstrap(){const t=q(Dp,{injector:this.injector});customElements.define("app-sinovad-web",t);const r=q(jh,{injector:this.injector});customElements.define("app-sinovad-tv",r)}}return f.\u0275fac=function(t){return new(t||f)(e.LFG(e.zs3))},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({providers:[{provide:V.mr,useValue:"/"}],imports:[[i.b2,Q.u5,de.m,C.JF,Ku,Uh,j]]}),f})();(0,e.G48)(),i.q6().bootstrapModule(jp).catch(f=>console.error(f))},7065:(kn,Ge,w)=>{"use strict";w.d(Ge,{A:()=>R});var i=w(4893),e=w(2313),C=w(2330);let R=(()=>{class U{constructor(F,D){this.domSanitizer=F,this.sharedData=D}transform(F,...D){return new Promise((h,u)=>{let _;switch(null!=D[0]?D[0]:""){case"GetImageURLByKey":null!=F&&""!=F&&(_=this.sharedData.configurationData.developerMode?"assets/icon/"+F:this.sharedData.urlSinovadCdn+"/assets/icon/"+F,h(_));break;case"GetAvatarImageURLByProfileId":null!=F&&""!=F&&fetch(this.sharedData.urlSinovadStreamWebApi+"/api/v1/documents/GetAvatarProfile/"+F).then(k=>k.blob()).then(k=>{_=this.domSanitizer.bypassSecurityTrustUrl(URL.createObjectURL(k)),h(_)});break;case"GetSoundUrlByKey":null!=F&&""!=F&&(_=this.sharedData.configurationData.developerMode?"assets/sound/"+F:this.sharedData.urlSinovadCdn+"/assets/sound/"+F,h(_))}})}}return U.\u0275fac=function(F){return new(F||U)(i.Y36(e.H7,16),i.Y36(C.g,16))},U.\u0275pipe=i.Yjl({name:"formatDataPipe",type:U,pure:!0}),U})()},1085:(kn,Ge,w)=>{"use strict";w.d(Ge,{n:()=>C});var i=w(7579),e=w(4893);let C=(()=>{class R{constructor(){this.subjectEvent=new i.x}publish(j,F){this.subjectEvent.next({keyEvent:j,params:F})}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},2571:(kn,Ge,w)=>{"use strict";w.d(Ge,{C:()=>U});var i=w(520),e=w(4322),C=w(4893),R=w(2330);let U=(()=>{class j{constructor(D,h){this.http=D,this.sharedData=h}performExecuteMethod(D,h,u){return new Promise((p,_)=>{let b={responseType:"text"};if(this.sharedData.apiToken){const L=new i.WM({"Content-Type":"application/json",Authorization:"Bearer "+this.sharedData.apiToken});b.headers=L}D==e.yw.GET&&this.http.get(h,b).subscribe(k=>{p(k)},k=>{_(k)}),D==e.yw.POST&&this.http.post(h,u,b).subscribe(k=>{p(k)},k=>{_(k)}),D==e.yw.PUT&&this.http.put(h,u,b).subscribe(k=>{p(k)},k=>{_(k)}),D==e.yw.DELETE&&this.http.delete(h,b).subscribe(k=>{p(k)},k=>{_(k)})})}executeSinovadApiService(D,h,u){let p=this.sharedData.urlSinovadStreamWebApi+"/api/v1"+h;return new Promise((_,b)=>{this.performExecuteMethod(D,p,u).then(k=>{_(JSON.parse(k))},k=>{let L=k;if(null!=k.error){L=k.error;try{var B=JSON.parse(L);if(B.errors){let P=B.errors,y=[];Object.keys(P).map(S=>{var E=P[S].join("\n");y.push(E)}),L=y.join("\n")}else B.Errors?L=B.Errors.map(P=>P.ErrorMessage).join("\n"):B.Message&&(L=B.Message)}catch(P){}}401==k.status&&this.sharedData.apiToken&&(this.sharedData.apiToken=void 0,localStorage.removeItem("apiToken"),window.location.href="/"),console.error(L),b(L)})})}executeSinovadStreamServerService(D,h,u){if(this.sharedData.selectedMediaServer){let p=this.sharedData.selectedMediaServer.Url+h;return new Promise((_,b)=>{this.performExecuteMethod(D,p,u).then(k=>{_(k)},k=>{console.error(k),b(k)})})}}executeHttpMethodByUrl(D,h,u){return new Promise((p,_)=>{this.performExecuteMethod(D,h,u).then(b=>{p(b)},b=>{_(b)})})}executeHttpPostMethodWithFormData(D,h){let u=this.sharedData.urlSinovadStreamWebApi+"/api/v1"+D;return new Promise((p,_)=>{let b={responseType:"text"};if(this.sharedData.apiToken){const L=new i.WM({Accept:"*/*",Authorization:"Bearer "+this.sharedData.apiToken});b.headers=L}this.http.post(u,h,b).subscribe(k=>{p(k)},k=>{_(k)})})}}return j.\u0275fac=function(D){return new(D||j)(C.LFG(i.eN),C.LFG(R.g))},j.\u0275prov=C.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})()},2330:(kn,Ge,w)=>{"use strict";w.d(Ge,{g:()=>C});class i{}var e=w(4893);let C=(()=>{class R{constructor(){this.urlSinovadStreamWebApi="https://streamapi.sinovad.com",this.urlSinovadCdn="https://resources.sinovad.com/stream/web",this.originalUrlImagesMovieDataBase="https://image.tmdb.org/t/p/w600_and_h900_bestv2",this.urlEpisodeDataBase="https://www.themoviedb.org/t/p/w454_and_h254_bestv2",this.listProcessGUIDs=[],this.configurationData=new i,this.listProfiles=[],this.listMenus=[],this.pageNotFoundShowing=!1,this.mediaServers=[]}}return R.\u0275fac=function(j){return new(j||R)},R.\u0275prov=e.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})()},5782:(kn,Ge,w)=>{"use strict";w.d(Ge,{m:()=>e});var i=w(4893);let e=(()=>{class C{}return C.\u0275fac=function(U){return new(U||C)},C.\u0275mod=i.oAB({type:C}),C.\u0275inj=i.cJS({providers:[],imports:[[]]}),C})()},6059:(kn,Ge,w)=>{"use strict";Ge.Q=void 0;const e=w(2738),C=w(2877);Ge.Q=U=>U.startsWith("WEBVTT")?C.vttParser(U):e.srtParser(U)},2738:(kn,Ge,w)=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.srtParser=void 0;const i=w(9522),e=w(624),R=F=>{let h,u,p,D=F.split(":");return 2===D.length?[u,p]=D:[h,u,p]=D,parseInt(p.replace(",",""),10)+60*parseInt(u,10)*1e3+60*(h?parseInt(h,10):0)*60*1e3},U=()=>({start(F){let D="ID",h={tokens:F.split(/\n/),pos:0,result:[],current:{}};for(;"FINISH"!==D;){const u=this[D](h);h=u.params,D=u.next}return h.result},ID(F){const{tokens:D,pos:h,current:u}=F;if(D.length<=h)return{next:"FINISH",params:F};if(e.isBlank(D[h]))return{next:"ID",params:po(go({},F),{pos:h+1})};const p=D[h].includes("--\x3e");return u.id=p?"":D[h],{next:"TIME_LINE",params:po(go({},F),{current:u,tokens:D,pos:p?h:h+1})}},TIME_LINE(F){const{tokens:D,pos:h,current:u}=F,p=D[h],[_,b]=p.split("--\x3e");return u.from=R(_),u.to=R(b),{next:"TEXT",params:po(go({},F),{current:u,pos:h+1})}},TEXT(F){const{tokens:D,pos:h,current:u}=F;return D.length<=h?{next:"FINISH",params:F}:(u.text=D[h],{next:"MULTI_LINE_TEXT",params:po(go({},F),{current:u,pos:h+1})})},MULTI_LINE_TEXT(F){const{tokens:D,pos:h,current:u}=F;return D.length<=h?{next:"FINISH",params:F}:e.isBlank(D[h])?{next:"FIN_ENTRY",params:F}:(u.text=`${u.text}\n${D[h]}`,{next:"MULTI_LINE_TEXT",params:po(go({},F),{current:u,pos:h+1})})},FIN_ENTRY(F){const{pos:D,current:h,result:u}=F;if(!i.isEntryFromPartial(h))throw new Error(`Parsing error current not complete ${JSON.stringify(h)}`);return u.push(h),{next:"ID",params:po(go({},F),{current:{},pos:D+1})}},FINISH:F=>({next:"FINISH",params:F})});Ge.srtParser=F=>({entries:U().start(F)})},9522:(kn,Ge)=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.isEntryFromPartial=void 0,Ge.isEntryFromPartial=i=>"string"==typeof i.id&&"number"==typeof i.from&&"number"==typeof i.to&&"string"==typeof i.text},624:(kn,Ge)=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.isBlank=void 0,Ge.isBlank=i=>!i||/^\s*$/.test(i)},2877:(kn,Ge,w)=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.vttParser=void 0;const i=w(9522),e=w(624),R=F=>{let h,u,p,D=F.split(":");return 2===D.length?[u,p]=D:[h,u,p]=D,parseInt(p.replace(".",""),10)+60*parseInt(u,10)*1e3+60*(h?parseInt(h,10):0)*60*1e3},U=()=>({start(F){let D="HEADER",h={tokens:F.split(/\n/),pos:0,result:[],current:{}};for(;"FINISH"!==D;){const u=this[D](h);h=u.params,D=u.next}return h.result},HEADER:F=>({next:"ID_OR_NOTE_OR_STYLE",params:po(go({},F),{pos:F.pos+1})}),ID_OR_NOTE_OR_STYLE(F){const{tokens:D,pos:h}=F;return D.length<=h?{next:"FINISH",params:F}:e.isBlank(D[h])?{next:"ID_OR_NOTE_OR_STYLE",params:po(go({},F),{pos:h+1})}:D[h].toUpperCase().includes("NOTE")?{next:"NOTE",params:F}:D[h].toUpperCase().includes("STYLE")?{next:"STYLE",params:F}:{next:"ID",params:F}},STYLE(F){const{tokens:D,pos:h}=F;return e.isBlank(D[h])?{next:"ID_OR_NOTE_OR_STYLE",params:po(go({},F),{pos:h+1})}:{next:"STYLE",params:po(go({},F),{pos:h+1})}},NOTE(F){const{tokens:D,pos:h}=F;return e.isBlank(D[h])?{next:"ID_OR_NOTE_OR_STYLE",params:po(go({},F),{pos:h+1})}:{next:"STYLE",params:po(go({},F),{pos:h+1})}},ID(F){const{tokens:D,pos:h,current:u}=F;if(D.length<=h)return{next:"FINISH",params:F};if(e.isBlank(D[h]))return{next:"ID",params:po(go({},F),{pos:h+1})};const p=D[h].includes("--\x3e");return u.id=p?"":D[h],{next:"TIME_LINE",params:po(go({},F),{current:u,tokens:D,pos:p?h:h+1})}},TIME_LINE(F){const{tokens:D,pos:h,current:u}=F,p=D[h],[_,b]=p.split("--\x3e");return u.from=R(_),u.to=R(b),{next:"TEXT",params:po(go({},F),{current:u,pos:h+1})}},TEXT(F){const{tokens:D,pos:h,current:u}=F;return D.length<=h?{next:"FINISH",params:F}:(u.text=D[h],{next:"MULTI_LINE_TEXT",params:po(go({},F),{current:u,pos:h+1})})},MULTI_LINE_TEXT(F){const{tokens:D,pos:h,current:u}=F;return D.length<=h?{next:"FINISH",params:F}:e.isBlank(D[h])?{next:"FIN_ENTRY",params:F}:(u.text=`${u.text}\n${D[h]}`,{next:"MULTI_LINE_TEXT",params:po(go({},F),{current:u,pos:h+1})})},FIN_ENTRY(F){const{pos:D,current:h,result:u}=F;if(!i.isEntryFromPartial(h))throw new Error(`Parsing error current not complete ${JSON.stringify(h)}`);return u.push(h),{next:"ID_OR_NOTE_OR_STYLE",params:po(go({},F),{current:{},pos:D+1})}},FINISH:F=>({next:"FINISH",params:F})});Ge.vttParser=F=>({entries:U().start(F)})},5343:(kn,Ge)=>{"use strict";Ge.byteLength=function F(b){var k=j(b),B=k[1];return 3*(k[0]+B)/4-B},Ge.toByteArray=function h(b){var k,E,L=j(b),B=L[0],O=L[1],P=new e(function D(b,k,L){return 3*(k+L)/4-L}(0,B,O)),y=0,S=O>0?B-4:B;for(E=0;E<S;E+=4)k=i[b.charCodeAt(E)]<<18|i[b.charCodeAt(E+1)]<<12|i[b.charCodeAt(E+2)]<<6|i[b.charCodeAt(E+3)],P[y++]=k>>16&255,P[y++]=k>>8&255,P[y++]=255&k;return 2===O&&(k=i[b.charCodeAt(E)]<<2|i[b.charCodeAt(E+1)]>>4,P[y++]=255&k),1===O&&(k=i[b.charCodeAt(E)]<<10|i[b.charCodeAt(E+1)]<<4|i[b.charCodeAt(E+2)]>>2,P[y++]=k>>8&255,P[y++]=255&k),P},Ge.fromByteArray=function _(b){for(var k,L=b.length,B=L%3,O=[],P=16383,y=0,S=L-B;y<S;y+=P)O.push(p(b,y,y+P>S?S:y+P));return 1===B?O.push(w[(k=b[L-1])>>2]+w[k<<4&63]+"=="):2===B&&O.push(w[(k=(b[L-2]<<8)+b[L-1])>>10]+w[k>>4&63]+w[k<<2&63]+"="),O.join("")};for(var w=[],i=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",R=0,U=C.length;R<U;++R)w[R]=C[R],i[C.charCodeAt(R)]=R;function j(b){var k=b.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var L=b.indexOf("=");return-1===L&&(L=k),[L,L===k?0:4-L%4]}function u(b){return w[b>>18&63]+w[b>>12&63]+w[b>>6&63]+w[63&b]}function p(b,k,L){for(var O=[],P=k;P<L;P+=3)O.push(u((b[P]<<16&16711680)+(b[P+1]<<8&65280)+(255&b[P+2])));return O.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3172:(kn,Ge,w)=>{"use strict";var e=w(5343),C=w(8461),R="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;Ge.lW=D,Ge.h2=50;var U=2147483647;function F(ne){if(ne>U)throw new RangeError('The value "'+ne+'" is invalid for option "size"');var z=new Uint8Array(ne);return Object.setPrototypeOf(z,D.prototype),z}function D(ne,z,te){if("number"==typeof ne){if("string"==typeof z)throw new TypeError('The "string" argument must be of type string. Received type number');return _(ne)}return h(ne,z,te)}function h(ne,z,te){if("string"==typeof ne)return function b(ne,z){if(("string"!=typeof z||""===z)&&(z="utf8"),!D.isEncoding(z))throw new TypeError("Unknown encoding: "+z);var te=0|S(ne,z),X=F(te),$=X.write(ne,z);return $!==te&&(X=X.slice(0,$)),X}(ne,z);if(ArrayBuffer.isView(ne))return function L(ne){if(ce(ne,Uint8Array)){var z=new Uint8Array(ne);return B(z.buffer,z.byteOffset,z.byteLength)}return k(ne)}(ne);if(null==ne)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne);if(ce(ne,ArrayBuffer)||ne&&ce(ne.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ce(ne,SharedArrayBuffer)||ne&&ce(ne.buffer,SharedArrayBuffer)))return B(ne,z,te);if("number"==typeof ne)throw new TypeError('The "value" argument must not be of type number. Received type number');var X=ne.valueOf&&ne.valueOf();if(null!=X&&X!==ne)return D.from(X,z,te);var $=function O(ne){if(D.isBuffer(ne)){var z=0|P(ne.length),te=F(z);return 0===te.length||ne.copy(te,0,0,z),te}return void 0!==ne.length?"number"!=typeof ne.length||De(ne.length)?F(0):k(ne):"Buffer"===ne.type&&Array.isArray(ne.data)?k(ne.data):void 0}(ne);if($)return $;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof ne[Symbol.toPrimitive])return D.from(ne[Symbol.toPrimitive]("string"),z,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ne)}function u(ne){if("number"!=typeof ne)throw new TypeError('"size" argument must be of type number');if(ne<0)throw new RangeError('The value "'+ne+'" is invalid for option "size"')}function _(ne){return u(ne),F(ne<0?0:0|P(ne))}function k(ne){for(var z=ne.length<0?0:0|P(ne.length),te=F(z),X=0;X<z;X+=1)te[X]=255&ne[X];return te}function B(ne,z,te){if(z<0||ne.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(ne.byteLength<z+(te||0))throw new RangeError('"length" is outside of buffer bounds');var X;return X=void 0===z&&void 0===te?new Uint8Array(ne):void 0===te?new Uint8Array(ne,z):new Uint8Array(ne,z,te),Object.setPrototypeOf(X,D.prototype),X}function P(ne){if(ne>=U)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+U.toString(16)+" bytes");return 0|ne}function S(ne,z){if(D.isBuffer(ne))return ne.length;if(ArrayBuffer.isView(ne)||ce(ne,ArrayBuffer))return ne.byteLength;if("string"!=typeof ne)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ne);var te=ne.length,X=arguments.length>2&&!0===arguments[2];if(!X&&0===te)return 0;for(var $=!1;;)switch(z){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return He(ne).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*te;case"hex":return te>>>1;case"base64":return ae(ne).length;default:if($)return X?-1:He(ne).length;z=(""+z).toLowerCase(),$=!0}}function E(ne,z,te){var X=!1;if((void 0===z||z<0)&&(z=0),z>this.length||((void 0===te||te>this.length)&&(te=this.length),te<=0)||(te>>>=0)<=(z>>>=0))return"";for(ne||(ne="utf8");;)switch(ne){case"hex":return xe(this,z,te);case"utf8":case"utf-8":return V(this,z,te);case"ascii":return pe(this,z,te);case"latin1":case"binary":return me(this,z,te);case"base64":return se(this,z,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _e(this,z,te);default:if(X)throw new TypeError("Unknown encoding: "+ne);ne=(ne+"").toLowerCase(),X=!0}}function A(ne,z,te){var X=ne[z];ne[z]=ne[te],ne[te]=X}function I(ne,z,te,X,$){if(0===ne.length)return-1;if("string"==typeof te?(X=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),De(te=+te)&&(te=$?0:ne.length-1),te<0&&(te=ne.length+te),te>=ne.length){if($)return-1;te=ne.length-1}else if(te<0){if(!$)return-1;te=0}if("string"==typeof z&&(z=D.from(z,X)),D.isBuffer(z))return 0===z.length?-1:H(ne,z,te,X,$);if("number"==typeof z)return z&=255,"function"==typeof Uint8Array.prototype.indexOf?$?Uint8Array.prototype.indexOf.call(ne,z,te):Uint8Array.prototype.lastIndexOf.call(ne,z,te):H(ne,[z],te,X,$);throw new TypeError("val must be string, number or Buffer")}function H(ne,z,te,X,$){var Ze,K=1,oe=ne.length,Ce=z.length;if(void 0!==X&&("ucs2"===(X=String(X).toLowerCase())||"ucs-2"===X||"utf16le"===X||"utf-16le"===X)){if(ne.length<2||z.length<2)return-1;K=2,oe/=2,Ce/=2,te/=2}function Oe(xt,tt){return 1===K?xt[tt]:xt.readUInt16BE(tt*K)}if($){var st=-1;for(Ze=te;Ze<oe;Ze++)if(Oe(ne,Ze)===Oe(z,-1===st?0:Ze-st)){if(-1===st&&(st=Ze),Ze-st+1===Ce)return st*K}else-1!==st&&(Ze-=Ze-st),st=-1}else for(te+Ce>oe&&(te=oe-Ce),Ze=te;Ze>=0;Ze--){for(var et=!0,ct=0;ct<Ce;ct++)if(Oe(ne,Ze+ct)!==Oe(z,ct)){et=!1;break}if(et)return Ze}return-1}function ee(ne,z,te,X){te=Number(te)||0;var $=ne.length-te;X?(X=Number(X))>$&&(X=$):X=$;var K=z.length;X>K/2&&(X=K/2);for(var oe=0;oe<X;++oe){var Ce=parseInt(z.substr(2*oe,2),16);if(De(Ce))return oe;ne[te+oe]=Ce}return oe}function fe(ne,z,te,X){return W(He(z,ne.length-te),ne,te,X)}function ue(ne,z,te,X){return W(function Le(ne){for(var z=[],te=0;te<ne.length;++te)z.push(255&ne.charCodeAt(te));return z}(z),ne,te,X)}function be(ne,z,te,X){return W(ae(z),ne,te,X)}function q(ne,z,te,X){return W(function ye(ne,z){for(var te,X,K=[],oe=0;oe<ne.length&&!((z-=2)<0);++oe)X=(te=ne.charCodeAt(oe))>>8,K.push(te%256),K.push(X);return K}(z,ne.length-te),ne,te,X)}function se(ne,z,te){return e.fromByteArray(0===z&&te===ne.length?ne:ne.slice(z,te))}function V(ne,z,te){te=Math.min(ne.length,te);for(var X=[],$=z;$<te;){var Oe,Ze,st,et,K=ne[$],oe=null,Ce=K>239?4:K>223?3:K>191?2:1;if($+Ce<=te)switch(Ce){case 1:K<128&&(oe=K);break;case 2:128==(192&(Oe=ne[$+1]))&&(et=(31&K)<<6|63&Oe)>127&&(oe=et);break;case 3:Ze=ne[$+2],128==(192&(Oe=ne[$+1]))&&128==(192&Ze)&&(et=(15&K)<<12|(63&Oe)<<6|63&Ze)>2047&&(et<55296||et>57343)&&(oe=et);break;case 4:Ze=ne[$+2],st=ne[$+3],128==(192&(Oe=ne[$+1]))&&128==(192&Ze)&&128==(192&st)&&(et=(15&K)<<18|(63&Oe)<<12|(63&Ze)<<6|63&st)>65535&&et<1114112&&(oe=et)}null===oe?(oe=65533,Ce=1):oe>65535&&(X.push((oe-=65536)>>>10&1023|55296),oe=56320|1023&oe),X.push(oe),$+=Ce}return function Q(ne){var z=ne.length;if(z<=4096)return String.fromCharCode.apply(String,ne);for(var te="",X=0;X<z;)te+=String.fromCharCode.apply(String,ne.slice(X,X+=4096));return te}(X)}function pe(ne,z,te){var X="";te=Math.min(ne.length,te);for(var $=z;$<te;++$)X+=String.fromCharCode(127&ne[$]);return X}function me(ne,z,te){var X="";te=Math.min(ne.length,te);for(var $=z;$<te;++$)X+=String.fromCharCode(ne[$]);return X}function xe(ne,z,te){var X=ne.length;(!z||z<0)&&(z=0),(!te||te<0||te>X)&&(te=X);for(var $="",K=z;K<te;++K)$+=le[ne[K]];return $}function _e(ne,z,te){for(var X=ne.slice(z,te),$="",K=0;K<X.length-1;K+=2)$+=String.fromCharCode(X[K]+256*X[K+1]);return $}function Ie(ne,z,te){if(ne%1!=0||ne<0)throw new RangeError("offset is not uint");if(ne+z>te)throw new RangeError("Trying to access beyond buffer length")}function Te(ne,z,te,X,$,K){if(!D.isBuffer(ne))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>$||z<K)throw new RangeError('"value" argument is out of bounds');if(te+X>ne.length)throw new RangeError("Index out of range")}function ke(ne,z,te,X,$,K){if(te+X>ne.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function Ue(ne,z,te,X,$){return z=+z,te>>>=0,$||ke(ne,0,te,4),C.write(ne,z,te,X,23,4),te+4}function Fe(ne,z,te,X,$){return z=+z,te>>>=0,$||ke(ne,0,te,8),C.write(ne,z,te,X,52,8),te+8}!(D.TYPED_ARRAY_SUPPORT=function j(){try{var ne=new Uint8Array(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,Uint8Array.prototype),Object.setPrototypeOf(ne,z),42===ne.foo()}catch(te){return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}}),Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}}),D.poolSize=8192,D.from=function(ne,z,te){return h(ne,z,te)},Object.setPrototypeOf(D.prototype,Uint8Array.prototype),Object.setPrototypeOf(D,Uint8Array),D.alloc=function(ne,z,te){return function p(ne,z,te){return u(ne),ne<=0?F(ne):void 0!==z?"string"==typeof te?F(ne).fill(z,te):F(ne).fill(z):F(ne)}(ne,z,te)},D.allocUnsafe=function(ne){return _(ne)},D.allocUnsafeSlow=function(ne){return _(ne)},D.isBuffer=function(z){return null!=z&&!0===z._isBuffer&&z!==D.prototype},D.compare=function(z,te){if(ce(z,Uint8Array)&&(z=D.from(z,z.offset,z.byteLength)),ce(te,Uint8Array)&&(te=D.from(te,te.offset,te.byteLength)),!D.isBuffer(z)||!D.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===te)return 0;for(var X=z.length,$=te.length,K=0,oe=Math.min(X,$);K<oe;++K)if(z[K]!==te[K]){X=z[K],$=te[K];break}return X<$?-1:$<X?1:0},D.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},D.concat=function(z,te){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(0===z.length)return D.alloc(0);var X;if(void 0===te)for(te=0,X=0;X<z.length;++X)te+=z[X].length;var $=D.allocUnsafe(te),K=0;for(X=0;X<z.length;++X){var oe=z[X];if(ce(oe,Uint8Array))K+oe.length>$.length?D.from(oe).copy($,K):Uint8Array.prototype.set.call($,oe,K);else{if(!D.isBuffer(oe))throw new TypeError('"list" argument must be an Array of Buffers');oe.copy($,K)}K+=oe.length}return $},D.byteLength=S,D.prototype._isBuffer=!0,D.prototype.swap16=function(){var z=this.length;if(z%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<z;te+=2)A(this,te,te+1);return this},D.prototype.swap32=function(){var z=this.length;if(z%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<z;te+=4)A(this,te,te+3),A(this,te+1,te+2);return this},D.prototype.swap64=function(){var z=this.length;if(z%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<z;te+=8)A(this,te,te+7),A(this,te+1,te+6),A(this,te+2,te+5),A(this,te+3,te+4);return this},D.prototype.toLocaleString=D.prototype.toString=function(){var z=this.length;return 0===z?"":0===arguments.length?V(this,0,z):E.apply(this,arguments)},D.prototype.equals=function(z){if(!D.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z||0===D.compare(this,z)},D.prototype.inspect=function(){var z="",te=Ge.h2;return z=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(z+=" ... "),"<Buffer "+z+">"},R&&(D.prototype[R]=D.prototype.inspect),D.prototype.compare=function(z,te,X,$,K){if(ce(z,Uint8Array)&&(z=D.from(z,z.offset,z.byteLength)),!D.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(void 0===te&&(te=0),void 0===X&&(X=z?z.length:0),void 0===$&&($=0),void 0===K&&(K=this.length),te<0||X>z.length||$<0||K>this.length)throw new RangeError("out of range index");if($>=K&&te>=X)return 0;if($>=K)return-1;if(te>=X)return 1;if(this===z)return 0;for(var oe=(K>>>=0)-($>>>=0),Ce=(X>>>=0)-(te>>>=0),Oe=Math.min(oe,Ce),Ze=this.slice($,K),st=z.slice(te,X),et=0;et<Oe;++et)if(Ze[et]!==st[et]){oe=Ze[et],Ce=st[et];break}return oe<Ce?-1:Ce<oe?1:0},D.prototype.includes=function(z,te,X){return-1!==this.indexOf(z,te,X)},D.prototype.indexOf=function(z,te,X){return I(this,z,te,X,!0)},D.prototype.lastIndexOf=function(z,te,X){return I(this,z,te,X,!1)},D.prototype.write=function(z,te,X,$){if(void 0===te)$="utf8",X=this.length,te=0;else if(void 0===X&&"string"==typeof te)$=te,X=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(X)?(X>>>=0,void 0===$&&($="utf8")):($=X,X=void 0)}var K=this.length-te;if((void 0===X||X>K)&&(X=K),z.length>0&&(X<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var oe=!1;;)switch($){case"hex":return ee(this,z,te,X);case"utf8":case"utf-8":return fe(this,z,te,X);case"ascii":case"latin1":case"binary":return ue(this,z,te,X);case"base64":return be(this,z,te,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,z,te,X);default:if(oe)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),oe=!0}},D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},D.prototype.slice=function(z,te){var X=this.length;(z=~~z)<0?(z+=X)<0&&(z=0):z>X&&(z=X),(te=void 0===te?X:~~te)<0?(te+=X)<0&&(te=0):te>X&&(te=X),te<z&&(te=z);var $=this.subarray(z,te);return Object.setPrototypeOf($,D.prototype),$},D.prototype.readUintLE=D.prototype.readUIntLE=function(z,te,X){z>>>=0,te>>>=0,X||Ie(z,te,this.length);for(var $=this[z],K=1,oe=0;++oe<te&&(K*=256);)$+=this[z+oe]*K;return $},D.prototype.readUintBE=D.prototype.readUIntBE=function(z,te,X){z>>>=0,te>>>=0,X||Ie(z,te,this.length);for(var $=this[z+--te],K=1;te>0&&(K*=256);)$+=this[z+--te]*K;return $},D.prototype.readUint8=D.prototype.readUInt8=function(z,te){return z>>>=0,te||Ie(z,1,this.length),this[z]},D.prototype.readUint16LE=D.prototype.readUInt16LE=function(z,te){return z>>>=0,te||Ie(z,2,this.length),this[z]|this[z+1]<<8},D.prototype.readUint16BE=D.prototype.readUInt16BE=function(z,te){return z>>>=0,te||Ie(z,2,this.length),this[z]<<8|this[z+1]},D.prototype.readUint32LE=D.prototype.readUInt32LE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+16777216*this[z+3]},D.prototype.readUint32BE=D.prototype.readUInt32BE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),16777216*this[z]+(this[z+1]<<16|this[z+2]<<8|this[z+3])},D.prototype.readIntLE=function(z,te,X){z>>>=0,te>>>=0,X||Ie(z,te,this.length);for(var $=this[z],K=1,oe=0;++oe<te&&(K*=256);)$+=this[z+oe]*K;return $>=(K*=128)&&($-=Math.pow(2,8*te)),$},D.prototype.readIntBE=function(z,te,X){z>>>=0,te>>>=0,X||Ie(z,te,this.length);for(var $=te,K=1,oe=this[z+--$];$>0&&(K*=256);)oe+=this[z+--$]*K;return oe>=(K*=128)&&(oe-=Math.pow(2,8*te)),oe},D.prototype.readInt8=function(z,te){return z>>>=0,te||Ie(z,1,this.length),128&this[z]?-1*(255-this[z]+1):this[z]},D.prototype.readInt16LE=function(z,te){z>>>=0,te||Ie(z,2,this.length);var X=this[z]|this[z+1]<<8;return 32768&X?4294901760|X:X},D.prototype.readInt16BE=function(z,te){z>>>=0,te||Ie(z,2,this.length);var X=this[z+1]|this[z]<<8;return 32768&X?4294901760|X:X},D.prototype.readInt32LE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},D.prototype.readInt32BE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},D.prototype.readFloatLE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),C.read(this,z,!0,23,4)},D.prototype.readFloatBE=function(z,te){return z>>>=0,te||Ie(z,4,this.length),C.read(this,z,!1,23,4)},D.prototype.readDoubleLE=function(z,te){return z>>>=0,te||Ie(z,8,this.length),C.read(this,z,!0,52,8)},D.prototype.readDoubleBE=function(z,te){return z>>>=0,te||Ie(z,8,this.length),C.read(this,z,!1,52,8)},D.prototype.writeUintLE=D.prototype.writeUIntLE=function(z,te,X,$){z=+z,te>>>=0,X>>>=0,$||Te(this,z,te,X,Math.pow(2,8*X)-1,0);var oe=1,Ce=0;for(this[te]=255&z;++Ce<X&&(oe*=256);)this[te+Ce]=z/oe&255;return te+X},D.prototype.writeUintBE=D.prototype.writeUIntBE=function(z,te,X,$){z=+z,te>>>=0,X>>>=0,$||Te(this,z,te,X,Math.pow(2,8*X)-1,0);var oe=X-1,Ce=1;for(this[te+oe]=255&z;--oe>=0&&(Ce*=256);)this[te+oe]=z/Ce&255;return te+X},D.prototype.writeUint8=D.prototype.writeUInt8=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,1,255,0),this[te]=255&z,te+1},D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,2,65535,0),this[te]=255&z,this[te+1]=z>>>8,te+2},D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,2,65535,0),this[te]=z>>>8,this[te+1]=255&z,te+2},D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,4,4294967295,0),this[te+3]=z>>>24,this[te+2]=z>>>16,this[te+1]=z>>>8,this[te]=255&z,te+4},D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,4,4294967295,0),this[te]=z>>>24,this[te+1]=z>>>16,this[te+2]=z>>>8,this[te+3]=255&z,te+4},D.prototype.writeIntLE=function(z,te,X,$){if(z=+z,te>>>=0,!$){var K=Math.pow(2,8*X-1);Te(this,z,te,X,K-1,-K)}var oe=0,Ce=1,Oe=0;for(this[te]=255&z;++oe<X&&(Ce*=256);)z<0&&0===Oe&&0!==this[te+oe-1]&&(Oe=1),this[te+oe]=(z/Ce>>0)-Oe&255;return te+X},D.prototype.writeIntBE=function(z,te,X,$){if(z=+z,te>>>=0,!$){var K=Math.pow(2,8*X-1);Te(this,z,te,X,K-1,-K)}var oe=X-1,Ce=1,Oe=0;for(this[te+oe]=255&z;--oe>=0&&(Ce*=256);)z<0&&0===Oe&&0!==this[te+oe+1]&&(Oe=1),this[te+oe]=(z/Ce>>0)-Oe&255;return te+X},D.prototype.writeInt8=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,1,127,-128),z<0&&(z=255+z+1),this[te]=255&z,te+1},D.prototype.writeInt16LE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,2,32767,-32768),this[te]=255&z,this[te+1]=z>>>8,te+2},D.prototype.writeInt16BE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,2,32767,-32768),this[te]=z>>>8,this[te+1]=255&z,te+2},D.prototype.writeInt32LE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,4,2147483647,-2147483648),this[te]=255&z,this[te+1]=z>>>8,this[te+2]=z>>>16,this[te+3]=z>>>24,te+4},D.prototype.writeInt32BE=function(z,te,X){return z=+z,te>>>=0,X||Te(this,z,te,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[te]=z>>>24,this[te+1]=z>>>16,this[te+2]=z>>>8,this[te+3]=255&z,te+4},D.prototype.writeFloatLE=function(z,te,X){return Ue(this,z,te,!0,X)},D.prototype.writeFloatBE=function(z,te,X){return Ue(this,z,te,!1,X)},D.prototype.writeDoubleLE=function(z,te,X){return Fe(this,z,te,!0,X)},D.prototype.writeDoubleBE=function(z,te,X){return Fe(this,z,te,!1,X)},D.prototype.copy=function(z,te,X,$){if(!D.isBuffer(z))throw new TypeError("argument should be a Buffer");if(X||(X=0),!$&&0!==$&&($=this.length),te>=z.length&&(te=z.length),te||(te=0),$>0&&$<X&&($=X),$===X||0===z.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),z.length-te<$-X&&($=z.length-te+X);var K=$-X;return this===z&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(te,X,$):Uint8Array.prototype.set.call(z,this.subarray(X,$),te),K},D.prototype.fill=function(z,te,X,$){if("string"==typeof z){if("string"==typeof te?($=te,te=0,X=this.length):"string"==typeof X&&($=X,X=this.length),void 0!==$&&"string"!=typeof $)throw new TypeError("encoding must be a string");if("string"==typeof $&&!D.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(1===z.length){var K=z.charCodeAt(0);("utf8"===$&&K<128||"latin1"===$)&&(z=K)}}else"number"==typeof z?z&=255:"boolean"==typeof z&&(z=Number(z));if(te<0||this.length<te||this.length<X)throw new RangeError("Out of range index");if(X<=te)return this;var oe;if(te>>>=0,X=void 0===X?this.length:X>>>0,z||(z=0),"number"==typeof z)for(oe=te;oe<X;++oe)this[oe]=z;else{var Ce=D.isBuffer(z)?z:D.from(z,$),Oe=Ce.length;if(0===Oe)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(oe=0;oe<X-te;++oe)this[oe+te]=Ce[oe%Oe]}return this};var je=/[^+/0-9A-Za-z-_]/g;function He(ne,z){z=z||1/0;for(var te,X=ne.length,$=null,K=[],oe=0;oe<X;++oe){if((te=ne.charCodeAt(oe))>55295&&te<57344){if(!$){if(te>56319){(z-=3)>-1&&K.push(239,191,189);continue}if(oe+1===X){(z-=3)>-1&&K.push(239,191,189);continue}$=te;continue}if(te<56320){(z-=3)>-1&&K.push(239,191,189),$=te;continue}te=65536+($-55296<<10|te-56320)}else $&&(z-=3)>-1&&K.push(239,191,189);if($=null,te<128){if((z-=1)<0)break;K.push(te)}else if(te<2048){if((z-=2)<0)break;K.push(te>>6|192,63&te|128)}else if(te<65536){if((z-=3)<0)break;K.push(te>>12|224,te>>6&63|128,63&te|128)}else{if(!(te<1114112))throw new Error("Invalid code point");if((z-=4)<0)break;K.push(te>>18|240,te>>12&63|128,te>>6&63|128,63&te|128)}}return K}function ae(ne){return e.toByteArray(function Pe(ne){if((ne=(ne=ne.split("=")[0]).trim().replace(je,"")).length<2)return"";for(;ne.length%4!=0;)ne+="=";return ne}(ne))}function W(ne,z,te,X){for(var $=0;$<X&&!($+te>=z.length||$>=ne.length);++$)z[$+te]=ne[$];return $}function ce(ne,z){return ne instanceof z||null!=ne&&null!=ne.constructor&&null!=ne.constructor.name&&ne.constructor.name===z.name}function De(ne){return ne!=ne}var le=function(){for(var ne="0123456789abcdef",z=new Array(256),te=0;te<16;++te)for(var X=16*te,$=0;$<16;++$)z[X+$]=ne[te]+ne[$];return z}()},8377:kn=>{window,kn.exports=function(Ge){var w={};function i(e){if(w[e])return w[e].exports;var C=w[e]={i:e,l:!1,exports:{}};return Ge[e].call(C.exports,C,C.exports,i),C.l=!0,C.exports}return i.m=Ge,i.c=w,i.d=function(e,C,R){i.o(e,C)||Object.defineProperty(e,C,{enumerable:!0,get:R})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,C){if(1&C&&(e=i(e)),8&C||4&C&&"object"==typeof e&&e&&e.__esModule)return e;var R=Object.create(null);if(i.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:e}),2&C&&"string"!=typeof e)for(var U in e)i.d(R,U,function(j){return e[j]}.bind(null,U));return R},i.n=function(e){var C=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(C,"a",C),C},i.o=function(e,C){return Object.prototype.hasOwnProperty.call(e,C)},i.p="/dist/",i(i.s="./index.js")}({"./externals/base64.js":function(Ge,w,i){var R,U,j,F,D,e_encode=function(R){for(var U=[],j=0;j<R.length;++j){var F=R.charCodeAt(j);F<128?U.push(F):F<2048?(U.push(192|F>>6),U.push(128|63&F)):F<65536?(U.push(224|F>>12),U.push(128|63&F>>6),U.push(128|63&F)):(U.push(240|F>>18),U.push(128|63&F>>12),U.push(128|63&F>>6),U.push(128|63&F))}return U},e_decode=function(R){for(var U=[],j=0;j<R.length;){var F=R[j++];F<128||(F<224?(F=(31&F)<<6,F|=63&R[j++]):F<240?(F=(15&F)<<12,F|=(63&R[j++])<<6,F|=63&R[j++]):(F=(7&F)<<18,F|=(63&R[j++])<<12,F|=(63&R[j++])<<6,F|=63&R[j++])),U.push(String.fromCharCode(F))}return U.join("")},C={};R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U=function(u){for(var p=0,_=[],b=0|u.length/3;0<b--;){var k=(u[p]<<16)+(u[p+1]<<8)+u[p+2];p+=3,_.push(R.charAt(63&k>>18)),_.push(R.charAt(63&k>>12)),_.push(R.charAt(63&k>>6)),_.push(R.charAt(63&k))}return u.length-p==2?(_.push(R.charAt(63&(k=(u[p]<<16)+(u[p+1]<<8))>>18)),_.push(R.charAt(63&k>>12)),_.push(R.charAt(63&k>>6)),_.push("=")):u.length-p==1&&(_.push(R.charAt(63&(k=u[p]<<16)>>18)),_.push(R.charAt(63&k>>12)),_.push("==")),_.join("")},j=function(){for(var h=[],u=0;u<R.length;++u)h[R.charCodeAt(u)]=u;return h["=".charCodeAt(0)]=0,h}(),F=function(u){for(var p=0,_=[],b=0|u.length/4;0<b--;){var k=(j[u.charCodeAt(p)]<<18)+(j[u.charCodeAt(p+1)]<<12)+(j[u.charCodeAt(p+2)]<<6)+j[u.charCodeAt(p+3)];_.push(255&k>>16),_.push(255&k>>8),_.push(255&k),p+=4}return _&&("="==u.charAt(p-2)?(_.pop(),_.pop()):"="==u.charAt(p-1)&&_.pop()),_},D={encode:function(h){for(var u=[],p=0;p<h.length;++p)u.push(h.charCodeAt(p));return u},decode:function(h){for(var u=0;u<s.length;++u)a[u]=String.fromCharCode(a[u]);return a.join("")}},C.decodeArray=function(h){var u=F(h);return new Uint8Array(u)},C.encodeASCII=function(h){var u=D.encode(h);return U(u)},C.decodeASCII=function(h){var u=F(h);return D.decode(u)},C.encode=function(h){var u=e_encode(h);return U(u)},C.decode=function(h){var u=F(h);return e_decode(u)},w.decode=C.decode,w.decodeArray=C.decodeArray,w.encode=C.encode,w.encodeASCII=C.encodeASCII},"./externals/cea608-parser.js":function(Ge,w,i){!function(e){"use strict";var C={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},R=function(I){var H=I;return C.hasOwnProperty(I)&&(H=C[I]),String.fromCharCode(H)},U=15,j=32,F={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},D={17:2,18:4,21:6,22:8,23:10,19:13,20:15},h={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],_={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(I){this.time=I},log:function(I,H){this.verboseLevel>=this.verboseFilter[I]&&console.log(this.time+" ["+I+"] "+H)}},b=function(I){for(var H=[],ee=0;ee<I.length;ee++)H.push(I[ee].toString(16));return H},k=function(I,H,ee,fe,ue){this.foreground=I||"white",this.underline=H||!1,this.italics=ee||!1,this.background=fe||"black",this.flash=ue||!1};k.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(I){for(var H=["foreground","underline","italics","background","flash"],ee=0;ee<H.length;ee++){var fe=H[ee];I.hasOwnProperty(fe)&&(this[fe]=I[fe])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(I){return this.foreground===I.foreground&&this.underline===I.underline&&this.italics===I.italics&&this.background===I.background&&this.flash===I.flash},copy:function(I){this.foreground=I.foreground,this.underline=I.underline,this.italics=I.italics,this.background=I.background,this.flash=I.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var L=function(I,H,ee,fe,ue,be){this.uchar=I||" ",this.penState=new k(H,ee,fe,ue,be)};L.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(I,H){this.uchar=I,this.penState.copy(H)},setPenState:function(I){this.penState.copy(I)},equals:function(I){return this.uchar===I.uchar&&this.penState.equals(I.penState)},copy:function(I){this.uchar=I.uchar,this.penState.copy(I.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var B=function(){this.chars=[];for(var I=0;I<j;I++)this.chars.push(new L);this.pos=0,this.currPenState=new k};B.prototype={equals:function(I){for(var H=!0,ee=0;ee<j;ee++)if(!this.chars[ee].equals(I.chars[ee])){H=!1;break}return H},copy:function(I){for(var H=0;H<j;H++)this.chars[H].copy(I.chars[H])},isEmpty:function(){for(var I=!0,H=0;H<j;H++)if(!this.chars[H].isEmpty()){I=!1;break}return I},setCursor:function(I){this.pos!==I&&(this.pos=I),this.pos<0?(_.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>j&&(_.log("ERROR","Too large cursor position "+this.pos),this.pos=j)},moveCursor:function(I){var H=this.pos+I;if(I>1)for(var ee=this.pos+1;ee<H+1;ee++)this.chars[ee].setPenState(this.currPenState);this.setCursor(H)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(I){I>=144&&this.backSpace();var H=R(I);this.pos>=j?_.log("ERROR","Cannot insert "+I.toString(16)+" ("+H+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(H,this.currPenState),this.moveCursor(1))},clearFromPos:function(I){var H;for(H=I;H<j;H++)this.chars[H].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var I=[],H=!0,ee=0;ee<j;ee++){var fe=this.chars[ee].uchar;" "!==fe&&(H=!1),I.push(fe)}return H?"":I.join("")},setPenStyles:function(I){this.currPenState.setStyles(I),this.chars[this.pos].setPenState(this.currPenState)}};var O=function(){this.rows=[];for(var I=0;I<U;I++)this.rows.push(new B);this.currRow=14,this.nrRollUpRows=null,this.reset()};O.prototype={reset:function(){for(var I=0;I<U;I++)this.rows[I].clear();this.currRow=14},equals:function(I){for(var H=!0,ee=0;ee<U;ee++)if(!this.rows[ee].equals(I.rows[ee])){H=!1;break}return H},copy:function(I){for(var H=0;H<U;H++)this.rows[H].copy(I.rows[H])},isEmpty:function(){for(var I=!0,H=0;H<U;H++)if(!this.rows[H].isEmpty()){I=!1;break}return I},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(I){this.rows[this.currRow].insertChar(I)},setPen:function(I){this.rows[this.currRow].setPenStyles(I)},moveCursor:function(I){this.rows[this.currRow].moveCursor(I)},setCursor:function(I){_.log("INFO","setCursor: "+I),this.rows[this.currRow].setCursor(I)},setPAC:function(I){_.log("INFO","pacData = "+JSON.stringify(I));var H=I.row-1;this.nrRollUpRows&&H<this.nrRollUpRows-1&&(H=this.nrRollUpRows-1),this.currRow=H;var ee=this.rows[this.currRow];if(null!==I.indent){var ue=Math.max(I.indent-1,0);ee.setCursor(I.indent),I.color=ee.chars[ue].penState.foreground}this.setPen({foreground:I.color,underline:I.underline,italics:I.italics,background:"black",flash:!1})},setBkgData:function(I){_.log("INFO","bkgData = "+JSON.stringify(I)),this.backSpace(),this.setPen(I),this.insertChar(32)},setRollUpRows:function(I){this.nrRollUpRows=I},rollUp:function(){if(null!==this.nrRollUpRows){_.log("TEXT",this.getDisplayText());var H=this.rows.splice(this.currRow+1-this.nrRollUpRows,1)[0];H.clear(),this.rows.splice(this.currRow,0,H),_.log("INFO","Rolling up")}else _.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(I){I=I||!1;for(var H=[],ee="",ue=0;ue<U;ue++){var be=this.rows[ue].getTextString();be&&H.push(I?"Row "+(ue+1)+': "'+be+'"':be.trim())}return H.length>0&&(ee=I?"["+H.join(" | ")+"]":H.join("\n")),ee},getTextAndFormat:function(){return this.rows}};var P=function(I,H){this.chNr=I,this.outputFilter=H,this.mode=null,this.verbose=0,this.displayedMemory=new O,this.nonDisplayedMemory=new O,this.lastOutputScreen=new O,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};P.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(I){this.outputFilter=I},setPAC:function(I){this.writeScreen.setPAC(I)},setBkgData:function(I){this.writeScreen.setBkgData(I)},setMode:function(I){I!==this.mode&&(this.mode=I,_.log("INFO","MODE="+I),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=I)},insertChars:function(I){for(var H=0;H<I.length;H++)this.writeScreen.insertChar(I[H]);_.log("INFO",(this.writeScreen===this.displayedMemory?"DISP":"NON_DISP")+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(_.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){_.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){_.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){_.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(I){_.log("INFO","RU("+I+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(I)},cc_FON:function(){_.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){_.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){_.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){_.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){_.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){_.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){_.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(_.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var I=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=I,this.writeScreen=this.nonDisplayedMemory,_.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(I){_.log("INFO","TO("+I+") - Tab Offset"),this.writeScreen.moveCursor(I)},cc_MIDROW:function(I){var H={flash:!1};if(H.underline=I%2==1,H.italics=I>=46,H.italics)H.foreground="white";else{var ee=Math.floor(I/2)-16;H.foreground=["white","green","blue","cyan","red","yellow","magenta"][ee]}_.log("INFO","MIDROW: "+JSON.stringify(H)),this.writeScreen.setPen(H)},outputDataUpdate:function(){var I=_.time;null!==I&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(I,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,I,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:I):this.cueStartTime=I,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(I){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,I,this.displayedMemory),this.cueStartTime=I))}};var y=function(I,H,ee){this.field=I||1,this.outputs=[H,ee],this.channels=[new P(1,H),new P(2,ee)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};y.prototype={getHandler:function(I){return this.channels[I].getHandler()},setHandler:function(I,H){this.channels[I].setHandler(H)},addData:function(I,H){var ee,fe,ue,be=!1;this.lastTime=I,_.setTime(I);for(var q=0;q<H.length;q+=2)ue=127&H[q+1],(fe=127&H[q])>=16&&fe<=31&&fe===this.lastCmdA&&ue===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,_.log("DEBUG","Repeated command ("+b([fe,ue])+") is dropped")):0!==fe||0!==ue?(_.log("DATA","["+b([H[q],H[q+1]])+"] -> ("+b([fe,ue])+")"),(ee=this.parseCmd(fe,ue))||(ee=this.parseMidrow(fe,ue)),ee||(ee=this.parsePAC(fe,ue)),ee||(ee=this.parseBackgroundAttributes(fe,ue)),!ee&&(be=this.parseChars(fe,ue))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(be):_.log("WARNING","No channel found yet. TEXT-MODE?")),ee?this.dataCounters.cmd+=2:be?this.dataCounters.char+=2:(this.dataCounters.other+=2,_.log("WARNING","Couldn't parse cleaned data "+b([fe,ue])+" orig: "+b([H[q],H[q+1]])))):this.dataCounters.padding+=2},parseCmd:function(I,H){var ee;if(!((20===I||21===I||28===I||29===I)&&32<=H&&H<=47||(23===I||31===I)&&33<=H&&H<=35))return!1;var be=this.channels[(ee=20===I||21===I||23===I?1:2)-1];return 20===I||21===I||28===I||29===I?32===H?be.cc_RCL():33===H?be.cc_BS():34===H?be.cc_AOF():35===H?be.cc_AON():36===H?be.cc_DER():37===H?be.cc_RU(2):38===H?be.cc_RU(3):39===H?be.cc_RU(4):40===H?be.cc_FON():41===H?be.cc_RDC():42===H?be.cc_TR():43===H?be.cc_RTD():44===H?be.cc_EDM():45===H?be.cc_CR():46===H?be.cc_ENM():47===H&&be.cc_EOC():be.cc_TO(H-32),this.lastCmdA=I,this.lastCmdB=H,this.currChNr=ee,!0},parseMidrow:function(I,H){var ee=null;if((17===I||25===I)&&32<=H&&H<=47){if((ee=17===I?1:2)!==this.currChNr)return _.log("ERROR","Mismatch channel in midrow parsing"),!1;var fe=this.channels[ee-1];return fe.insertChars([32]),fe.cc_MIDROW(H),_.log("DEBUG","MIDROW ("+b([I,H])+")"),this.lastCmdA=I,this.lastCmdB=H,!0}return!1},parsePAC:function(I,H){var ee;if(!((17<=I&&I<=23||25<=I&&I<=31)&&64<=H&&H<=127||(16===I||24===I)&&64<=H&&H<=95))return!1;ee=I<=23?1:2;var q=this.interpretPAC(64<=H&&H<=95?1===ee?F[I]:h[I]:1===ee?D[I]:u[I],H);return this.channels[ee-1].setPAC(q),this.lastCmdA=I,this.lastCmdB=H,this.currChNr=ee,!0},interpretPAC:function(I,H){var ee,fe={color:null,italics:!1,indent:null,underline:!1,row:I};return fe.underline=1==(1&(ee=H>95?H-96:H-64)),ee<=13?fe.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(ee/2)]:ee<=15?(fe.italics=!0,fe.color="white"):fe.indent=4*Math.floor((ee-16)/2),fe},parseChars:function(I,H){var ee=null,fe=null,ue=null;if(I>=25?(ee=2,ue=I-8):(ee=1,ue=I),17<=ue&&ue<=19){var q;_.log("INFO","Special char '"+R(q=17===ue?H+80:18===ue?H+112:H+144)+"' in channel "+ee),fe=[q],this.lastCmdA=I,this.lastCmdB=H}else 32<=I&&I<=127&&(fe=0===H?[I]:[I,H],this.lastCmdA=null,this.lastCmdB=null);if(fe){var se=b(fe);_.log("DEBUG","Char codes =  "+se.join(","))}return fe},parseBackgroundAttributes:function(I,H){var ee,fe;return!!((16===I||24===I)&&32<=H&&H<=47||(23===I||31===I)&&45<=H&&H<=47)&&(ee={},16===I||24===I?(fe=Math.floor((H-32)/2),ee.background=p[fe],H%2==1&&(ee.background=ee.background+"_semi")):45===H?ee.background="transparent":(ee.foreground="black",47===H&&(ee.underline=!0)),this.channels[(I<24?1:2)-1].setBkgData(ee),this.lastCmdA=I,this.lastCmdB=H,!0)},reset:function(){for(var I=0;I<this.channels.length;I++)this.channels[I]&&this.channels[I].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(I){for(var H=0;H<this.channels.length;H++)this.channels[H]&&this.channels[H].cueSplitAtTime(I)}};e.logger=_,e.PenState=k,e.CaptionScreen=O,e.Cea608Parser=y,e.findCea608Nalus=function(I,H,ee){for(var fe=0,ue=H,q=[],se=function(xe,_e,Ie,Te){if(4!==xe||_e<8)return null;var ke=Ie.getUint8(Te),Ue=Ie.getUint16(Te+1),Fe=Ie.getUint32(Te+3),je=Ie.getUint8(Te+7);return 181==ke&&49==Ue&&1195456820==Fe&&3==je};ue<H+ee;){if(fe=I.getUint32(ue),6==(31&I.getUint8(ue+4)))for(var V=ue+5,de=-1;V<ue+4+fe-1;){de=0;for(var Q=255;255===Q;)de+=Q=I.getUint8(V),V++;var pe=0;for(Q=255;255===Q;)pe+=Q=I.getUint8(V),V++;se(de,pe,I,V)&&q.push([V,pe]),V+=pe}ue+=fe+4}return q},e.extractCea608DataFromRange=function(I,H){var ee=H[0],fe=[[],[]],ue=31&I.getUint8(ee+=8);ee+=2;for(var be=0;be<ue;be++){var q=I.getUint8(ee),se=4&q,V=3&q;ee++;var de=I.getUint8(ee);ee++;var Q=I.getUint8(ee);ee++,se&&(127&de)+(127&Q)!=0&&(0===V?(fe[0].push(de),fe[0].push(Q)):1===V&&(fe[1].push(de),fe[1].push(Q)))}return fe}}(w)},"./externals/xml2json.js":function(Ge,w,i){"use strict";i.r(w),w.default=function e(C){C=C||{},function U(){void 0===C.escapeMode&&(C.escapeMode=!0),void 0===C.attributePrefix&&(C.attributePrefix="_"),C.arrayAccessForm=C.arrayAccessForm||"none",C.emptyNodeForm=C.emptyNodeForm||"text",void 0===C.enableToStringFunc&&(C.enableToStringFunc=!0),C.arrayAccessFormPaths=C.arrayAccessFormPaths||[],void 0===C.skipEmptyTextNodesForObj&&(C.skipEmptyTextNodesForObj=!0),void 0===C.stripWhitespaces&&(C.stripWhitespaces=!0),C.datetimeAccessFormPaths=C.datetimeAccessFormPaths||[],void 0===C.useDoubleQuotes&&(C.useDoubleQuotes=!1),C.xmlElementsFilter=C.xmlElementsFilter||[],C.jsonPropertiesFilter=C.jsonPropertiesFilter||[],void 0===C.keepCData&&(C.keepCData=!1),void 0===C.ignoreRoot&&(C.ignoreRoot=!1)}();var j_ELEMENT_NODE=1,j_TEXT_NODE=3,j_CDATA_SECTION_NODE=4,j_COMMENT_NODE=8,j_DOCUMENT_NODE=9;function D(se){var V=se.localName;return null==V&&(V=se.baseName),(null==V||""==V)&&(V=se.nodeName),V}function u(se){return"string"==typeof se?se.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):se}function _(se,V,de,Q){for(var pe=0;pe<se.length;pe++){var me=se[pe];if("string"==typeof me){if(me==Q)break}else if(me instanceof RegExp){if(me.test(Q))break}else if("function"==typeof me&&me(V,de,Q))break}return pe!=se.length}function b(se,V,de){"property"===C.arrayAccessForm&&(se[V+"_asArray"]=se[V]instanceof Array?se[V]:[se[V]]),!(se[V]instanceof Array)&&C.arrayAccessFormPaths.length>0&&_(C.arrayAccessFormPaths,se,V,de)&&(se[V]=[se[V]])}function k(se){var V=se.split(/[-T:+Z]/g),de=new Date(V[0],V[1]-1,V[2]),Q=V[5].split(".");if(de.setHours(V[3],V[4],Q[0]),Q.length>1&&de.setMilliseconds(Q[1]),V[6]&&V[7]){var pe=60*V[6]+Number(V[7]);pe=0+("-"==(/\d\d-\d\d:\d\d$/.test(se)?"-":"+")?-1*pe:pe),de.setMinutes(de.getMinutes()-pe-de.getTimezoneOffset())}else-1!==se.indexOf("Z",se.length-1)&&(de=new Date(Date.UTC(de.getFullYear(),de.getMonth(),de.getDate(),de.getHours(),de.getMinutes(),de.getSeconds(),de.getMilliseconds())));return de}function B(se,V,de,Q){return!(V==j_ELEMENT_NODE&&C.xmlElementsFilter.length>0)||_(C.xmlElementsFilter,se,de,Q)}function O(se,V){if(se.nodeType==j_DOCUMENT_NODE){for(var de=new Object,Q=se.childNodes,pe=0;pe<Q.length;pe++)(me=Q[pe]).nodeType==j_ELEMENT_NODE&&(C.ignoreRoot?de=O(me):(de={})[xe=D(me)]=O(me));return de}if(se.nodeType==j_ELEMENT_NODE){(de=new Object).__cnt=0;var _e=[];for(Q=se.childNodes,pe=0;pe<Q.length;pe++){var me,xe=D(me=Q[pe]);if(me.nodeType!=j_COMMENT_NODE){var Ie=V+"."+xe;if(B(de,me.nodeType,xe,Ie))if(de.__cnt++,null==de[xe]){var Te=O(me,Ie);("#text"!=xe||/[^\s]/.test(Te))&&((ke={})[xe]=Te,_e.push(ke)),de[xe]=Te,b(de,xe,Ie)}else{var ke;null!=de[xe]&&(de[xe]instanceof Array||(de[xe]=[de[xe]],b(de,xe,Ie))),Te=O(me,Ie),("#text"!=xe||/[^\s]/.test(Te))&&((ke={})[xe]=Te,_e.push(ke)),de[xe][de[xe].length]=Te}}}de.__children=_e;for(var Ue=D(se),Fe=0;Fe<se.attributes.length;Fe++){var je=se.attributes[Fe];de.__cnt++;for(var Pe=je.value,He=0,Le=C.matchers.length;He<Le;He++){var ye=C.matchers[He];ye.test(je,Ue)&&(Pe=ye.converter(je.value))}de[C.attributePrefix+je.name]=Pe}var ae=function h(se){return se.prefix}(se);return null!=ae&&""!=ae&&(de.__cnt++,de.__prefix=ae),null!=de["#text"]&&(de.__text=de["#text"],de.__text instanceof Array&&(de.__text=de.__text.join("\n")),C.stripWhitespaces&&(de.__text=de.__text.trim()),delete de["#text"],"property"==C.arrayAccessForm&&delete de["#text_asArray"],de.__text=function L(se,V,de){if(C.datetimeAccessFormPaths.length>0){var Q=de.split(".#")[0];return _(C.datetimeAccessFormPaths,se,V,Q)?k(se):se}return se}(de.__text,xe,V+"."+xe)),null!=de["#cdata-section"]&&(de.__cdata=de["#cdata-section"],delete de["#cdata-section"],"property"==C.arrayAccessForm&&delete de["#cdata-section_asArray"]),0==de.__cnt&&"text"==C.emptyNodeForm?de="":1==de.__cnt&&null!=de.__text?de=de.__text:1!=de.__cnt||null==de.__cdata||C.keepCData?de.__cnt>1&&null!=de.__text&&C.skipEmptyTextNodesForObj&&(C.stripWhitespaces&&""==de.__text||""==de.__text.trim())&&delete de.__text:de=de.__cdata,delete de.__cnt,C.enableToStringFunc&&(null!=de.__text||null!=de.__cdata)&&(de.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),de}if(se.nodeType==j_TEXT_NODE||se.nodeType==j_CDATA_SECTION_NODE)return se.nodeValue}function P(se,V,de,Q){var pe="<"+(null!=se&&null!=se.__prefix?se.__prefix+":":"")+V;if(null!=de)for(var me=0;me<de.length;me++){var xe=de[me],_e=se[xe];C.escapeMode&&(_e=u(_e)),pe+=" "+xe.substr(C.attributePrefix.length)+"=",pe+=C.useDoubleQuotes?'"'+_e+'"':"'"+_e+"'"}return pe+(Q?"/>":">")}function y(se,V){return"</"+(null!=se.__prefix?se.__prefix+":":"")+V+">"}function E(se,V){return!!("property"==C.arrayAccessForm&&function S(se,V){return-1!==se.indexOf(V,se.length-V.length)}(V.toString(),"_asArray")||0==V.toString().indexOf(C.attributePrefix)||0==V.toString().indexOf("__")||se[V]instanceof Function)}function A(se){var V=0;if(se instanceof Object)for(var de in se)E(se,de)||V++;return V}function I(se,V,de){return 0==C.jsonPropertiesFilter.length||""==de||_(C.jsonPropertiesFilter,se,V,de)}function H(se){var V=[];if(se instanceof Object)for(var de in se)-1==de.toString().indexOf("__")&&0==de.toString().indexOf(C.attributePrefix)&&V.push(de);return V}function fe(se){var V="";return se instanceof Object?V+=function ee(se){var V="";return null!=se.__cdata&&(V+="<![CDATA["+se.__cdata+"]]>"),null!=se.__text&&(V+=C.escapeMode?u(se.__text):se.__text),V}(se):null!=se&&(V+=C.escapeMode?u(se):se),V}function ue(se,V){return""===se?V:se+"."+V}function be(se,V,de,Q){var pe="";if(0==se.length)pe+=P(se,V,de,!0);else for(var me=0;me<se.length;me++)pe+=P(se[me],V,H(se[me]),!1),pe+=q(se[me],ue(Q,V)),pe+=y(se[me],V);return pe}function q(se,V){var de="";if(A(se)>0)for(var pe in se)if(!E(se,pe)&&(""==V||I(se,pe,ue(V,pe)))){var me=se[pe],xe=H(me);null==me||null==me?de+=P(me,pe,xe,!0):me instanceof Object?me instanceof Array?de+=be(me,pe,xe,V):me instanceof Date?(de+=P(me,pe,xe,!1),de+=me.toISOString(),de+=y(me,pe)):A(me)>0||null!=me.__text||null!=me.__cdata?(de+=P(me,pe,xe,!1),de+=q(me,ue(V,pe)),de+=y(me,pe)):de+=P(me,pe,xe,!0):(de+=P(me,pe,xe,!1),de+=fe(me),de+=y(me,pe))}return de+fe(se)}this.parseXmlString=function(se){var de;if(window.ActiveXObject||window,void 0===se)return null;if(window.DOMParser){var Q=new window.DOMParser;try{(de=Q.parseFromString(se,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(de=null)}catch(me){de=null}}else 0==se.indexOf("<?")&&(se=se.substr(se.indexOf("?>")+2)),(de=new ActiveXObject("Microsoft.XMLDOM")).async="false",de.loadXML(se);return de},this.asArray=function(se){return void 0===se||null==se?[]:se instanceof Array?se:[se]},this.toXmlDateTime=function(se){return se instanceof Date?se.toISOString():"number"==typeof se?new Date(se).toISOString():null},this.asDateTime=function(se){return"string"==typeof se?k(se):se},this.xml2json=function(se){return O(se)},this.xml_str2json=function(se){var V=this.parseXmlString(se);return null!=V?this.xml2json(V):null},this.json2xml_str=function(se){return q(se,"")},this.json2xml=function(se){var V=this.json2xml_str(se);return this.parseXmlString(V)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./index_mediaplayerOnly.js");i.d(w,"MediaPlayer",function(){return e.MediaPlayer});var C=i("./src/streaming/utils/Capabilities.js");i.d(w,"supportsMediaSource",function(){return C.supportsMediaSource});var R=i("./src/streaming/metrics/MetricsReporting.js");i.d(w,"MetricsReporting",function(){return R.default});var U=i("./src/streaming/protection/Protection.js");i.d(w,"Protection",function(){return U.default});var j=i("./src/streaming/MediaPlayerFactory.js");i.d(w,"MediaPlayerFactory",function(){return j.default});var F=i("./src/core/Debug.js");i.d(w,"Debug",function(){return F.default}),dashjs.Protection=U.default,dashjs.MetricsReporting=R.default,dashjs.MediaPlayerFactory=j.default,dashjs.Debug=F.default,dashjs.supportsMediaSource=C.supportsMediaSource,w.default=dashjs},"./index_mediaplayerOnly.js":function(Ge,w,i){"use strict";i.r(w),function(e){var C=i("./src/streaming/MediaPlayer.js");i.d(w,"MediaPlayer",function(){return C.default});var R=i("./src/core/FactoryMaker.js");i.d(w,"FactoryMaker",function(){return R.default});var U=i("./src/core/Debug.js");i.d(w,"Debug",function(){return U.default});var j=i("./src/core/Version.js"),h=(i("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||e),u=h.dashjs;u||(u=h.dashjs={}),u.MediaPlayer=C.default,u.FactoryMaker=R.default,u.Debug=U.default,u.Version=Object(j.getVersionString)(),w.default=u}.call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(Ge,w,i){"use strict";w.byteLength=function h(L){var B=D(L),P=B[1];return 3*(B[0]+P)/4-P},w.toByteArray=function p(L){var B,I,O=D(L),P=O[0],y=O[1],S=new R(function u(L,B,O){return 3*(B+O)/4-O}(0,P,y)),E=0,A=y>0?P-4:P;for(I=0;I<A;I+=4)B=C[L.charCodeAt(I)]<<18|C[L.charCodeAt(I+1)]<<12|C[L.charCodeAt(I+2)]<<6|C[L.charCodeAt(I+3)],S[E++]=B>>16&255,S[E++]=B>>8&255,S[E++]=255&B;return 2===y&&(B=C[L.charCodeAt(I)]<<2|C[L.charCodeAt(I+1)]>>4,S[E++]=255&B),1===y&&(B=C[L.charCodeAt(I)]<<10|C[L.charCodeAt(I+1)]<<4|C[L.charCodeAt(I+2)]>>2,S[E++]=B>>8&255,S[E++]=255&B),S},w.fromByteArray=function k(L){for(var B,O=L.length,P=O%3,y=[],S=16383,E=0,A=O-P;E<A;E+=S)y.push(b(L,E,E+S>A?A:E+S));return 1===P?y.push(e[(B=L[O-1])>>2]+e[B<<4&63]+"=="):2===P&&y.push(e[(B=(L[O-2]<<8)+L[O-1])>>10]+e[B>>4&63]+e[B<<2&63]+"="),y.join("")};for(var e=[],C=[],R="undefined"!=typeof Uint8Array?Uint8Array:Array,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0,F=U.length;j<F;++j)e[j]=U[j],C[U.charCodeAt(j)]=j;function D(L){var B=L.length;if(B%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var O=L.indexOf("=");return-1===O&&(O=B),[O,O===B?0:4-O%4]}function _(L){return e[L>>18&63]+e[L>>12&63]+e[L>>6&63]+e[63&L]}function b(L,B,O){for(var y=[],S=B;S<O;S+=3)y.push(_((L[S]<<16&16711680)+(L[S+1]<<8&65280)+(255&L[S+2])));return y.join("")}C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63},"./node_modules/bcp-47-match/index.js":function(Ge,w,i){"use strict";function U(F,D){return function h(u,p){for(var B,O,P,_=j(u,"tag"),b=j(null==p?"*":p,"range"),k=[],L=-1;++L<b.length;)if(B=b[L].toLowerCase(),D||"*"!==B){for(O=-1,P=[];++O<_.length;)if(F(_[O].toLowerCase(),B)){if(!D)return _[O];k.push(_[O])}else P.push(_[O]);_=P}return D?k:void 0}}function j(F,D){var h=F&&"string"==typeof F?[F]:F;if(!h||"object"!=typeof h||!("length"in h))throw new Error("Invalid "+D+" `"+h+"`, expected non-empty string");return h}w.basicFilter=U(function e(F,D){return"*"===D||F===D||F.indexOf(D+"-")>-1},!0),w.extendedFilter=U(function C(F,D){var h=F.split("-"),u=D.split("-"),p=0,_=0;if("*"!==u[_]&&h[p]!==u[_])return!1;for(p++,_++;_<u.length;)if("*"!==u[_]){if(!h[p])return!1;if(h[p]!==u[_]){if(1===h[p].length)return!1;p++}else p++,_++}else _++;return!0},!0),w.lookup=U(function R(F,D){for(var u,h=D;;){if("*"===h||F===h)return!0;if((u=h.lastIndexOf("-"))<0)return!1;"-"===h.charAt(u-2)&&(u-=2),h=h.slice(0,u)}})},"./node_modules/bcp-47-normalize/index.js":function(Ge,w,i){"use strict";Ge.exports=i("./node_modules/bcp-47-normalize/lib/index.js")},"./node_modules/bcp-47-normalize/lib/defaults.json":function(Ge){Ge.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},"./node_modules/bcp-47-normalize/lib/fields.json":function(Ge){Ge.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},"./node_modules/bcp-47-normalize/lib/index.js":function(Ge,w,i){"use strict";var e=i("./node_modules/bcp-47/index.js"),C=i("./node_modules/bcp-47-match/index.js"),R=i("./node_modules/bcp-47-normalize/lib/matches.json"),U=i("./node_modules/bcp-47-normalize/lib/fields.json"),j=i("./node_modules/bcp-47-normalize/lib/defaults.json"),F=i("./node_modules/bcp-47-normalize/lib/many.json");Ge.exports=function p(B,O){var A,P=O||{},y=e.parse(String(B||"").toLowerCase(),P),S=e.stringify(y),E=-1;if(!S)return S;for(;++E<R.length;)C.extendedFilter(S,R[E].from).length&&(_(y,R[E].from,R[E].to),S=e.stringify(y));for(E=-1;++E<U.length;)b(y,U[E].from.field,U[E].from.value)&&k(y,U[E].to.field,U[E].to.value);for(S=e.stringify(Object.assign({},y,u)),E=-1;++E<j.length;)S===j[E]&&(_(y,j[E],j[E].split("-").slice(0,-1).join("-")),S=e.stringify(Object.assign({},y,u)));if(y.extensions.sort(L),P.warning)for(A in F)D.call(F[A],y[A])&&P.warning("Deprecated "+A+" `"+y[A]+"`, expected one of `"+F[A][y[A]].join("`, `")+"`",null,7);return y.script&&(y.script=y.script.charAt(0).toUpperCase()+y.script.slice(1)),y.region&&(y.region=y.region.toUpperCase()),e.stringify(y)};var D={}.hasOwnProperty,h=new Intl.Collator,u={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function _(B,O,P){var A,y=e.parse(O),S=e.parse(P),E=[];for(A in y)y[A]&&y[A].length&&b(B,A,y[A])&&E.push(A);for(A in S)S[A]&&S[A].length&&(E.indexOf(A)>-1||!B[A]||!B[A].length)&&k(B,A,S[A])}function b(B,O,P){var S,E,A,I,y=!1;if(P){if(E=S=B[O],S&&"object"==typeof S)for(E=[],A=-1;++A<S.length;)P.indexOf(I=S[A])<0?E.push(I):y=!0;else S===P&&(E=null,y=!0);B[O]=E}return y}function k(B,O,P){var S,E,A,y=B[O];if(y&&"object"==typeof y)for(S=[].concat(P),E=-1;++E<S.length;)y.indexOf(A=S[E])<0&&y.push(A);else B[O]=P}function L(B,O){return h.compare(B.singleton,O.singleton)}},"./node_modules/bcp-47-normalize/lib/many.json":function(Ge){Ge.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},"./node_modules/bcp-47-normalize/lib/matches.json":function(Ge){Ge.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},"./node_modules/bcp-47/index.js":function(Ge,w,i){"use strict";w.parse=i("./node_modules/bcp-47/lib/parse.js"),w.stringify=i("./node_modules/bcp-47/lib/stringify.js")},"./node_modules/bcp-47/lib/normalize.json":function(Ge){Ge.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},"./node_modules/bcp-47/lib/parse.js":function(Ge,w,i){"use strict";var e=i("./node_modules/is-alphanumerical/index.js"),C=i("./node_modules/is-alphabetical/index.js"),R=i("./node_modules/is-decimal/index.js"),U=i("./node_modules/bcp-47/lib/regular.json"),j=i("./node_modules/bcp-47/lib/normalize.json");Ge.exports=function D(u,p){var O,P,y,_=p||{},b={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},k=String(u),L=k.toLowerCase(),B=0;if(null==u)throw new Error("Expected string, got `"+u+"`");if(F.call(j,L))return(null==_.normalize||_.normalize)&&j[L]?D(j[L]):(b[-1===U.indexOf(L)?"irregular":"regular"]=k,b);for(;C(L.charCodeAt(B))&&B<9;)B++;if(B>1&&B<9){if(b.language=k.slice(0,B),B<4)for(P=0;45===L.charCodeAt(B)&&C(L.charCodeAt(B+1))&&C(L.charCodeAt(B+2))&&C(L.charCodeAt(B+3))&&!C(L.charCodeAt(B+4));){if(P>2)return S(B,3,"Too many extended language subtags, expected at most 3 subtags");b.extendedLanguageSubtags.push(k.slice(B+1,B+4)),B+=4,P++}for(45===L.charCodeAt(B)&&C(L.charCodeAt(B+1))&&C(L.charCodeAt(B+2))&&C(L.charCodeAt(B+3))&&C(L.charCodeAt(B+4))&&!C(L.charCodeAt(B+5))&&(b.script=k.slice(B+1,B+5),B+=5),45===L.charCodeAt(B)&&(C(L.charCodeAt(B+1))&&C(L.charCodeAt(B+2))&&!C(L.charCodeAt(B+3))?(b.region=k.slice(B+1,B+3),B+=3):R(L.charCodeAt(B+1))&&R(L.charCodeAt(B+2))&&R(L.charCodeAt(B+3))&&!R(L.charCodeAt(B+4))&&(b.region=k.slice(B+1,B+4),B+=4));45===L.charCodeAt(B);){for(y=O=B+1;e(L.charCodeAt(y));){if(y-O>7)return S(y,1,"Too long variant, expected at most 8 characters");y++}if(!(y-O>4||y-O>3&&R(L.charCodeAt(O))))break;b.variants.push(k.slice(O,y)),B=y}for(;45===L.charCodeAt(B)&&120!==L.charCodeAt(B+1)&&e(L.charCodeAt(B+1))&&45===L.charCodeAt(B+2)&&e(L.charCodeAt(B+3));){for(y=B+2,P=0;45===L.charCodeAt(y)&&e(L.charCodeAt(y+1))&&e(L.charCodeAt(y+2));)for(y=(O=y+1)+2,P++;e(L.charCodeAt(y));){if(y-O>7)return S(y,2,"Too long extension, expected at most 8 characters");y++}if(!P)return S(y,4,"Empty extension, extensions must have at least 2 characters of content");b.extensions.push({singleton:k.charAt(B+1),extensions:k.slice(B+3,y).split("-")}),B=y}}else B=0;if(0===B&&120===L.charCodeAt(B)||45===L.charCodeAt(B)&&120===L.charCodeAt(B+1))for(y=B=B?B+2:1;45===L.charCodeAt(y)&&e(L.charCodeAt(y+1));){for(y=O=B+1;e(L.charCodeAt(y));){if(y-O>7)return S(y,5,"Too long private-use area, expected at most 8 characters");y++}b.privateuse.push(k.slice(B+1,y)),B=y}return B!==k.length?S(B,6,"Found superfluous content after tag"):b;function S(E,A,I){return _.warning&&_.warning(I,A,E),_.forgiving?b:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}};var F={}.hasOwnProperty},"./node_modules/bcp-47/lib/regular.json":function(Ge){Ge.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')},"./node_modules/bcp-47/lib/stringify.js":function(Ge,w,i){"use strict";Ge.exports=function e(C){var j,F,D,R=C||{},U=[];if(R.irregular||R.regular)return R.irregular||R.regular;if(R.language)for(U=U.concat(R.language,R.extendedLanguageSubtags||[],R.script||[],R.region||[],R.variants||[]),j=R.extensions||[],F=-1;++F<j.length;)(D=j[F]).singleton&&D.extensions&&D.extensions.length&&(U=U.concat(D.singleton,D.extensions));return R.privateuse&&R.privateuse.length&&(U=U.concat("x",R.privateuse)),U.join("-")}},"./node_modules/buffer/index.js":function(Ge,w,i){"use strict";(function(e){var C=i("./node_modules/base64-js/index.js"),R=i("./node_modules/ieee754/index.js"),U=i("./node_modules/isarray/index.js");function F(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function D(X,$){if(F()<$)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(X=new Uint8Array($)).__proto__=h.prototype:(null===X&&(X=new h($)),X.length=$),X}function h(X,$,K){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(X,$,K);if("number"==typeof X){if("string"==typeof $)throw new Error("If encoding is specified then the first argument must be a string");return b(this,X)}return u(this,X,$,K)}function u(X,$,K,oe){if("number"==typeof $)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&$ instanceof ArrayBuffer?function B(X,$,K,oe){if(K<0||$.byteLength<K)throw new RangeError("'offset' is out of bounds");if($.byteLength<K+(oe||0))throw new RangeError("'length' is out of bounds");return $=void 0===K&&void 0===oe?new Uint8Array($):void 0===oe?new Uint8Array($,K):new Uint8Array($,K,oe),h.TYPED_ARRAY_SUPPORT?(X=$).__proto__=h.prototype:X=L(X,$),X}(X,$,K,oe):"string"==typeof $?function k(X,$,K){if(("string"!=typeof K||""===K)&&(K="utf8"),!h.isEncoding(K))throw new TypeError('"encoding" must be a valid string encoding');var oe=0|S($,K),Ce=(X=D(X,oe)).write($,K);return Ce!==oe&&(X=X.slice(0,Ce)),X}(X,$,K):function O(X,$){if(h.isBuffer($)){var K=0|P($.length);return 0===(X=D(X,K)).length||$.copy(X,0,0,K),X}if($){if("undefined"!=typeof ArrayBuffer&&$.buffer instanceof ArrayBuffer||"length"in $)return"number"!=typeof $.length||function te(X){return X!=X}($.length)?D(X,0):L(X,$);if("Buffer"===$.type&&U($.data))return L(X,$.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(X,$)}function p(X){if("number"!=typeof X)throw new TypeError('"size" argument must be a number');if(X<0)throw new RangeError('"size" argument must not be negative')}function b(X,$){if(p($),X=D(X,$<0?0:0|P($)),!h.TYPED_ARRAY_SUPPORT)for(var K=0;K<$;++K)X[K]=0;return X}function L(X,$){var K=$.length<0?0:0|P($.length);X=D(X,K);for(var oe=0;oe<K;oe+=1)X[oe]=255&$[oe];return X}function P(X){if(X>=F())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F().toString(16)+" bytes");return 0|X}function S(X,$){if(h.isBuffer(X))return X.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(X)||X instanceof ArrayBuffer))return X.byteLength;"string"!=typeof X&&(X=""+X);var K=X.length;if(0===K)return 0;for(var oe=!1;;)switch($){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":case void 0:return ce(X).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return ne(X).length;default:if(oe)return ce(X).length;$=(""+$).toLowerCase(),oe=!0}}function E(X,$,K){var oe=!1;if((void 0===$||$<0)&&($=0),$>this.length||((void 0===K||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=($>>>=0))return"";for(X||(X="utf8");;)switch(X){case"hex":return _e(this,$,K);case"utf8":case"utf-8":return de(this,$,K);case"ascii":return me(this,$,K);case"latin1":case"binary":return xe(this,$,K);case"base64":return V(this,$,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,$,K);default:if(oe)throw new TypeError("Unknown encoding: "+X);X=(X+"").toLowerCase(),oe=!0}}function A(X,$,K){var oe=X[$];X[$]=X[K],X[K]=oe}function I(X,$,K,oe,Ce){if(0===X.length)return-1;if("string"==typeof K?(oe=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,isNaN(K)&&(K=Ce?0:X.length-1),K<0&&(K=X.length+K),K>=X.length){if(Ce)return-1;K=X.length-1}else if(K<0){if(!Ce)return-1;K=0}if("string"==typeof $&&($=h.from($,oe)),h.isBuffer($))return 0===$.length?-1:H(X,$,K,oe,Ce);if("number"==typeof $)return $&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?Ce?Uint8Array.prototype.indexOf.call(X,$,K):Uint8Array.prototype.lastIndexOf.call(X,$,K):H(X,[$],K,oe,Ce);throw new TypeError("val must be string, number or Buffer")}function H(X,$,K,oe,Ce){var ct,Oe=1,Ze=X.length,st=$.length;if(void 0!==oe&&("ucs2"===(oe=String(oe).toLowerCase())||"ucs-2"===oe||"utf16le"===oe||"utf-16le"===oe)){if(X.length<2||$.length<2)return-1;Oe=2,Ze/=2,st/=2,K/=2}function et(Kt,_t){return 1===Oe?Kt[_t]:Kt.readUInt16BE(_t*Oe)}if(Ce){var xt=-1;for(ct=K;ct<Ze;ct++)if(et(X,ct)===et($,-1===xt?0:ct-xt)){if(-1===xt&&(xt=ct),ct-xt+1===st)return xt*Oe}else-1!==xt&&(ct-=ct-xt),xt=-1}else for(K+st>Ze&&(K=Ze-st),ct=K;ct>=0;ct--){for(var tt=!0,Et=0;Et<st;Et++)if(et(X,ct+Et)!==et($,Et)){tt=!1;break}if(tt)return ct}return-1}function ee(X,$,K,oe){K=Number(K)||0;var Ce=X.length-K;oe?(oe=Number(oe))>Ce&&(oe=Ce):oe=Ce;var Oe=$.length;if(Oe%2!=0)throw new TypeError("Invalid hex string");oe>Oe/2&&(oe=Oe/2);for(var Ze=0;Ze<oe;++Ze){var st=parseInt($.substr(2*Ze,2),16);if(isNaN(st))return Ze;X[K+Ze]=st}return Ze}function fe(X,$,K,oe){return z(ce($,X.length-K),X,K,oe)}function ue(X,$,K,oe){return z(function De(X){for(var $=[],K=0;K<X.length;++K)$.push(255&X.charCodeAt(K));return $}($),X,K,oe)}function be(X,$,K,oe){return ue(X,$,K,oe)}function q(X,$,K,oe){return z(ne($),X,K,oe)}function se(X,$,K,oe){return z(function le(X,$){for(var K,oe,Oe=[],Ze=0;Ze<X.length&&!(($-=2)<0);++Ze)oe=(K=X.charCodeAt(Ze))>>8,Oe.push(K%256),Oe.push(oe);return Oe}($,X.length-K),X,K,oe)}function V(X,$,K){return C.fromByteArray(0===$&&K===X.length?X:X.slice($,K))}function de(X,$,K){K=Math.min(X.length,K);for(var oe=[],Ce=$;Ce<K;){var et,ct,xt,tt,Oe=X[Ce],Ze=null,st=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Ce+st<=K)switch(st){case 1:Oe<128&&(Ze=Oe);break;case 2:128==(192&(et=X[Ce+1]))&&(tt=(31&Oe)<<6|63&et)>127&&(Ze=tt);break;case 3:ct=X[Ce+2],128==(192&(et=X[Ce+1]))&&128==(192&ct)&&(tt=(15&Oe)<<12|(63&et)<<6|63&ct)>2047&&(tt<55296||tt>57343)&&(Ze=tt);break;case 4:ct=X[Ce+2],xt=X[Ce+3],128==(192&(et=X[Ce+1]))&&128==(192&ct)&&128==(192&xt)&&(tt=(15&Oe)<<18|(63&et)<<12|(63&ct)<<6|63&xt)>65535&&tt<1114112&&(Ze=tt)}null===Ze?(Ze=65533,st=1):Ze>65535&&(oe.push((Ze-=65536)>>>10&1023|55296),Ze=56320|1023&Ze),oe.push(Ze),Ce+=st}return function pe(X){var $=X.length;if($<=Q)return String.fromCharCode.apply(String,X);for(var K="",oe=0;oe<$;)K+=String.fromCharCode.apply(String,X.slice(oe,oe+=Q));return K}(oe)}w.Buffer=h,w.SlowBuffer=function y(X){return+X!=X&&(X=0),h.alloc(+X)},w.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function j(){try{var X=new Uint8Array(1);return X.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===X.foo()&&"function"==typeof X.subarray&&0===X.subarray(1,1).byteLength}catch($){return!1}}(),w.kMaxLength=F(),h.poolSize=8192,h._augment=function(X){return X.__proto__=h.prototype,X},h.from=function(X,$,K){return u(null,X,$,K)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(X,$,K){return function _(X,$,K,oe){return p($),$<=0?D(X,$):void 0!==K?"string"==typeof oe?D(X,$).fill(K,oe):D(X,$).fill(K):D(X,$)}(null,X,$,K)},h.allocUnsafe=function(X){return b(null,X)},h.allocUnsafeSlow=function(X){return b(null,X)},h.isBuffer=function($){return!(null==$||!$._isBuffer)},h.compare=function($,K){if(!h.isBuffer($)||!h.isBuffer(K))throw new TypeError("Arguments must be Buffers");if($===K)return 0;for(var oe=$.length,Ce=K.length,Oe=0,Ze=Math.min(oe,Ce);Oe<Ze;++Oe)if($[Oe]!==K[Oe]){oe=$[Oe],Ce=K[Oe];break}return oe<Ce?-1:Ce<oe?1:0},h.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function($,K){if(!U($))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$.length)return h.alloc(0);var oe;if(void 0===K)for(K=0,oe=0;oe<$.length;++oe)K+=$[oe].length;var Ce=h.allocUnsafe(K),Oe=0;for(oe=0;oe<$.length;++oe){var Ze=$[oe];if(!h.isBuffer(Ze))throw new TypeError('"list" argument must be an Array of Buffers');Ze.copy(Ce,Oe),Oe+=Ze.length}return Ce},h.byteLength=S,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<$;K+=2)A(this,K,K+1);return this},h.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<$;K+=4)A(this,K,K+3),A(this,K+1,K+2);return this},h.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<$;K+=8)A(this,K,K+7),A(this,K+1,K+6),A(this,K+2,K+5),A(this,K+3,K+4);return this},h.prototype.toString=function(){var $=0|this.length;return 0===$?"":0===arguments.length?de(this,0,$):E.apply(this,arguments)},h.prototype.equals=function($){if(!h.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||0===h.compare(this,$)},h.prototype.inspect=function(){var $="",K=w.INSPECT_MAX_BYTES;return this.length>0&&($=this.toString("hex",0,K).match(/.{2}/g).join(" "),this.length>K&&($+=" ... ")),"<Buffer "+$+">"},h.prototype.compare=function($,K,oe,Ce,Oe){if(!h.isBuffer($))throw new TypeError("Argument must be a Buffer");if(void 0===K&&(K=0),void 0===oe&&(oe=$?$.length:0),void 0===Ce&&(Ce=0),void 0===Oe&&(Oe=this.length),K<0||oe>$.length||Ce<0||Oe>this.length)throw new RangeError("out of range index");if(Ce>=Oe&&K>=oe)return 0;if(Ce>=Oe)return-1;if(K>=oe)return 1;if(this===$)return 0;for(var Ze=(Oe>>>=0)-(Ce>>>=0),st=(oe>>>=0)-(K>>>=0),et=Math.min(Ze,st),ct=this.slice(Ce,Oe),xt=$.slice(K,oe),tt=0;tt<et;++tt)if(ct[tt]!==xt[tt]){Ze=ct[tt],st=xt[tt];break}return Ze<st?-1:st<Ze?1:0},h.prototype.includes=function($,K,oe){return-1!==this.indexOf($,K,oe)},h.prototype.indexOf=function($,K,oe){return I(this,$,K,oe,!0)},h.prototype.lastIndexOf=function($,K,oe){return I(this,$,K,oe,!1)},h.prototype.write=function($,K,oe,Ce){if(void 0===K)Ce="utf8",oe=this.length,K=0;else if(void 0===oe&&"string"==typeof K)Ce=K,oe=this.length,K=0;else{if(!isFinite(K))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");K|=0,isFinite(oe)?(oe|=0,void 0===Ce&&(Ce="utf8")):(Ce=oe,oe=void 0)}var Oe=this.length-K;if((void 0===oe||oe>Oe)&&(oe=Oe),$.length>0&&(oe<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ce||(Ce="utf8");for(var Ze=!1;;)switch(Ce){case"hex":return ee(this,$,K,oe);case"utf8":case"utf-8":return fe(this,$,K,oe);case"ascii":return ue(this,$,K,oe);case"latin1":case"binary":return be(this,$,K,oe);case"base64":return q(this,$,K,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,$,K,oe);default:if(Ze)throw new TypeError("Unknown encoding: "+Ce);Ce=(""+Ce).toLowerCase(),Ze=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;function me(X,$,K){var oe="";K=Math.min(X.length,K);for(var Ce=$;Ce<K;++Ce)oe+=String.fromCharCode(127&X[Ce]);return oe}function xe(X,$,K){var oe="";K=Math.min(X.length,K);for(var Ce=$;Ce<K;++Ce)oe+=String.fromCharCode(X[Ce]);return oe}function _e(X,$,K){var oe=X.length;(!$||$<0)&&($=0),(!K||K<0||K>oe)&&(K=oe);for(var Ce="",Oe=$;Oe<K;++Oe)Ce+=W(X[Oe]);return Ce}function Ie(X,$,K){for(var oe=X.slice($,K),Ce="",Oe=0;Oe<oe.length;Oe+=2)Ce+=String.fromCharCode(oe[Oe]+256*oe[Oe+1]);return Ce}function Te(X,$,K){if(X%1!=0||X<0)throw new RangeError("offset is not uint");if(X+$>K)throw new RangeError("Trying to access beyond buffer length")}function ke(X,$,K,oe,Ce,Oe){if(!h.isBuffer(X))throw new TypeError('"buffer" argument must be a Buffer instance');if($>Ce||$<Oe)throw new RangeError('"value" argument is out of bounds');if(K+oe>X.length)throw new RangeError("Index out of range")}function Ue(X,$,K,oe){$<0&&($=65535+$+1);for(var Ce=0,Oe=Math.min(X.length-K,2);Ce<Oe;++Ce)X[K+Ce]=($&255<<8*(oe?Ce:1-Ce))>>>8*(oe?Ce:1-Ce)}function Fe(X,$,K,oe){$<0&&($=4294967295+$+1);for(var Ce=0,Oe=Math.min(X.length-K,4);Ce<Oe;++Ce)X[K+Ce]=$>>>8*(oe?Ce:3-Ce)&255}function je(X,$,K,oe,Ce,Oe){if(K+oe>X.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Pe(X,$,K,oe,Ce){return Ce||je(X,0,K,4),R.write(X,$,K,oe,23,4),K+4}function He(X,$,K,oe,Ce){return Ce||je(X,0,K,8),R.write(X,$,K,oe,52,8),K+8}h.prototype.slice=function($,K){var Ce,oe=this.length;if(($=~~$)<0?($+=oe)<0&&($=0):$>oe&&($=oe),(K=void 0===K?oe:~~K)<0?(K+=oe)<0&&(K=0):K>oe&&(K=oe),K<$&&(K=$),h.TYPED_ARRAY_SUPPORT)(Ce=this.subarray($,K)).__proto__=h.prototype;else{var Oe=K-$;Ce=new h(Oe,void 0);for(var Ze=0;Ze<Oe;++Ze)Ce[Ze]=this[Ze+$]}return Ce},h.prototype.readUIntLE=function($,K,oe){$|=0,K|=0,oe||Te($,K,this.length);for(var Ce=this[$],Oe=1,Ze=0;++Ze<K&&(Oe*=256);)Ce+=this[$+Ze]*Oe;return Ce},h.prototype.readUIntBE=function($,K,oe){$|=0,K|=0,oe||Te($,K,this.length);for(var Ce=this[$+--K],Oe=1;K>0&&(Oe*=256);)Ce+=this[$+--K]*Oe;return Ce},h.prototype.readUInt8=function($,K){return K||Te($,1,this.length),this[$]},h.prototype.readUInt16LE=function($,K){return K||Te($,2,this.length),this[$]|this[$+1]<<8},h.prototype.readUInt16BE=function($,K){return K||Te($,2,this.length),this[$]<<8|this[$+1]},h.prototype.readUInt32LE=function($,K){return K||Te($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},h.prototype.readUInt32BE=function($,K){return K||Te($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},h.prototype.readIntLE=function($,K,oe){$|=0,K|=0,oe||Te($,K,this.length);for(var Ce=this[$],Oe=1,Ze=0;++Ze<K&&(Oe*=256);)Ce+=this[$+Ze]*Oe;return Ce>=(Oe*=128)&&(Ce-=Math.pow(2,8*K)),Ce},h.prototype.readIntBE=function($,K,oe){$|=0,K|=0,oe||Te($,K,this.length);for(var Ce=K,Oe=1,Ze=this[$+--Ce];Ce>0&&(Oe*=256);)Ze+=this[$+--Ce]*Oe;return Ze>=(Oe*=128)&&(Ze-=Math.pow(2,8*K)),Ze},h.prototype.readInt8=function($,K){return K||Te($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},h.prototype.readInt16LE=function($,K){K||Te($,2,this.length);var oe=this[$]|this[$+1]<<8;return 32768&oe?4294901760|oe:oe},h.prototype.readInt16BE=function($,K){K||Te($,2,this.length);var oe=this[$+1]|this[$]<<8;return 32768&oe?4294901760|oe:oe},h.prototype.readInt32LE=function($,K){return K||Te($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},h.prototype.readInt32BE=function($,K){return K||Te($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},h.prototype.readFloatLE=function($,K){return K||Te($,4,this.length),R.read(this,$,!0,23,4)},h.prototype.readFloatBE=function($,K){return K||Te($,4,this.length),R.read(this,$,!1,23,4)},h.prototype.readDoubleLE=function($,K){return K||Te($,8,this.length),R.read(this,$,!0,52,8)},h.prototype.readDoubleBE=function($,K){return K||Te($,8,this.length),R.read(this,$,!1,52,8)},h.prototype.writeUIntLE=function($,K,oe,Ce){$=+$,K|=0,oe|=0,Ce||ke(this,$,K,oe,Math.pow(2,8*oe)-1,0);var Ze=1,st=0;for(this[K]=255&$;++st<oe&&(Ze*=256);)this[K+st]=$/Ze&255;return K+oe},h.prototype.writeUIntBE=function($,K,oe,Ce){$=+$,K|=0,oe|=0,Ce||ke(this,$,K,oe,Math.pow(2,8*oe)-1,0);var Ze=oe-1,st=1;for(this[K+Ze]=255&$;--Ze>=0&&(st*=256);)this[K+Ze]=$/st&255;return K+oe},h.prototype.writeUInt8=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,1,255,0),h.TYPED_ARRAY_SUPPORT||($=Math.floor($)),this[K]=255&$,K+1},h.prototype.writeUInt16LE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[K]=255&$,this[K+1]=$>>>8):Ue(this,$,K,!0),K+2},h.prototype.writeUInt16BE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[K]=$>>>8,this[K+1]=255&$):Ue(this,$,K,!1),K+2},h.prototype.writeUInt32LE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[K+3]=$>>>24,this[K+2]=$>>>16,this[K+1]=$>>>8,this[K]=255&$):Fe(this,$,K,!0),K+4},h.prototype.writeUInt32BE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=255&$):Fe(this,$,K,!1),K+4},h.prototype.writeIntLE=function($,K,oe,Ce){if($=+$,K|=0,!Ce){var Oe=Math.pow(2,8*oe-1);ke(this,$,K,oe,Oe-1,-Oe)}var Ze=0,st=1,et=0;for(this[K]=255&$;++Ze<oe&&(st*=256);)$<0&&0===et&&0!==this[K+Ze-1]&&(et=1),this[K+Ze]=($/st>>0)-et&255;return K+oe},h.prototype.writeIntBE=function($,K,oe,Ce){if($=+$,K|=0,!Ce){var Oe=Math.pow(2,8*oe-1);ke(this,$,K,oe,Oe-1,-Oe)}var Ze=oe-1,st=1,et=0;for(this[K+Ze]=255&$;--Ze>=0&&(st*=256);)$<0&&0===et&&0!==this[K+Ze+1]&&(et=1),this[K+Ze]=($/st>>0)-et&255;return K+oe},h.prototype.writeInt8=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,1,127,-128),h.TYPED_ARRAY_SUPPORT||($=Math.floor($)),$<0&&($=255+$+1),this[K]=255&$,K+1},h.prototype.writeInt16LE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[K]=255&$,this[K+1]=$>>>8):Ue(this,$,K,!0),K+2},h.prototype.writeInt16BE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[K]=$>>>8,this[K+1]=255&$):Ue(this,$,K,!1),K+2},h.prototype.writeInt32LE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[K]=255&$,this[K+1]=$>>>8,this[K+2]=$>>>16,this[K+3]=$>>>24):Fe(this,$,K,!0),K+4},h.prototype.writeInt32BE=function($,K,oe){return $=+$,K|=0,oe||ke(this,$,K,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),h.TYPED_ARRAY_SUPPORT?(this[K]=$>>>24,this[K+1]=$>>>16,this[K+2]=$>>>8,this[K+3]=255&$):Fe(this,$,K,!1),K+4},h.prototype.writeFloatLE=function($,K,oe){return Pe(this,$,K,!0,oe)},h.prototype.writeFloatBE=function($,K,oe){return Pe(this,$,K,!1,oe)},h.prototype.writeDoubleLE=function($,K,oe){return He(this,$,K,!0,oe)},h.prototype.writeDoubleBE=function($,K,oe){return He(this,$,K,!1,oe)},h.prototype.copy=function($,K,oe,Ce){if(oe||(oe=0),!Ce&&0!==Ce&&(Ce=this.length),K>=$.length&&(K=$.length),K||(K=0),Ce>0&&Ce<oe&&(Ce=oe),Ce===oe||0===$.length||0===this.length)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(oe<0||oe>=this.length)throw new RangeError("sourceStart out of bounds");if(Ce<0)throw new RangeError("sourceEnd out of bounds");Ce>this.length&&(Ce=this.length),$.length-K<Ce-oe&&(Ce=$.length-K+oe);var Ze,Oe=Ce-oe;if(this===$&&oe<K&&K<Ce)for(Ze=Oe-1;Ze>=0;--Ze)$[Ze+K]=this[Ze+oe];else if(Oe<1e3||!h.TYPED_ARRAY_SUPPORT)for(Ze=0;Ze<Oe;++Ze)$[Ze+K]=this[Ze+oe];else Uint8Array.prototype.set.call($,this.subarray(oe,oe+Oe),K);return Oe},h.prototype.fill=function($,K,oe,Ce){if("string"==typeof $){if("string"==typeof K?(Ce=K,K=0,oe=this.length):"string"==typeof oe&&(Ce=oe,oe=this.length),1===$.length){var Oe=$.charCodeAt(0);Oe<256&&($=Oe)}if(void 0!==Ce&&"string"!=typeof Ce)throw new TypeError("encoding must be a string");if("string"==typeof Ce&&!h.isEncoding(Ce))throw new TypeError("Unknown encoding: "+Ce)}else"number"==typeof $&&($&=255);if(K<0||this.length<K||this.length<oe)throw new RangeError("Out of range index");if(oe<=K)return this;var Ze;if(K>>>=0,oe=void 0===oe?this.length:oe>>>0,$||($=0),"number"==typeof $)for(Ze=K;Ze<oe;++Ze)this[Ze]=$;else{var st=h.isBuffer($)?$:ce(new h($,Ce).toString()),et=st.length;for(Ze=0;Ze<oe-K;++Ze)this[Ze+K]=st[Ze%et]}return this};var Le=/[^+\/0-9A-Za-z-_]/g;function W(X){return X<16?"0"+X.toString(16):X.toString(16)}function ce(X,$){$=$||1/0;for(var K,oe=X.length,Ce=null,Oe=[],Ze=0;Ze<oe;++Ze){if((K=X.charCodeAt(Ze))>55295&&K<57344){if(!Ce){if(K>56319){($-=3)>-1&&Oe.push(239,191,189);continue}if(Ze+1===oe){($-=3)>-1&&Oe.push(239,191,189);continue}Ce=K;continue}if(K<56320){($-=3)>-1&&Oe.push(239,191,189),Ce=K;continue}K=65536+(Ce-55296<<10|K-56320)}else Ce&&($-=3)>-1&&Oe.push(239,191,189);if(Ce=null,K<128){if(($-=1)<0)break;Oe.push(K)}else if(K<2048){if(($-=2)<0)break;Oe.push(K>>6|192,63&K|128)}else if(K<65536){if(($-=3)<0)break;Oe.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;Oe.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return Oe}function ne(X){return C.toByteArray(function ye(X){if((X=function ae(X){return X.trim?X.trim():X.replace(/^\s+|\s+$/g,"")}(X).replace(Le,"")).length<2)return"";for(;X.length%4!=0;)X+="=";return X}(X))}function z(X,$,K,oe){for(var Ce=0;Ce<oe&&!(Ce+K>=$.length||Ce>=X.length);++Ce)$[Ce+K]=X[Ce];return Ce}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(Ge,w,i){var e={parseBuffer:function(U){return new C(U).parse()},addBoxProcessor:function(U,j){"string"!=typeof U||"function"!=typeof j||(R.prototype._boxProcessors[U]=j)},createFile:function(){return new C},createBox:function(U,j,F){var D=R.create(U);return j&&j.append(D,F),D},createFullBox:function(U,j,F){var D=e.createBox(U,j,F);return D.version=0,D.flags=0,D},Utils:{}};e.Utils.dataViewToString=function(U,j){var F=j||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(F).decode(U);var D=[],h=0;if("utf-8"===F)for(;h<U.byteLength;){var u=U.getUint8(h++);u<128||(u<224?(u=(31&u)<<6,u|=63&U.getUint8(h++)):u<240?(u=(15&u)<<12,u|=(63&U.getUint8(h++))<<6,u|=63&U.getUint8(h++)):(u=(7&u)<<18,u|=(63&U.getUint8(h++))<<12,u|=(63&U.getUint8(h++))<<6,u|=63&U.getUint8(h++))),D.push(String.fromCharCode(u))}else for(;h<U.byteLength;)D.push(String.fromCharCode(U.getUint8(h++)));return D.join("")},e.Utils.utf8ToByteArray=function(U){var j,F;if("undefined"!=typeof TextEncoder)j=(new TextEncoder).encode(U);else for(j=[],F=0;F<U.length;++F){var D=U.charCodeAt(F);D<128?j.push(D):D<2048?(j.push(192|D>>6),j.push(128|63&D)):D<65536?(j.push(224|D>>12),j.push(128|63&D>>6),j.push(128|63&D)):(j.push(240|D>>18),j.push(128|63&D>>12),j.push(128|63&D>>6),j.push(128|63&D))}return j},e.Utils.appendBox=function(U,j,F){if(j._offset=U._cursor.offset,j._root=U._root?U._root:U,j._raw=U._raw,j._parent=U,-1!==F){if(null==F)return void U.boxes.push(j);var h,D=-1;if("number"==typeof F)D=F;else{if("string"==typeof F)h=F;else{if("object"!=typeof F||!F.type)return void U.boxes.push(j);h=F.type}for(var u=0;u<U.boxes.length;u++)if(h===U.boxes[u].type){D=u+1;break}}U.boxes.splice(D,0,j)}},w.parseBuffer=e.parseBuffer,w.addBoxProcessor=e.addBoxProcessor,w.createFile=e.createFile,w.createBox=e.createBox,w.createFullBox=e.createFullBox,w.Utils=e.Utils,e.Cursor=function(U){this.offset=void 0===U?0:U};var C=function(U){this._cursor=new e.Cursor,this.boxes=[],U&&(this._raw=new DataView(U))};C.prototype.fetch=function(U){var j=this.fetchAll(U,!0);return j.length?j[0]:null},C.prototype.fetchAll=function(U,j){var F=[];return C._sweep.call(this,U,F,j),F},C.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var U=R.parse(this);if(void 0===U.type)break;this.boxes.push(U)}return this},C._sweep=function(U,j,F){for(var D in this.type&&this.type==U&&j.push(this),this.boxes){if(j.length&&F)return;C._sweep.call(this.boxes[D],U,j,F)}},C.prototype.write=function(){var j,U=0;for(j=0;j<this.boxes.length;j++)U+=this.boxes[j].getLength(!1);var F=new Uint8Array(U);for(this._rawo=new DataView(F.buffer),this.bytes=F,this._cursor.offset=0,j=0;j<this.boxes.length;j++)this.boxes[j].write();return F.buffer},C.prototype.append=function(U,j){e.Utils.appendBox(this,U,j)};var R=function(){this._cursor=new e.Cursor};R.parse=function(U){var j=new R;return j._offset=U._cursor.offset,j._root=U._root?U._root:U,j._raw=U._raw,j._parent=U,j._parseBox(),U._cursor.offset=j._raw.byteOffset+j._raw.byteLength,j},R.create=function(U){var j=new R;return j.type=U,j.boxes=[],j},R.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],R.prototype._boxProcessors={},R.prototype._procField=function(U,j,F){this._parsing?this[U]=this._readField(j,F):this._writeField(j,F,this[U])},R.prototype._procFieldArray=function(U,j,F,D){var h;if(this._parsing)for(this[U]=[],h=0;h<j;h++)this[U][h]=this._readField(F,D);else for(h=0;h<this[U].length;h++)this._writeField(F,D,this[U][h])},R.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},R.prototype._procEntries=function(U,j,F){var D;if(this._parsing)for(this[U]=[],D=0;D<j;D++)this[U].push({}),F.call(this,this[U][D]);else for(D=0;D<j;D++)F.call(this,this[U][D])},R.prototype._procSubEntries=function(U,j,F,D){var h;if(this._parsing)for(U[j]=[],h=0;h<F;h++)U[j].push({}),D.call(this,U[j][h]);else for(h=0;h<F;h++)D.call(this,U[j][h])},R.prototype._procEntryField=function(U,j,F,D){this._parsing?U[j]=this._readField(F,D):this._writeField(F,D,U[j])},R.prototype._procSubBoxes=function(U,j){var F;if(this._parsing)for(this[U]=[],F=0;F<j;F++)this[U].push(R.parse(this));else for(F=0;F<j;F++)this._rawo?this[U][F].write():this.size+=this[U][F].getLength()},R.prototype._readField=function(U,j){switch(U){case"uint":return this._readUint(j);case"int":return this._readInt(j);case"template":return this._readTemplate(j);case"string":return-1===j?this._readTerminatedString():this._readString(j);case"data":return this._readData(j);case"utf8":return this._readUTF8String();default:return-1}},R.prototype._readInt=function(U){var j=null,F=this._cursor.offset-this._raw.byteOffset;switch(U){case 8:j=this._raw.getInt8(F);break;case 16:j=this._raw.getInt16(F);break;case 32:j=this._raw.getInt32(F);break;case 64:var D=this._raw.getInt32(F),h=this._raw.getInt32(F+4);j=D*Math.pow(2,32)+h}return this._cursor.offset+=U>>3,j},R.prototype._readUint=function(U){var D,h,j=null,F=this._cursor.offset-this._raw.byteOffset;switch(U){case 8:j=this._raw.getUint8(F);break;case 16:j=this._raw.getUint16(F);break;case 24:j=((D=this._raw.getUint16(F))<<8)+(h=this._raw.getUint8(F+2));break;case 32:j=this._raw.getUint32(F);break;case 64:D=this._raw.getUint32(F),h=this._raw.getUint32(F+4),j=D*Math.pow(2,32)+h}return this._cursor.offset+=U>>3,j},R.prototype._readString=function(U){for(var j="",F=0;F<U;F++){var D=this._readUint(8);j+=String.fromCharCode(D)}return j},R.prototype._readTemplate=function(U){return this._readUint(U/2)+this._readUint(U/2)/Math.pow(2,U/2)},R.prototype._readTerminatedString=function(){for(var U="";this._cursor.offset-this._offset<this._raw.byteLength;){var j=this._readUint(8);if(0===j)break;U+=String.fromCharCode(j)}return U},R.prototype._readData=function(U){var j=U>0?U:this._raw.byteLength-(this._cursor.offset-this._offset);if(j>0){var F=new Uint8Array(this._raw.buffer,this._cursor.offset,j);return this._cursor.offset+=j,F}return null},R.prototype._readUTF8String=function(){var U=this._raw.byteLength-(this._cursor.offset-this._offset),j=null;return U>0&&(j=new DataView(this._raw.buffer,this._cursor.offset,U),this._cursor.offset+=U),j&&e.Utils.dataViewToString(j)},R.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},R.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},R.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(R.parse(this))},R.prototype.append=function(U,j){e.Utils.appendBox(this,U,j)},R.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var U=0;U<this.boxes.length;U++)this.size+=this.boxes[U].getLength();return this._data&&this._writeData(this._data),this.size},R.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var U=0;U<this.boxes.length;U++)this.boxes[U].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},R.prototype._writeInt=function(U,j){if(this._rawo){var F=this._cursor.offset-this._rawo.byteOffset;switch(U){case 8:this._rawo.setInt8(F,j);break;case 16:this._rawo.setInt16(F,j);break;case 32:this._rawo.setInt32(F,j);break;case 64:var D=Math.floor(j/Math.pow(2,32)),h=j-D*Math.pow(2,32);this._rawo.setUint32(F,D),this._rawo.setUint32(F+4,h)}this._cursor.offset+=U>>3}else this.size+=U>>3},R.prototype._writeUint=function(U,j){if(this._rawo){var D,h,F=this._cursor.offset-this._rawo.byteOffset;switch(U){case 8:this._rawo.setUint8(F,j);break;case 16:this._rawo.setUint16(F,j);break;case 24:h=255&j,this._rawo.setUint16(F,D=(16776960&j)>>8),this._rawo.setUint8(F+2,h);break;case 32:this._rawo.setUint32(F,j);break;case 64:h=j-(D=Math.floor(j/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(F,D),this._rawo.setUint32(F+4,h)}this._cursor.offset+=U>>3}else this.size+=U>>3},R.prototype._writeString=function(U,j){for(var F=0;F<U;F++)this._writeUint(8,j.charCodeAt(F))},R.prototype._writeTerminatedString=function(U){if(0!==U.length){for(var j=0;j<U.length;j++)this._writeUint(8,U.charCodeAt(j));this._writeUint(8,0)}},R.prototype._writeTemplate=function(U,j){var F=Math.floor(j),D=(j-F)*Math.pow(2,U/2);this._writeUint(U/2,F),this._writeUint(U/2,D)},R.prototype._writeData=function(U){if(U)if(this._rawo){if(U instanceof Array){for(var F=this._cursor.offset-this._rawo.byteOffset,j=0;j<U.length;j++)this._rawo.setInt8(F+j,U[j]);this._cursor.offset+=U.length}U instanceof Uint8Array&&(this._root.bytes.set(U,this._cursor.offset),this._cursor.offset+=U.length)}else this.size+=U.length},R.prototype._writeUTF8String=function(U){var j=e.Utils.utf8ToByteArray(U);if(this._rawo)for(var F=new DataView(this._rawo.buffer,this._cursor.offset,j.length),D=0;D<j.length;D++)F.setUint8(D,j[D]);else this.size+=j.length},R.prototype._writeField=function(U,j,F){switch(U){case"uint":this._writeUint(j,F);break;case"int":this._writeInt(j,F);break;case"template":this._writeTemplate(j,F);break;case"string":-1==j?this._writeTerminatedString(F):this._writeString(j,F);break;case"data":this._writeData(F);break;case"utf8":this._writeUTF8String(F)}},R.prototype._boxProcessors.avc1=R.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},R.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(U){this._procEntryField(U,"segment_duration","uint",1===this.version?64:32),this._procEntryField(U,"media_time","int",1===this.version?64:32),this._procEntryField(U,"media_rate_integer","int",16),this._procEntryField(U,"media_rate_fraction","int",16)})},R.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},R.prototype._boxProcessors.free=R.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},R.prototype._boxProcessors.ftyp=R.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var U=-1;this._parsing&&(U=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",U,"string",4)},R.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},R.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},R.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),!this._parsing&&"string"==typeof this.language&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},R.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},R.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},R.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},R.prototype._boxProcessors.mp4a=R.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},R.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},R.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},R.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},R.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},R.prototype._boxProcessors.sdtp=function(){this._procFullBox();var U=-1;this._parsing&&(U=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",U,"uint",8)},R.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(U){this._parsing||(U.reference=(1&U.reference_type)<<31,U.reference|=2147483647&U.referenced_size,U.sap=(1&U.starts_with_SAP)<<31,U.sap|=(3&U.SAP_type)<<28,U.sap|=268435455&U.SAP_delta_time),this._procEntryField(U,"reference","uint",32),this._procEntryField(U,"subsegment_duration","uint",32),this._procEntryField(U,"sap","uint",32),this._parsing&&(U.reference_type=U.reference>>31&1,U.referenced_size=2147483647&U.reference,U.starts_with_SAP=U.sap>>31&1,U.SAP_type=U.sap>>28&7,U.SAP_delta_time=268435455&U.sap)})},R.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},R.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(U){this._procEntryField(U,"ranges_count","uint",32),this._procSubEntries(U,"ranges",U.ranges_count,function(j){this._procEntryField(j,"level","uint",8),this._procEntryField(j,"range_size","uint",24)})})},R.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},R.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(U){this._procEntryField(U,"sample_delta","uint",32),this._procEntryField(U,"subsample_count","uint",16),this._procSubEntries(U,"subsamples",U.subsample_count,function(j){this._procEntryField(j,"subsample_size","uint",1===this.version?32:16),this._procEntryField(j,"subsample_priority","uint",8),this._procEntryField(j,"discardable","uint",8),this._procEntryField(j,"codec_specific_parameters","uint",32)})})},R.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},R.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},R.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(U){this._procEntryField(U,"time","uint",1===this.version?64:32),this._procEntryField(U,"moof_offset","uint",1===this.version?64:32),this._procEntryField(U,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(U,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(U,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},R.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},R.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},R.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(U){256&this.flags&&this._procEntryField(U,"sample_duration","uint",32),512&this.flags&&this._procEntryField(U,"sample_size","uint",32),1024&this.flags&&this._procEntryField(U,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(U,"sample_composition_time_offset",1===this.version?"int":"uint",32)})},R.prototype._boxProcessors["url "]=R.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},R.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},R.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},R.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},R.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(Ge,w,i){function B(O){return Object.prototype.toString.call(O)}w.isArray=function e(O){return Array.isArray?Array.isArray(O):"[object Array]"===B(O)},w.isBoolean=function C(O){return"boolean"==typeof O},w.isNull=function R(O){return null===O},w.isNullOrUndefined=function U(O){return null==O},w.isNumber=function j(O){return"number"==typeof O},w.isString=function F(O){return"string"==typeof O},w.isSymbol=function D(O){return"symbol"==typeof O},w.isUndefined=function h(O){return void 0===O},w.isRegExp=function u(O){return"[object RegExp]"===B(O)},w.isObject=function p(O){return"object"==typeof O&&null!==O},w.isDate=function _(O){return"[object Date]"===B(O)},w.isError=function b(O){return"[object Error]"===B(O)||O instanceof Error},w.isFunction=function k(O){return"function"==typeof O},w.isPrimitive=function L(O){return null===O||"boolean"==typeof O||"number"==typeof O||"string"==typeof O||"symbol"==typeof O||void 0===O},w.isBuffer=i("./node_modules/buffer/index.js").Buffer.isBuffer},"./node_modules/es6-promise/auto.js":function(Ge,w,i){"use strict";Ge.exports=i("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(Ge,w,i){(function(e,C){var U;U=function(){"use strict";function U(Oe){return"function"==typeof Oe}var F=Array.isArray?Array.isArray:function(Oe){return"[object Array]"===Object.prototype.toString.call(Oe)},D=0,h=void 0,u=void 0,p=function(Ze,st){H[D]=Ze,H[D+1]=st,2===(D+=2)&&(u?u(ee):ue())};var k="undefined"!=typeof window?window:void 0,L=k||{},B=L.MutationObserver||L.WebKitMutationObserver,O="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),P="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function I(){var Oe=setTimeout;return function(){return Oe(ee,1)}}var H=new Array(1e3);function ee(){for(var Oe=0;Oe<D;Oe+=2)(0,H[Oe])(H[Oe+1]),H[Oe]=void 0,H[Oe+1]=void 0;D=0}var ue=void 0;function be(Oe,Ze){var st=this,et=new this.constructor(V);void 0===et[se]&&De(et);var ct=st._state;if(ct){var xt=arguments[ct-1];p(function(){return ye(ct,et,xt,st._result)})}else He(st,et,Oe,Ze);return et}function q(Oe){if(Oe&&"object"==typeof Oe&&Oe.constructor===this)return Oe;var st=new this(V);return Ue(st,Oe),st}ue=O?function y(){return function(){return e.nextTick(ee)}}():B?function E(){var Oe=0,Ze=new B(ee),st=document.createTextNode("");return Ze.observe(st,{characterData:!0}),function(){st.data=Oe=++Oe%2}}():P?function A(){var Oe=new MessageChannel;return Oe.port1.onmessage=ee,function(){return Oe.port2.postMessage(0)}}():void 0===k?function fe(){try{var Oe=Function("return this")().require("vertx");return h=Oe.runOnLoop||Oe.runOnContext,function S(){return void 0!==h?function(){h(ee)}:I()}()}catch(Ze){return I()}}():I();var se=Math.random().toString(36).substring(2);function V(){}var de=void 0;function ke(Oe,Ze,st){Ze.constructor===Oe.constructor&&st===be&&Ze.constructor.resolve===q?function Te(Oe,Ze){1===Ze._state?je(Oe,Ze._result):2===Ze._state?Pe(Oe,Ze._result):He(Ze,void 0,function(st){return Ue(Oe,st)},function(st){return Pe(Oe,st)})}(Oe,Ze):void 0===st?je(Oe,Ze):U(st)?function Ie(Oe,Ze,st){p(function(et){var ct=!1,xt=function _e(Oe,Ze,st,et){try{Oe.call(Ze,st,et)}catch(ct){return ct}}(st,Ze,function(tt){ct||(ct=!0,Ze!==tt?Ue(et,tt):je(et,tt))},function(tt){ct||(ct=!0,Pe(et,tt))});!ct&&xt&&(ct=!0,Pe(et,xt))},Oe)}(Oe,Ze,st):je(Oe,Ze)}function Ue(Oe,Ze){if(Oe===Ze)Pe(Oe,function me(){return new TypeError("You cannot resolve a promise with itself")}());else if(function R(Oe){var Ze=typeof Oe;return null!==Oe&&("object"===Ze||"function"===Ze)}(Ze)){var st=void 0;try{st=Ze.then}catch(et){return void Pe(Oe,et)}ke(Oe,Ze,st)}else je(Oe,Ze)}function Fe(Oe){Oe._onerror&&Oe._onerror(Oe._result),Le(Oe)}function je(Oe,Ze){Oe._state===de&&(Oe._result=Ze,Oe._state=1,0!==Oe._subscribers.length&&p(Le,Oe))}function Pe(Oe,Ze){Oe._state===de&&(Oe._state=2,Oe._result=Ze,p(Fe,Oe))}function He(Oe,Ze,st,et){var ct=Oe._subscribers,xt=ct.length;Oe._onerror=null,ct[xt]=Ze,ct[xt+1]=st,ct[xt+2]=et,0===xt&&Oe._state&&p(Le,Oe)}function Le(Oe){var Ze=Oe._subscribers,st=Oe._state;if(0!==Ze.length){for(var et=void 0,ct=void 0,xt=Oe._result,tt=0;tt<Ze.length;tt+=3)ct=Ze[tt+st],(et=Ze[tt])?ye(st,et,ct,xt):ct(xt);Oe._subscribers.length=0}}function ye(Oe,Ze,st,et){var ct=U(st),xt=void 0,tt=void 0,Et=!0;if(ct){try{xt=st(et)}catch(Kt){Et=!1,tt=Kt}if(Ze===xt)return void Pe(Ze,function xe(){return new TypeError("A promises callback cannot return that same promise.")}())}else xt=et;Ze._state!==de||(ct&&Et?Ue(Ze,xt):!1===Et?Pe(Ze,tt):1===Oe?je(Ze,xt):2===Oe&&Pe(Ze,xt))}var W=0;function De(Oe){Oe[se]=W++,Oe._state=void 0,Oe._result=void 0,Oe._subscribers=[]}var ne=function(){function Oe(Ze,st){this._instanceConstructor=Ze,this.promise=new Ze(V),this.promise[se]||De(this.promise),F(st)?(this.length=st.length,this._remaining=st.length,this._result=new Array(this.length),0===this.length?je(this.promise,this._result):(this.length=this.length||0,this._enumerate(st),0===this._remaining&&je(this.promise,this._result))):Pe(this.promise,function le(){return new Error("Array Methods must be provided an Array")}())}return Oe.prototype._enumerate=function(st){for(var et=0;this._state===de&&et<st.length;et++)this._eachEntry(st[et],et)},Oe.prototype._eachEntry=function(st,et){var ct=this._instanceConstructor,xt=ct.resolve;if(xt===q){var tt=void 0,Et=void 0,Kt=!1;try{tt=st.then}catch(At){Kt=!0,Et=At}if(tt===be&&st._state!==de)this._settledAt(st._state,et,st._result);else if("function"!=typeof tt)this._remaining--,this._result[et]=st;else if(ct===oe){var _t=new ct(V);Kt?Pe(_t,Et):ke(_t,st,tt),this._willSettleAt(_t,et)}else this._willSettleAt(new ct(function(At){return At(st)}),et)}else this._willSettleAt(xt(st),et)},Oe.prototype._settledAt=function(st,et,ct){var xt=this.promise;xt._state===de&&(this._remaining--,2===st?Pe(xt,ct):this._result[et]=ct),0===this._remaining&&je(xt,this._result)},Oe.prototype._willSettleAt=function(st,et){var ct=this;He(st,void 0,function(xt){return ct._settledAt(1,et,xt)},function(xt){return ct._settledAt(2,et,xt)})},Oe}();var oe=function(){function Oe(Ze){this[se]=function ce(){return W++}(),this._result=this._state=void 0,this._subscribers=[],V!==Ze&&("function"!=typeof Ze&&function $(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Oe?function ae(Oe,Ze){try{Ze(function(et){Ue(Oe,et)},function(et){Pe(Oe,et)})}catch(st){Pe(Oe,st)}}(this,Ze):function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Oe.prototype.catch=function(st){return this.then(null,st)},Oe.prototype.finally=function(st){var ct=this.constructor;return U(st)?this.then(function(xt){return ct.resolve(st()).then(function(){return xt})},function(xt){return ct.resolve(st()).then(function(){throw xt})}):this.then(st,st)},Oe}();return oe.prototype.then=be,oe.all=function z(Oe){return new ne(this,Oe).promise},oe.race=function te(Oe){var Ze=this;return F(Oe)?new Ze(function(st,et){for(var ct=Oe.length,xt=0;xt<ct;xt++)Ze.resolve(Oe[xt]).then(st,et)}):new Ze(function(st,et){return et(new TypeError("You must pass an array to race."))})},oe.resolve=q,oe.reject=function X(Oe){var st=new this(V);return Pe(st,Oe),st},oe._setScheduler=function _(Oe){u=Oe},oe._setAsap=function b(Oe){p=Oe},oe._asap=p,oe.polyfill=function Ce(){var Oe=void 0;if(void 0!==C)Oe=C;else if("undefined"!=typeof self)Oe=self;else try{Oe=Function("return this")()}catch(et){throw new Error("polyfill failed because global object is unavailable in this environment")}var Ze=Oe.Promise;if(Ze){var st=null;try{st=Object.prototype.toString.call(Ze.resolve())}catch(et){}if("[object Promise]"===st&&!Ze.cast)return}Oe.Promise=oe},oe.Promise=oe,oe},Ge.exports=U()}).call(this,i("./node_modules/process/browser.js"),i("./node_modules/webpack/buildin/global.js"))},"./node_modules/events/events.js":function(Ge,w,i){"use strict";var R,e="object"==typeof Reflect?Reflect:null,C=e&&"function"==typeof e.apply?e.apply:function(I,H,ee){return Function.prototype.apply.call(I,H,ee)};R=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:function(I){return Object.getOwnPropertyNames(I)};var j=Number.isNaN||function(I){return I!=I};function F(){F.init.call(this)}Ge.exports=F,Ge.exports.once=function y(A,I){return new Promise(function(H,ee){function fe(be){A.removeListener(I,ue),ee(be)}function ue(){"function"==typeof A.removeListener&&A.removeListener("error",fe),H([].slice.call(arguments))}E(A,I,ue,{once:!0}),"error"!==I&&function S(A,I,H){"function"==typeof A.on&&E(A,"error",I,H)}(A,fe,{once:!0})})},F.EventEmitter=F,F.prototype._events=void 0,F.prototype._eventsCount=0,F.prototype._maxListeners=void 0;var D=10;function h(A){if("function"!=typeof A)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}function u(A){return void 0===A._maxListeners?F.defaultMaxListeners:A._maxListeners}function p(A,I,H,ee){var fe,ue,be;if(h(H),void 0===(ue=A._events)?(ue=A._events=Object.create(null),A._eventsCount=0):(void 0!==ue.newListener&&(A.emit("newListener",I,H.listener?H.listener:H),ue=A._events),be=ue[I]),void 0===be)be=ue[I]=H,++A._eventsCount;else if("function"==typeof be?be=ue[I]=ee?[H,be]:[be,H]:ee?be.unshift(H):be.push(H),(fe=u(A))>0&&be.length>fe&&!be.warned){be.warned=!0;var q=new Error("Possible EventEmitter memory leak detected. "+be.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");q.name="MaxListenersExceededWarning",q.emitter=A,q.type=I,q.count=be.length,function U(A){console&&console.warn&&console.warn(A)}(q)}return A}function _(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(A,I,H){var ee={fired:!1,wrapFn:void 0,target:A,type:I,listener:H},fe=_.bind(ee);return fe.listener=H,ee.wrapFn=fe,fe}function k(A,I,H){var ee=A._events;if(void 0===ee)return[];var fe=ee[I];return void 0===fe?[]:"function"==typeof fe?H?[fe.listener||fe]:[fe]:H?function P(A){for(var I=new Array(A.length),H=0;H<I.length;++H)I[H]=A[H].listener||A[H];return I}(fe):B(fe,fe.length)}function L(A){var I=this._events;if(void 0!==I){var H=I[A];if("function"==typeof H)return 1;if(void 0!==H)return H.length}return 0}function B(A,I){for(var H=new Array(I),ee=0;ee<I;++ee)H[ee]=A[ee];return H}function E(A,I,H,ee){if("function"==typeof A.on)ee.once?A.once(I,H):A.on(I,H);else{if("function"!=typeof A.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A);A.addEventListener(I,function fe(ue){ee.once&&A.removeEventListener(I,fe),H(ue)})}}Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return D},set:function(A){if("number"!=typeof A||A<0||j(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");D=A}}),F.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},F.prototype.setMaxListeners=function(I){if("number"!=typeof I||I<0||j(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this},F.prototype.getMaxListeners=function(){return u(this)},F.prototype.emit=function(I){for(var H=[],ee=1;ee<arguments.length;ee++)H.push(arguments[ee]);var fe="error"===I,ue=this._events;if(void 0!==ue)fe=fe&&void 0===ue.error;else if(!fe)return!1;if(fe){var be;if(H.length>0&&(be=H[0]),be instanceof Error)throw be;var q=new Error("Unhandled error."+(be?" ("+be.message+")":""));throw q.context=be,q}var se=ue[I];if(void 0===se)return!1;if("function"==typeof se)C(se,this,H);else{var V=se.length,de=B(se,V);for(ee=0;ee<V;++ee)C(de[ee],this,H)}return!0},F.prototype.on=F.prototype.addListener=function(I,H){return p(this,I,H,!1)},F.prototype.prependListener=function(I,H){return p(this,I,H,!0)},F.prototype.once=function(I,H){return h(H),this.on(I,b(this,I,H)),this},F.prototype.prependOnceListener=function(I,H){return h(H),this.prependListener(I,b(this,I,H)),this},F.prototype.off=F.prototype.removeListener=function(I,H){var ee,fe,ue,be,q;if(h(H),void 0===(fe=this._events))return this;if(void 0===(ee=fe[I]))return this;if(ee===H||ee.listener===H)0==--this._eventsCount?this._events=Object.create(null):(delete fe[I],fe.removeListener&&this.emit("removeListener",I,ee.listener||H));else if("function"!=typeof ee){for(ue=-1,be=ee.length-1;be>=0;be--)if(ee[be]===H||ee[be].listener===H){q=ee[be].listener,ue=be;break}if(ue<0)return this;0===ue?ee.shift():function O(A,I){for(;I+1<A.length;I++)A[I]=A[I+1];A.pop()}(ee,ue),1===ee.length&&(fe[I]=ee[0]),void 0!==fe.removeListener&&this.emit("removeListener",I,q||H)}return this},F.prototype.removeAllListeners=function(I){var H,ee,fe;if(void 0===(ee=this._events))return this;if(void 0===ee.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ee[I]&&(0==--this._eventsCount?this._events=Object.create(null):delete ee[I]),this;if(0===arguments.length){var be,ue=Object.keys(ee);for(fe=0;fe<ue.length;++fe)"removeListener"!==(be=ue[fe])&&this.removeAllListeners(be);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(H=ee[I]))this.removeListener(I,H);else if(void 0!==H)for(fe=H.length-1;fe>=0;fe--)this.removeListener(I,H[fe]);return this},F.prototype.listeners=function(I){return k(this,I,!0)},F.prototype.rawListeners=function(I){return k(this,I,!1)},F.listenerCount=function(A,I){return"function"==typeof A.listenerCount?A.listenerCount(I):L.call(A,I)},F.prototype.listenerCount=L,F.prototype.eventNames=function(){return this._eventsCount>0?R(this._events):[]}},"./node_modules/fast-deep-equal/index.js":function(Ge,w,i){"use strict";var e=Array.isArray,C=Object.keys,R=Object.prototype.hasOwnProperty;Ge.exports=function U(j,F){if(j===F)return!0;if(j&&F&&"object"==typeof j&&"object"==typeof F){var u,p,_,D=e(j),h=e(F);if(D&&h){if((p=j.length)!=F.length)return!1;for(u=p;0!=u--;)if(!U(j[u],F[u]))return!1;return!0}if(D!=h)return!1;var b=j instanceof Date,k=F instanceof Date;if(b!=k)return!1;if(b&&k)return j.getTime()==F.getTime();var L=j instanceof RegExp,B=F instanceof RegExp;if(L!=B)return!1;if(L&&B)return j.toString()==F.toString();var O=C(j);if((p=O.length)!==C(F).length)return!1;for(u=p;0!=u--;)if(!R.call(F,O[u]))return!1;for(u=p;0!=u--;)if(!U(j[_=O[u]],F[_]))return!1;return!0}return j!=j&&F!=F}},"./node_modules/ieee754/index.js":function(Ge,w){w.read=function(i,e,C,R,U){var j,F,D=8*U-R-1,h=(1<<D)-1,u=h>>1,p=-7,_=C?U-1:0,b=C?-1:1,k=i[e+_];for(_+=b,j=k&(1<<-p)-1,k>>=-p,p+=D;p>0;j=256*j+i[e+_],_+=b,p-=8);for(F=j&(1<<-p)-1,j>>=-p,p+=R;p>0;F=256*F+i[e+_],_+=b,p-=8);if(0===j)j=1-u;else{if(j===h)return F?NaN:1/0*(k?-1:1);F+=Math.pow(2,R),j-=u}return(k?-1:1)*F*Math.pow(2,j-R)},w.write=function(i,e,C,R,U,j){var F,D,h,u=8*j-U-1,p=(1<<u)-1,_=p>>1,b=23===U?Math.pow(2,-24)-Math.pow(2,-77):0,k=R?0:j-1,L=R?1:-1,B=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(D=isNaN(e)?1:0,F=p):(F=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-F))<1&&(F--,h*=2),(e+=F+_>=1?b/h:b*Math.pow(2,1-_))*h>=2&&(F++,h/=2),F+_>=p?(D=0,F=p):F+_>=1?(D=(e*h-1)*Math.pow(2,U),F+=_):(D=e*Math.pow(2,_-1)*Math.pow(2,U),F=0));U>=8;i[C+k]=255&D,k+=L,D/=256,U-=8);for(F=F<<U|D,u+=U;u>0;i[C+k]=255&F,k+=L,F/=256,u-=8);i[C+k-L]|=128*B}},"./node_modules/imsc/src/main/js/doc.js":function(Ge,w,i){!function(e,C,R,U,j){function F(le){if("contents"in le)for(var ne=("styleAttrs"in le?le.styleAttrs[U.byName.ruby.qname]:null),z="span"===le.kind&&("container"===ne||"textContainer"===ne||"baseContainer"===ne),te=le.contents.length-1;te>=0;te--)!z||"styleAttrs"in le.contents[te]&&U.byName.ruby.qname in le.contents[te].styleAttrs?F(le.contents[te]):delete le.contents[te]}function D(le,ne,z,te){var X=te&&"seq"===te.timeContainer,$=0;te&&($=X&&z?z.end:te.begin),ne.begin=ne.explicit_begin?ne.explicit_begin+$:$;var K=ne.begin,oe=null;if("sets"in ne)for(var Ce=0;Ce<ne.sets.length;Ce++)D(le,ne.sets[Ce],oe,ne),K="seq"===ne.timeContainer?ne.sets[Ce].end:Math.max(K,ne.sets[Ce].end),oe=ne.sets[Ce];if("contents"in ne){if("contents"in ne)for(var Oe=0;Oe<ne.contents.length;Oe++)D(le,ne.contents[Oe],oe,ne),K="seq"===ne.timeContainer?ne.contents[Oe].end:Math.max(K,ne.contents[Oe].end),oe=ne.contents[Oe]}else K=X?ne.begin:Number.POSITIVE_INFINITY;ne.end=null!==ne.explicit_end&&null!==ne.explicit_dur?Math.min(ne.begin+ne.explicit_dur,$+ne.explicit_end):null===ne.explicit_end&&null!==ne.explicit_dur?ne.begin+ne.explicit_dur:null!==ne.explicit_end&&null===ne.explicit_dur?$+ne.explicit_end:K,delete ne.explicit_begin,delete ne.explicit_dur,delete ne.explicit_end,le._registerEvent(ne)}function h(le){this.node=le}function u(){this.events=[],this.head=new p,this.body=null}function p(){this.styling=new _,this.layout=new L}function _(){this.styles={},this.initials={}}function b(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function k(){this.styleAttrs=null}function L(){this.regions={}}function B(le,ne){O.call(this,"image"),this.src=le,this.type=ne}function O(le){this.kind=le}function P(le){this.id=le}function y(le){this.regionID=le}function S(le){this.styleAttrs=le}function E(le){this.sets=le}function A(le){this.contents=le}function I(le,ne,z){this.explicit_begin=le,this.explicit_end=ne,this.explicit_dur=z}function H(){O.call(this,"body")}function ee(){O.call(this,"div")}function fe(){O.call(this,"p")}function ue(){O.call(this,"span")}function be(){O.call(this,"span")}function q(){O.call(this,"br")}function se(){}function V(){}function de(le){return le&&"xml:id"in le.attributes&&le.attributes["xml:id"].value||null}function me(le){return le&&"style"in le.attributes?le.attributes.style.value.split(" "):[]}function xe(le,ne){var z={};if(null!==le)for(var te in le.attributes){var X=le.attributes[te].uri+" "+le.attributes[te].local,$=U.byQName[X];if(void 0!==$){var K=$.parse(le.attributes[te].value);null!==K?(z[X]=K,$===U.byName.zIndex&&ae(ne,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):W(ne,"Cannot parse styling attribute "+X+" --\x3e "+le.attributes[te].value)}}return z}function _e(le,ne,z){for(var te in le.attributes)if(le.attributes[te].uri===ne&&le.attributes[te].local===z)return le.attributes[te].value;return null}function Fe(le,ne,z){var st,et=null;return null!==(st=/^(\d+(?:\.\d+)?)f$/.exec(z))?null!==ne&&(et=parseFloat(st[1])/ne):null!==(st=/^(\d+(?:\.\d+)?)t$/.exec(z))?null!==le&&(et=parseFloat(st[1])/le):null!==(st=/^(\d+(?:\.\d+)?)ms$/.exec(z))?et=parseFloat(st[1])/1e3:null!==(st=/^(\d+(?:\.\d+)?)s$/.exec(z))?et=parseFloat(st[1]):null!==(st=/^(\d+(?:\.\d+)?)h$/.exec(z))?et=3600*parseFloat(st[1]):null!==(st=/^(\d+(?:\.\d+)?)m$/.exec(z))?et=60*parseFloat(st[1]):null!==(st=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(z))?et=3600*parseInt(st[1])+60*parseInt(st[2])+parseFloat(st[3]):null!==(st=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(z))&&null!==ne&&(et=3600*parseInt(st[1])+60*parseInt(st[2])+parseInt(st[3])+(null===st[4]?0:parseInt(st[4])/ne)),et}function Pe(le,ne,z){for(;ne.styleRefs.length>0;){var te=ne.styleRefs.pop();te in le.styles?(Pe(le,le.styles[te],z),Le(le.styles[te].styleAttrs,ne.styleAttrs)):W(z,"Non-existant style id referenced")}}function He(le,ne,z,te){for(var X=ne.length-1;X>=0;X--){var $=ne[X];$ in le.styles?Le(le.styles[$].styleAttrs,z):W(te,"Non-existant style id referenced")}}function Le(le,ne){for(var z in le)!le.hasOwnProperty(z)||z in ne||(ne[z]=le[z])}function ae(le,ne){if(le&&le.warn&&le.warn(ne))throw ne}function W(le,ne){if(le&&le.error&&le.error(ne))throw ne}function ce(le,ne){throw le&&le.fatal&&le.fatal(ne),ne}function De(le,ne){for(var X,z=0,te=le.length-1;z<=te;){var $=le[X=Math.floor((z+te)/2)];if($<ne)z=X+1;else{if(!($>ne))return{found:!0,index:X};te=X-1}}return{found:!1,index:z}}e.fromXML=function(le,ne,z){var te=C.parser(!0,{xmlns:!0}),X=[],$=[],K=[],oe=0,Ce=null;te.onclosetag=function(ct){if(X[0]instanceof se)null!==Ce.head&&null!==Ce.head.styling&&He(Ce.head.styling,X[0].styleRefs,X[0].styleAttrs,ne),delete X[0].styleRefs;else if(X[0]instanceof _)for(var xt in X[0].styles)!X[0].styles.hasOwnProperty(xt)||Pe(X[0],X[0].styles[xt],ne);else if(X[0]instanceof fe||X[0]instanceof ue){if(X[0].contents.length>1){var Et,tt=[X[0].contents[0]];for(Et=1;Et<X[0].contents.length;Et++)X[0].contents[Et]instanceof be&&tt[tt.length-1]instanceof be?tt[tt.length-1].text+=X[0].contents[Et].text:tt.push(X[0].contents[Et]);X[0].contents=tt}X[0]instanceof ue&&1===X[0].contents.length&&X[0].contents[0]instanceof be&&(X[0].text=X[0].contents[0].text,delete X[0].contents)}else X[0]instanceof h&&(X[0].node.uri===R.ns_tt&&"metadata"===X[0].node.local?oe--:oe>0&&z&&"onCloseTag"in z&&z.onCloseTag());K.shift(),$.shift(),X.shift()},te.ontext=function(ct){if(void 0!==X[0])if(X[0]instanceof ue||X[0]instanceof fe){if(X[0]instanceof ue){var xt=X[0].styleAttrs[U.byName.ruby.qname];if("container"===xt||"textContainer"===xt||"baseContainer"===xt)return}var tt=new be;tt.initFromText(Ce,X[0],ct,$[0],K[0],ne),X[0].contents.push(tt)}else X[0]instanceof h&&oe>0&&z&&"onText"in z&&z.onText(ct)},te.onopentag=function(ct){var xt=ct.attributes["xml:space"];K.unshift(xt?xt.value:0===K.length?"default":K[0]);var tt=ct.attributes["xml:lang"];if($.unshift(tt?tt.value:0===$.length?"":$[0]),ct.uri===R.ns_tt)if("tt"===ct.local)null!==Ce&&ce(ne,"Two <tt> elements at ("+this.line+","+this.column+")"),(Ce=new u).initFromNode(ct,$[0],ne),X.unshift(Ce);else if("head"===ct.local)X[0]instanceof u||ce(ne,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),X.unshift(Ce.head);else if("styling"===ct.local)X[0]instanceof p||ce(ne,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),X.unshift(Ce.head.styling);else if("style"===ct.local){var Et;X[0]instanceof _?((Et=new b).initFromNode(ct,ne),Et.id?Ce.head.styling.styles[Et.id]=Et:W(ne,"<style> element missing @id attribute"),X.unshift(Et)):X[0]instanceof se?((Et=new b).initFromNode(ct,ne),Le(Et.styleAttrs,X[0].styleAttrs),X.unshift(Et)):ce(ne,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===ct.local){var Kt;if(X[0]instanceof _){for(var _t in(Kt=new k).initFromNode(ct,ne),Kt.styleAttrs)!Kt.styleAttrs.hasOwnProperty(_t)||(Ce.head.styling.initials[_t]=Kt.styleAttrs[_t]);X.unshift(Kt)}else ce(ne,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===ct.local)X[0]instanceof p||ce(ne,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),X.unshift(Ce.head.layout);else if("region"===ct.local){X[0]instanceof L||ce(ne,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var At=new se;At.initFromNode(Ce,ct,$[0],ne),!At.id||At.id in Ce.head.layout.regions?W(ne,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Ce.head.layout.regions[At.id]=At,X.unshift(At)}else if("body"===ct.local){X[0]instanceof u||ce(ne,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==Ce.body&&ce(ne,"Second <body> element at "+this.line+","+this.column+")");var Pt=new H;Pt.initFromNode(Ce,ct,$[0],ne),Ce.body=Pt,X.unshift(Pt)}else if("div"===ct.local){X[0]instanceof ee||X[0]instanceof H||ce(ne,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Yt=new ee;Yt.initFromNode(Ce,X[0],ct,$[0],ne);var jt=Yt.styleAttrs[U.byName.backgroundImage.qname];jt&&(Yt.contents.push(new B(jt)),delete Yt.styleAttrs[U.byName.backgroundImage.qname]),X[0].contents.push(Yt),X.unshift(Yt)}else if("image"===ct.local){X[0]instanceof ee||ce(ne,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var en=new B;en.initFromNode(Ce,X[0],ct,$[0],ne),X[0].contents.push(en),X.unshift(en)}else if("p"===ct.local){X[0]instanceof ee||ce(ne,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var an=new fe;an.initFromNode(Ce,X[0],ct,$[0],ne),X[0].contents.push(an),X.unshift(an)}else if("span"===ct.local){X[0]instanceof ue||X[0]instanceof fe||ce(ne,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Ln=new ue;Ln.initFromNode(Ce,X[0],ct,$[0],K[0],ne),X[0].contents.push(Ln),X.unshift(Ln)}else if("br"===ct.local){X[0]instanceof ue||X[0]instanceof fe||ce(ne,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var wn=new q;wn.initFromNode(Ce,X[0],ct,$[0],ne),X[0].contents.push(wn),X.unshift(wn)}else if("set"===ct.local){X[0]instanceof ue||X[0]instanceof fe||X[0]instanceof ee||X[0]instanceof H||X[0]instanceof se||X[0]instanceof q||ce(ne,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var Vn=new V;Vn.initFromNode(Ce,X[0],ct,ne),X[0].sets.push(Vn),X.unshift(Vn)}else X.unshift(new h(ct));else X.unshift(new h(ct));if(X[0]instanceof h)if(ct.uri===R.ns_tt&&"metadata"===ct.local)oe++;else if(oe>0&&z&&"onOpenTag"in z){var Hn=[];for(var it in ct.attributes)Hn[ct.attributes[it].uri+" "+ct.attributes[it].local]={uri:ct.attributes[it].uri,local:ct.attributes[it].local,value:ct.attributes[it].value};z.onOpenTag(ct.uri,ct.local,Hn)}},te.write(le).close(),delete Ce.head.styling.styles;var Oe=!1;for(var Ze in Ce.head.layout.regions)if(Ce.head.layout.regions.hasOwnProperty(Ze)){Oe=!0;break}if(!Oe){var st=se.prototype.createDefaultRegion(Ce.lang);Ce.head.layout.regions[st.id]=st}for(var et in Ce.head.layout.regions)!Ce.head.layout.regions.hasOwnProperty(et)||D(Ce,Ce.head.layout.regions[et],null,null);return Ce.body&&D(Ce,Ce.body,null,null),Ce.body&&F(Ce.body),Ce},u.prototype.initFromNode=function(le,ne,z){var te=function Te(le,ne){var z=_e(le,R.ns_ttp,"cellResolution"),te=15,X=32;if(null!==z){var K=/(\d+) (\d+)/.exec(z);null!==K?(X=parseInt(K[1]),te=parseInt(K[2])):ae(ne,"Malformed cellResolution value (using initial value instead)")}return{w:X,h:te}}(le,z);this.cellLength={h:new j.ComputedLength(0,1/te.h),w:new j.ComputedLength(1/te.w,0)};var X=function ke(le,ne){var X,z=_e(le,R.ns_ttp,"frameRate"),te=30;null!==z&&(null!==(X=/(\d+)/.exec(z))?te=parseInt(X[1]):ae(ne,"Malformed frame rate attribute (using initial value instead)"));var K=_e(le,R.ns_ttp,"frameRateMultiplier"),oe=1;null!==K&&(null!==(X=/(\d+) (\d+)/.exec(K))?oe=parseInt(X[1])/parseInt(X[2]):ae(ne,"Malformed frame rate multiplier attribute (using initial value instead)"));var Oe=oe*te,Ze=1,st=_e(le,R.ns_ttp,"tickRate");return null===st?null!==z&&(Ze=Oe):null!==(X=/(\d+)/.exec(st))?Ze=parseInt(X[1]):ae(ne,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Oe,tickRate:Ze}}(le,z);this.effectiveFrameRate=X.effectiveFrameRate,this.tickRate=X.tickRate,this.aspectRatio=function Ie(le,ne){var z=_e(le,R.ns_ittp,"aspectRatio");null===z&&(z=_e(le,R.ns_ttp,"displayAspectRatio"));var te=null;if(null!==z){var $=/(\d+)\s+(\d+)/.exec(z);if(null!==$){var K=parseInt($[1]),oe=parseInt($[2]);0!==K&&0!==oe?te=K/oe:W(ne,"Illegal aspectRatio values (ignoring)")}else W(ne,"Malformed aspectRatio attribute (ignoring)")}return te}(le,z);var $=_e(le,R.ns_ttp,"timeBase");null!==$&&"media"!==$&&ce(z,"Unsupported time base");var K=function Ue(le,ne){var z=_e(le,R.ns_tts,"extent");if(null===z)return null;var te=z.split(" ");if(2!==te.length)return ae(ne,"Malformed extent (ignoring)"),null;var X=j.parseLength(te[0]),$=j.parseLength(te[1]);return $&&X?{h:$,w:X}:(ae(ne,"Malformed extent values (ignoring)"),null)}(le,z);null===K?this.pxLength={h:null,w:null}:(("px"!==K.h.unit||"px"!==K.w.unit)&&ce(z,"Extent on TT must be in px or absent"),this.pxLength={h:new j.ComputedLength(0,1/K.h.value),w:new j.ComputedLength(1/K.w.value,0)}),this.dimensions={h:new j.ComputedLength(0,1),w:new j.ComputedLength(1,0)},this.lang=ne},u.prototype._registerEvent=function(le){if(!(le.end<=le.begin)){var ne=De(this.events,le.begin);if(ne.found||this.events.splice(ne.index,0,le.begin),le.end!==Number.POSITIVE_INFINITY){var z=De(this.events,le.end);z.found||this.events.splice(z.index,0,le.end)}}},u.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},u.prototype.getMediaTimeEvents=function(){return this.events},b.prototype.initFromNode=function(le,ne){this.id=de(le),this.styleAttrs=xe(le,ne),this.styleRefs=me(le)},k.prototype.initFromNode=function(le,ne){for(var z in this.styleAttrs={},le.attributes)le.attributes[z].uri!==R.ns_itts&&le.attributes[z].uri!==R.ns_ebutts&&le.attributes[z].uri!==R.ns_tts||(this.styleAttrs[le.attributes[z].uri+" "+le.attributes[z].local]=le.attributes[z].value)},B.prototype.initFromNode=function(le,ne,z,te,X){this.src="src"in z.attributes?z.attributes.src.value:null,this.src||W(X,"Invalid image@src attribute"),this.type="type"in z.attributes?z.attributes.type.value:null,this.type||W(X,"Invalid image@type attribute"),S.prototype.initFromNode.call(this,le,ne,z,X),I.prototype.initFromNode.call(this,le,ne,z,X),E.prototype.initFromNode.call(this,le,ne,z,X),y.prototype.initFromNode.call(this,le,ne,z,X),this.lang=te},P.prototype.initFromNode=function(le,ne,z,te){this.id=de(z)},y.prototype.initFromNode=function(le,ne,z,te){this.regionID=function Q(le){return le&&"region"in le.attributes?le.attributes.region.value:""}(z)},S.prototype.initFromNode=function(le,ne,z,te){this.styleAttrs=xe(z,te),null!==le.head&&null!==le.head.styling&&He(le.head.styling,me(z),this.styleAttrs,te)},E.prototype.initFromNode=function(le,ne,z,te){this.sets=[]},A.prototype.initFromNode=function(le,ne,z,te){this.contents=[]},I.prototype.initFromNode=function(le,ne,z,te){var X=function je(le,ne,z,te){var X=null;z&&"begin"in z.attributes&&null===(X=Fe(le.tickRate,le.effectiveFrameRate,z.attributes.begin.value))&&ae(te,"Malformed begin value "+z.attributes.begin.value+" (using 0)");var $=null;z&&"dur"in z.attributes&&null===($=Fe(le.tickRate,le.effectiveFrameRate,z.attributes.dur.value))&&ae(te,"Malformed dur value "+z.attributes.dur.value+" (ignoring)");var K=null;return z&&"end"in z.attributes&&null===(K=Fe(le.tickRate,le.effectiveFrameRate,z.attributes.end.value))&&ae(te,"Malformed end value (ignoring)"),{explicit_begin:X,explicit_end:K,explicit_dur:$}}(le,0,z,te);this.explicit_begin=X.explicit_begin,this.explicit_end=X.explicit_end,this.explicit_dur=X.explicit_dur,this.timeContainer=function pe(le,ne){var z=le&&"timeContainer"in le.attributes?le.attributes.timeContainer.value:null;return z&&"par"!==z?"seq"===z?"seq":(W(ne,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(z,te)},H.prototype.initFromNode=function(le,ne,z,te){S.prototype.initFromNode.call(this,le,null,ne,te),I.prototype.initFromNode.call(this,le,null,ne,te),E.prototype.initFromNode.call(this,le,null,ne,te),y.prototype.initFromNode.call(this,le,null,ne,te),A.prototype.initFromNode.call(this,le,null,ne,te),this.lang=z},ee.prototype.initFromNode=function(le,ne,z,te,X){S.prototype.initFromNode.call(this,le,ne,z,X),I.prototype.initFromNode.call(this,le,ne,z,X),E.prototype.initFromNode.call(this,le,ne,z,X),y.prototype.initFromNode.call(this,le,ne,z,X),A.prototype.initFromNode.call(this,le,ne,z,X),this.lang=te},fe.prototype.initFromNode=function(le,ne,z,te,X){S.prototype.initFromNode.call(this,le,ne,z,X),I.prototype.initFromNode.call(this,le,ne,z,X),E.prototype.initFromNode.call(this,le,ne,z,X),y.prototype.initFromNode.call(this,le,ne,z,X),A.prototype.initFromNode.call(this,le,ne,z,X),this.lang=te},ue.prototype.initFromNode=function(le,ne,z,te,X,$){S.prototype.initFromNode.call(this,le,ne,z,$),I.prototype.initFromNode.call(this,le,ne,z,$),E.prototype.initFromNode.call(this,le,ne,z,$),y.prototype.initFromNode.call(this,le,ne,z,$),A.prototype.initFromNode.call(this,le,ne,z,$),this.space=X,this.lang=te},be.prototype.initFromText=function(le,ne,z,te,X,$){I.prototype.initFromNode.call(this,le,ne,null,$),this.text=z,this.space=X,this.lang=te},q.prototype.initFromNode=function(le,ne,z,te,X){y.prototype.initFromNode.call(this,le,ne,z,X),I.prototype.initFromNode.call(this,le,ne,z,X),this.lang=te},se.prototype.createDefaultRegion=function(le){var ne=new se;return P.call(ne,""),S.call(ne,{}),E.call(ne,[]),I.call(ne,0,Number.POSITIVE_INFINITY,null),this.lang=le,ne},se.prototype.initFromNode=function(le,ne,z,te){P.prototype.initFromNode.call(this,le,null,ne,te),I.prototype.initFromNode.call(this,le,null,ne,te),E.prototype.initFromNode.call(this,le,null,ne,te),this.styleAttrs=xe(ne,te),this.styleRefs=me(ne),this.lang=z},V.prototype.initFromNode=function(le,ne,z,te){I.prototype.initFromNode.call(this,le,ne,z,te);var X=xe(z,te);for(var $ in this.qname=null,this.value=null,X)if(X.hasOwnProperty($)){if(this.qname){W(te,"More than one style specified on set");break}this.qname=$,this.value=X[$]}}}(w,"undefined"==typeof sax?i("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?i("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?i("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(Ge,w,i){!function(e,C,R){function U(q,se,V,de){var Q;if("region"===V.kind)(Q=document.createElement("div")).style.position="absolute";else if("body"===V.kind)Q=document.createElement("div");else if("div"===V.kind)Q=document.createElement("div");else if("image"===V.kind){if(Q=document.createElement("img"),null!==q.imgResolver&&null!==V.src){var pe=q.imgResolver(V.src,Q);pe&&(Q.src=pe),Q.height=q.regionH,Q.width=q.regionW}}else if("p"===V.kind)Q=document.createElement("p");else if("span"===V.kind)if("container"===V.styleAttrs[R.byName.ruby.qname])Q=document.createElement("ruby"),q.ruby=!0;else if("base"===V.styleAttrs[R.byName.ruby.qname])Q=document.createElement("rb");else if("text"===V.styleAttrs[R.byName.ruby.qname])Q=document.createElement("rt");else if("baseContainer"===V.styleAttrs[R.byName.ruby.qname])Q=document.createElement("rbc");else if("textContainer"===V.styleAttrs[R.byName.ruby.qname])Q=document.createElement("rtc");else{if("delimiter"===V.styleAttrs[R.byName.ruby.qname])return;Q=document.createElement("span")}else"br"===V.kind&&(Q=document.createElement("br"));if(Q){if(V.lang&&("region"===V.kind||V.lang!==de.lang)&&(Q.lang=V.lang),se.appendChild(Q),Q.style.margin="0","region"===V.kind){var me=V.styleAttrs[R.byName.writingMode.qname];"lrtb"===me||"lr"===me?(q.ipd="lr",q.bpd="tb"):"rltb"===me||"rl"===me?(q.ipd="rl",q.bpd="tb"):"tblr"===me?(q.ipd="tb",q.bpd="lr"):("tbrl"===me||"tb"===me)&&(q.ipd="tb",q.bpd="rl")}else"p"===V.kind&&"tb"===q.bpd&&(q.ipd="ltr"===V.styleAttrs[R.byName.direction.qname]?"lr":"rl");for(var _e=0;_e<E.length;_e++){var Ie=E[_e],Te=V.styleAttrs[Ie.qname];void 0!==Te&&null!==Ie.map&&Ie.map(q,Q,V,Te)}var ke=Q,Ue=V.styleAttrs[R.byName.linePadding.qname];if(Ue&&!Ue.isZero()){var Fe=Ue.toUsedLength(q.w,q.h);if(Fe>0){var je=Math.ceil(Fe)+"px";"tb"===q.bpd?(ke.style.paddingLeft=je,ke.style.paddingRight=je):(ke.style.paddingTop=je,ke.style.paddingBottom=je),q.lp=Ue}}var Pe=V.styleAttrs[R.byName.multiRowAlign.qname];if(Pe&&"auto"!==Pe){var He=document.createElement("span");He.style.display="inline-block",He.style.textAlign=Pe,Q.appendChild(He),ke=He,q.mra=Pe}var Le=V.styleAttrs[R.byName.rubyReserve.qname];if(Le&&"none"!==Le[0]&&(q.rubyReserve=Le),V.styleAttrs[R.byName.fillLineGap.qname]&&(q.flg=!0),"span"===V.kind&&V.text){var ye=V.styleAttrs[R.byName.textEmphasis.qname];if(ye&&"none"!==ye.style&&(q.textEmphasis=!0),R.byName.textCombine.qname in V.styleAttrs&&"all"===V.styleAttrs[R.byName.textCombine.qname])Q.textContent=V.text,ye&&y(q,Q,0,ye);else for(var ae="",W=0;W<V.text.length;W++){ae+=V.text.charAt(W);var ce=V.text.charCodeAt(W);if(ce<55296||ce>56319||W===V.text.length-1){var De=document.createElement("span");De.textContent=ae,ye&&y(q,De,0,ye),Q.appendChild(De),ae="",De._isd_element=V}}}if("contents"in V)for(var le=0;le<V.contents.length;le++)U(q,ke,V.contents[le],V);var ne=[];if("p"===V.kind&&(O(q,ke,ne,null),q.rubyReserve&&(function b(q,se){for(var V=0;V<q.length;V++){var de=document.createElement("ruby"),Q=document.createElement("rb");Q.textContent="\u200b",de.appendChild(Q);var pe,me,xe=se.rubyReserve[1].toUsedLength(se.w,se.h)+"px";"both"===se.rubyReserve[0]||"outside"===se.rubyReserve[0]&&1==q.length?((pe=document.createElement("rtc")).style[ee]=H?"after":"under",pe.textContent="\u200b",pe.style.fontSize=xe,(me=document.createElement("rtc")).style[ee]=H?"before":"over",me.textContent="\u200b",me.style.fontSize=xe,de.appendChild(pe),de.appendChild(me)):((pe=document.createElement("rtc")).textContent="\u200b",pe.style.fontSize=xe,pe.style[ee]="after"===se.rubyReserve[0]||"outside"===se.rubyReserve[0]&&V>0?H?"after":"tb"===se.bpd||"rl"===se.bpd?"under":"over":H?"before":"tb"===se.bpd||"rl"===se.bpd?"over":"under",de.appendChild(pe));for(var Ie=null,Te=0;Te<q[V].rbc.length;Te++)if("ruby"===q[V].rbc[Te].localName){Ie=q[V].rbc[Te];for(var ke=0;ke<Ie.style.length;ke++)de.style.setProperty(Ie.style.item(ke),Ie.style.getPropertyValue(Ie.style.item(ke)));break}(Ie=Ie||q[V].elements[0].node).parentElement.insertBefore(de,Ie)}}(ne,q),q.rubyReserve=null),(q.ruby||q.rubyReserve)&&(function _(q,se){for(var V=0;V<q.length;V++)for(var de=0;de<q[V].rbc.length;de++)q[V].rbc[de].style[ee]||(q[V].rbc[de].style[ee]=H?0===V?"before":"after":"tb"===se.bpd||"rl"===se.bpd?0===V?"over":"under":0===V?"under":"over")}(ne,q),q.ruby=null),q.textEmphasis&&(function p(q,se){for(var V=0;V<q.length;V++)for(var de=0;de<q[V].te.length;de++)q[V].te[de].style[ue]&&"none"!==q[V].te[de].style[ue]||(q[V].te[de].style[ue]="tb"===se.bpd?0===V?"left over":"left under":"rl"===se.bpd?0===V?"right under":"left under":0===V?"left under":"right under")}(ne,q),q.textEmphasis=null),q.mra&&(function u(q){for(var se=0;se<q.length-1;se++){var V=q[se].elements.length;if(0!==V&&!1===q[se].br){var de=document.createElement("br"),Q=q[se].elements[V-1].node;Q.parentElement.insertBefore(de,Q.nextSibling)}}}(ne),q.mra=null),q.lp&&(function h(q,se,V){if(null!==q)for(var de=0;de<q.length;de++){var Q=q[de].elements.length,pe=Math.ceil(se)+"px",me="-"+Math.ceil(se)+"px";if(0!==Q){var xe=q[de].elements[q[de].start_elem],_e=q[de].elements[q[de].end_elem];if(xe===_e&&(elementBoundingRect=xe.node.getBoundingClientRect(),0==elementBoundingRect.width||0==elementBoundingRect.height))continue;"lr"===V.ipd?(xe.node.style.marginLeft=me,xe.node.style.paddingLeft=pe):"rl"===V.ipd?(xe.node.style.paddingRight=pe,xe.node.style.marginRight=me):"tb"===V.ipd&&(xe.node.style.paddingTop=pe,xe.node.style.marginTop=me),"lr"===V.ipd?(_e.node.style.marginRight=me,_e.node.style.paddingRight=pe):"rl"===V.ipd?(_e.node.style.paddingLeft=pe,_e.node.style.marginLeft=me):"tb"===V.ipd&&(_e.node.style.paddingBottom=pe,_e.node.style.marginBottom=me)}}}(ne,q.lp.toUsedLength(q.w,q.h),q),q.lp=null),function j(q){for(var se=0;se<q.length;se++)for(var V=q[se],de=1;de<V.elements.length;)D(V.elements[de-1].node,V.elements[de].node)?V.elements.splice(de,1):de++;for(var me,xe,_e=[],Ie=0;Ie<q.length;Ie++)for(var Te=0;Te<q[Ie].elements.length;Te++)(xe=F(me=q[Ie].elements[Te].node,_e,!1))&&(me.style.backgroundColor=xe);for(var ke=0;ke<_e.length;ke++)_e[ke].style.backgroundColor=""}(ne),q.flg)){var z=B(ke.getBoundingClientRect(),q);(function k(q,se,V,de,Q){for(var pe=Math.sign(V-se),me=0;me<=q.length;me++){var xe,_e,Ie,Te;if(xe=0===me?Math.round(se):me===q.length?Math.round(V):Math.round((q[me-1].after+q[me].before)/2),me>0&&q[me-1])for(Ie=0;Ie<q[me-1].elements.length;Ie++)_e=pe*(xe-(Te=q[me-1].elements[Ie]).after)+"px","lr"===de.bpd?Te.node.style.paddingRight=_e:"rl"===de.bpd?Te.node.style.paddingLeft=_e:"tb"===de.bpd&&(Te.node.style.paddingBottom=_e);if(me<q.length)for(Ie=0;Ie<q[me].elements.length;Ie++)_e=pe*((Te=q[me].elements[Ie]).before-xe)+"px","lr"===de.bpd?Te.node.style.paddingLeft=_e:"rl"===de.bpd?Te.node.style.paddingRight=_e:"tb"===de.bpd&&(Te.node.style.paddingTop=_e)}})(ne,z.before,z.after,q),q.flg=null}if("region"===V.kind&&"tb"===q.bpd&&q.enableRollUp&&V.contents.length>0&&"after"===V.styleAttrs[R.byName.displayAlign.qname]){O(q,ke,ne,null);var X=new L(""===V.id?"_":V.id,ne);if(q.currentISDState[X.id]=X,q.previousISDState&&X.id in q.previousISDState&&q.previousISDState[X.id].plist.length>0&&X.plist.length>1&&X.plist[X.plist.length-2].text===q.previousISDState[X.id].plist[q.previousISDState[X.id].plist.length-1].text){var $=Q.firstElementChild,K=X.plist[X.plist.length-1].after-X.plist[X.plist.length-1].before;$.style.bottom="-"+K+"px",$.style.transition="transform 0.4s",$.style.position="relative",$.style.transform="translateY(-"+K+"px)"}}}else!function be(q,se){if(q&&q.error&&q.error(se))throw se}(q.errorHandler,"Error processing ISD element kind: "+V.kind)}function F(q,se,V){return q.style.backgroundColor?(V&&!se.includes(q)&&se.push(q),q.style.backgroundColor):"SPAN"===q.parentElement.nodeName?F(q.parentElement,se,!0):void 0}function D(q,se){if("SPAN"===q.tagName&&"SPAN"===se.tagName&&q._isd_element===se._isd_element){q.textContent+=se.textContent;for(var V=0;V<se.style.length;V++){var de=se.style[V];(de.indexOf("border")>=0||de.indexOf("padding")>=0||de.indexOf("margin")>=0)&&(q.style[de]=se.style[de])}return se.parentElement.removeChild(se),!0}return!1}function L(q,se){this.id=q,this.plist=se}function B(q,se){var V={before:null,after:null,start:null,end:null};return"tb"===se.bpd?(V.before=q.top,V.after=q.bottom,"lr"===se.ipd?(V.start=q.left,V.end=q.right):(V.start=q.right,V.end=q.left)):"lr"===se.bpd?(V.before=q.left,V.after=q.right,V.start=q.top,V.end=q.bottom):"rl"===se.bpd&&(V.before=q.right,V.after=q.left,V.start=q.top,V.end=q.bottom),V}function O(q,se,V,de){if("rt"!==se.localName&&"rtc"!==se.localName){var Q=se.style.backgroundColor||de;if(0===se.childElementCount)if("span"===se.localName||"rb"===se.localName){var me=B(se.getBoundingClientRect(),q);if(0!==V.length&&function P(q,se,V,de){return se<de&&q>V||de<=se&&V>=q}(me.before,me.after,V[V.length-1].before,V[V.length-1].after)){var xe=Math.sign(me.after-me.before),_e=Math.sign(me.end-me.start);xe*(me.before-V[V.length-1].before)<0&&(V[V.length-1].before=me.before),xe*(me.after-V[V.length-1].after)>0&&(V[V.length-1].after=me.after),_e*(me.start-V[V.length-1].start)<0&&(V[V.length-1].start=me.start,V[V.length-1].start_elem=V[V.length-1].elements.length),_e*(me.end-V[V.length-1].end)>0&&(V[V.length-1].end=me.end,V[V.length-1].end_elem=V[V.length-1].elements.length)}else V.push({before:me.before,after:me.after,start:me.start,end:me.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});V[V.length-1].text+=se.textContent,V[V.length-1].elements.push({node:se,bgcolor:Q,before:me.before,after:me.after})}else"br"===se.localName&&0!==V.length&&(V[V.length-1].br=!0);else for(var Ie=se.firstChild;Ie;)Ie.nodeType===Node.ELEMENT_NODE&&(O(q,Ie,V,Q),"ruby"===Ie.localName||"rtc"===Ie.localName?V.length>0&&V[V.length-1].rbc.push(Ie):"span"===Ie.localName&&Ie.style[fe]&&"none"!==Ie.style[fe]&&V.length>0&&V[V.length-1].te.push(Ie)),Ie=Ie.nextSibling}}function y(q,se,V,de){"none"!==de.style&&(se.style[fe]="auto"===de.style?"filled":de.style+" "+de.symbol,"before"===de.position||"after"===de.position)&&(se.style[ue]="tb"===q.bpd?"before"===de.position?"left over":"left under":"rl"===q.bpd?"before"===de.position?"right under":"left under":"before"===de.position?"left under":"right under")}function S(q,se){this.qname=q,this.map=se}e.render=function(q,se,V,de,Q,pe,me,xe,_e){var Ie=de||se.clientHeight,Te=Q||se.clientWidth;if(null!==q.aspectRatio){var ke=Ie*q.aspectRatio;ke>Te?Ie=Math.round(Te/q.aspectRatio):Te=ke}var Ue=document.createElement("div");Ue.style.position="relative",Ue.style.width=Te+"px",Ue.style.height=Ie+"px",Ue.style.margin="auto",Ue.style.top=0,Ue.style.bottom=0,Ue.style.left=0,Ue.style.right=0,Ue.style.zIndex=0;var Fe={h:Ie,w:Te,regionH:null,regionW:null,imgResolver:V,displayForcedOnlyMode:pe||!1,isd:q,errorHandler:me,previousISDState:xe,enableRollUp:_e||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(se.appendChild(Ue),"contents"in q)for(var je=0;je<q.contents.length;je++)U(Fe,Ue,q.contents[je],q);return Fe.currentISDState};for(var E=[new S("http://www.w3.org/ns/ttml#styling backgroundColor",function(q,se,V,de){0!==de[3]&&(se.style.backgroundColor="rgba("+de[0].toString()+","+de[1].toString()+","+de[2].toString()+","+(de[3]/255).toString()+")")}),new S("http://www.w3.org/ns/ttml#styling color",function(q,se,V,de){se.style.color="rgba("+de[0].toString()+","+de[1].toString()+","+de[2].toString()+","+(de[3]/255).toString()+")"}),new S("http://www.w3.org/ns/ttml#styling direction",function(q,se,V,de){se.style.direction=de}),new S("http://www.w3.org/ns/ttml#styling display",function(q,se,V,de){}),new S("http://www.w3.org/ns/ttml#styling displayAlign",function(q,se,V,de){se.style.display="flex",se.style.flexDirection="column","before"===de?se.style.justifyContent="flex-start":"center"===de?se.style.justifyContent="center":"after"===de&&(se.style.justifyContent="flex-end")}),new S("http://www.w3.org/ns/ttml#styling extent",function(q,se,V,de){q.regionH=de.h.toUsedLength(q.w,q.h),q.regionW=de.w.toUsedLength(q.w,q.h);var Q=0,pe=0,me=V.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];me&&(Q=me[0].toUsedLength(q.w,q.h)+me[2].toUsedLength(q.w,q.h),pe=me[1].toUsedLength(q.w,q.h)+me[3].toUsedLength(q.w,q.h)),se.style.height=q.regionH-Q+"px",se.style.width=q.regionW-pe+"px"}),new S("http://www.w3.org/ns/ttml#styling fontFamily",function(q,se,V,de){for(var Q=[],pe=0;pe<de.length;pe++)"monospaceSerif"===de[pe]?(Q.push("Courier New"),Q.push('"Liberation Mono"'),Q.push("Courier"),Q.push("monospace")):"proportionalSansSerif"===de[pe]?(Q.push("Arial"),Q.push("Helvetica"),Q.push('"Liberation Sans"'),Q.push("sans-serif")):"monospace"===de[pe]?Q.push("monospace"):"sansSerif"===de[pe]?Q.push("sans-serif"):"serif"===de[pe]?Q.push("serif"):"monospaceSansSerif"===de[pe]?(Q.push("Consolas"),Q.push("monospace")):Q.push("proportionalSerif"===de[pe]?"serif":de[pe]);if(Q.length>0){for(var me=[Q[0]],xe=1;xe<Q.length;xe++)-1==me.indexOf(Q[xe])&&me.push(Q[xe]);Q=me}se.style.fontFamily=Q.join(",")}),new S("http://www.w3.org/ns/ttml#styling shear",function(q,se,V,de){if(0!==de){var Q=-.9*de;se.style.transform="tb"===q.bpd?"skewX("+Q+"deg)":"skewY("+Q+"deg)"}}),new S("http://www.w3.org/ns/ttml#styling fontSize",function(q,se,V,de){se.style.fontSize=de.toUsedLength(q.w,q.h)+"px"}),new S("http://www.w3.org/ns/ttml#styling fontStyle",function(q,se,V,de){se.style.fontStyle=de}),new S("http://www.w3.org/ns/ttml#styling fontWeight",function(q,se,V,de){se.style.fontWeight=de}),new S("http://www.w3.org/ns/ttml#styling lineHeight",function(q,se,V,de){se.style.lineHeight="normal"===de?"normal":de.toUsedLength(q.w,q.h)+"px"}),new S("http://www.w3.org/ns/ttml#styling opacity",function(q,se,V,de){se.style.opacity=de}),new S("http://www.w3.org/ns/ttml#styling origin",function(q,se,V,de){se.style.top=de.h.toUsedLength(q.w,q.h)+"px",se.style.left=de.w.toUsedLength(q.w,q.h)+"px"}),new S("http://www.w3.org/ns/ttml#styling overflow",function(q,se,V,de){se.style.overflow=de}),new S("http://www.w3.org/ns/ttml#styling padding",function(q,se,V,de){var Q=[];Q[0]=de[0].toUsedLength(q.w,q.h)+"px",Q[1]=de[3].toUsedLength(q.w,q.h)+"px",Q[2]=de[2].toUsedLength(q.w,q.h)+"px",Q[3]=de[1].toUsedLength(q.w,q.h)+"px",se.style.padding=Q.join(" ")}),new S("http://www.w3.org/ns/ttml#styling position",function(q,se,V,de){se.style.top=de.h.toUsedLength(q.w,q.h)+"px",se.style.left=de.w.toUsedLength(q.w,q.h)+"px"}),new S("http://www.w3.org/ns/ttml#styling rubyAlign",function(q,se,V,de){se.style.rubyAlign="spaceAround"===de?"space-around":"center"}),new S("http://www.w3.org/ns/ttml#styling rubyPosition",function(q,se,V,de){"before"!==de&&"after"!==de||(se.parentElement.style[ee]=H?de:"tb"===q.bpd||"rl"===q.bpd?"before"===de?"over":"under":"before"===de?"under":"over")}),new S("http://www.w3.org/ns/ttml#styling showBackground",null),new S("http://www.w3.org/ns/ttml#styling textAlign",function(q,se,V,de){se.style.textAlign="start"===de?"rl"===q.ipd?"right":"left":"end"===de?"rl"===q.ipd?"left":"right":de}),new S("http://www.w3.org/ns/ttml#styling textDecoration",function(q,se,V,de){se.style.textDecoration=de.join(" ").replace("lineThrough","line-through")}),new S("http://www.w3.org/ns/ttml#styling textOutline",function(q,se,V,de){}),new S("http://www.w3.org/ns/ttml#styling textShadow",function(q,se,V,de){var Q=V.styleAttrs[R.byName.textOutline.qname];if("none"===de&&"none"===Q)se.style.textShadow="";else{var pe=[];if("none"!==Q){var me="rgba("+Q.color[0].toString()+","+Q.color[1].toString()+","+Q.color[2].toString()+","+(Q.color[3]/255).toString()+")";pe.push("1px 1px 1px "+me),pe.push("-1px 1px 1px "+me),pe.push("1px -1px 1px "+me),pe.push("-1px -1px 1px "+me)}if("none"!==de)for(var xe=0;xe<de.length;xe++)pe.push(de[xe].x_off.toUsedLength(q.w,q.h)+"px "+de[xe].y_off.toUsedLength(q.w,q.h)+"px "+de[xe].b_radius.toUsedLength(q.w,q.h)+"px rgba("+de[xe].color[0].toString()+","+de[xe].color[1].toString()+","+de[xe].color[2].toString()+","+(de[xe].color[3]/255).toString()+")");se.style.textShadow=pe.join(",")}}),new S("http://www.w3.org/ns/ttml#styling textCombine",function(q,se,V,de){se.style.textCombineUpright=de}),new S("http://www.w3.org/ns/ttml#styling textEmphasis",function(q,se,V,de){}),new S("http://www.w3.org/ns/ttml#styling unicodeBidi",function(q,se,V,de){se.style.unicodeBidi="bidiOverride"===de?"bidi-override":de}),new S("http://www.w3.org/ns/ttml#styling visibility",function(q,se,V,de){se.style.visibility=de}),new S("http://www.w3.org/ns/ttml#styling wrapOption",function(q,se,V,de){se.style.whiteSpace="wrap"===de?"preserve"===V.space?"pre-wrap":"normal":"preserve"===V.space?"pre":"noWrap"}),new S("http://www.w3.org/ns/ttml#styling writingMode",function(q,se,V,de){"lrtb"===de||"lr"===de||"rltb"===de||"rl"===de?se.style.writingMode="horizontal-tb":"tblr"===de?se.style.writingMode="vertical-lr":("tbrl"===de||"tb"===de)&&(se.style.writingMode="vertical-rl")}),new S("http://www.w3.org/ns/ttml#styling zIndex",function(q,se,V,de){se.style.zIndex=de}),new S("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(q,se,V,de){q.displayForcedOnlyMode&&!1===de&&(se.style.visibility="hidden")})],A={},I=0;I<E.length;I++)A[E[I].qname]=E[I];var H="webkitRubyPosition"in window.getComputedStyle(document.documentElement),ee=H?"webkitRubyPosition":"rubyPosition",fe="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",ue="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition"}(w,"undefined"==typeof imscNames?i("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?i("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/isd.js":function(Ge,w,i){!function(e,C,R,U){e.generateISD=function(O,P,y){var A,S=new p(O),E={},I={},H=O.head.styling.initials[R.byName.showBackground.qname],ee=O.head.styling.initials[R.byName.backgroundColor.qname];for(var fe in O.head.layout.regions)if(O.head.layout.regions.hasOwnProperty(fe)){var ue=O.head.layout.regions[fe],be=ue.styleAttrs[R.byName.showBackground.qname]||H;I[ue.id]=("always"===be||void 0===be)&&void 0!==(ue.styleAttrs[R.byName.backgroundColor.qname]||ee)&&!(P<ue.begin||P>=ue.end)}for(var V in O.body&&O.body.regionID&&(I[O.body.regionID]=!0),A=null!==O.body?function se(Q,pe){if(pe.contents){var xe={};for(var _e in pe)pe.hasOwnProperty(_e)&&(xe[_e]=pe[_e]);return xe.contents=[],pe.contents.filter(function me(Ie){return!(Q<Ie.begin||Q>=Ie.end)}).forEach(function(Ie){var Te=se(Q,Ie);Te.regionID&&(I[Te.regionID]=!0),null!==Te&&xe.contents.push(Te)}),xe}return pe}(P,O.body):null,void 0!==I[""]&&(I[""]=!0),I)if(I[V]){var de=F(O,P,O.head.layout.regions[V],A,null,"",O.head.layout.regions[V],y,E);null!==de&&S.contents.push(de.element)}return S};var j=[R.byName.color.qname,R.byName.textCombine.qname,R.byName.textDecoration.qname,R.byName.textEmphasis.qname,R.byName.textOutline.qname,R.byName.textShadow.qname];function F(O,P,y,S,E,A,I,H,ee){if(P<I.begin||P>=I.end)return null;var fe="regionID"in I&&""!==I.regionID?I.regionID:A;if(null!==E&&fe!==y.id&&(!("contents"in I)||"contents"in I&&0===I.contents.length||""!==fe))return null;var ue=new _(I);if("sets"in I)for(var be=0;be<I.sets.length;be++)P<I.sets[be].begin||P>=I.sets[be].end||(ue.styleAttrs[I.sets[be].qname]=I.sets[be].value);var q={};for(var se in ue.styleAttrs)if(ue.styleAttrs.hasOwnProperty(se)&&(q[se]=!0,"region"===ue.kind&&se===R.byName.writingMode.qname&&!(R.byName.direction.qname in ue.styleAttrs))){var V=ue.styleAttrs[se];"lrtb"===V||"lr"===V?ue.styleAttrs[R.byName.direction.qname]="ltr":("rltb"===V||"rl"===V)&&(ue.styleAttrs[R.byName.direction.qname]="rtl")}if(null!==E)for(var de=0;de<R.all.length;de++){var Q=R.all[de];if(Q.qname===R.byName.textDecoration.qname){var pe=E.styleAttrs[Q.qname],me=ue.styleAttrs[Q.qname],xe=[];void 0===me?xe=pe:-1===me.indexOf("none")?((-1===me.indexOf("noUnderline")&&-1!==pe.indexOf("underline")||-1!==me.indexOf("underline"))&&xe.push("underline"),(-1===me.indexOf("noLineThrough")&&-1!==pe.indexOf("lineThrough")||-1!==me.indexOf("lineThrough"))&&xe.push("lineThrough"),(-1===me.indexOf("noOverline")&&-1!==pe.indexOf("overline")||-1!==me.indexOf("overline"))&&xe.push("overline")):xe.push("none"),ue.styleAttrs[Q.qname]=xe}else if(Q.qname!==R.byName.fontSize.qname||Q.qname in ue.styleAttrs||"span"!==ue.kind||"textContainer"!==ue.styleAttrs[R.byName.ruby.qname])if(Q.qname!==R.byName.fontSize.qname||Q.qname in ue.styleAttrs||"span"!==ue.kind||"text"!==ue.styleAttrs[R.byName.ruby.qname])Q.inherit&&Q.qname in E.styleAttrs&&!(Q.qname in ue.styleAttrs)&&(ue.styleAttrs[Q.qname]=E.styleAttrs[Q.qname]);else{var Ie=E.styleAttrs[R.byName.fontSize.qname];ue.styleAttrs[Q.qname]="textContainer"===E.styleAttrs[R.byName.ruby.qname]?Ie:new U.ComputedLength(.5*Ie.rw,.5*Ie.rh)}else{var _e=E.styleAttrs[R.byName.fontSize.qname];ue.styleAttrs[Q.qname]=new U.ComputedLength(.5*_e.rw,.5*_e.rh)}}for(var Te=0;Te<R.all.length;Te++){var ke=R.all[Te];if(!(ke.qname in ue.styleAttrs||ke.qname===R.byName.position.qname&&R.byName.origin.qname in ue.styleAttrs||ke.qname===R.byName.origin.qname&&R.byName.position.qname in ue.styleAttrs)){var Ue=O.head.styling.initials[ke.qname]||ke.initial;if(null!==Ue&&("region"===ue.kind||!1===ke.inherit&&null!==Ue)){var Fe=ke.parse(Ue);null!==Fe?(ue.styleAttrs[ke.qname]=Fe,q[ke.qname]=!0):L(H,"Invalid initial value for '"+ke.qname+"' on element '"+ue.kind)}}}for(var je=0;je<R.all.length;je++){var Pe=R.all[je];if(Pe.qname in q&&null!==Pe.compute){var He=Pe.compute(O,E,ue,ue.styleAttrs[Pe.qname],ee);null!==He?ue.styleAttrs[Pe.qname]=He:(ue.styleAttrs[Pe.qname]=Pe.compute(O,E,ue,Pe.parse(Pe.initial),ee),L(H,"Style '"+Pe.qname+"' on element '"+ue.kind+"' cannot be computed"))}}if("none"===ue.styleAttrs[R.byName.display.qname])return null;var Le=null;null===E?Le=null===S?[]:[S]:"contents"in I&&(Le=I.contents);for(var ye=0;null!==Le&&ye<Le.length;ye++){var ae=F(O,P,y,S,ue,fe,Le[ye],H,ee);null!==ae&&ue.contents.push(ae.element)}for(var W in ue.styleAttrs)if(ue.styleAttrs.hasOwnProperty(W)){var ce=!1;if("span"===ue.kind){var De=ue.styleAttrs[R.byName.ruby.qname];(ce=("container"===De||"textContainer"===De||"baseContainer"===De)&&-1!==j.indexOf(W))||(ce="container"!==De&&W===R.byName.rubyAlign.qname),ce||(ce=!("textContainer"===De||"text"===De)&&W===R.byName.rubyPosition.qname)}if(!ce){var le=R.byQName[W];"applies"in le&&(ce=-1===le.applies.indexOf(ue.kind))}ce&&delete ue.styleAttrs[W]}var ne=ue.styleAttrs[R.byName.ruby.qname];if("p"===ue.kind||"span"===ue.kind&&("textContainer"===ne||"text"===ne)){var z=[];h(ue,z),function D(O){function P(I){return"br"===I.kind||/[\r\n\t ]$/.test(I.text)}function y(I){return"br"===I.kind||"preserve"===I.space&&/^[\r\n]/.test(I.text)}for(var S,E=0;E<O.length;)if("br"!==(S=O[E]).kind&&"preserve"!==S.space){var A=S.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(A)&&(0===E||P(O[E-1]))&&(A=A.substring(1)),S.text=A,0===A.length?O.splice(E,1):E++}else E++;for(E=0;E<O.length;E++)"br"!==(S=O[E]).kind&&"preserve"!==S.space?/[ ]$/.test(S.text)&&(E===O.length-1||y(O[E+1]))&&(S.text=S.text.slice(0,-1)):E++}(z),u(ue)}return"div"===ue.kind&&R.byName.backgroundImage.qname in ue.styleAttrs||"br"===ue.kind||"image"===ue.kind||"contents"in ue&&ue.contents.length>0||"span"===ue.kind&&null!==ue.text||"region"===ue.kind&&"always"===ue.styleAttrs[R.byName.showBackground.qname]?{region_id:fe,element:ue}:null}function h(O,P){if("contents"in O)for(var y=0;y<O.contents.length;y++){var S=O.contents[y],E=S.styleAttrs[R.byName.ruby.qname];"span"===S.kind&&("textContainer"===E||"text"===E)||("contents"in S?h(S,P):("span"===S.kind&&0!==S.text.length||"br"===S.kind)&&P.push(S))}}function u(O){if("br"===O.kind)return!1;if("text"in O)return 0===O.text.length;if("contents"in O){for(var P=O.contents.length;P--;)u(O.contents[P])&&O.contents.splice(P,1);return 0===O.contents.length}}function p(O){this.contents=[],this.aspectRatio=O.aspectRatio,this.lang=O.lang}function _(O){for(var P in this.kind=O.kind||"region",this.lang=O.lang,O.id&&(this.id=O.id),this.styleAttrs={},O.styleAttrs)!O.styleAttrs.hasOwnProperty(P)||(this.styleAttrs[P]=O.styleAttrs[P]);"src"in O&&(this.src=O.src),"type"in O&&(this.type=O.type),"text"in O?this.text=O.text:("region"===this.kind||"contents"in O)&&(this.contents=[]),"space"in O&&(this.space=O.space)}function L(O,P){if(O&&O.error&&O.error(P))throw P}}(w,"undefined"==typeof imscNames?i("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?i("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?i("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/main.js":function(Ge,w,i){w.generateISD=i("./node_modules/imsc/src/main/js/isd.js").generateISD,w.fromXML=i("./node_modules/imsc/src/main/js/doc.js").fromXML,w.renderHTML=i("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(Ge,w,i){var e;(e=w).ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"},"./node_modules/imsc/src/main/js/styles.js":function(Ge,w,i){!function(e,C,R){function U(D,h,u,p,_,b,k,L){this.name=h,this.ns=D,this.qname=D+" "+h,this.inherit=_,this.animatable=b,this.initial=u,this.applies=p,this.parse=k,this.compute=L}for(var j in e.all=[new U(C.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,R.parseColor,null),new U(C.ns_tts,"color","white",["span"],!0,!0,R.parseColor,null),new U(C.ns_tts,"direction","ltr",["p","span"],!0,!0,function(D){return D},null),new U(C.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(D){return D},null),new U(C.ns_tts,"displayAlign","before",["region"],!1,!0,function(D){return D},null),new U(C.ns_tts,"extent","auto",["tt","region"],!1,!0,function(D){if("auto"===D)return D;var h=D.split(" ");if(2!==h.length)return null;var u=R.parseLength(h[0]),p=R.parseLength(h[1]);return p&&u?{h:p,w:u}:null},function(D,h,u,p,_){var b,k;if("auto"===p)b=new R.ComputedLength(0,1);else if(null===(b=R.toComputedLength(p.h.value,p.h.unit,null,D.dimensions.h,null,D.pxLength.h)))return null;if("auto"===p)k=new R.ComputedLength(1,0);else if(null===(k=R.toComputedLength(p.w.value,p.w.unit,null,D.dimensions.w,null,D.pxLength.w)))return null;return{h:b,w:k}}),new U(C.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(D){for(var h=D.split(","),u=[],p=0;p<h.length;p++)"'"!==h[p].charAt(0)&&'"'!==h[p].charAt(0)&&"default"===h[p]?u.push("monospaceSerif"):u.push(h[p]);return u},null),new U(C.ns_tts,"shear","0%",["p"],!0,!0,R.parseLength,function(D,h,u,p){return"%"!==p.unit?null:Math.abs(p.value)>100?100*Math.sign(p.value):p.value}),new U(C.ns_tts,"fontSize","1c",["span","p"],!0,!0,R.parseLength,function(D,h,u,p,_){return R.toComputedLength(p.value,p.unit,null!==h?h.styleAttrs[e.byName.fontSize.qname]:D.cellLength.h,null!==h?h.styleAttrs[e.byName.fontSize.qname]:D.cellLength.h,D.cellLength.h,D.pxLength.h)}),new U(C.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(D){return D},null),new U(C.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(D){return D},null),new U(C.ns_tts,"lineHeight","normal",["p"],!0,!0,function(D){return"normal"===D?D:R.parseLength(D)},function(D,h,u,p,_){var b;if("normal"===p)b=p;else if(null===(b=R.toComputedLength(p.value,p.unit,u.styleAttrs[e.byName.fontSize.qname],u.styleAttrs[e.byName.fontSize.qname],D.cellLength.h,D.pxLength.h)))return null;return b}),new U(C.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new U(C.ns_tts,"origin","auto",["region"],!1,!0,function(D){if("auto"===D)return D;var h=D.split(" ");if(2!==h.length)return null;var u=R.parseLength(h[0]),p=R.parseLength(h[1]);return p&&u?{h:p,w:u}:null},function(D,h,u,p,_){var b,k;if("auto"===p)b=new R.ComputedLength(0,0);else if(null===(b=R.toComputedLength(p.h.value,p.h.unit,null,D.dimensions.h,null,D.pxLength.h)))return null;if("auto"===p)k=new R.ComputedLength(0,0);else if(null===(k=R.toComputedLength(p.w.value,p.w.unit,null,D.dimensions.w,null,D.pxLength.w)))return null;return{h:b,w:k}}),new U(C.ns_tts,"overflow","hidden",["region"],!1,!0,function(D){return D},null),new U(C.ns_tts,"padding","0px",["region"],!1,!0,function(D){var h=D.split(" ");if(h.length>4)return null;for(var u=[],p=0;p<h.length;p++){var _=R.parseLength(h[p]);if(!_)return null;u.push(_)}return u},function(D,h,u,p,_){var b;if(1===p.length)b=[p[0],p[0],p[0],p[0]];else if(2===p.length)b=[p[0],p[1],p[0],p[1]];else if(3===p.length)b=[p[0],p[1],p[2],p[1]];else{if(4!==p.length)return null;b=[p[0],p[1],p[2],p[3]]}var k=u.styleAttrs[e.byName.writingMode.qname];if("lrtb"===k||"lr"===k)b=[b[0],b[3],b[2],b[1]];else if("rltb"===k||"rl"===k)b=[b[0],b[1],b[2],b[3]];else if("tblr"===k)b=[b[3],b[0],b[1],b[2]];else{if("tbrl"!==k&&"tb"!==k)return null;b=[b[3],b[2],b[1],b[0]]}for(var L=[],B=0;B<b.length;B++)if(0===b[B].value)L[B]=new R.ComputedLength(0,0);else if(L[B]=R.toComputedLength(b[B].value,b[B].unit,u.styleAttrs[e.byName.fontSize.qname],0===B||2===B?u.styleAttrs[e.byName.extent.qname].h:u.styleAttrs[e.byName.extent.qname].w,0===B||2===B?D.cellLength.h:D.cellLength.w,0===B||2===B?D.pxLength.h:D.pxLength.w),null===L[B])return null;return L}),new U(C.ns_tts,"position","top left",["region"],!1,!0,function(D){return R.parsePosition(D)},function(D,h,u,p){var _,b;return null===(_=R.toComputedLength(p.v.offset.value,p.v.offset.unit,null,new R.ComputedLength(-u.styleAttrs[e.byName.extent.qname].h.rw,D.dimensions.h.rh-u.styleAttrs[e.byName.extent.qname].h.rh),null,D.pxLength.h))||("bottom"===p.v.edge&&(_=new R.ComputedLength(-_.rw-u.styleAttrs[e.byName.extent.qname].h.rw,D.dimensions.h.rh-_.rh-u.styleAttrs[e.byName.extent.qname].h.rh)),b=R.toComputedLength(p.h.offset.value,p.h.offset.unit,null,new R.ComputedLength(D.dimensions.w.rw-u.styleAttrs[e.byName.extent.qname].w.rw,-u.styleAttrs[e.byName.extent.qname].w.rh),null,D.pxLength.w),null===_)?null:("right"===p.h.edge&&(b=new R.ComputedLength(D.dimensions.w.rw-b.rw-u.styleAttrs[e.byName.extent.qname].w.rw,-b.rh-u.styleAttrs[e.byName.extent.qname].w.rh)),{h:_,w:b})}),new U(C.ns_tts,"ruby","none",["span"],!1,!0,function(D){return D},null),new U(C.ns_tts,"rubyAlign","center",["span"],!0,!0,function(D){return"center"===D||"spaceAround"===D?D:null},null),new U(C.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(D){return D},null),new U(C.ns_tts,"rubyReserve","none",["p"],!0,!0,function(D){var h=D.split(" "),u=[null,null];if(0===h.length||h.length>2)return null;if("none"!==h[0]&&"both"!==h[0]&&"after"!==h[0]&&"before"!==h[0]&&"outside"!==h[0])return null;if(u[0]=h[0],2===h.length&&"none"!==h[0]){var p=R.parseLength(h[1]);if(!p)return null;u[1]=p}return u},function(D,h,u,p,_){if("none"===p[0])return p;var b;return null===(b=null===p[1]?new R.ComputedLength(.5*u.styleAttrs[e.byName.fontSize.qname].rw,.5*u.styleAttrs[e.byName.fontSize.qname].rh):R.toComputedLength(p[1].value,p[1].unit,u.styleAttrs[e.byName.fontSize.qname],u.styleAttrs[e.byName.fontSize.qname],D.cellLength.h,D.pxLength.h))?null:[p[0],b]}),new U(C.ns_tts,"showBackground","always",["region"],!1,!0,function(D){return D},null),new U(C.ns_tts,"textAlign","start",["p"],!0,!0,function(D){return D},function(D,h,u,p,_){return"left"===p?"start":"right"===p?"end":p}),new U(C.ns_tts,"textCombine","none",["span"],!0,!0,function(D){return"none"===D||"all"===D?D:null},null),new U(C.ns_tts,"textDecoration","none",["span"],!0,!0,function(D){return D.split(" ")},null),new U(C.ns_tts,"textEmphasis","none",["span"],!0,!0,function(D){for(var h=D.split(" "),u={style:null,symbol:null,color:null,position:null},p=0;p<h.length;p++)if("none"===h[p]||"auto"===h[p])u.style=h[p];else if("filled"===h[p]||"open"===h[p])u.style=h[p];else if("circle"===h[p]||"dot"===h[p]||"sesame"===h[p])u.symbol=h[p];else if("current"===h[p])u.color=h[p];else if("outside"===h[p]||"before"===h[p]||"after"===h[p])u.position=h[p];else if(u.color=R.parseColor(h[p]),null===u.color)return null;return null==u.style&&null==u.symbol?u.style="auto":(u.symbol=u.symbol||"circle",u.style=u.style||"filled"),u.position=u.position||"outside",u.color=u.color||"current",u},null),new U(C.ns_tts,"textOutline","none",["span"],!0,!0,function(D){if("none"===D)return D;var h={},u=D.split(" ");if(0===u.length||u.length>2)return null;var p=R.parseColor(u[0]);if(h.color=p,null!==p&&u.shift(),1!==u.length)return null;var _=R.parseLength(u[0]);return _?(h.thickness=_,h):null},function(D,h,u,p,_){if("none"===p)return p;var b={};return b.color=null===p.color?u.styleAttrs[e.byName.color.qname]:p.color,b.thickness=R.toComputedLength(p.thickness.value,p.thickness.unit,u.styleAttrs[e.byName.fontSize.qname],u.styleAttrs[e.byName.fontSize.qname],D.cellLength.h,D.pxLength.h),null===b.thickness?null:b}),new U(C.ns_tts,"textShadow","none",["span"],!0,!0,R.parseTextShadow,function(D,h,u,p){if("none"===p)return p;for(var _=[],b=0;b<p.length;b++){var k={};if(k.x_off=R.toComputedLength(p[b][0].value,p[b][0].unit,null,u.styleAttrs[e.byName.fontSize.qname],null,D.pxLength.w),null===k.x_off||(k.y_off=R.toComputedLength(p[b][1].value,p[b][1].unit,null,u.styleAttrs[e.byName.fontSize.qname],null,D.pxLength.h),null===k.y_off))return null;if(null===p[b][2])k.b_radius=0;else if(k.b_radius=R.toComputedLength(p[b][2].value,p[b][2].unit,null,u.styleAttrs[e.byName.fontSize.qname],null,D.pxLength.h),null===k.b_radius)return null;k.color=null===p[b][3]?u.styleAttrs[e.byName.color.qname]:p[b][3],_.push(k)}return _}),new U(C.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(D){return D},null),new U(C.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(D){return D},null),new U(C.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(D){return D},null),new U(C.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(D){return D},null),new U(C.ns_tts,"zIndex","auto",["region"],!1,!0,function(D){var h;return"auto"===D?h=D:(h=parseInt(D),isNaN(h)&&(h=null)),h},null),new U(C.ns_ebutts,"linePadding","0c",["p"],!0,!1,R.parseLength,function(D,h,u,p,_){return R.toComputedLength(p.value,p.unit,null,null,D.cellLength.w,null)}),new U(C.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(D){return D},null),new U(C.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(D){return D},null),new U(C.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(D){return"true"===D},null),new U(C.ns_itts,"fillLineGap","false",["p"],!0,!0,function(D){return"true"===D},null)],e.byQName={},e.all)e.byQName[e.all[j].qname]=e.all[j];for(var F in e.byName={},e.all)e.byName[e.all[F].name]=e.all[F]}(w,"undefined"==typeof imscNames?i("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?i("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(Ge,w,i){!function(e){var C=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,R=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,U=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,j={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(D){var h,u=null,p=j[D.toLowerCase()];return void 0!==p?u=p:null!==(h=C.exec(D))?u=[parseInt(h[1],16),parseInt(h[2],16),parseInt(h[3],16),void 0!==h[4]?parseInt(h[4],16):255]:null!==(h=R.exec(D))?u=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),255]:null!==(h=U.exec(D))&&(u=[parseInt(h[1]),parseInt(h[2]),parseInt(h[3]),parseInt(h[4])]),u};var F=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(D){var h,u=null;return null!==(h=F.exec(D))&&(u={value:parseFloat(h[1]),unit:h[2]}),u},e.parseTextShadow=function(D){for(var h=D.match(/([^\(,\)]|\([^\)]+\))+/g),u=[],p=0;p<h.length;p++){var _=h[p].split(" ");if(1===_.length&&"none"===_[0])return"none";if(_.length>1&&_.length<5){var b=[null,null,null,null],k=e.parseLength(_.shift());if(null===k||(b[0]=k,null===(k=e.parseLength(_.shift()))))return null;if(b[1]=k,0===_.length){u.push(b);continue}if(null!==(k=e.parseLength(_[0]))&&(b[2]=k,_.shift()),0===_.length){u.push(b);continue}var L=e.parseColor(_[0]);if(null===L)return null;b[3]=L,u.push(b)}}return u},e.parsePosition=function(D){var h=D.split(" "),u=function(O){return"center"===O||"left"===O||"top"===O||"bottom"===O||"right"===O};if(h.length>4)return null;for(var p=0;p<h.length;p++)if(!u(h[p])){var _=e.parseLength(h[p]);if(null===_)return null;h[p]=_}for(var b={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},k=0;k<h.length;){var L=h[k++];if(u(L)){var B={value:0,unit:"%"};2!==h.length&&k<h.length&&!u(h[k])&&(B=h[k++]),"right"===L?(b.h.edge=L,b.h.offset=B):"bottom"===L?(b.v.edge=L,b.v.offset=B):"left"===L?b.h.offset=B:"top"===L&&(b.v.offset=B)}else{if(1!==h.length&&2!==h.length)return null;1===k?b.h.offset=L:b.v.offset=L}}return b},e.ComputedLength=function(D,h){this.rw=D,this.rh=h},e.ComputedLength.prototype.toUsedLength=function(D,h){return D*this.rw+h*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(D,h,u,p,_,b){return"%"===h&&p?new e.ComputedLength(p.rw*D/100,p.rh*D/100):"em"===h&&u?new e.ComputedLength(u.rw*D,u.rh*D):"c"===h&&_?new e.ComputedLength(D*_.rw,D*_.rh):"px"===h&&b?new e.ComputedLength(D*b.rw,D*b.rh):"rh"===h?new e.ComputedLength(0,D/100):"rw"===h?new e.ComputedLength(D/100,0):null}}(w)},"./node_modules/inherits/inherits_browser.js":function(Ge,w){Ge.exports="function"==typeof Object.create?function(e,C){C&&(e.super_=C,e.prototype=Object.create(C.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,C){if(C){e.super_=C;var R=function(){};R.prototype=C.prototype,e.prototype=new R,e.prototype.constructor=e}}},"./node_modules/is-alphabetical/index.js":function(Ge,w,i){"use strict";Ge.exports=function e(C){var R="string"==typeof C?C.charCodeAt(0):C;return R>=97&&R<=122||R>=65&&R<=90}},"./node_modules/is-alphanumerical/index.js":function(Ge,w,i){"use strict";var e=i("./node_modules/is-alphabetical/index.js"),C=i("./node_modules/is-decimal/index.js");Ge.exports=function R(U){return e(U)||C(U)}},"./node_modules/is-decimal/index.js":function(Ge,w,i){"use strict";Ge.exports=function e(C){var R="string"==typeof C?C.charCodeAt(0):C;return R>=48&&R<=57}},"./node_modules/isarray/index.js":function(Ge,w){var i={}.toString;Ge.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},"./node_modules/path-browserify/index.js":function(Ge,w,i){(function(e){function C(F,D){for(var h=0,u=F.length-1;u>=0;u--){var p=F[u];"."===p?F.splice(u,1):".."===p?(F.splice(u,1),h++):h&&(F.splice(u,1),h--)}if(D)for(;h--;h)F.unshift("..");return F}function U(F,D){if(F.filter)return F.filter(D);for(var h=[],u=0;u<F.length;u++)D(F[u],u,F)&&h.push(F[u]);return h}w.resolve=function(){for(var F="",D=!1,h=arguments.length-1;h>=-1&&!D;h--){var u=h>=0?arguments[h]:e.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(F=u+"/"+F,D="/"===u.charAt(0))}return(D?"/":"")+(F=C(U(F.split("/"),function(p){return!!p}),!D).join("/"))||"."},w.normalize=function(F){var D=w.isAbsolute(F),h="/"===j(F,-1);return!(F=C(U(F.split("/"),function(u){return!!u}),!D).join("/"))&&!D&&(F="."),F&&h&&(F+="/"),(D?"/":"")+F},w.isAbsolute=function(F){return"/"===F.charAt(0)},w.join=function(){var F=Array.prototype.slice.call(arguments,0);return w.normalize(U(F,function(D,h){if("string"!=typeof D)throw new TypeError("Arguments to path.join must be strings");return D}).join("/"))},w.relative=function(F,D){function h(B){for(var O=0;O<B.length&&""===B[O];O++);for(var P=B.length-1;P>=0&&""===B[P];P--);return O>P?[]:B.slice(O,P-O+1)}F=w.resolve(F).substr(1),D=w.resolve(D).substr(1);for(var u=h(F.split("/")),p=h(D.split("/")),_=Math.min(u.length,p.length),b=_,k=0;k<_;k++)if(u[k]!==p[k]){b=k;break}var L=[];for(k=b;k<u.length;k++)L.push("..");return(L=L.concat(p.slice(b))).join("/")},w.sep="/",w.delimiter=":",w.dirname=function(F){if("string"!=typeof F&&(F+=""),0===F.length)return".";for(var D=F.charCodeAt(0),h=47===D,u=-1,p=!0,_=F.length-1;_>=1;--_)if(47===(D=F.charCodeAt(_))){if(!p){u=_;break}}else p=!1;return-1===u?h?"/":".":h&&1===u?"/":F.slice(0,u)},w.basename=function(F,D){var h=function R(F){"string"!=typeof F&&(F+="");var p,D=0,h=-1,u=!0;for(p=F.length-1;p>=0;--p)if(47===F.charCodeAt(p)){if(!u){D=p+1;break}}else-1===h&&(u=!1,h=p+1);return-1===h?"":F.slice(D,h)}(F);return D&&h.substr(-1*D.length)===D&&(h=h.substr(0,h.length-D.length)),h},w.extname=function(F){"string"!=typeof F&&(F+="");for(var D=-1,h=0,u=-1,p=!0,_=0,b=F.length-1;b>=0;--b){var k=F.charCodeAt(b);if(47!==k)-1===u&&(p=!1,u=b+1),46===k?-1===D?D=b:1!==_&&(_=1):-1!==D&&(_=-1);else if(!p){h=b+1;break}}return-1===D||-1===u||0===_||1===_&&D===u-1&&D===h+1?"":F.slice(D,u)};var j=function(F,D,h){return F.substr(D,h)}}).call(this,i("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(Ge,w,i){"use strict";(function(e){Ge.exports=void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?{nextTick:function C(R,U,j,F){if("function"!=typeof R)throw new TypeError('"callback" argument must be a function');var h,u,D=arguments.length;switch(D){case 0:case 1:return e.nextTick(R);case 2:return e.nextTick(function(){R.call(null,U)});case 3:return e.nextTick(function(){R.call(null,U,j)});case 4:return e.nextTick(function(){R.call(null,U,j,F)});default:for(h=new Array(D-1),u=0;u<h.length;)h[u++]=arguments[u];return e.nextTick(function(){R.apply(null,h)})}}}:e}).call(this,i("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(Ge,w){var e,C,i=Ge.exports={};function R(){throw new Error("setTimeout has not been defined")}function U(){throw new Error("clearTimeout has not been defined")}function j(B){if(e===setTimeout)return setTimeout(B,0);if((e===R||!e)&&setTimeout)return e=setTimeout,setTimeout(B,0);try{return e(B,0)}catch(O){try{return e.call(null,B,0)}catch(P){return e.call(this,B,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:R}catch(B){e=R}try{C="function"==typeof clearTimeout?clearTimeout:U}catch(B){C=U}}();var u,D=[],h=!1,p=-1;function _(){!h||!u||(h=!1,u.length?D=u.concat(D):p=-1,D.length&&b())}function b(){if(!h){var B=j(_);h=!0;for(var O=D.length;O;){for(u=D,D=[];++p<O;)u&&u[p].run();p=-1,O=D.length}u=null,h=!1,function F(B){if(C===clearTimeout)return clearTimeout(B);if((C===U||!C)&&clearTimeout)return C=clearTimeout,clearTimeout(B);try{return C(B)}catch(O){try{return C.call(null,B)}catch(P){return C.call(this,B)}}}(B)}}function k(B,O){this.fun=B,this.array=O}function L(){}i.nextTick=function(B){var O=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)O[P-1]=arguments[P];D.push(new k(B,O)),1===D.length&&!h&&j(b)},k.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=L,i.addListener=L,i.once=L,i.off=L,i.removeListener=L,i.removeAllListeners=L,i.emit=L,i.prependListener=L,i.prependOnceListener=L,i.listeners=function(B){return[]},i.binding=function(B){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(B){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(Ge,w,i){Ge.exports=i("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(Ge,w,i){"use strict";var e=i("./node_modules/process-nextick-args/index.js"),C=Object.keys||function(b){var k=[];for(var L in b)k.push(L);return k};Ge.exports=u;var R=Object.create(i("./node_modules/core-util-is/lib/util.js"));R.inherits=i("./node_modules/inherits/inherits_browser.js");var U=i("./node_modules/readable-stream/lib/_stream_readable.js"),j=i("./node_modules/readable-stream/lib/_stream_writable.js");R.inherits(u,U);for(var F=C(j.prototype),D=0;D<F.length;D++){var h=F[D];u.prototype[h]||(u.prototype[h]=j.prototype[h])}function u(b){if(!(this instanceof u))return new u(b);U.call(this,b),j.call(this,b),b&&!1===b.readable&&(this.readable=!1),b&&!1===b.writable&&(this.writable=!1),this.allowHalfOpen=!0,b&&!1===b.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||e.nextTick(_,this)}function _(b){b.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(b){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),u.prototype._destroy=function(b,k){this.push(null),this.end(),e.nextTick(k,b)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(Ge,w,i){"use strict";Ge.exports=R;var e=i("./node_modules/readable-stream/lib/_stream_transform.js"),C=Object.create(i("./node_modules/core-util-is/lib/util.js"));function R(U){if(!(this instanceof R))return new R(U);e.call(this,U)}C.inherits=i("./node_modules/inherits/inherits_browser.js"),C.inherits(R,e),R.prototype._transform=function(U,j,F){F(null,U)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(Ge,w,i){"use strict";(function(e,C){var R=i("./node_modules/process-nextick-args/index.js");Ge.exports=I;var j,U=i("./node_modules/isarray/index.js");I.ReadableState=A,i("./node_modules/events/events.js");var D=function(ae,W){return ae.listeners(W).length},h=i("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),u=i("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,p=e.Uint8Array||function(){};var k=Object.create(i("./node_modules/core-util-is/lib/util.js"));k.inherits=i("./node_modules/inherits/inherits_browser.js");var L=i(0),B=void 0;B=L&&L.debuglog?L.debuglog("stream"):function(){};var y,O=i("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),P=i("./node_modules/readable-stream/lib/internal/streams/destroy.js");k.inherits(I,h);var S=["error","close","destroy","pause","resume"];function A(ae,W){var ce=W instanceof(j=j||i("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!(ae=ae||{}).objectMode,ce&&(this.objectMode=this.objectMode||!!ae.readableObjectMode);var De=ae.highWaterMark,le=ae.readableHighWaterMark;this.highWaterMark=De||0===De?De:ce&&(le||0===le)?le:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new O,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=ae.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ae.encoding&&(y||(y=i("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new y(ae.encoding),this.encoding=ae.encoding)}function I(ae){if(j=j||i("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof I))return new I(ae);this._readableState=new A(ae,this),this.readable=!0,ae&&("function"==typeof ae.read&&(this._read=ae.read),"function"==typeof ae.destroy&&(this._destroy=ae.destroy)),h.call(this)}function H(ae,W,ce,De,le){var z,ne=ae._readableState;return null===W?(ne.reading=!1,function V(ae,W){if(!W.ended){if(W.decoder){var ce=W.decoder.end();ce&&ce.length&&(W.buffer.push(ce),W.length+=W.objectMode?1:ce.length)}W.ended=!0,de(ae)}}(ae,ne)):(le||(z=function fe(ae,W){var ce;return!function b(ae){return u.isBuffer(ae)||ae instanceof p}(W)&&"string"!=typeof W&&void 0!==W&&!ae.objectMode&&(ce=new TypeError("Invalid non-string/buffer chunk")),ce}(ne,W)),z?ae.emit("error",z):ne.objectMode||W&&W.length>0?("string"!=typeof W&&!ne.objectMode&&Object.getPrototypeOf(W)!==u.prototype&&(W=function _(ae){return u.from(ae)}(W)),De?ne.endEmitted?ae.emit("error",new Error("stream.unshift() after end event")):ee(ae,ne,W,!0):ne.ended?ae.emit("error",new Error("stream.push() after EOF")):(ne.reading=!1,ne.decoder&&!ce?(W=ne.decoder.write(W),ne.objectMode||0!==W.length?ee(ae,ne,W,!1):pe(ae,ne)):ee(ae,ne,W,!1))):De||(ne.reading=!1)),function ue(ae){return!ae.ended&&(ae.needReadable||ae.length<ae.highWaterMark||0===ae.length)}(ne)}function ee(ae,W,ce,De){W.flowing&&0===W.length&&!W.sync?(ae.emit("data",ce),ae.read(0)):(W.length+=W.objectMode?1:ce.length,De?W.buffer.unshift(ce):W.buffer.push(ce),W.needReadable&&de(ae)),pe(ae,W)}Object.defineProperty(I.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(ae){!this._readableState||(this._readableState.destroyed=ae)}}),I.prototype.destroy=P.destroy,I.prototype._undestroy=P.undestroy,I.prototype._destroy=function(ae,W){this.push(null),W(ae)},I.prototype.push=function(ae,W){var De,ce=this._readableState;return ce.objectMode?De=!0:"string"==typeof ae&&((W=W||ce.defaultEncoding)!==ce.encoding&&(ae=u.from(ae,W),W=""),De=!0),H(this,ae,W,!1,De)},I.prototype.unshift=function(ae){return H(this,ae,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(ae){return y||(y=i("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new y(ae),this._readableState.encoding=ae,this};function se(ae,W){return ae<=0||0===W.length&&W.ended?0:W.objectMode?1:ae!=ae?W.flowing&&W.length?W.buffer.head.data.length:W.length:(ae>W.highWaterMark&&(W.highWaterMark=function q(ae){return ae>=8388608?ae=8388608:(ae--,ae|=ae>>>1,ae|=ae>>>2,ae|=ae>>>4,ae|=ae>>>8,ae|=ae>>>16,ae++),ae}(ae)),ae<=W.length?ae:W.ended?W.length:(W.needReadable=!0,0))}function de(ae){var W=ae._readableState;W.needReadable=!1,W.emittedReadable||(B("emitReadable",W.flowing),W.emittedReadable=!0,W.sync?R.nextTick(Q,ae):Q(ae))}function Q(ae){B("emit readable"),ae.emit("readable"),ke(ae)}function pe(ae,W){W.readingMore||(W.readingMore=!0,R.nextTick(me,ae,W))}function me(ae,W){for(var ce=W.length;!W.reading&&!W.flowing&&!W.ended&&W.length<W.highWaterMark&&(B("maybeReadMore read 0"),ae.read(0),ce!==W.length);)ce=W.length;W.readingMore=!1}function _e(ae){B("readable nexttick read 0"),ae.read(0)}function Te(ae,W){W.reading||(B("resume read 0"),ae.read(0)),W.resumeScheduled=!1,W.awaitDrain=0,ae.emit("resume"),ke(ae),W.flowing&&!W.reading&&ae.read(0)}function ke(ae){var W=ae._readableState;for(B("flow",W.flowing);W.flowing&&null!==ae.read(););}function Ue(ae,W){return 0===W.length?null:(W.objectMode?ce=W.buffer.shift():!ae||ae>=W.length?(ce=W.decoder?W.buffer.join(""):1===W.buffer.length?W.buffer.head.data:W.buffer.concat(W.length),W.buffer.clear()):ce=function Fe(ae,W,ce){var De;return ae<W.head.data.length?(De=W.head.data.slice(0,ae),W.head.data=W.head.data.slice(ae)):De=ae===W.head.data.length?W.shift():ce?function je(ae,W){var ce=W.head,De=1,le=ce.data;for(ae-=le.length;ce=ce.next;){var ne=ce.data,z=ae>ne.length?ne.length:ae;if(le+=z===ne.length?ne:ne.slice(0,ae),0==(ae-=z)){z===ne.length?(++De,W.head=ce.next?ce.next:W.tail=null):(W.head=ce,ce.data=ne.slice(z));break}++De}return W.length-=De,le}(ae,W):function Pe(ae,W){var ce=u.allocUnsafe(ae),De=W.head,le=1;for(De.data.copy(ce),ae-=De.data.length;De=De.next;){var ne=De.data,z=ae>ne.length?ne.length:ae;if(ne.copy(ce,ce.length-ae,0,z),0==(ae-=z)){z===ne.length?(++le,W.head=De.next?De.next:W.tail=null):(W.head=De,De.data=ne.slice(z));break}++le}return W.length-=le,ce}(ae,W),De}(ae,W.buffer,W.decoder),ce);var ce}function He(ae){var W=ae._readableState;if(W.length>0)throw new Error('"endReadable()" called on non-empty stream');W.endEmitted||(W.ended=!0,R.nextTick(Le,W,ae))}function Le(ae,W){!ae.endEmitted&&0===ae.length&&(ae.endEmitted=!0,W.readable=!1,W.emit("end"))}function ye(ae,W){for(var ce=0,De=ae.length;ce<De;ce++)if(ae[ce]===W)return ce;return-1}I.prototype.read=function(ae){B("read",ae),ae=parseInt(ae,10);var W=this._readableState,ce=ae;if(0!==ae&&(W.emittedReadable=!1),0===ae&&W.needReadable&&(W.length>=W.highWaterMark||W.ended))return B("read: emitReadable",W.length,W.ended),0===W.length&&W.ended?He(this):de(this),null;if(0===(ae=se(ae,W))&&W.ended)return 0===W.length&&He(this),null;var le,De=W.needReadable;return B("need readable",De),(0===W.length||W.length-ae<W.highWaterMark)&&B("length less than watermark",De=!0),W.ended||W.reading?B("reading or ended",De=!1):De&&(B("do read"),W.reading=!0,W.sync=!0,0===W.length&&(W.needReadable=!0),this._read(W.highWaterMark),W.sync=!1,W.reading||(ae=se(ce,W))),null===(le=ae>0?Ue(ae,W):null)?(W.needReadable=!0,ae=0):W.length-=ae,0===W.length&&(W.ended||(W.needReadable=!0),ce!==ae&&W.ended&&He(this)),null!==le&&this.emit("data",le),le},I.prototype._read=function(ae){this.emit("error",new Error("_read() is not implemented"))},I.prototype.pipe=function(ae,W){var ce=this,De=this._readableState;switch(De.pipesCount){case 0:De.pipes=ae;break;case 1:De.pipes=[De.pipes,ae];break;default:De.pipes.push(ae)}De.pipesCount+=1,B("pipe count=%d opts=%j",De.pipesCount,W);var ne=W&&!1===W.end||ae===C.stdout||ae===C.stderr?et:te;function z(ct,xt){B("onunpipe"),ct===ce&&xt&&!1===xt.hasUnpiped&&(xt.hasUnpiped=!0,function K(){B("cleanup"),ae.removeListener("close",Ze),ae.removeListener("finish",st),ae.removeListener("drain",X),ae.removeListener("error",Oe),ae.removeListener("unpipe",z),ce.removeListener("end",te),ce.removeListener("end",et),ce.removeListener("data",Ce),$=!0,De.awaitDrain&&(!ae._writableState||ae._writableState.needDrain)&&X()}())}function te(){B("onend"),ae.end()}De.endEmitted?R.nextTick(ne):ce.once("end",ne),ae.on("unpipe",z);var X=function xe(ae){return function(){var W=ae._readableState;B("pipeOnDrain",W.awaitDrain),W.awaitDrain&&W.awaitDrain--,0===W.awaitDrain&&D(ae,"data")&&(W.flowing=!0,ke(ae))}}(ce);ae.on("drain",X);var $=!1;var oe=!1;function Ce(ct){B("ondata"),oe=!1,!1===ae.write(ct)&&!oe&&((1===De.pipesCount&&De.pipes===ae||De.pipesCount>1&&-1!==ye(De.pipes,ae))&&!$&&(B("false write response, pause",ce._readableState.awaitDrain),ce._readableState.awaitDrain++,oe=!0),ce.pause())}function Oe(ct){B("onerror",ct),et(),ae.removeListener("error",Oe),0===D(ae,"error")&&ae.emit("error",ct)}function Ze(){ae.removeListener("finish",st),et()}function st(){B("onfinish"),ae.removeListener("close",Ze),et()}function et(){B("unpipe"),ce.unpipe(ae)}return ce.on("data",Ce),function E(ae,W,ce){if("function"==typeof ae.prependListener)return ae.prependListener(W,ce);ae._events&&ae._events[W]?U(ae._events[W])?ae._events[W].unshift(ce):ae._events[W]=[ce,ae._events[W]]:ae.on(W,ce)}(ae,"error",Oe),ae.once("close",Ze),ae.once("finish",st),ae.emit("pipe",ce),De.flowing||(B("pipe resume"),ce.resume()),ae},I.prototype.unpipe=function(ae){var W=this._readableState,ce={hasUnpiped:!1};if(0===W.pipesCount)return this;if(1===W.pipesCount)return ae&&ae!==W.pipes||(ae||(ae=W.pipes),W.pipes=null,W.pipesCount=0,W.flowing=!1,ae&&ae.emit("unpipe",this,ce)),this;if(!ae){var De=W.pipes,le=W.pipesCount;W.pipes=null,W.pipesCount=0,W.flowing=!1;for(var ne=0;ne<le;ne++)De[ne].emit("unpipe",this,ce);return this}var z=ye(W.pipes,ae);return-1===z||(W.pipes.splice(z,1),W.pipesCount-=1,1===W.pipesCount&&(W.pipes=W.pipes[0]),ae.emit("unpipe",this,ce)),this},I.prototype.addListener=I.prototype.on=function(ae,W){var ce=h.prototype.on.call(this,ae,W);if("data"===ae)!1!==this._readableState.flowing&&this.resume();else if("readable"===ae){var De=this._readableState;!De.endEmitted&&!De.readableListening&&(De.readableListening=De.needReadable=!0,De.emittedReadable=!1,De.reading?De.length&&de(this):R.nextTick(_e,this))}return ce},I.prototype.resume=function(){var ae=this._readableState;return ae.flowing||(B("resume"),ae.flowing=!0,function Ie(ae,W){W.resumeScheduled||(W.resumeScheduled=!0,R.nextTick(Te,ae,W))}(this,ae)),this},I.prototype.pause=function(){return B("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(B("pause"),this._readableState.flowing=!1,this.emit("pause")),this},I.prototype.wrap=function(ae){var W=this,ce=this._readableState,De=!1;for(var le in ae.on("end",function(){if(B("wrapped end"),ce.decoder&&!ce.ended){var z=ce.decoder.end();z&&z.length&&W.push(z)}W.push(null)}),ae.on("data",function(z){B("wrapped data"),ce.decoder&&(z=ce.decoder.write(z)),ce.objectMode&&null==z||!(ce.objectMode||z&&z.length)||W.push(z)||(De=!0,ae.pause())}),ae)void 0===this[le]&&"function"==typeof ae[le]&&(this[le]=function(z){return function(){return ae[z].apply(ae,arguments)}}(le));for(var ne=0;ne<S.length;ne++)ae.on(S[ne],this.emit.bind(this,S[ne]));return this._read=function(z){B("wrapped _read",z),De&&(De=!1,ae.resume())},this},Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),I._fromList=Ue}).call(this,i("./node_modules/webpack/buildin/global.js"),i("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(Ge,w,i){"use strict";Ge.exports=U;var e=i("./node_modules/readable-stream/lib/_stream_duplex.js"),C=Object.create(i("./node_modules/core-util-is/lib/util.js"));function R(D,h){var u=this._transformState;u.transforming=!1;var p=u.writecb;if(!p)return this.emit("error",new Error("write callback called multiple times"));u.writechunk=null,u.writecb=null,null!=h&&this.push(h),p(D);var _=this._readableState;_.reading=!1,(_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}function U(D){if(!(this instanceof U))return new U(D);e.call(this,D),this._transformState={afterTransform:R.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,D&&("function"==typeof D.transform&&(this._transform=D.transform),"function"==typeof D.flush&&(this._flush=D.flush)),this.on("prefinish",j)}function j(){var D=this;"function"==typeof this._flush?this._flush(function(h,u){F(D,h,u)}):F(this,null,null)}function F(D,h,u){if(h)return D.emit("error",h);if(null!=u&&D.push(u),D._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(D._transformState.transforming)throw new Error("Calling transform done when still transforming");return D.push(null)}C.inherits=i("./node_modules/inherits/inherits_browser.js"),C.inherits(U,e),U.prototype.push=function(D,h){return this._transformState.needTransform=!1,e.prototype.push.call(this,D,h)},U.prototype._transform=function(D,h,u){throw new Error("_transform() is not implemented")},U.prototype._write=function(D,h,u){var p=this._transformState;if(p.writecb=u,p.writechunk=D,p.writeencoding=h,!p.transforming){var _=this._readableState;(p.needTransform||_.needReadable||_.length<_.highWaterMark)&&this._read(_.highWaterMark)}},U.prototype._read=function(D){var h=this._transformState;null!==h.writechunk&&h.writecb&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},U.prototype._destroy=function(D,h){var u=this;e.prototype._destroy.call(this,D,function(p){h(p),u.emit("close")})}},"./node_modules/readable-stream/lib/_stream_writable.js":function(Ge,w,i){"use strict";(function(e,C,R){var U=i("./node_modules/process-nextick-args/index.js");function F(Te){var ke=this;this.next=null,this.entry=null,this.finish=function(){!function Ie(Te,ke,Ue){var Fe=Te.entry;for(Te.entry=null;Fe;){var je=Fe.callback;ke.pendingcb--,je(Ue),Fe=Fe.next}ke.corkedRequestsFree?ke.corkedRequestsFree.next=Te:ke.corkedRequestsFree=Te}(ke,Te)}}Ge.exports=E;var h,D=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?C:U.nextTick;E.WritableState=y;var u=Object.create(i("./node_modules/core-util-is/lib/util.js"));u.inherits=i("./node_modules/inherits/inherits_browser.js");var p={deprecate:i("./node_modules/util-deprecate/browser.js")},_=i("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),b=i("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,k=R.Uint8Array||function(){};var S,O=i("./node_modules/readable-stream/lib/internal/streams/destroy.js");function P(){}function y(Te,ke){h=h||i("./node_modules/readable-stream/lib/_stream_duplex.js");var Ue=ke instanceof h;this.objectMode=!!(Te=Te||{}).objectMode,Ue&&(this.objectMode=this.objectMode||!!Te.writableObjectMode);var Fe=Te.highWaterMark,je=Te.writableHighWaterMark;this.highWaterMark=Fe||0===Fe?Fe:Ue&&(je||0===je)?je:this.objectMode?16:16384,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===Te.decodeStrings),this.defaultEncoding=Te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Le){!function q(Te,ke){var Ue=Te._writableState,Fe=Ue.sync,je=Ue.writecb;if(function be(Te){Te.writing=!1,Te.writecb=null,Te.length-=Te.writelen,Te.writelen=0}(Ue),ke)!function ue(Te,ke,Ue,Fe,je){--ke.pendingcb,Ue?(U.nextTick(je,Fe),U.nextTick(xe,Te,ke),Te._writableState.errorEmitted=!0,Te.emit("error",Fe)):(je(Fe),Te._writableState.errorEmitted=!0,Te.emit("error",Fe),xe(Te,ke))}(Te,Ue,Fe,ke,je);else{var Pe=Q(Ue);!Pe&&!Ue.corked&&!Ue.bufferProcessing&&Ue.bufferedRequest&&de(Te,Ue),Fe?D(se,Te,Ue,Pe,je):se(Te,Ue,Pe,je)}}(ke,Le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new F(this)}function E(Te){if(h=h||i("./node_modules/readable-stream/lib/_stream_duplex.js"),!(S.call(E,this)||this instanceof h))return new E(Te);this._writableState=new y(Te,this),this.writable=!0,Te&&("function"==typeof Te.write&&(this._write=Te.write),"function"==typeof Te.writev&&(this._writev=Te.writev),"function"==typeof Te.destroy&&(this._destroy=Te.destroy),"function"==typeof Te.final&&(this._final=Te.final)),_.call(this)}function ee(Te,ke,Ue,Fe,je,Pe){if(!Ue){var He=function H(Te,ke,Ue){return!Te.objectMode&&!1!==Te.decodeStrings&&"string"==typeof ke&&(ke=b.from(ke,Ue)),ke}(ke,Fe,je);Fe!==He&&(Ue=!0,je="buffer",Fe=He)}var Le=ke.objectMode?1:Fe.length;ke.length+=Le;var ye=ke.length<ke.highWaterMark;if(ye||(ke.needDrain=!0),ke.writing||ke.corked){var ae=ke.lastBufferedRequest;ke.lastBufferedRequest={chunk:Fe,encoding:je,isBuf:Ue,callback:Pe,next:null},ae?ae.next=ke.lastBufferedRequest:ke.bufferedRequest=ke.lastBufferedRequest,ke.bufferedRequestCount+=1}else fe(Te,ke,!1,Le,Fe,je,Pe);return ye}function fe(Te,ke,Ue,Fe,je,Pe,He){ke.writelen=Fe,ke.writecb=He,ke.writing=!0,ke.sync=!0,Ue?Te._writev(je,ke.onwrite):Te._write(je,Pe,ke.onwrite),ke.sync=!1}function se(Te,ke,Ue,Fe){Ue||function V(Te,ke){0===ke.length&&ke.needDrain&&(ke.needDrain=!1,Te.emit("drain"))}(Te,ke),ke.pendingcb--,Fe(),xe(Te,ke)}function de(Te,ke){ke.bufferProcessing=!0;var Ue=ke.bufferedRequest;if(Te._writev&&Ue&&Ue.next){var je=new Array(ke.bufferedRequestCount),Pe=ke.corkedRequestsFree;Pe.entry=Ue;for(var He=0,Le=!0;Ue;)je[He]=Ue,Ue.isBuf||(Le=!1),Ue=Ue.next,He+=1;je.allBuffers=Le,fe(Te,ke,!0,ke.length,je,"",Pe.finish),ke.pendingcb++,ke.lastBufferedRequest=null,Pe.next?(ke.corkedRequestsFree=Pe.next,Pe.next=null):ke.corkedRequestsFree=new F(ke),ke.bufferedRequestCount=0}else{for(;Ue;){var ye=Ue.chunk;if(fe(Te,ke,!1,ke.objectMode?1:ye.length,ye,Ue.encoding,Ue.callback),Ue=Ue.next,ke.bufferedRequestCount--,ke.writing)break}null===Ue&&(ke.lastBufferedRequest=null)}ke.bufferedRequest=Ue,ke.bufferProcessing=!1}function Q(Te){return Te.ending&&0===Te.length&&null===Te.bufferedRequest&&!Te.finished&&!Te.writing}function pe(Te,ke){Te._final(function(Ue){ke.pendingcb--,Ue&&Te.emit("error",Ue),ke.prefinished=!0,Te.emit("prefinish"),xe(Te,ke)})}function xe(Te,ke){var Ue=Q(ke);return Ue&&(function me(Te,ke){!ke.prefinished&&!ke.finalCalled&&("function"==typeof Te._final?(ke.pendingcb++,ke.finalCalled=!0,U.nextTick(pe,Te,ke)):(ke.prefinished=!0,Te.emit("prefinish")))}(Te,ke),0===ke.pendingcb&&(ke.finished=!0,Te.emit("finish"))),Ue}u.inherits(E,_),y.prototype.getBuffer=function(){for(var ke=this.bufferedRequest,Ue=[];ke;)Ue.push(ke),ke=ke.next;return Ue},function(){try{Object.defineProperty(y.prototype,"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(Te){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(Te){return!!S.call(this,Te)||this===E&&Te&&Te._writableState instanceof y}})):S=function(Te){return Te instanceof this},E.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},E.prototype.write=function(Te,ke,Ue){var Fe=this._writableState,je=!1,Pe=!Fe.objectMode&&function B(Te){return b.isBuffer(Te)||Te instanceof k}(Te);return Pe&&!b.isBuffer(Te)&&(Te=function L(Te){return b.from(Te)}(Te)),"function"==typeof ke&&(Ue=ke,ke=null),Pe?ke="buffer":ke||(ke=Fe.defaultEncoding),"function"!=typeof Ue&&(Ue=P),Fe.ended?function A(Te,ke){var Ue=new Error("write after end");Te.emit("error",Ue),U.nextTick(ke,Ue)}(this,Ue):(Pe||function I(Te,ke,Ue,Fe){var je=!0,Pe=!1;return null===Ue?Pe=new TypeError("May not write null values to stream"):"string"!=typeof Ue&&void 0!==Ue&&!ke.objectMode&&(Pe=new TypeError("Invalid non-string/buffer chunk")),Pe&&(Te.emit("error",Pe),U.nextTick(Fe,Pe),je=!1),je}(this,Fe,Te,Ue))&&(Fe.pendingcb++,je=ee(this,Fe,Pe,Te,ke,Ue)),je},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var Te=this._writableState;Te.corked&&(Te.corked--,!Te.writing&&!Te.corked&&!Te.finished&&!Te.bufferProcessing&&Te.bufferedRequest&&de(this,Te))},E.prototype.setDefaultEncoding=function(ke){if("string"==typeof ke&&(ke=ke.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ke+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ke);return this._writableState.defaultEncoding=ke,this},Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(Te,ke,Ue){Ue(new Error("_write() is not implemented"))},E.prototype._writev=null,E.prototype.end=function(Te,ke,Ue){var Fe=this._writableState;"function"==typeof Te?(Ue=Te,Te=null,ke=null):"function"==typeof ke&&(Ue=ke,ke=null),null!=Te&&this.write(Te,ke),Fe.corked&&(Fe.corked=1,this.uncork()),!Fe.ending&&!Fe.finished&&function _e(Te,ke,Ue){ke.ending=!0,xe(Te,ke),Ue&&(ke.finished?U.nextTick(Ue):Te.once("finish",Ue)),ke.ended=!0,Te.writable=!1}(this,Fe,Ue)},Object.defineProperty(E.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(Te){!this._writableState||(this._writableState.destroyed=Te)}}),E.prototype.destroy=O.destroy,E.prototype._undestroy=O.undestroy,E.prototype._destroy=function(Te,ke){this.end(),ke(Te)}}).call(this,i("./node_modules/process/browser.js"),i("./node_modules/timers-browserify/main.js").setImmediate,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(Ge,w,i){"use strict";var C=i("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,R=i(1);function U(j,F,D){j.copy(F,D)}Ge.exports=function(){function j(){(function e(j,F){if(!(j instanceof F))throw new TypeError("Cannot call a class as a function")})(this,j),this.head=null,this.tail=null,this.length=0}return j.prototype.push=function(D){var h={data:D,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length},j.prototype.unshift=function(D){var h={data:D,next:this.head};0===this.length&&(this.tail=h),this.head=h,++this.length},j.prototype.shift=function(){if(0!==this.length){var D=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,D}},j.prototype.clear=function(){this.head=this.tail=null,this.length=0},j.prototype.join=function(D){if(0===this.length)return"";for(var h=this.head,u=""+h.data;h=h.next;)u+=D+h.data;return u},j.prototype.concat=function(D){if(0===this.length)return C.alloc(0);if(1===this.length)return this.head.data;for(var h=C.allocUnsafe(D>>>0),u=this.head,p=0;u;)U(u.data,h,p),p+=u.data.length,u=u.next;return h},j}(),R&&R.inspect&&R.inspect.custom&&(Ge.exports.prototype[R.inspect.custom]=function(){var j=R.inspect({length:this.length});return this.constructor.name+" "+j})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(Ge,w,i){"use strict";var e=i("./node_modules/process-nextick-args/index.js");function U(j,F){j.emit("error",F)}Ge.exports={destroy:function C(j,F){var D=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(F?F(j):j&&(!this._writableState||!this._writableState.errorEmitted)&&e.nextTick(U,this,j),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(p){!F&&p?(e.nextTick(U,D,p),D._writableState&&(D._writableState.errorEmitted=!0)):F&&F(p)}),this)},undestroy:function R(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(Ge,w,i){Ge.exports=i("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/node_modules/safe-buffer/index.js":function(Ge,w,i){var e=i("./node_modules/buffer/index.js"),C=e.Buffer;function R(j,F){for(var D in j)F[D]=j[D]}function U(j,F,D){return C(j,F,D)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?Ge.exports=e:(R(e,w),w.Buffer=U),R(C,U),U.from=function(j,F,D){if("number"==typeof j)throw new TypeError("Argument must not be a number");return C(j,F,D)},U.alloc=function(j,F,D){if("number"!=typeof j)throw new TypeError("Argument must be a number");var h=C(j);return void 0!==F?"string"==typeof D?h.fill(F,D):h.fill(F):h.fill(0),h},U.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return C(j)},U.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return e.SlowBuffer(j)}},"./node_modules/readable-stream/passthrough.js":function(Ge,w,i){Ge.exports=i("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(Ge,w,i){(w=Ge.exports=i("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=w,w.Readable=w,w.Writable=i("./node_modules/readable-stream/lib/_stream_writable.js"),w.Duplex=i("./node_modules/readable-stream/lib/_stream_duplex.js"),w.Transform=i("./node_modules/readable-stream/lib/_stream_transform.js"),w.PassThrough=i("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(Ge,w,i){Ge.exports=i("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(Ge,w,i){Ge.exports=i("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(Ge,w,i){var e=i("./node_modules/buffer/index.js"),C=e.Buffer;function R(j,F){for(var D in j)F[D]=j[D]}function U(j,F,D){return C(j,F,D)}C.from&&C.alloc&&C.allocUnsafe&&C.allocUnsafeSlow?Ge.exports=e:(R(e,w),w.Buffer=U),U.prototype=Object.create(C.prototype),R(C,U),U.from=function(j,F,D){if("number"==typeof j)throw new TypeError("Argument must not be a number");return C(j,F,D)},U.alloc=function(j,F,D){if("number"!=typeof j)throw new TypeError("Argument must be a number");var h=C(j);return void 0!==F?"string"==typeof D?h.fill(F,D):h.fill(F):h.fill(0),h},U.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return C(j)},U.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return e.SlowBuffer(j)}},"./node_modules/sax/lib/sax.js":function(Ge,w,i){(function(e){!function(C){C.parser=function(W,ce){return new U(W,ce)},C.SAXParser=U,C.SAXStream=_,C.createStream=function p(W,ce){return new _(W,ce)},C.MAX_BUFFER_LENGTH=65536;var h,R=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function U(W,ce){if(!(this instanceof U))return new U(W,ce);var De=this;(function F(W){for(var ce=0,De=R.length;ce<De;ce++)W[R[ce]]=""})(De),De.q=De.c="",De.bufferCheckPosition=C.MAX_BUFFER_LENGTH,De.opt=ce||{},De.opt.lowercase=De.opt.lowercase||De.opt.lowercasetags,De.looseCase=De.opt.lowercase?"toLowerCase":"toUpperCase",De.tags=[],De.closed=De.closedRoot=De.sawRoot=!1,De.tag=De.error=null,De.strict=!!W,De.noscript=!(!W&&!De.opt.noscript),De.state=V.BEGIN,De.strictEntities=De.opt.strictEntities,De.ENTITIES=Object.create(De.strictEntities?C.XML_ENTITIES:C.ENTITIES),De.attribList=[],De.opt.xmlns&&(De.ns=Object.create(A)),De.trackPosition=!1!==De.opt.position,De.trackPosition&&(De.position=De.line=De.column=0),Q(De,"onready")}C.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(W){function ce(){}return ce.prototype=W,new ce}),Object.keys||(Object.keys=function(W){var ce=[];for(var De in W)W.hasOwnProperty(De)&&ce.push(De);return ce}),U.prototype={end:function(){Ie(this)},write:function ae(W){var ce=this;if(this.error)throw this.error;if(ce.closed)return _e(ce,"Cannot write after close. Assign an onready handler.");if(null===W)return Ie(ce);"object"==typeof W&&(W=W.toString());for(var De=0,le="";le=ye(W,De++),ce.c=le,le;)switch(ce.trackPosition&&(ce.position++,"\n"===le?(ce.line++,ce.column=0):ce.column++),ce.state){case V.BEGIN:if(ce.state=V.BEGIN_WHITESPACE,"\ufeff"===le)continue;Le(ce,le);continue;case V.BEGIN_WHITESPACE:Le(ce,le);continue;case V.TEXT:if(ce.sawRoot&&!ce.closedRoot){for(var ne=De-1;le&&"<"!==le&&"&"!==le;)(le=ye(W,De++))&&ce.trackPosition&&(ce.position++,"\n"===le?(ce.line++,ce.column=0):ce.column++);ce.textNode+=W.substring(ne,De-1)}"<"!==le||ce.sawRoot&&ce.closedRoot&&!ce.strict?(se(b,le)&&(!ce.sawRoot||ce.closedRoot)&&Te(ce,"Text data outside of root node."),"&"===le?ce.state=V.TEXT_ENTITY:ce.textNode+=le):(ce.state=V.OPEN_WAKA,ce.startTagPosition=ce.position);continue;case V.SCRIPT:"<"===le?ce.state=V.SCRIPT_ENDING:ce.script+=le;continue;case V.SCRIPT_ENDING:"/"===le?ce.state=V.CLOSE_TAG:(ce.script+="<"+le,ce.state=V.SCRIPT);continue;case V.OPEN_WAKA:"!"===le?(ce.state=V.SGML_DECL,ce.sgmlDecl=""):q(b,le)||(q(I,le)?(ce.state=V.OPEN_TAG,ce.tagName=le):"/"===le?(ce.state=V.CLOSE_TAG,ce.tagName=""):"?"===le?(ce.state=V.PROC_INST,ce.procInstName=ce.procInstBody=""):(Te(ce,"Unencoded <"),ce.startTagPosition+1<ce.position&&(le=new Array(ce.position-ce.startTagPosition).join(" ")+le),ce.textNode+="<"+le,ce.state=V.TEXT));continue;case V.SGML_DECL:"[CDATA["===(ce.sgmlDecl+le).toUpperCase()?(pe(ce,"onopencdata"),ce.state=V.CDATA,ce.sgmlDecl="",ce.cdata=""):ce.sgmlDecl+le==="--"?(ce.state=V.COMMENT,ce.comment="",ce.sgmlDecl=""):"DOCTYPE"===(ce.sgmlDecl+le).toUpperCase()?(ce.state=V.DOCTYPE,(ce.doctype||ce.sawRoot)&&Te(ce,"Inappropriately located doctype declaration"),ce.doctype="",ce.sgmlDecl=""):">"===le?(pe(ce,"onsgmldeclaration",ce.sgmlDecl),ce.sgmlDecl="",ce.state=V.TEXT):(q(B,le)&&(ce.state=V.SGML_DECL_QUOTED),ce.sgmlDecl+=le);continue;case V.SGML_DECL_QUOTED:le===ce.q&&(ce.state=V.SGML_DECL,ce.q=""),ce.sgmlDecl+=le;continue;case V.DOCTYPE:">"===le?(ce.state=V.TEXT,pe(ce,"ondoctype",ce.doctype),ce.doctype=!0):(ce.doctype+=le,"["===le?ce.state=V.DOCTYPE_DTD:q(B,le)&&(ce.state=V.DOCTYPE_QUOTED,ce.q=le));continue;case V.DOCTYPE_QUOTED:ce.doctype+=le,le===ce.q&&(ce.q="",ce.state=V.DOCTYPE);continue;case V.DOCTYPE_DTD:ce.doctype+=le,"]"===le?ce.state=V.DOCTYPE:q(B,le)&&(ce.state=V.DOCTYPE_DTD_QUOTED,ce.q=le);continue;case V.DOCTYPE_DTD_QUOTED:ce.doctype+=le,le===ce.q&&(ce.state=V.DOCTYPE_DTD,ce.q="");continue;case V.COMMENT:"-"===le?ce.state=V.COMMENT_ENDING:ce.comment+=le;continue;case V.COMMENT_ENDING:"-"===le?(ce.state=V.COMMENT_ENDED,ce.comment=xe(ce.opt,ce.comment),ce.comment&&pe(ce,"oncomment",ce.comment),ce.comment=""):(ce.comment+="-"+le,ce.state=V.COMMENT);continue;case V.COMMENT_ENDED:">"!==le?(Te(ce,"Malformed comment"),ce.comment+="--"+le,ce.state=V.COMMENT):ce.state=V.TEXT;continue;case V.CDATA:"]"===le?ce.state=V.CDATA_ENDING:ce.cdata+=le;continue;case V.CDATA_ENDING:"]"===le?ce.state=V.CDATA_ENDING_2:(ce.cdata+="]"+le,ce.state=V.CDATA);continue;case V.CDATA_ENDING_2:">"===le?(ce.cdata&&pe(ce,"oncdata",ce.cdata),pe(ce,"onclosecdata"),ce.cdata="",ce.state=V.TEXT):"]"===le?ce.cdata+="]":(ce.cdata+="]]"+le,ce.state=V.CDATA);continue;case V.PROC_INST:"?"===le?ce.state=V.PROC_INST_ENDING:q(b,le)?ce.state=V.PROC_INST_BODY:ce.procInstName+=le;continue;case V.PROC_INST_BODY:if(!ce.procInstBody&&q(b,le))continue;"?"===le?ce.state=V.PROC_INST_ENDING:ce.procInstBody+=le;continue;case V.PROC_INST_ENDING:">"===le?(pe(ce,"onprocessinginstruction",{name:ce.procInstName,body:ce.procInstBody}),ce.procInstName=ce.procInstBody="",ce.state=V.TEXT):(ce.procInstBody+="?"+le,ce.state=V.PROC_INST_BODY);continue;case V.OPEN_TAG:q(H,le)?ce.tagName+=le:(ke(ce),">"===le?je(ce):"/"===le?ce.state=V.OPEN_TAG_SLASH:(se(b,le)&&Te(ce,"Invalid character in tag name"),ce.state=V.ATTRIB));continue;case V.OPEN_TAG_SLASH:">"===le?(je(ce,!0),Pe(ce)):(Te(ce,"Forward-slash in opening tag not followed by >"),ce.state=V.ATTRIB);continue;case V.ATTRIB:if(q(b,le))continue;">"===le?je(ce):"/"===le?ce.state=V.OPEN_TAG_SLASH:q(I,le)?(ce.attribName=le,ce.attribValue="",ce.state=V.ATTRIB_NAME):Te(ce,"Invalid attribute name");continue;case V.ATTRIB_NAME:"="===le?ce.state=V.ATTRIB_VALUE:">"===le?(Te(ce,"Attribute without value"),ce.attribValue=ce.attribName,Fe(ce),je(ce)):q(b,le)?ce.state=V.ATTRIB_NAME_SAW_WHITE:q(H,le)?ce.attribName+=le:Te(ce,"Invalid attribute name");continue;case V.ATTRIB_NAME_SAW_WHITE:if("="===le)ce.state=V.ATTRIB_VALUE;else{if(q(b,le))continue;Te(ce,"Attribute without value"),ce.tag.attributes[ce.attribName]="",ce.attribValue="",pe(ce,"onattribute",{name:ce.attribName,value:""}),ce.attribName="",">"===le?je(ce):q(I,le)?(ce.attribName=le,ce.state=V.ATTRIB_NAME):(Te(ce,"Invalid attribute name"),ce.state=V.ATTRIB)}continue;case V.ATTRIB_VALUE:if(q(b,le))continue;q(B,le)?(ce.q=le,ce.state=V.ATTRIB_VALUE_QUOTED):(Te(ce,"Unquoted attribute value"),ce.state=V.ATTRIB_VALUE_UNQUOTED,ce.attribValue=le);continue;case V.ATTRIB_VALUE_QUOTED:if(le!==ce.q){"&"===le?ce.state=V.ATTRIB_VALUE_ENTITY_Q:ce.attribValue+=le;continue}Fe(ce),ce.q="",ce.state=V.ATTRIB_VALUE_CLOSED;continue;case V.ATTRIB_VALUE_CLOSED:q(b,le)?ce.state=V.ATTRIB:">"===le?je(ce):"/"===le?ce.state=V.OPEN_TAG_SLASH:q(I,le)?(Te(ce,"No whitespace between attributes"),ce.attribName=le,ce.attribValue="",ce.state=V.ATTRIB_NAME):Te(ce,"Invalid attribute name");continue;case V.ATTRIB_VALUE_UNQUOTED:if(se(O,le)){"&"===le?ce.state=V.ATTRIB_VALUE_ENTITY_U:ce.attribValue+=le;continue}Fe(ce),">"===le?je(ce):ce.state=V.ATTRIB;continue;case V.CLOSE_TAG:if(ce.tagName)">"===le?Pe(ce):q(H,le)?ce.tagName+=le:ce.script?(ce.script+="</"+ce.tagName,ce.tagName="",ce.state=V.SCRIPT):(se(b,le)&&Te(ce,"Invalid tagname in closing tag"),ce.state=V.CLOSE_TAG_SAW_WHITE);else{if(q(b,le))continue;se(I,le)?ce.script?(ce.script+="</"+le,ce.state=V.SCRIPT):Te(ce,"Invalid tagname in closing tag."):ce.tagName=le}continue;case V.CLOSE_TAG_SAW_WHITE:if(q(b,le))continue;">"===le?Pe(ce):Te(ce,"Invalid characters in closing tag");continue;case V.TEXT_ENTITY:case V.ATTRIB_VALUE_ENTITY_Q:case V.ATTRIB_VALUE_ENTITY_U:var te,X;switch(ce.state){case V.TEXT_ENTITY:te=V.TEXT,X="textNode";break;case V.ATTRIB_VALUE_ENTITY_Q:te=V.ATTRIB_VALUE_QUOTED,X="attribValue";break;case V.ATTRIB_VALUE_ENTITY_U:te=V.ATTRIB_VALUE_UNQUOTED,X="attribValue"}";"===le?(ce[X]+=He(ce),ce.entity="",ce.state=te):q(ce.entity.length?fe:ee,le)?ce.entity+=le:(Te(ce,"Invalid character in entity name"),ce[X]+="&"+ce.entity+le,ce.entity="",ce.state=te);continue;default:throw new Error(ce,"Unknown state: "+ce.state)}return ce.position>=ce.bufferCheckPosition&&function j(W){for(var ce=Math.max(C.MAX_BUFFER_LENGTH,10),De=0,le=0,ne=R.length;le<ne;le++){var z=W[R[le]].length;if(z>ce)switch(R[le]){case"textNode":me(W);break;case"cdata":pe(W,"oncdata",W.cdata),W.cdata="";break;case"script":pe(W,"onscript",W.script),W.script="";break;default:_e(W,"Max buffer length exceeded: "+R[le])}De=Math.max(De,z)}W.bufferCheckPosition=C.MAX_BUFFER_LENGTH-De+W.position}(ce),ce},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){!function D(W){me(W),""!==W.cdata&&(pe(W,"oncdata",W.cdata),W.cdata=""),""!==W.script&&(pe(W,"onscript",W.script),W.script="")}(this)}};try{h=i("./node_modules/stream-browserify/index.js").Stream}catch(W){h=function(){}}var u=C.EVENTS.filter(function(W){return"error"!==W&&"end"!==W});function _(W,ce){if(!(this instanceof _))return new _(W,ce);h.apply(this),this._parser=new U(W,ce),this.writable=!0,this.readable=!0;var De=this;this._parser.onend=function(){De.emit("end")},this._parser.onerror=function(le){De.emit("error",le),De._parser.error=null},this._decoder=null,u.forEach(function(le){Object.defineProperty(De,"on"+le,{get:function(){return De._parser["on"+le]},set:function(ne){if(!ne)return De.removeAllListeners(le),De._parser["on"+le]=ne,ne;De.on(le,ne)},enumerable:!0,configurable:!1})})}(_.prototype=Object.create(h.prototype,{constructor:{value:_}})).write=function(W){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(W)){if(!this._decoder){var ce=i("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new ce("utf8")}W=this._decoder.write(W)}return this._parser.write(W.toString()),this.emit("data",W),!0},_.prototype.end=function(W){return W&&W.length&&this.write(W),this._parser.end(),!0},_.prototype.on=function(W,ce){var De=this;return!De._parser["on"+W]&&-1!==u.indexOf(W)&&(De._parser["on"+W]=function(){var le=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);le.splice(0,0,W),De.emit.apply(De,le)}),h.prototype.on.call(De,W,ce)};var b="\r\n\t ",k="0124356789",L="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="'\"",O=b+">",S="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",A={xml:S,xmlns:E};b=ue(b),k=ue(k),L=ue(L);var I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,H=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,ee=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,fe=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function ue(W){return W.split("").reduce(function(ce,De){return ce[De]=!0,ce},{})}function q(W,ce){return function be(W){return"[object RegExp]"===Object.prototype.toString.call(W)}(W)?!!ce.match(W):W[ce]}function se(W,ce){return!q(W,ce)}B=ue(B),O=ue(O);var W,ce,De,V=0;for(var de in C.STATE={BEGIN:V++,BEGIN_WHITESPACE:V++,TEXT:V++,TEXT_ENTITY:V++,OPEN_WAKA:V++,SGML_DECL:V++,SGML_DECL_QUOTED:V++,DOCTYPE:V++,DOCTYPE_QUOTED:V++,DOCTYPE_DTD:V++,DOCTYPE_DTD_QUOTED:V++,COMMENT_STARTING:V++,COMMENT:V++,COMMENT_ENDING:V++,COMMENT_ENDED:V++,CDATA:V++,CDATA_ENDING:V++,CDATA_ENDING_2:V++,PROC_INST:V++,PROC_INST_BODY:V++,PROC_INST_ENDING:V++,OPEN_TAG:V++,OPEN_TAG_SLASH:V++,ATTRIB:V++,ATTRIB_NAME:V++,ATTRIB_NAME_SAW_WHITE:V++,ATTRIB_VALUE:V++,ATTRIB_VALUE_QUOTED:V++,ATTRIB_VALUE_CLOSED:V++,ATTRIB_VALUE_UNQUOTED:V++,ATTRIB_VALUE_ENTITY_Q:V++,ATTRIB_VALUE_ENTITY_U:V++,CLOSE_TAG:V++,CLOSE_TAG_SAW_WHITE:V++,SCRIPT:V++,SCRIPT_ENDING:V++},C.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},C.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(C.ENTITIES).forEach(function(W){var ce=C.ENTITIES[W],De="number"==typeof ce?String.fromCharCode(ce):ce;C.ENTITIES[W]=De}),C.STATE)C.STATE[C.STATE[de]]=de;function Q(W,ce,De){W[ce]&&W[ce](De)}function pe(W,ce,De){W.textNode&&me(W),Q(W,ce,De)}function me(W){W.textNode=xe(W.opt,W.textNode),W.textNode&&Q(W,"ontext",W.textNode),W.textNode=""}function xe(W,ce){return W.trim&&(ce=ce.trim()),W.normalize&&(ce=ce.replace(/\s+/g," ")),ce}function _e(W,ce){return me(W),W.trackPosition&&(ce+="\nLine: "+W.line+"\nColumn: "+W.column+"\nChar: "+W.c),ce=new Error(ce),W.error=ce,Q(W,"onerror",ce),W}function Ie(W){return W.sawRoot&&!W.closedRoot&&Te(W,"Unclosed root tag"),W.state!==V.BEGIN&&W.state!==V.BEGIN_WHITESPACE&&W.state!==V.TEXT&&_e(W,"Unexpected end"),me(W),W.c="",W.closed=!0,Q(W,"onend"),U.call(W,W.strict,W.opt),W}function Te(W,ce){if("object"!=typeof W||!(W instanceof U))throw new Error("bad call to strictFail");W.strict&&_e(W,ce)}function ke(W){W.strict||(W.tagName=W.tagName[W.looseCase]());var ce=W.tags[W.tags.length-1]||W,De=W.tag={name:W.tagName,attributes:{}};W.opt.xmlns&&(De.ns=ce.ns),W.attribList.length=0,pe(W,"onopentagstart",De)}function Ue(W,ce){var le=W.indexOf(":")<0?["",W]:W.split(":"),ne=le[0],z=le[1];return ce&&"xmlns"===W&&(ne="xmlns",z=""),{prefix:ne,local:z}}function Fe(W){if(W.strict||(W.attribName=W.attribName[W.looseCase]()),-1!==W.attribList.indexOf(W.attribName)||W.tag.attributes.hasOwnProperty(W.attribName))W.attribName=W.attribValue="";else{if(W.opt.xmlns){var ce=Ue(W.attribName,!0),le=ce.local;if("xmlns"===ce.prefix)if("xml"===le&&W.attribValue!==S)Te(W,"xml: prefix must be bound to "+S+"\nActual: "+W.attribValue);else if("xmlns"===le&&W.attribValue!==E)Te(W,"xmlns: prefix must be bound to "+E+"\nActual: "+W.attribValue);else{var ne=W.tag,z=W.tags[W.tags.length-1]||W;ne.ns===z.ns&&(ne.ns=Object.create(z.ns)),ne.ns[le]=W.attribValue}W.attribList.push([W.attribName,W.attribValue])}else W.tag.attributes[W.attribName]=W.attribValue,pe(W,"onattribute",{name:W.attribName,value:W.attribValue});W.attribName=W.attribValue=""}}function je(W,ce){if(W.opt.xmlns){var De=W.tag,le=Ue(W.tagName);De.prefix=le.prefix,De.local=le.local,De.uri=De.ns[le.prefix]||"",De.prefix&&!De.uri&&(Te(W,"Unbound namespace prefix: "+JSON.stringify(W.tagName)),De.uri=le.prefix),De.ns&&(W.tags[W.tags.length-1]||W).ns!==De.ns&&Object.keys(De.ns).forEach(function(et){pe(W,"onopennamespace",{prefix:et,uri:De.ns[et]})});for(var z=0,te=W.attribList.length;z<te;z++){var X=W.attribList[z],$=X[0],K=X[1],oe=Ue($,!0),Ce=oe.prefix,Ze=""===Ce?"":De.ns[Ce]||"",st={name:$,value:K,prefix:Ce,local:oe.local,uri:Ze};Ce&&"xmlns"!==Ce&&!Ze&&(Te(W,"Unbound namespace prefix: "+JSON.stringify(Ce)),st.uri=Ce),W.tag.attributes[$]=st,pe(W,"onattribute",st)}W.attribList.length=0}W.tag.isSelfClosing=!!ce,W.sawRoot=!0,W.tags.push(W.tag),pe(W,"onopentag",W.tag),ce||(W.state=W.noscript||"script"!==W.tagName.toLowerCase()?V.TEXT:V.SCRIPT,W.tag=null,W.tagName=""),W.attribName=W.attribValue="",W.attribList.length=0}function Pe(W){if(!W.tagName)return Te(W,"Weird empty close tag."),W.textNode+="</>",void(W.state=V.TEXT);if(W.script){if("script"!==W.tagName)return W.script+="</"+W.tagName+">",W.tagName="",void(W.state=V.SCRIPT);pe(W,"onscript",W.script),W.script=""}var ce=W.tags.length,De=W.tagName;W.strict||(De=De[W.looseCase]());for(var le=De;ce--&&W.tags[ce].name!==le;)Te(W,"Unexpected close tag");if(ce<0)return Te(W,"Unmatched closing tag: "+W.tagName),W.textNode+="</"+W.tagName+">",void(W.state=V.TEXT);W.tagName=De;for(var z=W.tags.length;z-- >ce;){var te=W.tag=W.tags.pop();W.tagName=W.tag.name,pe(W,"onclosetag",W.tagName);var X={};for(var $ in te.ns)X[$]=te.ns[$];W.opt.xmlns&&te.ns!==(W.tags[W.tags.length-1]||W).ns&&Object.keys(te.ns).forEach(function(oe){pe(W,"onclosenamespace",{prefix:oe,uri:te.ns[oe]})})}0===ce&&(W.closedRoot=!0),W.tagName=W.attribValue=W.attribName="",W.attribList.length=0,W.state=V.TEXT}function He(W){var le,ce=W.entity,De=ce.toLowerCase(),ne="";return W.ENTITIES[ce]?W.ENTITIES[ce]:W.ENTITIES[De]?W.ENTITIES[De]:("#"===(ce=De).charAt(0)&&("x"===ce.charAt(1)?(ce=ce.slice(2),ne=(le=parseInt(ce,16)).toString(16)):(ce=ce.slice(1),ne=(le=parseInt(ce,10)).toString(10))),ce=ce.replace(/^0+/,""),ne.toLowerCase()!==ce?(Te(W,"Invalid character entity"),"&"+W.entity+";"):String.fromCodePoint(le))}function Le(W,ce){"<"===ce?(W.state=V.OPEN_WAKA,W.startTagPosition=W.position):se(b,ce)&&(Te(W,"Non-whitespace before first tag."),W.textNode=ce,W.state=V.TEXT)}function ye(W,ce){var De="";return ce<W.length&&(De=W.charAt(ce)),De}V=C.STATE,String.fromCodePoint||(W=String.fromCharCode,ce=Math.floor,De=function(){var le=16384,ne=[],X=-1,$=arguments.length;if(!$)return"";for(var K="";++X<$;){var oe=Number(arguments[X]);if(!isFinite(oe)||oe<0||oe>1114111||ce(oe)!==oe)throw RangeError("Invalid code point: "+oe);oe<=65535?ne.push(oe):ne.push(55296+((oe-=65536)>>10),oe%1024+56320),(X+1===$||ne.length>le)&&(K+=W.apply(null,ne),ne.length=0)}return K},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:De,configurable:!0,writable:!0}):String.fromCodePoint=De)}(w)}).call(this,i("./node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(Ge,w,i){(function(e,C){!function(R,U){"use strict";if(!R.setImmediate){var u,j=1,F={},D=!1,h=R.document,E=Object.getPrototypeOf&&Object.getPrototypeOf(R);E=E&&E.setTimeout?E:R,"[object process]"==={}.toString.call(R.process)?function L(){u=function(A){C.nextTick(function(){k(A)})}}():function B(){if(R.postMessage&&!R.importScripts){var A=!0,I=R.onmessage;return R.onmessage=function(){A=!1},R.postMessage("","*"),R.onmessage=I,A}}()?function O(){var A="setImmediate$"+Math.random()+"$",I=function(H){H.source===R&&"string"==typeof H.data&&0===H.data.indexOf(A)&&k(+H.data.slice(A.length))};R.addEventListener?R.addEventListener("message",I,!1):R.attachEvent("onmessage",I),u=function(H){R.postMessage(A+H,"*")}}():R.MessageChannel?function P(){var A=new MessageChannel;A.port1.onmessage=function(I){k(I.data)},u=function(I){A.port2.postMessage(I)}}():h&&"onreadystatechange"in h.createElement("script")?function y(){var A=h.documentElement;u=function(I){var H=h.createElement("script");H.onreadystatechange=function(){k(I),H.onreadystatechange=null,A.removeChild(H),H=null},A.appendChild(H)}}():function S(){u=function(A){setTimeout(k,0,A)}}(),E.setImmediate=function p(A){"function"!=typeof A&&(A=new Function(""+A));for(var I=new Array(arguments.length-1),H=0;H<I.length;H++)I[H]=arguments[H+1];return F[j]={callback:A,args:I},u(j),j++},E.clearImmediate=_}function _(A){delete F[A]}function k(A){if(D)setTimeout(k,0,A);else{var I=F[A];if(I){D=!0;try{!function b(A){var I=A.callback,H=A.args;switch(H.length){case 0:I();break;case 1:I(H[0]);break;case 2:I(H[0],H[1]);break;case 3:I(H[0],H[1],H[2]);break;default:I.apply(void 0,H)}}(I)}finally{_(A),D=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i("./node_modules/webpack/buildin/global.js"),i("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(Ge,w,i){Ge.exports=R;var e=i("./node_modules/events/events.js").EventEmitter;function R(){e.call(this)}i("./node_modules/inherits/inherits_browser.js")(R,e),R.Readable=i("./node_modules/readable-stream/readable-browser.js"),R.Writable=i("./node_modules/readable-stream/writable-browser.js"),R.Duplex=i("./node_modules/readable-stream/duplex-browser.js"),R.Transform=i("./node_modules/readable-stream/transform.js"),R.PassThrough=i("./node_modules/readable-stream/passthrough.js"),R.Stream=R,R.prototype.pipe=function(U,j){var F=this;function D(L){U.writable&&!1===U.write(L)&&F.pause&&F.pause()}function h(){F.readable&&F.resume&&F.resume()}F.on("data",D),U.on("drain",h),!U._isStdio&&(!j||!1!==j.end)&&(F.on("end",p),F.on("close",_));var u=!1;function p(){u||(u=!0,U.end())}function _(){u||(u=!0,"function"==typeof U.destroy&&U.destroy())}function b(L){if(k(),0===e.listenerCount(this,"error"))throw L}function k(){F.removeListener("data",D),U.removeListener("drain",h),F.removeListener("end",p),F.removeListener("close",_),F.removeListener("error",b),U.removeListener("error",b),F.removeListener("end",k),F.removeListener("close",k),U.removeListener("close",k)}return F.on("error",b),U.on("error",b),F.on("end",k),F.on("close",k),U.on("close",k),U.emit("pipe",F),U}},"./node_modules/string_decoder/lib/string_decoder.js":function(Ge,w,i){"use strict";var e=i("./node_modules/safe-buffer/index.js").Buffer,C=e.isEncoding||function(y){switch((y=""+y)&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function j(y){var S;switch(this.encoding=function U(y){var S=function R(y){if(!y)return"utf8";for(var S;;)switch(y){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return y;default:if(S)return;y=(""+y).toLowerCase(),S=!0}}(y);if("string"!=typeof S&&(e.isEncoding===C||!C(y)))throw new Error("Unknown encoding: "+y);return S||y}(y),this.encoding){case"utf16le":this.text=b,this.end=k,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=L,this.end=B,S=3;break;default:return this.write=O,void(this.end=P)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}function F(y){return y<=127?0:y>>5==6?2:y>>4==14?3:y>>3==30?4:y>>6==2?-1:-2}function u(y){var S=this.lastTotal-this.lastNeed,E=function h(y,S,E){if(128!=(192&S[0]))return y.lastNeed=0,"\ufffd";if(y.lastNeed>1&&S.length>1){if(128!=(192&S[1]))return y.lastNeed=1,"\ufffd";if(y.lastNeed>2&&S.length>2&&128!=(192&S[2]))return y.lastNeed=2,"\ufffd"}}(this,y);return void 0!==E?E:this.lastNeed<=y.length?(y.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(y.copy(this.lastChar,S,0,y.length),void(this.lastNeed-=y.length))}function b(y,S){if((y.length-S)%2==0){var E=y.toString("utf16le",S);if(E){var A=E.charCodeAt(E.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",S,y.length-1)}function k(y){var S=y&&y.length?this.write(y):"";return this.lastNeed?S+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):S}function L(y,S){var E=(y.length-S)%3;return 0===E?y.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,1===E?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",S,y.length-E))}function B(y){var S=y&&y.length?this.write(y):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function O(y){return y.toString(this.encoding)}function P(y){return y&&y.length?this.write(y):""}w.StringDecoder=j,j.prototype.write=function(y){if(0===y.length)return"";var S,E;if(this.lastNeed){if(void 0===(S=this.fillLast(y)))return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<y.length?S?S+this.text(y,E):this.text(y,E):S||""},j.prototype.end=function _(y){var S=y&&y.length?this.write(y):"";return this.lastNeed?S+"\ufffd":S},j.prototype.text=function p(y,S){var E=function D(y,S,E){var A=S.length-1;if(A<E)return 0;var I=F(S[A]);return I>=0?(I>0&&(y.lastNeed=I-1),I):--A<E||-2===I?0:(I=F(S[A]))>=0?(I>0&&(y.lastNeed=I-2),I):--A<E||-2===I?0:(I=F(S[A]))>=0?(I>0&&(2===I?I=0:y.lastNeed=I-3),I):0}(this,y,S);if(!this.lastNeed)return y.toString("utf8",S);this.lastTotal=E;var A=y.length-(E-this.lastNeed);return y.copy(this.lastChar,0,A),y.toString("utf8",S,A)},j.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length}},"./node_modules/timers-browserify/main.js":function(Ge,w,i){(function(e){var C=void 0!==e&&e||"undefined"!=typeof self&&self||window,R=Function.prototype.apply;function U(j,F){this._id=j,this._clearFn=F}w.setTimeout=function(){return new U(R.call(setTimeout,C,arguments),clearTimeout)},w.setInterval=function(){return new U(R.call(setInterval,C,arguments),clearInterval)},w.clearTimeout=w.clearInterval=function(j){j&&j.close()},U.prototype.unref=U.prototype.ref=function(){},U.prototype.close=function(){this._clearFn.call(C,this._id)},w.enroll=function(j,F){clearTimeout(j._idleTimeoutId),j._idleTimeout=F},w.unenroll=function(j){clearTimeout(j._idleTimeoutId),j._idleTimeout=-1},w._unrefActive=w.active=function(j){clearTimeout(j._idleTimeoutId);var F=j._idleTimeout;F>=0&&(j._idleTimeoutId=setTimeout(function(){j._onTimeout&&j._onTimeout()},F))},i("./node_modules/setimmediate/setImmediate.js"),w.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,w.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/ua-parser-js/src/ua-parser.js":function(Ge,w,i){var e;!function(C,R){"use strict";var D="function",h="undefined",u="object",p="string",b="model",k="name",L="type",B="vendor",O="version",P="architecture",y="console",S="mobile",E="tablet",A="smarttv",I="wearable",H="embedded",fe="Amazon",ue="Apple",q="BlackBerry",se="Browser",V="Chrome",Q="Firefox",pe="Google",_e="Microsoft",Ie="Motorola",Te="Opera",ke="Samsung",Fe="Sony",je="Xiaomi",Pe="Zebra",He="Facebook",ye=function(Ce){for(var Oe={},Ze=0;Ze<Ce.length;Ze++)Oe[Ce[Ze].toUpperCase()]=Ce[Ze];return Oe},ae=function(Ce,Oe){return typeof Ce===p&&-1!==W(Oe).indexOf(W(Ce))},W=function(Ce){return Ce.toLowerCase()},De=function(Ce,Oe){if(typeof Ce===p)return Ce=Ce.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof Oe===h?Ce:Ce.substring(0,350)},le=function(Ce,Oe){for(var st,et,ct,xt,tt,Et,Ze=0;Ze<Oe.length&&!tt;){var Kt=Oe[Ze],_t=Oe[Ze+1];for(st=et=0;st<Kt.length&&!tt;)if(tt=Kt[st++].exec(Ce))for(ct=0;ct<_t.length;ct++)Et=tt[++et],typeof(xt=_t[ct])===u&&xt.length>0?2===xt.length?this[xt[0]]=typeof xt[1]==D?xt[1].call(this,Et):xt[1]:3===xt.length?this[xt[0]]=typeof xt[1]!==D||xt[1].exec&&xt[1].test?Et?Et.replace(xt[1],xt[2]):R:Et?xt[1].call(this,Et,xt[2]):R:4===xt.length&&(this[xt[0]]=Et?xt[3].call(this,Et.replace(xt[1],xt[2])):R):this[xt]=Et||R;Ze+=2}},ne=function(Ce,Oe){for(var Ze in Oe)if(typeof Oe[Ze]===u&&Oe[Ze].length>0){for(var st=0;st<Oe[Ze].length;st++)if(ae(Oe[Ze][st],Ce))return"?"===Ze?R:Ze}else if(ae(Oe[Ze],Ce))return"?"===Ze?R:Ze;return Ce},te={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[k,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[k,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[k,O],[/opios[\/ ]+([\w\.]+)/i],[O,[k,Te+" Mini"]],[/\bopr\/([\w\.]+)/i],[O,[k,Te]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[k,O],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[k,"UC"+se]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[O,[k,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[O,[k,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[k,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[k,"IE"]],[/yabrowser\/([\w\.]+)/i],[O,[k,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[k,/(.+)/,"$1 Secure "+se],O],[/\bfocus\/([\w\.]+)/i],[O,[k,Q+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[k,Te+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[k,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[k,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[k,Te+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[k,"MIUI "+se]],[/fxios\/([-\w\.]+)/i],[O,[k,Q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[k,"360 "+se]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[k,/(.+)/,"$1 "+se],O],[/(comodo_dragon)\/([\w\.]+)/i],[[k,/_/g," "],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[k,O],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[k],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[k,He],O],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[k,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[k,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[k,V+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[k,V+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[k,"Android "+se]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[k,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[k,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,k],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[k,[O,ne,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[k,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[k,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[k,Q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[k,O]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,W]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[b,[B,ke],[L,E]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[b,[B,ke],[L,S]],[/\((ip(?:hone|od)[\w ]*);/i],[b,[B,ue],[L,S]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[b,[B,ue],[L,E]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[b,[B,"Huawei"],[L,E]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[b,[B,"Huawei"],[L,S]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[b,/_/g," "],[B,je],[L,S]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[b,/_/g," "],[B,je],[L,E]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[b,[B,"OPPO"],[L,S]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[b,[B,"Vivo"],[L,S]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[b,[B,"Realme"],[L,S]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[b,[B,Ie],[L,S]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[b,[B,Ie],[L,E]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[b,[B,"LG"],[L,E]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[b,[B,"LG"],[L,S]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[b,[B,"Lenovo"],[L,E]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[b,/_/g," "],[B,"Nokia"],[L,S]],[/(pixel c)\b/i],[b,[B,pe],[L,E]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[b,[B,pe],[L,S]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[b,[B,Fe],[L,S]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[b,"Xperia Tablet"],[B,Fe],[L,E]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[b,[B,"OnePlus"],[L,S]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[b,[B,fe],[L,E]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[b,/(.+)/g,"Fire Phone $1"],[B,fe],[L,S]],[/(playbook);[-\w\),; ]+(rim)/i],[b,B,[L,E]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[b,[B,q],[L,S]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[b,[B,"ASUS"],[L,E]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[b,[B,"ASUS"],[L,S]],[/(nexus 9)/i],[b,[B,"HTC"],[L,E]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[B,[b,/_/g," "],[L,S]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[b,[B,"Acer"],[L,E]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[b,[B,"Meizu"],[L,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[b,[B,"Sharp"],[L,S]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[B,b,[L,S]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[B,b,[L,E]],[/(surface duo)/i],[b,[B,_e],[L,E]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[b,[B,"Fairphone"],[L,S]],[/(u304aa)/i],[b,[B,"AT&T"],[L,S]],[/\bsie-(\w*)/i],[b,[B,"Siemens"],[L,S]],[/\b(rct\w+) b/i],[b,[B,"RCA"],[L,E]],[/\b(venue[\d ]{2,7}) b/i],[b,[B,"Dell"],[L,E]],[/\b(q(?:mv|ta)\w+) b/i],[b,[B,"Verizon"],[L,E]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[b,[B,"Barnes & Noble"],[L,E]],[/\b(tm\d{3}\w+) b/i],[b,[B,"NuVision"],[L,E]],[/\b(k88) b/i],[b,[B,"ZTE"],[L,E]],[/\b(nx\d{3}j) b/i],[b,[B,"ZTE"],[L,S]],[/\b(gen\d{3}) b.+49h/i],[b,[B,"Swiss"],[L,S]],[/\b(zur\d{3}) b/i],[b,[B,"Swiss"],[L,E]],[/\b((zeki)?tb.*\b) b/i],[b,[B,"Zeki"],[L,E]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[B,"Dragon Touch"],b,[L,E]],[/\b(ns-?\w{0,9}) b/i],[b,[B,"Insignia"],[L,E]],[/\b((nxa|next)-?\w{0,9}) b/i],[b,[B,"NextBook"],[L,E]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[B,"Voice"],b,[L,S]],[/\b(lvtel\-)?(v1[12]) b/i],[[B,"LvTel"],b,[L,S]],[/\b(ph-1) /i],[b,[B,"Essential"],[L,S]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[b,[B,"Envizen"],[L,E]],[/\b(trio[-\w\. ]+) b/i],[b,[B,"MachSpeed"],[L,E]],[/\btu_(1491) b/i],[b,[B,"Rotor"],[L,E]],[/(shield[\w ]+) b/i],[b,[B,"Nvidia"],[L,E]],[/(sprint) (\w+)/i],[B,b,[L,S]],[/(kin\.[onetw]{3})/i],[[b,/\./g," "],[B,_e],[L,S]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[b,[B,Pe],[L,E]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[b,[B,Pe],[L,S]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[B,b,[L,y]],[/droid.+; (shield) bui/i],[b,[B,"Nvidia"],[L,y]],[/(playstation [345portablevi]+)/i],[b,[B,Fe],[L,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[b,[B,_e],[L,y]],[/smart-tv.+(samsung)/i],[B,[L,A]],[/hbbtv.+maple;(\d+)/i],[[b,/^/,"SmartTV"],[B,ke],[L,A]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[B,"LG"],[L,A]],[/(apple) ?tv/i],[B,[b,ue+" TV"],[L,A]],[/crkey/i],[[b,V+"cast"],[B,pe],[L,A]],[/droid.+aft(\w)( bui|\))/i],[b,[B,fe],[L,A]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[b,[B,"Sharp"],[L,A]],[/(bravia[\w ]+)( bui|\))/i],[b,[B,Fe],[L,A]],[/(mitv-\w{5}) bui/i],[b,[B,je],[L,A]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[B,De],[b,De],[L,A]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[L,A]],[/((pebble))app/i],[B,b,[L,I]],[/droid.+; (glass) \d/i],[b,[B,pe],[L,I]],[/droid.+; (wt63?0{2,3})\)/i],[b,[B,Pe],[L,I]],[/(quest( 2)?)/i],[b,[B,He],[L,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[B,[L,H]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[b,[L,S]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[b,[L,E]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[L,E]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[L,S]],[/(android[-\w\. ]{0,9});.+buil/i],[b,[B,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[k,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[k,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[k,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,k]],os:[[/microsoft (windows) (vista|xp)/i],[k,O],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[k,[O,ne,te]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[k,"Windows"],[O,ne,te]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[k,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[k,"Mac OS"],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,k],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[k,O],[/\(bb(10);/i],[O,[k,q]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[k,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[k,Q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[k,"webOS"]],[/crkey\/([\d\.]+)/i],[O,[k,V+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[k,"Chromium OS"],O],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[k,O],[/(sunos) ?([\w\.\d]*)/i],[[k,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[k,O]]},$=function(Ce,Oe){if(typeof Ce===u&&(Oe=Ce,Ce=R),!(this instanceof $))return new $(Ce,Oe).getResult();var Ze=Ce||(typeof C!==h&&C.navigator&&C.navigator.userAgent?C.navigator.userAgent:""),st=Oe?function(Ce,Oe){var Ze={};for(var st in Ce)Ze[st]=Oe[st]&&Oe[st].length%2==0?Oe[st].concat(Ce[st]):Ce[st];return Ze}(X,Oe):X;return this.getBrowser=function(){var et={};return et[k]=R,et[O]=R,le.call(et,Ze,st.browser),et.major=function(Ce){return typeof Ce===p?Ce.replace(/[^\d\.]/g,"").split(".")[0]:R}(et.version),et},this.getCPU=function(){var et={};return et[P]=R,le.call(et,Ze,st.cpu),et},this.getDevice=function(){var et={};return et[B]=R,et[b]=R,et[L]=R,le.call(et,Ze,st.device),et},this.getEngine=function(){var et={};return et[k]=R,et[O]=R,le.call(et,Ze,st.engine),et},this.getOS=function(){var et={};return et[k]=R,et[O]=R,le.call(et,Ze,st.os),et},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Ze},this.setUA=function(et){return Ze=typeof et===p&&et.length>350?De(et,350):et,this},this.setUA(Ze),this};$.VERSION="1.0.32",$.BROWSER=ye([k,O,"major"]),$.CPU=ye([P]),$.DEVICE=ye([b,B,L,y,S,A,E,I,H]),$.ENGINE=$.OS=ye([k,O]),typeof w!==h?(typeof Ge!==h&&Ge.exports&&(w=Ge.exports=$),w.UAParser=$):i("./node_modules/webpack/buildin/amd-options.js")?(e=function(){return $}.call(w,i,w,Ge))!==R&&(Ge.exports=e):typeof C!==h&&(C.UAParser=$);var K=typeof C!==h&&(C.jQuery||C.Zepto);if(K&&!K.ua){var oe=new $;K.ua=oe.getResult(),K.ua.get=function(){return oe.getUA()},K.ua.set=function(Ce){oe.setUA(Ce);var Oe=oe.getResult();for(var Ze in Oe)K.ua[Ze]=Oe[Ze]}}}("object"==typeof window?window:this)},"./node_modules/util-deprecate/browser.js":function(Ge,w,i){(function(e){function R(U){try{if(!e.localStorage)return!1}catch(F){return!1}var j=e.localStorage[U];return null!=j&&"true"===String(j).toLowerCase()}Ge.exports=function C(U,j){if(R("noDeprecation"))return U;var F=!1;return function D(){if(!F){if(R("throwDeprecation"))throw new Error(j);R("traceDeprecation")?console.trace(j):console.warn(j),F=!0}return U.apply(this,arguments)}}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/amd-options.js":function(Ge,w){(function(i){Ge.exports=i}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(Ge,w){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}Ge.exports=i},"./src/core/Debug.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js"),j=1,F=2,D=3,h=4,u=5;function p(b){b=b||{};var P,y,S,E,k=this.context,L=Object(e.default)(k).getInstance(),B=b.settings,O=[];function I(Q){return Q&&Q.bind?Q.bind(window.console):window.console.log.bind(window.console)}function ue(){for(var Q=arguments.length,pe=new Array(Q),me=0;me<Q;me++)pe[me]=arguments[me];de.apply(void 0,[j,this].concat(pe))}function be(){for(var Q=arguments.length,pe=new Array(Q),me=0;me<Q;me++)pe[me]=arguments[me];de.apply(void 0,[F,this].concat(pe))}function q(){for(var Q=arguments.length,pe=new Array(Q),me=0;me<Q;me++)pe[me]=arguments[me];de.apply(void 0,[D,this].concat(pe))}function se(){for(var Q=arguments.length,pe=new Array(Q),me=0;me<Q;me++)pe[me]=arguments[me];de.apply(void 0,[h,this].concat(pe))}function V(){for(var Q=arguments.length,pe=new Array(Q),me=0;me<Q;me++)pe[me]=arguments[me];de.apply(void 0,[u,this].concat(pe))}function de(Q,pe){var me="",xe=null;y&&(xe=(new Date).getTime(),me+="["+(xe-E)+"]"),S&&pe&&pe.getClassName&&(me+="["+pe.getClassName()+"]",pe.getType&&(me+="["+pe.getType()+"]")),me.length>0&&(me+=" ");for(var _e=arguments.length,Ie=new Array(_e>2?_e-2:0),Te=2;Te<_e;Te++)Ie[Te-2]=arguments[Te];Array.apply(null,Ie).forEach(function(ke){me+=ke+" "}),O[Q]&&B.get().debug.logLevel>=Q&&O[Q](me),B&&B.get().debug.dispatchEvent&&L.trigger(C.default.LOG,{message:me,level:Q})}return P={getLogger:function H(Q){return{fatal:ue.bind(Q),error:be.bind(Q),warn:q.bind(Q),info:se.bind(Q),debug:V.bind(Q)}},setLogTimestampVisible:function ee(Q){y=Q},setCalleeNameVisible:function fe(Q){S=Q}},function A(){y=!0,S=!0,E=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(O[j]=I(window.console.error),O[F]=I(window.console.error),O[D]=I(window.console.warn),O[h]=I(window.console.info),O[u]=I(window.console.debug))}(),P}p.__dashjs_factory_name="Debug";var _=R.default.getSingletonFactory(p);_.LOG_LEVEL_NONE=0,_.LOG_LEVEL_FATAL=j,_.LOG_LEVEL_ERROR=F,_.LOG_LEVEL_WARNING=D,_.LOG_LEVEL_INFO=h,_.LOG_LEVEL_DEBUG=u,R.default.updateSingletonFactory(p.__dashjs_factory_name,_),w.default=_},"./src/core/EventBus.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/MediaPlayerEvents.js");function j(){var D={};function _(L,B,O){var P=-1;return D[L]&&D[L].some(function(y,S){if(y&&y.callback===B&&(!O||O===y.scope))return P=S,!0}),P}return{on:function h(L,B,O){var P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!L)throw new Error("event type cannot be null or undefined");if(!B||"function"!=typeof B)throw new Error("listener must be a function: "+B);var y=P.priority||0;if(!(_(L,B,O)>=0)){D[L]=D[L]||[];var S={callback:B,scope:O,priority:y};O&&O.getStreamId&&(S.streamId=O.getStreamId()),O&&O.getType&&(S.mediaType=O.getType()),P&&P.mode&&(S.mode=P.mode),D[L].some(function(A,I){if(A&&y>A.priority)return D[L].splice(I,0,S),!0})||D[L].push(S)}},off:function u(L,B,O){if(L&&B&&D[L]){var P=_(L,B,O);P<0||(D[L][P]=null)}},trigger:function p(L){var B=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(L&&D[L]){if((B=B||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");B.type=L,O.streamId&&(B.streamId=O.streamId),O.mediaType&&(B.mediaType=O.mediaType),D[L].filter(function(P){return!(!P||O.streamId&&P.streamId&&P.streamId!==O.streamId||O.mediaType&&P.mediaType&&P.mediaType!==O.mediaType||O.mode&&P.mode&&P.mode!==O.mode||!P.mode&&O.mode&&O.mode===C.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(P){return P&&P.callback.call(P.scope,B)})}},reset:function b(){D={}}}}j.__dashjs_factory_name="EventBus";var F=e.default.getSingletonFactory(j);F.EVENT_PRIORITY_LOW=0,F.EVENT_PRIORITY_HIGH=5e3,e.default.updateSingletonFactory(j.__dashjs_factory_name,F),w.default=F},"./src/core/FactoryMaker.js":function(Ge,w,i){"use strict";i.r(w);var e=function(){var C,R=[],U={},j={};function D(S,E){for(var A in R){var I=R[A];if(I.context===S&&I.name===E)return I.instance}return null}function p(S,E){return E[S]}function _(S,E,A){S in A&&(A[S]=E)}function y(S,E,A){var I,H=S.__dashjs_factory_name,ee=E[H];if(ee){var fe=ee.instance;if(!ee.override)return fe.apply({context:E,factory:C},A);for(var ue in I=S.apply({context:E},A),fe=fe.apply({context:E,factory:C,parent:I},A))I.hasOwnProperty(ue)&&(I[ue]=fe[ue])}else I=S.apply({context:E},A);return I.getClassName=function(){return H},I}return C={extend:function F(S,E,A,I){!I[S]&&E&&(I[S]={instance:E,override:A})},getSingletonInstance:D,setSingletonInstance:function h(S,E,A){for(var I in R){var H=R[I];if(H.context===S&&H.name===E)return void(R[I].instance=A)}R.push({name:E,context:S,instance:A})},deleteSingletonInstances:function u(S){R=R.filter(function(E){return E.context!==S})},getSingletonFactory:function P(S){var E=p(S.__dashjs_factory_name,U);return E||(E=function(I){var H;return void 0===I&&(I={}),{getInstance:function(){return H||(H=D(I,S.__dashjs_factory_name)),H||(H=y(S,I,arguments),R.push({name:S.__dashjs_factory_name,context:I,instance:H})),H}}},U[S.__dashjs_factory_name]=E),E},getSingletonFactoryByName:function O(S){return p(S,U)},updateSingletonFactory:function B(S,E){_(S,E,U)},getClassFactory:function L(S){var E=p(S.__dashjs_factory_name,j);return E||(E=function(I){return void 0===I&&(I={}),{create:function(){return y(S,I,arguments)}}},j[S.__dashjs_factory_name]=E),E},getClassFactoryByName:function k(S){return p(S,j)},updateClassFactory:function b(S,E){_(S,E,j)}}}();w.default=e},"./src/core/Settings.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Utils.js"),R=i("./src/core/Debug.js"),U=i("./src/streaming/constants/Constants.js"),j=i("./src/streaming/vo/metrics/HTTPRequest.js"),F=i("./src/core/EventBus.js"),D=i("./src/core/events/Events.js");function h(L){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(B){return typeof B}:function(B){return B&&"function"==typeof Symbol&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B})(L)}function u(L,B,O){return(B=function p(L){var B=function _(L,B){if("object"!==h(L)||null===L)return L;var O=L[Symbol.toPrimitive];if(void 0!==O){var P=O.call(L,B||"default");if("object"!==h(P))return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===B?String:Number)(L)}(L,"string");return"symbol"===h(B)?B:String(B)}(B))in L?Object.defineProperty(L,B,{value:O,enumerable:!0,configurable:!0,writable:!0}):L[B]=O,L}function b(){var L,B,P=this.context,y=Object(F.default)(P).getInstance(),S={"streaming.delay.liveDelay":D.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":D.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":D.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":D.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":D.default.SETTING_UPDATED_PLAYBACK_RATE_MAX},E={debug:{logLevel:R.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:U.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:U.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:U.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:U.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,manifestRequestTimeout:1e4,retryIntervals:(L={},u(L,j.HTTPRequest.MPD_TYPE,500),u(L,j.HTTPRequest.XLINK_EXPANSION_TYPE,500),u(L,j.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),u(L,j.HTTPRequest.INIT_SEGMENT_TYPE,1e3),u(L,j.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),u(L,j.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),u(L,j.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),u(L,j.HTTPRequest.LICENSE,1e3),u(L,j.HTTPRequest.OTHER_TYPE,1e3),u(L,"lowLatencyReductionFactor",10),L),retryAttempts:(B={},u(B,j.HTTPRequest.MPD_TYPE,3),u(B,j.HTTPRequest.XLINK_EXPANSION_TYPE,1),u(B,j.HTTPRequest.MEDIA_SEGMENT_TYPE,3),u(B,j.HTTPRequest.INIT_SEGMENT_TYPE,3),u(B,j.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),u(B,j.HTTPRequest.INDEX_SEGMENT_TYPE,3),u(B,j.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),u(B,j.HTTPRequest.LICENSE,3),u(B,j.HTTPRequest.OTHER_TYPE,3),u(B,"lowLatencyMultiplyFactor",5),B),abr:{movingAverageMethod:U.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:U.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:U.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:U.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},A=C.default.clone(E);function I(ue,be,q){for(var se in ue)ue.hasOwnProperty(se)&&(be.hasOwnProperty(se)?"object"!==h(ue[se])||ue[se]instanceof Array||null===ue[se]?(be[se]=C.default.clone(ue[se]),S[q+se]&&y.trigger(S[q+se])):I(ue[se],be[se],q.slice()+se+"."):console.error("Settings parameter "+q+se+" is not supported"))}return{get:function H(){return A},update:function ee(ue){"object"===h(ue)&&I(ue,A,"")},reset:function fe(){A=C.default.clone(E)}}}b.__dashjs_factory_name="Settings";var k=e.default.getSingletonFactory(b);w.default=k},"./src/core/Utils.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./node_modules/path-browserify/index.js"),C=i.n(e),R=i("./node_modules/ua-parser-js/src/ua-parser.js");function j(b){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(b)}function D(b,k){for(var L=0;L<k.length;L++){var B=k[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(b,u(B.key),B)}}function u(b){var k=function p(b,k){if("object"!==j(b)||null===b)return b;var L=b[Symbol.toPrimitive];if(void 0!==L){var B=L.call(b,k||"default");if("object"!==j(B))return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(b)}(b,"string");return"symbol"===j(k)?k:String(k)}var _=function(){function b(){!function F(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")}(this,b)}return function h(b,k,L){return k&&D(b.prototype,k),L&&D(b,L),Object.defineProperty(b,"prototype",{writable:!1}),b}(b,null,[{key:"mixin",value:function(L,B,O){var P,y={};if(L)for(var S in B)B.hasOwnProperty(S)&&(P=B[S],(!(S in L)||L[S]!==P&&(!(S in y)||y[S]!==P))&&(L[S]="object"===j(L[S])&&null!==L[S]?b.mixin(L[S],P,O):O(P)));return L}},{key:"clone",value:function(L){if(!L||"object"!==j(L))return L;var B;if(L instanceof Array){B=[];for(var O=0,P=L.length;O<P;++O)O in L&&B.push(b.clone(L[O]))}else B={};return b.mixin(B,L,b.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(L,B){try{if(!B||0===B.length)return L;var O=new URL(L);return B.forEach(function(P){P.key&&P.value&&O.searchParams.set(P.key,P.value)}),O.href}catch(P){return L}}},{key:"parseHttpHeaders",value:function(L){var B={};if(!L)return B;for(var O=L.trim().split("\r\n"),P=0,y=O.length;P<y;P++){var S=O[P],E=S.indexOf(": ");E>0&&(B[S.substring(0,E)]=S.substring(E+2))}return B}},{key:"generateUuid",value:function(){var L=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(O){var P=(L+16*Math.random())%16|0;return L=Math.floor(L/16),("x"==O?P:3&P|8).toString(16)})}},{key:"generateHashCode",value:function(L){var B=0;if(0===L.length)return B;for(var O=0;O<L.length;O++)B=(B<<5)-B+L.charCodeAt(O),B|=0;return B}},{key:"getRelativeUrl",value:function(L,B){try{var O=new URL(L),P=new URL(B);if(O.protocol=P.protocol,O.origin!==P.origin)return B;var y=C.a.relative(O.pathname.substr(0,O.pathname.lastIndexOf("/")),P.pathname.substr(0,P.pathname.lastIndexOf("/"))),S=0===y.length?1:0;return y+=P.pathname.substr(P.pathname.lastIndexOf("/")+S,P.pathname.length-1),P.pathname.length<y.length?P.pathname:y}catch(E){return B}}},{key:"parseUserAgent",value:function(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var B=null===L&&"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";return Object(R.UAParser)(B)}catch(O){return{}}}}]),b}();w.default=_},"./src/core/Version.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"getVersionString",function(){return C});function C(){return"4.5.2"}},"./src/core/errors/Errors.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var O=new(function(P){h(S,P);var y=p(S);function S(){var E;return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(E=y.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,E.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,E.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,E.SEGMENT_BASE_LOADER_ERROR_CODE=15,E.TIME_SYNC_FAILED_ERROR_CODE=16,E.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,E.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,E.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,E.APPEND_ERROR_CODE=20,E.REMOVE_ERROR_CODE=21,E.DATA_UPDATE_FAILED_ERROR_CODE=22,E.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,E.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,E.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,E.DOWNLOAD_ERROR_ID_SIDX_CODE=26,E.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,E.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,E.DOWNLOAD_ERROR_ID_XLINK_CODE=29,E.MANIFEST_ERROR_ID_PARSE_CODE=31,E.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,E.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,E.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,E.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,E.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",E.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",E.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",E.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",E.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",E.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",E.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",E.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",E.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",E.APPEND_ERROR_MESSAGE="chunk is not defined",E.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",E.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",E.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",E.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",E.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",E.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",E}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/errors/ErrorsBase.js").default));w.default=O},"./src/core/errors/ErrorsBase.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(){!function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}(this,h)}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"extend",value:function(p,_){if(p){var b=!!_&&_.override,k=!!_&&_.publicOnly;for(var L in p)!p.hasOwnProperty(L)||this[L]&&!b||k&&-1===p[L].indexOf("public_")||(this[L]=p[L])}}}]),h}()},"./src/core/events/CoreEvents.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/events/EventsBase.js");function C(O){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(O)}function R(O,P){for(var y=0;y<P.length;y++){var S=P[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,j(S.key),S)}}function j(O){var P=function F(O,P){if("object"!==C(O)||null===O)return O;var y=O[Symbol.toPrimitive];if(void 0!==y){var S=y.call(O,P||"default");if("object"!==C(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(O)}(O,"string");return"symbol"===C(P)?P:String(P)}function h(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),P&&u(O,P)}function u(O,P){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,E){return S.__proto__=E,S})(O,P)}function p(O){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}();return function(){var E,S=L(O);if(P){var A=L(this).constructor;E=Reflect.construct(S,arguments,A)}else E=S.apply(this,arguments);return _(this,E)}}function _(O,P){if(P&&("object"===C(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function b(O){if(void 0===O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}(O)}function L(O){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(O)}w.default=function(O){h(y,O);var P=p(y);function y(){var S;return function D(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}(this,y),(S=P.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",S.BUFFERING_COMPLETED="bufferingCompleted",S.BUFFER_CLEARED="bufferCleared",S.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",S.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",S.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",S.CURRENT_TRACK_CHANGED="currentTrackChanged",S.DATA_UPDATE_COMPLETED="dataUpdateCompleted",S.INBAND_EVENTS="inbandEvents",S.INITIAL_STREAM_SWITCH="initialStreamSwitch",S.INIT_FRAGMENT_LOADED="initFragmentLoaded",S.INIT_FRAGMENT_NEEDED="initFragmentNeeded",S.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",S.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",S.LOADING_COMPLETED="loadingCompleted",S.LOADING_PROGRESS="loadingProgress",S.LOADING_DATA_PROGRESS="loadingDataProgress",S.LOADING_ABANDONED="loadingAborted",S.MANIFEST_UPDATED="manifestUpdated",S.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",S.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",S.QUOTA_EXCEEDED="quotaExceeded",S.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",S.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",S.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",S.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",S.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",S.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",S.SOURCE_BUFFER_ERROR="sourceBufferError",S.STREAMS_COMPOSED="streamsComposed",S.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",S.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",S.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",S.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",S.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",S.URL_RESOLUTION_FAILED="urlResolutionFailed",S.VIDEO_CHUNK_RECEIVED="videoChunkReceived",S.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",S.XLINK_ELEMENT_LOADED="xlinkElementLoaded",S.XLINK_READY="xlinkReady",S.SEEK_TARGET="seekTarget",S.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",S.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",S.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",S.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",S.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",S}return function U(O,P,y){return P&&R(O.prototype,P),y&&R(O,y),Object.defineProperty(O,"prototype",{writable:!1}),O}(y)}(e.default)},"./src/core/events/Events.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var B=function(P){h(S,P);var y=p(S);function S(){return D(this,S),y.apply(this,arguments)}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/events/CoreEvents.js").default),O=new B;w.default=O},"./src/core/events/EventsBase.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(){!function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}(this,h)}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"extend",value:function(p,_){if(p){var b=!!_&&_.override,k=!!_&&_.publicOnly;for(var L in p)!p.hasOwnProperty(L)||this[L]&&!b||k&&-1===p[L].indexOf("public_")||(this[L]=p[L])}}}]),h}()},"./src/dash/DashAdapter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/constants/DashConstants.js"),C=i("./src/dash/vo/RepresentationInfo.js"),R=i("./src/dash/vo/MediaInfo.js"),U=i("./src/dash/vo/StreamInfo.js"),j=i("./src/dash/vo/ManifestInfo.js"),F=i("./src/dash/vo/Event.js"),D=i("./src/core/FactoryMaker.js"),h=i("./src/dash/models/DashManifestModel.js"),u=i("./src/dash/models/PatchManifestModel.js"),p=i("./node_modules/bcp-47-normalize/index.js"),_=i.n(p);function b(){var k,L,B,O,P,y,S,E=this.context;function ue(it){return L.getRolesForAdaptation(it).filter(function(Qe){return Qe.value===e.default.MAIN})[0]}function be(it,Qe,mt){var Ft=L.getAdaptationsForType(O[0].mpd.manifest,it,Qe);if(!Ft||0===Ft.length)return null;if(Ft.length>1&&mt){var tn=V(mt,Qe);if(P[mt.id]&&P[mt.id][Qe])for(var Wt=0,vt=Ft.length;Wt<vt;Wt++)if(q(P[mt.id][Qe],tn[Wt]))return Ft[Wt];for(var pt=0,rt=Ft.length;pt<rt;pt++)if(ue(Ft[pt]))return Ft[pt]}return Ft[0]}function q(it,Qe){if(!it||!Qe)return!1;var mt=it.id===Qe.id,Ft=it.codec===Qe.codec,tn=it.viewpoint===Qe.viewpoint,Wt=it.lang===Qe.lang,vt=it.roles.toString()===Qe.roles.toString(),pt=it.accessibility.toString()===Qe.accessibility.toString(),rt=it.audioChannelConfiguration.toString()===Qe.audioChannelConfiguration.toString();return mt&&Ft&&tn&&Wt&&vt&&pt&&rt}function se(it,Qe,mt,Ft,tn,Wt){var rt,Xe,yt,Zt,Jt,vt=[];if(!Ft||0===Ft.length)return[];var on=L.getAdaptationsForPeriod(Qe);for(yt=0,Jt=Ft.length;yt<Jt;yt++)if(rt=At(on[Xe=L.getIndexForAdaptation(Ft[yt],it,mt.index)]),Wt){var pn=rt.accessibility.length;for(Zt=0;Zt<pn;Zt++)if(rt){var Mn=rt.accessibility[Zt];if(0===Mn.indexOf("cea-608:")){var Qn=Mn.substring(8).split(";");if("CC"===Qn[0].substring(0,2))for(Zt=0;Zt<Qn.length;Zt++)rt||(rt=At.call(this,on[Xe])),Pt(rt,Qn[Zt].substring(0,3),Qn[Zt].substring(4)),vt.push(rt),rt=null;else for(Zt=0;Zt<Qn.length;Zt++)rt||(rt=At.call(this,on[Xe])),Pt(rt,"CC"+(Zt+1),Qn[Zt]),vt.push(rt),rt=null}else 0===Mn.indexOf("cea-608")&&(Pt(rt,y.CC1,"eng"),vt.push(rt),rt=null)}}else tn===y.IMAGE?(Yt(rt),vt.push(rt),rt=null):rt&&vt.push(rt);return vt}function V(it,Qe,mt){var Ft=O,tn=mt,Wt=[];if(tn)an(),Ft=ae(tn);else{if(!(O.length>0))return Wt;tn=O[0].mpd.manifest}var vt=_t(it,Ft),pt=L.getAdaptationsForType(tn,it?it.index:null,Qe);return Wt=se(tn,vt,it,pt,Qe),Qe===y.TEXT&&(pt=L.getAdaptationsForType(tn,it?it.index:null,y.VIDEO),Wt=Wt.concat(se(tn,vt,it,pt,Qe,!0))),Wt}function ae(it){var Qe=W(it);return L.getRegularPeriods(Qe)}function W(it){var Qe=Et(it);return L.getMpd(Qe)}function ct(){O=[],P={}}function Et(it){return it||(O.length>0?O[0].mpd.manifest:null)}function Kt(it){try{var Qe=_t(it.streamInfo,O),mt=L.getAdaptationsForPeriod(Qe);return it&&it.streamInfo&&void 0!==it.streamInfo.id&&mt?mt[it.index]:null}catch(Ft){return null}}function _t(it,Qe){for(var mt=Qe.length,Ft=0;Ft<mt;Ft++){var tn=Qe[Ft];if(it&&it.id===tn.id)return tn}return null}function At(it){if(!it)return null;var Ft,Qe=new R.default,mt=it.period.mpd.manifest.Period_asArray[it.period.index].AdaptationSet_asArray[it.index];if(Qe.id=it.id,Qe.index=it.index,Qe.type=it.type,Qe.streamInfo=jt(it.period),Qe.representationCount=L.getRepresentationCount(mt),Qe.labels=L.getLabelsForAdaptation(mt),Qe.lang=L.getLanguageForAdaptation(mt),Ft=L.getViewpointForAdaptation(mt),Qe.viewpoint=Ft?Ft.value:void 0,Qe.accessibility=L.getAccessibilityForAdaptation(mt).map(function(vt){var pt=vt.value,rt=pt;return vt.schemeIdUri&&vt.schemeIdUri.search("cea-608")>=0&&void 0!==S&&(rt=pt?"cea-608:"+pt:"cea-608",Qe.embeddedCaptions=!0),rt}),Qe.audioChannelConfiguration=L.getAudioChannelConfigurationForAdaptation(mt).map(function(vt){return vt.value}),0===Qe.audioChannelConfiguration.length&&Array.isArray(mt.Representation_asArray)&&mt.Representation_asArray.length>0&&(Qe.audioChannelConfiguration=L.getAudioChannelConfigurationForRepresentation(mt.Representation_asArray[0]).map(function(vt){return vt.value})),Qe.roles=L.getRolesForAdaptation(mt).map(function(vt){return vt.value}),Qe.codec=L.getCodec(mt),Qe.mimeType=L.getMimeType(mt),Qe.contentProtection=L.getContentProtectionData(mt),Qe.bitrateList=L.getBitrateListForAdaptation(mt),Qe.selectionPriority=L.getSelectionPriority(mt),Qe.contentProtection){var tn=Qe.contentProtection.map(function(vt){return L.getKID(vt)}).filter(function(vt){return null!==vt});if(tn.length){var Wt=tn[0];Qe.contentProtection.forEach(function(vt){vt.keyId=Wt})}}return Qe.isText=L.getIsText(mt),Qe.supplementalProperties=L.getSupplementalProperties(mt),Qe.isFragmented=L.getIsFragmented(mt),Qe.isEmbedded=!1,Qe}function Pt(it,Qe,mt){it.id=Qe,it.index=100+parseInt(Qe.substring(2,3)),it.type=y.TEXT,it.codec="cea-608-in-SEI",it.isEmbedded=!0,it.isFragmented=!1,it.lang=_()(mt),it.roles=["caption"]}function Yt(it){it.type=y.IMAGE}function jt(it){var Qe=new U.default;return Qe.id=it.id,Qe.index=it.index,Qe.start=it.start,Qe.duration=it.duration,Qe.manifestInfo=function en(it){var Qe=new j.default;return Qe.dvrWindowSize=it.timeShiftBufferDepth,Qe.loadedTime=it.manifest.loadedTime,Qe.availableFrom=it.availabilityStartTime,Qe.minBufferTime=it.manifest.minBufferTime,Qe.maxFragmentDuration=it.maxSegmentDuration,Qe.duration=L.getDuration(it.manifest),Qe.isDynamic=L.getIsDynamic(it.manifest),Qe.serviceDescriptions=L.getServiceDescriptions(it.manifest),Qe.protocol=it.manifest.protocol,Qe}(it.mpd),Qe.isLast=1===it.mpd.manifest.Period_asArray.length||Math.abs(Qe.start+Qe.duration-Qe.manifestInfo.duration)<1,Qe}function an(){if(!y)throw new Error("setConfig function has to be called previously")}function Ln(it){return O.length>0?O[0].mpd.manifest.Period_asArray[it]:null}function Vn(it,Qe,mt){var tn,Wt,vt,pt,rt;if(it)for(tn=it.AdaptationSet_asArray,pt=0;pt<tn.length;pt+=1)for(vt=tn[pt].Representation_asArray,rt=0;rt<vt.length;rt+=1)if(Qe===(Wt=vt[rt]).id)return mt?rt:Wt;return null}return k={getBandwidthForRepresentation:function Ce(it,Qe){var mt;return(mt=Vn(Ln(Qe),it))?mt.bandwidth:null},getIndexForRepresentation:function Oe(it,Qe){return function wn(it,Qe){var mt=Vn(it,Qe,!0);return null!==mt?mt:-1}(Ln(Qe),it)},getMaxIndexForBufferType:function Ze(it,Qe){return function Hn(it,Qe){var mt,Ft,tn,Wt;if(!it||!Qe)return-1;for(Ft=it.AdaptationSet_asArray,Wt=0;Wt<Ft.length;Wt+=1)if(tn=(mt=Ft[Wt]).Representation_asArray,L.getIsTypeOf(mt,Qe))return tn.length;return-1}(Ln(Qe),it)},convertRepresentationToRepresentationInfo:function ee(it){if(it){var Qe=new C.default,Ft=L.getRepresentationFor(it.index,it.adaptation.period.mpd.manifest.Period_asArray[it.adaptation.period.index].AdaptationSet_asArray[it.adaptation.index]);return Qe.id=it.id,Qe.quality=it.index,Qe.bandwidth=L.getBandwidth(Ft),Qe.fragmentDuration=it.segmentDuration||(it.segments&&it.segments.length>0?it.segments[0].duration:NaN),Qe.MSETimeOffset=it.MSETimeOffset,Qe.mediaInfo=At(it.adaptation),Qe}return null},getStreamsInfo:function Q(it,Qe){var mt=[],Ft=O;if(it&&(an(),Ft=ae(it)),Ft.length>0){(!Qe||Qe>Ft.length)&&(Qe=Ft.length);for(var tn=0;tn<Qe;tn++)mt.push(jt(Ft[tn]))}return mt},getMediaInfoForType:function fe(it,Qe){if(0===O.length||!it)return null;var mt=_t(it,O);if(!mt)return null;var Ft=L.getAdaptationsForPeriod(mt),tn=be(it.index,Qe,it);return tn?At(Ft[L.getIndexForAdaptation(tn,O[0].mpd.manifest,it.index)]):null},getAllMediaInfoForType:V,getAdaptationForType:be,getRealAdaptation:function pe(it,Qe){var mt,Ft,tn=_t(it,O);return mt=Qe?Qe.id:null,O.length>0&&tn&&(Ft=mt?L.getAdaptationForId(mt,O[0].mpd.manifest,tn.index):L.getAdaptationForIndex(Qe?Qe.index:null,O[0].mpd.manifest,tn.index)),Ft},getProducerReferenceTimes:function me(it,Qe){var mt,Ft,tn=_t(it,O);return mt=Qe?Qe.id:null,O.length>0&&tn&&(Ft=mt?L.getAdaptationForId(mt,O[0].mpd.manifest,tn.index):L.getAdaptationForIndex(Qe?Qe.index:null,O[0].mpd.manifest,tn.index)),Ft?L.getProducerReferenceTimesForAdaptation(Ft):[]},getRealPeriodByIndex:function _e(it){return L.getRealPeriodForIndex(it,O[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function xe(it){try{return L.getEssentialPropertiesForRepresentation(it)}catch(Qe){return[]}},getVoRepresentations:function Ie(it){var mt=Kt(it);return L.getRepresentationsForAdaptation(mt)},getEventsFor:function ke(it,Qe,mt){var Ft=[];if(O.length>0){var tn=O[0].mpd.manifest;if(it instanceof U.default){var Wt=_t(it,O);Ft=L.getEventsForPeriod(Wt)}else if(it instanceof R.default){var vt=_t(mt,O);Ft=L.getEventStreamForAdaptationSet(tn,Kt(it),vt)}else if(it instanceof C.default){var pt=_t(mt,O);Ft=L.getEventStreamForRepresentation(tn,Qe,pt)}}return Ft},getEvent:function Te(it,Qe,mt,Ft){try{if(!it||!Qe||isNaN(mt)||!Ft)return null;var tn=it.scheme_id_uri,Wt=it.value;if(!Qe[tn+"/"+Wt])return null;var Jt,vt=new F.default,pt=it.timescale||1,rt=Ft.adaptation.period.start,Xe=Qe[tn+"/"+Wt],yt=isNaN(Ft.presentationTimeOffset)?isNaN(Xe.presentationTimeOffset)?0:Xe.presentationTimeOffset:Ft.presentationTimeOffset,Zt=it.presentation_time_delta/pt;Jt=0===it.version?rt+mt-yt+Zt:rt-yt+Zt;var on=it.event_duration/pt,pn=it.id,Mn=it.message_data;return vt.eventStream=Xe,vt.eventStream.value=Wt,vt.eventStream.timescale=pt,vt.duration=on,vt.id=pn,vt.calculatedPresentationTime=Jt,vt.messageData=Mn,vt.presentationTimeDelta=Zt,vt}catch(Wn){return null}},getMpd:W,setConfig:function H(it){!it||(it.constants&&(y=it.constants),it.cea608parser&&(S=it.cea608parser),it.errHandler&&L.setConfig({errHandler:it.errHandler}),it.BASE64&&L.setConfig({BASE64:it.BASE64}))},updatePeriods:function de(it){if(!it)return null;an(),O=ae(it)},getIsTextTrack:function Fe(it){return L.getIsText(it)},getUTCTimingSources:function je(){var it=Et();return L.getUTCTimingSources(it)},getSuggestedPresentationDelay:function Pe(){return L.getSuggestedPresentationDelay(O.length>0?O[0].mpd:null)},getAvailabilityStartTime:function He(it){var Qe=W(it);return L.getAvailabilityStartTime(Qe)},getIsTypeOf:function et(it,Qe){return L.getIsTypeOf(it,Qe)},getIsDynamic:function Le(it){var Qe=Et(it);return L.getIsDynamic(Qe)},getDuration:function ye(it){var Qe=Et(it);return L.getDuration(Qe)},getRegularPeriods:ae,getContentSteering:function ce(it){return L.getContentSteering(it)},getLocation:function De(it){return L.getLocation(it)},getPatchLocation:function z(it){var Qe=L.getPatchLocation(it),mt=L.getPublishTime(it);if(!Qe||!mt)return null;if(Qe.hasOwnProperty("ttl")&&mt){var Ft=1e3*parseFloat(Qe.ttl);if(mt.getTime()+Ft<=(new Date).getTime())return null}return Qe.__text},getManifestUpdatePeriod:function le(it){return L.getManifestUpdatePeriod(it,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)},getPublishTime:function ne(it){return L.getPublishTime(it)},getIsDVB:function te(it){return L.hasProfile(it,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function X(it){return B.getIsPatch(it)},getBaseURLsFromElement:function $(it){return L.getBaseURLsFromElement(it)},getRepresentationSortFunction:function K(){return L.getRepresentationSortFunction()},getCodec:function oe(it,Qe,mt){return L.getCodec(it,Qe,mt)},getPeriodById:function st(it){if(!it||0===O.length)return null;var Qe=O.filter(function(mt){return mt.id===it});return Qe&&Qe.length>0?Qe[0]:null},setCurrentMediaInfo:function Ue(it,Qe,mt){P[it]=P[it]||{},P[it][Qe]=P[it][Qe]||{},P[it][Qe]=mt},isPatchValid:function xt(it,Qe){var mt=L.getId(it),Ft=B.getMpdId(Qe),tn=L.getPublishTime(it),Wt=B.getPublishTime(Qe),vt=B.getOriginalPublishTime(Qe);return!!(mt&&Ft&&mt==Ft&&tn&&vt&&tn.getTime()==vt.getTime()&&Wt&&tn.getTime()<Wt.getTime())},applyPatchToManifest:function tt(it,Qe){B.getPatchOperations(Qe).forEach(function(mt){var Ft=mt.getMpdTarget(it);if(null!==Ft){var tn=Ft.name,Wt=Ft.target,vt=Ft.leaf;if(mt.xpath.findsAttribute()){switch(mt.action){case"add":case"replace":Wt[tn]=mt.value;break;case"remove":delete Wt[tn]}return}var pt=(Wt[tn+"_asArray"]||[]).indexOf(vt),rt="prepend"===mt.position||"before"===mt.position;if(("remove"===mt.action||"replace"===mt.action)&&(delete Wt[tn],-1!=pt)){var Xe=Wt[tn+"_asArray"];Xe.splice(pt,1),Xe.length>1?Wt[tn]=Xe:1==Xe.length?Wt[tn]=Xe[0]:delete Wt[tn+"_asArray"]}("add"===mt.action||"replace"===mt.action)&&Object.keys(mt.value).forEach(function(yt){var Zt=mt.value[yt],Jt=Wt[yt+"_asArray"]||[];0===Jt.length&&Wt[yt]&&Jt.push(Wt[yt]),0===Jt.length?Jt=Zt:Jt.splice.apply(Jt,[yt==tn&&-1!=pt?pt+(rt?0:1)+("replace"==mt.action?-1:0):rt?0:Jt.length,0].concat(Zt)),Wt[yt+"_asArray"]=Jt,Wt[yt]=1==Jt.length?Jt[0]:Jt})}})},areMediaInfosEqual:q,reset:ct},function I(){L=Object(h.default)(E).getInstance(),B=Object(u.default)(E).getInstance(),ct()}(),k}b.__dashjs_factory_name="DashAdapter",w.default=D.default.getSingletonFactory(b)},"./src/dash/DashHandler.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/FragmentRequest.js"),C=i("./src/streaming/vo/metrics/HTTPRequest.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/MediaPlayerEvents.js"),j=i("./src/dash/utils/SegmentsUtils.js"),F=i("./src/dash/constants/DashConstants.js");function u(p){var S,E,A,I,H,_=(p=p||{}).eventBus,b=p.debug,k=p.urlUtils,L=p.type,B=p.streamInfo,O=p.segmentsController,P=p.timelineConverter,y=p.baseURLController;function be(){return L}function se(){A=null}function de(je,Pe,He){var ye,ae,Le=y.resolve(He.path);return Le&&Pe!==Le.url&&k.isRelative(Pe)?(ye=Le.url,ae=Le.serviceLocation,Pe&&(ye=k.resolve(Pe,ye))):ye=Pe,!k.isRelative(ye)&&(je.url=ye,je.serviceLocation=ae,!0)}function me(je,Pe){if(null==Pe)return null;var He=new e.default,Le=Pe.representation,ye=Le.adaptation.period.mpd.manifest.Period_asArray[Le.adaptation.period.index].AdaptationSet_asArray[Le.adaptation.index].Representation_asArray[Le.index].bandwidth,ae=Pe.media;return ae=Object(j.replaceTokenForTemplate)(ae,"Number",Pe.replacementNumber),ae=Object(j.replaceTokenForTemplate)(ae,"Time",Pe.replacementTime),ae=Object(j.replaceTokenForTemplate)(ae,"Bandwidth",ye),ae=Object(j.replaceIDForTemplate)(ae,Le.id),ae=Object(j.unescapeDollarsInTemplate)(ae),He.mediaType=be(),He.type=C.HTTPRequest.MEDIA_SEGMENT_TYPE,He.range=Pe.mediaRange,He.startTime=Pe.presentationStartTime,He.mediaStartTime=Pe.mediaStartTime,He.duration=Pe.duration,He.timescale=Le.timescale,He.availabilityStartTime=Pe.availabilityStartTime,He.availabilityEndTime=Pe.availabilityEndTime,He.availabilityTimeComplete=Le.availabilityTimeComplete,He.wallStartTime=Pe.wallStartTime,He.quality=Le.index,He.index=Pe.index,He.mediaInfo=je,He.adaptationIndex=Le.adaptation.index,He.representationId=Le.id,de(He,ae,Le)?He:void 0}function _e(je,Pe,He){var Le=null;if(!Pe||!Pe.segmentInfoType)return Le;var ye=O.getSegmentByTime(Pe,He);return ye&&(A=ye,E.debug("Index for time "+He+" is "+ye.index),Le=me(je,ye)),Le}function Fe(){E.debug("Dynamic stream complete"),H=!0}return S={initialize:function fe(je){I=je,H=!1,O.initialize(je)},getStreamId:function ue(){return B.id},getType:be,getStreamInfo:function q(){return B},getInitRequest:function Q(je,Pe){return Pe?function pe(je,Pe,He){var Le=new e.default,ye=Pe.adaptation.period,ae=ye.start;if(Le.mediaType=He,Le.type=C.HTTPRequest.INIT_SEGMENT_TYPE,Le.range=Pe.range,Le.availabilityStartTime=P.calcAvailabilityStartTimeFromPresentationTime(ae,Pe,I),Le.availabilityEndTime=P.calcAvailabilityEndTimeFromPresentationTime(ae+ye.duration,Pe,I),Le.quality=Pe.index,Le.mediaInfo=je,Le.representationId=Pe.id,de(Le,Pe.initialization,Pe))return Le.url=Object(j.replaceTokenForTemplate)(Le.url,"Bandwidth",Pe.bandwidth),Le}(je,Pe,be()):null},getSegmentRequestForTime:_e,getCurrentIndex:function Ue(){return A?A.index:-1},getNextSegmentRequest:function Te(je,Pe){var He=null;if(!Pe||!Pe.segmentInfoType)return null;var Le=A?A.index+1:0,ye=O.getSegmentByIndex(Pe,Le,A?A.mediaStartTime:-1);if(ye)He=me(je,ye),A=ye;else{if(I&&!H)return E.debug(be()+" No segment found at index: "+Le+". Wait for next loop"),null;H=!0}return He},isLastSegmentRequested:function xe(je,Pe){if(!je||!A)return!1;if(H)return!0;if(!isFinite(je.adaptation.period.duration)||A.presentationStartTime+A.duration>Pe)return!1;if(je.mediaFinishedInformation&&!isNaN(je.mediaFinishedInformation.numberOfSegments)&&!isNaN(A.index)&&A.index>=je.mediaFinishedInformation.numberOfSegments-1){if(!I||je.segmentInfoType===F.default.SEGMENT_TEMPLATE)return!0;if(I&&je.segmentInfoType===F.default.SEGMENT_LIST&&je.adaptation.period.nextPeriodId)return!0}return!!(I&&je.adaptation.period.nextPeriodId&&je.segmentInfoType===F.default.SEGMENT_TIMELINE&&je.mediaFinishedInformation&&!isNaN(je.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&A&&!isNaN(A.mediaStartTime)&&!isNaN(A.duration)&&A.mediaStartTime+A.duration>=je.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function V(){se(),_.off(U.default.DYNAMIC_TO_STATIC,Fe,S)},getNextSegmentRequestIdempotent:function Ie(je,Pe){var ye=O.getSegmentByIndex(Pe,A?A.index+1:0,A?A.mediaStartTime:-1);return ye?me(je,ye):null},getValidTimeAheadOfTargetTime:function ke(je,Pe,He,Le){try{if(isNaN(je)||!Pe||!He)return NaN;if(je<0&&(je=0),isNaN(Le)&&(Le=.5),_e(Pe,He,je))return je;if(He.adaptation.period.start+He.adaptation.period.duration<je)return NaN;for(var ye=isFinite(He.adaptation.period.duration)?He.adaptation.period.start+He.adaptation.period.duration:je+30,ae=Math.min(je+Le,ye),W=NaN,ce=null;ae<=ye;){var De=null;if(ae<=ye&&(De=_e(Pe,He,ae)),De){W=ae,ce=De;break}ae+=Le}if(ce){var le=ce.startTime+ce.duration;return je>ce.startTime&&le-je>Le?je:!isNaN(ce.startTime)&&je<ce.startTime&&W>ce.startTime?ce.startTime+.001:Math.min(le-Le,W)}return W}catch(ne){return NaN}}},function ee(){E=b.getLogger(S),se(),_.on(U.default.DYNAMIC_TO_STATIC,Fe,S)}(),S}u.__dashjs_factory_name="DashHandler",w.default=R.default.getClassFactory(u)},"./src/dash/DashMetrics.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/vo/metrics/HTTPRequest.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/constants/MetricsConstants.js"),j=i("./src/dash/utils/Round10.js"),F=i("./src/streaming/models/MetricsModel.js"),D=i("./src/core/Utils.js"),h=i("./src/streaming/vo/metrics/PlayList.js");function u(p){var b,k,L,B,_=this.context,O=(p=p||{}).metricsModel;function ue(De){var le=O.getMetricsFor(De,!0);if(!le)return null;var te,ne=le.HttpList,z=null;if(!ne||ne.length<=0)return null;for(te=ne.length-1;te>=0;){if(ne[te].responsecode){z=ne[te];break}te--}return z}function be(De){var le=O.getMetricsFor(De,!0);return le&&le.HttpList?le.HttpList:[]}function se(De,le){if(!De)return null;var ne=De[le];return ne&&0!==ne.length?ne[ne.length-1]:null}return b={getCurrentRepresentationSwitch:function S(De){return se(O.getMetricsFor(De,!0),U.default.TRACK_SWITCH)},getCurrentBufferState:function A(De){return se(O.getMetricsFor(De,!0),U.default.BUFFER_STATE)},getCurrentBufferLevel:function I(De){var ne=se(O.getMetricsFor(De,!0),U.default.BUFFER_LEVEL);return ne?j.default.round10(ne.level/1e3,-3):0},getCurrentHttpRequest:ue,getHttpRequests:be,getCurrentDroppedFrames:function V(){return se(O.getMetricsFor(e.default.VIDEO,!0),U.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function Q(De){return se(O.getMetricsFor(De,!0),U.default.SCHEDULING_INFO)},getCurrentDVRInfo:function Ue(De){return se(De?O.getMetricsFor(De,!0):O.getMetricsFor(e.default.VIDEO,!0)||O.getMetricsFor(e.default.AUDIO,!0),U.default.DVR_INFO)},getCurrentManifestUpdate:function me(){return se(O.getMetricsFor(e.default.STREAM),U.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function Pe(De,le){if(!le)return null;var ne={},z=ue(De);z&&(ne=D.default.parseHttpHeaders(z._responseHeaders));var te=ne[le.toLowerCase()];return void 0===te?null:te},getLatestMPDRequestHeaderValueByID:function je(De){if(!De)return null;var ne,z,te,le={};for(te=(ne=be(e.default.STREAM)).length-1;te>=0;te--)if((z=ne[te]).type===C.HTTPRequest.MPD_TYPE){le=D.default.parseHttpHeaders(z._responseHeaders);break}var X=le[De.toLowerCase()];return void 0===X?null:X},addRepresentationSwitch:function E(De,le,ne,z,te){O.addRepresentationSwitch(De,le,ne,z,te)},addDVRInfo:function Fe(De,le,ne,z){O.addDVRInfo(De,le,ne,z)},updateManifestUpdateInfo:function xe(De){var le=this.getCurrentManifestUpdate();O.updateManifestUpdateInfo(le,De)},addManifestUpdateStreamInfo:function _e(De){if(De){var le=this.getCurrentManifestUpdate();O.addManifestUpdateStreamInfo(le,De.id,De.index,De.start,De.duration)}},addManifestUpdateRepresentationInfo:function ke(De,le){if(De){var ne=this.getCurrentManifestUpdate();O.addManifestUpdateRepresentationInfo(ne,De.id,De.index,De.streamIndex,le,De.presentationTimeOffset,De.startNumber,De.fragmentInfoType)}},addManifestUpdate:function Ie(De){O.addManifestUpdate(e.default.STREAM,De.type,De.requestStartDate,De.requestEndDate)},addHttpRequest:function Te(De,le,ne,z,te){O.addHttpRequest(De.mediaType,null,De.type,De.url,De.quality,le,De.serviceLocation||null,De.range||null,De.requestStartDate,De.firstByteDate,De.requestEndDate,ne,De.duration,z,te,De.fileLoaderType)},addSchedulingInfo:function pe(De,le){O.addSchedulingInfo(De.mediaType,new Date,De.type,De.startTime,De.availabilityStartTime,De.duration,De.quality,De.range,le)},addRequestsQueue:function q(De,le,ne){O.addRequestsQueue(De,le,ne)},addBufferLevel:function H(De,le,ne){O.addBufferLevel(De,le,ne)},addBufferState:function ee(De,le,ne){O.addBufferState(De,le,ne)},addDroppedFrames:function de(De){O.addDroppedFrames(e.default.VIDEO,De)},addPlayList:function He(){B&&(O.addPlayList(B),B=null)},addDVBErrors:function ce(De){O.addDVBErrors(De)},createPlaylistMetrics:function Le(De,le){(B=new h.PlayList).start=new Date,B.mstart=De,B.starttype=le},createPlaylistTraceMetrics:function ye(De,le,ne){!0===k&&(k=!1,(L=new h.PlayListTrace).representationid=De,L.start=new Date,L.mstart=le,L.playbackspeed=null!==ne?ne.toString():null)},updatePlayListTraceMetrics:function ae(De){if(L)for(var le in L)L[le]=De[le]},pushPlayListTraceMetrics:function W(De,le){if(!1===k&&B&&L&&L.start){var ne=L.start,z=De.getTime()-ne.getTime();L.duration=z,L.stopreason=le,B.trace.push(L),k=!0}},clearAllCurrentMetrics:function fe(){O.clearAllCurrentMetrics()}},function P(){O=O||Object(F.default)(_).getInstance({settings:p.settings}),function y(){k=!0,L=null,B=null}()}(),b}u.__dashjs_factory_name="DashMetrics",w.default=R.default.getSingletonFactory(u)},"./src/dash/SegmentBaseLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/vo/Segment.js"),C=i("./src/streaming/vo/DashJSError.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/vo/FragmentRequest.js"),j=i("./src/streaming/net/URLLoader.js");function F(){var h,u,p,_,b,k,L,B,O,P,y,S,E,D=this.context;function fe(Q,pe,me,xe){var _e=null,Ie=Q?E.resolve(Q.path):null,Te=xe||{init:!0,url:Ie?Ie.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:pe};u.debug("Start searching for initialization.");var ke=de(Te);B.load({request:ke,success:function(Pe){if(Te.bytesLoaded=Te.range.end,!(_e=_.findInitRange(Pe)))return Te.range.end=Te.bytesLoaded+Te.bytesToLoad,fe(Q,pe,me,Te);Q.range=_e,me(Q)},error:function(){me(Q)}}),u.debug("Perform init search: "+Te.url)}function be(Q,pe,me,xe,_e,Ie){if(me&&(void 0===me.start||void 0===me.end)){var Te=me?me.toString().split("-"):null;me=Te?{start:parseFloat(Te[0]),end:parseFloat(Te[1])}:null}_e=_e||q;var ke=null,Ue=null,Fe=!!me,je=Q?E.resolve(Q.path):null,Pe={init:!1,url:je?je.url:void 0,range:Fe?me:{start:0,end:1500},searching:!Fe,bytesLoaded:Ie?Ie.bytesLoaded:0,bytesToLoad:1500,mediaType:pe},He=de(Pe);B.load({request:He,success:function(W){var ce=Pe.bytesToLoad,De=W.byteLength;if(Pe.bytesLoaded=Pe.range.end-Pe.range.start,ke=_.parse(W),(Ue=ke.getBox("sidx"))&&Ue.isComplete){var z,te,ne=Ue.references;if(null!=ne&&ne.length>0&&(z=1===ne[0].reference_type),z){u.debug("Initiate multiple SIDX load."),Pe.range.end=Pe.range.start+Ue.size;var X,$,K,oe,Oe=[],Ze=0,st=(Ue.offset||Pe.range.start)+Ue.size,et=function(xt){xt?(Oe=Oe.concat(xt),++Ze>=$&&(Oe.sort(function(tt,Et){return tt.startTime-Et.startTime<0?-1:0}),_e(Oe,Q,xe))):_e(null,Q,xe)};for(X=0,$=ne.length;X<$;X++)K=st,oe=st+ne[X].referenced_size-1,st+=ne[X].referenced_size,be(Q,pe,{start:K,end:oe},xe,et,Pe)}else u.debug("Parsing segments from SIDX. representation "+pe+" - id: "+Q.id+" for range : "+Pe.range.start+" - "+Pe.range.end),te=function V(Q,pe){for(var Ue,je,Pe,me=Q.references,xe=me.length,_e=Q.timescale,Ie=Q.earliest_presentation_time,Te=pe.range.start+Q.offset+Q.first_offset+Q.size,ke=[],He=0;He<xe;He++)je=me[He].subsegment_duration,Pe=me[He].referenced_size,(Ue=new e.default).duration=je,Ue.startTime=Ie,Ue.timescale=_e,Ue.mediaRange=Te+"-"+(Te+Pe-1),ke.push(Ue),Ie+=je,Te+=Pe;return ke}(Ue,Pe),_e(te,Q,xe)}else{if(Ue)Pe.range.start=Ue.offset||Pe.range.start,Pe.range.end=Pe.range.start+(Ue.size||ce);else{if(De<Pe.bytesLoaded)return void _e(null,Q,xe);var le=ke.getLastBox();le&&le.size?(Pe.range.start=le.offset+le.size,Pe.range.end=Pe.range.start+ce):Pe.range.end+=ce}be(Q,pe,Pe.range,xe,null,Pe)}},error:function(){_e(null,Q,xe)}}),u.debug("Perform SIDX load for type ".concat(pe," : ").concat(Pe.url," with range ").concat(Pe.range.start," - ").concat(Pe.range.end))}function q(Q,pe,me){me({segments:Q,representation:pe,error:Q?void 0:new C.default(O.SEGMENT_BASE_LOADER_ERROR_CODE,O.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function de(Q){if(Q.url){var pe=new U.default;return pe.setInfo(Q),pe}}return h={setConfig:function H(Q){Q.baseURLController&&(E=Q.baseURLController),Q.dashMetrics&&(k=Q.dashMetrics),Q.mediaPlayerModel&&(L=Q.mediaPlayerModel),Q.errHandler&&(p=Q.errHandler),Q.boxParser&&(_=Q.boxParser),Q.debug&&(u=Q.debug.getLogger(h)),Q.requestModifier&&(b=Q.requestModifier),Q.errors&&(O=Q.errors),Q.urlUtils&&(S=Q.urlUtils),Q.constants&&(P=Q.constants),Q.dashConstants&&(y=Q.dashConstants)},initialize:function I(){B=Object(j.default)(D).create({errHandler:p,dashMetrics:k,mediaPlayerModel:L,requestModifier:b,boxParser:_,errors:O,urlUtils:S,constants:P,dashConstants:y})},loadInitialization:function ee(Q,pe){return new Promise(function(me){fe(Q,pe,me)})},loadSegments:function ue(Q,pe,me){return new Promise(function(xe){be(Q,pe,me,xe)})},reset:function se(){B&&(B.abort(),B=null)}}}F.__dashjs_factory_name="SegmentBaseLoader",w.default=R.default.getSingletonFactory(F)},"./src/dash/WebmSegmentBaseLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/utils/EBMLParser.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/dash/vo/Segment.js"),j=i("./src/streaming/vo/FragmentRequest.js"),F=i("./src/streaming/net/URLLoader.js"),D=i("./src/streaming/vo/DashJSError.js");function h(){var p,_,b,k,L,B,O,P,y,S,u=this.context;function ee(V,de,Q,pe){var xe,_e,Ie,Te,ke;for(_e=[],Te=0,ke=(xe=function H(V){var pe,me,de=[],Q=Object(e.default)(u).create({data:V});for(Q.consumeTagAndSize(b.Segment.Cues);Q.moreData()&&Q.consumeTagAndSize(b.Segment.Cues.CuePoint,!0);){for((pe={}).CueTime=Q.parseTag(b.Segment.Cues.CuePoint.CueTime),pe.CueTracks=[];Q.moreData()&&Q.consumeTag(b.Segment.Cues.CuePoint.CueTrackPositions,!0);){var xe=Q.getMatroskaCodedNum(),_e=Q.getPos();if((me={}).Track=Q.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===me.Track)throw new Error("Cue track cannot be 0");me.ClusterPosition=Q.parseTag(b.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),pe.CueTracks.push(me),Q.setPos(_e+xe)}if(0===pe.CueTracks.length)throw new Error("Mandatory cuetrack not found");de.push(pe)}if(0===de.length)throw new Error("mandatory cuepoint not found");return de}(V)).length;Te<ke;Te+=1)(Ie=new U.default).duration=Te<xe.length-1?xe[Te+1].CueTime-xe[Te].CueTime:pe-xe[Te].CueTime,Ie.startTime=xe[Te].CueTime,Ie.timescale=1e3,Ie.mediaRange=xe[Te].CueTracks[0].ClusterPosition+de+"-"+(Te<xe.length-1?xe[Te+1].CueTracks[0].ClusterPosition+de-1:Q-1),_e.push(Ie);return _.debug("Parsed cues: "+_e.length+" cues."),_e}function q(V){var de=new j.default;return de.setInfo(V),de}return p={setConfig:function I(V){if(!(V.baseURLController&&V.dashMetrics&&V.mediaPlayerModel&&V.errHandler))throw new Error(C.default.MISSING_CONFIG_ERROR);S=V.baseURLController,B=V.dashMetrics,O=V.mediaPlayerModel,k=V.errHandler,y=V.errors,_=V.debug.getLogger(p),L=V.requestModifier},initialize:function A(){P=Object(F.default)(u).create({errHandler:k,dashMetrics:B,mediaPlayerModel:O,requestModifier:L,errors:y})},loadInitialization:function ue(V,de){return new Promise(function(Q){var pe=null,me=V?S.resolve(V.path):null,xe=V?V.range.split("-"):null,_e={range:{start:xe?parseFloat(xe[0]):null,end:xe?parseFloat(xe[1]):null},request:pe,url:me?me.url:void 0,init:!0,mediaType:de};_.info("Start loading initialization."),pe=q(_e),P.load({request:pe,success:function(){Q(V)},error:function(){Q(V)}}),_.debug("Perform init load: "+_e.url)})},loadSegments:function be(V,de,Q){return new Promise(function(pe){var me=null,xe=V?S.resolve(V.path):null,_e=xe?xe.url:void 0;me=q({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:me,url:_e,init:!1,mediaType:de}),_.debug("Parsing ebml header"),P.load({request:me,success:function(je){!function fe(V,de,Q,pe){if(V&&0!==V.byteLength){var xe,_e,Ie,Te,me=Object(e.default)(u).create({data:V}),ke=Q?Q.split("-"):null,Ue=null,Fe={url:de,range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:Ue};for(_.debug("Parse EBML header: "+Fe.url),me.skipOverElement(b.EBML),me.consumeTag(b.Segment),Ie=me.getMatroskaCodedNum(),Ie+=me.getPos(),Te=me.getPos();me.moreData()&&!me.consumeTagAndSize(b.Segment.Info,!0);)if(!(me.skipOverElement(b.Segment.SeekHead,!0)||me.skipOverElement(b.Segment.Tracks,!0)||me.skipOverElement(b.Segment.Cues,!0)||me.skipOverElement(b.Void,!0)))throw new Error("no valid top level element found");for(;void 0===xe;){var je=me.getMatroskaCodedNum(!0),Pe=me.getMatroskaCodedNum();je===b.Segment.Info.Duration.tag?xe=me[b.Segment.Info.Duration.parse](Pe):me.setPos(me.getPos()+Pe)}Ue=q(Fe),P.load({request:Ue,success:function(ae){_e=ee(ae,Te,Ie,xe),pe(_e)},error:function(){_.error("Download Error: Cues "+Fe.url),pe(null)}}),_.debug("Perform cues load: "+Fe.url+" bytes="+Fe.range.start+"-"+Fe.range.end)}else pe(null)}(je,_e,Q,function(Pe){pe({segments:Pe,representation:V,error:Pe?void 0:new D.default(y.SEGMENT_BASE_LOADER_ERROR_CODE,y.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){pe({representation:V,error:new D.default(y.SEGMENT_BASE_LOADER_ERROR_CODE,y.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function se(){P&&(P.abort(),P=null)}},function E(){b={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}(),p}h.__dashjs_factory_name="WebmSegmentBaseLoader",w.default=R.default.getSingletonFactory(h)},"./src/dash/constants/DashConstants.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);var h=new(function(){function u(){(function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.init()}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.PROXY_SERVER_URL="proxyServerURL",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",SERVICE_LOCATION_PRIORITY:"SERVICE-LOCATION-PRIORITY"}}}]),u}());w.default=h},"./src/dash/controllers/ContentSteeringController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/streaming/net/URLLoader.js"),U=i("./src/core/errors/Errors.js"),j=i("./src/dash/vo/ContentSteeringRequest.js"),F=i("./src/dash/vo/ContentSteeringResponse.js"),D=i("./src/dash/constants/DashConstants.js"),h=i("./src/streaming/MediaPlayerEvents.js"),u=i("./src/core/events/Events.js"),p=i("./src/streaming/constants/Constants.js"),_=i("./src/core/Utils.js"),b=i("./src/streaming/utils/URLUtils.js"),k_THROUGHPUT="_DASH_throughput",k_PATHWAY="_DASH_pathway",k_URL="url";function L(){var P,y,S,E,A,I,H,ee,fe,ue,be,q,se,V,de,B=this.context,O=Object(b.default)(B).getInstance();function xe(W){W&&W.toStreamInfo&&(E=W.toStreamInfo)}function _e(W){W&&W.request&&W.request.serviceLocation&&(A=W.request.serviceLocation)}function Ie(){var W=be.getValue();return de.getContentSteering(W)}function ke(){return new Promise(function(W){try{var ce=Ie();if(!ce||!ce.serverUrl)return void W();var De=function Ue(W){var ce=W.proxyServerUrl?W.proxyServerUrl:W.serverUrl;S&&S.reloadUri&&(ce=O.isRelative(S.reloadUri)?O.resolve(S.reloadUri,W.serverUrl):S.reloadUri);var De=[];if(E){var le=de.getIsDynamic(),ne=de.getAllMediaInfoForType(E,p.default.VIDEO).length>0?p.default.VIDEO:p.default.AUDIO,z=se.getThroughputHistory(),te=z?z.getAverageThroughput(ne,le):NaN;isNaN(te)||De.push({key:k_THROUGHPUT,value:1e3*te})}return A&&De.push({key:k_PATHWAY,value:A}),W.proxyServerUrl&&W.proxyServerUrl===ce&&W.serverUrl&&De.push({key:k_URL,value:encodeURI(W.serverUrl)}),_.default.addAditionalQueryParameterToUrl(ce,De)}(ce),le=new j.default(De);H.load({request:le,success:function(z){(function Fe(W){!W||!W[D.default.CONTENT_STEERING_RESPONSE.VERSION]||1!==parseInt(W[D.default.CONTENT_STEERING_RESPONSE.VERSION])||((S=new F.default).version=W[D.default.CONTENT_STEERING_RESPONSE.VERSION],W[D.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(W[D.default.CONTENT_STEERING_RESPONSE.TTL])&&(S.ttl=W[D.default.CONTENT_STEERING_RESPONSE.TTL]),W[D.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(S.reloadUri=W[D.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),W[D.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]&&(S.serviceLocationPriority=W[D.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]),je())})(z),V.trigger(h.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:S,url:De}),W()},error:function(z){(function He(W){y.warn("Error fetching data from content steering server",W),je()})(z),W(z)}})}catch(ne){W(ne)}})}function je(){S&&S.ttl&&!isNaN(S.ttl)&&(I&&clearTimeout(I),I=setTimeout(function(){ke()},1e3*S.ttl))}function Pe(){I&&clearTimeout(I),I=null}function ae(){S=null,E=null,A=null,Pe()}return P={reset:function ye(){ae(),V.off(h.default.PERIOD_SWITCH_COMPLETED,xe,P),V.off(u.default.FRAGMENT_LOADING_STARTED,_e,P)},setConfig:function pe(W){!W||(W.adapter&&(de=W.adapter),W.errHandler&&(ee=W.errHandler),W.dashMetrics&&(fe=W.dashMetrics),W.mediaPlayerModel&&(ue=W.mediaPlayerModel),W.requestModifier&&(q=W.requestModifier),W.manifestModel&&(be=W.manifestModel),W.abrController&&(se=W.abrController),W.eventBus&&(V=W.eventBus))},loadSteeringData:ke,getCurrentSteeringResponseData:function Le(){return S},shouldQueryBeforeStart:function Te(){var W=Ie();return W&&W.queryBeforeStart},getSteeringDataFromManifest:Ie,stopSteeringRequestTimer:Pe,initialize:function me(){H=Object(R.default)(B).create({errHandler:ee,dashMetrics:fe,mediaPlayerModel:ue,requestModifier:q,errors:U.default}),V.on(h.default.PERIOD_SWITCH_COMPLETED,xe,P),V.on(u.default.FRAGMENT_LOADING_STARTED,_e,P)}},function Q(){y=Object(C.default)(B).getInstance().getLogger(P),ae()}(),P}L.__dashjs_factory_name="ContentSteeringController",w.default=e.default.getSingletonFactory(L)},"./src/dash/controllers/RepresentationController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/streaming/MediaPlayerEvents.js"),U=i("./src/dash/utils/SegmentsUtils.js");function j(F){var y,S,E,A,I,D=(F=F||{}).eventBus,h=F.events,u=F.abrController,p=F.dashMetrics,_=F.playbackController,b=F.timelineConverter,k=F.type,L=F.streamInfo,B=F.dashConstants,O=F.segmentsController,P=F.isDynamic;function fe(){return k}function ue(){if(!(u&&p&&_&&b))throw new Error(e.default.MISSING_CONFIG_ERROR)}function q(){return E}function se(){return I}function V(){S=null,E=!0,A=[]}function pe(ye){return new Promise(function(ae,W){var ce=ye.hasInitialization(),De=ye.hasSegments(),le=[];le.push(O.updateInitData(ye,ce)),le.push(O.updateSegmentData(ye,De)),Promise.all(le).then(function(ne){ne[0]&&!ne[0].error&&(ye=function xe(ye,ae){return ae&&!ae.error&&ae.representation?ae.representation:ye}(ye,ne[0])),ne[1]&&!ne[1].error&&(ye=function _e(ye,ae){if(ae&&!ae.error){var le,ne,z,te,W=ae.segments,ce=[],De=0;for(le=0,ne=W?W.length:0;le<ne;le++)z=W[le],(te=Object(U.getTimeBasedSegment)(b,P,ye,z.startTime,z.duration,z.timescale,z.media,z.mediaRange,De))&&(ce.push(te),te=null,De++);return ce.length>0&&(ye.segments=ce),ye}}(ye,ne[1])),function me(ye){ye.mediaFinishedInformation=O.getMediaFinishedInformation(ye)}(ye),function je(ye){if(q()){var ce,ae=p.getCurrentManifestUpdate(),W=!1;if(ae){for(var le=0;le<ae.representationInfo.length;le++)if((ce=ae.representationInfo[le]).index===ye.index&&ce.mediaType===fe()){W=!0;break}W||p.addManifestUpdateRepresentationInfo(ye,fe())}if(function Ue(){for(var ye=0,ae=A.length;ye<ae;ye++){var W=A[ye].segmentInfoType;if(!A[ye].hasInitialization()||(W===B.SEGMENT_BASE||W===B.BASE_URL)&&!A[ye].segments)return!1}return!0}()){u.setPlaybackQuality(k,L,function ke(ye){return A.indexOf(ye)}(I));var ne=p.getCurrentDVRInfo(k);ne&&p.updateManifestUpdateInfo({latency:ne.range.end-_.getTime()}),p.getCurrentRepresentationSwitch(se().adaptation.type)||Ie(),Fe()}}}(ye),ae()}).catch(function(ne){W(ne)})})}function Ie(){ue();var ye=new Date,ae=se(),W=1e3*_.getTime();ae&&p.addRepresentationSwitch(ae.adaptation.type,ye,W,ae.id),D.trigger(R.default.REPRESENTATION_SWITCH,{mediaType:k,streamId:L.id,currentRepresentation:ae,numberOfRepresentations:A.length},{streamId:L.id,mediaType:k})}function Te(ye){return null==ye||ye>=A.length?null:A[ye]}function Fe(ye){E=!1,D.trigger(h.DATA_UPDATE_COMPLETED,{data:S,currentRepresentation:I,error:ye},{streamId:L.id,mediaType:k})}function He(ye){I=ye}function Le(ye){if(ye.newDuration){var ae=se();ae&&ae.adaptation.period&&(ae.adaptation.period.duration=ye.newDuration)}}return y={getStreamId:function ee(){return L.id},getType:fe,getData:function be(){return S},isUpdating:q,updateData:function Q(ye,ae,W,ce,De){if(ue(),E=!0,A=ae,He(Te(De)),S=ye,W!==e.default.VIDEO&&W!==e.default.AUDIO&&(W!==e.default.TEXT||!ce))return Fe(),Promise.resolve();for(var ne=[],z=0,te=A.length;z<te;z++)ne.push(pe(A[z]));return Promise.all(ne)},getCurrentRepresentation:se,getRepresentationForQuality:Te,prepareQualityChange:function Pe(ye){He(Te(ye)),Ie()},reset:function de(){D.off(R.default.MANIFEST_VALIDITY_CHANGED,Le,y),V()}},function H(){V(),D.on(R.default.MANIFEST_VALIDITY_CHANGED,Le,y)}(),y}j.__dashjs_factory_name="RepresentationController",w.default=C.default.getClassFactory(j)},"./src/dash/controllers/SegmentBaseController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/dash/SegmentBaseLoader.js"),R=i("./src/dash/WebmSegmentBaseLoader.js");function U(F){var y,S,E,D=this.context,h=(F=F||{}).eventBus,u=F.events,p=F.dashMetrics,_=F.mediaPlayerModel,b=F.errHandler,k=F.baseURLController,L=F.debug,B=F.boxParser,O=F.requestModifier,P=F.errors;function I(be){return"webm"===(be?be.split("/")[1]:"").toLowerCase()}return y={initialize:function H(){S.initialize(),E.initialize()},getSegmentBaseInitSegment:function ee(be){return I(be.representation.mimeType)?E.loadInitialization(be.representation,be.mediaType):S.loadInitialization(be.representation,be.mediaType)},getSegmentList:function fe(be){return I(be.mimeType)?E.loadSegments(be.representation,be.mediaType,be.representation?be.representation.indexRange:null):S.loadSegments(be.representation,be.mediaType,be.representation?be.representation.indexRange:null)},reset:function ue(){S.reset(),E.reset()}},function A(){S=Object(C.default)(D).getInstance(),E=Object(R.default)(D).getInstance(),S.setConfig({baseURLController:k,dashMetrics:p,mediaPlayerModel:_,errHandler:b,eventBus:h,events:u,errors:P,debug:L,boxParser:B,requestModifier:O}),E.setConfig({baseURLController:k,dashMetrics:p,mediaPlayerModel:_,errHandler:b,eventBus:h,events:u,errors:P,debug:L,requestModifier:O})}(),y}U.__dashjs_factory_name="SegmentBaseController";var j=e.default.getSingletonFactory(U);w.default=j},"./src/dash/controllers/SegmentsController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/dash/utils/TimelineSegmentsGetter.js"),R=i("./src/dash/utils/TemplateSegmentsGetter.js"),U=i("./src/dash/utils/ListSegmentsGetter.js"),j=i("./src/dash/utils/SegmentBaseGetter.js");function F(h){var k,L,u=this.context,p=(h=h||{}).dashConstants,_=h.type,b=h.segmentBaseController;function S(H){return H?H.segments?L[p.SEGMENT_BASE]:L[H.segmentInfoType]:null}return k={initialize:function O(H){L[p.SEGMENT_TIMELINE]=Object(C.default)(u).create(h,H),L[p.SEGMENT_TEMPLATE]=Object(R.default)(u).create(h,H),L[p.SEGMENT_LIST]=Object(U.default)(u).create(h,H),L[p.SEGMENT_BASE]=Object(j.default)(u).create(h,H)},updateInitData:function P(H,ee){return ee?Promise.resolve():b.getSegmentBaseInitSegment({representation:H,mediaType:_})},updateSegmentData:function y(H,ee){return ee?Promise.resolve():b.getSegmentList({mimeType:H.mimeType,representation:H,mediaType:_})},getSegmentByIndex:function E(H,ee,fe){var ue=S(H);return ue?ue.getSegmentByIndex(H,ee,fe):null},getSegmentByTime:function A(H,ee){var fe=S(H);return fe?fe.getSegmentByTime(H,ee):null},getMediaFinishedInformation:function I(H){var ee=S(H);return ee?ee.getMediaFinishedInformation(H):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},function B(){L={}}(),k}F.__dashjs_factory_name="SegmentsController";var D=e.default.getClassFactory(F);w.default=D},"./src/dash/controllers/ServiceDescriptionController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/streaming/constants/Constants.js"),U=i("./src/dash/constants/DashConstants.js"),j=[R.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],F_VIDEO="video",F_AUDIO="audio",F_ANY="any",F_ALL="all";function D(){var u,p,_,b,k,h=this.context;function P(){p={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{}},_=[]}function ue(V,de,Q){try{p[V][de]=Q/1e3}catch(pe){b.error(pe)}}return u={getServiceDescriptionSettings:function y(){return p},getProducerReferenceTimeOffsets:function be(){return _},calculateProducerReferenceTimeOffsets:function q(V){try{var de=[];if(V&&V.length>0){var Q=[R.default.VIDEO,R.default.AUDIO,R.default.TEXT],pe=k.getAvailabilityStartTime()/1e3;V.forEach(function(me){var xe=Q.reduce(function(_e,Ie){return _e.concat(k.getAllMediaInfoForType(me,Ie))},[]).reduce(function(_e,Ie){return k.getProducerReferenceTimes(me,Ie).forEach(function(ke){var Ue=k.getVoRepresentations(Ie);if(Ue&&Ue.length>0&&Ue[0].adaptation&&Ue[0].segmentInfoType===U.default.SEGMENT_TEMPLATE){var Fe=Ue[0],Pe=new Date(ke[U.default.WALL_CLOCK_TIME]).getTime()/1e3;_e.push({id:ke[U.default.ID],to:pe-(Pe-(ke[U.default.PRESENTATION_TIME]/Fe[U.default.TIMESCALE]-Fe[U.default.PRESENTATION_TIME_OFFSET]+me.start))})}}),_e},[]);de=de.concat(xe)})}_=de}catch(me){b.error(me),_=[]}},applyServiceDescription:function S(V){if(V&&V.serviceDescriptions){var de=V.serviceDescriptions.filter(function(me){return j.includes(me.schemeIdUri)}),Q=V.serviceDescriptions.filter(function(me){return null==me.schemeIdUri}),pe=de.length>0?de[de.length-1]:Q[Q.length-1];!pe||(pe.latency&&pe.latency.target>0&&function E(V){var de;if(de=V.schemeIdUri===R.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?function I(V){return{liveDelay:V.latency.target/1e3,maxDrift:!isNaN(V.latency.max)&&V.latency.max>V.latency.target?(V.latency.max-V.latency.target+500)/1e3:NaN,referenceId:V.latency.referenceId||NaN}}(V):function A(V){return{liveDelay:V.latency.target/1e3,maxDrift:!isNaN(V.latency.max)&&V.latency.max>V.latency.target?(V.latency.max-V.latency.target+500)/1e3:NaN,referenceId:V.latency.referenceId||NaN}}(V),_.length>0){var Q=function se(V){var Q,de=0,pe=_.filter(function(me){return me.id===V.referenceId});return 0===pe.length?(de=_.length>0?_[0].to:0,Q=_[0].id||NaN):(de=pe[0].to||0,Q=pe[0].id||NaN),{to:de,id:Q}}(de),pe=Q.to,me=Q.id;p.liveDelay=de.liveDelay-pe,p.liveCatchup.maxDrift=de.maxDrift,b.debug("\n                Found latency properties coming from service description. Applied time offset of ".concat(pe," from ProducerReferenceTime element with id ").concat(me,".\n                Live Delay: ").concat(de.liveDelay-pe,", Live catchup max drift: ").concat(de.maxDrift,"\n            "))}else p.liveDelay=de.liveDelay,p.liveCatchup.maxDrift=de.maxDrift,b.debug("Found latency properties coming from service description: Live Delay: ".concat(de.liveDelay,", Live catchup max drift: ").concat(de.maxDrift))}(pe),pe.playbackRate&&function H(V){var de=V.playbackRate.min?Math.round(1e3*(V.playbackRate.min-1))/1e3:NaN,Q=V.playbackRate.max?Math.round(1e3*(V.playbackRate.max-1))/1e3:NaN;p.liveCatchup.playbackRate.min=de,p.liveCatchup.playbackRate.max=Q,b.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(de)),b.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(Q))}(pe),pe.operatingBandwidth&&function fe(V){if(V&&V.operatingBandwidth&&V.operatingBandwidth.mediaType&&V.operatingBandwidth.mediaType!==F_ALL){var de={};de.minBandwidth=V.operatingBandwidth.min,de.maxBandwidth=V.operatingBandwidth.max,de.targetBandwidth=V.operatingBandwidth.target;var Q=[];V.operatingBandwidth.mediaType===F_VIDEO||V.operatingBandwidth.mediaType===F_AUDIO?Q.push(V.operatingBandwidth.mediaType):V.operatingBandwidth.mediaType===F_ANY&&(Q.push(F_AUDIO),Q.push(F_VIDEO)),Q.forEach(function(pe){isNaN(de.minBandwidth)||ue("minBitrate",pe,de.minBandwidth),isNaN(de.maxBandwidth)||ue("maxBitrate",pe,de.maxBandwidth),isNaN(de.targetBandwidth)||ue("initialBitrate",pe,de.targetBandwidth)})}}(pe))}},reset:function O(){P()},setConfig:function B(V){!V||V.adapter&&(k=V.adapter)}},function L(){b=Object(C.default)(h).getInstance().getLogger(u),P()}(),u}D.__dashjs_factory_name="ServiceDescriptionController",w.default=e.default.getSingletonFactory(D)},"./src/dash/models/DashManifestModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./src/dash/vo/Representation.js"),U=i("./src/dash/vo/AdaptationSet.js"),j=i("./src/dash/vo/Period.js"),F=i("./src/dash/vo/Mpd.js"),D=i("./src/dash/vo/UTCTiming.js"),h=i("./src/dash/vo/Event.js"),u=i("./src/dash/vo/BaseURL.js"),p=i("./src/dash/vo/EventStream.js"),_=i("./src/dash/vo/ProducerReferenceTime.js"),b=i("./src/dash/vo/ContentSteering.js"),k=i("./src/streaming/utils/ObjectUtils.js"),L=i("./src/streaming/utils/URLUtils.js"),B=i("./src/core/FactoryMaker.js"),O=i("./src/core/Debug.js"),P=i("./src/streaming/vo/DashJSError.js"),y=i("./src/core/errors/Errors.js"),S=i("./src/streaming/thumbnail/ThumbnailTracks.js");function E(q,se){var V="undefined"!=typeof Symbol&&q[Symbol.iterator]||q["@@iterator"];if(!V){if(Array.isArray(q)||(V=H(q))||se&&q&&"number"==typeof q.length){V&&(q=V);var de=0,Q=function(){};return{s:Q,n:function(){return de>=q.length?{done:!0}:{done:!1,value:q[de++]}},e:function(Ie){throw Ie},f:Q}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var xe,pe=!0,me=!1;return{s:function(){V=V.call(q)},n:function(){var Ie=V.next();return pe=Ie.done,Ie},e:function(Ie){me=!0,xe=Ie},f:function(){try{!pe&&null!=V.return&&V.return()}finally{if(me)throw xe}}}}function A(q){return function fe(q){if(Array.isArray(q))return ue(q)}(q)||function ee(q){if("undefined"!=typeof Symbol&&null!=q[Symbol.iterator]||null!=q["@@iterator"])return Array.from(q)}(q)||H(q)||function I(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(q,se){if(q){if("string"==typeof q)return ue(q,se);var V=Object.prototype.toString.call(q).slice(8,-1);if("Object"===V&&q.constructor&&(V=q.constructor.name),"Map"===V||"Set"===V)return Array.from(q);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return ue(q,se)}}function ue(q,se){(null==se||se>q.length)&&(se=q.length);for(var V=0,de=new Array(se);V<se;V++)de[V]=q[V];return de}function be(){var q,se,V,de,Q=this.context,pe=Object(L.default)(Q).getInstance(),me=Number.isInteger||function(ut){return"number"==typeof ut&&isFinite(ut)&&Math.floor(ut)===ut};function _e(ut,zt){if(!ut)throw new Error("adaptation is not defined");if(!zt)throw new Error("type is not defined");if(ut.Representation_asArray&&ut.Representation_asArray.length){var dn=en(ut.Representation_asArray[0]);if(dn&&dn.length>0&&S.THUMBNAILS_SCHEME_ID_URIS.indexOf(dn[0].schemeIdUri)>=0)return zt===e.default.IMAGE}if(ut.ContentComponent_asArray&&ut.ContentComponent_asArray.length>0){if(ut.ContentComponent_asArray.length>1)return zt===e.default.MUXED;if(ut.ContentComponent_asArray[0].contentType===zt)return!0}var It=zt===e.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(zt);if(ut.Representation_asArray&&ut.Representation_asArray.length&&It.test(ut.Representation_asArray[0].codecs))return!0;if(ut.hasOwnProperty(C.default.MIME_TYPE))return It.test(ut.mimeType);if(ut.Representation_asArray)for(var Rt,sn=0;sn<ut.Representation_asArray.length;sn++)if((Rt=ut.Representation_asArray[sn]).hasOwnProperty(C.default.MIME_TYPE))return It.test(Rt.mimeType);return!1}function Ie(ut){if(!ut)throw new Error("adaptation is not defined");if(ut.hasOwnProperty(C.default.SEGMENT_TEMPLATE)||ut.hasOwnProperty(C.default.SEGMENT_TIMELINE)||ut.hasOwnProperty(C.default.SEGMENT_LIST)||ut.hasOwnProperty(C.default.SEGMENT_BASE))return!0;if(ut.Representation_asArray&&ut.Representation_asArray.length>0){var zt=ut.Representation_asArray[0];if(zt.hasOwnProperty(C.default.SEGMENT_TEMPLATE)||zt.hasOwnProperty(C.default.SEGMENT_TIMELINE)||zt.hasOwnProperty(C.default.SEGMENT_LIST)||zt.hasOwnProperty(C.default.SEGMENT_BASE))return!0}return!1}function Te(ut){return _e(ut,e.default.AUDIO)}function ke(ut){return _e(ut,e.default.VIDEO)}function Ue(ut){return _e(ut,e.default.TEXT)}function Fe(ut){return _e(ut,e.default.MUXED)}function je(ut){return _e(ut,e.default.IMAGE)}function De(){return function(ut,zt){return ut.bandwidth-zt.bandwidth}}function le(ut){return ut&&Array.isArray(ut.Representation_asArray)&&ut.Representation_asArray.sort(function(ut,zt){return ut.bandwidth-zt.bandwidth}),ut}function ne(ut,zt){return ut&&ut.Period_asArray&&me(zt)&&ut.Period_asArray[zt]?ut.Period_asArray[zt].AdaptationSet_asArray:[]}function z(ut){return ut&&ut.Period_asArray?ut.Period_asArray:[]}function ct(ut){var zt=!1;return ut&&ut.hasOwnProperty("type")&&(zt=ut.type===C.default.DYNAMIC),zt}function en(ut){return ut&&ut.EssentialProperty_asArray&&ut.EssentialProperty_asArray.length?ut.EssentialProperty_asArray.map(function(zt){return{schemeIdUri:zt.schemeIdUri,value:zt.value}}):null}function Vn(ut){if(!ut||!ut.S_asArray)return NaN;var zt=ut.S_asArray[0],dn=ut.S_asArray[1];return zt.hasOwnProperty("d")?zt.d:dn.t-zt.t}function Hn(ut){return ut.adaptation.period.start-ut.presentationTimeOffset}function mt(ut,zt){if(!ut)throw new Error("Period cannot be null or undefined");var dn=j.default.DEFAULT_ID+"_"+zt;return ut.hasOwnProperty(C.default.ID)&&ut.id.length>0&&"__proto__"!==ut.id&&(dn=ut.id),dn}function pt(ut,zt,dn){var kt,It=[];if(!ut)return It;for(kt=0;kt<ut.length;kt++){var Rt=new p.default;if(Rt.timescale=1,Rt.representation=zt,!ut[kt].hasOwnProperty(e.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");Rt.schemeIdUri=ut[kt].schemeIdUri,ut[kt].hasOwnProperty(C.default.TIMESCALE)&&(Rt.timescale=ut[kt].timescale),ut[kt].hasOwnProperty(C.default.VALUE)&&(Rt.value=ut[kt].value),It.push(Rt),Rt.period=dn}return It}function Zt(ut){var zt=[],It=!1;return(ut.BaseURL_asArray||[ut.baseUri]).some(function(kt){if(kt){var Rt=new u.default,sn=kt.__text||kt;return pe.isRelative(sn)&&(It=!0,ut.baseUri&&(sn=pe.resolve(sn,ut.baseUri))),Rt.url=sn,Rt.serviceLocation=kt.hasOwnProperty(C.default.SERVICE_LOCATION)&&kt.serviceLocation.length?kt.serviceLocation:sn,kt.hasOwnProperty(C.default.DVB_PRIORITY)&&(Rt.dvb_priority=kt[C.default.DVB_PRIORITY]),kt.hasOwnProperty(C.default.DVB_WEIGHT)&&(Rt.dvb_weight=kt[C.default.DVB_WEIGHT]),kt.hasOwnProperty(C.default.AVAILABILITY_TIME_OFFSET)&&(Rt.availabilityTimeOffset=kt[C.default.AVAILABILITY_TIME_OFFSET]),kt.hasOwnProperty(C.default.AVAILABILITY_TIME_COMPLETE)&&(Rt.availabilityTimeComplete="false"!==kt[C.default.AVAILABILITY_TIME_COMPLETE]),zt.push(Rt),It}}),zt}return q={getIsTypeOf:_e,getIsText:Ue,getIsFragmented:Ie,getProducerReferenceTimesForAdaptation:function Pe(ut){var zt=ut&&ut.hasOwnProperty(C.default.PRODUCERREFERENCETIME_ASARRAY)?ut[C.default.PRODUCERREFERENCETIME_ASARRAY]:[];(ut&&ut.hasOwnProperty(C.default.REPRESENTATION_ASARRAY)?ut[C.default.REPRESENTATION_ASARRAY]:[]).forEach(function(kt){kt.hasOwnProperty(C.default.PRODUCERREFERENCETIME_ASARRAY)&&zt.push.apply(zt,A(kt[C.default.PRODUCERREFERENCETIME_ASARRAY]))});var It=[];return zt.forEach(function(kt){var Rt=new _.default;kt.hasOwnProperty(C.default.ID)&&(Rt[C.default.ID]=kt[C.default.ID],kt.hasOwnProperty(C.default.WALL_CLOCK_TIME)&&(Rt[C.default.WALL_CLOCK_TIME]=kt[C.default.WALL_CLOCK_TIME],kt.hasOwnProperty(C.default.PRESENTATION_TIME)&&(Rt[C.default.PRESENTATION_TIME]=kt[C.default.PRESENTATION_TIME],It.push(Rt))))}),It},getLanguageForAdaptation:function He(ut){var zt="";return ut&&ut.hasOwnProperty(C.default.LANG)&&(zt=ut.lang),zt},getViewpointForAdaptation:function Le(ut){return ut&&ut.hasOwnProperty(C.default.VIEWPOINT)?ut.Viewpoint:null},getRolesForAdaptation:function ye(ut){return ut&&ut.hasOwnProperty(C.default.ROLE_ASARRAY)?ut.Role_asArray:[]},getAccessibilityForAdaptation:function ae(ut){return ut&&ut.hasOwnProperty(C.default.ACCESSIBILITY_ASARRAY)?ut.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function W(ut){return ut&&ut.hasOwnProperty(C.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?ut.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function ce(ut){return ut&&ut.hasOwnProperty(C.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?ut.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function $(ut,zt,dn){var It=ne(zt,dn);return It.length>0&&me(ut)?It[ut]:null},getIndexForAdaptation:function K(ut,zt,dn){if(!ut)return-1;for(var It=ne(zt,dn),kt=0;kt<It.length;kt++)if(Object(k.default)(Q).getInstance().areEqual(It[kt],ut))return kt;return-1},getAdaptationForId:function X(ut,zt,dn){var kt,Rt,It=ne(zt,dn);for(kt=0,Rt=It.length;kt<Rt;kt++)if(It[kt].hasOwnProperty(C.default.ID)&&It[kt].id===ut)return It[kt];return null},getAdaptationsForType:function oe(ut,zt,dn){var kt,Rt,It=ne(ut,zt),sn=[];for(kt=0,Rt=It.length;kt<Rt;kt++)_e(It[kt],dn)&&sn.push(le(It[kt]));return sn},getRealPeriods:z,getRealPeriodForIndex:function te(ut,zt){var dn=z(zt);return dn.length>0&&me(ut)?dn[ut]:null},getCodec:function Ce(ut,zt,dn){var It=null;if(ut&&ut.Representation_asArray&&ut.Representation_asArray.length>0){var kt=me(zt)&&zt>=0&&zt<ut.Representation_asArray.length?ut.Representation_asArray[zt]:ut.Representation_asArray[0];kt&&(It=kt.mimeType+';codecs="'+kt.codecs+'"',dn&&void 0!==kt.width&&(It+=';width="'+kt.width+'";height="'+kt.height+'"'))}return It&&(It=It.replace(/\sprofiles=[^;]*/g,"")),It},getSelectionPriority:function jt(ut){try{var zt=ut&&void 0!==ut.selectionPriority?parseInt(ut.selectionPriority):1;return isNaN(zt)?1:zt}catch(dn){return 1}},getMimeType:function Oe(ut){return ut&&ut.Representation_asArray&&ut.Representation_asArray.length>0?ut.Representation_asArray[0].mimeType:null},getKID:function Ze(ut){return ut&&ut.hasOwnProperty(C.default.CENC_DEFAULT_KID)?ut[C.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function st(ut){if(!ut||!Array.isArray(ut.Label_asArray))return[];for(var zt=[],dn=0;dn<ut.Label_asArray.length;dn++)zt.push({lang:ut.Label_asArray[dn].lang,text:ut.Label_asArray[dn].__text||ut.Label_asArray[dn]});return zt},getContentProtectionData:function et(ut){return ut&&ut.hasOwnProperty(C.default.CONTENTPROTECTION_ASARRAY)&&0!==ut.ContentProtection_asArray.length?ut.ContentProtection_asArray:null},getIsDynamic:ct,getId:function xt(ut){return ut&&ut[C.default.ID]||null},hasProfile:function tt(ut,zt){var dn=!1;return ut&&ut.profiles&&ut.profiles.length>0&&(dn=-1!==ut.profiles.indexOf(zt)),dn},getDuration:function Et(ut){return ut&&ut.hasOwnProperty(C.default.MEDIA_PRESENTATION_DURATION)?ut.mediaPresentationDuration:ut&&"dynamic"==ut.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function Kt(ut){return ut&&ut.bandwidth?ut.bandwidth:NaN},getManifestUpdatePeriod:function _t(ut){var zt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,dn=NaN;return ut&&ut.hasOwnProperty(C.default.MINIMUM_UPDATE_PERIOD)&&(dn=ut.minimumUpdatePeriod),isNaN(dn)?dn:Math.max(dn-zt,1)},getPublishTime:function At(ut){return ut&&ut.hasOwnProperty(C.default.PUBLISH_TIME)?new Date(ut[C.default.PUBLISH_TIME]):null},getRepresentationCount:function Pt(ut){return ut&&Array.isArray(ut.Representation_asArray)?ut.Representation_asArray.length:0},getBitrateListForAdaptation:function Yt(ut){var zt=le(ut);return(zt&&Array.isArray(zt.Representation_asArray)?zt.Representation_asArray:[]).map(function(It){return{bandwidth:It.bandwidth,width:It.width||0,height:It.height||0,scanType:It.scanType||null,id:It.id||null}})},getRepresentationFor:function an(ut,zt){return zt&&zt.Representation_asArray&&zt.Representation_asArray.length>0&&me(ut)?zt.Representation_asArray[ut]:null},getRepresentationsForAdaptation:function wn(ut){var It,kt,zt=[],dn=function Ln(ut){if(ut&&ut.period&&me(ut.period.index)){var zt=ut.period.mpd.manifest.Period_asArray[ut.period.index];if(zt&&zt.AdaptationSet_asArray&&me(ut.index))return le(zt.AdaptationSet_asArray[ut.index])}}(ut);if(dn&&dn.Representation_asArray){if(ut&&ut.period&&me(ut.period.index)){var Rt=Zt(ut.period.mpd.manifest);Rt&&(kt=Rt[0])}for(var sn=0,Fn=dn.Representation_asArray.length;sn<Fn;++sn){var Un=dn.Representation_asArray[sn],Ot=new R.default;if(Ot.index=sn,Ot.adaptation=ut,Un.hasOwnProperty(C.default.ID)&&(Ot.id=Un.id),Un.hasOwnProperty(C.default.CODECS)&&(Ot.codecs=Un.codecs),Un.hasOwnProperty(C.default.MIME_TYPE)&&(Ot.mimeType=Un[C.default.MIME_TYPE]),Un.hasOwnProperty(C.default.CODEC_PRIVATE_DATA)&&(Ot.codecPrivateData=Un.codecPrivateData),Un.hasOwnProperty(C.default.BANDWITH)&&(Ot.bandwidth=Un.bandwidth),Un.hasOwnProperty(C.default.WIDTH)&&(Ot.width=Un.width),Un.hasOwnProperty(C.default.HEIGHT)&&(Ot.height=Un.height),Un.hasOwnProperty(C.default.SCAN_TYPE)&&(Ot.scanType=Un.scanType),Un.hasOwnProperty(C.default.MAX_PLAYOUT_RATE)&&(Ot.maxPlayoutRate=Un.maxPlayoutRate),Un.hasOwnProperty(C.default.SEGMENT_BASE)?(It=Un.SegmentBase,Ot.segmentInfoType=C.default.SEGMENT_BASE):Un.hasOwnProperty(C.default.SEGMENT_LIST)?Ot.segmentInfoType=(It=Un.SegmentList).hasOwnProperty(C.default.SEGMENT_TIMELINE)?C.default.SEGMENT_TIMELINE:C.default.SEGMENT_LIST:Un.hasOwnProperty(C.default.SEGMENT_TEMPLATE)?(Ot.segmentInfoType=(It=Un.SegmentTemplate).hasOwnProperty(C.default.SEGMENT_TIMELINE)?C.default.SEGMENT_TIMELINE:C.default.SEGMENT_TEMPLATE,It.hasOwnProperty(C.default.INITIALIZATION_MINUS)&&(Ot.initialization=It.initialization.split("$Bandwidth$").join(Un.bandwidth).split("$RepresentationID$").join(Un.id))):Ot.segmentInfoType=C.default.BASE_URL,Ot.essentialProperties=en(Un),It){if(It.hasOwnProperty(C.default.INITIALIZATION)){var Ct=It.Initialization;Ct.hasOwnProperty(C.default.SOURCE_URL)&&(Ot.initialization=Ct.sourceURL),Ct.hasOwnProperty(C.default.RANGE)&&(Ot.range=Ct.range)}else Ue(dn)&&Ie(dn)&&dn.mimeType&&-1===dn.mimeType.indexOf("application/mp4")&&(Ot.range=0);It.hasOwnProperty(C.default.TIMESCALE)&&(Ot.timescale=It.timescale),It.hasOwnProperty(C.default.DURATION)?Ot.segmentDuration=It.duration/Ot.timescale:Un.hasOwnProperty(C.default.SEGMENT_TEMPLATE)&&(It=Un.SegmentTemplate).hasOwnProperty(C.default.SEGMENT_TIMELINE)&&(Ot.segmentDuration=Vn(It.SegmentTimeline)/Ot.timescale),It.hasOwnProperty(C.default.MEDIA)&&(Ot.media=It.media),It.hasOwnProperty(C.default.START_NUMBER)&&(Ot.startNumber=It.startNumber),It.hasOwnProperty(C.default.INDEX_RANGE)&&(Ot.indexRange=It.indexRange),It.hasOwnProperty(C.default.PRESENTATION_TIME_OFFSET)&&(Ot.presentationTimeOffset=It.presentationTimeOffset/Ot.timescale),It.hasOwnProperty(C.default.AVAILABILITY_TIME_OFFSET)?Ot.availabilityTimeOffset=It.availabilityTimeOffset:kt&&void 0!==kt.availabilityTimeOffset&&(Ot.availabilityTimeOffset=kt.availabilityTimeOffset),It.hasOwnProperty(C.default.AVAILABILITY_TIME_COMPLETE)?Ot.availabilityTimeComplete="false"!==It.availabilityTimeComplete:kt&&void 0!==kt.availabilityTimeComplete&&(Ot.availabilityTimeComplete=kt.availabilityTimeComplete)}Ot.MSETimeOffset=Hn(Ot),Ot.path=[ut.period.index,ut.index,sn],zt.push(Ot)}}return zt},getAdaptationsForPeriod:function it(ut){var It,kt,Rt,zt=ut&&me(ut.index)?ut.mpd.manifest.Period_asArray[ut.index]:null,dn=[];if(zt&&zt.AdaptationSet_asArray)for(Rt=0;Rt<zt.AdaptationSet_asArray.length;Rt++)kt=zt.AdaptationSet_asArray[Rt],It=new U.default,kt.hasOwnProperty(C.default.ID)&&(It.id=kt.id),It.index=Rt,It.period=ut,Fe(kt)?It.type=e.default.MUXED:Te(kt)?It.type=e.default.AUDIO:ke(kt)?It.type=e.default.VIDEO:Ue(kt)?It.type=e.default.TEXT:je(kt)?It.type=e.default.IMAGE:se.warn("Unknown Adaptation stream type"),dn.push(It);return dn},getRegularPeriods:function Qe(ut){var Fn,Un,zt=!!ut&&ct(ut.manifest),dn=[],It=null,kt=null,Rt=null,sn=null;for(Un=0,Fn=ut&&ut.manifest&&ut.manifest.Period_asArray?ut.manifest.Period_asArray.length:0;Un<Fn;Un++)(kt=ut.manifest.Period_asArray[Un]).hasOwnProperty(C.default.START)?(sn=new j.default).start=kt.start:null!==It&&It.hasOwnProperty(C.default.DURATION)&&null!==Rt?(sn=new j.default).start=parseFloat((Rt.start+Rt.duration).toFixed(5)):0===Un&&!zt&&((sn=new j.default).start=0),null!==Rt&&isNaN(Rt.duration)&&(null!==sn?Rt.duration=parseFloat((sn.start-Rt.start).toFixed(5)):se.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==sn&&(sn.id=mt(kt,Un),sn.index=Un,sn.mpd=ut,kt.hasOwnProperty(C.default.DURATION)&&(sn.duration=kt.duration),Rt&&(Rt.nextPeriodId=sn.id),dn.push(sn),It=kt,Rt=sn),kt=null,sn=null;return 0===dn.length||null!==Rt&&isNaN(Rt.duration)&&(Rt.duration=parseFloat((function Wt(ut){!function tn(){if(!V||!V.hasOwnProperty("error"))throw new Error(e.default.MISSING_CONFIG_ERROR)}();var dn,zt=ct(ut.mpd.manifest);return ut.mpd.manifest.mediaPresentationDuration?dn=ut.mpd.manifest.mediaPresentationDuration:ut.duration?dn=ut.duration:zt?dn=Number.POSITIVE_INFINITY:V.error(new P.default(y.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",ut)),dn}(Rt)-Rt.start).toFixed(5))),dn},getMpd:function Ft(ut){var zt=new F.default;return ut&&(zt.manifest=ut,ut.hasOwnProperty(C.default.AVAILABILITY_START_TIME)?zt.availabilityStartTime=new Date(ut.availabilityStartTime.getTime()):ut.loadedTime&&(zt.availabilityStartTime=new Date(ut.loadedTime.getTime())),ut.hasOwnProperty(C.default.AVAILABILITY_END_TIME)&&(zt.availabilityEndTime=new Date(ut.availabilityEndTime.getTime())),ut.hasOwnProperty(C.default.MINIMUM_UPDATE_PERIOD)&&(zt.minimumUpdatePeriod=ut.minimumUpdatePeriod),ut.hasOwnProperty(C.default.MEDIA_PRESENTATION_DURATION)&&(zt.mediaPresentationDuration=ut.mediaPresentationDuration),ut.hasOwnProperty(C.default.SUGGESTED_PRESENTATION_DELAY)&&(zt.suggestedPresentationDelay=ut.suggestedPresentationDelay),ut.hasOwnProperty(C.default.TIMESHIFT_BUFFER_DEPTH)&&(zt.timeShiftBufferDepth=ut.timeShiftBufferDepth),ut.hasOwnProperty(C.default.MAX_SEGMENT_DURATION)&&(zt.maxSegmentDuration=ut.maxSegmentDuration),ut.hasOwnProperty(C.default.PUBLISH_TIME)&&(zt.publishTime=new Date(ut.publishTime))),zt},getEventsForPeriod:function vt(ut){var Rt,sn,zt=ut&&ut.mpd&&ut.mpd.manifest?ut.mpd.manifest:null,dn=zt?zt.Period_asArray:null,It=dn&&ut&&me(ut.index)?dn[ut.index].EventStream_asArray:null,kt=[];if(It)for(Rt=0;Rt<It.length;Rt++){var Fn=new p.default;if(Fn.period=ut,Fn.timescale=1,!It[Rt].hasOwnProperty(e.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(Fn.schemeIdUri=It[Rt][e.default.SCHEME_ID_URI],It[Rt].hasOwnProperty(C.default.TIMESCALE)&&(Fn.timescale=It[Rt][C.default.TIMESCALE]),It[Rt].hasOwnProperty(C.default.VALUE)&&(Fn.value=It[Rt][C.default.VALUE]),It[Rt].hasOwnProperty(C.default.PRESENTATION_TIME_OFFSET)&&(Fn.presentationTimeOffset=It[Rt][C.default.PRESENTATION_TIME_OFFSET]),sn=0;It[Rt].Event_asArray&&sn<It[Rt].Event_asArray.length;sn++){var Un=It[Rt].Event_asArray[sn],Ot=new h.default;Ot.presentationTime=0,Ot.eventStream=Fn,Un.hasOwnProperty(C.default.PRESENTATION_TIME)&&(Ot.presentationTime=Un.presentationTime),Ot.calculatedPresentationTime=Ot.presentationTime/Fn.timescale+ut.start-(Fn.presentationTimeOffset?Fn.presentationTimeOffset/Fn.timescale:0),Un.hasOwnProperty(C.default.DURATION)&&(Ot.duration=Un.duration/Fn.timescale),Ot.id=Un.hasOwnProperty(C.default.ID)?Un.id:null,Ot.messageData=Un.Signal&&Un.Signal.Binary?de.decodeArray(Un.Signal.Binary.toString()):Un.messageData||Un.__cdata||Un.__text,kt.push(Ot)}}return kt},getEssentialPropertiesForRepresentation:en,getEventStreamForAdaptationSet:function rt(ut,zt,dn){var It,kt,Rt;return ut&&ut.Period_asArray&&zt&&zt.period&&me(zt.period.index)&&(kt=ut.Period_asArray[zt.period.index])&&kt.AdaptationSet_asArray&&me(zt.index)&&(Rt=kt.AdaptationSet_asArray[zt.index])&&(It=Rt.InbandEventStream_asArray),pt(It,null,dn)},getEventStreamForRepresentation:function Xe(ut,zt,dn){var It,kt,Rt,sn;return ut&&ut.Period_asArray&&zt&&zt.adaptation&&zt.adaptation.period&&me(zt.adaptation.period.index)&&(kt=ut.Period_asArray[zt.adaptation.period.index])&&kt.AdaptationSet_asArray&&me(zt.adaptation.index)&&(Rt=kt.AdaptationSet_asArray[zt.adaptation.index])&&Rt.Representation_asArray&&me(zt.index)&&(sn=Rt.Representation_asArray[zt.index])&&(It=sn.InbandEventStream_asArray),pt(It,zt,dn)},getUTCTimingSources:function yt(ut){var zt=ct(ut),dn=!!ut&&ut.hasOwnProperty(C.default.AVAILABILITY_START_TIME),It=ut?ut.UTCTiming_asArray:null,kt=[];return(zt||dn)&&It&&It.forEach(function(Rt){var sn=new D.default;Rt.hasOwnProperty(e.default.SCHEME_ID_URI)&&(sn.schemeIdUri=Rt.schemeIdUri,Rt.hasOwnProperty(C.default.VALUE)&&(sn.value=Rt.value.toString(),kt.push(sn)))}),kt},getBaseURLsFromElement:Zt,getRepresentationSortFunction:De,getContentSteering:function Jt(ut){if(ut&&ut.hasOwnProperty(C.default.CONTENT_STEERING_AS_ARRAY)){var zt=ut[C.default.CONTENT_STEERING_AS_ARRAY][0],dn=new b.default;return dn.serverUrl=zt.__text,zt.hasOwnProperty(C.default.DEFAULT_SERVICE_LOCATION)&&(dn.defaultServiceLocation=zt[C.default.DEFAULT_SERVICE_LOCATION]),zt.hasOwnProperty(C.default.QUERY_BEFORE_START)&&(dn.queryBeforeStart="true"===zt[C.default.QUERY_BEFORE_START].toLowerCase()),zt.hasOwnProperty(C.default.PROXY_SERVER_URL)&&(dn.proxyServerUrl=zt[C.default.PROXY_SERVER_URL]),dn}},getLocation:function on(ut){if(ut&&ut.hasOwnProperty(e.default.LOCATION))return ut.Location=ut.Location_asArray[0],ut.Location},getPatchLocation:function pn(ut){if(ut&&ut.hasOwnProperty(C.default.PATCH_LOCATION))return ut.PatchLocation=ut.PatchLocation_asArray[0],ut.PatchLocation},getSuggestedPresentationDelay:function Mn(ut){return ut&&ut.hasOwnProperty(C.default.SUGGESTED_PRESENTATION_DELAY)?ut.suggestedPresentationDelay:null},getAvailabilityStartTime:function Wn(ut){return ut&&ut.hasOwnProperty(C.default.AVAILABILITY_START_TIME)&&null!==ut.availabilityStartTime?ut.availabilityStartTime.getTime():null},getServiceDescriptions:function Qn(ut){var zt=[];if(ut&&ut.hasOwnProperty(C.default.SERVICE_DESCRIPTION)){var It,dn=E(ut.ServiceDescription_asArray);try{for(dn.s();!(It=dn.n()).done;){var kt=It.value,Rt=null,sn=null,Fn=null,Un=null,Ot=null,Ct=null;for(var Gt in kt)kt.hasOwnProperty(Gt)&&(Gt===C.default.ID?Rt=kt[Gt]:Gt===C.default.SERVICE_DESCRIPTION_SCOPE?sn=kt[Gt].schemeIdUri:Gt===C.default.SERVICE_DESCRIPTION_LATENCY?Fn={target:parseInt(kt[Gt].target),max:parseInt(kt[Gt].max),min:parseInt(kt[Gt].min),referenceId:parseInt(kt[Gt].referenceId)}:Gt===C.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?Un={max:parseFloat(kt[Gt].max),min:parseFloat(kt[Gt].min)}:Gt===C.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?Ot={mediaType:kt[Gt].mediaType,max:parseInt(kt[Gt].max),min:parseInt(kt[Gt].min),target:parseInt(kt[Gt].target),type:kt[Gt].type,maxQualityDifference:parseInt(kt[Gt].maxQualityDifference)}:Gt===C.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(Ct={mediaType:kt[Gt].mediaType,max:parseInt(kt[Gt].max),min:parseInt(kt[Gt].min),target:parseInt(kt[Gt].target)}));zt.push({id:Rt,schemeIdUri:sn,latency:Fn,playbackRate:Un,operatingQuality:Ot,operatingBandwidth:Ct})}}catch(qt){dn.e(qt)}finally{dn.f()}}return zt},getSupplementalProperties:function gr(ut){var zt={};if(ut&&ut.hasOwnProperty(C.default.SUPPLEMENTAL_PROPERTY)){var It,dn=E(ut.SupplementalProperty_asArray);try{for(dn.s();!(It=dn.n()).done;){var kt=It.value;kt.hasOwnProperty(e.default.SCHEME_ID_URI)&&kt.hasOwnProperty(C.default.VALUE)&&(zt[kt[e.default.SCHEME_ID_URI]]=kt[C.default.VALUE])}}catch(Rt){dn.e(Rt)}finally{dn.f()}}return zt},setConfig:function Ir(ut){!ut||(ut.errHandler&&(V=ut.errHandler),ut.BASE64&&(de=ut.BASE64))}},function xe(){se=Object(O.default)(Q).getInstance().getLogger(q)}(),q}be.__dashjs_factory_name="DashManifestModel",w.default=B.default.getSingletonFactory(be)},"./src/dash/models/PatchManifestModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/constants/DashConstants.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/core/Debug.js"),U=i("./src/dash/vo/SimpleXPath.js"),j=i("./src/dash/vo/PatchOperation.js");function F(){var D,h,u=this.context;return D={getIsPatch:function _(O){return O&&O.hasOwnProperty(e.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function b(O){return O&&O.hasOwnProperty(e.default.PUBLISH_TIME)?new Date(O[e.default.PUBLISH_TIME]):null},getOriginalPublishTime:function k(O){return O&&O.hasOwnProperty(e.default.ORIGINAL_PUBLISH_TIME)?new Date(O[e.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function L(O){return O&&O[e.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function B(O){return O?(O.__children||[]).map(function(P){var y=Object.keys(P)[0];if("add"!==y&&"remove"!==y&&"replace"!==y)return h.warn("Ignoring node of invalid action: ".concat(y)),null;var S=P[y],E=S.sel;if("add"===y&&S.type){if(!S.type.startsWith("@"))return h.warn("Ignoring add action for prefixed namespace declaration: ".concat(S.type,"=").concat(S.__text)),null;E="".concat(E,"/").concat(S.type)}var A=new U.default(E);if(!A.isValid())return h.warn("Ignoring action with invalid selector: ".concat(y," - ").concat(E)),null;var I=null;A.findsAttribute()?I=S.__text||"":"remove"!==y&&(I=S.__children.reduce(function(ee,fe){var ue=Object.keys(fe)[0];return"#text"!==ue&&(ee[ue]=ee[ue]||[],ee[ue].push(fe[ue])),ee},{}));var H=new j.default(y,A,I);return"add"===y&&(H.position=S.pos),H}).filter(function(P){return!!P}):[]}},function p(){h=Object(R.default)(u).getInstance().getLogger(D)}(),D}F.__dashjs_factory_name="PatchManifestModel",w.default=C.default.getSingletonFactory(F)},"./src/dash/parser/DashParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/dash/parser/objectiron.js"),R=i("./externals/xml2json.js"),U=i("./src/dash/parser/matchers/StringMatcher.js"),j=i("./src/dash/parser/matchers/DurationMatcher.js"),F=i("./src/dash/parser/matchers/DateTimeMatcher.js"),D=i("./src/dash/parser/matchers/NumericMatcher.js"),h=i("./src/dash/parser/matchers/LangMatcher.js"),u=i("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),p=i("./src/dash/parser/maps/SegmentValuesMap.js");function _(b){var B,O,P,y,S,k=this.context,L=(b=b||{}).debug;return B={parse:function H(ee){var fe,ue=window.performance.now();if(!(fe=y.xml_str2json(ee)))throw new Error("parsing the manifest failed");var be=window.performance.now();fe.Patch?((fe=fe.Patch).add_asArray&&fe.add_asArray.forEach(function(se){return S.run(se)}),fe.replace_asArray&&fe.replace_asArray.forEach(function(se){return S.run(se)})):S.run(fe=fe.MPD);var q=window.performance.now();return O.info("Parsing complete: ( xml2json: "+(be-ue).toPrecision(3)+"ms, objectiron: "+(q-be).toPrecision(3)+"ms, total: "+((q-ue)/1e3).toPrecision(3)+"s)"),fe.protocol="DASH",fe},getMatchers:function A(){return P},getIron:function I(){return S}},function E(){O=L.getLogger(B),P=[new j.default,new F.default,new D.default,new h.default,new U.default],y=new R.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:P}),S=Object(C.default)(k).create({adaptationset:new u.default,period:new p.default})}(),B}_.__dashjs_factory_name="DashParser",w.default=e.default.getClassFactory(_)},"./src/dash/parser/maps/CommonProperty.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u){!function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}(this,h);var b;this._name=u,this._merge=(b=u)&&b.length&&b.charAt(0)===b.charAt(0).toUpperCase()}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),h}()},"./src/dash/parser/maps/MapNode.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/maps/CommonProperty.js");function C(u){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function U(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,F(b.key),b)}}function F(u){var p=function D(u,p){if("object"!==C(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==C(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===C(p)?p:String(p)}w.default=function(){function u(p,_,b){var k=this;(function R(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this._name=p||"",this._properties=[],this._children=b||[],Array.isArray(_)&&_.forEach(function(L){k._properties.push(new e.default(L))})}return function j(u,p,_){return p&&U(u.prototype,p),_&&U(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),u}()},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/maps/MapNode.js"),C=i("./src/dash/constants/DashConstants.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function U(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,F(E.key),E)}}function F(P){var y=function D(P,y){if("object"!==R(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==R(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===R(y)?y:String(y)}function u(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&p(P,y)}function p(P,y){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function _(P){var y=function L(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=B(P);if(y){var I=B(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return b(this,A)}}function b(P,y){if(y&&("object"===R(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}w.default=function(P){u(S,P);var y=_(S);function S(){!function h(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S);var E=[C.default.PROFILES,C.default.WIDTH,C.default.HEIGHT,C.default.SAR,C.default.FRAMERATE,C.default.AUDIO_SAMPLING_RATE,C.default.MIME_TYPE,C.default.SEGMENT_PROFILES,C.default.CODECS,C.default.MAXIMUM_SAP_PERIOD,C.default.START_WITH_SAP,C.default.MAX_PLAYOUT_RATE,C.default.CODING_DEPENDENCY,C.default.SCAN_TYPE,C.default.FRAME_PACKING,C.default.AUDIO_CHANNEL_CONFIGURATION,C.default.CONTENT_PROTECTION,C.default.ESSENTIAL_PROPERTY,C.default.SUPPLEMENTAL_PROPERTY,C.default.INBAND_EVENT_STREAM];return y.call(this,C.default.ADAPTATION_SET,E,[new e.default(C.default.REPRESENTATION,E,[new e.default(C.default.SUB_REPRESENTATION,E)])])}return function j(P,y,S){return y&&U(P.prototype,y),S&&U(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(e.default)},"./src/dash/parser/maps/SegmentValuesMap.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/maps/MapNode.js"),C=i("./src/dash/constants/DashConstants.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function U(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,F(E.key),E)}}function F(P){var y=function D(P,y){if("object"!==R(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==R(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===R(y)?y:String(y)}function u(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&p(P,y)}function p(P,y){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function _(P){var y=function L(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=B(P);if(y){var I=B(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return b(this,A)}}function b(P,y){if(y&&("object"===R(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}w.default=function(P){u(S,P);var y=_(S);function S(){!function h(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S);var E=[C.default.SEGMENT_BASE,C.default.SEGMENT_TEMPLATE,C.default.SEGMENT_LIST];return y.call(this,C.default.PERIOD,E,[new e.default(C.default.ADAPTATION_SET,E,[new e.default(C.default.REPRESENTATION,E)])])}return function j(P,y,S){return y&&U(P.prototype,y),S&&U(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(e.default)},"./src/dash/parser/matchers/BaseMatcher.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u,p){(function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this._test=u,this._converter=p}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),h}()},"./src/dash/parser/matchers/DateTimeMatcher.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/matchers/BaseMatcher.js");function C(E){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}function R(E,A){for(var I=0;I<A.length;I++){var H=A[I];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(E,j(H.key),H)}}function j(E){var A=function F(E,A){if("object"!==C(E)||null===E)return E;var I=E[Symbol.toPrimitive];if(void 0!==I){var H=I.call(E,A||"default");if("object"!==C(H))return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(E)}(E,"string");return"symbol"===C(A)?A:String(A)}function h(E,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),A&&u(E,A)}function u(E,A){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,ee){return H.__proto__=ee,H})(E,A)}function p(E){var A=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var ee,H=L(E);if(A){var fe=L(this).constructor;ee=Reflect.construct(H,arguments,fe)}else ee=H.apply(this,arguments);return _(this,ee)}}function _(E,A){if(A&&("object"===C(A)||"function"==typeof A))return A;if(void 0!==A)throw new TypeError("Derived constructors may only return object or undefined");return function b(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(E)}function L(E){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)})(E)}var y=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;w.default=function(E){h(I,E);var A=p(I);function I(){return function D(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),A.call(this,function(H){return y.test(H.value)},function(H){var fe,ee=y.exec(H);if(fe=Date.UTC(parseInt(ee[1],10),parseInt(ee[2],10)-1,parseInt(ee[3],10),parseInt(ee[4],10),parseInt(ee[5],10),ee[6]&&parseInt(ee[6],10)||0,ee[7]&&1e3*parseFloat(ee[7])||0),ee[9]&&ee[10]){var ue=60*parseInt(ee[9],10)+parseInt(ee[10],10);fe+=("+"===ee[8]?-1:1)*ue*60*1e3}return new Date(fe)})}return function U(E,A,I){return A&&R(E.prototype,A),I&&R(E,I),Object.defineProperty(E,"prototype",{writable:!1}),E}(I)}(e.default)},"./src/dash/parser/matchers/DurationMatcher.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/matchers/BaseMatcher.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/dash/constants/DashConstants.js");function U(ee){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(fe){return typeof fe}:function(fe){return fe&&"function"==typeof Symbol&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(ee)}function j(ee,fe){for(var ue=0;ue<fe.length;ue++){var be=fe[ue];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(ee,D(be.key),be)}}function D(ee){var fe=function h(ee,fe){if("object"!==U(ee)||null===ee)return ee;var ue=ee[Symbol.toPrimitive];if(void 0!==ue){var be=ue.call(ee,fe||"default");if("object"!==U(be))return be;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===fe?String:Number)(ee)}(ee,"string");return"symbol"===U(fe)?fe:String(fe)}function p(ee,fe){if("function"!=typeof fe&&null!==fe)throw new TypeError("Super expression must either be null or a function");ee.prototype=Object.create(fe&&fe.prototype,{constructor:{value:ee,writable:!0,configurable:!0}}),Object.defineProperty(ee,"prototype",{writable:!1}),fe&&_(ee,fe)}function _(ee,fe){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(be,q){return be.__proto__=q,be})(ee,fe)}function b(ee){var fe=function B(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(ee){return!1}}();return function(){var q,be=O(ee);if(fe){var se=O(this).constructor;q=Reflect.construct(be,arguments,se)}else q=be.apply(this,arguments);return k(this,q)}}function k(ee,fe){if(fe&&("object"===U(fe)||"function"==typeof fe))return fe;if(void 0!==fe)throw new TypeError("Derived constructors may only return object or undefined");return function L(ee){if(void 0===ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ee}(ee)}function O(ee){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ue){return ue.__proto__||Object.getPrototypeOf(ue)})(ee)}var P=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;w.default=function(ee){p(ue,ee);var fe=b(ue);function ue(){return function u(ee,fe){if(!(ee instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,ue),fe.call(this,function(be){for(var q=[R.default.MIN_BUFFER_TIME,R.default.MEDIA_PRESENTATION_DURATION,R.default.MINIMUM_UPDATE_PERIOD,R.default.TIMESHIFT_BUFFER_DEPTH,R.default.MAX_SEGMENT_DURATION,R.default.MAX_SUBSEGMENT_DURATION,R.default.SUGGESTED_PRESENTATION_DELAY,R.default.START,C.default.START_TIME,R.default.DURATION],se=q.length,V=0;V<se;V++)if(be.nodeName===q[V])return P.test(be.value);return!1},function(be){var q=P.exec(be),se=31536e3*parseFloat(q[3]||0)+2592e3*parseFloat(q[5]||0)+86400*parseFloat(q[7]||0)+3600*parseFloat(q[9]||0)+60*parseFloat(q[11]||0)+parseFloat(q[13]||0);return void 0!==q[1]&&(se=-se),se})}return function F(ee,fe,ue){return fe&&j(ee.prototype,fe),ue&&j(ee,ue),Object.defineProperty(ee,"prototype",{writable:!1}),ee}(ue)}(e.default)},"./src/dash/parser/matchers/LangMatcher.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/matchers/BaseMatcher.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./node_modules/bcp-47-normalize/index.js"),U=i.n(R);function j(E){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(A){return typeof A}:function(A){return A&&"function"==typeof Symbol&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A})(E)}function F(E,A,I){return(A=u(A))in E?Object.defineProperty(E,A,{value:I,enumerable:!0,configurable:!0,writable:!0}):E[A]=I,E}function D(E,A){for(var I=0;I<A.length;I++){var H=A[I];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(E,u(H.key),H)}}function u(E){var A=function p(E,A){if("object"!==j(E)||null===E)return E;var I=E[Symbol.toPrimitive];if(void 0!==I){var H=I.call(E,A||"default");if("object"!==j(H))return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===A?String:Number)(E)}(E,"string");return"symbol"===j(A)?A:String(A)}function b(E,A){if("function"!=typeof A&&null!==A)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),Object.defineProperty(E,"prototype",{writable:!1}),A&&k(E,A)}function k(E,A){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,ee){return H.__proto__=ee,H})(E,A)}function L(E){var A=function P(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(E){return!1}}();return function(){var ee,H=y(E);if(A){var fe=y(this).constructor;ee=Reflect.construct(H,arguments,fe)}else ee=H.apply(this,arguments);return B(this,ee)}}function B(E,A){if(A&&("object"===j(A)||"function"==typeof A))return A;if(void 0!==A)throw new TypeError("Derived constructors may only return object or undefined");return function O(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(E)}function y(E){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)})(E)}w.default=function(E){b(I,E);var A=L(I);function I(){return function _(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}(this,I),A.call(this,function(H,ee){var fe,ue=(F(fe={},C.default.ADAPTATION_SET,[C.default.LANG]),F(fe,C.default.REPRESENTATION,[C.default.LANG]),F(fe,C.default.CONTENT_COMPONENT,[C.default.LANG]),F(fe,C.default.LABEL,[C.default.LANG]),F(fe,C.default.GROUP_LABEL,[C.default.LANG]),fe);if(ue.hasOwnProperty(ee)){var be=ue[ee];return void 0!==be&&be.indexOf(H.name)>=0}return!1},function(H){var ee=U()(H);return void 0!==ee?ee:String(H)})}return function h(E,A,I){return A&&D(E.prototype,A),I&&D(E,I),Object.defineProperty(E,"prototype",{writable:!1}),E}(I)}(e.default)},"./src/dash/parser/matchers/NumericMatcher.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/matchers/BaseMatcher.js");function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}var B=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/;w.default=function(P){h(S,P);var y=p(S);function S(){return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),y.call(this,function(E){return B.test(E.value)},function(E){return parseFloat(E)})}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(e.default)},"./src/dash/parser/matchers/StringMatcher.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/parser/matchers/BaseMatcher.js"),C=i("./src/dash/constants/DashConstants.js");function R(y){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(S){return typeof S}:function(S){return S&&"function"==typeof Symbol&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S})(y)}function U(y,S,E){return(S=D(S))in y?Object.defineProperty(y,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[S]=E,y}function j(y,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(y,D(A.key),A)}}function D(y){var S=function h(y,S){if("object"!==R(y)||null===y)return y;var E=y[Symbol.toPrimitive];if(void 0!==E){var A=E.call(y,S||"default");if("object"!==R(A))return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===S?String:Number)(y)}(y,"string");return"symbol"===R(S)?S:String(S)}function p(y,S){if("function"!=typeof S&&null!==S)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(S&&S.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),Object.defineProperty(y,"prototype",{writable:!1}),S&&_(y,S)}function _(y,S){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,I){return A.__proto__=I,A})(y,S)}function b(y){var S=function B(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(y){return!1}}();return function(){var I,A=O(y);if(S){var H=O(this).constructor;I=Reflect.construct(A,arguments,H)}else I=A.apply(this,arguments);return k(this,I)}}function k(y,S){if(S&&("object"===R(S)||"function"==typeof S))return S;if(void 0!==S)throw new TypeError("Derived constructors may only return object or undefined");return function L(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}(y)}function O(y){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)})(y)}w.default=function(y){p(E,y);var S=b(E);function E(){return function u(y,S){if(!(y instanceof S))throw new TypeError("Cannot call a class as a function")}(this,E),S.call(this,function(A,I){var H,ee=(U(H={},C.default.MPD,[C.default.ID,C.default.PROFILES]),U(H,C.default.PERIOD,[C.default.ID]),U(H,C.default.BASE_URL,[C.default.SERVICE_LOCATION,C.default.BYTE_RANGE]),U(H,C.default.SEGMENT_BASE,[C.default.INDEX_RANGE]),U(H,C.default.INITIALIZATION,[C.default.RANGE]),U(H,C.default.REPRESENTATION_INDEX,[C.default.RANGE]),U(H,C.default.SEGMENT_LIST,[C.default.INDEX_RANGE]),U(H,C.default.BITSTREAM_SWITCHING,[C.default.RANGE]),U(H,C.default.SEGMENT_URL,[C.default.MEDIA_RANGE,C.default.INDEX_RANGE]),U(H,C.default.SEGMENT_TEMPLATE,[C.default.INDEX_RANGE,C.default.MEDIA,C.default.INDEX,C.default.INITIALIZATION_MINUS,C.default.BITSTREAM_SWITCHING_MINUS]),U(H,C.default.ASSET_IDENTIFIER,[C.default.VALUE,C.default.ID]),U(H,C.default.EVENT_STREAM,[C.default.VALUE]),U(H,C.default.ADAPTATION_SET,[C.default.PROFILES,C.default.MIME_TYPE,C.default.SEGMENT_PROFILES,C.default.CODECS,C.default.CONTENT_TYPE]),U(H,C.default.FRAME_PACKING,[C.default.VALUE,C.default.ID]),U(H,C.default.AUDIO_CHANNEL_CONFIGURATION,[C.default.VALUE,C.default.ID]),U(H,C.default.CONTENT_PROTECTION,[C.default.VALUE,C.default.ID]),U(H,C.default.ESSENTIAL_PROPERTY,[C.default.VALUE,C.default.ID]),U(H,C.default.SUPPLEMENTAL_PROPERTY,[C.default.VALUE,C.default.ID]),U(H,C.default.INBAND_EVENT_STREAM,[C.default.VALUE,C.default.ID]),U(H,C.default.ACCESSIBILITY,[C.default.VALUE,C.default.ID]),U(H,C.default.ROLE,[C.default.VALUE,C.default.ID]),U(H,C.default.RATING,[C.default.VALUE,C.default.ID]),U(H,C.default.VIEWPOINT,[C.default.VALUE,C.default.ID]),U(H,C.default.CONTENT_COMPONENT,[C.default.CONTENT_TYPE]),U(H,C.default.REPRESENTATION,[C.default.ID,C.default.DEPENDENCY_ID,C.default.MEDIA_STREAM_STRUCTURE_ID]),U(H,C.default.SUBSET,[C.default.ID]),U(H,C.default.METRICS,[C.default.METRICS_MINUS]),U(H,C.default.REPORTING,[C.default.VALUE,C.default.ID]),H);if(ee.hasOwnProperty(I)){var fe=ee[I];return void 0!==fe&&fe.indexOf(A.name)>=0}return!1},function(A){return String(A)})}return function F(y,S,E){return S&&j(y.prototype,S),E&&j(y,E),Object.defineProperty(y,"prototype",{writable:!1}),y}(E)}(e.default)},"./src/dash/parser/objectiron.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(j){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(F){return typeof F}:function(F){return F&&"function"==typeof Symbol&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F})(j)}function R(j){function F(p,_){for(var b in p)_.hasOwnProperty(b)||(_[b]=p[b])}function D(p,_,b){for(var k=0,L=p.length;k<L;++k){var B=p[k];if(_[B.name])if(b[B.name]){if(B.merge){var O=_[B.name],P=b[B.name];"object"===C(O)&&"object"===C(P)?F(O,P):b[B.name]=O+P}}else b[B.name]=_[B.name]}}function h(p,_){for(var b=0,k=p.children.length;b<k;++b){var L=p.children[b],B=_[L.name+"_asArray"];if(B)for(var O=0,P=B.length;O<P;++O){var y=B[O];D(p.properties,_,y),h(L,y)}}}return{run:function u(p){if(null===p||"object"!==C(p))return p;if(p.Period_asArray&&"period"in j)for(var _=j.period,b=p.Period_asArray,k=0,L=b.length;k<L;++k){var B=b[k];if(h(_,B),"adaptationset"in j){var O=B.AdaptationSet_asArray;if(O)for(var P=j.adaptationset,y=0,S=O.length;y<S;++y)h(P,O[y])}}return p}}}R.__dashjs_factory_name="ObjectIron";var U=e.default.getClassFactory(R);w.default=U},"./src/dash/utils/ListSegmentsGetter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/dash/utils/SegmentsUtils.js");function U(F,D){var h=(F=F||{}).timelineConverter;function p(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.default.MISSING_CONFIG_ERROR)}function b(L,B){if(p(),!L)return null;var O=L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentList,P=O.SegmentURL_asArray.length,y=L&&!isNaN(L.startNumber)?L.startNumber:1,S=Math.max(y-1,0),E=Math.max(B-S,0),A=null;if(E<P){var I=O.SegmentURL_asArray[E];(A=Object(R.getIndexBasedSegment)(h,D,L,B))&&(A.replacementTime=(y+B-1)*L.segmentDuration,A.media=I.media?I.media:"",A.mediaRange=I.mediaRange,A.indexRange=I.indexRange)}return A}return{getSegmentByIndex:b,getSegmentByTime:function k(L,B){if(p(),!L)return null;var O=L.segmentDuration;if(isNaN(O))return null;var P=h.calcPeriodRelativeTimeFromMpdRelativeTime(L,B);return b(L,Math.floor(P/O))},getMediaFinishedInformation:function _(L){var B={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!L)return B;var O=L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentList,P=L&&!isNaN(L.startNumber)?L.startNumber:1,y=Math.max(P-1,0);return B.numberOfSegments=y+O.SegmentURL_asArray.length,B}}}U.__dashjs_factory_name="ListSegmentsGetter";var j=e.default.getClassFactory(U);w.default=j},"./src/dash/utils/Round10.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w),i.d(w,"default",function(){return D});var D=function(){function u(){!function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,u)}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,null,[{key:"round10",value:function(_,b){return function h(u,p,_){return void 0===_||0==+_?Math[u](p):(_=+_,null===(p=+p)||isNaN(p)||"number"!=typeof _||_%1!=0?NaN:(p=p.toString().split("e"),+((p=(p=Math[u](+(p[0]+"e"+(p[1]?+p[1]-_:-_)))).toString().split("e"))[0]+"e"+(p[1]?+p[1]+_:_))))}("round",_,b)}}]),u}()},"./src/dash/utils/SegmentBaseGetter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/constants/Constants.js");function R(j){var F=(j=j||{}).timelineConverter;function h(){if(!F||!F.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.default.MISSING_CONFIG_ERROR)}function p(k,L){if(h(),!k)return null;var O,B=k.segments?k.segments.length:-1;if(L<B&&(O=k.segments[L])&&O.index===L)return O;for(var P=0;P<B;P++)if((O=k.segments[P])&&O.index===L)return O;return null}return{getSegmentByIndex:p,getSegmentByTime:function _(k,L){return h(),p(k,function b(k,L){if(!k)return-1;var y,S,E,A,I,B=k.segments,O=B?B.length:null,P=-1;if(B&&O>0)for(I=0;I<O;I++)if(L+(y=(A=(S=B[I]).duration)/2)>=(E=S.presentationStartTime)&&L-y<E+A){P=S.index;break}return P}(k,L))},getMediaFinishedInformation:function u(k){var L={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return!k||!k.segments||(L.numberOfSegments=k.segments.length),L}}}R.__dashjs_factory_name="SegmentBaseGetter";var U=e.default.getClassFactory(R);w.default=U},"./src/dash/utils/SegmentsUtils.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"unescapeDollarsInTemplate",function(){return U}),i.d(w,"replaceIDForTemplate",function(){return j}),i.d(w,"replaceTokenForTemplate",function(){return F}),i.d(w,"getIndexBasedSegment",function(){return u}),i.d(w,"getTimeBasedSegment",function(){return p});var e=i("./src/dash/vo/Segment.js");function C(_,b){for(;_.length<b;)_="0"+_;return _}function U(_){return _&&_.split("$$").join("$")}function j(_,b){if(!b||!_||-1===_.indexOf("$RepresentationID$"))return _;var k=b.toString();return _.split("$RepresentationID$").join(k)}function F(_,b,k){var B,O,P,y,S,E,A=b.length,I="%0".length;if(!_)return _;for(;;){if((B=_.indexOf("$"+b))<0||(O=_.indexOf("$",B+A))<0)return _;if((P=_.indexOf("%0",B+A))>B&&P<O)switch(y=_.charAt(O-1),S=parseInt(_.substring(P+I,O-1),10),y){case"d":case"i":case"u":E=C(k.toString(),S);break;case"x":E=C(k.toString(16),S);break;case"X":E=C(k.toString(16),S).toUpperCase();break;case"o":E=C(k.toString(8),S);break;default:return _}else E=k;_=_.substring(0,B)+E+_.substring(O+1)}}function D(_,b,k,L,B,O,P,y){var S=new e.default;return S.representation=_,S.duration=b,S.presentationStartTime=k,S.mediaStartTime=L,S.availabilityStartTime=B.calcAvailabilityStartTimeFromPresentationTime(O,_,P),S.availabilityEndTime=B.calcAvailabilityEndTimeFromPresentationTime(O+b,_,P),S.wallStartTime=B.calcWallTimeForSegment(S,P),S.replacementNumber=function R(_,b){return _.representation.startNumber+b}(S,y),S.index=y,S}function h(_,b,k,L){var B=b.adaptation.period;if(isFinite(B.duration)&&B.start+B.duration<=k.presentationStartTime)return!1;if(L){if("INF"===b.availabilityTimeOffset)return!0;var O=_.getClientReferenceTime();return k.availabilityStartTime.getTime()<=O&&(!isFinite(k.availabilityEndTime)||k.availabilityEndTime.getTime()>=O)}return!0}function u(_,b,k,L){var B,O,P;B=k.segmentDuration,isNaN(B)&&(B=k.adaptation.period.duration),O=parseFloat((k.adaptation.period.start+L*B).toFixed(5)),P=parseFloat((O+B).toFixed(5));var S=D(k,B,O,_.calcMediaTimeFromPresentationTime(O,k),_,P,b,L);return h(_,k,S,b)?S:null}function p(_,b,k,L,B,O,P,y,S,E){var H,fe,A=L/O,I=B/O;return H=_.calcPresentationTimeFromMediaTime(A,k),h(_,k,fe=D(k,I,H,A,_,H+I,b,S),b)?(fe.replacementTime=E||L,P=F(P,"Number",fe.replacementNumber),P=F(P,"Time",fe.replacementTime),fe.media=P,fe.mediaRange=y,fe):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/dash/utils/SegmentsUtils.js");function U(F,D){var h=(F=F||{}).timelineConverter;function p(){if(!h||!h.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(C.default.MISSING_CONFIG_ERROR)}function b(L,B){if(p(),!L)return null;var O=L.adaptation.period.mpd.manifest.Period_asArray[L.adaptation.period.index].AdaptationSet_asArray[L.adaptation.index].Representation_asArray[L.index].SegmentTemplate;B=Math.max(B,0);var P=Object(R.getIndexBasedSegment)(h,D,L,B);if(P){P.replacementTime=Math.round((B-1)*L.segmentDuration*L.timescale,10);var y=O.media;y=Object(R.replaceTokenForTemplate)(y,"Number",P.replacementNumber),y=Object(R.replaceTokenForTemplate)(y,"Time",P.replacementTime),P.media=y}return P}return{getSegmentByIndex:b,getSegmentByTime:function k(L,B){if(p(),!L)return null;var O=L.segmentDuration;if(isNaN(O))return null;var P=h.calcPeriodRelativeTimeFromMpdRelativeTime(L,B);return b(L,Math.floor(P/O))},getMediaFinishedInformation:function _(L){var B={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!L)return B;var O=L.segmentDuration;return B.numberOfSegments=isNaN(O)?1:Math.ceil(L.adaptation.period.duration/O),B}}}U.__dashjs_factory_name="TemplateSegmentsGetter";var j=e.default.getClassFactory(U);w.default=j},"./src/dash/utils/TimelineConverter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/dash/constants/DashConstants.js"),j=i("./src/dash/models/DashManifestModel.js"),F=i("./src/core/Settings.js"),D=i("./src/streaming/constants/Constants.js"),h=i("./src/streaming/MediaPlayerEvents.js"),u=i("./src/streaming/constants/ConformanceViolationConstants.js");function p(){var L,B,O,P,_=this.context,b=Object(e.default)(_).getInstance(),k=Object(F.default)(_).getInstance();function A(Fe){P=Fe}function H(Fe,je,Pe,He){var Le,ye=je.adaptation.period.mpd,ae=ye.availabilityStartTime;if(He)Le=Pe&&ye.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(ae.getTime()+1e3*(Fe+ye.timeShiftBufferDepth)):ye.availabilityEndTime;else if(Pe){var W=je.availabilityTimeOffset;Le=new Date(ae.getTime()+1e3*(Fe-W))}else Le=ae;return Le}function ue(Fe,je){return(Fe.getTime()-je.mpd.availabilityStartTime.getTime()+1e3*P)/1e3}function be(Fe,je){return Fe+(je.adaptation.period.start-je.presentationTimeOffset)}function pe(Fe){var je={start:NaN,end:NaN},Pe=Fe[0].getAdapter().getRegularPeriods()[0],He=ue(new Date,Pe);if(!Fe||0===Fe.length)return{range:je,now:He};Fe.forEach(function(ye){var ae=ye.getAdapter(),W=ae.getMediaInfoForType(ye.getStreamInfo(),D.default.VIDEO)||ae.getMediaInfoForType(ye.getStreamInfo(),D.default.AUDIO),De=ae.getVoRepresentations(W)[0],le={start:NaN,end:NaN};if(De)if(De.segmentInfoType===U.default.SEGMENT_TIMELINE)le=function _e(Fe){var ce,De,le,ne,Pe=B.getRepresentationFor(Fe.index,Fe.adaptation.period.mpd.manifest.Period_asArray[Fe.adaptation.period.index].AdaptationSet_asArray[Fe.adaptation.index]),Le=Pe.SegmentTemplate.timescale,ye=Pe.SegmentTemplate.SegmentTimeline.S_asArray,ae={start:0,end:0},W=0;for(ae.start=be(ye[0].t/Le,Fe),le=0,ne=ye.length;le<ne;le++)De=0,(ce=ye[le]).hasOwnProperty("r")&&(De=ce.r),W+=ce.d*(1+De);return ae.end=be((ye[0].t+W)/Le,Fe),ae}(De);else{var ne=De.adaptation.period;le.start=ne.start,le.end=Math.max(He,ne.start+ne.duration)}!isNaN(le.start)&&(isNaN(je.start)||je.start>le.start)&&(je.start=le.start),!isNaN(le.end)&&(isNaN(je.end)||je.end<le.end)&&(je.end=le.end)}),je.end=Math.min(He,je.end);var Le=xe(Fe,je.end,!0);return je.end=isNaN(Le)?je.end:Le,je.start=Pe&&Pe.mpd&&Pe.mpd.timeShiftBufferDepth&&!isNaN(Pe.mpd.timeShiftBufferDepth)&&!isNaN(je.end)?Math.max(je.end-Pe.mpd.timeShiftBufferDepth,je.start):je.start,je.start=xe(Fe,je.start),{range:je,now:He}}function me(Fe,je){O=Fe-je.end}function xe(Fe,je){var Pe=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var He=0,Le=!1,ye=NaN;!Le&&He<Fe.length;){var ae=Fe[He].getStreamInfo();ae.start<=je&&(!isFinite(ae.duration)||ae.start+ae.duration>=je)?(ye=je,Le=!0):!Pe&&ae.start>je&&(isNaN(ye)||ae.start<ye)?ye=ae.start:Pe&&ae.start+ae.duration<je&&(isNaN(ye)||ae.start+ae.duration>ye)&&(ye=ae.start+ae.duration),He+=1}return ye}catch(W){return je}}function Te(Fe){void 0!==Fe.offset&&!isNaN(Fe.offset)&&A(Fe.offset/1e3)}function ke(){P=0,O=0}function Ue(){b.off(C.default.UPDATE_TIME_SYNC_OFFSET,Te,this),ke()}return L={initialize:function S(){ke(),b.on(C.default.UPDATE_TIME_SYNC_OFFSET,Te,this)},getClientTimeOffset:function E(){return P},setClientTimeOffset:A,getClientReferenceTime:function I(){return Date.now()-1e3*O+1e3*P},calcAvailabilityStartTimeFromPresentationTime:function ee(Fe,je,Pe){return H(Fe,je,Pe)},calcAvailabilityEndTimeFromPresentationTime:function fe(Fe,je,Pe){return H(Fe,je,Pe,!0)},calcPresentationTimeFromWallTime:ue,calcPresentationTimeFromMediaTime:be,calcPeriodRelativeTimeFromMpdRelativeTime:function Ie(Fe,je){return je-Fe.adaptation.period.start},calcMediaTimeFromPresentationTime:function q(Fe,je){return Fe-je.adaptation.period.start+je.presentationTimeOffset},calcWallTimeForSegment:function se(Fe,je){var He,Le;return je&&(He=Fe.presentationStartTime+Fe.representation.adaptation.period.mpd.suggestedPresentationDelay,Le=new Date(Fe.availabilityStartTime.getTime()+1e3*He)),Le},calcTimeShiftBufferWindow:function V(Fe,je){if(!je)return function de(Fe){var je={start:NaN,end:NaN},Pe=0,He=NaN;return Fe.forEach(function(Le){var ye=Le.getStreamInfo();Pe+=ye.duration,(isNaN(He)||ye.start<He)&&(He=ye.start)}),je.start=He,je.end=He+Pe,je}(Fe);if(k.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Pe=pe(Fe);return me(Pe.now,Pe.range),Pe.range}return function Q(Fe){var je={start:NaN,end:NaN};if(!Fe||0===Fe.length)return je;var Pe=Fe[0].getAdapter().getRegularPeriods()[0],He=ue(new Date,Pe),Le=Pe.mpd.timeShiftBufferDepth,ye=isNaN(Le)?0:He-Le;if(je.start=xe(Fe,ye),je.end=!isNaN(je.start)&&He<je.start?He:xe(Fe,He,!0),!isNaN(Le)&&je.end<He-Le&&(je.end=NaN),k.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var ae=pe(Fe);if(ae.range.end<je.start)return b.trigger(h.default.CONFORMANCE_VIOLATION,{level:u.default.LEVELS.WARNING,event:u.default.EVENTS.INVALID_DVR_WINDOW}),me(ae.now,ae.range),ae.range}return je}(Fe)},reset:Ue},function y(){B=Object(j.default)(_).getInstance(),Ue()}(),L}p.__dashjs_factory_name="TimelineConverter",w.default=R.default.getSingletonFactory(p)},"./src/dash/utils/TimelineSegmentsGetter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/dash/utils/SegmentsUtils.js");function U(F,D){var h=(F=F||{}).timelineConverter,u=F.dashMetrics;function _(){if(!h)throw new Error(C.default.MISSING_CONFIG_ERROR)}function k(y,S){var fe,ue,be,q,se,V,de,E=y.adaptation.period.mpd.manifest.Period_asArray[y.adaptation.period.index].AdaptationSet_asArray[y.adaptation.index].Representation_asArray[y.index].SegmentTemplate||y.adaptation.period.mpd.manifest.Period_asArray[y.adaptation.period.index].AdaptationSet_asArray[y.adaptation.index].Representation_asArray[y.index].SegmentList,I=E.SegmentURL_asArray,H=0,ee=-1;de=y.timescale;var Q=!1;for(be=0,q=(fe=E.SegmentTimeline.S_asArray).length;be<q&&!Q;be++)for(V=0,(ue=fe[be]).hasOwnProperty("r")&&(V=ue.r),ue.hasOwnProperty("t")&&(H=ue.t),V<0&&(V=L(y,fe[be+1],ue,de,H/de)),se=0;se<=V&&!Q;se++)(Q=S(H,E,I,ue,de,++ee,be))&&(y.segmentDuration=ue.d/de),H+=ue.d}function L(y,S,E,A,I){var H;if(S&&S.hasOwnProperty("t"))H=S.t/A;else try{var ee=0;if(isNaN(y.adaptation.period.start)||isNaN(y.adaptation.period.duration)||!isFinite(y.adaptation.period.duration)){var fe=u.getCurrentDVRInfo();ee=isNaN(fe.end)?0:fe.end}else ee=y.adaptation.period.start+y.adaptation.period.duration;H=h.calcMediaTimeFromPresentationTime(ee,y),y.segmentDuration=E.d/A}catch(ue){H=0}return Math.max(Math.ceil((H-I)/(E.d/A))-1,0)}return{getSegmentByIndex:function B(y,S,E){if(_(),!y)return null;var A=null,I=!1;return k(y,function(H,ee,fe,ue,be,q,se){if(I||E<0){var V=ee.media,de=ue.mediaRange;return fe&&(V=fe[se].media||"",de=fe[se].mediaRange),A=Object(R.getTimeBasedSegment)(h,D,y,H,ue.d,be,V,de,q,ue.tManifest),!0}return H>=E*be-.5*ue.d&&(I=!0),!1}),A},getSegmentByTime:function O(y,S){if(_(),!y)return null;void 0===S&&(S=null);var E=null,A=h.calcMediaTimeFromPresentationTime(S,y);return k(y,function(I,H,ee,fe,ue,be,q){var se=function P(y){return parseFloat(y.toPrecision(15))}(A*ue);if(se<I+fe.d&&se>=I){var V=H.media,de=fe.mediaRange;return ee&&(V=ee[q].media||"",de=ee[q].mediaRange),E=Object(R.getTimeBasedSegment)(h,D,y,I,fe.d,ue,V,de,be,fe.tManifest),!0}return!1}),E},getMediaFinishedInformation:function b(y){if(!y)return 0;var ee,fe,ue,be,q,se,V,A=0,I=0,H=0;for(V=y.timescale,be=(ee=(y.adaptation.period.mpd.manifest.Period_asArray[y.adaptation.period.index].AdaptationSet_asArray[y.adaptation.index].Representation_asArray[y.index].SegmentTemplate||y.adaptation.period.mpd.manifest.Period_asArray[y.adaptation.period.index].AdaptationSet_asArray[y.adaptation.index].Representation_asArray[y.index].SegmentList).SegmentTimeline.S_asArray).length,ue=0;ue<be;ue++)for(se=0,(fe=ee[ue]).hasOwnProperty("r")&&(se=fe.r),fe.hasOwnProperty("t")&&(I=(A=fe.t)/V),se<0&&(se=L(y,ee[ue+1],fe,V,I)),q=0;q<=se;q++)H++,I=(A+=fe.d)/V;return{numberOfSegments:H,mediaTimeOfLastSignaledSegment:I}}}}U.__dashjs_factory_name="TimelineSegmentsGetter";var j=e.default.getClassFactory(U);w.default=j},"./src/dash/vo/AdaptationSet.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.period=null,this.index=-1,this.type=null})},"./src/dash/vo/BaseURL.js":function(Ge,w,i){"use strict";function e(p){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function C(p,_){for(var b=0;b<_.length;b++){var k=_[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,U(k.key),k)}}function R(p,_,b){return _&&C(p.prototype,_),b&&C(p,b),Object.defineProperty(p,"prototype",{writable:!1}),p}function U(p){var _=function j(p,_){if("object"!==e(p)||null===p)return p;var b=p[Symbol.toPrimitive];if(void 0!==b){var k=b.call(p,_||"default");if("object"!==e(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(p)}(p,"string");return"symbol"===e(_)?_:String(_)}i.r(w);var u=R(function p(_,b,k,L){(function F(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")})(this,p),this.url=_||"",this.serviceLocation=b||_||"",this.dvb_priority=k||1,this.dvb_weight=L||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0});u.DEFAULT_DVB_PRIORITY=1,u.DEFAULT_DVB_WEIGHT=1,w.default=u},"./src/dash/vo/ContentSteering.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.defaultServiceLocation=null,this.queryBeforeStart=!1,this.proxyServerUrl=null,this.serverUrl=null})},"./src/dash/vo/ContentSteeringRequest.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/metrics/HTTPRequest.js");function C(u){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}function j(u){var p=function F(u,p){if("object"!==C(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==C(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===C(p)?p:String(p)}w.default=U(function u(p){(function D(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.url=p||null,this.type=e.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"})},"./src/dash/vo/ContentSteeringResponse.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.version=null,this.ttl=300,this.reloadUri=null,this.serviceLocationPriority=[]})},"./src/dash/vo/Event.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN})},"./src/dash/vo/EventStream.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0})},"./src/dash/vo/ManifestInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null})},"./src/dash/vo/MediaInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={}})},"./src/dash/vo/Mpd.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN})},"./src/dash/vo/PatchOperation.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u,p,_){(function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.action=u,this.xpath=p,this.value=_,this.position=null}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"getMpdTarget",value:function(p){return this.xpath.getMpdTarget(p,"remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position)}}]),h}()},"./src/dash/vo/Period.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w);var D=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null});D.DEFAULT_ID="defaultId",w.default=D},"./src/dash/vo/ProducerReferenceTime.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null})},"./src/dash/vo/Representation.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/constants/DashConstants.js");function C(u){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function U(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,F(b.key),b)}}function F(u){var p=function D(u,p){if("object"!==C(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==C(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===C(p)?p:String(p)}w.default=function(){function u(){(function R(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return function j(u,p,_){return p&&U(u.prototype,p),_&&U(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==e.default.BASE_URL&&this.segmentInfoType!==e.default.SEGMENT_BASE&&!this.indexRange}}]),u}()},"./src/dash/vo/RepresentationInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null})},"./src/dash/vo/Segment.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null})},"./src/dash/vo/SimpleXPath.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u){var p=this;(function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.valid="/"==u[0],this.path=u.split("/").filter(function(_){return 0!==_.length}).map(function(_){var b={name:_},k=_.indexOf("[");if(-1!=k){b.name=_.substring(0,k);var L=_.substring(k+1,_.length-1);p.valid=p.valid&&-1==L.indexOf("[");var B=L.indexOf("=");-1!=B?(b.attribute={name:L.substring(1,B),value:L.substring(B+1)},-1!=["'",'"'].indexOf(b.attribute.value[0])&&(b.attribute.value=b.attribute.value.substring(1,b.attribute.value.length-1))):b.position=parseInt(L,10)-1}return b})}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(p,_){for(var b=null,k=p,L=1,B="MPD";L<this.path.length&&null!==k;){b=k;var O=this.path[L];if(B=O.name,L!==this.path.length-1||!B.startsWith("@")){var P=b[B+"_asArray"]||[];0===P.length&&b[B]&&P.push(b[B]),O.position?k=P[O.position]||null:O.attribute?function(){var y=O.attribute;k=P.filter(function(S){return S[y.name]==y.value})[0]||null}():k=P[0]||null}L++}return null===k?null:B.startsWith("@")?{name:B.substring(1),leaf:k,target:k}:{name:B,leaf:k,target:_?b:k}}}]),h}()},"./src/dash/vo/StreamInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0})},"./src/dash/vo/UTCTiming.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.schemeIdUri="",this.value=""})},"./src/streaming/FragmentLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/net/URLLoader.js"),R=i("./src/streaming/vo/HeadRequest.js"),U=i("./src/streaming/vo/DashJSError.js"),j=i("./src/core/FactoryMaker.js");function F(D){var L,B,h=this.context,u=(D=D||{}).eventBus,p=D.events,_=D.urlUtils,b=D.errors,k=D.streamId;return L={checkForExistence:function P(A){var I=function(fe){u.trigger(p.CHECK_FOR_EXISTENCE_COMPLETED,{request:A,exists:fe})};if(A){var H=new R.default(A.url);B.load({request:H,success:function(){I(!0)},error:function(){I(!1)}})}else I(!1)},load:function y(A){var I=function(ee,fe){u.trigger(p.LOADING_COMPLETED,{request:A,response:ee||null,error:fe||null,sender:L})};A?B.load({request:A,progress:function(ee){u.trigger(p.LOADING_PROGRESS,{request:A,stream:ee.stream,streamId:k}),ee.data&&u.trigger(p.LOADING_DATA_PROGRESS,{request:A,response:ee.data||null,error:null,sender:L})},success:function(ee){I(ee)},error:function(ee,fe,ue){I(void 0,new U.default(b.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,ue,fe))},abort:function(ee){ee&&u.trigger(p.LOADING_ABANDONED,{mediaType:ee.mediaType,request:ee,sender:L})}}):I(void 0,new U.default(b.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,b.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function S(){B&&B.abort()},reset:function E(){B&&(B.abort(),B=null)}},function O(){B=Object(C.default)(h).create({errHandler:D.errHandler,errors:b,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,requestModifier:D.requestModifier,urlUtils:_,constants:e.default,boxParser:D.boxParser,dashConstants:D.dashConstants,requestTimeout:D.settings.get().streaming.fragmentRequestTimeout})}(),L}F.__dashjs_factory_name="FragmentLoader",w.default=j.default.getClassFactory(F)},"./src/streaming/ManifestLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./src/streaming/controllers/XlinkController.js"),U=i("./src/streaming/net/URLLoader.js"),j=i("./src/streaming/utils/URLUtils.js"),F=i("./src/streaming/vo/TextRequest.js"),D=i("./src/streaming/vo/DashJSError.js"),h=i("./src/streaming/vo/metrics/HTTPRequest.js"),u=i("./src/core/EventBus.js"),p=i("./src/core/events/Events.js"),_=i("./src/core/errors/Errors.js"),b=i("./src/core/FactoryMaker.js"),k=i("./src/dash/parser/DashParser.js");function L(O){var I,H,ee,fe,ue,P=this.context,y=(O=O||{}).debug,S=O.settings,E=Object(u.default)(P).getInstance(),A=Object(j.default)(P).getInstance(),be=O.mssHandler,q=O.errHandler;function V(me){E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:me.manifest})}return I={load:function Q(me){var xe=new F.default(me,h.HTTPRequest.MPD_TYPE);ee.load({request:xe,success:function(Ie,Te,ke){if(fe){var Ue,Fe,je;if(ke&&ke!==me?(Fe=A.parseBaseUrl(ke),Ue=ke):(A.isRelative(me)&&(me=A.resolve(me,window.location.href)),Fe=A.parseBaseUrl(me)),"No Content"==Te)return void E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null});if(null===ue&&(ue=function de(me){var xe=null;return me.indexOf("SmoothStreamingMedia")>-1?(be&&(xe=be.createMssParser(),be.registerEvents()),xe):me.indexOf("MPD")>-1||me.indexOf("Patch")>-1?Object(k.default)(P).create({debug:y}):xe}(Ie)),null===ue)return void E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new D.default(_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))});fe.setMatchers(ue.getMatchers()),fe.setIron(ue.getIron());try{je=ue.parse(Ie)}catch(He){return void E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new D.default(_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))})}if(je){if(je.url=Ue||me,je.originalUrl||(je.originalUrl=je.url),je.hasOwnProperty(e.default.LOCATION)&&(Fe=A.parseBaseUrl(je.Location_asArray[0]),H.debug("BaseURI set by Location to: "+Fe)),S&&S.get().streaming.enableManifestDurationMismatchFix&&je.mediaPresentationDuration&&je.Period_asArray.length>1){var Pe=je.Period_asArray.reduce(function(He,Le){return He+Le.duration},0);!isNaN(Pe)&&je.mediaPresentationDuration>Pe&&(H.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),je.mediaPresentationDuration=Pe)}je.baseUri=Fe,je.loadedTime=new Date,fe.resolveManifestOnLoad(je),E.trigger(p.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:Ie})}else E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new D.default(_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,_.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(me))})}},error:function(Ie,Te,ke){E.trigger(p.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new D.default(_.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,_.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(me,", ").concat(ke))})}})},reset:function pe(){E.off(p.default.XLINK_READY,V,I),be&&be.reset(),fe&&(fe.reset(),fe=null),ee&&(ee.abort(),ee=null)}},function se(){H=y.getLogger(I),E.on(p.default.XLINK_READY,V,I),ee=Object(U.default)(P).create({errHandler:O.errHandler,dashMetrics:O.dashMetrics,mediaPlayerModel:O.mediaPlayerModel,requestModifier:O.requestModifier,urlUtils:A,constants:e.default,dashConstants:C.default,errors:_.default,requestTimeout:O.settings.get().streaming.manifestRequestTimeout}),fe=Object(R.default)(P).create({errHandler:q,dashMetrics:O.dashMetrics,mediaPlayerModel:O.mediaPlayerModel,requestModifier:O.requestModifier,settings:O.settings}),ue=null}(),I}L.__dashjs_factory_name="ManifestLoader";var B=b.default.getClassFactory(L);w.default=B},"./src/streaming/ManifestUpdater.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/streaming/MediaPlayerEvents.js"),U=i("./src/core/FactoryMaker.js"),j=i("./src/core/Debug.js"),F=i("./src/core/errors/Errors.js"),D=i("./src/dash/constants/DashConstants.js"),h=i("./src/streaming/utils/URLUtils.js");function u(){var k,L,B,O,P,y,S,E,A,I,H,ee,p=this.context,_=Object(e.default)(p).getInstance(),b=Object(h.default)(p).getInstance();function se(){B=NaN,S=!1,P=!0,y=!1,de()}function de(){null!==O&&(clearTimeout(O),O=null)}function Q(Fe){de(),!y&&(isNaN(Fe)&&!isNaN(B)&&(Fe=1e3*B),isNaN(Fe)||(L.debug("Refresh manifest in "+Fe+" milliseconds."),O=setTimeout(xe,Fe)))}function pe(){var Fe=arguments.length>0&&void 0!==arguments[0]&&arguments[0];S=!0;var je=A.getValue(),Pe=je.url,He=I.getPatchLocation(je),Le=I.getLocation(je);He&&!Fe?Pe=He:Le&&(Pe=Le),b.isRelative(Pe)&&(Pe=b.resolve(Pe,je.url)),E.load(Pe)}function me(Fe){if(Fe){if(I.getIsPatch(Fe)){var je=Fe;Fe=A.getValue();var Pe=I.isPatchValid(Fe,je),He=Pe;if(Pe){var Le=I.getPublishTime(Fe);He=I.applyPatchToManifest(Fe,je);var ye=I.getPublishTime(Fe);He=Le.getTime()!=ye.getTime()}if(!He)return L.debug("Patch provided is invalid, performing full manifest refresh"),void pe(!0);Fe.loadedTime=new Date}}else(Fe=A.getValue()).loadedTime=new Date;if(A.getValue()&&A.getValue().type===D.default.DYNAMIC&&Fe.type===D.default.STATIC)return _.trigger(C.default.DYNAMIC_TO_STATIC),S=!1,void(y=!0);A.setValue(Fe);var ae=new Date,W=(ae.getTime()-Fe.loadedTime.getTime())/1e3;1e3*(B=I.getManifestUpdatePeriod(Fe,W))>2147483647&&(B=2147483.647),_.trigger(C.default.MANIFEST_UPDATED,{manifest:Fe}),L.info("Manifest has been refreshed at "+ae+"["+ae.getTime()/1e3+"] "),P||Q()}function xe(){if(!P){if(S)return void Q(ee.get().streaming.manifestUpdateRetryInterval);pe()}}function _e(Fe){Fe.error?Fe.error.code===F.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&H.error(Fe.error):me(Fe.manifest)}function Ie(){P=!1,Q()}function Te(){(P=!ee.get().streaming.scheduling.scheduleWhilePaused)&&de()}function ke(){S=!1}return k={initialize:function be(){se(),_.on(C.default.STREAMS_COMPOSED,ke,this),_.on(R.default.PLAYBACK_STARTED,Ie,this),_.on(R.default.PLAYBACK_PAUSED,Te,this),_.on(C.default.INTERNAL_MANIFEST_LOADED,_e,this)},setManifest:function q(Fe){me(Fe)},refreshManifest:pe,getIsUpdating:function Ue(){return S},setConfig:function ue(Fe){!Fe||(Fe.manifestModel&&(A=Fe.manifestModel),Fe.adapter&&(I=Fe.adapter),Fe.manifestLoader&&(E=Fe.manifestLoader),Fe.errHandler&&(H=Fe.errHandler),Fe.settings&&(ee=Fe.settings))},reset:function V(){_.off(R.default.PLAYBACK_STARTED,Ie,this),_.off(R.default.PLAYBACK_PAUSED,Te,this),_.off(C.default.STREAMS_COMPOSED,ke,this),_.off(C.default.INTERNAL_MANIFEST_LOADED,_e,this),se()}},function fe(){L=Object(j.default)(p).getInstance().getLogger(k)}(),k}u.__dashjs_factory_name="ManifestUpdater",w.default=U.default.getClassFactory(u)},"./src/streaming/MediaPlayer.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./externals/cea608-parser.js"),C=i.n(e),R=i("./src/streaming/constants/Constants.js"),U=i("./src/dash/constants/DashConstants.js"),j=i("./src/streaming/constants/MetricsConstants.js"),F=i("./src/streaming/controllers/PlaybackController.js"),D=i("./src/streaming/controllers/StreamController.js"),h=i("./src/streaming/controllers/GapController.js"),u=i("./src/streaming/controllers/CatchupController.js"),p=i("./src/dash/controllers/ServiceDescriptionController.js"),_=i("./src/dash/controllers/ContentSteeringController.js"),b=i("./src/streaming/controllers/MediaController.js"),k=i("./src/streaming/controllers/BaseURLController.js"),L=i("./src/streaming/ManifestLoader.js"),B=i("./src/streaming/utils/ErrorHandler.js"),O=i("./src/streaming/utils/Capabilities.js"),P=i("./src/streaming/utils/CapabilitiesFilter.js"),y=i("./src/streaming/utils/RequestModifier.js"),S=i("./src/streaming/models/URIFragmentModel.js"),E=i("./src/streaming/models/ManifestModel.js"),A=i("./src/streaming/models/MediaPlayerModel.js"),I=i("./src/streaming/controllers/AbrController.js"),H=i("./src/streaming/net/SchemeLoaderFactory.js"),ee=i("./src/streaming/models/VideoModel.js"),fe=i("./src/streaming/models/CmcdModel.js"),ue=i("./src/streaming/utils/DOMStorage.js"),be=i("./src/core/Debug.js"),q=i("./src/core/errors/Errors.js"),se=i("./src/core/EventBus.js"),V=i("./src/core/events/Events.js"),de=i("./src/streaming/MediaPlayerEvents.js"),Q=i("./src/core/FactoryMaker.js"),pe=i("./src/core/Settings.js"),me=i("./src/core/Version.js"),xe=i("./src/dash/controllers/SegmentBaseController.js"),_e=i("./src/dash/DashAdapter.js"),Ie=i("./src/dash/DashMetrics.js"),Te=i("./src/dash/utils/TimelineConverter.js"),ke=i("./src/streaming/vo/metrics/HTTPRequest.js"),Ue=i("./externals/base64.js"),Fe=i.n(Ue),je=i("./node_modules/codem-isoboxer/dist/iso_boxer.js"),Pe=i.n(je),He=i("./src/streaming/vo/DashJSError.js"),Le=i("./src/streaming/utils/SupervisorTools.js"),ye=i("./src/streaming/ManifestUpdater.js"),ae=i("./src/streaming/utils/URLUtils.js"),W=i("./src/streaming/utils/BoxParser.js"),ce=i("./src/streaming/text/TextController.js"),De=i("./src/streaming/models/CustomParametersModel.js");function le(){var st,et,ct,xt,tt,Et,Kt,_t,At,Pt,Yt,jt,en,an,Ln,wn,Vn,Hn,it,Qe,mt,Ft,tn,Wt,vt,pt,rt,Xe,yt,Zt,Jt,on,pn,Mn,Wn,Qn,gr,z="You must first call initialize() and set a source before calling this method",te="You must first call initialize() and set a valid source and view before calling this method",X="You must first call attachView() to set the video element before calling this method",K="MediaPlayer not initialized!",oe=this.context,Ce=Object(se.default)(oe).getInstance(),Oe=Object(pe.default)(oe).getInstance(),Ze=Object(be.default)(oe).getInstance({settings:Oe});function dn(){Tr(null),Br(null),xt=null,en&&(en.reset(),en=null),an&&(an.reset(),an=null),it&&it.reset(),Oe.reset(),wn&&(wn.reset(),wn=null)}function kt(){return!!ct&&!!Mn.getElement()}function Fn(){return Object(me.getVersionString)()}function Gt(){if(!Kt)throw te;return rt.isPaused()}function Dt(){if(!Kt)throw te;return rt.getIsDynamic()}function Ii(wt){var An=Wt&&Wt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Gn=Jt.getCurrentDVRInfo(An);if(!Gn)return 0;var Vr=rt.getOriginalLiveDelay(),Wr=Gn.range.start+wt;return Wr>Gn.range.end-Vr&&(Wr=Gn.range.end-Vr),Wr}function ti(wt){if(!Kt)throw te;var An=kr().currentTime;if(void 0!==wt)An=Wt.getTimeRelativeToStreamId(An,wt);else if(rt.getIsDynamic()){var Gn=Wt&&Wt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Vr=Jt.getCurrentDVRInfo(Gn);An=null===Vr||0===An?0:Math.max(0,An-Vr.range.start)}return An}function oi(){if(!Kt)throw te;var wt=kr().duration;if(rt.getIsDynamic()){var An=Wt&&Wt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Gn=Jt.getCurrentDVRInfo(An);wt=Gn?Gn.range.end-Gn.range.start:0}return wt}function mo(wt){Object(Le.checkParameterType)(wt,"boolean"),_t=wt}function qr(){it.restoreDefaultUTCTimingSources()}function ln(){return Jt}function kr(){if(!Mn.getElement())throw X;return Mn.getElement()}function Br(wt){if(!tt)throw K;Mn.setElement(wt),wt&&(un(),function er(){if(!an){var wt=dashjs.MetricsReporting;if("function"==typeof wt){var An=wt(oe).create();an=An.createMetricsReporting({debug:Ze,eventBus:Ce,mediaElement:kr(),adapter:Vn,dashMetrics:Jt,mediaPlayerModel:Hn,events:V.default,constants:R.default,metricsConstants:j.default})}}}(),function Kr(){if(!Ln){var wt=dashjs.MssHandler;"function"==typeof wt&&(q.default.extend(wt.errors),Ln=wt(oe).create({eventBus:Ce,mediaPlayerModel:Hn,dashMetrics:Jt,manifestModel:on,playbackController:rt,streamController:Wt,protectionController:en,baseURLController:mt,errHandler:Qe,events:V.default,constants:R.default,debug:Ze,initSegmentType:ke.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:Fe.a,ISOBoxer:Pe.a,settings:Oe}))}}(),Wt&&Wt.switchToVideoElement()),Kt&&Ne(),Cn()}function Io(wt){if(!Et)throw z;var An=Wt.getActiveStreamInfo();return An?jt.getTracksFor(wt,An.id):[]}function Tr(wt){var An=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;if(!tt)throw K;"string"==typeof wt&&Wn.initialize(wt),(null==An||isNaN(An))&&(An=NaN),An=Math.max(0,An),ct=wt,(Et||Kt)&&Ne(),kt()&&Cn(An)}function To(){if(!Et)throw z;var wt=Wt.getActiveStreamInfo();return wt?Wt.getStreamById(wt.id):null}function Ne(){Kt=!1,Et=!1,Vn.reset(),Wt.reset(),pt.reset(),Zt.reset(),rt.reset(),Xe.reset(),yt.reset(),At.reset(),jt.reset(),gr.reset(),en&&(Oe.get().streaming.protection.keepProtectionMediaKeys?en.stop():(en.reset(),en=null,un())),vt.reset(),pn.reset()}function we(){var wt=ht();Wt||(Wt=Object(D.default)(oe).getInstance()),vt||(vt=Object(ce.default)(oe).create({errHandler:Qe,manifestModel:on,adapter:Vn,mediaController:jt,videoModel:Mn,settings:Oe})),tn.setConfig({capabilities:Ft,customParametersModel:it,adapter:Vn,settings:Oe,manifestModel:on,errHandler:Qe}),Wt.setConfig({capabilities:Ft,capabilitiesFilter:tn,manifestLoader:wt,manifestModel:on,mediaPlayerModel:Hn,customParametersModel:it,protectionController:en,textController:vt,adapter:Vn,dashMetrics:Jt,errHandler:Qe,timelineConverter:Yt,videoModel:Mn,playbackController:rt,serviceDescriptionController:Xe,contentSteeringController:yt,abrController:At,mediaController:jt,settings:Oe,baseURLController:mt,uriFragmentModel:Wn,segmentBaseController:gr}),pt.setConfig({settings:Oe,playbackController:rt,streamController:Wt,videoModel:Mn,timelineConverter:Yt,adapter:Vn}),rt.setConfig({streamController:Wt,serviceDescriptionController:Xe,dashMetrics:Jt,adapter:Vn,videoModel:Mn,timelineConverter:Yt,settings:Oe}),Zt.setConfig({streamController:Wt,playbackController:rt,mediaPlayerModel:Hn,videoModel:Mn,settings:Oe}),At.setConfig({streamController:Wt,domStorage:Qn,mediaPlayerModel:Hn,customParametersModel:it,dashMetrics:Jt,adapter:Vn,videoModel:Mn,settings:Oe}),pn.setConfig({abrController:At,dashMetrics:Jt,playbackController:rt}),yt.setConfig({adapter:Vn,errHandler:Qe,dashMetrics:Jt,mediaPlayerModel:Hn,manifestModel:on,abrController:At,eventBus:Ce,requestModifier:Object(y.default)(oe).getInstance()}),At.initialize(),Wt.initialize(_t,xt),vt.initialize(),pt.initialize(),Zt.initialize(),pn.initialize(),yt.initialize(),gr.initialize()}function ht(){return Object(L.default)(oe).create({debug:Ze,errHandler:Qe,dashMetrics:Jt,mediaPlayerModel:Hn,requestModifier:Object(y.default)(oe).getInstance(),mssHandler:Ln,settings:Oe})}function un(){if(en)return en;var wt=dashjs.Protection;if("function"==typeof wt){var An=wt(oe).create();return V.default.extend(wt.events),de.default.extend(wt.events,{publicOnly:!0}),q.default.extend(wt.errors),Ft||(Ft=Object(O.default)(oe).getInstance()),en=An.createProtectionSystem({debug:Ze,errHandler:Qe,videoModel:Mn,customParametersModel:it,capabilities:Ft,eventBus:Ce,events:V.default,BASE64:Fe.a,constants:R.default,cmcdModel:pn,settings:Oe})}return null}function pi(){if(!tt)throw K;if(wn)return wn;var wt=dashjs.OfflineController;if("function"==typeof wt){V.default.extend(wt.events),de.default.extend(wt.events,{publicOnly:!0}),q.default.extend(wt.errors);var An=ht(),Gn=Object(ye.default)(oe).create();return Gn.setConfig({manifestModel:on,adapter:Vn,manifestLoader:An,errHandler:Qe}),wn=wt(oe).create({debug:Ze,manifestUpdater:Gn,baseURLController:mt,manifestLoader:An,manifestModel:on,mediaPlayerModel:Hn,abrController:At,playbackController:rt,adapter:Vn,errHandler:Qe,dashMetrics:Jt,timelineConverter:Yt,segmentBaseController:gr,schemeLoaderFactory:Pt,eventBus:Ce,events:V.default,errors:q.default,constants:R.default,settings:Oe,dashConstants:U.default,urlUtils:Object(ae.default)(oe).getInstance()})}return null}function wo(wt){var An=Wt&&Wt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,Gn=Jt.getCurrentDVRInfo(An);return Gn?wt+(Gn.manifestInfo.availableFrom.getTime()/1e3+Gn.range.start):0}function Cn(){var wt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;wn&&wn.resetRecords(),!Et&&ct&&(Et=!0,et.info("Streaming Initialized"),we(),"string"==typeof ct?Wt.load(ct,wt):Wt.loadWithManifest(ct,wt)),!Kt&&kt()&&(Kt=!0,et.info("Playback Initialized"))}return st={initialize:function zt(wt,An,Gn){var Vr=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;Ft||(Ft=Object(O.default)(oe).getInstance()).setConfig({settings:Oe}),Qe||(Qe=Object(B.default)(oe).getInstance()),Ft.supportsMediaSource()?(tt||(tt=!0,Yt=Object(Te.default)(oe).getInstance(),At||(At=Object(I.default)(oe).getInstance()).setConfig({settings:Oe}),Pt||(Pt=Object(H.default)(oe).getInstance()),rt||(rt=Object(F.default)(oe).getInstance()),jt||(jt=Object(b.default)(oe).getInstance()),Wt||(Wt=Object(D.default)(oe).getInstance()),pt||(pt=Object(h.default)(oe).getInstance()),Zt||(Zt=Object(u.default)(oe).getInstance()),Xe||(Xe=Object(p.default)(oe).getInstance()),yt||(yt=Object(_.default)(oe).getInstance()),tn||(tn=Object(P.default)(oe).getInstance()),Vn=Object(_e.default)(oe).getInstance(),on=Object(E.default)(oe).getInstance(),pn=Object(fe.default)(oe).getInstance(),Jt=Object(Ie.default)(oe).getInstance({settings:Oe}),Qn=Object(ue.default)(oe).getInstance({settings:Oe}),Vn.setConfig({constants:R.default,cea608parser:C.a,errHandler:Qe,BASE64:Fe.a}),mt||(mt=Object(k.default)(oe).create()),mt.setConfig({adapter:Vn}),Xe.setConfig({adapter:Vn}),gr||(gr=Object(xe.default)(oe).getInstance({dashMetrics:Jt,mediaPlayerModel:Hn,errHandler:Qe,baseURLController:mt,events:V.default,eventBus:Ce,debug:Ze,boxParser:Object(W.default)(oe).getInstance(),requestModifier:Object(y.default)(oe).getInstance(),errors:q.default})),jt.setConfig({domStorage:Qn,settings:Oe,customParametersModel:it}),Hn.setConfig({playbackController:rt,serviceDescriptionController:Xe}),qr(),mo(void 0===Gn||Gn),pi()),wt&&Br(wt),An&&Tr(An,Vr),et.info("[dash.js "+Fn()+"] MediaPlayer has been initialized")):Qe.error(new He.default(q.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,q.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function ut(wt){!wt||(wt.capabilities&&(Ft=wt.capabilities),wt.capabilitiesFilter&&(tn=wt.capabilitiesFilter),wt.streamController&&(Wt=wt.streamController),wt.textController&&(vt=wt.textController),wt.gapController&&(pt=wt.gapController),wt.playbackController&&(rt=wt.playbackController),wt.serviceDescriptionController&&(Xe=wt.serviceDescriptionController),wt.contentSteeringController&&(yt=wt.contentSteeringController),wt.catchupController&&(Zt=wt.catchupController),wt.mediaPlayerModel&&(Hn=wt.mediaPlayerModel),wt.customParametersModel&&(it=wt.customParametersModel),wt.abrController&&(At=wt.abrController),wt.schemeLoaderFactory&&(Pt=wt.schemeLoaderFactory),wt.mediaController&&(jt=wt.mediaController),wt.settings&&(Oe=wt.settings))},on:function Rt(wt,An,Gn,Vr){Ce.on(wt,An,Gn,Vr)},off:function sn(wt,An,Gn){Ce.off(wt,An,Gn)},extend:function Ri(wt,An,Gn){Q.default.extend(wt,An,Gn,oe)},attachView:Br,attachSource:Tr,isReady:kt,play:function Ot(){if(!Kt)throw te;(!_t||Gt()&&Kt)&&rt.play(!0)},isPaused:Gt,pause:function Ct(){if(!Kt)throw te;rt.pause()},isSeeking:function Nn(){if(!Kt)throw te;return rt.isSeeking()},isDynamic:Dt,getLowLatencyModeEnabled:function vn(){if(!Kt)throw te;return rt.getLowLatencyModeEnabled()},seek:function qt(wt){if(!Kt)throw te;if(Object(Le.checkParameterType)(wt,"number"),isNaN(wt))throw R.default.BAD_ARGUMENT_ERROR;wt<0&&(wt=0);var An=rt.getIsDynamic()?Ii(wt):wt,Gn=kr();!rt.getIsDynamic()&&Gn.duration&&(An=Math.min(Gn.duration,An)),rt.seek(An,!1,!1,!0)},seekToOriginalLive:function bn(){!Kt||!Dt()||rt.seekToOriginalLive()},setPlaybackRate:function Rn(wt){kr().playbackRate=wt},getPlaybackRate:function Yn(){return kr().playbackRate},setMute:function ar(wt){Object(Le.checkParameterType)(wt,"boolean"),kr().muted=wt},isMuted:function ur(){return kr().muted},setVolume:function br(wt){if("number"!=typeof wt||isNaN(wt)||wt<0||wt>1)throw R.default.BAD_ARGUMENT_ERROR;kr().volume=wt},getVolume:function Cr(){return kr().volume},time:ti,duration:oi,timeAsUTC:function Yi(){if(!Kt)throw te;return ti()<0?NaN:wo(ti())},durationAsUTC:function si(){if(!Kt)throw te;return wo(oi())},getActiveStream:To,getDVRWindowSize:function Er(){var wt=Wt&&Wt.hasVideoTrack()?R.default.VIDEO:R.default.AUDIO,An=Jt.getCurrentDVRInfo(wt);return An?An.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Ii,getTargetLiveDelay:function Si(){if(!Kt)throw te;return rt.getOriginalLiveDelay()},convertToTimeCode:function xo(wt){wt=Math.max(wt,0);var An=Math.floor(wt/3600),Gn=Math.floor(wt%3600/60),Vr=Math.floor(wt%3600%60);return(0===An?"":An<10?"0"+An.toString()+":":An.toString()+":")+(Gn<10?"0"+Gn.toString():Gn.toString())+":"+(Vr<10?"0"+Vr.toString():Vr.toString())},formatUTC:function jr(wt,An,Gn){var Vr=arguments.length>3&&void 0!==arguments[3]&&arguments[3],Wr=new Date(1e3*wt),ji=Wr.toLocaleDateString(An),Ho=Wr.toLocaleTimeString(An,{hour12:Gn});return Vr?Ho+" "+ji:Ho},getVersion:Fn,getDebug:function Un(){return Ze},getBufferLength:function Hr(wt){var An=[R.default.VIDEO,R.default.AUDIO,R.default.TEXT];if(wt)return-1!==An.indexOf(wt)?ln().getCurrentBufferLevel(wt)||NaN:(et.warn("getBufferLength requested for invalid type"),NaN);var Gn=An.map(function(Wr){return Io(Wr).length>0?ln().getCurrentBufferLevel(Wr):Number.MAX_VALUE}).reduce(function(Wr,ji){return Math.min(Wr,ji)});return Gn===Number.MAX_VALUE?NaN:Gn},getTTMLRenderingDiv:function fi(){return Mn?Mn.getTTMLRenderingDiv():null},getVideoElement:kr,getSource:function Zr(){if(!ct)throw"You must first call attachSource() with a valid source before calling this method";return ct},updateSource:function Dr(wt){Wt.load(ct=wt)},getCurrentLiveLatency:function _o(){if(!tt)throw K;return Kt?rt.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function bi(wt){if(!Et)throw z;return At.getTopBitrateInfoFor(wt)},setAutoPlay:mo,getAutoPlay:function $i(){return _t},getDashMetrics:ln,getQualityFor:function Lr(wt){if(!Et)throw z;if(wt===R.default.IMAGE){var An=To();if(!An)return-1;var Gn=An.getThumbnailController();return Gn?Gn.getCurrentTrackIndex():-1}return At.getQualityFor(wt)},setQualityFor:function Do(wt,An){var Gn=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Et)throw z;if(wt===R.default.IMAGE){var Vr=To();if(!Vr)return;var Wr=Vr.getThumbnailController();Wr&&Wr.setTrackByIndex(An)}At.setPlaybackQuality(wt,Wt.getActiveStreamInfo(),An,{forceReplace:Gn})},updatePortalSize:function eo(){At.setElementSize(),At.setWindowResizeEventCalled(!0)},enableText:function xn(wt){var An=Wt.getActiveStreamInfo();return!(!An||!vt)&&vt.enableText(An.id,wt)},enableForcedTextStreaming:function Xn(wt){return!(!Wt.getActiveStreamInfo()||!vt)&&vt.enableForcedTextStreaming(wt)},isTextEnabled:function rr(){var wt=Wt.getActiveStreamInfo();return!(!wt||!vt)&&vt.isTextEnabled(wt)},setTextTrack:function dr(wt){if(!Kt)throw te;var An=Wt.getActiveStreamInfo();!An||!vt||vt.setTextTrack(An.id,wt)},getBitrateInfoListFor:function Ao(wt){if(!Et)throw z;var An=To();return An?An.getBitrateListFor(wt):[]},getStreamsFromManifest:function ts(wt){if(!Et)throw z;return Vn.getStreamsInfo(wt)},getTracksFor:Io,getTracksForTypeFromManifest:function ns(wt,An,Gn){if(!Et)throw z;return(Gn=Gn||Vn.getStreamsInfo(An,1)[0])?Vn.getAllMediaInfoForType(Gn,wt,An):[]},getCurrentTrackFor:function Vo(wt){if(!Et)throw z;var An=Wt.getActiveStreamInfo();return jt.getCurrentTrackFor(wt,An.id)},setInitialMediaSettingsFor:function Rs(wt,An){if(!tt)throw K;jt.setInitialSettings(wt,An)},getInitialMediaSettingsFor:function xi(wt){if(!tt)throw K;return jt.getInitialSettings(wt)},setCurrentTrack:function Ui(wt){if(!Et)throw z;jt.setTrack(wt)},addABRCustomRule:function zi(wt,An,Gn){it.addAbrCustomRule(wt,An,Gn)},removeABRCustomRule:function Jo(wt){it.removeAbrCustomRule(wt)},removeAllABRCustomRule:function Qo(){it.removeAllAbrCustomRule()},getABRCustomRules:function to(){return it.getAbrCustomRules()},getAverageThroughput:function qi(wt){var An=At.getThroughputHistory(),Gn=rt.getIsDynamic();return An?An.getAverageThroughput(wt,Gn):0},retrieveManifest:function zn(wt,An){var Gn=ht(),Vr=this;Ce.on(V.default.INTERNAL_MANIFEST_LOADED,function ji(Ho){Ho.error?An(null,Ho.error):An(Ho.manifest),Ce.off(V.default.INTERNAL_MANIFEST_LOADED,ji,Vr),Gn.reset()},Vr),Wn.initialize(wt),Gn.load(wt)},addUTCTimingSource:function Po(wt,An){it.addUTCTimingSource(wt,An)},removeUTCTimingSource:function jo(wt,An){it.removeUTCTimingSource(wt,An)},clearDefaultUTCTimingSources:function Xo(){it.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:qr,setXHRWithCredentialsForType:function es(wt,An){it.setXHRWithCredentialsForType(wt,An)},getXHRWithCredentialsForType:function ao(wt){return it.getXHRWithCredentialsForType(wt)},getProtectionController:function dt(){return un()},attachProtectionController:function Bt(wt){en=wt},setProtectionData:function hn(wt){xt=wt,Wt&&Wt.setProtectionData(xt)},registerLicenseRequestFilter:function Eo(wt){it.registerLicenseRequestFilter(wt)},registerLicenseResponseFilter:function Ve(wt){it.registerLicenseResponseFilter(wt)},unregisterLicenseRequestFilter:function lt(wt){it.unregisterLicenseRequestFilter(wt)},unregisterLicenseResponseFilter:function Ke(wt){it.unregisterLicenseResponseFilter(wt)},registerCustomCapabilitiesFilter:function wi(wt){it.registerCustomCapabilitiesFilter(wt)},unregisterCustomCapabilitiesFilter:function yo(wt){it.unregisterCustomCapabilitiesFilter(wt)},setCustomInitialTrackSelectionFunction:function us(wt){it.setCustomInitialTrackSelectionFunction(wt)},resetCustomInitialTrackSelectionFunction:function Go(){it.resetCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function Bi(wt){if(!Mn.getElement())throw X;Mn.setTTMLRenderingDiv(wt)},attachVttRenderingDiv:function vo(wt){if(!Mn.getElement())throw X;Mn.setVttRenderingDiv(wt)},getCurrentTextTrackIndex:function Or(){var An=Wt.getActiveStreamInfo();if(An&&vt)return vt.getCurrentTrackIdx(An.id)},provideThumbnail:function _n(wt,An){if("function"==typeof An){if(wt<0)return void An(null);var Gn=rt.getIsDynamic()?Ii(wt):wt,Vr=Wt.getStreamForTime(Gn);if(null===Vr)return void An(null);var Wr=Vr.getThumbnailController();return Wr?Wr.provide(Gn,An):void An(null)}},getDashAdapter:function vi(){return Vn},getOfflineController:function Nt(){return pi()},triggerSteeringRequest:function Oo(){if(yt)return yt.loadSteeringData()},getCurrentSteeringResponseData:function Ye(){if(yt)return yt.getCurrentSteeringResponseData()},getSettings:function Sr(){return Oe.get()},updateSettings:function gi(wt){Oe.update(wt)},resetSettings:function Ur(){Oe.reset()},reset:dn,destroy:function It(){dn(),Q.default.deleteSingletonInstances(oe)}},function Ir(){et=Ze.getLogger(st),tt=!1,Kt=!1,Et=!1,_t=!0,en=null,wn=null,xt=null,Vn=null,gr=null,V.default.extend(de.default),Hn=Object(A.default)(oe).getInstance(),it=Object(De.default)(oe).getInstance(),Mn=Object(ee.default)(oe).getInstance(),Wn=Object(S.default)(oe).getInstance()}(),st}le.__dashjs_factory_name="MediaPlayer";var ne=Q.default.getClassFactory(le);ne.events=de.default,ne.errors=q.default,Q.default.updateClassFactory(le.__dashjs_factory_name,ne),w.default=ne},"./src/streaming/MediaPlayerEvents.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var O=new(function(P){h(S,P);var y=p(S);function S(){var E;return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(E=y.call(this)).AST_IN_FUTURE="astInFuture",E.BUFFER_EMPTY="bufferStalled",E.BUFFER_LOADED="bufferLoaded",E.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",E.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",E.DYNAMIC_TO_STATIC="dynamicToStatic",E.ERROR="error",E.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",E.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",E.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",E.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",E.LOG="log",E.MANIFEST_LOADED="manifestLoaded",E.METRICS_CHANGED="metricsChanged",E.METRIC_CHANGED="metricChanged",E.METRIC_ADDED="metricAdded",E.METRIC_UPDATED="metricUpdated",E.PERIOD_SWITCH_STARTED="periodSwitchStarted",E.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",E.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",E.QUALITY_CHANGE_RENDERED="qualityChangeRendered",E.TRACK_CHANGE_RENDERED="trackChangeRendered",E.STREAM_INITIALIZING="streamInitializing",E.STREAM_UPDATED="streamUpdated",E.STREAM_ACTIVATED="streamActivated",E.STREAM_DEACTIVATED="streamDeactivated",E.STREAM_INITIALIZED="streamInitialized",E.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",E.TEXT_TRACKS_ADDED="allTextTracksAdded",E.TEXT_TRACK_ADDED="textTrackAdded",E.TTML_PARSED="ttmlParsed",E.TTML_TO_PARSE="ttmlToParse",E.CAPTION_RENDERED="captionRendered",E.CAPTION_CONTAINER_RESIZE="captionContainerResize",E.CAN_PLAY="canPlay",E.CAN_PLAY_THROUGH="canPlayThrough",E.PLAYBACK_ENDED="playbackEnded",E.PLAYBACK_ERROR="playbackError",E.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",E.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",E.PLAYBACK_LOADED_DATA="playbackLoadedData",E.PLAYBACK_PAUSED="playbackPaused",E.PLAYBACK_PLAYING="playbackPlaying",E.PLAYBACK_PROGRESS="playbackProgress",E.PLAYBACK_RATE_CHANGED="playbackRateChanged",E.PLAYBACK_SEEKED="playbackSeeked",E.PLAYBACK_SEEKING="playbackSeeking",E.PLAYBACK_STALLED="playbackStalled",E.PLAYBACK_STARTED="playbackStarted",E.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",E.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",E.PLAYBACK_WAITING="playbackWaiting",E.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",E.EVENT_MODE_ON_START="eventModeOnStart",E.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",E.CONFORMANCE_VIOLATION="conformanceViolation",E.REPRESENTATION_SWITCH="representationSwitch",E.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",E.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",E}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/events/EventsBase.js").default));w.default=O},"./src/streaming/MediaPlayerFactory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/MediaPlayer.js");var U,R=function C(){var u,h="application/dash+xml";function p(k,L,B){if(!k||!/^VIDEO$/i.test(k.nodeName))return null;if(k._dashjs_player)return k._dashjs_player;var O,P=k.id||k.name||"video element";if(!(L=L||[].slice.call(k.querySelectorAll("source")).filter(function(y){return y.type==h})[0])&&k.src)(L=document.createElement("source")).src=k.src;else if(!L&&!k.src)return null;return B=B||{},(O=Object(e.default)(B).create()).initialize(k,L.src,k.autoplay),u||(u=O.getDebug().getLogger()),u.debug("Converted "+P+" to dash.js player and added content: "+L.src),k._dashjs_player=O,O}function b(k){return/^VIDEO$/i.test(k.nodeName)?k:b(k.parentNode)}return{create:p,createAll:function _(k,L){var B=[];k=k||"[data-dashjs-player]";for(var O=(L=L||document).querySelectorAll(k),P=0;P<O.length;P++){var y=p(O[P],null);B.push(y)}for(var S=L.querySelectorAll('source[type="'+h+'"]'),E=0;E<S.length;E++){var I=p(b(S[E]),null);B.push(I)}return B}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?R.createAll():U=window.setInterval(function F(){window.dashjs&&(window.clearInterval(U),R.createAll())},500):window.addEventListener("load",function j(){window.removeEventListener("load",j),R.createAll()})),w.default=R},"./src/streaming/SourceBufferSink.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/Debug.js"),C=i("./src/streaming/vo/DashJSError.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/core/errors/Errors.js"),j=i("./src/core/Settings.js"),F=i("./src/streaming/constants/Constants.js"),D=i("./src/streaming/vo/metrics/HTTPRequest.js"),h=i("./src/core/events/Events.js");function b(L){var S,E,A,I,H,ee,B=this.context,O=Object(j.default)(B).getInstance(),P=L.textController,y=L.eventBus,fe=[],ue=[],be=!1,q=L.mediaSource,se=null;function Q(te){return new Promise(function(X){z(function(){I.changeType&&I.changeType(te),X()})})}function xe(te){return I=P.getTextSourceBuffer(te),Promise.resolve()}function _e(){if("function"==typeof I.addEventListener)try{I.addEventListener("updateend",De,!1),I.addEventListener("error",le,!1),I.addEventListener("abort",le,!1)}catch(te){ee=setInterval(De,50)}else ee=setInterval(De,50)}function ke(te){return new Promise(function(X){I&&O.get().streaming.buffer.useAppendWindow?z(function(){try{if(!I)return void X();var $=q.duration,K=0;te&&!isNaN(te.start)&&!isNaN(te.duration)&&isFinite(te.duration)&&($=te.start+te.duration),te&&!isNaN(te.start)&&(K=te.start),(I.appendWindowEnd!==$||I.appendWindowStart!==K)&&(I.appendWindowStart=0,I.appendWindowEnd=$+.01,I.appendWindowStart=Math.max(K-.1,0),A.debug("Updated append window for ".concat(H.type,". Set start to ").concat(I.appendWindowStart," and end to ").concat(I.appendWindowEnd))),X()}catch(oe){A.warn("Failed to set append window"),X()}}):X()})}function Ue(te){return new Promise(function(X){I?z(function(){try{I.timestampOffset!==te&&!isNaN(te)&&(I.timestampOffset=te,A.debug("Set MSE timestamp offset to ".concat(te))),X()}catch($){X()}}):X()})}function ae(){if(!be&&ue.length>0){be=!0;var te=ue[0];ue.splice(0,1);var X=function(){be=!1,ue.length>0&&ae.call(this),te&&te.data&&te.data.segmentType&&te.data.segmentType!==D.HTTPRequest.INIT_SEGMENT_TYPE&&delete te.data.bytes,te.promise.resolve({chunk:te.data})};try{se=te.request,0===te.data.bytes.byteLength?X.call(this):(I.appendBuffer?I.appendBuffer(te.data.bytes):I.append(te.data.bytes,te.data),z(X.bind(this)))}catch($){A.fatal('SourceBuffer append failed "'+$+'"'),ue.length>0?ae():be=!1,delete te.data.bytes,te.promise.reject({chunk:te.data,error:new C.default($.code,$.message)})}}}function ce(){fe.length>0&&!I.updating&&(fe.shift()(),ce())}function De(){I.updating||ce()}function le(te){!function ne(te,X){y.trigger(te,X||{},{streamId:H.streamInfo.id,mediaType:E})}(h.default.SOURCE_BUFFER_ERROR,{error:te.target||{},lastRequestAppended:se})}function z(te){fe.push(te),I.updating||ce()}return S={getType:function Ie(){return E},getAllBufferRanges:function Pe(){try{return I.buffered}catch(te){return A.error("getAllBufferRanges exception: "+te.message),null}},getBuffer:function je(){return I},append:function He(te){var X=this,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(function(K,oe){te?(ue.push({data:te,promise:{resolve:K,reject:oe},request:$}),z(ae.bind(X))):oe({chunk:te,error:new C.default(U.default.APPEND_ERROR_CODE,U.default.APPEND_ERROR_MESSAGE)})})},remove:function ye(te){return new Promise(function(X,$){var K=te.start,oe=te.end;K>=0&&oe>K?z(function(){try{I.remove(K,oe),z(function(){X({from:K,to:oe,unintended:!1}),te.resolve&&te.resolve()})}catch(Ce){$({from:K,to:oe,unintended:!1,error:new C.default(U.default.REMOVE_ERROR_CODE,U.default.REMOVE_ERROR_MESSAGE)}),te.reject&&te.reject(Ce)}}):X()})},abort:function W(){return new Promise(function(te){try{ue=[],"open"===q.readyState?z(function(){try{I&&I.abort(),te()}catch(X){te()}}):(I&&I.setTextTrack&&"ended"===q.readyState&&I.abort(),te())}catch(X){te()}})},reset:function Fe(){if(I){try{fe=[],function Te(){try{"function"==typeof I.removeEventListener&&(I.removeEventListener("updateend",De,!1),I.removeEventListener("error",le,!1),I.removeEventListener("abort",le,!1)),clearInterval(ee)}catch(te){A.error(te)}}(),be=!1,ue=[],(!I.getClassName||"TextSourceBuffer"!==I.getClassName())&&(A.debug("Removing sourcebuffer from media source"),q.removeSourceBuffer(I))}catch(te){}I=null}se=null},updateTimestampOffset:Ue,initializeForStreamSwitch:function de(te,X,$){E=(H=te).type;var K=H.codec;(function pe(te){I=te.getBuffer()})($),_e();var oe=[];return oe.push(function Le(){return new Promise(function(te){z(function(){var X=I.appendWindowStart,$=I.appendWindowEnd;I&&(I.abort(),I.appendWindowStart=X,I.appendWindowEnd=$),te()})})}()),oe.push(ke(H.streamInfo)),oe.push(Q(K)),X&&void 0!==X.MSETimeOffset&&oe.push(Ue(X.MSETimeOffset)),Promise.all(oe)},initializeForFirstUse:function me(te,X,$){E=(H=X).type;var K=H.codec;try{if(K.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return xe(te);I=q.addSourceBuffer(K),_e();var oe=[];return oe.push(ke(H.streamInfo)),$&&void 0!==$.MSETimeOffset&&oe.push(Ue($.MSETimeOffset)),Promise.all(oe)}catch(Ce){return H.type==F.default.TEXT&&!H.isFragmented||-1!==K.indexOf('codecs="stpp')||-1!==K.indexOf('codecs="vtt')?xe(te):Promise.reject(Ce)}},updateAppendWindow:ke,changeType:Q},function V(){A=Object(e.default)(B).getInstance().getLogger(S)}(),S}b.__dashjs_factory_name="SourceBufferSink";var k=R.default.getClassFactory(b);w.default=k},"./src/streaming/Stream.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./src/streaming/StreamProcessor.js"),U=i("./src/streaming/controllers/FragmentController.js"),j=i("./src/streaming/thumbnail/ThumbnailController.js"),F=i("./src/core/EventBus.js"),D=i("./src/core/events/Events.js"),h=i("./src/core/Debug.js"),u=i("./src/core/errors/Errors.js"),p=i("./src/core/FactoryMaker.js"),_=i("./src/streaming/vo/DashJSError.js"),b=i("./src/streaming/utils/BoxParser.js"),k=i("./src/streaming/utils/URLUtils.js"),L=i("./src/streaming/controllers/BlacklistController.js"),B=[e.default.VIDEO,e.default.AUDIO,e.default.TEXT,e.default.MUXED,e.default.IMAGE];function O(P){P=P||{};var Te,ke,Ue,Fe,je,Pe,He,Le,ye,ae,W,ce,De,le,ne,z,te,X,y=this.context,S=Object(F.default)(y).getInstance(),E=Object(k.default)(y).getInstance(),A=P.manifestModel,I=P.mediaPlayerModel,H=P.dashMetrics,ee=P.manifestUpdater,fe=P.adapter,ue=P.timelineConverter,be=P.capabilities,q=P.errHandler,se=P.abrController,V=P.playbackController,de=P.eventController,Q=P.mediaController,pe=P.protectionController,me=P.textController,xe=P.videoModel,_e=P.streamInfo,Ie=P.settings;function tt(Ct,Gt){return new Promise(function(qt,bn){Wt(),ae=!0,yt();var Nn=xe.getElement();B.forEach(function(Dt){(Dt!==e.default.VIDEO||!Nn||Nn&&/^VIDEO$/i.test(Nn.nodeName))&&function Et(Ct,Gt){var Dt,qt=fe.getAllMediaInfoForType(_e,Ct),bn=[],Nn=null;if(qt&&0!==qt.length){Ct===e.default.VIDEO&&(He=!0),Ct===e.default.AUDIO&&(Le=!0);for(var vn=0,Rn=qt.length;vn<Rn;vn++)Nn=qt[vn],Ct===e.default.TEXT&&!!Nn.isEmbedded&&(me.addEmbeddedTrack(_e,Nn),bn.push(Nn)),Kt(Nn)&&Q.addTrack(Nn);if(bn.length>0&&(Q.setInitialMediaSettingsForType(Ct,_e),me.addMediaInfosToBuffer(_e,Ct,bn)),0!==(qt=qt.filter(function(ar){return!ar.isEmbedded})).length){if(Ct===e.default.IMAGE)return void(ce=Object(j.default)(y).create({streamInfo:_e,adapter:fe,baseURLController:P.baseURLController,timelineConverter:P.timelineConverter,debug:z,eventBus:S,events:D.default,dashConstants:C.default,dashMetrics:P.dashMetrics,segmentBaseController:P.segmentBaseController})).initialize();S.trigger(D.default.STREAM_INITIALIZING,{streamInfo:_e,mediaInfo:Nn}),Q.setInitialMediaSettingsForType(Ct,_e);var Yn=function _t(Ct,Gt){var qt=Ct&&Ct.length>0?Ct[0]:null,bn=W.getModel(qt?qt.type:null),Nn=qt?qt.type:null,Dt=qt?qt.mimeType:null,vn=qt?qt.isFragmented:null,Rn=Object(R.default)(y).create({streamInfo:_e,type:Nn,mimeType:Dt,timelineConverter:ue,adapter:fe,manifestModel:A,mediaPlayerModel:I,fragmentModel:bn,dashMetrics:P.dashMetrics,baseURLController:P.baseURLController,segmentBaseController:P.segmentBaseController,abrController:se,playbackController:V,mediaController:Q,textController:me,errHandler:q,settings:Ie,boxParser:ne,segmentBlacklistController:De});Rn.initialize(Gt,He,vn),Ue.push(Rn);for(var Yn=0;Yn<Ct.length;Yn++)Rn.addMediaInfo(Ct[Yn]);return Nn===e.default.TEXT&&me.addMediaInfosToBuffer(_e,Nn,Ct,bn),Rn}(qt,Gt);(Dt=Q.getCurrentTrackFor(Ct,_e.id))&&(se.updateTopQualityIndex(Dt),Yn.selectMediaInfo(Ct===e.default.TEXT&&Dt.isEmbedded?qt[0]:Dt))}}else ke.info("No "+Ct+" data.")}(Dt,Ct)}),function At(Ct){return new Promise(function(Gt){var qt={},bn=Ue.map(function(Nn){return Nn.createBufferSinks(Ct)});Promise.all(bn).then(function(Nn){Nn.forEach(function(Dt){Dt&&(qt[Dt.getType()]=Dt)}),Gt(qt)}).catch(function(){Gt(qt)})})}(Gt).then(function(Dt){if(ae=!1,0===Ue.length){var vn="No streams to play.";q.error(new _.default(u.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,vn,A.getValue())),ke.fatal(vn)}else Zt();me.createTracks(_e),qt(Dt)}).catch(function(Dt){bn(Dt)})})}function Kt(Ct){var Gt=Ct?Ct.type:null;return Gt===e.default.MUXED?(ke.fatal("Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines"),q.error(new _.default(u.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,"Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",A.getValue())),!1):!(Gt!==e.default.TEXT&&Gt!==e.default.IMAGE&&Ct.contentProtection&&!be.supportsEncryptedMedia()&&(q.error(new _.default(u.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,u.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function Pt(Ct){for(var Gt=Ue?Ue.length:0,bn=0;bn<Gt;bn++){var Nn=Ue[bn].getFragmentModel();Nn.abortRequests(),Nn.resetInitialSettings(),Ue[bn].reset(false,Ct)}me&&me.deactivateStream(_e),Ue=[],je=!1,Pe=!1,sn(!1),Vn(!1),S.trigger(D.default.STREAM_DEACTIVATED,{streamInfo:_e})}function en(Ct){Pt(Ct),Fe=!1,He=!1,Le=!1,ye={},ae=!1,te=!1,X=[]}function Vn(Ct){te=Ct}function Hn(){return _e?_e.start:NaN}function it(){return _e?_e.id:null}function Qe(){return _e}function Wt(){if(!xe||!se)throw new Error(e.default.MISSING_CONFIG_ERROR)}function pt(Ct){Ct.error&&(q.error(Ct.error),ke.fatal(Ct.error.message))}function yt(){if(de){var Ct=fe.getEventsFor(_e);Ct&&Ct.length>0&&de.addInlineEvents(Ct,_e.id)}}function Zt(){for(var Ct=Ue.length,qt=ye.audio||ye.video?new _.default(u.default.DATA_UPDATE_FAILED_ERROR_CODE,u.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,bn=0;bn<Ct;bn++)if(Ue[bn].isUpdating()||ae)return;if(pe){pe.clearMediaInfoArray();for(var Nn=0;Nn<Ct&&Ue[Nn];Nn++){var Dt=Ue[Nn].getType(),vn=Ue[Nn].getMediaInfo();if(Dt===e.default.AUDIO||Dt===e.default.VIDEO||Dt===e.default.TEXT&&vn.isFragmented){var Rn=Ue[Nn].getMediaInfo();Rn&&pe.initializeForMedia(Rn)}}pe.handleKeySystemFromManifest()}qt?q.error(qt):Fe||(Fe=!0,xe.waitForReadyState(e.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){S.trigger(D.default.STREAM_INITIALIZED,{streamInfo:_e})}))}function on(){var Ct=gr(),Gt=Ct.length;if(0!==Gt){for(var qt=0;qt<Gt;qt++)if(!Ct[qt].isBufferingCompleted()&&(Ct[qt].getType()===e.default.AUDIO||Ct[qt].getType()===e.default.VIDEO))return void ke.debug("onBufferingCompleted - One streamProcessor has finished but",Ct[qt].getType(),"one is not buffering completed");ke.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Pe=!0,S.trigger(D.default.STREAM_BUFFERING_COMPLETED,{streamInfo:_e},{streamInfo:_e})}else ke.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function pn(Ct){ye[Ct.mediaType]=Ct.error,Zt()}function Mn(Ct){de&&de.addInbandEvents(Ct.events,_e.id)}function Wn(Ct){return Ct&&Ct.type?Qn(Ct.type):null}function Qn(Ct){return Ct?gr().filter(function(qt){return qt.getType()===Ct})[0]:null}function gr(){for(var Gt,qt,Ct=[],bn=0;bn<Ue.length;bn++)((Gt=(qt=Ue[bn]).getType())===e.default.AUDIO||Gt===e.default.VIDEO||Gt===e.default.TEXT)&&Ct.push(qt);return Ct}function It(Ct,Gt){var qt=Qe(),bn=Gt.getStreamInfo();if(!bn||!qt)return!0;var Nn=fe.getAdaptationForType(bn.index,Ct,bn),Dt=fe.getAdaptationForType(qt.index,Ct,qt);return Nn&&Dt?!(!kt(Dt)&&kt(Nn)):!Nn&&!Dt}function kt(Ct){return!!Ct&&!!(Ct.ContentProtection||Ct.Representation&&Ct.Representation.length>0&&Ct.Representation[0].ContentProtection)}function Rt(Ct,Gt){var qt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!Ct||!Ct.hasOwnProperty("getStreamInfo"))return!1;var bn=Ct.getStreamInfo(),Nn=qt?qt.getStreamInfo():Qe();if(!bn||!Nn)return!1;var Dt=fe.getAdaptationForType(bn.index,Gt,bn),vn=fe.getAdaptationForType(Nn.index,Gt,Nn);if(!Dt||!vn)return!Dt&&!vn;var Rn=Dt&&vn&&Dt.mimeType===vn.mimeType,Yn=vn.Representation_asArray.map(function(Cr){return Cr.codecs}),ar=Dt.Representation_asArray.map(function(Cr){return Cr.codecs}),ur=ar.some(function(Cr){return Yn.indexOf(Cr)>-1}),br=ar.some(function(Cr){return Yn.some(function(Hr){return be.codecRootCompatibleWithCodec(Hr,Cr)})});return ur||br&&Rn}function sn(Ct){le=Ct}function Fn(){return le}return Te={initialize:function K(){(function oe(){S.on(D.default.BUFFERING_COMPLETED,on,Te),S.on(D.default.DATA_UPDATE_COMPLETED,pn,Te),S.on(D.default.INBAND_EVENTS,Mn,Te)})(),function Oe(){pe&&(S.on(D.default.KEY_ERROR,pt,Te),S.on(D.default.SERVER_CERTIFICATE_UPDATED,pt,Te),S.on(D.default.LICENSE_REQUEST_COMPLETE,pt,Te),S.on(D.default.KEY_SYSTEM_SELECTED,pt,Te),S.on(D.default.KEY_SESSION_CREATED,pt,Te),S.on(D.default.KEY_STATUSES_CHANGED,pt,Te))}(),me.initializeForStream(_e),S.trigger(D.default.STREAM_UPDATED,{streamInfo:_e})},getStreamId:function st(){return _e?_e.id:null},activate:function et(Ct,Gt){return new Promise(function(qt,bn){if(!je)return Fn()?(je=!0,S.trigger(D.default.STREAM_ACTIVATED,{streamInfo:_e}),void qt(Gt)):void function ct(Ct,Gt){return tt(Ct,Gt)}(Ct,Gt).then(function(Nn){je=!0,S.trigger(D.default.STREAM_ACTIVATED,{streamInfo:_e}),qt(Nn)}).catch(function(Nn){bn(Nn)});qt(Gt)})},deactivate:Pt,getIsActive:function Yt(){return je},getDuration:function Ln(){return _e?_e.duration:NaN},getStartTime:Hn,getId:it,getStreamInfo:Qe,getHasAudioTrack:function mt(){return Le},getHasVideoTrack:function Ft(){return He},startPreloading:function xt(Ct,Gt){return new Promise(function(qt,bn){Fn()?bn():(ke.info("[startPreloading] Preloading next stream with id ".concat(it())),sn(!0),tt(Ct,Gt).then(function(){for(var Nn=0;Nn<Ue.length&&Ue[Nn];Nn++)Ue[Nn].setExplicitBufferingTime(Hn()),Ue[Nn].getScheduleController().startScheduleTimer();qt()}).catch(function(){sn(!1),bn()}))})},getThumbnailController:function tn(){return ce},getBitrateListFor:function vt(Ct){if(Wt(),Ct===e.default.IMAGE)return ce?ce.getBitrateList():[];var Gt=function Jt(Ct){for(var Gt=null,qt=0;qt<Ue.length;qt++)if((Gt=Ue[qt]).getType()===Ct)return Gt.getMediaInfo();return null}(Ct);return se.getBitrateList(Gt)},updateData:function ut(Ct){return new Promise(function(Gt){ae=!0,_e=Ct,de&&yt();for(var qt=[],bn=0,Nn=Ue.length;bn<Nn;bn++){var Dt=Ue[bn],vn=Dt.getMediaInfo();qt.push(Dt.updateStreamInfo(_e));var Rn=fe.getAllMediaInfoForType(_e,Dt.getType());if(Rn){Dt.clearMediaInfoArray();for(var Yn=0;Yn<Rn.length;Yn++){var ar=Rn[Yn];Dt.addMediaInfo(Rn[Yn]),fe.areMediaInfosEqual(vn,ar)&&(se.updateTopQualityIndex(ar),qt.push(Dt.selectMediaInfo(ar)))}}}Promise.all(qt).then(function(){for(qt=[];X.length>0;){var ur=X.pop(),br=ur.newMediaInfo,Cr=Wn(ur.oldMediaInfo);if(!Cr)return;qt.push(Cr.prepareTrackSwitch()),Cr.selectMediaInfo(br)}return Promise.all(qt)}).then(function(){ae=!1,Zt(),S.trigger(D.default.STREAM_UPDATED,{streamInfo:_e}),Gt()})})},reset:function an(Ct){W&&(W.reset(),W=null),se&&_e&&se.clearDataForStream(_e.id),De&&(De.reset(),De=null),en(Ct),_e=null,function Ce(){S.off(D.default.DATA_UPDATE_COMPLETED,pn,Te),S.off(D.default.BUFFERING_COMPLETED,on,Te),S.off(D.default.INBAND_EVENTS,Mn,Te)}(),function Ze(){pe&&(S.off(D.default.KEY_ERROR,pt,Te),S.off(D.default.SERVER_CERTIFICATE_UPDATED,pt,Te),S.off(D.default.LICENSE_REQUEST_COMPLETE,pt,Te),S.off(D.default.KEY_SYSTEM_SELECTED,pt,Te),S.off(D.default.KEY_SESSION_CREATED,pt,Te),S.off(D.default.KEY_STATUSES_CHANGED,pt,Te))}()},getProcessors:gr,setMediaSource:function jt(Ct){for(var Gt=0;Gt<Ue.length;)Kt(Ue[Gt].getMediaInfo())?(Ue[Gt].setMediaSource(Ct),Gt++):(Ue[Gt].reset(),Ue.splice(Gt,1));if(0===Ue.length){var qt="No streams to play.";q.error(new _.default(u.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt+"nostreams",A.getValue())),ke.fatal(qt)}},isMediaCodecCompatible:function zt(Ct){var Gt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Rt(Ct,e.default.VIDEO,Gt)&&Rt(Ct,e.default.AUDIO,Gt)},isProtectionCompatible:function dn(Ct){return!Ct||It(e.default.VIDEO,Ct)&&It(e.default.AUDIO,Ct)},getPreloaded:Fn,getIsEndedEventSignaled:function wn(){return te},setIsEndedEventSignaled:Vn,getAdapter:function Ot(){return fe},getHasFinishedBuffering:function Un(){return Pe},setPreloaded:sn,startScheduleControllers:function Ir(){for(var Ct=Ue.length,Gt=0;Gt<Ct&&Ue[Gt];Gt++)Ue[Gt].getScheduleController().startScheduleTimer()},prepareTrackChange:function rt(Ct){if(je&&_e){Pe=!1;var Gt=Ct.newMediaInfo,qt=A.getValue();fe.setCurrentMediaInfo(_e.id,Gt.type,Gt);var bn=Wn(Gt);if(bn){var Nn=V.getTime();ke.info("Stream -  Process track changed at current time "+Nn),qt.refreshManifestOnSwitchTrack?(X.push(Ct),ee.getIsUpdating()||(ke.debug("Stream -  Refreshing manifest for switch track"),ee.refreshManifest())):bn.selectMediaInfo(Gt).then(function(){(Gt.type===e.default.VIDEO||Gt.type===e.default.AUDIO)&&se.updateTopQualityIndex(Gt),bn.prepareTrackSwitch()})}}},prepareQualityChange:function Xe(Ct){var Gt=Qn(Ct.mediaType);Gt&&Gt.prepareQualityChange(Ct)}},function $(){try{z=Object(h.default)(y).getInstance(),ke=z.getLogger(Te),en(),ne=Object(b.default)(y).getInstance(),De=Object(L.default)(y).create({updateEventName:D.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:D.default.SEGMENT_LOCATION_BLACKLIST_ADD}),W=Object(U.default)(y).create({streamInfo:_e,mediaPlayerModel:I,dashMetrics:H,errHandler:q,settings:Ie,boxParser:ne,dashConstants:C.default,urlUtils:E})}catch(Ct){throw Ct}}(),Te}O.__dashjs_factory_name="Stream",w.default=p.default.getClassFactory(O)},"./src/streaming/StreamProcessor.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./src/streaming/constants/MetricsConstants.js"),U=i("./src/streaming/models/FragmentModel.js"),j=i("./src/streaming/controllers/BufferController.js"),F=i("./src/streaming/text/NotFragmentedTextBufferController.js"),D=i("./src/streaming/controllers/ScheduleController.js"),h=i("./src/dash/controllers/RepresentationController.js"),u=i("./src/core/FactoryMaker.js"),p=i("./src/streaming/utils/SupervisorTools.js"),_=i("./src/core/EventBus.js"),b=i("./src/core/events/Events.js"),k=i("./src/dash/DashHandler.js"),L=i("./src/core/errors/Errors.js"),B=i("./src/streaming/vo/DashJSError.js"),O=i("./src/core/Debug.js"),P=i("./src/streaming/utils/RequestModifier.js"),y=i("./src/streaming/utils/URLUtils.js"),S=i("./src/streaming/utils/BoxParser.js"),E=i("./src/streaming/vo/metrics/PlayList.js"),A=i("./src/dash/controllers/SegmentsController.js"),I=i("./src/streaming/vo/metrics/HTTPRequest.js");function H(ee){ee=ee||{};var He,Le,ye,ae,W,ce,De,le,ne,z,te,X,$,fe=this.context,ue=Object(_.default)(fe).getInstance(),be=ee.streamInfo,q=ee.type,se=ee.errHandler,V=ee.mimeType,de=ee.timelineConverter,Q=ee.adapter,pe=ee.manifestModel,me=ee.mediaPlayerModel,xe=ee.fragmentModel,_e=ee.abrController,Ie=ee.playbackController,Te=ee.mediaController,ke=ee.textController,Ue=ee.dashMetrics,Fe=ee.settings,je=ee.boxParser,Pe=ee.segmentBlacklistController;function Ce(){return be.id}function Oe(){return q}function Ze(){return Q.getIsTextTrack(le.getData())}function st(){W=[],ae=null,$=0,ne=!1,z=!1}function Et(Dt){var vn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Dt.sender){if(Ie.getIsManifestUpdateInProgress())return void jt();if((!Ze()||ke.isTextEnabled())&&ce&&Dt.representationId&&!ce.appendInitSegmentFromCache(Dt.representationId)){var Rn=le.getCurrentRepresentation();if(0===Rn.range)return void Kt();var Yn=te?te.getInitRequest(ae,Rn):null;Yn?xe.executeRequest(Yn):vn&&(De.setInitSegmentRequired(!0),jt())}}}function Kt(Dt){var vn=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ie.getIsManifestUpdateInProgress()||ce.getIsPruningInProgress())jt();else{var Rn=Yt();Rn?(ne=!1,_t(Rn)):At(vn)}}function _t(Dt){isNaN(Dt.startTime+Dt.duration)||($=Dt.startTime+Dt.duration),Dt.delayLoadingTime=(new Date).getTime()+De.getTimeToLoadDelay(),De.setTimeToLoadDelay(0),function Pt(Dt){var vn=Dt.url;return Dt.range&&(vn=vn.concat("_",Dt.range)),Pe.contains(vn)}(Dt)?(Le.warn("Fragment request url ".concat(Dt.url," for stream id ").concat(be.id," and media type ").concat(q," is on the ignore list and will be skipped")),jt()):(Le.debug("Next fragment request url for stream id ".concat(be.id," and media type ").concat(q," is ").concat(Dt.url)),xe.executeRequest(Dt))}function At(Dt){var Rn,vn=le.getCurrentRepresentation();if(!Fe.get().streaming.gaps.enableSeekFix||!ne&&0!==Ie.getTime()||(ye?ye&&vn.segmentInfoType===C.default.SEGMENT_TIMELINE&&(Rn=te.getValidTimeAheadOfTargetTime($,ae,vn,Fe.get().streaming.gaps.threshold)):Rn=te.getValidTimeAheadOfTargetTime($,ae,vn,Fe.get().streaming.gaps.threshold),isNaN(Rn)||Rn===$)){if(te.isLastSegmentRequested(vn,$)){var ar=te.getCurrentIndex();return Le.debug("Segment requesting for stream ".concat(be.id," has finished")),ue.trigger(b.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:ar},{streamId:be.id,mediaType:q}),ce.segmentRequestingCompleted(ar),void De.clearScheduleTimer()}Dt&&jt()}else Ie.isSeeking()||0===Ie.getTime()?(Le.warn("Adjusting playback time ".concat(Rn," because of gap in the manifest. Seeking by ").concat(Rn-$)),Ie.seek(Rn,!1,!1)):(Le.warn("Adjusting buffering time ".concat(Rn," because of gap in the manifest. Adjusting time by ").concat(Rn-$)),bn(Rn),Dt&&jt())}function Yt(){var vn,Dt=zt();if(isNaN($)||Oe()===e.default.TEXT&&!ke.isTextEnabled())return null;var Rn=ne;if(te){var Yn=le&&Dt?le.getRepresentationForQuality(Dt.quality):null;vn=Rn?te.getSegmentRequestForTime(ae,Yn,$):te.getNextSegmentRequest(ae,Yn)}return vn}function jt(){De.startScheduleTimer(Ie.getLowLatencyModeEnabled()?Fe.get().streaming.scheduling.lowLatencyTimeout:Fe.get().streaming.scheduling.defaultTimeout)}function en(Dt){Dt.error||(De.setCurrentRepresentation(Q.convertRepresentationToRepresentationInfo(Dt.currentRepresentation)),ce.getIsBufferingCompleted()||ce.updateBufferTimestampOffset(Dt.currentRepresentation))}function an(Dt){Ue.addBufferState(q,Dt.state,De.getBufferTarget()),Dt.state===R.default.BUFFER_EMPTY&&!Ie.isSeeking()&&(Le.info("Buffer is empty! Stalling!"),Ue.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REBUFFERING_REASON))}function Ln(Dt){xe.syncExecutedRequestsWithBufferedRange(ce.getBuffer().getAllBufferRanges(),be.duration),Dt.quotaExceeded&&Dt.from>Ie.getTime()&&bn(Dt.from),Dt.hasEnoughSpaceToAppend&&Dt.quotaExceeded&&De.startScheduleTimer()}function wn(Dt){if(Dt&&Dt.lastRequestAppended&&Dt.lastRequestAppended.url){var vn=Dt.lastRequestAppended.url;Dt.lastRequestAppended.range&&(vn=vn.concat("_",Dt.lastRequestAppended.range)),Le.warn("Blacklisting segment with url ".concat(vn)),Pe.add(vn)}}function Qe(){Ct(),z=!1}function mt(Dt){Le.info("onFragmentLoadingAbandoned request: "+Dt.request.url+" has been aborted"),!Ie.isSeeking()&&!De.getSwitchStrack()&&!z&&(Le.info("onFragmentLoadingAbandoned request: "+Dt.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Dt.request&&Dt.request.isInitializationRequest()?De.setInitSegmentRequired(!0):bn(Dt.request.startTime+Dt.request.duration/2),De.startScheduleTimer(0))}function Ft(Dt){Le.info("OnFragmentLoadingCompleted for stream id "+be.id+" and media type "+q+" - Url:",Dt.request?Dt.request.url:"undefined",Dt.request.range?", Range:"+Dt.request.range:""),Ze()&&De.startScheduleTimer(0),Dt.error&&Dt.request.serviceLocation&&function tn(Dt){Le.info("Fragment loading completed with an error"),Dt&&Dt.request&&Dt.request.type&&(Dt.request.type===I.HTTPRequest.INIT_SEGMENT_TYPE?Et({representationId:Dt.request.representationId,sender:{}},!1):Dt.request.type===I.HTTPRequest.MEDIA_SEGMENT_TYPE&&(bn(Dt.request.startTime+Dt.request.duration/2),Kt({},!1)))}(Dt)}function Wt(){bn(Ie.getTime()),ut().startScheduleTimer()}function vt(Dt){var vn=Dt.currentTrackInfo;if(vn){var Rn=W.find(function(Yn){return Yn.index===vn.index&&Yn.lang===vn.lang});Rn&&pn(Rn).then(function(){ce.setIsBufferingCompleted(!1),bn(Ie.getTime()),De.setInitSegmentRequired(!0),De.startScheduleTimer()})}}function pt(Dt){bn(Dt.quotaExceededTime),De.clearScheduleTimer()}function Xe(){return ce?ce.getBuffer():null}function pn(Dt){Dt!==ae&&(!Dt||!ae||Dt.type===ae.type)&&(ae=Dt);var vn=Q.getRealAdaptation(be,ae),Rn=Q.getVoRepresentations(ae);if(le){var br,Yn=le.getData(),ar=_e.getMaxAllowedIndexFor(q,be.id),ur=_e.getMinAllowedIndexFor(q,be.id),Hr=null;return null!==Yn&&Yn.id===vn.id||q===e.default.TEXT?br=_e.getQualityFor(q,be.id):(Hr=_e.getThroughputHistory().getAverageThroughput(q,ye)||_e.getInitialBitrateFor(q,be.id),br=_e.getQualityForBitrate(ae,Hr,be.id)),void 0!==ur&&br<ur&&(br=ur),br>ar&&(br=ar),le.updateData(vn,Rn,q,ae.isFragmented,br)}return Promise.resolve()}function ut(){return De}function zt(Dt){var vn;return void 0!==Dt?(Object(p.checkInteger)(Dt),vn=le?le.getRepresentationForQuality(Dt):null):vn=le?le.getCurrentRepresentation():null,Q.convertRepresentationToRepresentationInfo(vn)}function dn(){return!!ce&&ce.getIsBufferingCompleted()}function Rt(Dt){var vn=Dt.chunk,Rn=vn.bytes,Yn=vn.quality,ar=zt(Yn),ur=le&&ar?le.getRepresentationForQuality(ar.quality):null;if(ar&&ur){var br=Q.getEventsFor(ar.mediaInfo,null,be),Cr=Q.getEventsFor(ar,ur,be);if(br&&br.length>0||Cr&&Cr.length>0){var Er=function sn(Dt,vn,Rn,Yn){try{for(var ar={},ur=[],br=Rn.concat(Yn),Cr=0,Hr=br.length;Cr<Hr;Cr++)ar[br[Cr].schemeIdUri+"/"+br[Cr].value]=br[Cr];var Er=Object(S.default)(fe).getInstance().parse(Dt),Ii=Er.getBoxes("emsg");if(!Ii||0===Ii.length)return ur;for(var Si=Er.getBox("sidx"),ti=!Si||isNaN(Si.earliest_presentation_time)||isNaN(Si.timescale)?vn&&!isNaN(vn.mediaStartTime)?vn.mediaStartTime:0:Si.earliest_presentation_time/Si.timescale,oi=Math.max(ti,0),Yi=le.getCurrentRepresentation(),si=0,bi=Ii.length;si<bi;si++){var Lr=Q.getEvent(Ii[si],ar,oi,Yi);Lr&&ur.push(Lr)}return ur}catch(Do){return[]}}(Rn,xe.getRequests({state:U.default.FRAGMENT_MODEL_EXECUTED,quality:Yn,index:vn.index})[0],br,Cr);ue.trigger(b.default.INBAND_EVENTS,{events:Er},{streamId:be.id})}}}function Ot(){var Dt=Ie.getTime();Fe.get().streaming.buffer.flushBufferAtTrackSwitch&&Ie.seek(Dt+.001,!1,!0),bn(Dt),ce.setSeekTarget(Dt),De.startScheduleTimer()}function Ct(){var Dt=Ie.getTime(),vn=ce.getContinuousBufferTimeForTargetTime(Dt);bn(isNaN(vn)?Dt:vn),De.startScheduleTimer()}function qt(Dt){Dt&&!isNaN(Dt.time)&&(bn(Dt.time),ce.setSeekTarget(Dt.time))}function bn(Dt){$=Dt,ne=!0}return He={initialize:function oe(Dt,vn,Rn){X=Object(A.default)(fe).create({events:b.default,eventBus:ue,streamInfo:be,timelineConverter:de,dashConstants:C.default,segmentBaseController:ee.segmentBaseController,type:q}),(te=Object(k.default)(fe).create({streamInfo:be,type:q,timelineConverter:de,dashMetrics:Ue,mediaPlayerModel:me,baseURLController:ee.baseURLController,errHandler:se,segmentsController:X,settings:Fe,boxParser:je,events:b.default,eventBus:ue,errors:L.default,debug:Object(O.default)(fe).getInstance(),requestModifier:Object(P.default)(fe).getInstance(),dashConstants:C.default,constants:e.default,urlUtils:Object(y.default)(fe).getInstance()})).initialize(ye=be.manifestInfo.isDynamic),_e.registerStreamType(q,He),le=Object(h.default)(fe).create({streamInfo:be,type:q,abrController:_e,dashMetrics:Ue,playbackController:Ie,timelineConverter:de,dashConstants:C.default,events:b.default,eventBus:ue,errors:L.default,isDynamic:ye,segmentsController:X}),(ce=function Gt(Dt,vn){return Dt?Dt!==e.default.TEXT||vn?Object(j.default)(fe).create({streamInfo:be,type:Dt,mediaPlayerModel:me,manifestModel:pe,fragmentModel:xe,errHandler:se,mediaController:Te,representationController:le,adapter:Q,textController:ke,abrController:_e,playbackController:Ie,settings:Fe}):Object(F.default)(fe).create({streamInfo:be,type:Dt,mimeType:V,fragmentModel:xe,textController:ke,errHandler:se,settings:Fe}):(se.error(new B.default(L.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,L.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(q,Rn))&&ce.initialize(Dt),(De=Object(D.default)(fe).create({streamInfo:be,type:q,mimeType:V,adapter:Q,dashMetrics:Ue,mediaPlayerModel:me,fragmentModel:xe,abrController:_e,playbackController:Ie,textController:ke,mediaController:Te,bufferController:ce,settings:Fe})).initialize(vn),$=0,ne=!1},getStreamId:Ce,getType:Oe,isUpdating:function ct(){return!!le&&le.isUpdating()},getBufferController:function yt(){return ce},getFragmentModel:function Zt(){return xe},getScheduleController:ut,getRepresentationController:function rt(){return le},getRepresentationInfo:zt,getBufferLevel:function It(){return ce?ce.getBufferLevel():0},isBufferingCompleted:dn,createBufferSinks:function Fn(Dt){var vn=Xe();return vn?Promise.resolve(vn):ce?ce.createBufferSink(ae,Dt):Promise.resolve(null)},updateStreamInfo:function Jt(Dt){return be=Dt,dn()?Promise.resolve():ce.updateAppendWindow()},getStreamInfo:function on(){return be},selectMediaInfo:pn,clearMediaInfoArray:function Wn(){W=[]},addMediaInfo:function Mn(Dt){-1===W.indexOf(Dt)&&W.push(Dt)},prepareTrackSwitch:function Un(){return new Promise(function(Dt){Le.debug("Preparing track switch for type ".concat(q));var vn=q===e.default.TEXT||Fe.get().streaming.trackSwitchMode[q]===e.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ie.getTimeToStreamEnd(be)>Fe.get().streaming.buffer.stallThreshold;if(ce.getIsBufferingCompleted()&&!vn)return ce.prepareForNonReplacementTrackSwitch(ae.codec).then(function(){ue.trigger(b.default.BUFFERING_COMPLETED,{},{streamId:be.id,mediaType:q})}).catch(function(){ue.trigger(b.default.BUFFERING_COMPLETED,{},{streamId:be.id,mediaType:q})}),void Dt();De.clearScheduleTimer(),De.setSwitchTrack(!0),vn?(ue.trigger(b.default.BUFFER_REPLACEMENT_STARTED,{mediaType:q,streamId:be.id},{mediaType:q,streamId:be.id}),xe.abortRequests(),ce.prepareForReplacementTrackSwitch(ae.codec).then(function(){var Rn=zt();return ce.updateBufferTimestampOffset(Rn)}).then(function(){Ot(),Dt()}).catch(function(){Ot(),Dt()})):ce.prepareForNonReplacementTrackSwitch(ae.codec).then(function(){Ct(),Dt()}).catch(function(){Ct(),Dt()})})},prepareQualityChange:function Vn(Dt){Le.debug("Preparing quality switch for type ".concat(q));var vn=Dt.newQuality;z=!0,De.clearScheduleTimer();var Rn=zt(vn);De.setCurrentRepresentation(Rn),le.prepareQualityChange(vn),xe.abortRequests(),ce.updateBufferTimestampOffset(Rn).then(function(){Dt.reason&&Dt.reason.forceReplace?function Hn(){ue.trigger(b.default.BUFFER_REPLACEMENT_STARTED,{mediaType:q,streamId:be.id},{mediaType:q,streamId:be.id}),ce.prepareForReplacementQualitySwitch().then(function(){Ot(),z=!1}).catch(function(){Ot(),z=!1})}():Fe.get().streaming.buffer.fastSwitchEnabled?function it(Dt){var vn=Ie.getTime(),Rn=1.5*(isNaN(Dt.fragmentDuration)?1:Dt.fragmentDuration),Yn=xe.getRequests({state:U.default.FRAGMENT_MODEL_EXECUTED,time:vn+Rn,threshold:0})[0];if(Yn&&!Ze()){var ar=ce.getBufferLevel(),ur=_e.getAbandonmentStateFor(be.id,q);Yn.quality<Dt.quality&&ar>=Rn&&ur!==R.default.ABANDON_LOAD?(bn(vn+Rn),De.setCheckPlaybackQuality(!1),De.startScheduleTimer()):Qe()}else De.startScheduleTimer();z=!1}(Rn):Qe(),Ue.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Ue.createPlaylistTraceMetrics(Rn.id,1e3*Ie.getTime(),Ie.getPlaybackRate())})},getMediaInfo:function Qn(){return ae},getMediaSource:function gr(){return ce.getMediaSource()},setMediaSource:function Ir(Dt){ce.setMediaSource(Dt)},getBuffer:Xe,setExplicitBufferingTime:bn,finalisePlayList:function Nn(Dt,vn){Ue.pushPlayListTraceMetrics(Dt,vn)},probeNextRequest:function kt(){var Dt=zt(),vn=le&&Dt?le.getRepresentationForQuality(Dt.quality):null;return te.getNextSegmentRequestIdempotent(ae,vn)},prepareInnerPeriodPlaybackSeeking:function xt(Dt){return new Promise(function(vn){if(ce.hasBufferAtTime(Dt.seekTime))return ce.pruneBuffer(),void vn();De.clearScheduleTimer(),xe.abortRequests(),ce.prepareForPlaybackSeek().then(function(){var Yn=ce.getAllRangesWithSafetyFactor(Dt.seekTime);return ce.clearBuffers(Yn)}).then(function(){var Yn=ce.getContinuousBufferTimeForTargetTime(Dt.seekTime);if(!isNaN(Yn)&&!isNaN(be.duration)&&isFinite(be.duration)&&Yn>=be.start+be.duration)ce.setIsBufferingCompleted(!0),vn();else{var ar=isNaN(Yn)?Dt.seekTime:Yn;bn(ar),ce.setSeekTarget(ar);var ur=[];ur.push(ce.updateAppendWindow());var br=zt();ur.push(ce.updateBufferTimestampOffset(br)),Promise.all(ur).then(function(){De.setInitSegmentRequired(!0),De.setCheckPlaybackQuality(!1),De.startScheduleTimer(),vn()})}}).catch(function(Yn){Le.error(Yn)})})},prepareOuterPeriodPlaybackSeeking:function tt(){return new Promise(function(Dt,vn){try{De.clearScheduleTimer(),xe.abortRequests(),ce.prepareForPlaybackSeek().then(function(){return ce.pruneAllSafely()}).then(function(){Dt()})}catch(Rn){vn(Rn)}})},reset:function et(Dt,vn){te&&te.reset(),ce&&(ce.reset(Dt,vn),ce=null),De&&(De.reset(),De=null),le&&(le.reset(),le=null),X&&(X=null),_e&&_e.unRegisterStreamType(Ce(),q),ue.off(b.default.DATA_UPDATE_COMPLETED,en,He),ue.off(b.default.INIT_FRAGMENT_NEEDED,Et,He),ue.off(b.default.MEDIA_FRAGMENT_NEEDED,Kt,He),ue.off(b.default.MEDIA_FRAGMENT_LOADED,Rt,He),ue.off(b.default.BUFFER_LEVEL_STATE_CHANGED,an,He),ue.off(b.default.BUFFER_CLEARED,Ln,He),ue.off(b.default.SEEK_TARGET,qt,He),ue.off(b.default.FRAGMENT_LOADING_ABANDONED,mt,He),ue.off(b.default.FRAGMENT_LOADING_COMPLETED,Ft,He),ue.off(b.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Wt,He),ue.off(b.default.SET_NON_FRAGMENTED_TEXT,vt,He),ue.off(b.default.QUOTA_EXCEEDED,pt,He),ue.off(b.default.SOURCE_BUFFER_ERROR,wn,He),st(),q=null,be=null}},function K(){Le=Object(O.default)(fe).getInstance().getLogger(He),st(),ue.on(b.default.DATA_UPDATE_COMPLETED,en,He,{priority:_.default.EVENT_PRIORITY_HIGH}),ue.on(b.default.INIT_FRAGMENT_NEEDED,Et,He),ue.on(b.default.MEDIA_FRAGMENT_NEEDED,Kt,He),ue.on(b.default.MEDIA_FRAGMENT_LOADED,Rt,He),ue.on(b.default.BUFFER_LEVEL_STATE_CHANGED,an,He),ue.on(b.default.BUFFER_CLEARED,Ln,He),ue.on(b.default.SEEK_TARGET,qt,He),ue.on(b.default.FRAGMENT_LOADING_ABANDONED,mt,He),ue.on(b.default.FRAGMENT_LOADING_COMPLETED,Ft,He),ue.on(b.default.QUOTA_EXCEEDED,pt,He),ue.on(b.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Wt,He),ue.on(b.default.SET_NON_FRAGMENTED_TEXT,vt,He),ue.on(b.default.SOURCE_BUFFER_ERROR,wn,He)}(),He}H.__dashjs_factory_name="StreamProcessor",w.default=u.default.getClassFactory(H)},"./src/streaming/XlinkLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/DashJSError.js"),C=i("./src/streaming/net/URLLoader.js"),R=i("./src/streaming/vo/metrics/HTTPRequest.js"),U=i("./src/streaming/vo/TextRequest.js"),j=i("./src/core/EventBus.js"),F=i("./src/core/events/Events.js"),D=i("./src/core/FactoryMaker.js"),h=i("./src/core/errors/Errors.js");function u(p){p=p||{};var b=this.context,k=Object(j.default)(b).getInstance(),L=Object(C.default)(b).create({errHandler:p.errHandler,dashMetrics:p.dashMetrics,mediaPlayerModel:p.mediaPlayerModel,requestModifier:p.requestModifier,errors:h.default});return{load:function O(y,S,E){var A=function(ee,fe){S.resolved=!0,S.resolvedContent=ee||null,k.trigger(F.default.XLINK_ELEMENT_LOADED,{element:S,resolveObject:E,error:ee||fe?null:new e.default(h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+y)})};if("urn:mpeg:dash:resolve-to-zero:2013"===y)A(null,!0);else{var I=new U.default(y,R.HTTPRequest.XLINK_EXPANSION_TYPE);L.load({request:I,success:function(ee){A(ee)},error:function(){A(null)}})}},reset:function P(){L&&(L.abort(),L=null)}}}u.__dashjs_factory_name="XlinkLoader",w.default=D.default.getClassFactory(u)},"./src/streaming/constants/ConformanceViolationConstants.js":function(Ge,w,i){"use strict";i.r(w),w.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);var h=new(function(){function u(){(function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.init()}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),u}());w.default=h},"./src/streaming/constants/MetricsConstants.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);var h=new(function(){function u(){(function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.init()}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),u}());w.default=h},"./src/streaming/constants/ProtectionConstants.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);var h=new(function(){function u(){(function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.init()}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),u}());w.default=h},"./src/streaming/controllers/AbrController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/rules/abr/ABRRulesCollection.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/streaming/constants/MetricsConstants.js"),U=i("./src/streaming/vo/BitrateInfo.js"),j=i("./src/streaming/models/FragmentModel.js"),F=i("./src/core/EventBus.js"),D=i("./src/core/events/Events.js"),h=i("./src/core/FactoryMaker.js"),u=i("./src/streaming/rules/RulesContext.js"),p=i("./src/streaming/rules/SwitchRequest.js"),_=i("./src/streaming/rules/SwitchRequestHistory.js"),b=i("./src/streaming/rules/DroppedFramesHistory.js"),k=i("./src/streaming/rules/ThroughputHistory.js"),L=i("./src/core/Debug.js"),B=i("./src/streaming/vo/metrics/HTTPRequest.js"),O=i("./src/streaming/utils/SupervisorTools.js"),P=i("./src/streaming/MediaPlayerEvents.js");function A(){var ue,be,q,se,V,de,Q,pe,me,xe,_e,Ie,Te,ke,Ue,Fe,je,Pe,He,Le,ye,ae,W,ce,De,le,H=this.context,ee=Object(L.default)(H).getInstance(),fe=Object(F.default)(H).getInstance();function K(){V={},de={},pe={},Q={},He={},ae={},W={},ce={},void 0===xe&&(xe=!1),Le&&Le.reset(),Pe=void 0,Le=void 0,ye=void 0,clearTimeout(me),me=null}function Ze(Xe){var yt=Xe.request.mediaType,Zt=Xe.streamId;if(yt&&Zt&&Q[Zt]&&le.get().streaming.abr.autoSwitchBitrate[yt]){var Jt=Q[Zt][yt];if(Jt){var on=Object(u.default)(H).create({abrController:ue,streamProcessor:Jt,currentRequest:Xe.request,useBufferOccupancyABR:ae[yt],useL2AABR:W[yt],useLoLPABR:ce[yt],videoModel:ke}),pn=q.shouldAbandonFragment(on,Zt);pn.quality>p.default.NO_CHANGE&&Jt.getFragmentModel().getRequests({state:j.default.FRAGMENT_MODEL_LOADING,index:Xe.request.index})[0]&&(pe[Zt][yt].state=R.default.ABANDON_LOAD,He[Zt][yt].reset(),He[Zt][yt].push({oldValue:en(yt,Zt),newValue:pn.quality,confidence:1,reason:pn.reason}),an(yt,se.getActiveStreamInfo(),pn.quality,pn.reason),clearTimeout(me),me=setTimeout(function(){pe[Zt][yt].state=R.default.ALLOW_LOAD,me=null},le.get().streaming.abandonLoadTimeout))}}}function st(Xe){Xe.mediaType===C.default.VIDEO&&(void 0!==Pe&&Le.push(Xe.streamId,Pe,ke.getPlaybackQuality()),Pe=Xe.newQuality)}function et(Xe){Xe.metric===R.default.HTTP_REQUEST&&Xe.value&&Xe.value.type===B.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Xe.mediaType===C.default.AUDIO||Xe.mediaType===C.default.VIDEO)&&ye.push(Xe.mediaType,Xe.value,le.get().streaming.abr.useDeadTimeLatency),Xe.metric===R.default.BUFFER_LEVEL&&(Xe.mediaType===C.default.AUDIO||Xe.mediaType===C.default.VIDEO)&&function Qe(Xe,yt){le.get().streaming.abr.ABRStrategy===C.default.ABR_STRATEGY_DYNAMIC&&function mt(Xe,yt){try{var Zt=Ue.getStableBufferTime(),pn=ae[Xe],Mn=yt>(pn?.5*Zt:Zt);ae[Xe]=Mn,Mn!==pn&&be.info(Mn?"["+Xe+"] switching from throughput to buffer occupancy ABR rule (buffer: "+yt.toFixed(3)+").":"["+Xe+"] switching from buffer occupancy to throughput ABR rule (buffer: "+yt.toFixed(3)+").")}catch(Wn){be.error(Wn)}}(Xe,yt)}(Xe.mediaType,.001*Xe.value.level)}function ct(Xe,yt){try{return V[yt]=V[yt]||{},V[yt].hasOwnProperty(Xe)||(V[yt][Xe]=0),function At(Xe,yt,Zt){if(yt!==C.default.VIDEO||!le.get().streaming.abr.limitBitrateByPortal||!Q[Zt]||!Q[Zt][yt])return Xe;xe||pt();var Jt=Q[Zt][yt].getStreamInfo(),on=Te.getAdaptationForType(Jt.index,yt,Jt).Representation_asArray,pn=Xe;if(_e>0&&Ie>0){for(;pn>0&&on[pn]&&_e<on[pn].width&&_e-on[pn-1].width<on[pn].width-_e;)pn-=1;for(;pn<on.length-1&&on[pn].width===on[pn+1].width;)pn+=1}return pn}(function _t(Xe,yt,Zt){var Jt=V[Zt][yt],on=le.get().streaming.abr.maxRepresentationRatio[yt];return isNaN(on)||on>=1||on<0?Xe:Math.min(Xe,Math.round(Jt*on))}(function Kt(Xe,yt){var Zt=V[yt][Xe],Jt=Zt;if(!Q[yt]||!Q[yt][Xe])return Jt;var on=xt(Xe,yt);void 0!==on&&(Jt=Math.max(Zt,on));var pn=function tt(Xe,yt){try{var Zt=Ue.getAbrBitrateParameter("maxBitrate",Xe);return Zt>-1?Hn(Q[yt][Xe].getMediaInfo(),Zt,yt):void 0}catch(Jt){return}}(Xe,yt);return void 0!==pn&&(Jt=Math.min(Jt,pn)),Jt}(Xe,yt),Xe,yt),Xe,yt)}catch(Jt){return}}function xt(Xe,yt){try{return function Et(Xe,yt){try{var Zt=Ue.getAbrBitrateParameter("minBitrate",Xe);if(Zt>-1){var Jt=Q[yt][Xe].getMediaInfo(),on=it(Jt),pn=Hn(Jt,Zt,yt);return on[pn]&&pn<on.length-1&&on[pn].bitrate<1e3*Zt&&pn++,pn}return}catch(Mn){return}}(Xe,yt)}catch(Zt){return}}function en(Xe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return yt||(yt=se.getActiveStreamInfo().id),Xe&&Q[yt]&&Q[yt][Xe]&&yt?(de[yt]=de[yt]||{},de[yt].hasOwnProperty(Xe)||(de[yt][Xe]=0),de[yt][Xe]):0}catch(Jt){return 0}}function an(Xe,yt,Zt){var Jt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(yt&&yt.id&&Xe){var on=yt.id,pn=en(Xe,on);Object(O.checkInteger)(Zt);var Mn=ct(Xe,on);Zt!==pn&&Zt>=0&&Zt<=Mn&&wn(Xe,pn,Zt,Mn,Jt,on)}}function wn(Xe,yt,Zt,Jt,on,pn){if(Xe&&Q[pn]&&Q[pn][Xe]){var Mn=Q[pn][Xe].getStreamInfo(),Wn=Mn&&Mn.manifestInfo&&Mn.manifestInfo.isDynamic,Qn=De.getCurrentBufferLevel(Xe);be.info("Stream ID: "+pn+" ["+Xe+"] switch from "+yt+" to "+Zt+"/"+Jt+" (buffer: "+Qn+") "+(on?JSON.stringify(on):".")),de[pn]=de[pn]||{},de[pn][Xe]=Zt;var gr=function Vn(Xe,yt,Zt){if(yt&&Q&&Q[Xe]&&Q[Xe][yt]){var Jt=it(Q[Xe][yt].getMediaInfo());return Jt[Zt]?Jt[Zt]:null}return null}(pn,Xe,Zt);fe.trigger(D.default.QUALITY_CHANGE_REQUESTED,{oldQuality:yt,newQuality:Zt,reason:on,streamInfo:Mn,bitrateInfo:gr,maxIdx:Jt,mediaType:Xe},{streamId:Mn.id,mediaType:Xe});var Ir=ye.getAverageThroughput(Xe,Wn);isNaN(Ir)||je.setSavedBitrateSettings(Xe,Ir)}}function Hn(Xe,yt,Zt){var Jt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,on=Xe&&Xe.type?Q[Zt][Xe.type].getRepresentationInfo():null;if(le.get().streaming.abr.useDeadTimeLatency&&Jt&&on&&on.fragmentDuration){var pn=on.fragmentDuration;if((Jt/=1e3)>pn)return 0;yt*=1-Jt/pn}for(var Wn=it(Xe),Qn=Wn.length-1;Qn>=0;Qn--)if(1e3*yt>=Wn[Qn].bitrate)return Qn;return 0}function it(Xe){var yt=[];if(!Xe||!Xe.bitrateList)return yt;for(var on,Zt=Xe.bitrateList,Jt=Xe.type,pn=0,Mn=Zt.length;pn<Mn;pn++)(on=new U.default).mediaType=Jt,on.qualityIndex=pn,on.bitrate=Zt[pn].bandwidth,on.width=Zt[pn].width,on.height=Zt[pn].height,on.scanType=Zt[pn].scanType,yt.push(on);return yt}function pt(){if(ke){var yt=le.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;_e=ke.getClientWidth()*yt,Ie=ke.getClientHeight()*yt}}return ue={initialize:function z(){Le=Object(b.default)(H).create(),ye=Object(k.default)(H).create({settings:le}),(q=Object(e.default)(H).create({dashMetrics:De,customParametersModel:Fe,mediaPlayerModel:Ue,settings:le})).initialize(),fe.on(P.default.QUALITY_CHANGE_RENDERED,st,ue),fe.on(P.default.METRIC_ADDED,et,ue),fe.on(D.default.LOADING_PROGRESS,Ze,ue)},isPlayingAtTopQuality:function Wt(Xe){var yt=Xe?Xe.id:null,Zt=en(C.default.AUDIO,yt),Jt=en(C.default.VIDEO,yt);return Zt===ct(C.default.AUDIO,yt)&&Jt===ct(C.default.VIDEO,yt)},updateTopQualityIndex:function tn(Xe){var yt=Xe.type,Zt=Xe.streamInfo.id,Jt=Xe.representationCount-1;return V[Zt]=V[Zt]||{},V[Zt][yt]=Jt,Jt},clearDataForStream:function rt(Xe){Le&&Le.clearForStream(Xe),Q[Xe]&&delete Q[Xe],He[Xe]&&delete He[Xe],pe[Xe]&&delete pe[Xe]},getThroughputHistory:function Ft(){return ye},getBitrateList:it,getQualityForBitrate:Hn,getTopBitrateInfoFor:function Pt(Xe){var yt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(yt||(yt=se.getActiveStreamInfo().id),Xe&&Q&&Q[yt]&&Q[yt][Xe]){var Zt=ct(Xe,yt),Jt=it(Q[yt][Xe].getMediaInfo());return Jt[Zt]?Jt[Zt]:null}return null},getMinAllowedIndexFor:xt,getMaxAllowedIndexFor:ct,getInitialBitrateFor:function Yt(Xe,yt){if(function Oe(){if(!je||!je.hasOwnProperty("getSavedBitrateSettings"))throw new Error(C.default.MISSING_CONFIG_ERROR)}(),Xe===C.default.TEXT)return NaN;var Zt=je.getSavedBitrateSettings(Xe),Jt=Ue.getAbrBitrateParameter("initialBitrate",Xe),on=le.get().streaming.abr.initialRepresentationRatio[Xe];if(-1===Jt)if(on>-1){var pn=Q[yt][Xe].getStreamInfo(),Mn=Te.getAdaptationForType(pn.index,Xe,pn).Representation_asArray;Jt=Array.isArray(Mn)?Mn[Math.max(Math.round(Mn.length*on)-1,0)].bandwidth/1e3:0}else Jt=isNaN(Zt)?Xe===C.default.VIDEO?1e3:100:Zt;return Jt},getQualityFor:en,getAbandonmentStateFor:function Ln(Xe,yt){return pe[Xe]&&pe[Xe][yt]?pe[Xe][yt].state:null},setPlaybackQuality:an,checkPlaybackQuality:function jt(Xe,yt){try{if(!(Xe&&Q&&Q[yt]&&Q[yt][Xe]))return!1;if(Le){var Zt=ke.getPlaybackQuality();Zt&&Le.push(yt,Pe,Zt)}if(!le.get().streaming.abr.autoSwitchBitrate[Xe])return!1;var Jt=en(Xe,yt),on=Object(u.default)(H).create({abrController:ue,switchHistory:He[yt][Xe],droppedFramesHistory:Le,streamProcessor:Q[yt][Xe],currentValue:Jt,useBufferOccupancyABR:ae[Xe],useL2AABR:W[Xe],useLoLPABR:ce[Xe],videoModel:ke}),pn=xt(Xe,yt),Mn=ct(Xe,yt),Wn=q.getMaxQuality(on),Qn=Wn.quality;return void 0!==pn&&(Qn>p.default.NO_CHANGE?Qn:Jt)<pn&&(Qn=pn),Qn>Mn&&(Qn=Mn),He[yt][Xe].push({oldValue:Jt,newValue:Qn}),Qn>p.default.NO_CHANGE&&Qn!==Jt&&(pe[yt][Xe].state===R.default.ALLOW_LOAD||Qn<Jt)&&(wn(Xe,Jt,Qn,Mn,Wn.reason,yt),!0)}catch(gr){return!1}},setElementSize:pt,setWindowResizeEventCalled:function vt(Xe){xe=Xe},registerStreamType:function te(Xe,yt){var Zt=yt.getStreamInfo().id;Q[Zt]||(Q[Zt]={}),He[Zt]||(He[Zt]={}),pe[Zt]||(pe[Zt]={}),He[Zt][Xe]=Object(_.default)(H).create(),Q[Zt][Xe]=yt,pe[Zt][Xe]={},pe[Zt][Xe].state=R.default.ALLOW_LOAD,function X(Xe){var yt=le.get().streaming.abr.ABRStrategy;yt===C.default.ABR_STRATEGY_L2A?(ae[Xe]=!1,ce[Xe]=!1,W[Xe]=!0):yt===C.default.ABR_STRATEGY_LoLP?(ae[Xe]=!1,ce[Xe]=!0,W[Xe]=!1):yt===C.default.ABR_STRATEGY_BOLA?(ae[Xe]=!0,ce[Xe]=!1,W[Xe]=!1):yt===C.default.ABR_STRATEGY_THROUGHPUT?(ae[Xe]=!1,ce[Xe]=!1,W[Xe]=!1):yt===C.default.ABR_STRATEGY_DYNAMIC&&(ae[Xe]=!(!ae||!ae[Xe])&&ae[Xe],ce[Xe]=!1,W[Xe]=!1)}(Xe),Xe===C.default.VIDEO&&pt()},unRegisterStreamType:function $(Xe,yt){try{Q[Xe]&&Q[Xe][yt]&&delete Q[Xe][yt],He[Xe]&&He[Xe][yt]&&delete He[Xe][yt],pe[Xe]&&pe[Xe][yt]&&delete pe[Xe][yt]}catch(Zt){}},setConfig:function Ce(Xe){!Xe||(Xe.streamController&&(se=Xe.streamController),Xe.domStorage&&(je=Xe.domStorage),Xe.mediaPlayerModel&&(Ue=Xe.mediaPlayerModel),Xe.customParametersModel&&(Fe=Xe.customParametersModel),Xe.dashMetrics&&(De=Xe.dashMetrics),Xe.adapter&&(Te=Xe.adapter),Xe.videoModel&&(ke=Xe.videoModel),Xe.settings&&(le=Xe.settings))},reset:function oe(){K(),fe.off(D.default.LOADING_PROGRESS,Ze,ue),fe.off(P.default.QUALITY_CHANGE_RENDERED,st,ue),fe.off(P.default.METRIC_ADDED,et,ue),q&&q.reset()}},function ne(){be=ee.getLogger(ue),K()}(),ue}A.__dashjs_factory_name="AbrController";var I=h.default.getSingletonFactory(A);I.QUALITY_DEFAULT=0,h.default.updateSingletonFactory(A.__dashjs_factory_name,I),w.default=I},"./src/streaming/controllers/BaseURLController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/models/BaseURLTreeModel.js"),C=i("./src/streaming/utils/BaseURLSelector.js"),R=i("./src/streaming/utils/URLUtils.js"),U=i("./src/dash/vo/BaseURL.js"),j=i("./src/core/FactoryMaker.js"),F=i("./src/core/EventBus.js"),D=i("./src/core/events/Events.js");function h(){var u,p,L,B,_=this.context,b=Object(F.default)(_).getInstance(),k=Object(R.default)(_).getInstance();function O(H){L.invalidateSelectedIndexes(H.entry)}return u={reset:function A(){L.reset(),B.reset()},initialize:function I(H){L.setConfig({adapter:p}),function S(H){L.update(H),B.chooseSelector(p.getIsDVB(H))}(H)},resolve:function E(H){var fe=L.getForPath(H).reduce(function(ue,be){var q=B.select(be);return q?(k.isRelative(q.url)?ue.url=k.resolve(q.url,ue.url):(ue.url=q.url,ue.serviceLocation=q.serviceLocation),ue.availabilityTimeOffset=q.availabilityTimeOffset,ue.availabilityTimeComplete=q.availabilityTimeComplete,ue):new U.default},new U.default);if(!k.isRelative(fe.url))return fe},setConfig:function y(H){H.baseURLTreeModel&&(L=H.baseURLTreeModel),H.baseURLSelector&&(B=H.baseURLSelector),H.adapter&&(p=H.adapter)}},function P(){L=Object(e.default)(_).create(),B=Object(C.default)(_).create(),b.on(D.default.SERVICE_LOCATION_BLACKLIST_CHANGED,O,u)}(),u}h.__dashjs_factory_name="BaseURLController",w.default=j.default.getClassFactory(h)},"./src/streaming/controllers/BlacklistController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/EventBus.js");function R(U){U=U||{};var j,F=[],D=Object(C.default)(this.context).getInstance(),h=U.updateEventName,u=U.addBlacklistEventName;function _(B){-1===F.indexOf(B)&&(F.push(B),D.trigger(h,{entry:B}))}function b(B){_(B.entry)}return j={add:_,contains:function p(B){return!!(F.length&&B&&B.length)&&-1!==F.indexOf(B)},reset:function L(){F=[]}},function k(){u&&D.on(u,b,j)}(),j}R.__dashjs_factory_name="BlackListController",w.default=e.default.getClassFactory(R)},"./src/streaming/controllers/BufferController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/constants/MetricsConstants.js"),R=i("./src/streaming/models/FragmentModel.js"),U=i("./src/streaming/SourceBufferSink.js"),j=i("./src/core/EventBus.js"),F=i("./src/core/events/Events.js"),D=i("./src/core/FactoryMaker.js"),h=i("./src/core/Debug.js"),u=i("./src/streaming/utils/InitCache.js"),p=i("./src/streaming/vo/DashJSError.js"),_=i("./src/core/errors/Errors.js"),b=i("./src/streaming/vo/metrics/HTTPRequest.js"),k=i("./src/streaming/MediaPlayerEvents.js"),B=.01,P="BufferController";function y(S){S=S||{};var Q,pe,me,xe,_e,Ie,Te,ke,Ue,Fe,je,Pe,He,Le,ye,ae,W,ce,E=this.context,A=Object(j.default)(E).getInstance(),I=S.errHandler,H=S.fragmentModel,ee=S.representationController,fe=S.adapter,ue=S.textController,be=S.abrController,q=S.playbackController,se=S.streamInfo,V=S.type,de=S.settings;function X(Ot){Ie=Ot}function $(Ot){return fe.convertRepresentationToRepresentationInfo(ee.getRepresentationForQuality(Ot))}function oe(Ot,Ct,Gt){var qt=$(Gt);return Ct&&Ct[V]&&(V===e.default.VIDEO||V===e.default.AUDIO)?Ue.initializeForStreamSwitch(Ot,qt,Ct[V]):Ue.initializeForFirstUse(se,Ot,qt)}function Ce(Ot){de.get().streaming.cacheInitSegments&&(pe.info("Init fragment finished loading saving to",V+"'s init cache"),ye.save(Ot.chunk)),pe.debug("Append Init fragment",V," with representationId:",Ot.chunk.representationId," and quality:",Ot.chunk.quality,", data size:",Ot.chunk.bytes.byteLength),st(Ot.chunk)}function Ze(Ot){st(Ot.chunk,Ot.request)}function st(Ot){Ue.append(Ot,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null).then(function(Gt){ct(Gt)}).catch(function(Gt){ct(Gt)}),Ot.mediaInfo.type===e.default.VIDEO&&sn(F.default.VIDEO_CHUNK_RECEIVED,{chunk:Ot})}function et(Ot){if(Ot&&Ot.length>0)for(var Ct=0,Gt=Ot.length;Ct<Gt;Ct++)pe.debug("Buffered range: "+Ot.start(Ct)+" - "+Ot.end(Ct)+", currentTime = ",q.getTime())}function ct(Ot){if(Ot.error)return 22===Ot.error.code&&function tt(){if(Le=!0,_e=.8*dn(),pe.warn("Quota exceeded, Critical Buffer: "+_e),_e>0){var Ot=Math.max(.2*_e,1),Ct=_e-Ot,Gt=Math.min(de.get().streaming.buffer.bufferTimeAtTopQuality,.9*Ct),qt=Math.min(de.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*Ct),bn={streaming:{buffer:{bufferToKeep:parseFloat(Ot.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Gt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(qt.toFixed(5))}}};de.update(bn)}}(),void((22===Ot.error.code||!kt())&&(pe.warn("Clearing playback buffer to overcome quota exceed situation"),sn(F.default.QUOTA_EXCEEDED,{criticalBufferLevel:_e,quotaExceededTime:Ot.chunk.start}),pt(vt())));if(Ue&&(Qe(),Le=!1,(je=Ot.chunk)&&je.endFragment)){je&&!isNaN(je.index)&&(Te=Math.max(je.index,Te),mt());var Ct=Ue.getAllBufferRanges();je.segmentType===b.HTTPRequest.MEDIA_SEGMENT_TYPE&&(et(Ct),an(),function xt(){if(!isNaN(ce)){if(V!==e.default.AUDIO&&V!==e.default.VIDEO)return void(ce=NaN);var Ot=q.getTime(),Ct=Hn(Ot,0),Gt=Hn(ce,0);if(Ct&&Gt&&Ct.start===Gt.start)return void(ce=NaN);var qt=ee.getCurrentRepresentation().segmentDuration,bn=Hn(ce,qt);!bn||(de.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ot-ce)>qt?ce<=bn.end&&q.seek(Math.max(ce,bn.start),!1,!0):Ot<bn.start&&q.seek(bn.start,!1,!0))}}()),je&&sn(F.default.BYTES_APPENDED_END_FRAGMENT,{quality:je.quality,startTime:je.start,index:je.index,bufferedRanges:Ct,segmentType:je.segmentType,mediaType:V})}}function Pt(){return new Promise(function(Ot,Ct){var Gt=Yt();if(!Gt||0===Gt.length)return an(),void Ot();pt(Gt).then(function(){Ot()}).catch(function(qt){Ct(qt)})})}function Yt(Ot){var Ct=[],Gt=Ue.getAllBufferRanges();if(!Gt||0===Gt.length)return Ct;if(!Ot&&0!==Ot||isNaN(Ot))Ct.push({start:Gt.start(0),end:Gt.end(Gt.length-1)+.5});else{var qt=function jt(Ot,Ct){var Gt=de.get().streaming.buffer.bufferToKeep,qt=Ct.start(0);if(Ot-qt>Gt){var Nn=Math.max(0,Ot-Gt),Dt=H.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:Ot,threshold:B})[0];if(Dt&&(Nn=Math.min(Dt.startTime,Nn)),Nn>0)return{start:qt,end:Nn}}return null}(Ot,Gt),bn=function en(Ot,Ct){var Gt=Ct.end(Ct.length-1)+.5,qt=It(Ot),Nn=se.manifestInfo.duration>=de.get().streaming.buffer.longFormContentDurationThreshold?de.get().streaming.buffer.bufferTimeAtTopQualityLongForm:de.get().streaming.buffer.bufferTimeAtTopQuality,Dt=isNaN(qt)?Ot:Math.min(qt,Ot+Nn);if(Dt>=Ct.end(Ct.length-1))return null;var vn=H.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:Ot,threshold:B})[0];if(vn&&(Dt=Math.max(vn.startTime+vn.duration,Dt)),de.get().streaming.buffer.avoidCurrentTimeRangePruning)for(var Yn=0;Yn<Ct.length;Yn++)if(Ct.start(Yn)<=Ot&&Ot<=Ct.end(Yn)&&Ct.start(Yn)<=Dt&&Dt<=Ct.end(Yn)){var ar=Dt;Dt=Yn+1<Ct.length?Ct.start(Yn+1):Ct.end(Yn)+1,pe.debug("Buffered range ["+Ct.start(Yn)+", "+Ct.end(Yn)+"] overlaps with targetTime "+Ot+" and range to be pruned ["+ar+", "+Gt+"], using ["+Dt+", "+Gt+"] instead"+(Dt<Gt?"":" (no actual pruning)"));break}return Dt<Ct.end(Ct.length-1)?{start:Dt,end:Gt}:null}(Ot,Gt);qt&&Ct.push(qt),bn&&Ct.push(bn)}return Ct}function an(){(!W||V===e.default.TEXT&&ue.isTextEnabled())&&Qe()}function Ln(){Ft()}function wn(){Ft(),ce=NaN}function Hn(Ot,Ct){var Rn,Yn,Gt=Ue.getAllBufferRanges(),qt=0,bn=0,Nn=null,Dt=null,vn=0,ar=isNaN(Ct)?.15:Ct;if(null!=Gt){for(Yn=0,Rn=Gt.length;Yn<Rn;Yn++)if(qt=Gt.start(Yn),bn=Gt.end(Yn),null===Nn)vn=Math.abs(qt-Ot),(Ot>=qt&&Ot<bn||vn<=ar)&&(Nn=qt,Dt=bn);else{if(!((vn=qt-Dt)<=ar))break;Dt=bn}if(null!==Nn)return{start:Nn,end:Dt}}return null}function Qe(){if(q){var Ot=de.get().streaming.gaps.jumpGaps&&!isNaN(de.get().streaming.gaps.smallGapLimit)?de.get().streaming.gaps.smallGapLimit:NaN;xe=Math.max(function it(Ot,Ct){var Gt;return de.get().streaming.gaps.jumpGaps&&(Ct=de.get().streaming.gaps.smallGapLimit),null===(Gt=Hn(Ot,Ct))?0:Gt.end-Ot}(q.getTime()||0,Ot),0),sn(F.default.BUFFER_LEVEL_UPDATED,{mediaType:V,bufferLevel:xe}),Ft()}}function mt(){var Ot=Te>=ke-1,Ct=q.getTimeToStreamEnd(se)-xe<1e-5;(Ot||Ct)&&!me&&(ut(!0),pe.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(se.id," and type ").concat(V)))}function Ft(){V!==e.default.AUDIO&&V!==e.default.VIDEO||((!q.getLowLatencyModeEnabled()&&xe<de.get().streaming.buffer.stallThreshold||0===xe)&&!me?tn(C.default.BUFFER_EMPTY):(me||xe>=de.get().streaming.buffer.stallThreshold||q.getLowLatencyModeEnabled()&&xe>0)&&tn(C.default.BUFFER_LOADED))}function tn(Ot){Fe===Ot||Ot===C.default.BUFFER_EMPTY&&0===q.getTime()||V===e.default.TEXT&&!ue.isTextEnabled()||(Fe=Ot,sn(F.default.BUFFER_LEVEL_STATE_CHANGED,{state:Ot}),sn(Ot===C.default.BUFFER_LOADED?F.default.BUFFER_LOADED:F.default.BUFFER_EMPTY),pe.debug(Ot===C.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Wt(){!Ue||V===e.default.TEXT||me||pt(vt())}function vt(){var Ot=[],Ct=Ue.getAllBufferRanges();if(!Ct||0===Ct.length)return Ot;var Gt=q.getTime(),qt=Math.max(0,Gt-de.get().streaming.buffer.bufferToKeep),bn=H.getRequests({state:R.default.FRAGMENT_MODEL_EXECUTED,time:Gt,threshold:B})[0];if(bn)qt=Math.min(bn.startTime,qt);else if(0===Gt&&q.getIsDynamic())return[];if(Ct.start(0)<=qt){for(var Nn={start:0,end:qt},Dt=0;Dt<Ct.length&&Ct.end(Dt)<=qt;Dt++)Nn.end=Ct.end(Dt);Nn.start<Nn.end&&Ot.push(Nn)}return Ot}function pt(Ot){return new Promise(function(Ct,Gt){if(Ot&&Ue&&0!==Ot.length){var qt=[];Ot.forEach(function(bn){qt.push(function rt(Ot){return new Promise(function(Ct,Gt){Ot.resolve=Ct,Ot.reject=Gt,ae.push(Ot)})}(bn))}),He||Xe(),Promise.all(qt).then(function(){Ct()}).catch(function(bn){Gt(bn)})}else Ct()})}function Xe(){try{if(0===ae.length||!Ue)return pe.debug("Nothing to prune, halt pruning"),ae=[],void(He=!1);var Ot=Ue.getBuffer();if(!Ot||!Ot.buffered||0===Ot.buffered.length)return pe.debug("SourceBuffer is empty (or does not exist), halt pruning"),ae=[],void(He=!1);var Ct=ae.shift();pe.debug("".concat(V,": Removing buffer from: ").concat(Ct.start," to ").concat(Ct.end)),He=!0,q.getTime()<Ct.end&&ut(!1),Ue.remove(Ct).then(function(qt){yt(qt)}).catch(function(qt){yt(qt)})}catch(qt){He=!1}}function yt(Ot){pe.debug("onRemoved buffer from:",Ot.from,"to",Ot.to),et(Ue.getAllBufferRanges()),0===ae.length&&(He=!1,Qe()),Ot.unintended&&(pe.warn("Detected unintended removal from:",Ot.from,"to",Ot.to,"setting streamprocessor time to",Ot.from),sn(F.default.SEEK_TARGET,{time:Ot.from})),He?Xe():(W?W=!1:Qe(),sn(F.default.BUFFER_CLEARED,{from:Ot.from,to:Ot.to,unintended:Ot.unintended,hasEnoughSpaceToAppend:kt(),quotaExceeded:Le}))}function Zt(Ot){return new Promise(function(Ct){Ot&&void 0!==Ot.MSETimeOffset&&Ue&&Ue.updateTimestampOffset?Ue.updateTimestampOffset(Ot.MSETimeOffset).then(function(){Ct()}).catch(function(){Ct()}):Ct()})}function Jt(){return Ue&&!me?Ue.updateAppendWindow(se):Promise.resolve()}function pn(){++Pe*(de.get().streaming.wallclockTimeUpdateInterval/1e3)>=de.get().streaming.buffer.bufferPruningInterval&&(Pe=0,Wt())}function Mn(){Ft()}function ut(Ot){me!==Ot&&((me=Ot)?sn(F.default.BUFFERING_COMPLETED):ke=Number.POSITIVE_INFINITY)}function dn(){try{var Gt,qt,Ot=Ue.getAllBufferRanges(),Ct=0;if(!Ot)return Ct;for(qt=0,Gt=Ot.length;qt<Gt;qt++)Ct+=Ot.end(qt)-Ot.start(qt);return Ct}catch(bn){return 0}}function It(Ot){try{var Ct=Ot,Gt=Ue.getAllBufferRanges();if(!Gt||0===Gt.length)return NaN;for(var qt=0;Ct===Ot&&qt<Gt.length;){var bn=Gt.start(qt),Nn=Gt.end(qt);Ct>=bn&&Ct<=Nn&&(Ct=Nn),qt+=1}return Ct===Ot?NaN:Ct}catch(Dt){}}function kt(){var Ot=dn();return isNaN(Ot)||Ot<_e}function sn(Ot,Ct){A.trigger(Ot,Ct||{},{streamId:se.id,mediaType:V})}function Fn(Ot,Ct){if(_e=Number.POSITIVE_INFINITY,Fe=void 0,ke=Number.POSITIVE_INFINITY,Te=0,je=null,me=!1,He=!1,Le=!1,xe=0,Pe=0,ae=[],ce=NaN,Ue){var Gt=Ue;Ue=null,!Ot&&!Ct&&Gt.abort().then(function(){Gt.reset(Ct),Gt=null})}W=!1}return Q={initialize:function le(Ot){X(Ot),A.on(F.default.INIT_FRAGMENT_LOADED,Ce,Q),A.on(F.default.MEDIA_FRAGMENT_LOADED,Ze,Q),A.on(F.default.WALLCLOCK_TIME_UPDATED,pn,Q),A.on(k.default.PLAYBACK_PLAYING,wn,Q),A.on(k.default.PLAYBACK_PROGRESS,an,Q),A.on(k.default.PLAYBACK_TIME_UPDATED,an,Q),A.on(k.default.PLAYBACK_RATE_CHANGED,Mn,Q),A.on(k.default.PLAYBACK_STALLED,Ln,Q)},getStreamId:function ne(){return se.id},getType:function z(){return V},getBufferControllerType:function te(){return P},createBufferSink:function K(Ot){var Ct=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise(function(Gt,qt){if(ye&&Ot&&Ie){var bn=be.getQualityFor(V,se.id);Ue=Object(U.default)(E).create({mediaSource:Ie,textController:ue,eventBus:A}),oe(Ot,Ct,bn).then(function(){return Zt($(bn))}).then(function(){Gt(Ue)}).catch(function(Nn){pe.fatal("Caught error on create SourceBuffer: "+Nn),I.error(new p.default(_.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,_.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+V)),qt(Nn)})}else Gt(null)})},getBuffer:function Wn(){return Ue},getBufferLevel:function Qn(){return xe},getRangeAt:Hn,hasBufferAtTime:function Vn(Ot){try{var Ct=Ue.getAllBufferRanges();if(!Ct||0===Ct.length)return!1;for(var Gt=0;Gt<Ct.length;){var qt=Ct.start(Gt),bn=Ct.end(Gt);if(Ot>=qt&&Ot<=bn)return!0;Gt+=1}return!1}catch(Nn){return pe.error(Nn),!1}},pruneBuffer:Wt,setMediaSource:X,getMediaSource:function gr(){return Ie},appendInitSegmentFromCache:function Oe(Ot){var Ct=ye.extract(se.id,Ot);return!!Ct&&(pe.info("Append Init fragment",V," with representationId:",Ct.representationId," and quality:",Ct.quality,", data size:",Ct.bytes.byteLength),st(Ct),!0)},getIsBufferingCompleted:function Ir(){return me},setIsBufferingCompleted:ut,getIsPruningInProgress:function zt(){return He},reset:function Un(Ot,Ct){A.off(F.default.INIT_FRAGMENT_LOADED,Ce,this),A.off(F.default.MEDIA_FRAGMENT_LOADED,Ze,this),A.off(F.default.WALLCLOCK_TIME_UPDATED,pn,this),A.off(k.default.PLAYBACK_PLAYING,wn,this),A.off(k.default.PLAYBACK_PROGRESS,an,this),A.off(k.default.PLAYBACK_TIME_UPDATED,an,this),A.off(k.default.PLAYBACK_RATE_CHANGED,Mn,this),A.off(k.default.PLAYBACK_STALLED,Ln,this),Fn(Ot,Ct)},prepareForPlaybackSeek:function Et(){return me&&ut(!1),Ue.abort()},prepareForReplacementTrackSwitch:function Kt(Ot){return new Promise(function(Ct,Gt){Ue.abort().then(function(){return Jt()}).then(function(){return de.get().streaming.buffer.useChangeTypeForTrackSwitch?Ue.changeType(Ot):Promise.resolve()}).then(function(){return Pt()}).then(function(){ut(!1),Ct()}).catch(function(qt){Gt(qt)})})},prepareForNonReplacementTrackSwitch:function At(Ot){return new Promise(function(Ct,Gt){Jt().then(function(){return de.get().streaming.buffer.useChangeTypeForTrackSwitch?Ue.changeType(Ot):Promise.resolve()}).then(function(){Ct()}).catch(function(qt){Gt(qt)})})},prepareForReplacementQualitySwitch:function _t(){return new Promise(function(Ot,Ct){Ue.abort().then(function(){return Jt()}).then(function(){return Pt()}).then(function(){ut(!1),Ot()}).catch(function(Gt){Ct(Gt)})})},updateAppendWindow:Jt,getAllRangesWithSafetyFactor:Yt,getContinuousBufferTimeForTargetTime:It,clearBuffers:pt,pruneAllSafely:Pt,updateBufferTimestampOffset:Zt,setSeekTarget:function Rt(Ot){ce=Ot},segmentRequestingCompleted:function on(Ot){isNaN(Ot)||(ke=Ot,mt())}},function De(){pe=Object(h.default)(E).getInstance().getLogger(Q),ye=Object(u.default)(E).getInstance(),Fn()}(),Q}y.__dashjs_factory_name=P,w.default=D.default.getClassFactory(y)},"./src/streaming/controllers/CatchupController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/core/EventBus.js"),U=i("./src/streaming/constants/Constants.js"),j=i("./src/streaming/MediaPlayerEvents.js"),F=i("./src/core/events/Events.js"),D=i("./src/streaming/constants/MetricsConstants.js"),h=i("./src/core/Utils.js");function u(){var b,k,L,B,O,P,y,S,E,A,p=this.context,_=Object(R.default)(p).getInstance();function q(){k=!1;var Pe=h.default.parseUserAgent();L=Pe&&Pe.browser&&Pe.browser.name&&"safari"===Pe.browser.name.toLowerCase()}function se(){k=!1}function V(Pe){if(Pe.streamId===P.getActiveStreamInfo().id&&E){var He=y.getLiveDelay();y.getBufferLevel()>He/2&&(E=!1)}}function de(Pe){Pe.streamId===P.getActiveStreamInfo().id&&(E=Pe.state===D.default.BUFFER_EMPTY)}function Q(){S.getCatchupModeEnabled()||B.setPlaybackRate(1)}function pe(){y.getIsDynamic()&&S.getCatchupModeEnabled()&&(S.getCatchupPlaybackRates().max>0||S.getCatchupPlaybackRates().min<0)&&!y.isPaused()&&!y.isSeeking()&&function _e(){try{return!(!y.getTime()>0||k)&&(Ie()===U.default.LIVE_CATCHUP_MODE_LOLP?function ke(Pe,He){try{return Math.abs(xe())>0||Pe<He}catch(ye){return!1}}(y.getBufferLevel(),O.get().streaming.liveCatchup.playbackBufferMin):function Te(){try{return Math.abs(xe())>0}catch(He){return!1}}())}catch(ye){return!1}}()&&function me(){if(!k&&B){var Pe,He=B.getPlaybackRate(),Le=S.getCatchupPlaybackRates(),ye=y.getBufferLevel(),ae=xe(),W=S.getCatchupMaxDrift();if(!isNaN(W)&&W>0&&ae>W)A.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),k=!0,y.seekToCurrentLive(!0,!1);else{var ce=y.getCurrentLiveLatency(),De=y.getLiveDelay();Pe=Ie()===U.default.LIVE_CATCHUP_MODE_LOLP?function Fe(Pe,He,Le,ye,ae){var W;if(ae<ye){var ce=Math.abs(Pe.min),ne=2*ce/(1+Math.pow(Math.E,-5*(ae-ye)));A.debug("[LoL+ playback control_buffer-based] bufferLevel: "+ae+", newRate: "+(W=1-ce+ne))}else{var z=Pe.max,te=.02;W=Math.abs(He-Le)<=te*Le?1:1-z+2*z/(1+Math.pow(Math.E,-5*(He-Le))),A.debug("[LoL+ playback control_latency-based] latency: "+He+", newRate: "+W)}return W}(Le,ce,De,O.get().streaming.liveCatchup.playbackBufferMin,ye):function Ue(Pe,He,Le,ye){if(E)return 1;var ae=He-Le,W=ae<0?Math.abs(Pe.min):Pe.max,le=1-W+2*W/(1+Math.pow(Math.E,-5*ae));return y.getPlaybackStalled()&&ye<=Le/2&&ae>0&&(le=1),le}(Le,ce,De,ye);var ne=L?.25:.02/(.5/Le.max);Pe&&Math.abs(He-Pe)>=ne&&(A.debug("[CatchupController]: Setting playback rate to ".concat(Pe)),B.setPlaybackRate(Pe))}}}()}function xe(){return y.getCurrentLiveLatency()-y.getLiveDelay()}function Ie(){var Pe=O.get().streaming.liveCatchup.playbackBufferMin;return O.get().streaming.liveCatchup.mode!==U.default.LIVE_CATCHUP_MODE_LOLP||null===Pe||isNaN(Pe)?U.default.LIVE_CATCHUP_MODE_DEFAULT:U.default.LIVE_CATCHUP_MODE_LOLP}function je(){S.getCatchupPlaybackRates(!0)}return b={reset:function be(){(function fe(){_.off(j.default.BUFFER_LEVEL_UPDATED,V,b),_.off(j.default.BUFFER_LEVEL_STATE_CHANGED,de,b),_.off(j.default.PLAYBACK_PROGRESS,pe,b),_.off(j.default.PLAYBACK_TIME_UPDATED,pe,b),_.off(j.default.PLAYBACK_SEEKED,pe,b),_.off(F.default.SETTING_UPDATED_CATCHUP_ENABLED,Q,b),_.off(F.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,je,b),_.off(F.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,je,b),_.off(j.default.STREAM_INITIALIZED,je,b)})(),q(),B.setPlaybackRate(1,!0)},setConfig:function H(Pe){!Pe||(Pe.settings&&(O=Pe.settings),Pe.videoModel&&(B=Pe.videoModel),Pe.streamController&&(P=Pe.streamController),Pe.playbackController&&(y=Pe.playbackController),Pe.mediaPlayerModel&&(S=Pe.mediaPlayerModel))},initialize:function I(){(function ee(){_.on(j.default.BUFFER_LEVEL_UPDATED,V,b),_.on(j.default.BUFFER_LEVEL_STATE_CHANGED,de,b),_.on(j.default.PLAYBACK_PROGRESS,pe,b),_.on(j.default.PLAYBACK_TIME_UPDATED,pe,b),_.on(j.default.PLAYBACK_SEEKED,se,b),_.on(F.default.SETTING_UPDATED_CATCHUP_ENABLED,Q,b),_.on(F.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,je,b),_.on(F.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,je,b),_.on(j.default.STREAM_INITIALIZED,je,b)})(),je()}},function ue(){A=Object(C.default)(p).getInstance().getLogger(b),q()}(),b}u.__dashjs_factory_name="CatchupController",w.default=e.default.getSingletonFactory(u)},"./src/streaming/controllers/EventController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/core/EventBus.js"),U=i("./src/streaming/MediaPlayerEvents.js"),j=i("./src/streaming/net/XHRLoader.js");function F(){var B,O,P,y,S,E,A,I,H,ee,fe,D="urn:mpeg:dash:event:2012",b_DISCARDED="discarded",b_UPDATED="updated",b_ADDED="added",k=this.context,L=Object(R.default)(k).getInstance();function be(){if(!A||!I)throw new Error("setConfig function has to be called previously")}function q(){fe=!1,P={},y={},S=null,ee=!1,E=Date.now()/1e3}function se(){try{null!==S&&fe&&(clearInterval(S),S=null,fe=!1,function Te(){try{ke(y),ke(P)}catch(le){O.error(le)}}())}catch(le){throw le}}function de(){try{if(!ee){ee=!0;var le=I.getTime(),ne=le-E;ne=E>0?Math.max(0,ne):0,Q(y,ne,le),Q(P,ne,le),pe(y),pe(P),E=le,ee=!1}}catch(z){ee=!1,O.error(z)}}function Q(le,ne,z){try{Ue(le,function($){if(void 0!==$){var K=isNaN($.duration)?0:$.duration;$.calculatedPresentationTime<=z&&$.calculatedPresentationTime+ne+K>=z?Pe($,U.default.EVENT_MODE_ON_START):(Fe(z,K+ne,$.calculatedPresentationTime)||function je(le){try{return le.calculatedPresentationTime>le.eventStream.period.start+le.eventStream.period.duration}catch(z){return O.error(z),!1}}($))&&(O.debug("Removing event ".concat($.id," from period ").concat($.eventStream.period.id," as it is expired or invalid")),function He(le,ne){try{var z=ne.eventStream.schemeIdUri,te=ne.eventStream.period.id,X=ne.eventStream.value,$=ne.id;le[te][z]=le[te][z].filter(function(K){return X&&K.eventStream.value&&K.eventStream.value!==X||K.id!==$}),0===le[te][z].length&&delete le[te][z]}catch(K){O.error(K)}}(le,$))}})}catch(X){O.error(X)}}function pe(le){try{for(var ne in le)le.hasOwnProperty(ne)&&0===Object.keys(le[ne]).length&&delete le[ne]}catch(z){O.error(z)}}function _e(le,ne){var z=arguments.length>2&&void 0!==arguments[2]&&arguments[2],te=le.eventStream.schemeIdUri,X=le.eventStream.value,$=le.id,K=b_DISCARDED;ne[te]||(ne[te]=[]);var oe=ne[te].findIndex(function(Oe){return(!X||Oe.eventStream.value&&Oe.eventStream.value===X)&&Oe.id===$});if(-1===oe)ne[te].push(le),le.triggeredReceivedEvent=!1,le.triggeredStartEvent=!1,K=b_ADDED;else if(z){var Ce=ne[te][oe];le.triggeredReceivedEvent=Ce.triggeredReceivedEvent,le.triggeredStartEvent=Ce.triggeredStartEvent,ne[te][oe]=le,K=b_UPDATED}return K}function Ie(le){try{1==le.eventStream.value&&L.trigger(U.default.MANIFEST_VALIDITY_CHANGED,{id:le.id,validUntil:le.calculatedPresentationTime,newDuration:4294967295==le.calculatedPresentationTime?NaN:le.calculatedPresentationTime+le.duration,newManifestValidAfter:NaN},{mode:U.default.EVENT_MODE_ON_START})}catch(te){O.error(te)}}function ke(le){try{var ne=I.getTime();Ue(le,function(X){var $=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.duration)?X.eventStream.period.duration:NaN,K=X.eventStream&&X.eventStream.period&&!isNaN(X.eventStream.period.start)?X.eventStream.period.start:NaN;isNaN($)||isNaN(K)||Math.abs(X.calculatedPresentationTime-ne)<300&&Pe(X,U.default.EVENT_MODE_ON_START)})}catch(te){O.error(te)}}function Ue(le,ne){try{if(le)for(var z=Object.keys(le),te=0;te<z.length;te++)for(var X=le[z[te]],$=Object.keys(X),K=0;K<$.length;K++)X[$[K]].forEach(function(Ce){void 0!==Ce&&ne(Ce)})}catch(Ce){O.error(Ce)}}function Fe(le,ne,z){try{return le-ne>z}catch(te){return O.error(te),!1}}function Pe(le,ne){try{var z=I.getTime(),te=le.id;if(ne===U.default.EVENT_MODE_ON_RECEIVE&&!le.triggeredReceivedEvent)return O.debug("Received event ".concat(te)),le.triggeredReceivedEvent=!0,void L.trigger(le.eventStream.schemeIdUri,{event:le},{mode:ne});le.triggeredStartEvent||(le.eventStream.schemeIdUri===D&&1==le.eventStream.value?(0!==le.duration||0!==le.presentationTimeDelta)&&(O.debug("Starting manifest refresh event ".concat(te," at ").concat(z)),function Le(){try{be(),A.refreshManifest()}catch(le){O.error(le)}}()):"urn:mpeg:dash:event:callback:2015"===le.eventStream.schemeIdUri&&1==le.eventStream.value?(O.debug("Starting callback event ".concat(te," at ").concat(z)),function ye(le){try{Object(j.default)(k).create({}).load({method:"get",url:le,request:{responseType:"arraybuffer"}})}catch(z){O.error(z)}}(le.messageData)):(O.debug("Starting event ".concat(te," from period ").concat(le.eventStream.period.id," at ").concat(z)),L.trigger(le.eventStream.schemeIdUri,{event:le},{mode:ne})),le.triggeredStartEvent=!0)}catch(X){O.error(X)}}return B={addInlineEvents:function me(le,ne){try{if(be(),P[ne]||(P[ne]={}),le)for(var z=0;z<le.length;z++){var te=le[z];if(!Fe(I.getTime(),isNaN(te.duration)?0:te.duration,te.calculatedPresentationTime)){var K=_e(te,P[ne],!0);K===b_ADDED?(O.debug("Added inline event with id ".concat(te.id," from period ").concat(ne)),Pe(te,U.default.EVENT_MODE_ON_RECEIVE)):K===b_UPDATED&&O.debug("Updated inline event with id ".concat(te.id," from period ").concat(ne))}}}catch(oe){throw oe}},addInbandEvents:function xe(le,ne){try{be(),y[ne]||(y[ne]={});for(var z=0;z<le.length;z++){var te=le[z];Fe(I.getTime(),isNaN(te.duration)?0:te.duration,te.calculatedPresentationTime)||(_e(te,y[ne],!1)===b_ADDED?(te.eventStream.schemeIdUri===D&&Ie(te),O.debug("Added inband event with id ".concat(te.id," from period ").concat(ne)),Pe(te,U.default.EVENT_MODE_ON_RECEIVE)):O.debug("Inband event with scheme_id_uri ".concat(te.eventStream.schemeIdUri,", value ").concat(te.eventStream.value,", period id ").concat(ne," and event id ").concat(te.id," was ignored because it has been added before.")))}de()}catch(oe){throw oe}},getInbandEvents:function ce(){return y},getInlineEvents:function W(){return P},start:function V(){try{be(),O.debug("Start Event Controller");var le=H.get().streaming.eventControllerRefreshDelay;!fe&&!isNaN(le)&&(fe=!0,S=setInterval(de,le))}catch(ne){throw ne}},setConfig:function ae(le){try{if(!le)return;le.manifestUpdater&&(A=le.manifestUpdater),le.playbackController&&(I=le.playbackController),le.settings&&(H=le.settings)}catch(ne){throw ne}},reset:function De(){se(),q()}},function ue(){O=Object(C.default)(k).getInstance().getLogger(B),q()}(),B}F.__dashjs_factory_name="EventController",w.default=e.default.getSingletonFactory(F)},"./src/streaming/controllers/FragmentController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/vo/DataChunk.js"),R=i("./src/streaming/models/FragmentModel.js"),U=i("./src/streaming/FragmentLoader.js"),j=i("./src/streaming/utils/RequestModifier.js"),F=i("./src/core/EventBus.js"),D=i("./src/core/events/Events.js"),h=i("./src/streaming/MediaPlayerEvents.js"),u=i("./src/core/errors/Errors.js"),p=i("./src/core/FactoryMaker.js"),_=i("./src/core/Debug.js");function b(k){k=k||{};var A,I,H,L=this.context,B=Object(F.default)(L).getInstance(),O=k.errHandler,P=k.mediaPlayerModel,y=k.dashMetrics,S=Object(_.default)(L).getInstance(),E=k.streamInfo;function fe(){return E.id}function be(){for(var de in H)H[de].reset();H={}}function V(de){if(de.sender){var Q=de.request,pe=de.response,me=Q.isInitializationRequest(),xe=Q.mediaInfo.streamInfo;if(de.error&&(Q.mediaType===e.default.AUDIO||Q.mediaType===e.default.VIDEO||Q.mediaType===e.default.TEXT&&Q.mediaInfo.isFragmented)&&B.trigger(D.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:de.request.serviceLocation}),!pe||!xe)return void I.warn("No "+Q.mediaType+" bytes to push or stream is inactive.");var _e=function se(de,Q,pe,me){var xe=new C.default;return xe.streamId=pe,xe.mediaInfo=Q.mediaInfo,xe.segmentType=Q.type,xe.start=Q.startTime,xe.duration=Q.duration,xe.end=xe.start+xe.duration,xe.bytes=de,xe.index=Q.index,xe.quality=Q.quality,xe.representationId=Q.representationId,xe.endFragment=me,xe}(pe,Q,E.id,de.type!==D.default.FRAGMENT_LOADING_PROGRESS);B.trigger(me?D.default.INIT_FRAGMENT_LOADED:D.default.MEDIA_FRAGMENT_LOADED,{chunk:_e,request:Q},{streamId:xe.id,mediaType:Q.mediaType})}}return A={getStreamId:fe,getModel:function ue(de){var Q=H[de];return Q||(Q=Object(R.default)(L).create({streamInfo:E,type:de,dashMetrics:y,fragmentLoader:Object(U.default)(L).create({dashMetrics:y,mediaPlayerModel:P,errHandler:O,requestModifier:Object(j.default)(L).getInstance(),settings:k.settings,boxParser:k.boxParser,eventBus:B,events:D.default,errors:u.default,dashConstants:k.dashConstants,urlUtils:k.urlUtils,streamId:fe()}),debug:S,eventBus:B,events:D.default}),H[de]=Q),Q},reset:function q(){B.off(h.default.FRAGMENT_LOADING_COMPLETED,V,this),B.off(h.default.FRAGMENT_LOADING_PROGRESS,V,this),be()}},function ee(){I=S.getLogger(A),be(),B.on(h.default.FRAGMENT_LOADING_COMPLETED,V,A),B.on(h.default.FRAGMENT_LOADING_PROGRESS,V,A)}(),A}b.__dashjs_factory_name="FragmentController",w.default=p.default.getClassFactory(b)},"./src/streaming/controllers/GapController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/core/events/Events.js"),U=i("./src/core/EventBus.js"),j=i("./src/streaming/constants/Constants.js");function u(){var b,k,L,B,O,P,y,S,E,A,I,H,p=this.context,_=Object(U.default)(p).getInstance();function ue(){(function Fe(){H.debug("Stopping the gap controller"),O&&(clearInterval(O),O=null)})(),function V(){_.off(R.default.WALLCLOCK_TIME_UPDATED,xe,this),_.off(R.default.INITIAL_STREAM_SWITCH,me,this),_.off(R.default.PLAYBACK_SEEKING,de,this),_.off(R.default.BUFFER_REPLACEMENT_STARTED,Q,b),_.off(R.default.TRACK_CHANGE_RENDERED,pe,b)}(),function be(){O=null,P=NaN,B=0,A=null,I={}}()}function de(){A&&(clearTimeout(A),A=null)}function Q(Pe){try{if(Pe.streamId!==S.getActiveStreamInfo().id||Pe.mediaType!==j.default.VIDEO&&Pe.mediaType!==j.default.AUDIO)return;Pe.streamId===S.getActiveStreamInfo().id&&(I[Pe.mediaType]=!0)}catch(He){H.error(He)}}function pe(Pe){!Pe||!Pe.mediaType||(I[Pe.mediaType]=!1)}function me(){O||function Ue(){try{O||(H.debug("Starting the gap controller"),O=setInterval(function(){_e()&&je(y.getTime())},100))}catch(Pe){}}()}function xe(){if(_e(L.get().streaming.gaps.enableSeekFix)&&++B>=10){var Pe=y.getTime();k===Pe?je(Pe,!0):(k=Pe,P=NaN),B=0}}function _e(){var Pe=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!S.getActiveStream())return!1;var He=Object.keys(I).some(function(ye){return I[ye]}),Le=!!Pe&&Ie();return!He&&L.get().streaming.gaps.jumpGaps&&S.getActiveStreamProcessors().length>0&&(!y.isSeeking()||Le)&&!y.isPaused()&&!S.getIsStreamSwitchInProgress()&&!S.getHasMediaOrInitialisationError()}function Ie(){var Pe=S.getActiveStream(),He=parseFloat((Pe.getStartTime()+Pe.getDuration()).toFixed(5));return y.getTime()+L.get().streaming.gaps.threshold>=He}function Te(Pe,He){try{if(!Pe||Pe.length<=1&&He>0)return NaN;for(var Le=NaN,ye=0;isNaN(Le)&&ye<Pe.length;){var ae=ye>0?Pe.end(ye-1):0;He<Pe.start(ye)&&ae-He<L.get().streaming.gaps.threshold&&(Le=ye),ye+=1}return Le}catch(W){return null}}function ke(Pe,He){for(var Le=0,ye=Pe.length;Le<ye;Le++)if(He>=Pe.start(Le)&&He<=Pe.end(Le))return!0;return!1}function je(Pe){var De,He=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Le=L.get().streaming.gaps.enableStallFix,ye=L.get().streaming.gaps.stallSeek,ae=L.get().streaming.gaps.smallGapLimit,W=L.get().streaming.gaps.jumpLargeGaps,ce=E.getBufferRange(),le=NaN,ne=!1;if(De=Te(ce,Pe),!isNaN(De)){var z=ce.start(De),te=z-Pe;te>0&&(te<=ae||W)&&(le=z)}var X=y.getTimeToStreamEnd();if(isNaN(le)&&He&&isFinite(X)&&!isNaN(X)&&X<ae&&(le=parseFloat(y.getStreamEndTime().toFixed(5)),ne=!0),Le&&isNaN(le)&&He&&isNaN(De)&&ke(ce,Pe)&&(0===ye?(H.warn("Toggle play pause to break stall"),E.pause(),E.play()):(H.warn("Jumping ".concat(ye,"s to break stall")),le=Pe+ye)),le>0&&P!==le&&le>Pe&&!A){var $=le-Pe;if(ne){var K=S.getStreamForTime(le),oe=K&&!!K.getPreloaded();H.warn("Jumping to end of stream because of gap from ".concat(Pe," to ").concat(le,". Gap duration: ").concat($)),y.seek(le,!0,oe)}else{var Ce=y.getIsDynamic(),Oe=De>0?ce.end(De-1):Pe,Ze=Ce?1e3*Math.max(0,$-.1):0;A=window.setTimeout(function(){y.seek(le,!0,!0),H.warn("Jumping gap occuring in period ".concat(S.getActiveStream().getStreamId()," starting at ").concat(Oe," and ending at ").concat(le,". Jumping by: ").concat(le-Oe)),A=null},Ze)}P=le}}return b={reset:ue,setConfig:function q(Pe){!Pe||(Pe.settings&&(L=Pe.settings),Pe.playbackController&&(y=Pe.playbackController),Pe.streamController&&(S=Pe.streamController),Pe.videoModel&&(E=Pe.videoModel))},initialize:function ee(){!function se(){_.on(R.default.WALLCLOCK_TIME_UPDATED,xe,this),_.on(R.default.INITIAL_STREAM_SWITCH,me,this),_.on(R.default.PLAYBACK_SEEKING,de,this),_.on(R.default.BUFFER_REPLACEMENT_STARTED,Q,b),_.on(R.default.TRACK_CHANGE_RENDERED,pe,b)}()}},function fe(){H=Object(C.default)(p).getInstance().getLogger(b),ue()}(),b}u.__dashjs_factory_name="GapController",w.default=e.default.getSingletonFactory(u)},"./src/streaming/controllers/MediaController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/EventBus.js"),U=i("./src/core/FactoryMaker.js"),j=i("./src/core/Debug.js"),F=i("./node_modules/bcp-47-normalize/index.js"),D=i.n(F),h=i("./node_modules/bcp-47-match/index.js");function p(){var L,B,O,P,y,S,E,A,b=this.context,k=Object(R.default)(b).getInstance();function fe(K,oe){return K&&O[oe]&&O[oe][K]?O[oe][K].list:[]}function ue(K,oe){return K&&O[oe]&&O[oe][K]?O[oe][K].current:null}function q(K){var oe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(K&&K.streamInfo){var Ce=K.type,Ze=K.streamInfo.id,st=ue(Ce,Ze);if(O[Ze]&&O[Ze][Ce]&&(O[Ze][Ce].current=K,O[Ze][Ce].current&&(Ce!==e.default.TEXT&&!pe(K,st)||Ce===e.default.TEXT&&K.isFragmented)&&k.trigger(C.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:st,newMediaInfo:K,switchMode:P.get().streaming.trackSwitchMode[Ce]},{streamId:Ze}),!oe)){var et=_e(K);if(!et||!O[Ze][Ce].storeLastSettings)return;et.roles&&(et.role=et.roles[0],delete et.roles),et.accessibility&&(et.accessibility=et.accessibility[0]),et.audioChannelConfiguration&&(et.audioChannelConfiguration=et.audioChannelConfiguration[0]),S[Ce]=et,A.setSavedMediaSettings(Ce,et)}}}function se(K,oe){!K||!oe||(y[K]=oe)}function V(K){return K?y[K]:null}function pe(K,oe){if(!K&&!oe)return!0;if(!K||!oe)return!1;var Ce=K.id===oe.id,Oe=K.viewpoint===oe.viewpoint,Ze=K.lang===oe.lang,st=K.codec===oe.codec,et=K.roles.toString()===oe.roles.toString(),ct=K.accessibility.toString()===oe.accessibility.toString(),xt=K.audioChannelConfiguration.toString()===oe.audioChannelConfiguration.toString();return Ce&&st&&Oe&&Ze&&et&&ct&&xt}function xe(){O={},S={},function Le(){y={audio:null,video:null,text:null}}()}function _e(K){var oe={lang:K.lang,viewpoint:K.viewpoint,roles:K.roles,accessibility:K.accessibility,audioChannelConfiguration:K.audioChannelConfiguration};return oe.lang||oe.viewpoint||oe.role&&oe.role.length>0||oe.accessibility&&oe.accessibility.length>0||oe.audioChannelConfiguration&&oe.audioChannelConfiguration.length>0?oe:null}function Ie(K,oe,Ce){var Oe=[];return K.forEach(function(Ze){oe(Ce,Ze)&&Oe.push(Ze)}),0!==Oe.length?Oe:K}function Te(K,oe){return!K.lang||K.lang instanceof RegExp?oe.lang.match(K.lang):""!==oe.lang&&Object(h.extendedFilter)(oe.lang,D()(K.lang)).length>0}function ke(K,oe){return null==K.index||oe.index===K.index}function Ue(K,oe){return!K.viewpoint||K.viewpoint===oe.viewpoint}function Fe(K,oe){var Ce=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!K.role||!!oe.roles.filter(function(Ze){return Ze===K.role})[0]||oe.type===e.default.AUDIO&&Ce}function je(K,oe){return K.accessibility?!!oe.accessibility.filter(function(Oe){return Oe===K.accessibility})[0]:!oe.accessibility.length}function Pe(K,oe){return!K.audioChannelConfiguration||!!oe.audioChannelConfiguration.filter(function(Oe){return Oe===K.audioChannelConfiguration})[0]}function ae(K){var Oe,oe=0,Ce=[];return K.forEach(function(Ze){(Oe=Math.max.apply(Math,Ze.bitrateList.map(function(st){return st.bandwidth})))>oe?(oe=Oe,Ce=[Ze]):Oe===oe&&Ce.push(Ze)}),Ce}function W(K){var Oe,oe=1/0,Ce=[];return K.forEach(function(Ze){var st=Ze.bitrateList.reduce(function(et,ct){var xt=Math.max(1,ct.width*ct.height);return et+ct.bandwidth/xt},0);(Oe=st/Ze.bitrateList.length)<oe?(oe=Oe,Ce=[Ze]):Oe===oe&&Ce.push(Ze)}),Ce}function ce(K){var Oe,oe=0,Ce=[];return K.forEach(function(Ze){(Oe=Ze.representationCount)>oe?(oe=Oe,Ce=[Ze]):Oe===oe&&Ce.push(Ze)}),Ce}function De(K,oe){if(K===e.default.TEXT)return oe[0];var Oe,Ce=P.get().streaming.selectionModeForInitialTrack,Ze=E.getCustomInitialTrackSelectionFunction();if(Ze&&"function"==typeof Ze)Oe=Ze(oe);else switch(Ce){case e.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:Oe=function le(K){var oe=function ye(K){var oe=0,Ce=[];return K.forEach(function(Oe){isNaN(Oe.selectionPriority)||(Oe.selectionPriority>oe?(oe=Oe.selectionPriority,Ce=[Oe]):Oe.selectionPriority===oe&&Ce.push(Oe))}),Ce}(K);return oe.length>1&&(oe=ae(oe)),oe.length>1&&(oe=ce(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:Oe=function ne(K){var oe=ae(K);return oe.length>1&&(oe=ce(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_FIRST_TRACK:Oe=z(oe);break;case e.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:Oe=function te(K){var oe=W(K);return oe.length>1&&(oe=ae(oe)),oe}(oe);break;case e.default.TRACK_SELECTION_MODE_WIDEST_RANGE:Oe=function X(K){var oe=ce(K);return oe.length>1&&(oe=ae(K)),oe}(oe);break;default:B.warn("Track selection mode ".concat(Ce," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),Oe=z(oe)}return Oe.length>0?Oe[0]:oe[0]}function z(K){return K[0]}return L={setInitialMediaSettingsForType:function H(K,oe){var Ce=S[K]||V(K),Oe=fe(K,oe.id),Ze=[];Ce||se(K,Ce=A.getSavedMediaSettings(K)),Oe&&0!==Oe.length&&(Ce&&(Ze=Ie(Ze=Array.from(Oe),Te,Ce),Ze=Ie(Ze,ke,Ce),Ze=Ie(Ze,Ue,Ce),K===e.default.AUDIO&&!!S[K]||(Ze=Ie(Ze,Fe,Ce)),Ze=Ie(Ze,je,Ce),Ze=Ie(Ze,Pe,Ce)),0===Ze.length?q(De(K,Oe),!0):q(Ze.length>1?De(K,Ze):Ze[0]))},addTrack:function ee(K){if(K){var oe=K.type;if(function Q(K){return K===e.default.AUDIO||K===e.default.VIDEO||K===e.default.TEXT||K===e.default.IMAGE}(oe)){var Ce=K.streamInfo.id;O[Ce]||(O[Ce]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var Oe=O[Ce][oe].list,Ze=0,st=Oe.length;Ze<st;++Ze)if(pe(Oe[Ze],K))return;Oe.push(K)}}},getTracksFor:fe,getCurrentTrackFor:ue,isCurrentTrack:function be(K){if(!K)return!1;var oe=K.type,Ce=K.streamInfo.id;return O[Ce]&&O[Ce][oe]&&pe(O[Ce][oe].current,K)},setTrack:q,selectInitialTrack:De,setInitialSettings:se,getInitialSettings:V,getTracksWithHighestBitrate:ae,getTracksWithHighestEfficiency:W,getTracksWithWidestRange:ce,isTracksEqual:pe,matchSettings:function He(K,oe){var Ce=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var Oe=!1;if(K.lang){if(K.lang instanceof RegExp)Oe=oe.lang.match(K.lang);else if(""!==oe.lang){var Ze=D()(K.lang);Ze&&(Oe=Object(h.extendedFilter)(oe.lang,Ze).length>0)}}else Oe=!0;var st=null==K.index||oe.index===K.index,et=!K.viewpoint||K.viewpoint===oe.viewpoint,ct=!K.role||!!oe.roles.filter(function(Et){return Et===K.role})[0],xt=!K.accessibility||!!oe.accessibility.filter(function(Et){return Et===K.accessibility})[0],tt=!K.audioChannelConfiguration||!!oe.audioChannelConfiguration.filter(function(Et){return Et===K.audioChannelConfiguration})[0];return Oe&&st&&et&&(ct||oe.type===e.default.AUDIO&&Ce)&&xt&&tt}catch(Et){return!1}},matchSettingsLang:Te,matchSettingsIndex:ke,matchSettingsViewPoint:Ue,matchSettingsRole:Fe,matchSettingsAccessibility:je,matchSettingsAudioChannelConfig:Pe,saveTextSettingsDisabled:function de(){A.setSavedMediaSettings(e.default.TEXT,null)},setConfig:function me(K){!K||(K.domStorage&&(A=K.domStorage),K.settings&&(P=K.settings),K.customParametersModel&&(E=K.customParametersModel))},reset:xe},function I(){B=Object(j.default)(b).getInstance().getLogger(L),xe()}(),L}p.__dashjs_factory_name="MediaController";var _=U.default.getSingletonFactory(p);U.default.updateSingletonFactory(p.__dashjs_factory_name,_),w.default=_},"./src/streaming/controllers/MediaSourceController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js");function R(){var U,j,F,D=this.context;return U={createMediaSource:function u(){var O="WebKitMediaSource"in window;return"MediaSource"in window?j=new MediaSource:O&&(j=new WebKitMediaSource),j},attachMediaSource:function p(O){var P=window.URL.createObjectURL(j);return O.setSource(P),P},detachMediaSource:function _(O){O.setSource(null)},setDuration:function b(O){!j||"open"!==j.readyState||null===O&&isNaN(O)||j.duration!==O&&(function B(O){for(var P=O.sourceBuffers,y=0;y<P.length;y++)if(P[y].updating)return!0;return!1}(j)?setTimeout(b.bind(null,O),50):(F.info("Set MediaSource duration:"+O),j.duration=O))},setSeekable:function k(O,P){j&&"function"==typeof j.setLiveSeekableRange&&"function"==typeof j.clearLiveSeekableRange&&"open"===j.readyState&&O>=0&&O<P&&(j.clearLiveSeekableRange(),j.setLiveSeekableRange(O,P))},signalEndOfStream:function L(O){if(O&&"open"===O.readyState){for(var P=O.sourceBuffers,y=0;y<P.length;y++)if(P[y].updating||0===P[y].buffered.length)return;F.info("call to mediaSource endOfStream"),O.endOfStream()}}},function h(){F=Object(C.default)(D).getInstance().getLogger(U)}(),U}R.__dashjs_factory_name="MediaSourceController",w.default=e.default.getSingletonFactory(R)},"./src/streaming/controllers/PlaybackController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/EventBus.js"),R=i("./src/core/events/Events.js"),U=i("./src/core/FactoryMaker.js"),j=i("./src/core/Debug.js"),F=i("./src/streaming/MediaPlayerEvents.js"),D=i("./src/streaming/constants/MetricsConstants.js");function u(){var b,k,L,B,O,P,y,S,E,A,I,H,ee,fe,ue,be,se,V,de,Q,pe,me,xe,p=this.context,_=Object(C.default)(p).getInstance();function Ie(){He(),fe=!1,A=0,I=0,be=0,pe=!1,se=!1,me=!1,V=NaN,y&&(_.off(R.default.DATA_UPDATE_COMPLETED,At,b),_.off(R.default.LOADING_PROGRESS,on,b),_.off(R.default.MANIFEST_UPDATED,gr,b),_.off(R.default.STREAMS_COMPOSED,Ir,b),_.off(F.default.PLAYBACK_ENDED,pt,b),_.off(F.default.STREAM_INITIALIZING,Mn,b),_.off(F.default.REPRESENTATION_SWITCH,Wn,b),_.off(F.default.BUFFER_LEVEL_STATE_CHANGED,jt,b),_t(),function dn(){y.removeEventListener("canplay",Pt),y.removeEventListener("canplaythrough",Yt),y.removeEventListener("play",en),y.removeEventListener("waiting",an),y.removeEventListener("playing",Ln),y.removeEventListener("pause",wn),y.removeEventListener("error",rt),y.removeEventListener("seeking",Vn),y.removeEventListener("seeked",Hn),y.removeEventListener("timeupdate",it),y.removeEventListener("progress",Qe),y.removeEventListener("ratechange",mt),y.removeEventListener("loadedmetadata",Ft),y.removeEventListener("loadeddata",tn),y.removeEventListener("stalled",pn),y.removeEventListener("ended",Wt),y.removeEventListener("volumechange",vt)}()),E=null,y=null,H=null,ee=null}function Fe(){return parseFloat((je(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)-De()).toFixed(5))}function je(It){var kt=It||H;return kt.start+kt.duration}function Pe(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0];H&&y&&y.getElement()?(It&&ee&&ce(De()),y.play()):fe=!0}function He(){H&&y&&y.pause()}function Le(It){var kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=arguments.length>3&&void 0!==arguments[3]&&arguments[3];H&&y&&It!==(isNaN(V)?y.getTime():V)&&((de=!0===Rt)||(V=It),k.info("Requesting seek to time: "+It+(de?" (internal)":"")),ee&&sn&&ce(It),y.setCurrentTime(It,kt))}function W(){if(H&&y&&ee){var It=L&&L.hasVideoTrack()?e.default.VIDEO:e.default.AUDIO,kt=O.getCurrentDVRInfo(It);return kt&&kt.range?kt.range.end:0}}function ce(It){var kt=new Date(S.getClientReferenceTime()),Rt=P.getRegularPeriods()[0],sn=S.calcPresentationTimeFromWallTime(kt,Rt);A=sn-It}function De(){return H&&y?y.getTime():null}function le(){return H&&y?y.isPaused():null}function ne(){return H&&y?y.isSeeking():null}function z(){return H&&y?y.isStalled():null}function te(){return H&&y?y.getPlaybackRate():null}function $(){return H&&y?y.getEnded():null}function K(){return ee}function tt(){var It=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!le()&&ee&&0!==y.getReadyState()&&!ne()&&!pe){It||(It=L.hasVideoTrack()?e.default.VIDEO:e.default.AUDIO);var kt=De(),Rt=Et(kt,It);!isNaN(Rt)&&Rt!==kt&&!ne()&&(z()||Q||1===y.getReadyState())&&(k.debug("UpdateCurrentTime: Seek to actual time: ".concat(Rt," from currentTime: ").concat(kt)),Le(Rt,!1,!1))}}function Et(It,kt){var Rt=O.getCurrentDVRInfo(kt),sn=Rt?Rt.range:null;return sn?It>sn.end?Math.max(sn.end-A,sn.start):It>0&&It+.25<sn.start&&Math.abs(It-sn.start)<31536e4?se?Math.max(sn.end-A,sn.start):sn.start:It:NaN}function Kt(){null===E&&(E=setInterval(function(){!function Xe(){_.trigger(R.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ee,time:new Date}),K()&&(L.addDVRMetric(),le()?function yt(){var It=Date.now();(!ue||It>ue+500)&&(ue=It,it())}():tt())}()},xe.get().streaming.wallclockTimeUpdateInterval))}function _t(){clearInterval(E),E=null}function At(It){var kt=P.convertRepresentationToRepresentationInfo(It.currentRepresentation),Rt=kt?kt.mediaInfo.streamInfo:null;null===Rt||H.id!==Rt.id||(H=Rt)}function Pt(){_.trigger(R.default.CAN_PLAY)}function Yt(){_.trigger(R.default.CAN_PLAY_THROUGH)}function jt(It){It.streamId===L.getActiveStreamInfo().id&&(Q=It.state===D.default.BUFFER_EMPTY,xe.get().streaming.buffer.setStallState&&y.setStallState(It.mediaType,It.state===D.default.BUFFER_EMPTY))}function en(){k.info("Native video element event: play"),tt(),Kt(),_.trigger(R.default.PLAYBACK_STARTED,{startTime:De()})}function an(){k.info("Native video element event: waiting"),_.trigger(R.default.PLAYBACK_WAITING,{playingTime:De()})}function Ln(){k.info("Native video element event: playing"),de=!1,_.trigger(R.default.PLAYBACK_PLAYING,{playingTime:De()})}function wn(){k.info("Native video element event: pause"),_.trigger(R.default.PLAYBACK_PAUSED,{ended:$()})}function Vn(){if(!de){var It=De();!isNaN(V)&&V!==It&&(It=V),V=NaN,k.info("Seeking to: "+It),Kt(),_.trigger(R.default.PLAYBACK_SEEKING,{seekTime:It,streamId:H.id})}}function Hn(){k.info("Native video element event: seeked"),de=!1,_.trigger(R.default.PLAYBACK_SEEKED)}function it(){H&&_.trigger(R.default.PLAYBACK_TIME_UPDATED,{timeToEnd:Fe(),time:De(),streamId:H.id})}function Qe(){_.trigger(R.default.PLAYBACK_PROGRESS,{streamId:H.id})}function mt(){var It=te();k.info("Native video element event: ratechange: ",It),_.trigger(R.default.PLAYBACK_RATE_CHANGED,{playbackRate:It})}function Ft(){k.info("Native video element event: loadedmetadata"),_.trigger(R.default.PLAYBACK_METADATA_LOADED),Kt()}function tn(){k.info("Native video element event: loadeddata"),_.trigger(R.default.PLAYBACK_LOADED_DATA)}function Wt(){k.info("Native video element event: ended"),He(),_t();var It=L?L.getActiveStreamInfo():null;!It||_.trigger(R.default.PLAYBACK_ENDED,{isLast:It.isLast})}function vt(){_.trigger(R.default.PLAYBACK_VOLUME_CHANGED)}function pt(It){if(E&&It.isLast){k.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var kt=It.seekTime?It.seekTime:je();y.setCurrentTime(kt),He(),_t()}}function rt(It){_.trigger(R.default.PLAYBACK_ERROR,{error:(It.target||It.srcElement).error})}function on(It){if(!1===It.stream&&se&&!isNaN(It.request.duration)){var kt=1.2*It.request.duration;kt>A&&(k.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",kt.toFixed(2)),A=kt,I=kt)}}function pn(It){_.trigger(R.default.PLAYBACK_STALLED,{e:It})}function Mn(It){!function ut(It){It&&It.supplementalProperties&&"true"===It.supplementalProperties[e.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]&&(k.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),se=!0)}(It.mediaInfo)}function Wn(It){var kt=L.getActiveStreamInfo();!It||!kt||!It.currentRepresentation||!It.streamId||It.streamId!==kt.id||!It.mediaType||It.mediaType!==e.default.VIDEO&&It.mediaType!==e.default.AUDIO||(se=!It.currentRepresentation.availabilityTimeComplete)&&!me&&(me=!0)}function gr(){pe=!0}function Ir(){pe=!1}return b={initialize:function Te(It,kt){H=It,!0!==kt&&function ke(){(function zt(){y.addEventListener("canplay",Pt),y.addEventListener("canplaythrough",Yt),y.addEventListener("play",en),y.addEventListener("waiting",an),y.addEventListener("playing",Ln),y.addEventListener("pause",wn),y.addEventListener("error",rt),y.addEventListener("seeking",Vn),y.addEventListener("seeked",Hn),y.addEventListener("timeupdate",it),y.addEventListener("progress",Qe),y.addEventListener("ratechange",mt),y.addEventListener("loadedmetadata",Ft),y.addEventListener("loadeddata",tn),y.addEventListener("stalled",pn),y.addEventListener("ended",Wt),y.addEventListener("volumechange",vt)})(),ee=H.manifestInfo.isDynamic,Q=!1,de=!1,_.on(R.default.DATA_UPDATE_COMPLETED,At,b),_.on(R.default.LOADING_PROGRESS,on,b),_.on(R.default.MANIFEST_UPDATED,gr,b),_.on(R.default.STREAMS_COMPOSED,Ir,b),_.on(F.default.PLAYBACK_ENDED,pt,b,{priority:C.default.EVENT_PRIORITY_HIGH}),_.on(F.default.STREAM_INITIALIZING,Mn,b),_.on(F.default.REPRESENTATION_SWITCH,Wn,b),_.on(F.default.BUFFER_LEVEL_STATE_CHANGED,jt,b),fe&&(fe=!1,Pe())}()},setConfig:function xt(It){!It||(It.streamController&&(L=It.streamController),It.serviceDescriptionController&&(B=It.serviceDescriptionController),It.dashMetrics&&(O=It.dashMetrics),It.adapter&&(P=It.adapter),It.videoModel&&(y=It.videoModel),It.timelineConverter&&(S=It.timelineConverter),It.settings&&(xe=It.settings))},getTimeToStreamEnd:Fe,getBufferLevel:function Zt(){var It=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,kt=null;return L.getActiveStreamProcessors().forEach(function(Rt){if(!It||0===It.length||-1===It.indexOf(Rt.getType())){var sn=Rt.getBufferLevel();kt=null===kt?sn:Math.min(kt,sn)}}),kt},getPlaybackStalled:function Ue(){return Q},getTime:De,getLowLatencyModeEnabled:function Jt(){return se},getInitialCatchupModeActivated:function Qn(){return me},getIsManifestUpdateInProgress:function Ce(){return pe},getPlaybackRate:te,getPlayedRanges:function X(){return H&&y?y.getPlayedRanges():null},getEnded:$,getIsDynamic:K,getStreamController:function oe(){return L},computeAndSetLiveDelay:function ct(It,kt){var Rt,sn,Fn,Ct=!isNaN(It)&&isFinite(It)?It:NaN,Gt=P.getSuggestedPresentationDelay(),qt=B.getServiceDescriptionSettings();return Rt=isNaN(xe.get().streaming.delay.liveDelay)?null===xe.get().streaming.delay.liveDelayFragmentCount||isNaN(xe.get().streaming.delay.liveDelayFragmentCount)||isNaN(Ct)?qt&&!isNaN(qt.liveDelay)&&qt.liveDelay>0?qt.liveDelay:!0===xe.get().streaming.delay.useSuggestedPresentationDelay&&null!==Gt&&!isNaN(Gt)&&Gt>0?Gt:isNaN(Ct)?kt&&!isNaN(kt.minBufferTime)?4*kt.minBufferTime:4*H.manifestInfo.minBufferTime:4*Ct:Ct*xe.get().streaming.delay.liveDelayFragmentCount:xe.get().streaming.delay.liveDelay,null!==(Fn=P.getAvailabilityStartTime())&&(be=Fn),sn=kt&&kt.dvrWindowSize>0?Math.min(Rt,kt.dvrWindowSize):Rt,A=sn,I=sn,sn},getLiveDelay:function Ze(){return A},getOriginalLiveDelay:function st(){return I},getCurrentLiveLatency:function et(){if(!ee||isNaN(be))return NaN;var It=De();if(isNaN(It)||0===It)return 0;var kt=(new Date).getTime()+1e3*S.getClientTimeOffset();return Math.max(((kt-be-1e3*It)/1e3).toFixed(3),0)},play:Pe,isPaused:le,isStalled:z,pause:He,isSeeking:ne,getStreamEndTime:je,seek:Le,seekToOriginalLive:function ye(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0],kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=W();0!==sn&&Le(sn-(A=I),It,kt,Rt)},seekToCurrentLive:function ae(){var It=arguments.length>0&&void 0!==arguments[0]&&arguments[0],kt=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Rt=arguments.length>2&&void 0!==arguments[2]&&arguments[2],sn=W();0!==sn&&Le(sn-A,It,kt,Rt)},reset:Ie,updateCurrentTime:tt,getAvailabilityStartTime:function Oe(){return be}},function _e(){k=Object(j.default)(p).getInstance().getLogger(b),Ie()}(),b}u.__dashjs_factory_name="PlaybackController",w.default=U.default.getSingletonFactory(u)},"./src/streaming/controllers/ScheduleController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/models/FragmentModel.js"),R=i("./src/core/EventBus.js"),U=i("./src/core/events/Events.js"),j=i("./src/core/FactoryMaker.js"),F=i("./src/core/Debug.js"),D=i("./src/streaming/constants/MetricsConstants.js"),h=i("./src/streaming/MediaPlayerEvents.js");function u(p){p=p||{};var I,H,ee,fe,ue,be,q,se,V,de,Q,pe,me,_=this.context,b=Object(R.default)(_).getInstance(),k=p.dashMetrics,L=p.mediaPlayerModel,B=p.fragmentModel,O=p.abrController,P=p.playbackController,y=p.textController,S=p.type,E=p.bufferController,A=p.settings;function Ue(Et){if(!E.getIsBufferingCompleted()){Fe();var Kt=isNaN(Et)?0:Et;be=setTimeout(Pe,Kt)}}function Fe(){be&&(clearTimeout(be),be=null)}function Pe(){try{if(function Le(){try{return S===e.default.TEXT&&!y.isTextEnabled()||P.isPaused()&&(!P.getStreamController().getInitialPlayback()||!P.getStreamController().getAutoPlay())&&!A.get().streaming.scheduling.scheduleWhilePaused}catch(Et){return!1}}())return void Fe();if(function ye(){try{return fe&&(isNaN(de)||Q||function je(){var Kt=O.getMaxAllowedIndexFor(S,H.id);return!(!isNaN(V)&&V==Kt||(ee.info("Top quality "+S+" index has changed from "+V+" to "+Kt),V=Kt,0))}()||function ae(){return!S||!fe||k.getCurrentBufferLevel(S)<W()}())}catch(Et){return!1}}()){var Et=!1;me&&(Et=O.checkPlaybackQuality(S,H.id)),Et||function He(){pe||fe.quality!==de||Q?(Q?(ee.debug("Switch track for "+S+", representation id = "+fe.id),Q=!1):ee.debug("Quality has changed, get init request for representationid = "+fe.id),b.trigger(U.default.INIT_FRAGMENT_NEEDED,{representationId:fe.id,sender:I},{streamId:H.id,mediaType:S}),me=!1,pe=!1):(ee.debug("Media segment needed for ".concat(S," and stream id ").concat(H.id)),b.trigger(U.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:H.id,mediaType:S}),me=!0)}()}else Ue(P.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}catch(Kt){Ue(P.getLowLatencyModeEnabled()?A.get().streaming.scheduling.lowLatencyTimeout:A.get().streaming.scheduling.defaultTimeout)}}function W(){var Et=NaN;return!S||!fe||(Et=S===e.default.TEXT?function ce(){try{if(y.isTextEnabled()){if(isNaN(fe.fragmentDuration)){var Et=k.getCurrentSchedulingInfo(D.default.SCHEDULING_INFO);return Et?Et.duration:0}return fe.fragmentDuration}return 0}catch(Kt){return 0}}():S===e.default.AUDIO&&q?function De(){try{var Et=k.getCurrentBufferLevel(e.default.VIDEO);return isNaN(fe.fragmentDuration)?Et+1:Math.max(Et+1,fe.fragmentDuration)}catch(Kt){return 0}}():function le(){try{var Et=fe.mediaInfo.streamInfo;return O.isPlayingAtTopQuality(Et)?Et.manifestInfo.duration>=A.get().streaming.buffer.longFormContentDurationThreshold?A.get().streaming.buffer.bufferTimeAtTopQualityLongForm:A.get().streaming.buffer.bufferTimeAtTopQuality:L.getStableBufferTime()}catch(_t){return L.getStableBufferTime()}}()),Et}function te(){X(!0)}function X(Et){if(P&&B){var Kt=B.getRequests({state:C.default.FRAGMENT_MODEL_EXECUTED,time:P.getTime(),threshold:0})[0];Kt&&P.getTime()>=Kt.startTime&&((!se.mediaInfo||Kt.mediaInfo.type===se.mediaInfo.type&&Kt.mediaInfo.id!==se.mediaInfo.id)&&Et&&b.trigger(U.default.TRACK_CHANGE_RENDERED,{mediaType:S,oldMediaInfo:se.mediaInfo,newMediaInfo:Kt.mediaInfo,streamId:H.id}),(Kt.quality!==se.quality||Kt.adaptationIndex!==se.adaptationIndex)&&Et&&(ee.debug("Quality change rendered for streamId ".concat(H.id," and type ").concat(S)),b.trigger(U.default.QUALITY_CHANGE_RENDERED,{mediaType:S,oldQuality:se.quality,newQuality:Kt.quality,streamId:H.id})),se={mediaInfo:Kt.mediaInfo,quality:Kt.quality,adaptationIndex:Kt.adaptationIndex})}}function $(Et){ee.debug("Appended bytes for ".concat(Et.mediaType," and stream id ").concat(H.id)),(isNaN(Et.index)||isNaN(de))&&(de=Et.quality,ee.info("["+S+"] lastInitializedRepresentationInfo changed to "+Et.quality)),Ue(0)}function K(){B.abortRequests(),Fe()}function oe(){A.get().streaming.scheduling.scheduleWhilePaused||Ue()}function Ce(Et){k.updatePlayListTraceMetrics({playbackspeed:Et.playbackRate.toString()})}function ct(){me=!0,ue=0,de=NaN,se={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},V=NaN,Q=!1,pe=!1}return I={initialize:function _e(Et){q=Et,b.on(U.default.BYTES_APPENDED_END_FRAGMENT,$,I),b.on(U.default.URL_RESOLUTION_FAILED,K,I),b.on(h.default.PLAYBACK_STARTED,oe,I),b.on(h.default.PLAYBACK_RATE_CHANGED,Ce,I),b.on(h.default.PLAYBACK_TIME_UPDATED,te,I)},getType:function Ie(){return S},getStreamId:function Te(){return H.id},setCurrentRepresentation:function ke(Et){fe=Et},setTimeToLoadDelay:function Oe(Et){ue=Et},getTimeToLoadDelay:function Ze(){return ue},setSwitchTrack:function ne(Et){Q=Et},getSwitchStrack:function z(){return Q},startScheduleTimer:Ue,clearScheduleTimer:Fe,reset:function xt(){b.off(U.default.BYTES_APPENDED_END_FRAGMENT,$,I),b.off(U.default.URL_RESOLUTION_FAILED,K,I),b.off(h.default.PLAYBACK_STARTED,oe,I),b.off(h.default.PLAYBACK_RATE_CHANGED,Ce,I),b.off(h.default.PLAYBACK_TIME_UPDATED,te,I),Fe(),X(!1),ct(),H=null},getBufferTarget:W,getPlaybackController:function tt(){return P},setCheckPlaybackQuality:function st(Et){me=Et},setInitSegmentRequired:function et(Et){pe=Et}},function xe(){ee=Object(F.default)(_).getInstance().getLogger(I),ct(),H=p.streamInfo}(),I}u.__dashjs_factory_name="ScheduleController",w.default=j.default.getClassFactory(u)},"./src/streaming/controllers/StreamController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/constants/MetricsConstants.js"),R=i("./src/streaming/Stream.js"),U=i("./src/streaming/ManifestUpdater.js"),j=i("./src/core/EventBus.js"),F=i("./src/core/events/Events.js"),D=i("./src/core/FactoryMaker.js"),h=i("./src/streaming/vo/metrics/PlayList.js"),u=i("./src/core/Debug.js"),p=i("./src/streaming/utils/InitCache.js"),_=i("./src/streaming/utils/URLUtils.js"),b=i("./src/streaming/MediaPlayerEvents.js"),k=i("./src/streaming/controllers/TimeSyncController.js"),L=i("./src/streaming/controllers/MediaSourceController.js"),B=i("./src/streaming/vo/DashJSError.js"),O=i("./src/core/errors/Errors.js"),P=i("./src/streaming/controllers/EventController.js"),y=i("./src/streaming/constants/ConformanceViolationConstants.js");function S(q){return function H(q){if(Array.isArray(q))return ee(q)}(q)||function I(q){if("undefined"!=typeof Symbol&&null!=q[Symbol.iterator]||null!=q["@@iterator"])return Array.from(q)}(q)||function A(q,se){if(q){if("string"==typeof q)return ee(q,se);var V=Object.prototype.toString.call(q).slice(8,-1);if("Object"===V&&q.constructor&&(V=q.constructor.name),"Map"===V||"Set"===V)return Array.from(q);if("Arguments"===V||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(V))return ee(q,se)}}(q)||function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(q,se){(null==se||se>q.length)&&(se=q.length);for(var V=0,de=new Array(se);V<se;V++)de[V]=q[V];return de}function be(){var V,de,Q,pe,me,xe,_e,Ie,Te,ke,Ue,Fe,je,Pe,He,Le,ye,ae,W,ce,De,le,ne,z,te,X,$,K,oe,Ce,Oe,Ze,st,et,ct,xt,tt,Et,Kt,_t,At,Pt,Yt,jt,en,an,Ln,wn,Vn,q=this.context,se=Object(j.default)(q).getInstance();function Ft(){if(!(xe&&xe.hasOwnProperty("load")&&le&&le.hasOwnProperty("initialize")&&le.hasOwnProperty("reset")&&le.hasOwnProperty("getClientTimeOffset")&&_e&&De&&Te&&et))throw new Error(e.default.MISSING_CONFIG_ERROR)}function tn(){if(!me||!me.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function pt(){!function Xe(){try{var Nt=Ie.getStreamsInfo();if(!z&&0===Nt.length)throw new Error("There are no periods in the MPD");z&&Nt.length>0&&Te.updateManifestUpdateInfo({currentTime:et.getTime(),buffered:st.getBufferRange(),presentationStartTime:Nt[0].start,clientTimeOffset:le.getClientTimeOffset()}),ne.length>0&&function oi(Nt){0!==Nt.length?ne=ne.filter(function(ln){var Xn=Nt.filter(function(rr){return rr.id===ln.getId()}).length>0||ln.getId()===z.getId();return Xn||(de.debug("Removing stream ".concat(ln.getId())),ln.reset(!0)),Xn}):de.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(Nt);for(var ln=[],xn=0,Xn=Nt.length;xn<Xn;xn++){var rr=Nt[xn];ln.push(yt(rr)),Te.addManifestUpdateStreamInfo(rr)}Promise.all(ln).then(function(){return en.get().streaming.applyContentSteering&&!z&&Fe.shouldQueryBeforeStart()?Fe.loadSteeringData():Promise.resolve()}).then(function(){z||Zt(Nt),se.trigger(F.default.STREAMS_COMPOSED),qt()}).catch(function(dr){throw dr})}catch(dr){De.error(new B.default(O.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,dr.message+" nostreamscomposed",_e.getValue())),Oe=!0,qi()}}()}function rt(){an=!0}function yt(Nt){var ln=to(Nt.id);return ln?ln.updateData(Nt):(ln=Object(R.default)(q).create({manifestModel:_e,mediaPlayerModel:xt,dashMetrics:Te,manifestUpdater:me,adapter:Ie,timelineConverter:le,capabilities:Q,capabilitiesFilter:pe,errHandler:De,baseURLController:je,segmentBaseController:Pe,textController:X,abrController:Le,playbackController:et,eventController:ae,mediaController:ye,protectionController:te,videoModel:st,streamInfo:Nt,settings:en}),ne.push(ln),ln.initialize(),Promise.resolve())}function Zt(Nt){kt();var ln=Te.getCurrentDVRInfo().range;if(ln.end<ln.start){Ln&&clearTimeout(Ln);var xn=Math.min(1e3*(-1*(ln.end-ln.start)+2),2147483647);return de.debug("Waiting for ".concat(xn," ms before playback can start")),se.trigger(F.default.AST_IN_FUTURE,{delay:xn}),void(Ln=setTimeout(function(){Zt(Nt)},xn))}en.get().streaming.applyProducerReferenceTime&&ct.calculateProducerReferenceTimeOffsets(Nt);var Xn=Nt[0].manifestInfo;if(en.get().streaming.applyServiceDescription&&ct.applyServiceDescription(Xn),Ie.getIsDynamic()){var rr=Yi(Nt,Xn);et.computeAndSetLiveDelay(rr,Xn)}var dr=function Er(){var Nt;if(Ie.getIsDynamic()){var xn=Te.getCurrentDVRInfo();Nt=(xn&&xn.range?xn.range.end:0)-et.getOriginalLiveDelay();var rr=xn?xn.range:null;if(rr){if(isNaN(wn)&&-1===wn.toString().indexOf("posix:")){var Or=Ii(!0);isNaN(Or)||(de.info("Start time from URI parameters: ".concat(Or)),Nt=Math.min(Nt,Or))}else{de.info("Start time provided by the app: ".concat(wn));var dr=Si(!0,wn);isNaN(dr)||(Nt=Math.min(Nt,dr))}var kr=en.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Nt=Math.max(Nt,rr.start+kr)}}else if(Nt=ao()[0].getStreamInfo().start,isNaN(wn)){var vo=Ii(!1);isNaN(vo)||(de.info("Start time from URI parameters: ".concat(vo)),Nt=Math.max(Nt,vo))}else{de.info("Start time provided by the app: ".concat(wn));var Bi=Si(!1,wn);isNaN(Bi)||(Nt=Math.max(Nt,Bi))}return Nt}(),Or=It(dr),kr=null!==Or?Or:ne[0];se.trigger(F.default.INITIAL_STREAM_SWITCH,{startTime:dr}),Jt(kr,null,dr),function bn(){At||(At=setInterval(function(){!oe&&et.getTimeToStreamEnd()<=0&&!et.isSeeking()&&se.trigger(F.default.PLAYBACK_ENDED,{isLast:zi().isLast})},200))}()}function Jt(Nt,ln,xn){try{if(oe||!Nt||ln===Nt&&Nt.getIsActive())return;oe=!0,se.trigger(F.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:ln?ln.getStreamInfo():null,toStreamInfo:Nt.getStreamInfo()});var Xn=!1;z=Nt,ln&&(Xn=zt(Nt,ln),ln.deactivate(Xn)),xn=isNaN(xn)?!Xn&&ln?Nt.getStreamInfo().start:NaN:xn,de.info("Switch to stream ".concat(Nt.getId(),". Seektime is ").concat(xn,", current playback time is ").concat(et.getTime(),". Seamless period switch is set to ").concat(Xn)),Yt=Yt.filter(function(rr){return rr.getId()!==z.getId()}),et.initialize(zi(),!!ln),st.getElement()&&on(xn,Xn)}catch(rr){oe=!1}}function on(Nt,ln){var xn;function Xn(){if(Ze&&"open"===Ze.readyState){de.debug("MediaSource is open!"),window.URL.revokeObjectURL(xn),Ze.removeEventListener("sourceopen",Xn),Ze.removeEventListener("webkitsourceopen",Xn),ur();var dr=Te.getCurrentDVRInfo();ke.setSeekable(dr.range.start,dr.range.end),pn(Nt,ln)}}function rr(){Ze.addEventListener("sourceopen",Xn,!1),Ze.addEventListener("webkitsourceopen",Xn,!1),xn=ke.attachMediaSource(st),de.debug("MediaSource attached to element.  Waiting on open...")}Ze?ln?pn(Nt,ln):(ke.detachMediaSource(st),rr()):(Ze=ke.createMediaSource(),rr())}function pn(Nt,ln){z.activate(Ze,ln?Pt:void 0,Nt).then(function(xn){if(xn){var Xn=Object.keys(xn);Xn.length>0&&xn[Xn[0]].getBuffer().changeType&&(jt=!0),Pt=xn}isNaN(Nt)||(se.trigger(F.default.SEEK_TARGET,{time:Nt},{streamId:z.getId()}),et.seek(Nt,!1,!0),z.startScheduleControllers()),oe=!1,se.trigger(F.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:zi()})})}function Mn(Nt){var xn=It(Nt.seekTime);xn&&xn!==z?xn&&xn!==z&&(Wn(),function Ir(Nt,ln){var xn=Nt&&!isNaN(Nt.seekTime)?Nt.seekTime:NaN,rr=z.getProcessors().map(function(dr){return dr.prepareOuterPeriodPlaybackSeeking(Nt)});Promise.all(rr).then(function(){Jt(ln,z,xn)}).catch(function(dr){De.error(dr)})}(Nt,xn)):(Wn(),function gr(Nt){z.getProcessors().forEach(function(xn){return xn.prepareInnerPeriodPlaybackSeeking(Nt)}),eo(h.PlayListTrace.USER_REQUEST_STOP_REASON)}(Nt)),mo(h.PlayList.SEEK_START_REASON)}function Wn(){Qn()}function Qn(){Yt&&Yt.length>0&&(Yt.forEach(function(Nt){Nt.deactivate(!0)}),Yt=[])}function ut(Nt){Nt.newMediaInfo.streamInfo.id===z.getId()&&(Qn(),z.prepareTrackChange(Nt))}function zt(Nt,ln){try{return en.get().streaming.buffer.reuseExistingSourceBuffers&&(ln.isProtectionCompatible(Nt)||an)&&(jt||ln.isMediaCodecCompatible(Nt,ln))}catch(xn){return!1}}function dn(Nt){var ln=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Ze&&!Nt.getPreloaded()&&zt(Nt,ln)&&Nt.startPreloading(Ze,Pt).then(function(){Yt.push(Nt)})}function It(Nt){if(isNaN(Nt))return null;for(var ln=ne.length,xn=0;xn<ln;xn++){var Xn=ne[xn];if(Nt<parseFloat((Xn.getStartTime()+Xn.getDuration()).toFixed(5)))return Xn}return null}function kt(){try{var Nt=Ie.getIsDynamic(),xn=Ie.getStreamsInfo()[0].manifestInfo,Xn=et.getTime(),rr=le.calcTimeShiftBufferWindow(ne,Nt),dr=vn();if(void 0===rr.start||void 0===rr.end)return;dr&&0!==dr.length?dr.forEach(function(Or){Te.addDVRInfo(Or.getType(),Xn,xn,rr)}):Te.addDVRInfo(e.default.VIDEO,Xn,xn,rr)}catch(Or){}}function Rt(Nt){if(Kt&&K){var ln=xt.getInitialBufferLevel(),xn=[e.default.TEXT];(isNaN(ln)||ln<=et.getBufferLevel(xn)||Ie.getIsDynamic()&&ln>et.getLiveDelay())&&(Kt=!1,mo(h.PlayList.INITIAL_PLAYOUT_START_REASON),et.play())}Nt&&Nt.mediaType&&Te.addBufferLevel(Nt.mediaType,new Date,1e3*Nt.bufferLevel)}function sn(Nt){Nt.streamInfo.id===z.getId()&&Nt.reason&&Nt.reason.forceReplace&&Qn(),to(Nt.streamInfo.id).prepareQualityChange(Nt)}function Fn(){if(Ie.getIsDynamic()&&0!==et.getOriginalLiveDelay()&&z){var Nt=Ie.getStreamsInfo();if(Nt.length>0){var ln=Nt[0].manifestInfo,xn=Yi(Nt,ln);et.computeAndSetLiveDelay(xn,ln)}}}function Un(){if(bi()){var Nt=st.getPlaybackQuality();Nt&&Te.addDroppedFrames(Nt)}}function Ot(){de.debug("[onPlaybackStarted]"),!Kt&&Et&&mo(h.PlayList.RESUME_FROM_PAUSE_START_REASON),Kt&&(Kt=!1),_t&&(_t=!1,en.get().streaming.applyContentSteering&&!Fe.shouldQueryBeforeStart()&&Fe.loadSteeringData()),Et=!1}function Ct(Nt){de.debug("[onPlaybackPaused]"),Nt.ended||(Et=!0,eo(h.PlayListTrace.USER_REQUEST_STOP_REASON))}function Gt(Nt){de.debug("Stream with id ".concat(Nt.streamInfo.id," finished buffering")),Ze&&Nt.streamInfo.isLast?(de.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),ke.signalEndOfStream(Ze)):qt()}function qt(){if(z&&z.getHasFinishedBuffering())for(var Nt=function ar(){var Nt=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var ln=Nt||z||null;if(ln){var xn=ln.getStreamInfo();return ne.filter(function(Xn){var rr=Xn.getStreamInfo();return rr.start>xn.start&&xn.id!==rr.id})}}catch(Xn){return[]}}(z),ln=0;ln<Nt.length;){var xn=Nt[ln],Xn=0===ln?z:Nt[ln-1];!xn.getPreloaded()&&Xn.getHasFinishedBuffering()&&Ze&&dn(xn,Xn),ln+=1}}function Nn(){At&&(clearInterval(At),At=null)}function vn(){return z?z.getProcessors():[]}function Rn(Nt){if(z&&!z.getIsEndedEventSignaled()){z.setIsEndedEventSignaled(!0);var ln=function Yn(){var ln=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||z||null;if(!ln)return null;for(var xn=ln.getStreamInfo(),Xn=xn.start,rr=0,dr=-1,Or=NaN;rr<ne.length;){var Br=ne[rr].getStreamInfo(),fi=Br.start-Xn;fi>0&&(isNaN(Or)||fi<Or)&&xn.id!==Br.id&&(Or=fi,dr=rr),rr+=1}return dr>=0?ne[dr]:null}();ln?(de.debug("StreamController onEnded, found next stream with id ".concat(ln.getStreamInfo().id,". Switching from ").concat(z.getStreamInfo().id," to ").concat(ln.getStreamInfo().id)),Jt(ln,z,NaN)):(de.debug("StreamController no next stream found"),z.setIsEndedEventSignaled(!1)),eo(ln?h.PlayListTrace.END_OF_PERIOD_STOP_REASON:h.PlayListTrace.END_OF_CONTENT_STOP_REASON)}Nt&&Nt.isLast&&(Nn(),Fe.stopSteeringRequestTimer())}function ur(Nt){var ln=Nt||zi().manifestInfo.duration;ke.setDuration(ln)}function Ii(Nt){var ln=He.getURIFragmentData();if(!ln||!ln.t)return NaN;var Xn=ao()[0].getStreamInfo().start;return ln.t=ln.t.split(",")[0],ti(Nt,ln.t,Xn)}function Si(Nt,ln){var xn=0;return Nt||(xn=ao()[0].getStreamInfo().start),ti(Nt,ln,xn)}function ti(Nt,ln,xn){var Xn=Ie.getRegularPeriods()[0],rr=ln.toString(),dr=-1!==rr.indexOf("posix:")?"now"===rr.substring(6)?Date.now()/1e3:parseFloat(rr.substring(6)):NaN;return Nt&&!isNaN(dr)?le.calcPresentationTimeFromWallTime(new Date(1e3*dr),Xn):parseFloat(rr)+xn}function Yi(Nt,ln){try{var xn=NaN;if(ln&&!isNaN(ln.maxFragmentDuration)&&isFinite(ln.maxFragmentDuration))return ln.maxFragmentDuration;if(Nt&&1===Nt.length){var Xn=Nt[0],dr=[e.default.VIDEO,e.default.AUDIO,e.default.TEXT].reduce(function(Or,kr){var Br=Ie.getMediaInfoForType(Xn,kr);return Br&&!1!==Br.isFragmented&&Or.push(Br),Or},[]).reduce(function(Or,kr){var Br=Ie.getVoRepresentations(kr);return Br&&Br.length>0&&Br.forEach(function(fi){fi&&Or.push(fi)}),Or},[]).reduce(function(Or,kr){var Br=Ie.convertRepresentationToRepresentationInfo(kr);return Br&&Br.fragmentDuration&&!isNaN(Br.fragmentDuration)&&Or.push(Br.fragmentDuration),Or},[]);xn=Math.max.apply(Math,S(dr))}return isFinite(xn)?xn:NaN}catch(Or){return NaN}}function si(Nt){if(Nt.error)Oe=!0,qi();else{de.info("Manifest updated... updating data system wide.");var ln=Nt.manifest;Ie.updatePeriods(ln);var xn=Ie.getUTCTimingSources();Ie.getIsDynamic()&&(!xn||0===xn.length)&&se.trigger(b.default.CONFORMANCE_VIOLATION,{level:y.default.LEVELS.WARNING,event:y.default.EVENTS.NO_UTC_TIMING_ELEMENT});var Xn=Ie.getIsDynamic()?xn.concat(tt.getUTCTimingSources()):xn,rr=ce.isHTTPS(Nt.manifest.url);Xn.forEach(function(dr){dr.value.replace(/.*?:\/\//g,"")===en.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(dr.value=dr.value.replace(rr?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),rr?"https://":"http://"),de.debug("Matching default timing source protocol to manifest protocol: ",dr.value))}),pe.filterUnsupportedFeatures(ln).then(function(){je.initialize(ln),Ue.attemptSync(Xn,Ie.getIsDynamic())})}}function bi(){return!!z&&z.getHasVideoTrack()}function Lr(){return!!z&&z.getHasAudioTrack()}function eo(Nt,ln){ln=ln||new Date,vn().forEach(function(xn){xn.finalisePlayList(ln,Nt)}),Te.addPlayList()}function mo(Nt){Te.createPlaylistMetrics(1e3*et.getTime(),Nt)}function $i(Nt){if(Nt.error){var ln="";switch(Nt.error.code){case 1:ln="MEDIA_ERR_ABORTED";break;case 2:ln="MEDIA_ERR_NETWORK";break;case 3:ln="MEDIA_ERR_DECODE",Vn.counts.mediaErrorDecode+=1;break;case 4:ln="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:ln="MEDIA_ERR_ENCRYPTED";break;default:ln="UNKNOWN"}if("MEDIA_ERR_DECODE"===ln&&en.get().errors.recoverAttempts.mediaErrorDecode>=Vn.counts.mediaErrorDecode)return void function _o(){de.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Nt=et.getTime();z.deactivate(!1),de.warn("MediaSource has been resetted. Resuming playback from time ".concat(Nt)),on(Nt,!1)}();Ce=!0,Nt.error.message&&(ln+=" ("+Nt.error.message+")"),Nt.error.msExtendedCode&&(ln+=" (0x"+(Nt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),de.fatal("Video Element Error: "+ln),Nt.error&&de.fatal(Nt.error),De.error(new B.default(Nt.error.code,ln)),qi()}}function zi(){return z?z.getStreamInfo():null}function to(Nt){for(var ln=0,xn=ne.length;ln<xn;ln++)if(ne[ln].getId()===Nt)return ne[ln];return null}function Po(Nt){isNaN(Nt.newDuration)||ur(Nt.newDuration)}function qr(){ne=[],wn=NaN,te=null,oe=!1,z=null,Ce=!1,Oe=!1,Kt=!0,_t=!0,Et=!1,K=!0,At=null,an=!1,jt=!1,Yt=[],Ln=null,Vn={counts:{mediaErrorDecode:0}}}function qi(){Ft(),Ue.reset(),eo(Ce||Oe?h.PlayListTrace.FAILURE_STOP_REASON:h.PlayListTrace.USER_REQUEST_STOP_REASON);for(var Nt=0,ln=ne?ne.length:0;Nt<ln;Nt++)ne[Nt].reset(Ce);(function mt(){se.off(b.default.PLAYBACK_TIME_UPDATED,Un,V),se.off(b.default.PLAYBACK_SEEKING,Mn,V),se.off(b.default.PLAYBACK_ERROR,$i,V),se.off(b.default.PLAYBACK_STARTED,Ot,V),se.off(b.default.PLAYBACK_PAUSED,Ct,V),se.off(b.default.PLAYBACK_ENDED,Rn,V),se.off(b.default.METRIC_ADDED,es,V),se.off(b.default.MANIFEST_VALIDITY_CHANGED,Po,V),se.off(b.default.BUFFER_LEVEL_UPDATED,Rt,V),se.off(b.default.QUALITY_CHANGE_REQUESTED,sn,V),F.default.KEY_SESSION_UPDATED&&se.off(F.default.KEY_SESSION_UPDATED,rt,V),se.off(F.default.MANIFEST_UPDATED,si,V),se.off(F.default.STREAM_BUFFERING_COMPLETED,Gt,V),se.off(F.default.TIME_SYNCHRONIZATION_COMPLETED,pt,V),se.off(F.default.CURRENT_TRACK_CHANGED,ut,V),se.off(F.default.SETTING_UPDATED_LIVE_DELAY,Fn,V),se.off(F.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Fn,V)})(),je.reset(),me.reset(),ae.reset(),Te.clearAllCurrentMetrics(),_e.setValue(null),xe.reset(),le.reset(),W.reset(),Ze&&(ke.detachMediaSource(st),Ze=null),st=null,te&&(te=null,$=null,_e.getValue()&&se.trigger(F.default.PROTECTION_DESTROYED,{data:_e.getValue().url})),Nn(),se.trigger(F.default.STREAM_TEARDOWN_COMPLETE),qr()}function es(Nt){if(Nt.metric===C.default.DVR_INFO){var ln=Lr()?e.default.AUDIO:e.default.VIDEO;Nt.mediaType===ln&&ke.setSeekable(Nt.value.range.start,Nt.value.range.end)}}function ao(){return ne}return V={initialize:function it(Nt,ln){Ft(),K=Nt,$=ln,le.initialize(),(me=Object(U.default)(q).create()).setConfig({manifestModel:_e,adapter:Ie,manifestLoader:xe,errHandler:De,settings:en}),me.initialize(),(ae=Object(P.default)(q).getInstance()).setConfig({manifestUpdater:me,playbackController:et,settings:en}),ae.start(),Ue.setConfig({dashMetrics:Te,baseURLController:je,errHandler:De,settings:en}),Ue.initialize(),te&&(se.trigger(F.default.PROTECTION_CREATED,{controller:te}),te.setMediaElement(st.getElement()),$&&te.setProtectionData($)),function Qe(){se.on(b.default.PLAYBACK_TIME_UPDATED,Un,V),se.on(b.default.PLAYBACK_SEEKING,Mn,V),se.on(b.default.PLAYBACK_ERROR,$i,V),se.on(b.default.PLAYBACK_STARTED,Ot,V),se.on(b.default.PLAYBACK_PAUSED,Ct,V),se.on(b.default.PLAYBACK_ENDED,Rn,V),se.on(b.default.METRIC_ADDED,es,V),se.on(b.default.MANIFEST_VALIDITY_CHANGED,Po,V),se.on(b.default.BUFFER_LEVEL_UPDATED,Rt,V),se.on(b.default.QUALITY_CHANGE_REQUESTED,sn,V),F.default.KEY_SESSION_UPDATED&&se.on(F.default.KEY_SESSION_UPDATED,rt,V),se.on(F.default.MANIFEST_UPDATED,si,V),se.on(F.default.STREAM_BUFFERING_COMPLETED,Gt,V),se.on(F.default.TIME_SYNCHRONIZATION_COMPLETED,pt,V),se.on(F.default.CURRENT_TRACK_CHANGED,ut,V),se.on(F.default.SETTING_UPDATED_LIVE_DELAY,Fn,V),se.on(F.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Fn,V)}()},getActiveStreamInfo:zi,addDVRMetric:kt,hasVideoTrack:bi,hasAudioTrack:Lr,getStreamById:to,getStreamForTime:It,getTimeRelativeToStreamId:function Dt(Nt,ln){for(var xn=null,Xn=0,rr=0,dr=null,Or=0;Or<ne.length;Or++){if(rr=(xn=ne[Or]).getStartTime(),dr=xn.getDuration(),Number.isFinite(rr)&&(Xn=rr),xn.getId()===ln)return Nt-Xn;Number.isFinite(dr)&&(Xn+=dr)}return null},load:function Wt(Nt){var ln=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;Ft(),wn=ln,xe.load(Nt)},loadWithManifest:function vt(Nt){var ln=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN;tn(),wn=ln,me.setManifest(Nt)},getActiveStreamProcessors:vn,setConfig:function jo(Nt){!Nt||(Nt.capabilities&&(Q=Nt.capabilities),Nt.capabilitiesFilter&&(pe=Nt.capabilitiesFilter),Nt.manifestLoader&&(xe=Nt.manifestLoader),Nt.manifestModel&&(_e=Nt.manifestModel),Nt.mediaPlayerModel&&(xt=Nt.mediaPlayerModel),Nt.customParametersModel&&(tt=Nt.customParametersModel),Nt.protectionController&&(te=Nt.protectionController),Nt.adapter&&(Ie=Nt.adapter),Nt.dashMetrics&&(Te=Nt.dashMetrics),Nt.errHandler&&(De=Nt.errHandler),Nt.timelineConverter&&(le=Nt.timelineConverter),Nt.videoModel&&(st=Nt.videoModel),Nt.playbackController&&(et=Nt.playbackController),Nt.serviceDescriptionController&&(ct=Nt.serviceDescriptionController),Nt.contentSteeringController&&(Fe=Nt.contentSteeringController),Nt.textController&&(X=Nt.textController),Nt.abrController&&(Le=Nt.abrController),Nt.mediaController&&(ye=Nt.mediaController),Nt.settings&&(en=Nt.settings),Nt.baseURLController&&(je=Nt.baseURLController),Nt.uriFragmentModel&&(He=Nt.uriFragmentModel),Nt.segmentBaseController&&(Pe=Nt.segmentBaseController))},setProtectionData:function Xo(Nt){$=Nt,te&&te.setProtectionData($)},getIsStreamSwitchInProgress:function Jo(){return oe},switchToVideoElement:function Do(Nt){z&&(et.initialize(zi()),on(Nt,!1))},getHasMediaOrInitialisationError:function Qo(){return Ce||Oe},getStreams:ao,getActiveStream:function br(){return z},getInitialPlayback:function Cr(){return Kt},getAutoPlay:function Hr(){return K},reset:qi},function Hn(){de=Object(u.default)(q).getInstance().getLogger(V),Ue=Object(k.default)(q).getInstance(),ke=Object(L.default)(q).getInstance(),W=Object(p.default)(q).getInstance(),ce=Object(_.default)(q).getInstance(),qr()}(),V}be.__dashjs_factory_name="StreamController",w.default=D.default.getSingletonFactory(be)},"./src/streaming/controllers/TimeSyncController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/DashJSError.js"),C=i("./src/streaming/vo/metrics/HTTPRequest.js"),R=i("./src/core/EventBus.js"),U=i("./src/core/events/Events.js"),j=i("./src/core/errors/Errors.js"),F=i("./src/core/FactoryMaker.js"),D=i("./src/core/Debug.js"),h=i("./src/streaming/utils/URLUtils.js");function P(){var I,H,ee,fe,ue,be,q,se,V,de,Q,pe,me,xe,_e,Ie,S=this.context,E=Object(R.default)(S).getInstance(),A=Object(h.default)(S).getInstance();function Ue(){se=[],V=[],de=null,Q=null,me=null,pe=NaN,ee=!1,fe=!1,xe=ue.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Pe(){!ue.get().streaming.utcSynchronization.enabled||ee||fe||!me||!me.value||!me.schemeIdUri||isNaN(pe)||isNaN(ue.get().streaming.utcSynchronization.backgroundAttempts)||Q&&(Date.now()-Q)/1e3<30||(se=[],fe=!0,He(isNaN(ue.get().streaming.utcSynchronization.backgroundAttempts)?2:ue.get().streaming.utcSynchronization.backgroundAttempts))}function He(et){try{if(et<=0)return void Oe();var ct=Date.now();be[me.schemeIdUri](me.value,function(xt){var tt=Date.now(),Et=ye(ct,tt,xt);se.push(Et),He(et-1)},function(){Oe()})}catch(xt){Oe()}}function Le(){var ct=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||0;if(!V||0===V.length||ct>=V.length)W();else{var xt=V[ct];if(xt)if(be.hasOwnProperty(xt.schemeIdUri)){var tt=(new Date).getTime();be[xt.schemeIdUri](xt.value,function(Et){var Kt=(new Date).getTime(),_t=ye(tt,Kt,Et);me=xt,W(_t)},function(){Le(ct+1)})}else Le(ct+1);else W()}}function ye(et,ct,xt){return xt-(ct-(ct-et)/2)}function W(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,ct=isNaN(et);ct&&ue.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?K():oe(ct,et)}function De(et){var ct=Date.parse(et);return isNaN(ct)&&(ct=function ce(et){var Kt,_t,At=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(et);return Kt=Date.UTC(parseInt(At[1],10),parseInt(At[2],10)-1,parseInt(At[3],10),parseInt(At[4],10),parseInt(At[5],10),At[6]&&(parseInt(At[6],10)||0),At[7]&&1e3*parseFloat(At[7])||0),At[9]&&At[10]&&(_t=60*parseInt(At[9],10)+parseInt(At[10],10),Kt+=("+"===At[8]?-1:1)*_t*60*1e3),new Date(Kt).getTime()}(et)),ct}function le(et){return Date.parse(et)}function ne(et){return Date.parse(et)}function z(et,ct,xt){xt()}function te(et,ct,xt){var tt=De(et);isNaN(tt)?xt():ct(tt)}function X(et,ct,xt,tt,Et){var Kt,_t,At=!1,Pt=new XMLHttpRequest,Yt=Et?C.HTTPRequest.HEAD:C.HTTPRequest.GET,jt=ct.match(/\S+/g);if(ct=jt.shift(),Kt=function(){At||(At=!0,jt.length?X(et,jt.join(" "),xt,tt,Et):tt())},_t=function(){var Ln,wn;200===Pt.status&&(Ln=Et?Pt.getResponseHeader("Date"):Pt.response,wn=et(Ln),isNaN(wn)||(xt(wn),At=!0))},A.isRelative(ct)){var en=Ie.resolve();en&&(ct=A.resolve(ct,en.url))}Pt.open(Yt,ct),Pt.timeout=5e3,Pt.onload=_t,Pt.onloadend=Kt,Pt.send()}function $(et,ct,xt){X(ne,et,ct,xt,!0)}function K(){var et=q.getLatestMPDRequestHeaderValueByID("Date"),ct=null!==et?new Date(et).getTime():Number.NaN;isNaN(ct)?oe(!0):oe(!1,ct-Date.now())}function oe(et,ct){if(!isNaN(pe)&&!isNaN(ct)&&!et&&function Ce(et){try{var _t,ct=Ze(et),xt=isNaN(xe)?30:xe,tt=isNaN(ue.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ue.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Et=isNaN(ue.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ue.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Kt=isNaN(ue.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ue.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;ct?(_t=Math.min(xt*tt,Et),H.debug("Increasing timeBetweenSyncAttempts to ".concat(_t))):(_t=Math.max(xt/tt,Kt),H.debug("Decreasing timeBetweenSyncAttempts to ".concat(_t))),xe=_t}catch(At){}}(ct),!et&&!isNaN(ct)){de=Date.now(),ee=!1;var xt=isNaN(pe);pe=ct,xt&&Pe(),H.debug("Completed UTC sync. Setting client - server offset to ".concat(ct))}et&&(me=null,ee=!1,_e.error(new e.default(j.default.TIME_SYNC_FAILED_ERROR_CODE,j.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),E.trigger(U.default.UPDATE_TIME_SYNC_OFFSET,{offset:ct}),E.trigger(U.default.TIME_SYNCHRONIZATION_COMPLETED)}function Oe(){if(se&&0!==se.length){var et=se.reduce(function(ct,xt){return ct+xt},0)/se.length;Ze(et)?H.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(H.debug("Completed background UTC sync. Setting client - server offset to ".concat(et)),E.trigger(U.default.UPDATE_TIME_SYNC_OFFSET,{offset:pe=et})),fe=!1,Q=Date.now()}}function Ze(et){try{if(isNaN(pe))return!0;var ct=ue.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ue.get().streaming.utcSynchronization.maximumAllowedDrift)?ue.get().streaming.utcSynchronization.maximumAllowedDrift:100;return et>=pe-ct&&et<=pe+ct}catch(Et){return!0}}return I={initialize:function Fe(){Ue(),be={"urn:mpeg:dash:utc:http-head:2014":$,"urn:mpeg:dash:utc:http-xsdate:2014":X.bind(null,De),"urn:mpeg:dash:utc:http-iso:2014":X.bind(null,le),"urn:mpeg:dash:utc:direct:2014":te,"urn:mpeg:dash:utc:http-head:2012":$,"urn:mpeg:dash:utc:http-xsdate:2012":X.bind(null,De),"urn:mpeg:dash:utc:http-iso:2012":X.bind(null,le),"urn:mpeg:dash:utc:direct:2012":te,"urn:mpeg:dash:utc:http-ntp:2014":z,"urn:mpeg:dash:utc:ntp:2014":z,"urn:mpeg:dash:utc:sntp:2014":z}},attemptSync:function je(et,ct){if(V=et,!ee){if(!function ae(et){try{if(!et||!ue.get().streaming.utcSynchronization.enabled)return!1;var ct=isNaN(xe)?30:xe;return!(de&&ct&&!isNaN(ct))||(Date.now()-de)/1e3>=ct}catch(xt){return!0}}(ct))return void E.trigger(U.default.TIME_SYNCHRONIZATION_COMPLETED);ee=!0,Le()}},setConfig:function ke(et){!et||(et.dashMetrics&&(q=et.dashMetrics),et.baseURLController&&(Ie=et.baseURLController),et.errHandler&&(_e=et.errHandler),et.settings&&(ue=et.settings))},reset:function st(){Ue(),E.off(U.default.ATTEMPT_BACKGROUND_SYNC,Pe,I)}},function Te(){H=Object(D.default)(S).getInstance().getLogger(I),E.on(U.default.ATTEMPT_BACKGROUND_SYNC,Pe,I)}(),I}P.__dashjs_factory_name="TimeSyncController";var y=F.default.getSingletonFactory(P);y.HTTP_TIMEOUT_MS=5e3,F.default.updateSingletonFactory(P.__dashjs_factory_name,y),w.default=y},"./src/streaming/controllers/XlinkController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/XlinkLoader.js"),C=i("./src/core/EventBus.js"),R=i("./src/core/events/Events.js"),U=i("./src/core/FactoryMaker.js"),j=i("./externals/xml2json.js"),F=i("./src/streaming/utils/URLUtils.js"),D=i("./src/dash/constants/DashConstants.js"),h="onLoad";function _(b){b=b||{};var O,P,y,S,E,A,k=this.context,L=Object(C.default)(k).getInstance(),B=Object(F.default)(k).getInstance();function be(xe,_e,Ie){var ke,Ue,Te={};Te.elements=xe,Te.type=_e,Te.resolveType=Ie,0===Te.elements.length&&se(Te);for(var Fe=0;Fe<Te.elements.length;Fe++)Ue=B.isHTTPURL((ke=Te.elements[Fe]).url)?ke.url:ke.originalContent.BaseURL+ke.url,A.load(Ue,ke,Te)}function q(xe){var _e,Ie,Ue="";if(Ie=xe.resolveObject,(_e=xe.element).resolvedContent){var Fe=0;0===_e.resolvedContent.indexOf("<?xml")&&(Fe=_e.resolvedContent.indexOf("?>")+2),Ue=_e.resolvedContent.substr(0,Fe)+"<response>"+_e.resolvedContent.substr(Fe)+"</response>",_e.resolvedContent=E.xml_str2json(Ue)}(function pe(xe){var _e;for(_e=0;_e<xe.elements.length;_e++)if(!1===xe.elements[_e].resolved)return!1;return!0})(Ie)&&se(Ie)}function se(xe){var Ie,Te,_e=[];if(function de(xe){var Ie,Te,Ue,Fe,je,_e=[];for(Ue=xe.elements.length-1;Ue>=0;Ue--){if(Te=(Ie=xe.elements[Ue]).type+"_asArray",Ie.resolvedContent){if(Ie.resolvedContent)for(Fe=0;Fe<Ie.resolvedContent[Te].length;Fe++)_e.push(Ie.resolvedContent[Te][Fe])}else delete Ie.originalContent["xlink:actuate"],delete Ie.originalContent["xlink:href"],_e.push(Ie.originalContent);for(Ie.parentElement[Te].splice(Ie.index,1),je=0;je<_e.length;je++)Ie.parentElement[Te].splice(Ie.index+je,0,_e[je]);_e=[]}xe.elements.length>0&&y.run(S)}(xe),"onActuate"===xe.resolveType&&L.trigger(R.default.XLINK_READY,{manifest:S}),xe.resolveType===h)switch(xe.type){case D.default.PERIOD:for(Ie=0;Ie<S[D.default.PERIOD+"_asArray"].length;Ie++)(Te=S[D.default.PERIOD+"_asArray"][Ie]).hasOwnProperty(D.default.ADAPTATION_SET+"_asArray")&&(_e=_e.concat(V(Te[D.default.ADAPTATION_SET+"_asArray"],Te,D.default.ADAPTATION_SET,h))),Te.hasOwnProperty(D.default.EVENT_STREAM+"_asArray")&&(_e=_e.concat(V(Te[D.default.EVENT_STREAM+"_asArray"],Te,D.default.EVENT_STREAM,h)));be(_e,D.default.ADAPTATION_SET,h);break;case D.default.ADAPTATION_SET:L.trigger(R.default.XLINK_READY,{manifest:S})}}function V(xe,_e,Ie,Te){var Ue,Fe,je,ke=[];for(Fe=xe.length-1;Fe>=0;Fe--)(Ue=xe[Fe]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===Ue["xlink:href"]&&xe.splice(Fe,1);for(Fe=0;Fe<xe.length;Fe++)(Ue=xe[Fe]).hasOwnProperty("xlink:href")&&Ue.hasOwnProperty("xlink:actuate")&&Ue["xlink:actuate"]===Te&&(je=Q(Ue["xlink:href"],_e,Ie,Fe,Te,Ue),ke.push(je));return ke}function Q(xe,_e,Ie,Te,ke,Ue){return{url:xe,parentElement:_e,type:Ie,index:Te,resolveType:ke,originalContent:Ue,resolvedContent:null,resolved:!1}}return O={resolveManifestOnLoad:function fe(xe){E=new j.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:P}),(S=xe).Period_asArray?be(V(S.Period_asArray,S,D.default.PERIOD,h),D.default.PERIOD,h):L.trigger(R.default.XLINK_READY,{manifest:S})},setMatchers:function H(xe){xe&&(P=xe)},setIron:function ee(xe){xe&&(y=xe)},reset:function ue(){L.off(R.default.XLINK_ELEMENT_LOADED,q,O),A&&(A.reset(),A=null)}},function I(){L.on(R.default.XLINK_ELEMENT_LOADED,q,O),A=Object(e.default)(k).create({errHandler:b.errHandler,dashMetrics:b.dashMetrics,mediaPlayerModel:b.mediaPlayerModel,requestModifier:b.requestModifier,settings:b.settings})}(),O}_.__dashjs_factory_name="XlinkController",w.default=U.default.getClassFactory(_)},"./src/streaming/metrics/MetricsReporting.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),C=i("./src/streaming/metrics/MetricsReportingEvents.js"),R=i("./src/streaming/metrics/controllers/MetricsCollectionController.js"),U=i("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),j=i("./src/streaming/metrics/reporting/ReportingFactory.js");function F(){var h=this.context;return{createMetricsReporting:function _(L){return Object(e.default)(h).getInstance({eventBus:L.eventBus,dashMetrics:L.dashMetrics,metricsConstants:L.metricsConstants,events:L.events}).initialise(),Object(R.default)(h).create(L)},getReportingFactory:function b(){return Object(j.default)(h).getInstance()},getMetricsHandlerFactory:function k(){return Object(U.default)(h).getInstance()}}}F.__dashjs_factory_name="MetricsReporting";var D=dashjs.FactoryMaker.getClassFactory(F);D.events=C.default,dashjs.FactoryMaker.updateClassFactory(F.__dashjs_factory_name,D),w.default=D},"./src/streaming/metrics/MetricsReportingEvents.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var O=new(function(P){h(S,P);var y=p(S);function S(){var E;return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(E=y.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",E.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",E.CMCD_DATA_GENERATED="cmcdDataGenerated",E}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/events/EventsBase.js").default));w.default=O},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/controllers/MetricsController.js"),C=i("./src/streaming/metrics/utils/ManifestParsing.js"),R=i("./src/streaming/metrics/MetricsReportingEvents.js");function U(j){var F,D={},h=this.context,u=(j=j||{}).eventBus,p=j.events;function _(B){if(!B.error){var O=Object.keys(D);Object(C.default)(h).getInstance({adapter:j.adapter,constants:j.constants}).getMetrics(B.manifest).forEach(function(y){var S=JSON.stringify(y);if(D.hasOwnProperty(S))O.splice(S,1);else try{var E=Object(e.default)(h).create(j);E.initialize(y),D[S]=E}catch(A){}}),O.forEach(function(y){D[y].reset(),delete D[y]}),u.trigger(R.default.METRICS_INITIALISATION_COMPLETE)}}function b(){Object.keys(D).forEach(function(B){D[B].reset()}),D={}}return F={reset:function L(){u.off(p.MANIFEST_UPDATED,_,F),u.off(p.STREAM_TEARDOWN_COMPLETE,b,F)}},function k(){u.on(p.MANIFEST_UPDATED,_,F),u.on(p.STREAM_TEARDOWN_COMPLETE,b,F)}(),F}U.__dashjs_factory_name="MetricsCollectionController",w.default=dashjs.FactoryMaker.getClassFactory(U)},"./src/streaming/metrics/controllers/MetricsController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/controllers/RangeController.js"),C=i("./src/streaming/metrics/controllers/ReportingController.js"),R=i("./src/streaming/metrics/controllers/MetricsHandlersController.js");function U(j){j=j||{};var F,D,h,p=this.context;function b(){F&&F.reset(),D&&D.reset(),h&&h.reset()}return{initialize:function _(k){try{(h=Object(e.default)(p).create({mediaElement:j.mediaElement})).initialize(k.Range),(D=Object(C.default)(p).create({debug:j.debug,metricsConstants:j.metricsConstants,mediaPlayerModel:j.mediaPlayerModel})).initialize(k.Reporting,h),(F=Object(R.default)(p).create({debug:j.debug,eventBus:j.eventBus,metricsConstants:j.metricsConstants,events:j.events})).initialize(k.metrics,D)}catch(L){throw b(),L}},reset:b}}U.__dashjs_factory_name="MetricsController",w.default=dashjs.FactoryMaker.getClassFactory(U)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function C(R){var j,U=[],F=this.context,D=(R=R||{}).eventBus,h=R.events,u=Object(e.default)(F).getInstance({debug:R.debug,eventBus:R.eventBus,metricsConstants:R.metricsConstants});function p(k){U.forEach(function(L){L.handleNewMetric(k.metric,k.value,k.mediaType)})}return j={initialize:function _(k,L){k.split(",").forEach(function(B,O,P){var y;if(-1!==B.indexOf("(")&&-1===B.indexOf(")")){var S=P[O+1];S&&-1===S.indexOf("(")&&-1!==S.indexOf(")")&&(B+=","+S,delete P[O+1])}(y=u.create(B,L))&&U.push(y)}),D.on(h.METRIC_ADDED,p,j),D.on(h.METRIC_UPDATED,p,j)},reset:function b(){D.off(h.METRIC_ADDED,p,j),D.off(h.METRIC_UPDATED,p,j),U.forEach(function(k){return k.reset()}),U=[]}}}C.__dashjs_factory_name="MetricsHandlersController",w.default=dashjs.FactoryMaker.getClassFactory(C)},"./src/streaming/metrics/controllers/RangeController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/utils/CustomTimeRanges.js");function C(R){var F,D,U=!1,j=this.context,h=(R=R||{}).mediaElement;return F={initialize:function u(k){k&&k.length&&(k.forEach(function(L){var B=L.starttime;D.add(B,B+L.duration)}),U=!!k[0]._useWallClockTime)},reset:function p(){D.clear()},isEnabled:function b(){var L,k=D.length;if(!k)return!0;L=U?(new Date).getTime()/1e3:h.currentTime;for(var B=0;B<k;B+=1){var O=D.start(B),P=D.end(B);if(O<=L&&L<P)return!0}return!1}},function _(){D=Object(e.default)(j).create()}(),F}C.__dashjs_factory_name="RangeController",w.default=dashjs.FactoryMaker.getClassFactory(C)},"./src/streaming/metrics/controllers/ReportingController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/reporting/ReportingFactory.js");function C(R){var U=[],F=Object(e.default)(this.context).getInstance(R);return{initialize:function D(p,_){p.some(function(b){var k=F.create(b,_);if(k)return U.push(k),!0})},reset:function h(){U.forEach(function(p){return p.reset()}),U=[]},report:function u(p,_){U.forEach(function(b){return b.report(p,_)})}}}C.__dashjs_factory_name="ReportingController",w.default=dashjs.FactoryMaker.getClassFactory(C)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),C=i("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),R=i("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),U=i("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function j(F){var D,h=(F=F||{}).debug?F.debug.getLogger(D):{},u=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,p=this.context,_={BufferLevel:e.default,DVBErrors:C.default,HttpList:R.default,PlayList:U.default,RepSwitchList:U.default,TcpList:U.default};return{create:function b(B,O){var y,P=B.match(u);if(P){try{(y=_[P[1]](p).create({eventBus:F.eventBus,metricsConstants:F.metricsConstants})).initialize(P[1],O,P[3],P[5])}catch(S){y=null,h.error("MetricsHandlerFactory: Could not create handler for type ".concat(P[1]," with args ").concat(P[3],", ").concat(P[5]," (").concat(S.message,")"))}return y}},register:function k(B,O){_[B]=O},unregister:function L(B){delete _[B]}}}j.__dashjs_factory_name="MetricsHandlerFactory",w.default=dashjs.FactoryMaker.getSingletonFactory(j)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/utils/HandlerHelpers.js");function C(R){R=R||{};var j,F,D,h,u,p=this.context,_=Object(e.default)(p).getInstance(),b=[],k=R.metricsConstants;function B(){var S=function L(){try{return Object.keys(b).map(function(S){return b[S]}).reduce(function(S,E){return S.level<E.level?S:E})}catch(S){return}}();S&&u!==S.t&&(u=S.t,j.report(D,S))}return{initialize:function O(S,E,A){E&&(F=_.validateN(A),j=E,D=_.reconstructFullMetricName(S,A),h=setInterval(B,F))},reset:function P(){clearInterval(h),h=null,F=0,j=null,u=null},handleNewMetric:function y(S,E,A){S===k.BUFFER_LEVEL&&(b[A]=E)}}}C.__dashjs_factory_name="BufferLevelHandler",w.default=dashjs.FactoryMaker.getClassFactory(C)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/MetricsReportingEvents.js");w.default=dashjs.FactoryMaker.getClassFactory(function C(R){var j,F=(R=R||{}).eventBus,D=R.metricsConstants;function h(){F.off(e.default.METRICS_INITIALISATION_COMPLETE,h,this),F.trigger(e.default.BECAME_REPORTING_PLAYER)}return{initialize:function u(b,k){k&&(j=k,F.on(e.default.METRICS_INITIALISATION_COMPLETE,h,this))},reset:function p(){j=null},handleNewMetric:function _(b,k){b===D.DVB_ERRORS&&j&&j.report(b,k)}}})},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(Ge,w,i){"use strict";function e(){var R,U;return{initialize:function j(h,u){R=h,U=u},reset:function F(){U=null,R=void 0},handleNewMetric:function D(h,u){h===R&&U&&U.report(R,u)}}}i.r(w),e.__dashjs_factory_name="GenericMetricHandler",w.default=dashjs.FactoryMaker.getClassFactory(e)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/utils/HandlerHelpers.js");function C(R){R=R||{};var j,F,D,h,u,p=[],_=Object(e.default)(this.context).getInstance(),b=R.metricsConstants;function k(){p.length&&j&&j.report(h,p),p=[]}return{initialize:function L(P,y,S,E){y&&(F=_.validateN(S),j=y,E&&E.length&&(D=E),h=_.reconstructFullMetricName(P,S,E),u=setInterval(k,F))},reset:function B(){clearInterval(u),u=null,F=null,D=null,p=[],j=null},handleNewMetric:function O(P,y){P===b.HTTP_REQUEST&&(!D||D===y.type)&&p.push(y)}}}C.__dashjs_factory_name="HttpListHandler",w.default=dashjs.FactoryMaker.getClassFactory(C)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function C(R){var F,U={"urn:dvb:dash:reporting:2014":e.default},j=this.context,D=(R=R||{}).debug?R.debug.getLogger(F):{},h=R.metricsConstants,u=R.mediaPlayerModel||{};return{create:function p(k,L){var B;try{(B=U[k.schemeIdUri](j).create({metricsConstants:h,mediaPlayerModel:u})).initialize(k,L)}catch(O){B=null,D.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(k.schemeIdUri," (").concat(O.message,")"))}return B},register:function _(k,L){U[k]=L},unregister:function b(k){delete U[k]}}}C.__dashjs_factory_name="ReportingFactory",w.default=dashjs.FactoryMaker.getSingletonFactory(C)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/utils/MetricSerialiser.js"),C=i("./src/streaming/metrics/utils/RNG.js"),R=i("./src/streaming/models/CustomParametersModel.js");function U(j){var F,h,u,p,_,b,k,L,D=this.context,P=[],y=(j=j||{}).metricsConstants;function H(){_=!1,b=!1,k=null,L=null}return F={report:function A(fe,ue){Array.isArray(ue)||(ue=[ue]),b&&L.isEnabled()&&ue.forEach(function(be){var q=h.serialise(be);fe!==y.DVB_ERRORS&&(q="metricname=".concat(fe,"&").concat(q)),function E(fe,ue,be){var q=new XMLHttpRequest;q.withCredentials=u.getXHRWithCredentialsForType(y.HTTP_REQUEST_DVB_REPORTING_TYPE);var se=function(){var de=P.indexOf(q);-1!==de&&(P.splice(de,1),q.status>=200&&q.status<300?ue&&ue():be&&be())};P.push(q);try{q.open("GET",fe),q.onloadend=se,q.onerror=se,q.send()}catch(V){q.onerror()}}(q="".concat(k,"?").concat(q),null,function(){b=!1})})},initialize:function I(fe,ue){var be;if(L=ue,!(k=fe.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");_||((be=fe.dvb_probability)&&(1e3===be||be/1e3>=p.random())&&(b=!0),_=!0)},reset:function ee(){H()}},function S(){h=Object(e.default)(D).getInstance(),p=Object(C.default)(D).getInstance(),u=Object(R.default)(D).getInstance(),H()}(),F}U.__dashjs_factory_name="DVBReporting",w.default=dashjs.FactoryMaker.getClassFactory(U)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/vo/DVBErrors.js"),C=i("./src/streaming/metrics/MetricsReportingEvents.js");function R(U){var j,F,D=(U=U||{}).eventBus,h=U.dashMetrics,u=U.metricsConstants,p=U.events;function _(E){var A=new e.default;if(F){for(var I in E)E.hasOwnProperty(I)&&(A[I]=E[I]);A.mpdurl||(A.mpdurl=F.originalUrl||F.url),A.terror||(A.terror=new Date),h.addDVBErrors(A)}}function b(E){E.error||(F=E.manifest)}function k(E){_({errorcode:e.default.BASE_URL_CHANGED,servicelocation:E.entry})}function L(){_({errorcode:e.default.BECAME_REPORTER})}function O(E){E.metric===u.HTTP_REQUEST&&function B(E){(0===E.responsecode||null==E.responsecode||E.responsecode>=400||E.responsecode<100||E.responsecode>=600)&&_({errorcode:E.responsecode||e.default.CONNECTION_ERROR,url:E.url,terror:E.tresponse,servicelocation:E._serviceLocation})}(E.value)}function P(E){var I;switch(E.error?E.error.code:0){case MediaError.MEDIA_ERR_NETWORK:I=e.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:I=e.default.CORRUPT_MEDIA_OTHER;break;default:return}_({errorcode:I})}return j={initialise:function y(){D.on(p.MANIFEST_UPDATED,b,j),D.on(p.SERVICE_LOCATION_BLACKLIST_CHANGED,k,j),D.on(p.METRIC_ADDED,O,j),D.on(p.METRIC_UPDATED,O,j),D.on(p.PLAYBACK_ERROR,P,j),D.on(C.default.BECAME_REPORTING_PLAYER,L,j)},reset:function S(){D.off(p.MANIFEST_UPDATED,b,j),D.off(p.SERVICE_LOCATION_BLACKLIST_CHANGED,k,j),D.off(p.METRIC_ADDED,O,j),D.off(p.METRIC_UPDATED,O,j),D.off(p.PLAYBACK_ERROR,P,j),D.off(C.default.BECAME_REPORTING_PLAYER,L,j)}}}R.__dashjs_factory_name="DVBErrorsTranslator",w.default=dashjs.FactoryMaker.getSingletonFactory(R)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(Ge,w,i){"use strict";function e(){return{reconstructFullMetricName:function(R,U,j){var F=R;return U&&(F+="("+U,j&&j.length&&(F+=","+j),F+=")"),F},validateN:function(R){if(!R)throw new Error("missing n");if(isNaN(R))throw new Error("n is NaN");if(R<0)throw new Error("n must be positive");return R}}}i.r(w),e.__dashjs_factory_name="HandlerHelpers",w.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/utils/ManifestParsing.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/metrics/vo/Metrics.js"),C=i("./src/streaming/metrics/vo/Range.js"),R=i("./src/streaming/metrics/vo/Reporting.js");function U(j){var D=(j=j||{}).adapter,h=j.constants;return{getMetrics:function p(_){var b=[];return _&&_.Metrics_asArray&&_.Metrics_asArray.forEach(function(k){var L=new e.default,B=D.getIsDynamic(_);k.hasOwnProperty("metrics")&&(L.metrics=k.metrics,k.Range_asArray&&k.Range_asArray.forEach(function(O){var P=new C.default;P.starttime=function u(_,b,k){var L,B,O=0;return b?O=D.getAvailabilityStartTime(_)/1e3:(L=D.getRegularPeriods(_)).length&&(O=L[0].start),B=O,k&&k.hasOwnProperty(h.START_TIME)&&(B+=k.starttime),B}(_,B,O),P.duration=O.hasOwnProperty("duration")?O.duration:D.getDuration(_),P._useWallClockTime=B,L.Range.push(P)}),k.Reporting_asArray&&(k.Reporting_asArray.forEach(function(O){var P=new R.default;O.hasOwnProperty(h.SCHEME_ID_URI)&&(P.schemeIdUri=O.schemeIdUri,O.hasOwnProperty("value")&&(P.value=O.value),O.hasOwnProperty(h.DVB_REPORTING_URL)&&(P.dvb_reportingUrl=O[h.DVB_REPORTING_URL]),O.hasOwnProperty(h.DVB_PROBABILITY)&&(P.dvb_probability=O[h.DVB_PROBABILITY]),L.Reporting.push(P))}),b.push(L)))}),b}}}U.__dashjs_factory_name="ManifestParsing",w.default=dashjs.FactoryMaker.getSingletonFactory(U)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(Ge,w,i){"use strict";function e(){return{serialise:function C(R){var F,D,U=[],j=[];for(F in R)if(R.hasOwnProperty(F)&&0!==F.indexOf("_")){if(null==(D=R[F])&&(D=""),Array.isArray(D)){if(!D.length)continue;j=[],D.forEach(function(h){var u="Object"!==Object.prototype.toString.call(h).slice(8,-1);j.push(u?h:C(h))}),D=j.map(encodeURIComponent).join(",")}else"string"==typeof D?D=encodeURIComponent(D):D instanceof Date?D=D.toISOString():"number"==typeof D&&(D=Math.round(D));U.push(F+"="+D)}return U.join("&")}}}i.r(w),e.__dashjs_factory_name="MetricSerialiser",w.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/utils/RNG.js":function(Ge,w,i){"use strict";function e(){var F,D,h,C=window.crypto||window.msCrypto,R=Uint32Array,U=Math.pow(2,8*R.BYTES_PER_ELEMENT)-1;function u(){C&&(F||(F=new R(10)),C.getRandomValues(F),D=0)}return h={random:function p(_,b){var k;return _||(_=0),b||(b=1),C?(D===F.length&&u(),k=F[D]/U,D+=1):k=Math.random(),k*(b-_)+_}},u(),h}i.r(w),e.__dashjs_factory_name="RNG",w.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/metrics/vo/DVBErrors.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w);var D=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null});D.SSL_CONNECTION_FAILED_PREFIX="SSL",D.DNS_RESOLUTION_FAILED="C00",D.HOST_UNREACHABLE="C01",D.CONNECTION_REFUSED="C02",D.CONNECTION_ERROR="C03",D.CORRUPT_MEDIA_ISOBMFF="M00",D.CORRUPT_MEDIA_OTHER="M01",D.BASE_URL_CHANGED="F00",D.BECAME_REPORTER="S00",w.default=D},"./src/streaming/metrics/vo/Metrics.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.metrics="",this.Range=[],this.Reporting=[]})},"./src/streaming/metrics/vo/Range.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1})},"./src/streaming/metrics/vo/Reporting.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function C(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,U(b.key),b)}}function R(u,p,_){return p&&C(u.prototype,p),_&&C(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}function U(u){var p=function j(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);w.default=R(function u(){(function F(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3})},"./src/streaming/models/BaseURLTreeModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/utils/ObjectUtils.js"),C=i("./src/core/FactoryMaker.js");function R(b){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(k){return typeof k}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k})(b)}function U(b,k){for(var L=0;L<k.length;L++){var B=k[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(b,F(B.key),B)}}function j(b,k,L){return k&&U(b.prototype,k),L&&U(b,L),Object.defineProperty(b,"prototype",{writable:!1}),b}function F(b){var k=function D(b,k){if("object"!==R(b)||null===b)return b;var L=b[Symbol.toPrimitive];if(void 0!==L){var B=L.call(b,k||"default");if("object"!==R(B))return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===k?String:Number)(b)}(b,"string");return"symbol"===R(k)?k:String(k)}var u=NaN,p=j(function b(k,L){(function h(b,k){if(!(b instanceof k))throw new TypeError("Cannot call a class as a function")})(this,b),this.data={baseUrls:k||null,selectedIdx:L||u},this.children=[]});function _(){var b,k,L,B=this.context,O=Object(e.default)(B).getInstance();function E(be,q,se){var V=L.getBaseURLsFromElement(se);be[q]?O.areEqual(V,be[q].data.baseUrls)||(be[q].data.baseUrls=V,be[q].data.selectedIdx=u):be[q]=new p(V)}function A(be){!function S(){if(!L||!L.hasOwnProperty("getBaseURLsFromElement")||!L.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var q=L.getBaseURLsFromElement(be);O.areEqual(q,k.data.baseUrls)||(k.data.baseUrls=q,k.data.selectedIdx=u),be&&be.Period_asArray&&be.Period_asArray.forEach(function(se,V){E(k.children,V,se),se.AdaptationSet_asArray&&se.AdaptationSet_asArray.forEach(function(de,Q){E(k.children[V].children,Q,de),de.Representation_asArray&&de.Representation_asArray.sort(L.getRepresentationSortFunction()).forEach(function(pe,me){E(k.children[V].children[Q].children,me,pe)})})})}function I(be,q){var se=q||k;be(se.data),se.children&&se.children.forEach(function(V){return I(be,V)})}function fe(){k=new p}return b={reset:fe,update:function ee(be){A(be)},getForPath:function ue(be){var q=k,se=[q.data];return be&&be.forEach(function(V){(q=q.children[V])&&se.push(q.data)}),se.filter(function(V){return V.baseUrls.length})},invalidateSelectedIndexes:function H(be){I(function(q){isNaN(q.selectedIdx)||be===q.baseUrls[q.selectedIdx].serviceLocation&&(q.selectedIdx=u)})},setConfig:function y(be){be.adapter&&(L=be.adapter)}},function P(){fe()}(),b}_.__dashjs_factory_name="BaseURLTreeModel",w.default=C.default.getClassFactory(_)},"./src/streaming/models/CmcdModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/streaming/MediaPlayerEvents.js"),R=i("./src/streaming/metrics/MetricsReportingEvents.js"),U=i("./src/core/FactoryMaker.js"),j=i("./src/core/Settings.js"),F=i("./src/streaming/constants/Constants.js"),D=i("./src/streaming/vo/metrics/HTTPRequest.js"),h=i("./src/dash/models/DashManifestModel.js"),u=i("./src/core/Utils.js");function p(E,A){var I="undefined"!=typeof Symbol&&E[Symbol.iterator]||E["@@iterator"];if(!I){if(Array.isArray(E)||(I=function _(E,A){if(E){if("string"==typeof E)return b(E,A);var I=Object.prototype.toString.call(E).slice(8,-1);if("Object"===I&&E.constructor&&(I=E.constructor.name),"Map"===I||"Set"===I)return Array.from(E);if("Arguments"===I||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return b(E,A)}}(E))||A&&E&&"number"==typeof E.length){I&&(E=I);var H=0,ee=function(){};return{s:ee,n:function(){return H>=E.length?{done:!0}:{done:!1,value:E[H++]}},e:function(se){throw se},f:ee}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var be,fe=!0,ue=!1;return{s:function(){I=I.call(E)},n:function(){var se=I.next();return fe=se.done,se},e:function(se){ue=!0,be=se},f:function(){try{!fe&&null!=I.return&&I.return()}finally{if(ue)throw be}}}}function b(E,A){(null==A||A>E.length)&&(A=E.length);for(var I=0,H=new Array(A);I<A;I++)H[I]=E[I];return H}var B_MANIFEST="m",B_AUDIO="a",B_VIDEO="v",B_INIT="i",B_CAPTION="c",B_ISOBMFF_TEXT_TRACK="tt",B_ENCRYPTION_KEY="k",B_OTHER="o",O_DASH="d",O_MSS="s",P_VOD="v",P_LIVE="l";function S(){var E,A,I,H,ee,fe,ue,be,q,se,V=this.context,de=Object(e.default)(V).getInstance(),Q=Object(j.default)(V).getInstance();function _e(){I={pr:1,nor:null,st:null,sf:null,sid:"".concat(u.default.generateUuid()),cid:null},q={},be={},se={},Te()}function Ie(){Te()}function Te(){if(fe){var tt=fe.getStreamController();if(tt&&"function"==typeof tt.getActiveStream){var Et=tt.getActiveStream();!Et||(ue=Et.getProcessors())}}}function Fe(tt,Et){var At,Kt={},_t=p(Et);try{for(_t.s();!(At=_t.n()).done;){var Pt=At.value;tt[Pt]&&(Kt[Pt]=tt[Pt])}}catch(Yt){_t.e(Yt)}finally{_t.f()}return Kt}function Pe(tt){var Et=Q.get().streaming.cmcd.enabledKeys;return tt.filter(function(Kt){return Et.includes(Kt)})}function He(tt){try{return tt.type===D.HTTPRequest.MPD_TYPE?function ye(){var tt=le();return tt.ot=B_MANIFEST,tt}():tt.type===D.HTTPRequest.MEDIA_SEGMENT_TYPE?(function W(tt){se.hasOwnProperty(tt)||(se[tt]=!1),be.hasOwnProperty(tt)||(be[tt]=!1),q.hasOwnProperty(tt)||(q[tt]=!1)}(tt.mediaType),function ae(tt){var Ln,Et=le(),Kt=function ne(tt){try{return parseInt(tt.mediaInfo.bitrateList[tt.quality].bandwidth/1e3)}catch(_t){return null}}(tt),_t=function te(tt){try{return isNaN(tt.duration)?null:Math.round(1e3*tt.duration)}catch(Et){return null}}(tt),At=function X(tt){try{return 100*parseInt(H.getThroughputHistory().getSafeAverageThroughput(tt)/100)}catch(Et){return null}}(tt.mediaType),Pt=function $(tt){try{var Et=I.pr,Kt=ee.getCurrentBufferLevel(tt);return isNaN(Et)||isNaN(Kt)?null:100*parseInt(Kt/Et*10)}catch(_t){return null}}(tt.mediaType),Yt=K(tt.mediaType),jt=function z(tt){try{var Et=H.getTopBitrateInfoFor(tt);return Math.round(Et.bitrate/1e3)}catch(Kt){return null}}(tt.mediaType),en=I.pr,an=function et(tt){if(ue&&0!==ue.length){var Kt,Et=p(ue);try{for(Et.s();!(Kt=Et.n()).done;){var _t=Kt.value;if(_t.getType()===tt)return _t.probeNextRequest()}}catch(At){Et.e(At)}finally{Et.f()}}}(tt.mediaType);tt.mediaType===F.default.VIDEO&&(Ln=B_VIDEO),tt.mediaType===F.default.AUDIO&&(Ln=B_AUDIO),tt.mediaType===F.default.TEXT&&(Ln="application/mp4"===tt.mediaInfo.mimeType?B_ISOBMFF_TEXT_TRACK:B_CAPTION);var wn=Q.get().streaming.cmcd.rtp;return wn||(wn=function ct(tt){var Et=fe.getPlaybackRate();Et||(Et=1);var Kt=tt.quality,At=tt.mediaInfo,Pt=tt.duration,Yt=K(tt.mediaType);0===Yt&&(Yt=500);var Ln=At.bitrateList[Kt].bandwidth*Pt/1e3/(Yt/Et/1e3),wn=Q.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Q.get().streaming.cmcd.rtpSafetyFactor)?Q.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Ln*wn/100)+1)}(tt)),Et.rtp=wn,an&&(tt.url!==an.url?Et.nor=encodeURIComponent(u.default.getRelativeUrl(tt.url,an.url)):an.range&&(Et.nrr=an.range)),Kt&&(Et.br=Kt),Ln&&(Et.ot=Ln),isNaN(_t)||(Et.d=_t),isNaN(At)||(Et.mtp=At),isNaN(Pt)||(Et.dl=Pt),isNaN(Yt)||(Et.bl=Yt),isNaN(jt)||(Et.tb=jt),!isNaN(en)&&1!==en&&(Et.pr=en),q[tt.mediaType]&&(Et.bs=!0,q[tt.mediaType]=!1),(be[tt.mediaType]||!se[tt.mediaType])&&(Et.su=!0,be[tt.mediaType]=!1,se[tt.mediaType]=!0),Et}(tt)):tt.type===D.HTTPRequest.INIT_SEGMENT_TYPE?function ce(){var tt=le();return tt.ot=B_INIT,tt.su=!0,tt}():tt.type===D.HTTPRequest.OTHER_TYPE||tt.type===D.HTTPRequest.XLINK_EXPANSION_TYPE?function De(){var tt=le();return tt.ot=B_OTHER,tt}():tt.type===D.HTTPRequest.LICENSE?function Le(tt){var Et=le();return Et.ot=B_ENCRYPTION_KEY,Et}():null}catch(Kt){return null}}function le(){var tt={},Et=Q.get().streaming.cmcd.cid?Q.get().streaming.cmcd.cid:I.cid;return tt.v=1,tt.sid=Q.get().streaming.cmcd.sid?Q.get().streaming.cmcd.sid:I.sid,tt.sid="".concat(tt.sid),Et&&(tt.cid="".concat(Et)),!isNaN(I.pr)&&1!==I.pr&&null!==I.pr&&(tt.pr=I.pr),I.st&&(tt.st=I.st),I.sf&&(tt.sf=I.sf),tt}function K(tt){try{var Et=ee.getCurrentBufferLevel(tt);return isNaN(Et)?null:100*parseInt(10*Et)}catch(Kt){return null}}function oe(tt){try{I.pr=tt.playbackRate}catch(Et){}}function Ce(tt){try{var Et=E.getIsDynamic(tt.data),_t=tt.protocol&&"MSS"===tt.protocol?O_MSS:O_DASH;I.st="".concat(Et?P_LIVE:P_VOD),I.sf="".concat(_t)}catch(At){}}function Oe(tt){try{tt.state&&tt.mediaType&&tt.state===C.default.BUFFER_EMPTY&&(q[tt.mediaType]||(q[tt.mediaType]=!0),be[tt.mediaType]||(be[tt.mediaType]=!0))}catch(Et){}}function Ze(){for(var tt in q)q.hasOwnProperty(tt)&&(q[tt]=!0);for(var Et in be)be.hasOwnProperty(Et)&&(be[Et]=!0)}function st(tt){try{if(!tt)return null;var Et=Object.keys(tt).sort(function(At,Pt){return At.localeCompare(Pt)}),Kt=Et.length,_t=Et.reduce(function(At,Pt,Yt){return"v"===Pt&&1===tt[Pt]||(At+="string"==typeof tt[Pt]&&"ot"!==Pt&&"sf"!==Pt&&"st"!==Pt?"".concat(Pt,"=").concat(JSON.stringify(tt[Pt])):"".concat(Pt,"=").concat(tt[Pt]),Yt<Kt-1&&(At+=",")),At},"");return(_t=_t.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(At){return null}}return A={getQueryParameter:function ke(tt){try{if(Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled){var Et=He(tt),_t=st(function Ue(tt){try{var Et=Q.get().streaming.cmcd.enabledKeys;return Object.keys(tt).filter(function(Kt){return Et.includes(Kt)}).reduce(function(Kt,_t){return Kt[_t]=tt[_t],Kt},{})}catch(Kt){return tt}}(Et));return de.trigger(R.default.CMCD_DATA_GENERATED,{url:tt.url,mediaType:tt.mediaType,cmcdData:Et,cmcdString:_t}),{key:"CMCD",value:_t}}return null}catch(At){return null}},getHeaderParameters:function je(tt){try{if(Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled){var Et=He(tt),Kt=Fe(Et,Pe(["br","d","ot","tb"])),_t=Fe(Et,Pe(["bl","dl","mtp","nor","nrr","su"])),At=Fe(Et,Pe(["bs","rtp"])),Pt=Fe(Et,Pe(["cid","pr","sf","sid","st","v"])),Yt={"CMCD-Object":st(Kt),"CMCD-Request":st(_t),"CMCD-Status":st(At),"CMCD-Session":st(Pt)};return de.trigger(R.default.CMCD_DATA_GENERATED,{url:tt.url,mediaType:tt.mediaType,cmcdData:Et,headers:Yt}),Yt}return null}catch(jt){return null}},setConfig:function xe(tt){!tt||(tt.abrController&&(H=tt.abrController),tt.dashMetrics&&(ee=tt.dashMetrics),tt.playbackController&&(fe=tt.playbackController))},reset:function xt(){de.off(C.default.PLAYBACK_RATE_CHANGED,oe,this),de.off(C.default.MANIFEST_LOADED,Ce,this),de.off(C.default.BUFFER_LEVEL_STATE_CHANGED,Oe,A),de.off(C.default.PLAYBACK_SEEKED,Ze,A),_e()},initialize:function me(){de.on(C.default.PLAYBACK_RATE_CHANGED,oe,A),de.on(C.default.MANIFEST_LOADED,Ce,A),de.on(C.default.BUFFER_LEVEL_STATE_CHANGED,Oe,A),de.on(C.default.PLAYBACK_SEEKED,Ze,A),de.on(C.default.PERIOD_SWITCH_COMPLETED,Ie,A)}},function pe(){E=Object(h.default)(V).getInstance(),_e()}(),A}S.__dashjs_factory_name="CmcdModel",w.default=U.default.getSingletonFactory(S)},"./src/streaming/models/CustomParametersModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/vo/UTCTiming.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/core/Settings.js"),U=i("./src/streaming/utils/SupervisorTools.js"),j=i("./src/streaming/rules/abr/ABRRulesCollection.js"),F=i("./src/streaming/constants/Constants.js");function h(){var u,p,_,b,k,L,B,O,P=this.context,y=Object(R.default)(P).getInstance();function E(){b=[],k=[],L=[],O=[],B=null,p=[]}function xe(W,ce){var De=-1;W.some(function(le,ne){if(le===ce)return De=ne,!0}),!(De<0)&&W.splice(De,1)}function _e(W){var ce;for(ce=0;ce<O.length;ce++)if(O[ce].rulename===W)return ce;return-1}function Fe(W,ce){Pe(W,ce);var De=new e.default;De.schemeIdUri=W,De.value=ce,p.push(De)}function Pe(W,ce){Object(U.checkParameterType)(W,"string"),Object(U.checkParameterType)(ce,"string"),p.forEach(function(De,le){De.schemeIdUri===W&&De.value===ce&&p.splice(le,1)})}return u={getCustomInitialTrackSelectionFunction:function fe(){return B},setCustomInitialTrackSelectionFunction:function H(W){B=W},resetCustomInitialTrackSelectionFunction:function ee(){B=null},getLicenseResponseFilters:function be(){return k},getLicenseRequestFilters:function ue(){return b},getCustomCapabilitiesFilters:function Q(){return L},registerCustomCapabilitiesFilter:function pe(W){L.push(W)},registerLicenseResponseFilter:function se(W){k.push(W)},registerLicenseRequestFilter:function q(W){b.push(W)},unregisterCustomCapabilitiesFilter:function me(W){xe(L,W)},unregisterLicenseResponseFilter:function de(W){xe(k,W)},unregisterLicenseRequestFilter:function V(W){xe(b,W)},addAbrCustomRule:function Ie(W,ce,De){if("string"!=typeof W||W!==j.default.ABANDON_FRAGMENT_RULES&&W!==j.default.QUALITY_SWITCH_RULES||"string"!=typeof ce)throw F.default.BAD_ARGUMENT_ERROR;var le=_e(ce);-1===le?O.push({type:W,rulename:ce,rule:De}):(O[le].type=W,O[le].rule=De)},removeAllAbrCustomRule:function ke(){O=[]},removeAbrCustomRule:function Te(W){if(W){var ce=_e(W);-1!==ce&&O.splice(ce,1)}else O=[]},getAbrCustomRules:function Ue(){return O},addUTCTimingSource:Fe,removeUTCTimingSource:Pe,getUTCTimingSources:function je(){return p},clearDefaultUTCTimingSources:function He(){p=[]},restoreDefaultUTCTimingSources:function Le(){var W=y.get().streaming.utcSynchronization.defaultTimingSource;Fe(W.scheme,W.value)},setXHRWithCredentialsForType:function ye(W,ce){W?_[W]=!!ce:Object.keys(_).forEach(function(De){ye(De,ce)})},getXHRWithCredentialsForType:function ae(W){var ce=_[W];return void 0===ce?_.default:ce},setConfig:function I(){},reset:function A(){E()}},function S(){_={default:false},E()}(),u}h.__dashjs_factory_name="CustomParametersModel",w.default=C.default.getSingletonFactory(h)},"./src/streaming/models/FragmentModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/vo/FragmentRequest.js"),R="loading",U="executed",F="failed";function D(u){var P,y,S,E,p=(u=u||{}).eventBus,_=u.events,b=u.dashMetrics,k=u.fragmentLoader,L=u.debug,B=u.streamInfo,O=u.type;function ee(Le){var ne;return!!Le&&(ne=!1,S.some(function(z){if(function(le,ne){return!isNaN(le.index)&&le.startTime===ne.startTime&&le.adaptationIndex===ne.adaptationIndex&&le.type===ne.type}(Le,z)||function(le,ne){return isNaN(le.index)&&isNaN(ne.index)&&le.quality===ne.quality}(Le,z)||function(le,ne){return le.action===C.default.ACTION_COMPLETE&&le.action===ne.action}(Le,z))return ne=!0}),ne)}function be(Le){return isNaN(Le.duration)?.25:Math.min(Le.duration/8,.5)}function q(Le){S=S.filter(function(ye){var ae=be(ye);return isNaN(ye.startTime)||void 0!==Le&&ye.startTime>=Le-ae})}function V(Le,ye){ye<=Le+.5||(S=S.filter(function(ae){var W=be(ae);return isNaN(ae.startTime)||ae.startTime>=ye-W||isNaN(ae.duration)||ae.startTime+ae.duration<=Le+W}))}function xe(Le,ye,ae){for(var ce=Le.length-1;ce>=0;ce--){var De=Le[ce],le=De.startTime,ne=le+De.duration;if(ae=isNaN(ae)?be(De):ae,!isNaN(le)&&!isNaN(ne)&&ye+ae>=le&&ye-ae<ne||isNaN(le)&&isNaN(ye))return De}return null}function Te(Le,ye){b.addSchedulingInfo(Le,ye),b.addRequestsQueue(Le.mediaType,E,S)}function ke(Le){Le.sender===k&&(E.splice(E.indexOf(Le.request),1),Le.response&&!Le.error&&S.push(Le.request),Te(Le.request,Le.error?F:U),p.trigger(_.FRAGMENT_LOADING_COMPLETED,{request:Le.request,response:Le.response,error:Le.error,sender:this},{streamId:B.id,mediaType:O}))}function Ue(Le){Le.sender===k&&p.trigger(_.FRAGMENT_LOADING_PROGRESS,{request:Le.request,response:Le.response,error:Le.error,sender:this},{streamId:B.id,mediaType:O})}function Fe(Le){Le.sender===k&&p.trigger(_.FRAGMENT_LOADING_ABANDONED,{request:Le.request},{streamId:B.id,mediaType:O})}function je(){S=[],E=[]}return P={getStreamId:function I(){return B.id},getType:function H(){return O},getRequests:function ue(Le){var ae=[];return(Le?Le.state instanceof Array?Le.state:[Le.state]:[]).forEach(function(W){var ce=function Ie(Le){var ye;switch(Le){case R:ye=E;break;case U:ye=S;break;default:ye=[]}return ye}(W);ae=ae.concat(function _e(Le,ye){return ye.hasOwnProperty("time")?[xe(Le,ye.time,ye.threshold)]:Le.filter(function(ae){for(var W in ye)if("state"!==W&&ye.hasOwnProperty(W)&&ae[W]!=ye[W])return!1;return!0})}(ce,Le))}),ae},isFragmentLoaded:ee,isFragmentLoadedOrPending:function fe(Le){var W,ye=!1,ae=0;if(!(ye=ee(Le)))for(ae=0;ae<E.length;ae++)Le.url===(W=E[ae]).url&&Le.startTime===W.startTime&&(ye=!0);return ye},removeExecutedRequestsBeforeTime:q,removeExecutedRequestsAfterTime:function se(Le){S=S.filter(function(ye){return isNaN(ye.startTime)||void 0!==Le&&ye.startTime<Le})},syncExecutedRequestsWithBufferedRange:function de(Le,ye){if(Le&&0!==Le.length){for(var ae=0,W=0,ce=Le.length;W<ce;W++)V(ae,Le.start(W)),ae=Le.end(W);ye>0&&V(ae,ye)}else q()},abortRequests:function Q(){y.debug("abort requests"),k.abort(),E=[]},executeRequest:function pe(Le){Le.action===C.default.ACTION_DOWNLOAD?(Te(Le,R),E.push(Le),function me(Le){p.trigger(_.FRAGMENT_LOADING_STARTED,{request:Le},{streamId:B.id,mediaType:O}),k.load(Le)}(Le)):y.warn("Unknown request action.")},reset:function Pe(){p.off(_.LOADING_COMPLETED,ke,this),p.off(_.LOADING_DATA_PROGRESS,Ue,this),p.off(_.LOADING_ABANDONED,Fe,this),k&&k.reset(),je()},resetInitialSettings:je,addExecutedRequest:function He(Le){S.push(Le)}},function A(){y=L.getLogger(P),je(),p.on(_.LOADING_COMPLETED,ke,P),p.on(_.LOADING_DATA_PROGRESS,Ue,P),p.on(_.LOADING_ABANDONED,Fe,P)}(),P}D.__dashjs_factory_name="FragmentModel";var h=e.default.getClassFactory(D);h.FRAGMENT_MODEL_LOADING=R,h.FRAGMENT_MODEL_EXECUTED=U,h.FRAGMENT_MODEL_CANCELED="canceled",h.FRAGMENT_MODEL_FAILED=F,e.default.updateClassFactory(D.__dashjs_factory_name,h),w.default=h},"./src/streaming/models/LowLatencyThroughputModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/Debug.js"),C=i("./src/core/FactoryMaker.js");function R(){var p,_,u=this.context,b={};function k(){_=Object(e.default)(u).getInstance().getLogger(p)}function L(S){for(var E={},A=0,I=0,H=0,ee=0,fe=S.length,ue=0;ue<fe;++ue)A+=S[ue].chunkDownloadTimeRelativeMS,I+=S[ue].bufferLevel,H+=S[ue].chunkDownloadTimeRelativeMS*S[ue].bufferLevel,ee+=S[ue].chunkDownloadTimeRelativeMS*S[ue].chunkDownloadTimeRelativeMS;return E.m=(H-A*I/fe)/(ee-A*A/fe),E.b=I/fe-E.m*A/fe,function(be){return E.m*be+E.b}}function B(S){var A,E=!0,I=S.reduce(function(H,ee){return H+ee.bufferLevelAtSegmentEnd},0)/S.length;return S.forEach(function(H){Math.abs(H.bufferLevelAtSegmentEnd/H.bufferLevelAtSegmentStart)<.95&&(E=!1),H.bufferLevelAtSegmentEnd/I<.8&&(E=!1),A?A>H.bitrate&&(E=!1):A=H.bitrate}),E}return p={setup:k,addMeasurement:function y(S,E,A,I,H){S&&S.mediaType&&!b[S.mediaType]&&(b[S.mediaType]=[]);var ee=S.mediaInfo.bitrateList.find(function(fe){return fe.id===S.representationId});b[S.mediaType].push({index:S.index,repId:S.representationId,mediaType:S.mediaType,requestTimeMS:I,adjustedAvailabilityStartTimeMS:S.availabilityStartTime.getTime(),segDurationMS:1e3*S.duration,chunksDurationMS:A.reduce(function(fe,ue){return fe+ue.chunkDownloadDurationMS},0),segmentBytes:A.reduce(function(fe,ue){return fe+ue.chunkBytes},0),bitrate:ee&&ee.bandwidth,bitrateList:S.mediaInfo.bitrateList,chunkMeasurements:A,fetchDownloadDurationMS:E,throughputCapacityDelayMS:H,getEstimatedBufferLevel:L(A.slice(1))}),b[S.mediaType].length>10&&b[S.mediaType].shift()},getThroughputCapacityDelayMS:function P(S,E){var A=b[S.mediaType]&&b[S.mediaType].slice(-3);return!A||A.length<3||!B(A)?0:E/4>250?250:E/4},getEstimatedDownloadDurationMS:function O(S){var E=b[S.mediaType].slice(-1).pop(),A=b[S.mediaType].slice(-3),I=E.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;E.bufferLevelAtSegmentStart=E.getEstimatedBufferLevel(I/2),E.bufferLevelAtSegmentEnd=E.getEstimatedBufferLevel(I);var H=B(A),ee=H?.6:.8;if(E.isBufferStable&&1.05*E.segDurationMS<E.fetchDownloadDurationMS)return E.fetchDownloadDurationMS;if(!H||E.segDurationMS<E.fetchDownloadDurationMS||E.adjustedAvailabilityStartTimeMS<=E.requestTimeMS+E.throughputCapacityDelayMS-E.segDurationMS)return.8*E.fetchDownloadDurationMS;for(var fe=E.requestTimeMS+E.throughputCapacityDelayMS-E.adjustedAvailabilityStartTimeMS,ue=0,be=0,q=0,se=0;se<E.chunkMeasurements.length;se++){var V=E.chunkMeasurements[se];if(fe<be+V.chunkDownloadDurationMS)break;be+=V.chunkDownloadDurationMS,ue+=V.chunkBytes,q++}if(fe<0&&_.warn("request time was before adjusted availibitly start time"),ue&&be&&q>.2*E.chunkMeasurements.length){var Q=E.segmentBytes/(ue/be);return E.fetchDownloadDurationMS<Q?E.fetchDownloadDurationMS*ee:Q*ee}var pe=E.bitrate;return E.bitrateList.some(function(me){if(me.bandwidth>E.bitrate)return pe=me.bandwidth,!0}),pe===E.bitrate?E.fetchDownloadDurationMS*ee:ee*E.segmentBytes*8*1e3/pe}},k(),p}R.__dashjs_factory_name="LowLatencyThroughputModel",w.default=C.default.getSingletonFactory(R)},"./src/streaming/models/ManifestModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js");function U(){var h,j=this.context,F=Object(e.default)(j).getInstance();return{getValue:function u(){return h},setValue:function p(_){h=_,_&&F.trigger(C.default.MANIFEST_LOADED,{data:_})}}}U.__dashjs_factory_name="ManifestModel",w.default=R.default.getSingletonFactory(U)},"./src/streaming/models/MediaPlayerModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/Debug.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/core/Settings.js"),_=-.5;function k(){var L,B,O,P,y=this.context,S=Object(R.default)(y).getInstance();function I(pe,me){return isNaN(pe)?0:pe>0?(me&&B.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):pe<_?(me&&B.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(_,": ").concat(-50,"% playback speed.")),_):pe}function H(pe,me){return isNaN(pe)?0:pe<0?(me&&B.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):pe>1?(me&&B.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(1,": ").concat(200,"% playback speed.")),1):pe}function se(){var pe=S.get().streaming.buffer.stableBufferTime>0?S.get().streaming.buffer.stableBufferTime:S.get().streaming.buffer.fastSwitchEnabled?20:12,me=O.getLiveDelay();return!isNaN(me)&&me>0?Math.min(pe,me):pe}return L={getCatchupMaxDrift:function ee(){if(!isNaN(S.get().streaming.liveCatchup.maxDrift)&&S.get().streaming.liveCatchup.maxDrift>0)return S.get().streaming.liveCatchup.maxDrift;var pe=P.getServiceDescriptionSettings();return pe&&pe.liveCatchup&&!isNaN(pe.liveCatchup.maxDrift)&&pe.liveCatchup.maxDrift>0?pe.liveCatchup.maxDrift:12},getCatchupModeEnabled:function ue(){return null!==S.get().streaming.liveCatchup.enabled?S.get().streaming.liveCatchup.enabled:O.getInitialCatchupModeActivated()},getStableBufferTime:se,getInitialBufferLevel:function q(){var pe=S.get().streaming.buffer.initialBufferLevel;return isNaN(pe)||pe<0?0:Math.min(se(),pe)},getRetryAttemptsForType:function V(pe){var me=isNaN(S.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:S.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return O.getLowLatencyModeEnabled()?S.get().streaming.retryAttempts[pe]*me:S.get().streaming.retryAttempts[pe]},getRetryIntervalsForType:function de(pe){var me=isNaN(S.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:S.get().streaming.retryIntervals.lowLatencyReductionFactor;return O.getLowLatencyModeEnabled()?S.get().streaming.retryIntervals[pe]/me:S.get().streaming.retryIntervals[pe]},getCatchupPlaybackRates:function fe(pe){var me=S.get().streaming.liveCatchup.playbackRate;if(!isNaN(me.min)||!isNaN(me.max))return{min:I(me.min,pe),max:H(me.max,pe)};var xe=P.getServiceDescriptionSettings();if(xe&&xe.liveCatchup&&(!isNaN(xe.liveCatchup.playbackRate.min)||!isNaN(xe.liveCatchup.playbackRate.max))){var _e=xe.liveCatchup.playbackRate;return{min:I(_e.min,pe),max:H(_e.max,pe)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function be(pe,me){try{var xe=S.get().streaming.abr[pe][me];if(!isNaN(xe)&&-1!==xe)return xe;var _e=P.getServiceDescriptionSettings();return _e&&_e[pe]&&!isNaN(_e[pe][me])?_e[pe][me]:-1}catch(Ie){return-1}},setConfig:function A(pe){pe.playbackController&&(O=pe.playbackController),pe.serviceDescriptionController&&(P=pe.serviceDescriptionController)},reset:function Q(){}},function E(){B=Object(e.default)(y).getInstance().getLogger(L)}(),L}k.__dashjs_factory_name="MediaPlayerModel",w.default=C.default.getSingletonFactory(k)},"./src/streaming/models/MetricsModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/constants/MetricsConstants.js"),R=i("./src/streaming/vo/MetricsList.js"),U=i("./src/streaming/vo/metrics/HTTPRequest.js"),j=i("./src/streaming/vo/metrics/RepresentationSwitch.js"),F=i("./src/streaming/vo/metrics/BufferLevel.js"),D=i("./src/streaming/vo/metrics/BufferState.js"),h=i("./src/streaming/vo/metrics/DVRInfo.js"),u=i("./src/streaming/vo/metrics/DroppedFrames.js"),p=i("./src/streaming/vo/metrics/ManifestUpdate.js"),_=i("./src/streaming/vo/metrics/SchedulingInfo.js"),b=i("./src/core/EventBus.js"),k=i("./src/streaming/vo/metrics/RequestsQueue.js"),L=i("./src/core/events/Events.js"),B=i("./src/core/FactoryMaker.js");function O(P){var A,I,y=(P=P||{}).settings,S=this.context,E=Object(b.default)(S).getInstance();function ee(){E.trigger(L.default.METRICS_CHANGED)}function fe(W){E.trigger(L.default.METRIC_CHANGED,{mediaType:W}),ee()}function ue(W,ce,De){E.trigger(L.default.METRIC_UPDATED,{mediaType:W,metric:ce,value:De}),fe(W)}function be(W,ce,De){E.trigger(L.default.METRIC_ADDED,{mediaType:W,metric:ce,value:De}),fe(W)}function V(W,ce){var De=null;return W&&(I.hasOwnProperty(W)?De=I[W]:ce||(De=new R.default,I[W]=De)),De}function de(W,ce,De){var le=V(W);null!==le&&(le[ce].push(De),le[ce].length>y.get().streaming.metrics.maxListDepth&&le[ce].shift())}function xe(W,ce,De){de(W,ce,De),be(W,ce,De)}return A={clearCurrentMetricsForType:function q(W){delete I[W],fe(W)},clearAllCurrentMetrics:function se(){I={},ee()},getMetricsFor:V,addHttpRequest:function pe(W,ce,De,le,ne,z,te,X,$,K,oe,Ce,Oe,Ze,st,et){var ct=new U.HTTPRequest;z&&z!==le&&(pe(W,null,De,le,ne,null,null,X,$,null,null,null,Oe,null,null,et),ct.actualurl=z),ct.tcpid=ce,ct.type=De,ct.url=le,ct.range=X,ct.trequest=$,ct.tresponse=K,ct.responsecode=Ce,ct._tfinish=oe,ct._stream=W,ct._mediaduration=Oe,ct._quality=ne,ct._responseHeaders=Ze,ct._serviceLocation=te,ct._fileLoaderType=et,st?st.forEach(function(xt){!function Q(W,ce,De,le){var ne=new U.HTTPRequestTrace;return ne.s=ce,ne.d=De,ne.b=le,W.trace.push(ne),W.interval||(W.interval=0),W.interval+=De,ne}(ct,xt.s,xt.d,xt.b)}):(delete ct.interval,delete ct.trace),xe(W,C.default.HTTP_REQUEST,ct)},addRepresentationSwitch:function me(W,ce,De,le,ne){var z=new j.default;z.t=ce,z.mt=De,z.to=le,ne?z.lto=ne:delete z.lto,xe(W,C.default.TRACK_SWITCH,z)},addBufferLevel:function _e(W,ce,De){var le=new F.default;le.t=ce,le.level=De,xe(W,C.default.BUFFER_LEVEL,le)},addBufferState:function Ie(W,ce,De){var le=new D.default;le.target=De,le.state=ce,xe(W,C.default.BUFFER_STATE,le)},addDVRInfo:function Te(W,ce,De,le){var ne=new h.default;ne.time=ce,ne.range=le,ne.manifestInfo=De,xe(W,C.default.DVR_INFO,ne)},addDroppedFrames:function ke(W,ce){var De=new u.default,le=V(W).DroppedFrames;!ce||(De.time=ce.creationTime,De.droppedFrames=ce.droppedVideoFrames,!(le.length>0&&le[le.length-1]==De)&&xe(W,C.default.DROPPED_FRAMES,De))},addSchedulingInfo:function Ue(W,ce,De,le,ne,z,te,X,$){var K=new _.default;K.mediaType=W,K.t=ce,K.type=De,K.startTime=le,K.availabilityStartTime=ne,K.duration=z,K.quality=te,K.range=X,K.state=$,xe(W,C.default.SCHEDULING_INFO,K)},addRequestsQueue:function Fe(W,ce,De){var le=new k.default;le.loadingRequests=ce,le.executedRequests=De,V(W).RequestsQueue=le,be(W,C.default.REQUESTS_QUEUE,le)},addManifestUpdate:function je(W,ce,De,le,ne,z,te,X,$,K){var oe=new p.ManifestUpdate;oe.mediaType=W,oe.type=ce,oe.requestTime=De,oe.fetchTime=le,oe.availabilityStartTime=ne,oe.presentationStartTime=z,oe.clientTimeOffset=te,oe.currentTime=X,oe.buffered=$,oe.latency=K,de(e.default.STREAM,C.default.MANIFEST_UPDATE,oe),be(W,C.default.MANIFEST_UPDATE,oe)},updateManifestUpdateInfo:function Pe(W,ce){if(W){for(var De in ce)W[De]=ce[De];ue(W.mediaType,C.default.MANIFEST_UPDATE,W)}},addManifestUpdateStreamInfo:function He(W,ce,De,le,ne){if(W){var z=new p.ManifestUpdateStreamInfo;z.id=ce,z.index=De,z.start=le,z.duration=ne,W.streamInfo.push(z),ue(W.mediaType,C.default.MANIFEST_UPDATE_STREAM_INFO,W)}},addManifestUpdateRepresentationInfo:function Le(W,ce,De,le,ne,z,te,X){if(W&&W.representationInfo){var $=new p.ManifestUpdateRepresentationInfo;$.id=ce,$.index=De,$.streamIndex=le,$.mediaType=ne,$.startNumber=te,$.fragmentInfoType=X,$.presentationTimeOffset=z,W.representationInfo.push($),ue(W.mediaType,C.default.MANIFEST_UPDATE_TRACK_INFO,W)}},addPlayList:function ye(W){W.trace&&Array.isArray(W.trace)?W.trace.forEach(function(ce){ce.hasOwnProperty("subreplevel")&&!ce.subreplevel&&delete ce.subreplevel}):delete W.trace,xe(e.default.STREAM,C.default.PLAY_LIST,W)},addDVBErrors:function ae(W){xe(e.default.STREAM,C.default.DVB_ERRORS,W)}},function H(){I={}}(),A}O.__dashjs_factory_name="MetricsModel",w.default=B.default.getSingletonFactory(O)},"./src/streaming/models/URIFragmentModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/URIFragmentData.js"),C=i("./src/core/FactoryMaker.js");function R(){var j;return{initialize:function F(h){if(j=new e.default,!h)return null;var u=h.indexOf("#");if(-1!==u)for(var p=h.substr(u+1).split("&"),_=0,b=p.length;_<b;++_){var k=p[_],L=k.indexOf("=");if(-1!==L){var B=k.substring(0,L);j.hasOwnProperty(B)&&(j[B]=k.substr(L+1))}}},getURIFragmentData:function D(){return j}}}R.__dashjs_factory_name="URIFragmentModel",w.default=C.default.getSingletonFactory(R)},"./src/streaming/models/VideoModel.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/EventBus.js"),R=i("./src/core/events/Events.js"),U=i("./src/core/Debug.js"),j=i("./src/streaming/constants/Constants.js"),F=new Map([[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function D(){var h,u,p,_,b,k,O=this.context,P=Object(C.default)(O).getInstance(),y=[];function I(){p&&(p.playbackRate=1,p.removeEventListener("canplay",I))}function xe(){return y.length>0}function ke(){if(p&&xe()&&0===p.playbackRate){var tt=document.createEvent("Event");tt.initEvent("waiting",!0,!1),p.dispatchEvent(tt)}}function ce(tt,Et){p&&p.addEventListener(tt,Et)}function De(tt,Et){p&&p.removeEventListener(tt,Et)}function le(){return p?p.readyState:NaN}function ne(){return p?p.buffered:null}function Oe(tt,Et,Kt,_t,At){if(p)for(var Pt=0;Pt<p.textTracks.length;Pt++)if(p.textTracks[Pt].kind===tt&&(!Et||p.textTracks[Pt].label==Et)&&p.textTracks[Pt].language===Kt&&p.textTracks[Pt].isTTML===_t&&p.textTracks[Pt].isEmbedded===At)return p.textTracks[Pt];return null}function ct(tt,Et){tt===j.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||le()>=tt?Et():function xt(tt,Et){ce(tt,function _t(){De(tt,_t),Et(tt)})}(F.get(tt),Et)}return h={initialize:function E(){P.on(R.default.PLAYBACK_PLAYING,ke,this)},setCurrentTime:function ee(tt,Et){_=tt,ct(j.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(p){if(p.currentTime===_)return void(_=NaN);try{_=Et?function fe(tt){var Et=ne(),Kt=tt,_t=9999999999;if(Et)for(var At=0;At<Et.length;At++){var Pt=Et.start(At),Yt=Et.end(At),jt=Math.abs(Pt-tt),en=Math.abs(Yt-tt);if(tt>=Pt&&tt<=Yt)return tt;jt<_t&&(_t=jt,Kt=Pt),en<_t&&(_t=en,Kt=Yt)}return Kt}(_):_,p.currentTime=_,_=NaN}catch(Kt){0===p.readyState&&Kt.code===Kt.INVALID_STATE_ERR&&setTimeout(function(){p.currentTime=_,_=NaN},400)}}})},play:function Fe(){if(p){p.autoplay=!0;var tt=p.play();tt&&tt.catch&&"undefined"!=typeof Promise&&tt.catch(function(Et){"NotAllowedError"===Et.name&&P.trigger(R.default.PLAYBACK_NOT_ALLOWED),u.warn("Caught pending play exception - continuing (".concat(Et,")"))})}},isPaused:function je(){return p?p.paused:null},pause:function Pe(){p&&(p.pause(),p.autoplay=!1)},isStalled:xe,isSeeking:function He(){return p?p.seeking||!isNaN(_):null},getTime:function Le(){return p?isNaN(_)?p.currentTime:_:null},getPlaybackRate:function ye(){return p?p.playbackRate:null},setPlaybackRate:function H(tt){!p||(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&p.readyState<=2&&tt>0?p.addEventListener("canplay",I):p.playbackRate=tt)},getPlayedRanges:function ae(){return p?p.played:null},getEnded:function W(){return p?p.ended:null},setStallState:function me(tt,Et){!function Te(tt,Et){Et?function _e(tt){null===tt||!p||p.seeking||-1!==y.indexOf(tt)||y.push(tt)}(tt):function Ie(tt){var Et=y.indexOf(tt);null!==tt&&-1!==Et&&y.splice(Et,1)}(tt)}(tt,Et)},getElement:function ue(){return p},setElement:function be(tt){if(!(null==tt||tt&&/^(VIDEO|AUDIO)$/i.test(tt.nodeName)))throw"element is not video or audio DOM type!";(p=tt)&&(p.preload="auto")},setSource:function q(tt){p&&(tt?p.src=tt:(p.removeAttribute("src"),p.load()))},getSource:function se(){return p?p.src:null},getTTMLRenderingDiv:function V(){return b},setTTMLRenderingDiv:function Q(tt){(b=tt).style.position="absolute",b.style.display="flex",b.style.overflow="hidden",b.style.pointerEvents="none",b.style.top=0,b.style.left=0},getVttRenderingDiv:function de(){return k},setVttRenderingDiv:function pe(tt){k=tt},getPlaybackQuality:function Ue(){if(!p)return null;var tt="webkitDroppedFrameCount"in p&&"webkitDecodedFrameCount"in p,Kt=null;return"getVideoPlaybackQuality"in p?Kt=p.getVideoPlaybackQuality():tt&&(Kt={droppedVideoFrames:p.webkitDroppedFrameCount,totalVideoFrames:p.webkitDroppedFrameCount+p.webkitDecodedFrameCount,creationTime:new Date}),Kt},addEventListener:ce,removeEventListener:De,getReadyState:le,getBufferRange:ne,getClientWidth:function z(){return p?p.clientWidth:NaN},getClientHeight:function te(){return p?p.clientHeight:NaN},getTextTracks:function Ce(){return p?p.textTracks:[]},getTextTrack:Oe,addTextTrack:function Ze(tt,Et,Kt,_t,At){if(!p)return null;var Pt=Oe(tt,Et,Kt,_t,At);return Pt||((Pt=p.addTextTrack(tt,Et,Kt)).isEmbedded=At,Pt.isTTML=_t),Pt},appendChild:function st(tt){p&&(p.appendChild(tt),void 0!==tt.isTTML&&(p.textTracks[p.textTracks.length-1].isTTML=tt.isTTML,p.textTracks[p.textTracks.length-1].isEmbedded=tt.isEmbedded))},removeChild:function et(tt){p&&p.removeChild(tt)},getVideoWidth:function X(){return p?p.videoWidth:NaN},getVideoHeight:function $(){return p?p.videoHeight:NaN},getVideoRelativeOffsetTop:function K(){var tt=p.parentNode.host||p.parentNode;return tt?p.getBoundingClientRect().top-tt.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function oe(){var tt=p.parentNode.host||p.parentNode;return tt?p.getBoundingClientRect().left-tt.getBoundingClientRect().left:NaN},waitForReadyState:ct,reset:function A(){P.off(R.default.PLAYBACK_PLAYING,ke,this)}},function S(){u=Object(U.default)(O).getInstance().getLogger(h),_=NaN}(),h}D.__dashjs_factory_name="VideoModel",w.default=e.default.getSingletonFactory(D)},"./src/streaming/net/FetchLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Settings.js"),R=i("./src/streaming/constants/Constants.js"),U=i("./src/streaming/utils/RequestModifier.js");function j(L,B){return function h(L){if(Array.isArray(L))return L}(L)||function D(L,B){var O=null==L?null:"undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(null!=O){var P,y,S,E,A=[],I=!0,H=!1;try{if(S=(O=O.call(L)).next,0===B){if(Object(O)!==O)return;I=!1}else for(;!(I=(P=S.call(O)).done)&&(A.push(P.value),A.length!==B);I=!0);}catch(ee){H=!0,y=ee}finally{try{if(!I&&null!=O.return&&(E=O.return(),Object(E)!==E))return}finally{if(H)throw y}}return A}}(L,B)||p(L,B)||function F(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(L,B){if(L){if("string"==typeof L)return _(L,B);var O=Object.prototype.toString.call(L).slice(8,-1);if("Object"===O&&L.constructor&&(O=L.constructor.name),"Map"===O||"Set"===O)return Array.from(L);if("Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return _(L,B)}}function _(L,B){(null==B||B>L.length)&&(B=L.length);for(var O=0,P=new Array(B);O<B;O++)P[O]=L[O];return P}function b(L){var A,B=this.context,O=(L=L||{}).requestModifier,P=L.lowLatencyThroughputModel,y=L.boxParser,S=Object(C.default)(B).getInstance();function ee(V){var _e,de=new Date,Q=V.request,pe=new Headers;if(Q.range&&pe.append("Range","bytes="+Q.range),V.headers)for(var me in V.headers){var xe=V.headers[me];xe&&pe.append(me,xe)}Q.requestStartDate||(Q.requestStartDate=de),O&&O.modifyRequestHeader&&O.modifyRequestHeader({setRequestHeader:function(je,Pe){pe.append(je,Pe)}},{url:V.url}),"function"==typeof window.AbortController&&(_e=new AbortController,V.abortController=_e,_e.signal.onabort=V.onabort);var Ie={method:V.method,headers:pe,credentials:V.withCredentials?"include":void 0,signal:_e?_e.signal:void 0},Te=S.get().streaming.abr.fetchThroughputCalculationMode,ke=Date.now(),Ue=0;new Promise(function(Fe){if(Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&P&&(Ue=P.getThroughputCapacityDelayMS(Q,1e3*A.getCurrentBufferLevel(Q.mediaType))))return setTimeout(Fe,Ue);Fe()}).then(function(){var Fe=Date.now();fetch(V.url,Ie).then(function(je){V.response||(V.response={}),V.response.status=je.status,V.response.statusText=je.statusText,V.response.responseURL=je.url,je.ok||V.onerror();var Le,Pe="",He=function u(L,B){var O="undefined"!=typeof Symbol&&L[Symbol.iterator]||L["@@iterator"];if(!O){if(Array.isArray(L)||(O=p(L))||B&&L&&"number"==typeof L.length){O&&(L=O);var P=0,y=function(){};return{s:y,n:function(){return P>=L.length?{done:!0}:{done:!1,value:L[P++]}},e:function(H){throw H},f:y}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var A,S=!0,E=!1;return{s:function(){O=O.call(L)},n:function(){var H=O.next();return S=H.done,H},e:function(H){E=!0,A=H},f:function(){try{!S&&null!=O.return&&O.return()}finally{if(E)throw A}}}}(je.headers.keys());try{for(He.s();!(Le=He.n()).done;){var ye=Le.value;Pe+=ye+": "+je.headers.get(ye)+"\r\n"}}catch(ct){He.e(ct)}finally{He.f()}if(V.response.responseHeaders=Pe,!je.body)return je.arrayBuffer().then(function(ct){V.response.response=ct,V.progress({loaded:ct.byteLength,total:ct.byteLength,stream:!1}),V.onload(),V.onend()});var tt,Et,ae=parseInt(je.headers.get("Content-Length"),10),W=0,ce=!1,De=new Uint8Array,le=0;if(Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&P){var z=Fe,te=0,$=j(je.body.tee(),2),oe=$[1];tt=$[0].getReader(),Et=[],tt.read().then(function Kt(_t){var At=_t.value,Pt=_t.done;if(te=Date.now(),At&&At.length){var Yt=te-z,jt=At.length;Et.push({chunkDownloadTimeRelativeMS:te-Fe,chunkDownloadDurationMS:Yt,chunkBytes:jt,kbps:Math.round(8*jt/(Yt/1e3)),bufferLevel:A.getCurrentBufferLevel(Q.mediaType)})}if(Pt){var en=te-Fe,an=Et.reduce(function(Ln,wn){return Ln+wn.chunkBytes},0);return P.addMeasurement(Q,en,Et,ke,Ue,Pe),void V.progress({loaded:an,total:an,lengthComputable:!0,time:P.getEstimatedDownloadDurationMS(Q),stream:!0})}return z=Date.now(),tt.read().then(Kt)}),V.reader=oe.getReader()}else V.reader=je.body.getReader();var Ce=[],Oe=[],Ze=[],st=!0;fe(V,function ct(xt){var tt=xt.value;if(xt.done){if(De){if(Te!==R.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Kt=null,_t=null;Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Kt=function se(V,de){try{var Q,pe;Q=V.filter(function(Fe,je){return je<V.length-1}),pe=de.filter(function(Fe,je){return je<de.length-1});var me=[];if(Q.length>1){for(var xe=0,_e=0,Ie=0;Ie<Q.length;Ie++)if(Q[Ie]&&pe[Ie]){var Te=pe[Ie].ts-Q[Ie].ts;if(Te>1)me.push(8*pe[Ie].bytes/Te);else{0===_e&&(_e=Q[Ie].ts);var ke=pe[Ie].ts-_e;ke>1?(me.push(8*xe/ke),xe=0,_e=0):xe+=pe[Ie].bytes}}if(me.length>0)return me.reduce(function(Fe,je){return Fe+je},0)/me.length}return null}catch(Fe){return null}}(Oe,Ze))&&(_t=8*W/Kt):Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(_t=q(Ce,W)),V.progress({loaded:W,total:isNaN(ae)?W:ae,lengthComputable:!0,time:_t,stream:!0})}V.response.response=De.buffer}return V.onload(),void V.onend()}if(tt&&tt.length>0){De=function ue(V,de){if(0===V.length)return de;var Q=new Uint8Array(V.length+de.length);return Q.set(V),Q.set(de,V.length),Q}(De,tt),W+=tt.length,Ce.push({ts:Date.now(),bytes:tt.length}),Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&st&&y.findLastTopIsoBoxCompleted(["moof"],De,le).found&&(st=!1,Oe.push({ts:performance.now(),bytes:tt.length}));var Pt=y.findLastTopIsoBoxCompleted(["moov","mdat"],De,le);if(Pt.found){var jt,Yt=Pt.lastCompletedOffset+Pt.size;Te===R.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&!st&&(st=!0,Ze.push({ts:performance.now(),bytes:De.length})),Yt===De.length?(jt=De,De=new Uint8Array):(jt=new Uint8Array(De.subarray(0,Yt)),De=De.subarray(Yt)),V.progress({data:jt.buffer,lengthComputable:!1,noTrace:!0}),le=0}else le=Pt.lastCompletedOffset,ce||(V.progress({lengthComputable:!1,noTrace:!0}),ce=!0)}fe(V,ct)})}).catch(function(je){V.onerror&&V.onerror(je)})})}function fe(V,de){V.reader.read().then(de).catch(function(Q){V.onerror&&200===V.response.status&&V.onerror(Q)})}function q(V,de){try{if((V=V.filter(function(me){return me.bytes>de/4/V.length})).length>1){var Q=0,pe=(V[V.length-1].ts-V[0].ts)/V.length;return V.forEach(function(me,xe){var _e=V[xe+1];if(_e){var Ie=_e.ts-me.ts;Q+=Ie<pe?Ie:0}}),Q}return null}catch(me){return null}}return{load:function H(V){O&&O.modifyRequest?Object(U.modifyRequest)(V,O).then(function(){return ee(V)}):ee(V)},abort:function be(V){if(V.abortController)V.abortController.abort();else if(V.reader)try{V.reader.cancel(),V.onabort()}catch(de){}},calculateDownloadedTime:q,setup:function I(V){A=V.dashMetrics}}}b.__dashjs_factory_name="FetchLoader";var k=e.default.getClassFactory(b);w.default=k},"./src/streaming/net/HTTPLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/net/XHRLoader.js"),C=i("./src/streaming/net/FetchLoader.js"),R=i("./src/streaming/vo/metrics/HTTPRequest.js"),U=i("./src/core/FactoryMaker.js"),j=i("./src/streaming/vo/DashJSError.js"),F=i("./src/streaming/models/CmcdModel.js"),D=i("./src/core/Utils.js"),h=i("./src/core/Debug.js"),u=i("./src/core/EventBus.js"),p=i("./src/core/events/Events.js"),_=i("./src/core/Settings.js"),b=i("./src/streaming/constants/Constants.js"),k=i("./src/streaming/models/LowLatencyThroughputModel.js"),L=i("./src/streaming/models/CustomParametersModel.js");function B(A){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(A)}function O(A,I,H){return(I=function P(A){var I=function y(A,I){if("object"!==B(A)||null===A)return A;var H=A[Symbol.toPrimitive];if(void 0!==H){var ee=H.call(A,I||"default");if("object"!==B(ee))return ee;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===I?String:Number)(A)}(A,"string");return"symbol"===B(I)?I:String(I)}(I))in A?Object.defineProperty(A,I,{value:H,enumerable:!0,configurable:!0,writable:!0}):A[I]=H,A}function S(A){var Q,pe,me,xe,_e,Ie,Te,ke,Ue,I=this.context,H=(A=A||{}).errHandler,ee=A.dashMetrics,fe=A.mediaPlayerModel,ue=A.requestModifier,be=A.boxParser,q=A.errors,se=A.requestTimeout||0,V=Object(u.default)(I).getInstance(),de=Object(_.default)(I).getInstance();function je(ye,ae){var $,W=ye.request,ce=[],De=!0,le=!0,ne=new Date,z=ne,te=0,X=null;if(!ue||!ee||!H)throw new Error("config object is not correct or missing");var et,K=function(jt){if(le=!1,W.requestStartDate=ne,W.requestEndDate=new Date,W.firstByteDate=W.firstByteDate||ne,W.fileLoaderType=X,!W.checkExistenceOnly){var en=$.response?$.response.responseURL:null,an=$.response?$.response.status:null,Ln=$.response&&$.response.getAllResponseHeaders?$.response.getAllResponseHeaders():$.response?$.response.responseHeaders:[];ee.addHttpRequest(W,en,an,Ln,jt?ce:null),W.type===R.HTTPRequest.MPD_TYPE&&ee.addManifestUpdate(W)}},oe=function(){if(-1!==pe.indexOf($)&&(pe.splice(pe.indexOf($),1),le))if(K(!1),ae>0){try{de.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&W.type===R.HTTPRequest.MEDIA_SEGMENT_TYPE&&fe.getRetryAttemptsForType(R.HTTPRequest.MEDIA_SEGMENT_TYPE)===ae&&V.trigger(p.default.ATTEMPT_BACKGROUND_SYNC)}catch(an){}ae--;var en={config:ye};xe.push(en),en.timeout=setTimeout(function(){-1!==xe.indexOf(en)&&(xe.splice(xe.indexOf(en),1),je(ye,ae))},fe.getRetryIntervalsForType(W.type))}else{if(W.type===R.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;H.error(new j.default(_e[W.type],W.url+" is not available",{request:W,response:$.response})),ye.error&&ye.error(W,"error",$.response.statusText),ye.complete&&ye.complete(W,$.response.statusText)}};W.hasOwnProperty("availabilityTimeComplete")&&!1===W.availabilityTimeComplete&&window.fetch&&"arraybuffer"===W.responseType&&W.type===R.HTTPRequest.MEDIA_SEGMENT_TYPE?((et=Object(C.default)(I).create({requestModifier:ue,lowLatencyThroughputModel:ke,boxParser:be})).setup({dashMetrics:ee}),X=b.default.FILE_LOADER_TYPES.FETCH):(et=Object(e.default)(I).create({requestModifier:ue}),X=b.default.FILE_LOADER_TYPES.XHR);var ct=null,xt=ue.modifyRequestURL?ue.modifyRequestURL(W.url):W.url;if(de.get().streaming.cmcd&&de.get().streaming.cmcd.enabled){var tt=de.get().streaming.cmcd.mode;if(tt===b.default.CMCD_MODE_QUERY){var Et=function Pe(ye){try{var ae=[],W=Ie.getQueryParameter(ye);return W&&ae.push(W),ae}catch(ce){return[]}}(W);xt=D.default.addAditionalQueryParameterToUrl(xt,Et)}else tt===b.default.CMCD_MODE_HEADER&&(ct=Ie.getHeaderParameters(W))}W.url=xt;var Kt=W.checkExistenceOnly?R.HTTPRequest.HEAD:R.HTTPRequest.GET,_t=Te.getXHRWithCredentialsForType(W.type);$={url:xt,method:Kt,withCredentials:_t,request:W,onload:function(){$.response.status>=200&&$.response.status<=299&&(K(!0),ye.success&&ye.success($.response.response,$.response.statusText,$.response.responseURL),ye.complete&&ye.complete(W,$.response.statusText))},onend:oe,onerror:oe,progress:function(jt){var en=new Date;De&&(De=!1,(!jt.lengthComputable||jt.lengthComputable&&jt.total!==jt.loaded)&&(W.firstByteDate=en)),jt.lengthComputable&&(W.bytesLoaded=jt.loaded,W.bytesTotal=jt.total),jt.noTrace||(ce.push({s:z,d:jt.time?jt.time:en.getTime()-z.getTime(),b:[jt.loaded?jt.loaded-te:0]}),z=en,te=jt.loaded),ye.progress&&jt&&ye.progress(jt)},onabort:function(){ye.abort&&ye.abort(W)},ontimeout:function(jt){var en;en=jt.lengthComputable?"Request timeout: loaded: "+jt.loaded+", out of: "+jt.total+" : "+(jt.loaded/jt.total*100).toFixed(3)+"% Completed":"Request timeout: non-computable download size",Ue.warn(en)},loader:et,timeout:se,headers:ct};var At=(new Date).getTime();if(isNaN(W.delayLoadingTime)||At>=W.delayLoadingTime)pe.push($),et.load($);else{var Pt={httpRequest:$};me.push(Pt),Pt.delayTimeout=setTimeout(function(){if(-1!==me.indexOf(Pt)){me.splice(me.indexOf(Pt),1);try{ne=new Date,z=ne,pe.push(Pt.httpRequest),et.load(Pt.httpRequest)}catch(Yt){Pt.httpRequest.onerror()}}},W.delayLoadingTime-At)}}return Q={load:function He(ye){ye.request?je(ye,fe.getRetryAttemptsForType(ye.request.type)):ye.error&&ye.error(ye.request,"error")},abort:function Le(){xe.forEach(function(ye){clearTimeout(ye.timeout),ye.config.request&&ye.config.abort&&ye.config.abort(ye.config.request)}),xe=[],me.forEach(function(ye){return clearTimeout(ye.delayTimeout)}),me=[],pe.forEach(function(ye){ye.request.type!==R.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(ye.onloadend=ye.onerror=ye.onprogress=void 0,ye.loader.abort(ye))}),pe=[]}},function Fe(){var ye;Ue=Object(h.default)(I).getInstance().getLogger(Q),pe=[],me=[],xe=[],Ie=Object(F.default)(I).getInstance(),ke=Object(k.default)(I).getInstance(),Te=Object(L.default)(I).getInstance(),O(ye={},R.HTTPRequest.MPD_TYPE,q.DOWNLOAD_ERROR_ID_MANIFEST_CODE),O(ye,R.HTTPRequest.XLINK_EXPANSION_TYPE,q.DOWNLOAD_ERROR_ID_XLINK_CODE),O(ye,R.HTTPRequest.INIT_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),O(ye,R.HTTPRequest.MEDIA_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),O(ye,R.HTTPRequest.INDEX_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),O(ye,R.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),O(ye,R.HTTPRequest.OTHER_TYPE,q.DOWNLOAD_ERROR_ID_CONTENT_CODE),_e=ye}(),Q}S.__dashjs_factory_name="HTTPLoader";var E=U.default.getClassFactory(S);w.default=E},"./src/streaming/net/SchemeLoaderFactory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/net/HTTPLoader.js");function R(){var F;function u(){F={}}function _(){u()}return function b(){_()}(),{getLoader:function p(k){for(var L in F)if(F.hasOwnProperty(L)&&k.startsWith(L))return F[L];return C.default},registerLoader:function D(k,L){F[k]=L},unregisterLoader:function h(k){F[k]&&delete F[k]},unregisterAllLoader:u,reset:_}}R.__dashjs_factory_name="SchemeLoaderFactory";var U=e.default.getSingletonFactory(R);w.default=U},"./src/streaming/net/URLLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/net/SchemeLoaderFactory.js");function R(j){j=j||{};var h,u,F=this.context;return h=Object(C.default)(F).getInstance(),{load:function p(b){if(!u){var k=h.getLoader(b&&b.request?b.request.url:null);u=k(F).create({errHandler:j.errHandler,mediaPlayerModel:j.mediaPlayerModel,requestModifier:j.requestModifier,dashMetrics:j.dashMetrics,boxParser:j.boxParser?j.boxParser:null,constants:j.constants?j.constants:null,dashConstants:j.dashConstants?j.dashConstants:null,urlUtils:j.urlUtils?j.urlUtils:null,requestTimeout:isNaN(j.requestTimeout)?0:j.requestTimeout,errors:j.errors})}u.load(b)},abort:function _(){u&&u.abort()}}}R.__dashjs_factory_name="URLLoader";var U=e.default.getClassFactory(R);w.default=U},"./src/streaming/net/XHRLoader.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/utils/RequestModifier.js");function R(j){var F=(j=j||{}).requestModifier;function u(_){var b=new Date,k=_.request,L=new XMLHttpRequest;if(L.open(_.method,_.url,!0),k.responseType&&(L.responseType=k.responseType),k.range&&L.setRequestHeader("Range","bytes="+k.range),k.requestStartDate||(k.requestStartDate=b),F&&F.modifyRequestHeader&&(L=F.modifyRequestHeader(L,{url:_.url})),_.headers)for(var B in _.headers){var O=_.headers[B];O&&L.setRequestHeader(B,O)}L.withCredentials=_.withCredentials,L.onload=_.onload,L.onloadend=_.onend,L.onerror=_.onerror,L.onprogress=_.progress,L.onabort=_.onabort,L.ontimeout=_.ontimeout,L.timeout=_.timeout,L.send(),_.response=L}return{load:function h(_){F&&F.modifyRequest?Object(C.modifyRequest)(_,F).then(function(){return u(_)}):u(_)},abort:function p(_){var b=_.response;b.onloadend=b.onerror=b.onprogress=void 0,b.abort()}}}R.__dashjs_factory_name="XHRLoader";var U=e.default.getClassFactory(R);w.default=U},"./src/streaming/protection/CommonEncryption.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function j(u){var p=function F(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}i.r(w);var D={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]};w.default=function(){function u(){!function C(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}(this,u)}return function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,null,[{key:"findCencContentProtection",value:function(_){for(var b=null,k=0;k<_.length;++k){var L=_[k];"urn:mpeg:dash:mp4protection:2011"===L.schemeIdUri.toLowerCase()&&("cenc"===L.value.toLowerCase()||"cbcs"===L.value.toLowerCase())&&(b=L)}return b}},{key:"getPSSHData",value:function(_){var b=8,k=new DataView(_),L=k.getUint8(b);return b+=20,L>0&&(b+=4+16*k.getUint32(b)),_.slice(b+=4)}},{key:"getPSSHForKeySystem",value:function(_,b){var k=u.parsePSSHList(b);return _&&k.hasOwnProperty(_.uuid.toLowerCase())?k[_.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(_,b){return"pssh"in _?(_.pssh.__text=_.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),b.decodeArray(_.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(_){if(null==_)return[];for(var b=new DataView(_.buffer||_),L={},B=0;;){var P,y=void 0,S=void 0,E=B;if(B>=b.buffer.byteLength)break;if(P=B+b.getUint32(B),1886614376===b.getUint32(B+=4))if(0===(y=b.getUint8(B+=4))||1===y){B++,B+=3,S="";var A=void 0,I=void 0;for(A=0;A<4;A++)S+=1===(I=b.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=4,S+="-",A=0;A<2;A++)S+=1===(I=b.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,S+="-",A=0;A<2;A++)S+=1===(I=b.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,S+="-",A=0;A<2;A++)S+=1===(I=b.getUint8(B+A).toString(16)).length?"0"+I:I;for(B+=2,S+="-",A=0;A<6;A++)S+=1===(I=b.getUint8(B+A).toString(16)).length?"0"+I:I;B+=6,B+=4,L[S=S.toLowerCase()]=b.buffer.slice(E,P),B=P}else B=P;else B=P}return L}},{key:"getLicenseServerUrlFromMediaInfo",value:function(_,b){try{if(!_||0===_.length)return null;for(var k=0,L=null;k<_.length&&!L;){var B=_[k];if(B&&B.contentProtection&&B.contentProtection.length>0){var O=B.contentProtection.filter(function(H){return H.schemeIdUri&&H.schemeIdUri===b});if(O&&O.length>0)for(var P=0;P<O.length&&!L;){for(var y=O[P],S=0;S<D.attributes.length&&!L;){for(var E=0,A=D.attributes[S];E<D.prefixes.length&&!L;)y[A]&&y[A].__prefix&&y[A].__prefix===D.prefixes[E]&&y[A].__text&&(L=y[A].__text),E+=1;S+=1}P+=1}}k+=1}return L}catch(H){return null}}}]),u}()},"./src/streaming/protection/Protection.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/controllers/ProtectionController.js"),C=i("./src/streaming/protection/controllers/ProtectionKeyController.js"),R=i("./src/streaming/protection/ProtectionEvents.js"),U=i("./src/streaming/protection/errors/ProtectionErrors.js"),j=i("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),F=i("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),D=i("./src/streaming/protection/models/ProtectionModel_01b.js"),h=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],u=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function p(){var b,k=this.context;function O(P,y){for(var S=0;S<y.length;S++){var E=y[S];if("function"==typeof P[E[Object.keys(E)[0]]])return E}return null}return b={createProtectionSystem:function L(P){var y=null,S=Object(C.default)(k).getInstance();S.setConfig({debug:P.debug,BASE64:P.BASE64,settings:P.settings}),S.initialize();var E=function B(P){var y=P.debug,S=y.getLogger(b),E=P.eventBus,A=P.errHandler,I=P.videoModel?P.videoModel.getElement():null;return I&&void 0===I.onencrypted||I&&void 0===I.mediaKeys?O(I,u)?(S.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(F.default)(k).create({debug:y,eventBus:E,events:P.events,api:O(I,u)})):O(I,h)?(S.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(D.default)(k).create({debug:y,eventBus:E,errHandler:A,events:P.events,api:O(I,h)})):(S.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(S.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(j.default)(k).create({debug:y,eventBus:E,events:P.events}))}(P);return!y&&E&&(y=Object(e.default)(k).create({protectionModel:E,protectionKeyController:S,eventBus:P.eventBus,debug:P.debug,events:P.events,BASE64:P.BASE64,constants:P.constants,cmcdModel:P.cmcdModel,customParametersModel:P.customParametersModel,settings:P.settings}),P.capabilities.setEncryptedMediaSupported(!0)),y}}}p.__dashjs_factory_name="Protection";var _=dashjs.FactoryMaker.getClassFactory(p);_.events=R.default,_.errors=U.default,dashjs.FactoryMaker.updateClassFactory(p.__dashjs_factory_name,_),w.default=_},"./src/streaming/protection/ProtectionEvents.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var O=new(function(P){h(S,P);var y=p(S);function S(){var E;return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(E=y.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",E.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",E.KEY_ADDED="public_keyAdded",E.KEY_ERROR="public_keyError",E.KEY_MESSAGE="public_keyMessage",E.KEY_SESSION_CLOSED="public_keySessionClosed",E.KEY_SESSION_CREATED="public_keySessionCreated",E.KEY_SESSION_REMOVED="public_keySessionRemoved",E.KEY_STATUSES_CHANGED="public_keyStatusesChanged",E.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",E.KEY_SYSTEM_SELECTED="public_keySystemSelected",E.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",E.LICENSE_REQUEST_SENDING="public_licenseRequestSending",E.NEED_KEY="needkey",E.PROTECTION_CREATED="public_protectioncreated",E.PROTECTION_DESTROYED="public_protectiondestroyed",E.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",E.TEARDOWN_COMPLETE="protectionTeardownComplete",E.VIDEO_ELEMENT_SELECTED="videoElementSelected",E.KEY_SESSION_UPDATED="public_keySessionUpdated",E}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/events/EventsBase.js").default));w.default=O},"./src/streaming/protection/controllers/ProtectionController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/CommonEncryption.js"),C=i("./src/streaming/protection/vo/MediaCapability.js"),R=i("./src/streaming/protection/vo/KeySystemConfiguration.js"),U=i("./src/streaming/protection/errors/ProtectionErrors.js"),j=i("./src/streaming/vo/DashJSError.js"),F=i("./src/streaming/protection/vo/LicenseRequest.js"),D=i("./src/streaming/protection/vo/LicenseResponse.js"),h=i("./src/streaming/vo/metrics/HTTPRequest.js"),u=i("./src/core/Utils.js"),p=i("./src/streaming/constants/Constants.js"),_=i("./src/core/FactoryMaker.js");function b(S){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(E){return typeof E}:function(E){return E&&"function"==typeof Symbol&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E})(S)}function y(S){var de,Q,pe,me,xe,_e,Ie,Te,ke,Ue,Fe,E=(S=S||{}).protectionKeyController,A=S.protectionModel,I=S.eventBus,H=S.events,ee=S.debug,fe=S.BASE64,ue=S.constants,be=[],q=S.cmcdModel,se=S.settings,V=S.customParametersModel;function Pe(){if(!(I&&I.hasOwnProperty("on")&&E&&E.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function ae(Qe,mt){Te||ke?Te&&ce():function W(Qe,mt){if(!ke){ke=!0;var vt,Ft=[];Qe=Qe.sort(function(pt,rt){return(xe&&xe[pt.ks.systemString]&&xe[pt.ks.systemString].priority>=0?xe[pt.ks.systemString].priority:Qe.length)-(xe&&xe[rt.ks.systemString]&&xe[rt.ks.systemString].priority>=0?xe[rt.ks.systemString].priority:Qe.length)});for(var tn=0;tn<Qe.length;tn++){var Wt=Et(Qe[tn]);Ft.push({ks:Qe[tn].ks,configs:[Wt],protData:Qe[tn].protData})}A.requestKeySystemAccess(Ft).then(function(pt){return Q.info("DRM: KeySystem Access Granted for system string ("+((vt=pt.data).mksa&&vt.mksa.selectedSystemString?vt.mksa.selectedSystemString:vt.keySystem.systemString)+")!  Selecting key system..."),A.selectKeySystem(vt)}).then(function(pt){if(Te=pt,ke=!1,A){I.trigger(H.KEY_SYSTEM_SELECTED,{data:vt});var rt=z(Te);rt&&rt.serverCertificate&&rt.serverCertificate.length>0&&A.setServerCertificate(fe.decodeArray(rt.serverCertificate).buffer),ce()}}).catch(function(pt){Te=null,ke=!1,mt||I.trigger(H.KEY_SYSTEM_SELECTED,{data:null,error:new j.default(U.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,U.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+pt.error)})})}}(Qe,mt)}function ce(){for(var Qe,mt=0;mt<pe.length;mt++)for(Qe=0;Qe<pe[mt].length;Qe++)if(Te===pe[mt][Qe].ks){De(pe[mt][Qe]);break}pe=[]}function De(Qe){if(E.isClearKey(Te)&&Qe.protData&&Qe.protData.hasOwnProperty("clearkeys")&&0!==Object.keys(Qe.protData.clearkeys).length){var mt={kids:Object.keys(Qe.protData.clearkeys)};Qe.initData=(new TextEncoder).encode(JSON.stringify(mt))}Qe.sessionId?le(Qe):null!==Qe.initData&&ne(Qe)}function le(Qe){Pe(),A.loadKeySession(Qe)}function ne(Qe){var mt=e.default.getPSSHForKeySystem(Te,Qe?Qe.initData:null);if(mt){if(function $(Qe){if(!Qe)return!1;try{for(var mt=A.getSessions(),Ft=0;Ft<mt.length;Ft++)if(mt[Ft].getKeyId()===Qe)return!0;return!1}catch(tn){return!1}}(Qe.keyId)||K(mt))return;try{Qe.initData=mt,A.createKeySession(Qe)}catch(Ft){I.trigger(H.KEY_SESSION_CREATED,{data:null,error:new j.default(U.default.KEY_SESSION_CREATED_ERROR_CODE,U.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Ft.message)})}}else Qe&&Qe.initData?A.createKeySession(Qe):I.trigger(H.KEY_SESSION_CREATED,{data:null,error:new j.default(U.default.KEY_SESSION_CREATED_ERROR_CODE,U.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Te?Te.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function z(Qe){if(Qe){var mt=Qe.systemString;if(xe)return mt in xe?xe[mt]:null}return null}function K(Qe){if(!Qe)return!1;try{for(var mt=A.getAllInitData(),Ft=0;Ft<mt.length;Ft++)if(E.initDataEquals(Qe,mt[Ft]))return Q.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(tn){return!1}}function Ze(Qe){Pe(),Qe?(A.setMediaElement(Qe),I.on(H.NEED_KEY,Vn,de)):null===Qe&&(A.setMediaElement(Qe),I.off(H.NEED_KEY,Vn,de))}function Et(Qe){var mt=Qe.protData,Ft=[],tn=[],Wt=mt&&mt.audioRobustness&&mt.audioRobustness.length>0?mt.audioRobustness:Ie,vt=mt&&mt.videoRobustness&&mt.videoRobustness.length>0?mt.videoRobustness:Ie,pt=Qe.sessionType,rt=mt&&mt.distinctiveIdentifier?mt.distinctiveIdentifier:"optional",Xe=mt&&mt.persistentState?mt.persistentState:"temporary"===pt?"optional":"required";return me.forEach(function(yt){yt.type===ue.AUDIO?Ft.push(new C.default(yt.codec,Wt)):yt.type===ue.VIDEO&&tn.push(new C.default(yt.codec,vt))}),new R.default(Ft,tn,rt,Xe,[pt])}function Kt(Qe){Qe.error?I.trigger(H.KEY_STATUSES_CHANGED,{data:null,error:Qe.error}):Q.debug("DRM: key status = "+Qe.status)}function _t(Qe){Q.debug("DRM: onKeyMessage");var mt=Qe.data;I.trigger(H.KEY_MESSAGE,{data:mt});var Ft=mt.messageType?mt.messageType:"license-request",tn=mt.message,Wt=mt.sessionToken,vt=z(Te),pt=E.getLicenseServerModelInstance(Te,vt,Ft),rt={sessionToken:Wt,messageType:Ft};if(tn&&0!==tn.byteLength){if(!pt)return Q.debug("DRM: License server request not required for this message (type = "+Qe.data.messageType+").  Session ID = "+Wt.getSessionId()),void At(rt);if(E.isClearKey(Te)){var Xe=E.processClearKeyLicenseRequest(Te,vt,tn);if(Xe&&Xe.keyPairs&&Xe.keyPairs.length>0)return Q.debug("DRM: ClearKey license request handled by application!"),At(rt),void A.updateKeySession(Wt,Xe)}!function Pt(Qe,mt,Ft){var tn=Qe.sessionToken,Wt=Qe.messageType?Qe.messageType:"license-request",vt={sessionToken:tn,messageType:Wt},pt=Te?Te.systemString:null,rt=function en(Qe,mt,Ft,tn,Wt){var vt=null,pt=tn.message;if(Qe&&Qe.serverURL){var rt=Qe.serverURL;"string"==typeof rt&&""!==rt?vt=rt:"object"===b(rt)&&rt.hasOwnProperty(mt)&&(vt=rt[mt])}else if(Qe&&Qe.laURL&&""!==Qe.laURL)vt=Qe.laURL;else if(!(vt=e.default.getLicenseServerUrlFromMediaInfo(me,Te.schemeIdURI))&&!E.isClearKey(Te)){var Xe=e.default.getPSSHData(Ft.initData);(vt=Te.getLicenseServerURLFromInitData(Xe))||(vt=tn.laURL)}return Wt.getServerURLFromMessage(vt,pt,mt)}(Ft,Wt,tn,Qe,mt);if(rt){var Xe={},yt=!1;Ft&&an(Xe,Ft.httpRequestHeaders);var Zt=Qe.message;an(Xe,Te.getRequestHeadersFromMessage(Zt)),Object.keys(Xe).forEach(function(kt){"authorization"===kt.toLowerCase()&&(yt=!0)}),Ft&&"boolean"==typeof Ft.withCredentials&&(yt=Ft.withCredentials);var on=function(Rt){if(A)if(Rt.status>=200&&Rt.status<=299){var sn=u.default.parseHttpHeaders(Rt.getAllResponseHeaders?Rt.getAllResponseHeaders():null),Fn=new D.default(Rt.responseURL,sn,Rt.response);wn(V.getLicenseResponseFilters(),Fn).then(function(){var Ot=mt.getLicenseMessage(Fn.data,pt,Wt);null!==Ot?(At(vt),A.updateKeySession(tn,Ot)):Ln(Rt,vt,pt,Wt,mt)})}else Ln(Rt,vt,pt,Wt,mt)},pn=function(Rt){At(vt,new j.default(U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR aborted. status is "'+Rt.statusText+'" ('+Rt.status+"), readyState is "+Rt.readyState))},Mn=function(Rt){At(vt,new j.default(U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+pt+' update, XHR error. status is "'+Rt.statusText+'" ('+Rt.status+"), readyState is "+Rt.readyState))},Wn=Te.getLicenseRequestFromMessage(Zt),Qn=mt.getHTTPMethod(Wt),gr=mt.getResponseType(pt,Wt),Ir=Ft&&!isNaN(Ft.httpTimeout)?Ft.httpTimeout:8e3,ut=tn.getSessionId()||null,zt=new F.default(rt,Qn,gr,Xe,yt,Wt,ut,Wn),dn=isNaN(se.get().streaming.retryAttempts[h.HTTPRequest.LICENSE])?3:se.get().streaming.retryAttempts[h.HTTPRequest.LICENSE];wn(V.getLicenseRequestFilters(),zt).then(function(){Yt(zt,dn,Ir,on,pn,Mn)})}else At(vt,new j.default(U.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,U.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(mt,pt,vt)}else At(rt,new j.default(U.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,U.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function At(Qe,mt){I.trigger(H.LICENSE_REQUEST_COMPLETE,{data:Qe,error:mt})}function Yt(Qe,mt,Ft,tn,Wt,vt){var pt=new XMLHttpRequest;if(se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled&&se.get().streaming.cmcd.mode===p.default.CMCD_MODE_QUERY){var Xe=q.getQueryParameter({url:Qe.url,type:h.HTTPRequest.LICENSE});Xe&&(Qe.url=u.default.addAditionalQueryParameterToUrl(Qe.url,[Xe]))}for(var yt in pt.open(Qe.method,Qe.url,!0),pt.responseType=Qe.responseType,pt.withCredentials=Qe.withCredentials,Ft>0&&(pt.timeout=Ft),Qe.headers)pt.setRequestHeader(yt,Qe.headers[yt]);if(se.get().streaming.cmcd&&se.get().streaming.cmcd.enabled&&se.get().streaming.cmcd.mode===p.default.CMCD_MODE_HEADER){var Jt=q.getHeaderParameters({url:Qe.url,type:h.HTTPRequest.LICENSE});if(Jt)for(var on in Jt){var pn=Jt[on];pn&&pt.setRequestHeader(on,pn)}}var Mn=function(){mt--;var Qn=isNaN(se.get().streaming.retryIntervals[h.HTTPRequest.LICENSE])?1e3:se.get().streaming.retryIntervals[h.HTTPRequest.LICENSE];Fe=setTimeout(function(){Yt(Qe,mt,Ft,tn,Wt,vt)},Qn)};pt.onload=function(){Ue=null,this.status>=200&&this.status<=299||mt<=0?tn(this):(Q.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+mt),Mn())},pt.ontimeout=pt.onerror=function(){Ue=null,mt<=0?vt(this):(Q.warn("License request network request failed . Retrying it... Pending retries: "+mt),Mn())},pt.onabort=function(){Wt(this)},I.trigger(H.LICENSE_REQUEST_SENDING,{url:Qe.url,headers:Qe.headers,payload:Qe.data,sessionId:Qe.sessionId}),Ue=pt,pt.send(Qe.data)}function jt(){Ue&&(Ue.onloadend=Ue.onerror=Ue.onprogress=void 0,Ue.abort(),Ue=null),Fe&&(clearTimeout(Fe),Fe=null)}function an(Qe,mt){if(mt)for(var Ft in mt)Qe[Ft]=mt[Ft]}function Ln(Qe,mt,Ft,tn,Wt){var vt="NONE",pt=null;Qe.response&&(vt=Wt.getErrorResponse(Qe.response,Ft,tn),pt={serverResponse:Qe.response||null,responseCode:Qe.status||null,responseText:Qe.statusText||null}),At(mt,new j.default(U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,U.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ft+' update, XHR complete. status is "'+Qe.statusText+'" ('+Qe.status+"), readyState is "+Qe.readyState+".  Response is "+vt,pt))}function wn(Qe,mt){return Qe?Qe.reduce(function(Ft,tn){return Ft.then(function(){return tn(mt)})},Promise.resolve()):Promise.resolve()}function Vn(Qe,mt){if(!se.get().streaming.protection.ignoreEmeEncryptedEvent){if(Q.debug("DRM: onNeedKey"),"cenc"!==Qe.key.initDataType)return void Q.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+Qe.key.initDataType);if(0===me.length&&(Q.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(mt=void 0===mt?1:mt+1)<5))return void be.push(setTimeout(function(){Vn(Qe,mt)},500));var Ft=Qe.key.initData;if(ArrayBuffer.isView(Ft)&&(Ft=Ft.buffer),Te){var tn=e.default.getPSSHForKeySystem(Te,Ft);if(tn&&K(tn))return}Q.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Ft)));var Wt=E.getSupportedKeySystemsFromSegmentPssh(Ft,xe,_e);if(0===Wt.length)return void Q.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");!function ye(Qe){pe.push(Qe),ae(Qe,!1)}(Wt)}}return de={initializeForMedia:function He(Qe){if(!Qe)throw new Error("mediaInfo can not be null or undefined");Pe(),me.push(Qe)},clearMediaInfoArray:function te(){me=[]},handleKeySystemFromManifest:function Le(){if(me&&0!==me.length){var Qe=[];me.forEach(function(mt){var Ft=E.getSupportedKeySystemsFromContentProtection(mt.contentProtection,xe,_e);Ft.length>0&&(0===Qe.length&&(Qe=Ft),pe.push(Ft))}),Qe&&Qe.length>0&&ae(Qe,!0)}},createKeySession:ne,loadKeySession:le,removeKeySession:function oe(Qe){Pe(),A.removeKeySession(Qe)},closeKeySession:function Ce(Qe){Pe(),A.closeKeySession(Qe)},setServerCertificate:function Oe(Qe){Pe(),A.setServerCertificate(Qe)},setMediaElement:Ze,setSessionType:function st(Qe){_e=Qe},setRobustnessLevel:function et(Qe){Ie=Qe},setProtectionData:function ct(Qe){xe=Qe,E.setProtectionData(Qe)},getSupportedKeySystemsFromContentProtection:function X(Qe){return Pe(),E.getSupportedKeySystemsFromContentProtection(Qe,xe,_e)},getKeySystems:function Hn(){return E?E.getKeySystems():[]},setKeySystems:function it(Qe){E&&E.setKeySystems(Qe)},stop:function xt(){jt(),A&&A.stop()},reset:function tt(){I.off(H.INTERNAL_KEY_MESSAGE,_t,de),I.off(H.INTERNAL_KEY_STATUS_CHANGED,Kt,de),Pe(),jt(),Ze(null),Te=null,ke=!1,A&&(A.reset(),A=null),be.forEach(function(Qe){return clearTimeout(Qe)}),be=[],me=[],pe=[]}},function je(){Q=ee.getLogger(de),pe=[],me=[],_e="temporary",Ie="",Ue=null,Fe=null,I.on(H.INTERNAL_KEY_MESSAGE,_t,de),I.on(H.INTERNAL_KEY_STATUS_CHANGED,Kt,de)}(),de}y.__dashjs_factory_name="ProtectionController",w.default=_.default.getClassFactory(y)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/CommonEncryption.js"),C=i("./src/streaming/protection/drm/KeySystemClearKey.js"),R=i("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),U=i("./src/streaming/protection/drm/KeySystemWidevine.js"),j=i("./src/streaming/protection/drm/KeySystemPlayReady.js"),F=i("./src/streaming/protection/servers/DRMToday.js"),D=i("./src/streaming/protection/servers/PlayReady.js"),h=i("./src/streaming/protection/servers/Widevine.js"),u=i("./src/streaming/protection/servers/ClearKey.js"),p=i("./src/streaming/constants/ProtectionConstants.js");function _(){var k,L,B,O,P,y,S,E,b=this.context;function pe(_e,Ie){return Ie&&_e in Ie?Ie[_e]:null}function me(_e,Ie){return _e&&_e.sessionId?_e.sessionId:Ie&&Ie.sessionId?Ie.sessionId:null}function xe(_e,Ie){return _e&&_e.sessionType?_e.sessionType:Ie}return k={initialize:function I(){var _e;O=[],_e=Object(j.default)(b).getInstance({BASE64:P,settings:y}),O.push(_e),_e=Object(U.default)(b).getInstance({BASE64:P}),O.push(_e),_e=Object(C.default)(b).getInstance({BASE64:P}),O.push(_e),S=_e,_e=Object(R.default)(b).getInstance({BASE64:P,debug:L}),O.push(_e),E=_e},setProtectionData:function Q(_e){for(var Te=0;Te<O.length;Te++){var ke=O[Te];ke.hasOwnProperty("init")&&ke.init((Fe=ke.systemString,je=void 0,je=null,_e&&(je=Fe in _e?_e[Fe]:null),je))}var Fe,je},isClearKey:function ue(_e){return _e===S||_e===E},initDataEquals:function be(_e,Ie){if(_e.byteLength===Ie.byteLength){for(var Te=new Uint8Array(_e),ke=new Uint8Array(Ie),Ue=0;Ue<Te.length;Ue++)if(Te[Ue]!==ke[Ue])return!1;return!0}return!1},getKeySystems:function H(){return O},setKeySystems:function ee(_e){O=_e},getKeySystemBySystemString:function fe(_e){for(var Ie=0;Ie<O.length;Ie++)if(O[Ie].systemString===_e)return O[Ie];return null},getSupportedKeySystemsFromContentProtection:function q(_e,Ie,Te){var ke,Ue,Fe,je,Pe=[];if(_e){var He=e.default.findCencContentProtection(_e);for(Fe=0;Fe<O.length;++Fe){var Le=pe((Ue=O[Fe]).systemString,Ie);for(je=0;je<_e.length;++je)if((ke=_e[je]).schemeIdUri.toLowerCase()===Ue.schemeIdURI){var ye=Ue.getInitData(ke,He);Pe.push({ks:O[Fe],keyId:ke.keyId,initData:ye,protData:Le,cdmData:Ue.getCDMData(Le?Le.cdmData:null),sessionId:me(Le,ke),sessionType:xe(Le,Te)})}}}return Pe},getSupportedKeySystemsFromSegmentPssh:function se(_e,Ie,Te){for(var Fe,ke=[],Ue=e.default.parsePSSHList(_e),Pe=0;Pe<O.length;++Pe){var He=pe((Fe=O[Pe]).systemString,Ie);Fe.uuid in Ue&&ke.push({ks:Fe,initData:Ue[Fe.uuid],protData:He,cdmData:Fe.getCDMData(He?He.cdmData:null),sessionId:me(He),sessionType:xe(He,Te)})}return ke},getLicenseServerModelInstance:function V(_e,Ie,Te){if("license-release"===Te||"individualization-request"===Te)return null;var ke=null;return Ie&&Ie.hasOwnProperty("drmtoday")?ke=Object(F.default)(b).getInstance({BASE64:P}):_e.systemString===p.default.WIDEVINE_KEYSTEM_STRING?ke=Object(h.default)(b).getInstance():_e.systemString===p.default.PLAYREADY_KEYSTEM_STRING?ke=Object(D.default)(b).getInstance():_e.systemString===p.default.CLEARKEY_KEYSTEM_STRING&&(ke=Object(u.default)(b).getInstance()),ke},processClearKeyLicenseRequest:function de(_e,Ie,Te){try{return _e.getClearKeysFromProtectionData(Ie,Te)}catch(ke){return B.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function A(_e){!_e||(_e.debug&&(B=(L=_e.debug).getLogger(k)),_e.BASE64&&(P=_e.BASE64),_e.settings&&(y=_e.settings))}}}_.__dashjs_factory_name="ProtectionKeyController",w.default=dashjs.FactoryMaker.getSingletonFactory(_)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/vo/KeyPair.js"),C=i("./src/streaming/protection/vo/ClearKeyKeySet.js"),R=i("./src/streaming/protection/CommonEncryption.js"),U=i("./src/streaming/constants/ProtectionConstants.js"),j="e2719d58-a985-b3c9-781a-b030af78d30e",F=U.default.CLEARKEY_KEYSTEM_STRING;function h(u){var _=(u=u||{}).BASE64;function L(S){try{var E=S.replace(/-/g,"");return(E=btoa(E.match(/\w{2}/g).map(function(A){return String.fromCharCode(parseInt(A,16))}).join(""))).replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch(A){return null}}return{uuid:j,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:F,getInitData:function k(S,E){try{var A=R.default.parseInitDataFromContentProtection(S,_);if(!A&&E){var H={kids:[L(E["cenc:default_KID"])]};A=(new TextEncoder).encode(JSON.stringify(H))}return A}catch(ee){return null}},getRequestHeadersFromMessage:function B(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function O(S){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(S))))},getLicenseServerURLFromInitData:function P(){return null},getCDMData:function y(){return null},getClearKeysFromProtectionData:function b(S,E){var A=null;if(S){for(var I=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(E))),H=[],ee=0;ee<I.kids.length;ee++){var fe=I.kids[ee],ue=S.clearkeys&&S.clearkeys.hasOwnProperty(fe)?S.clearkeys[fe]:null;if(!ue)throw new Error("DRM: ClearKey keyID ("+fe+") is not known!");H.push(new e.default(fe,ue))}A=new C.default(H)}return A}}}h.__dashjs_factory_name="KeySystemClearKey",w.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/CommonEncryption.js"),C=i("./src/streaming/constants/ProtectionConstants.js"),R="9a04f079-9840-4286-ab92-e65be0885f95",U=C.default.PLAYREADY_KEYSTEM_STRING;function D(h){var p="utf-16",_=(h=h||{}).BASE64,b=h.settings;function k(){if(!_||!_.hasOwnProperty("decodeArray")||!_.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:R,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:U,getInitData:function P(E){var fe,ue,be,q,se,A=new Uint8Array([112,115,115,104,0,0,0,0]),I=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),H=0,ee=null;if(k(),!E)return null;if("pssh"in E)return e.default.parseInitDataFromContentProtection(E,_);if("pro"in E)ee=_.decodeArray(E.pro.__text);else{if(!("prheader"in E))return null;ee=_.decodeArray(E.prheader.__text)}return ue=4+A.length+I.length+4+(fe=ee.length),be=new ArrayBuffer(ue),q=new Uint8Array(be),(se=new DataView(be)).setUint32(H,ue),q.set(A,H+=4),q.set(I,H+=A.length),se.setUint32(H+=I.length,fe),q.set(ee,H+=4),H+=fe,q.buffer},getRequestHeadersFromMessage:function L(E){var A,I,H={},ee=new DOMParser;if(b&&b.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===p&&E&&E.byteLength%2==1)return H["Content-Type"]="text/xml; charset=utf-8",H;var fe="utf-16"===p?new Uint16Array(E):new Uint8Array(E);A=String.fromCharCode.apply(null,fe);for(var ue=(I=ee.parseFromString(A,"application/xml")).getElementsByTagName("name"),be=I.getElementsByTagName("value"),q=0;q<ue.length;q++)H[ue[q].childNodes[0].nodeValue]=be[q].childNodes[0].nodeValue;return H.hasOwnProperty("Content")&&(H["Content-Type"]=H.Content,delete H.Content),H.hasOwnProperty("Content-Type")||(H["Content-Type"]="text/xml; charset=utf-8"),H},getLicenseRequestFromMessage:function B(E){var A=null,I=new DOMParser;if(b&&b.get().streaming.protection.detectPlayreadyMessageFormat&&"utf-16"===p&&E&&E.byteLength%2==1)return E;var H="utf-16"===p?new Uint16Array(E):new Uint8Array(E);k();var ee=String.fromCharCode.apply(null,H),fe=I.parseFromString(ee,"application/xml");if(!fe.getElementsByTagName("PlayReadyKeyMessage")[0])return E;var ue=fe.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return ue&&(A=_.decode(ue)),A},getLicenseServerURLFromInitData:function O(E){if(E)for(var A=new DataView(E),I=A.getUint16(4,!0),H=6,ee=new DOMParser,fe=0;fe<I;fe++){var ue=A.getUint16(H,!0),be=A.getUint16(H+=2,!0);if(H+=2,1===ue){var q=E.slice(H,H+be),se=String.fromCharCode.apply(null,new Uint16Array(q)),V=ee.parseFromString(se,"application/xml");if(V.getElementsByTagName("LA_URL")[0]){var de=V.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(de)return de}if(V.getElementsByTagName("LUI_URL")[0]){var Q=V.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Q)return Q}}else H+=be}return null},getCDMData:function S(E){var A,I,H,ee;if(k(),!E)return null;for(A=[],ee=0;ee<E.length;++ee)A.push(E.charCodeAt(ee)),A.push(0);for(A=String.fromCharCode.apply(null,A),A=_.encode(A),I='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",A),H=[],ee=0;ee<I.length;++ee)H.push(I.charCodeAt(ee)),H.push(0);return new Uint8Array(H).buffer},setPlayReadyMessageFormat:function y(E){if("utf-8"!==E&&"utf-16"!==E)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');p=E}}}D.__dashjs_factory_name="KeySystemPlayReady",w.default=dashjs.FactoryMaker.getSingletonFactory(D)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/vo/KeyPair.js"),C=i("./src/streaming/protection/vo/ClearKeyKeySet.js"),R=i("./src/streaming/protection/CommonEncryption.js"),U=i("./src/streaming/constants/ProtectionConstants.js"),j="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",F=U.default.CLEARKEY_KEYSTEM_STRING;function h(u){var p,_=u.BASE64,b=u.debug.getLogger(p);return{uuid:j,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:F,getInitData:function L(S){return R.default.parseInitDataFromContentProtection(S,_)},getRequestHeadersFromMessage:function B(){return null},getLicenseRequestFromMessage:function O(S){return new Uint8Array(S)},getLicenseServerURLFromInitData:function P(){return null},getCDMData:function y(){return null},getClearKeysFromProtectionData:function k(S,E){var A=null;if(S){for(var I=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(E))),H=[],ee=0;ee<I.kids.length;ee++){var fe=I.kids[ee],ue=S.clearkeys&&S.clearkeys.hasOwnProperty(fe)?S.clearkeys[fe]:null;if(!ue)throw new Error("DRM: ClearKey keyID ("+fe+") is not known!");H.push(new e.default(fe,ue))}A=new C.default(H),b.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return A}}}h.__dashjs_factory_name="KeySystemW3CClearKey",w.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/CommonEncryption.js"),C=i("./src/streaming/constants/ProtectionConstants.js"),R="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",U=C.default.WIDEVINE_KEYSTEM_STRING;function F(D){var u=(D=D||{}).BASE64;return{uuid:R,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:U,getInitData:function p(B){return e.default.parseInitDataFromContentProtection(B,u)},getRequestHeadersFromMessage:function _(){return null},getLicenseRequestFromMessage:function b(B){return new Uint8Array(B)},getLicenseServerURLFromInitData:function k(){return null},getCDMData:function L(){return null}}}F.__dashjs_factory_name="KeySystemWidevine",w.default=dashjs.FactoryMaker.getSingletonFactory(F)},"./src/streaming/protection/errors/ProtectionErrors.js":function(Ge,w,i){"use strict";function C(P){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function R(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,j(E.key),E)}}function j(P){var y=function F(P,y){if("object"!==C(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==C(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===C(y)?y:String(y)}function h(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&u(P,y)}function u(P,y){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function p(P){var y=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=L(P);if(y){var I=L(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return _(this,A)}}function _(P,y){if(y&&("object"===C(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function b(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function L(P){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}i.r(w);var O=new(function(P){h(S,P);var y=p(S);function S(){var E;return function D(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(E=y.call(this)).MEDIA_KEYERR_CODE=100,E.MEDIA_KEYERR_UNKNOWN_CODE=101,E.MEDIA_KEYERR_CLIENT_CODE=102,E.MEDIA_KEYERR_SERVICE_CODE=103,E.MEDIA_KEYERR_OUTPUT_CODE=104,E.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,E.MEDIA_KEYERR_DOMAIN_CODE=106,E.MEDIA_KEY_MESSAGE_ERROR_CODE=107,E.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,E.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,E.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,E.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,E.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,E.KEY_SESSION_CREATED_ERROR_CODE=113,E.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,E.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",E.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",E.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",E.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",E.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",E.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",E.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",E.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",E.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",E.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",E.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",E.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",E.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",E.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",E}return function U(P,y,S){return y&&R(P.prototype,y),S&&R(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(i("./src/core/errors/ErrorsBase.js").default));w.default=O},"./src/streaming/protection/models/ProtectionModel_01b.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/controllers/ProtectionKeyController.js"),C=i("./src/streaming/protection/vo/NeedKey.js"),R=i("./src/streaming/vo/DashJSError.js"),U=i("./src/streaming/protection/vo/KeyMessage.js"),j=i("./src/streaming/protection/vo/KeySystemConfiguration.js"),F=i("./src/streaming/protection/vo/KeySystemAccess.js"),D=i("./src/streaming/protection/errors/ProtectionErrors.js");function h(u){var O,P,y,S,E,A,I,H,ee,p=this.context,_=(u=u||{}).eventBus,b=u.events,k=u.debug,L=u.api,B=u.errHandler;function ue(){y&&Ue();for(var Fe=0;Fe<I.length;Fe++)me(I[Fe]);_.trigger(b.TEARDOWN_COMPLETE)}function me(Fe){try{y[L.cancelKeyRequest](S.systemString,Fe.sessionId)}catch(je){_.trigger(b.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Fe.sessionId+") "+je.message})}}function ke(Fe,je){if(!je||!Fe)return null;for(var Pe=Fe.length,He=0;He<Pe;He++)if(Fe[He].sessionId==je)return Fe[He];return null}function Ue(){y.removeEventListener(L.keyerror,ee),y.removeEventListener(L.needkey,ee),y.removeEventListener(L.keymessage,ee),y.removeEventListener(L.keyadded,ee)}return O={getAllInitData:function be(){for(var Fe=[],je=0;je<A.length;je++)Fe.push(A[je].initData);for(var Pe=0;Pe<I.length;Pe++)Fe.push(I[Pe].initData);return Fe},getSessions:function q(){return I.concat(A)},requestKeySystemAccess:function se(Fe){return new Promise(function(je,Pe){var He=y;He||(He=document.createElement("video"));for(var Le=!1,ye=0;ye<Fe.length;ye++)for(var ae=Fe[ye].ks.systemString,W=Fe[ye].configs,De=null,le=0;le<W.length;le++){var ne=W[le].videoCapabilities;if(ne&&0!==ne.length){De=[];for(var z=0;z<ne.length;z++)""!==He.canPlayType(ne[z].contentType,ae)&&De.push(ne[z])}if(De&&(!De||0!==De.length)){Le=!0;var te=new j.default(null,De),X=E.getKeySystemBySystemString(ae),$=new F.default(X,te);_.trigger(b.KEY_SYSTEM_ACCESS_COMPLETE,{data:$}),je({data:$});break}}if(!Le){var K="Key system access denied! -- No valid audio/video content configurations detected!";_.trigger(b.KEY_SYSTEM_ACCESS_COMPLETE,{error:K}),Pe({error:K})}})},selectKeySystem:function V(Fe){return S=Fe.keySystem,Promise.resolve(S)},setMediaElement:function de(Fe){if(y!==Fe){if(y){Ue();for(var je=0;je<I.length;je++)me(I[je]);I=[]}(y=Fe)&&(y.addEventListener(L.keyerror,ee),y.addEventListener(L.needkey,ee),y.addEventListener(L.keymessage,ee),y.addEventListener(L.keyadded,ee),_.trigger(b.VIDEO_ELEMENT_SELECTED))}},createKeySession:function Q(Fe){if(!S)throw new Error("Can not create sessions until you have selected a key system");if(H||0===I.length){var je={sessionId:null,keyId:Fe.keyId,initData:Fe.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return A.push(je),y[L.generateKeyRequest](S.systemString,new Uint8Array(Fe.initData)),je}throw new Error("Multiple sessions not allowed!")},updateKeySession:function pe(Fe,je){var Pe=Fe.sessionId;if(E.isClearKey(S))for(var He=0;He<je.keyPairs.length;He++)y[L.addKey](S.systemString,je.keyPairs[He].key,je.keyPairs[He].keyID,Pe);else y[L.addKey](S.systemString,new Uint8Array(je),new Uint8Array(Fe.initData),Pe);_.trigger(b.KEY_SESSION_UPDATED)},closeKeySession:me,setServerCertificate:function xe(){},loadKeySession:function _e(){},removeKeySession:function Ie(){},stop:ue,reset:ue},function fe(){P=k.getLogger(O),y=null,S=null,A=[],I=[],E=Object(e.default)(p).getInstance(),ee=function Te(){return{handleEvent:function(je){var Pe=null;switch(je.type){case L.needkey:var He=ArrayBuffer.isView(je.initData)?je.initData.buffer:je.initData;_.trigger(b.NEED_KEY,{key:new C.default(He,"cenc")});break;case L.keyerror:if((Pe=ke(I,je.sessionId))||(Pe=ke(A,je.sessionId)),Pe){var Le=D.default.MEDIA_KEYERR_CODE,ye="";switch(je.errorCode.code){case 1:Le=D.default.MEDIA_KEYERR_UNKNOWN_CODE,ye+="MEDIA_KEYERR_UNKNOWN - "+D.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:Le=D.default.MEDIA_KEYERR_CLIENT_CODE,ye+="MEDIA_KEYERR_CLIENT - "+D.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:Le=D.default.MEDIA_KEYERR_SERVICE_CODE,ye+="MEDIA_KEYERR_SERVICE - "+D.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:Le=D.default.MEDIA_KEYERR_OUTPUT_CODE,ye+="MEDIA_KEYERR_OUTPUT - "+D.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:Le=D.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,ye+="MEDIA_KEYERR_HARDWARECHANGE - "+D.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:Le=D.default.MEDIA_KEYERR_DOMAIN_CODE,ye+="MEDIA_KEYERR_DOMAIN - "+D.default.MEDIA_KEYERR_DOMAIN_MESSAGE}_.trigger(b.KEY_ERROR,{error:new R.default(Le,ye+="  System Code = "+je.systemCode,Pe)})}else P.error("No session token found for key error");break;case L.keyadded:(Pe=ke(I,je.sessionId))||(Pe=ke(A,je.sessionId)),Pe?(P.debug("DRM: Key added."),_.trigger(b.KEY_ADDED,{data:Pe})):P.debug("No session token found for key added");break;case L.keymessage:if((H=null!=je.sessionId)?!(Pe=ke(I,je.sessionId))&&A.length>0&&(Pe=A.shift(),I.push(Pe),Pe.sessionId=je.sessionId,_.trigger(b.KEY_SESSION_CREATED,{data:Pe})):A.length>0&&(Pe=A.shift(),I.push(Pe),0!==A.length&&B.error(new R.default(D.default.MEDIA_KEY_MESSAGE_ERROR_CODE,D.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Pe){var ae=ArrayBuffer.isView(je.message)?je.message.buffer:je.message;Pe.keyMessage=ae,_.trigger(b.INTERNAL_KEY_MESSAGE,{data:new U.default(Pe,ae,je.defaultURL)})}else P.warn("No session token found for key message")}}}}()}(),O}h.__dashjs_factory_name="ProtectionModel_01b",w.default=dashjs.FactoryMaker.getClassFactory(h)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/controllers/ProtectionKeyController.js"),C=i("./src/streaming/protection/vo/NeedKey.js"),R=i("./src/streaming/protection/errors/ProtectionErrors.js"),U=i("./src/streaming/vo/DashJSError.js"),j=i("./src/streaming/protection/vo/KeyMessage.js"),F=i("./src/streaming/protection/vo/KeySystemAccess.js"),D=i("./src/streaming/constants/ProtectionConstants.js"),h={};function u(p){var B,O,P,y,S,E,A,I,_=this.context,b=(p=p||{}).eventBus,k=p.events,L=p.debug;function se(Le,ye,ae,W){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var ce="Insecure origins are not allowed";return b.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{error:ce}),void W({error:ce})}var ne=Le[ye].ks,z=ne.systemString;(function V(Le,ye){return new Promise(function(ae,W){de(Le,ye,0,ae,W)})})((Le[ye].protData&&Le[ye].protData.systemStringPriority?Le[ye].protData.systemStringPriority:null)||(h[z]?h[z]:[z]),Le[ye].configs).then(function(X){var $="function"==typeof X.getConfiguration?X.getConfiguration():null,K=new F.default(ne,$);K.mksa=X,b.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{data:K}),ae({data:K})}).catch(function(X){if(ye+1<Le.length)se(Le,ye+1,ae,W);else{var $="Key system access denied! ";b.trigger(k.KEY_SYSTEM_ACCESS_COMPLETE,{error:$+X.message}),W({error:$+X.message})}})}function de(Le,ye,ae,W,ce){var De=Le[ae];O.debug("Requesting key system access for system string ".concat(De)),navigator.requestMediaKeySystemAccess(De,ye).then(function(le){le.selectedSystemString=De,W(le)}).catch(function(le){ae+1<Le.length?de(Le,ye,ae+1,W,ce):ce(le)})}function Ue(Le){var ye=Le.session;return ye.removeEventListener("keystatuseschange",Le),ye.removeEventListener("message",Le),ye.close()}function je(Le){for(var ye=0;ye<E.length;ye++)if(E[ye]===Le){E.splice(ye,1);break}}function Pe(Le){var ye,ae;return Le&&Le.length>0&&(Le[0]&&("string"==typeof Le[0]?ye=Le[0]:ae=Le[0]),Le[1]&&("string"==typeof Le[1]?ye=Le[1]:ae=Le[1])),{status:ye,keyId:ae}}function He(Le,ye){var ae={session:Le,keyId:ye.keyId,initData:ye.initData,sessionId:ye.sessionId,sessionType:ye.sessionType,handleEvent:function(ce){switch(ce.type){case"keystatuseschange":b.trigger(k.KEY_STATUSES_CHANGED,{data:this}),ce.target.keyStatuses.forEach(function(){var le=Pe(arguments);b.trigger(k.INTERNAL_KEY_STATUS_CHANGED,"expired"===le.status?{error:new U.default(R.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,R.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}:le)});break;case"message":var De=ArrayBuffer.isView(ce.message)?ce.message.buffer:ce.message;b.trigger(k.INTERNAL_KEY_MESSAGE,{data:new j.default(this,De,void 0,ce.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return Le.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return Le.expiration},getKeyStatuses:function(){return Le.keyStatuses},getUsable:function(){var ce=!1;return Le.keyStatuses.forEach(function(){"usable"===Pe(arguments).status&&(ce=!0)}),ce}};return Le.addEventListener("keystatuseschange",ae),Le.addEventListener("message",ae),Le.closed.then(function(){je(ae),O.debug("DRM: Session closed.  SessionID = "+ae.getSessionId()),b.trigger(k.KEY_SESSION_CLOSED,{data:ae.getSessionId()})}),E.push(ae),ae}return B={getAllInitData:function ue(){for(var Le=[],ye=0;ye<E.length;ye++)E[ye].initData&&Le.push(E[ye].initData);return Le},getSessions:function be(){return E},requestKeySystemAccess:function q(Le){return new Promise(function(ye,ae){se(Le,0,ye,ae)})},selectKeySystem:function Q(Le){return new Promise(function(ye,ae){Le.mksa.createMediaKeys().then(function(W){return P=Le.keySystem,S=W,y?y.setMediaKeys(S):Promise.resolve()}).then(function(){ye(P)}).catch(function(){ae({error:"Error selecting keys system ("+Le.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function pe(Le){y!==Le&&(y&&(y.removeEventListener("encrypted",A),y.setMediaKeys&&y.setMediaKeys(null)),(y=Le)&&(y.addEventListener("encrypted",A),y.setMediaKeys&&S&&y.setMediaKeys(S)))},setServerCertificate:function me(Le){if(!P||!S)throw new Error("Can not set server certificate until you have selected a key system");S.setServerCertificate(Le).then(function(){O.info("DRM: License server certificate successfully updated."),b.trigger(k.SERVER_CERTIFICATE_UPDATED)}).catch(function(ye){b.trigger(k.SERVER_CERTIFICATE_UPDATED,{error:new U.default(R.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,R.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+ye.name)})})},createKeySession:function xe(Le){if(!P||!S)throw new Error("Can not create sessions until you have selected a key system");var ye=S.createSession(Le.sessionType),ae=He(ye,Le);ye.generateRequest(P.systemString===D.default.CLEARKEY_KEYSTEM_STRING&&(Le.initData||Le.protData&&Le.protData.clearkeys)?D.default.INITIALIZATION_DATA_TYPE_KEYIDS:D.default.INITIALIZATION_DATA_TYPE_CENC,Le.initData).then(function(){O.debug("DRM: Session created.  SessionID = "+ae.getSessionId()),b.trigger(k.KEY_SESSION_CREATED,{data:ae})}).catch(function(ce){je(ae),b.trigger(k.KEY_SESSION_CREATED,{data:null,error:new U.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+ce.name)})})},updateKeySession:function _e(Le,ye){var ae=Le.session;I.isClearKey(P)&&(ye=ye.toJWK()),ae.update(ye).then(function(){b.trigger(k.KEY_SESSION_UPDATED)}).catch(function(W){b.trigger(k.KEY_ERROR,{error:new U.default(R.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+W.name,Le)})})},loadKeySession:function Ie(Le){if(!P||!S)throw new Error("Can not load sessions until you have selected a key system");for(var ye=Le.sessionId,ae=0;ae<E.length;ae++)if(ye===E[ae].sessionId)return void O.warn("DRM: Ignoring session ID because we have already seen it!");var W=S.createSession(Le.sessionType),ce=He(W,Le);W.load(ye).then(function(De){De?(O.debug("DRM: Session loaded.  SessionID = "+ce.getSessionId()),b.trigger(k.KEY_SESSION_CREATED,{data:ce})):(je(ce),b.trigger(k.KEY_SESSION_CREATED,{data:null,error:new U.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+ye+")")}))}).catch(function(De){je(ce),b.trigger(k.KEY_SESSION_CREATED,{data:null,error:new U.default(R.default.KEY_SESSION_CREATED_ERROR_CODE,R.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+ye+")! "+De.name)})})},removeKeySession:function Te(Le){Le.session.remove().then(function(){O.debug("DRM: Session removed.  SessionID = "+Le.getSessionId()),b.trigger(k.KEY_SESSION_REMOVED,{data:Le.getSessionId()})},function(ae){b.trigger(k.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+Le.getSessionId()+"). "+ae.name})})},closeKeySession:function ke(Le){Ue(Le).catch(function(ye){je(Le),b.trigger(k.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Le.getSessionId()+") "+ye.name})})},stop:function fe(){for(var Le,ye=0;ye<E.length;ye++)(Le=E[ye]).getUsable()||Ue(Le).catch(function(){je(Le)})},reset:function ee(){var ye,Le=E.length;0!==Le?function(){for(var ae=function(De){je(De),0===E.length&&(y?(y.removeEventListener("encrypted",A),y.setMediaKeys(null).then(function(){b.trigger(k.TEARDOWN_COMPLETE)})):b.trigger(k.TEARDOWN_COMPLETE))},W=0;W<Le;W++)!function(ce){ye.session.closed.then(function(){ae(ce)}),Ue(ye).catch(function(){ae(ce)})}(ye=E[W])}():b.trigger(k.TEARDOWN_COMPLETE)}},function H(){O=L.getLogger(B),P=null,y=null,S=null,E=[],I=Object(e.default)(_).getInstance(),A=function Fe(){return{handleEvent:function(ye){if("encrypted"===ye.type&&ye.initData){var ae=ArrayBuffer.isView(ye.initData)?ye.initData.buffer:ye.initData;b.trigger(k.NEED_KEY,{key:new C.default(ae,ye.initDataType)})}}}}()}(),B}h[D.default.PLAYREADY_KEYSTEM_STRING]=[D.default.PLAYREADY_KEYSTEM_STRING,D.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],h[D.default.WIDEVINE_KEYSTEM_STRING]=[D.default.WIDEVINE_KEYSTEM_STRING],h[D.default.CLEARKEY_KEYSTEM_STRING]=[D.default.CLEARKEY_KEYSTEM_STRING],u.__dashjs_factory_name="ProtectionModel_21Jan2015",w.default=dashjs.FactoryMaker.getClassFactory(u)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/controllers/ProtectionKeyController.js"),C=i("./src/streaming/protection/vo/NeedKey.js"),R=i("./src/streaming/vo/DashJSError.js"),U=i("./src/streaming/protection/errors/ProtectionErrors.js"),j=i("./src/streaming/protection/vo/KeyMessage.js"),F=i("./src/streaming/protection/vo/KeySystemConfiguration.js"),D=i("./src/streaming/protection/vo/KeySystemAccess.js");function h(u){var B,O,P,y,S,E,A,I,H,p=this.context,_=(u=u||{}).eventBus,b=u.events,k=u.debug,L=u.api;function fe(){try{for(var Ue=0;Ue<A.length;Ue++)pe(A[Ue]);P&&P.removeEventListener(L.needkey,I),_.trigger(b.TEARDOWN_COMPLETE)}catch(Fe){_.trigger(b.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Fe.message})}}function pe(Ue){var Fe=Ue.session;Fe.removeEventListener(L.error,Ue),Fe.removeEventListener(L.message,Ue),Fe.removeEventListener(L.ready,Ue),Fe.removeEventListener(L.close,Ue);for(var je=0;je<A.length;je++)if(A[je]===Ue){A.splice(je,1);break}Fe[L.release]()}function Te(){var Ue=null,Fe=function(){P.removeEventListener("loadedmetadata",Ue),P[L.setMediaKeys](S),_.trigger(b.VIDEO_ELEMENT_SELECTED)};P.readyState>=1?Fe():(Ue=Fe.bind(this),P.addEventListener("loadedmetadata",Ue))}return B={getAllInitData:function ue(){for(var Ue=[],Fe=0;Fe<A.length;Fe++)Ue.push(A[Fe].initData);return Ue},getSessions:function be(){return A},requestKeySystemAccess:function q(Ue){return new Promise(function(Fe,je){for(var Pe=!1,He=0;He<Ue.length;He++)for(var Le=Ue[He].ks.systemString,ye=Ue[He].configs,ae=null,W=null,ce=0;ce<ye.length;ce++){var De=ye[ce].audioCapabilities,le=ye[ce].videoCapabilities;if(De&&0!==De.length){ae=[];for(var ne=0;ne<De.length;ne++)window[L.MediaKeys].isTypeSupported(Le,De[ne].contentType)&&ae.push(De[ne])}if(le&&0!==le.length){W=[];for(var z=0;z<le.length;z++)window[L.MediaKeys].isTypeSupported(Le,le[z].contentType)&&W.push(le[z])}if(!(!ae&&!W||ae&&0===ae.length||W&&0===W.length)){Pe=!0;var te=new F.default(ae,W),X=H.getKeySystemBySystemString(Le),$=new D.default(X,te);_.trigger(b.KEY_SYSTEM_ACCESS_COMPLETE,{data:$}),Fe({data:$});break}}if(!Pe){var K="Key system access denied! -- No valid audio/video content configurations detected!";_.trigger(b.KEY_SYSTEM_ACCESS_COMPLETE,{error:K}),je({error:K})}})},selectKeySystem:function se(Ue){return new Promise(function(Fe,je){try{S=Ue.mediaKeys=new window[L.MediaKeys](Ue.keySystem.systemString),y=Ue.keySystem,E=Ue,P&&Te(),Fe(y)}catch(Pe){je({error:"Error selecting keys system ("+y.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function V(Ue){P!==Ue&&(P&&P.removeEventListener(L.needkey,I),(P=Ue)&&(P.addEventListener(L.needkey,I),S&&Te()))},createKeySession:function de(Ue){if(!y||!S||!E)throw new Error("Can not create sessions until you have selected a key system");var Fe=null;if(E.ksConfiguration.videoCapabilities&&E.ksConfiguration.videoCapabilities.length>0&&(Fe=E.ksConfiguration.videoCapabilities[0]),null===Fe&&E.ksConfiguration.audioCapabilities&&E.ksConfiguration.audioCapabilities.length>0&&(Fe=E.ksConfiguration.audioCapabilities[0]),null===Fe)throw new Error("Can not create sessions for unknown content types.");var Pe=S.createSession(Fe.contentType,new Uint8Array(Ue.initData),Ue.cdmData?new Uint8Array(Ue.cdmData):null),He=function ke(Ue,Fe){return{session:Ue,keyId:Fe.keyId,initData:Fe.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Pe){switch(Pe.type){case L.error:_.trigger(b.KEY_ERROR,{error:new R.default(U.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case L.message:var Le=ArrayBuffer.isView(Pe.message)?Pe.message.buffer:Pe.message;_.trigger(b.INTERNAL_KEY_MESSAGE,{data:new j.default(this,Le,Pe.destinationURL)});break;case L.ready:O.debug("DRM: Key added."),_.trigger(b.KEY_ADDED);break;case L.close:O.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),_.trigger(b.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Pe,Ue);Pe.addEventListener(L.error,He),Pe.addEventListener(L.message,He),Pe.addEventListener(L.ready,He),Pe.addEventListener(L.close,He),A.push(He),O.debug("DRM: Session created.  SessionID = "+He.getSessionId()),_.trigger(b.KEY_SESSION_CREATED,{data:He})},updateKeySession:function Q(Ue,Fe){var je=Ue.session;H.isClearKey(y)?je.update(new Uint8Array(Fe.toJWK())):je.update(new Uint8Array(Fe)),_.trigger(b.KEY_SESSION_UPDATED)},closeKeySession:pe,setServerCertificate:function me(){},loadKeySession:function xe(){},removeKeySession:function _e(){},stop:fe,reset:fe},function ee(){O=k.getLogger(B),P=null,y=null,S=null,E=null,A=[],H=Object(e.default)(p).getInstance(),I=function Ie(){return{handleEvent:function(Fe){if(Fe.type===L.needkey&&Fe.initData){var je=ArrayBuffer.isView(Fe.initData)?Fe.initData.buffer:Fe.initData;_.trigger(b.NEED_KEY,{key:new C.default(je,"cenc")})}}}}()}(),B}h.__dashjs_factory_name="ProtectionModel_3Feb2014",w.default=dashjs.FactoryMaker.getClassFactory(h)},"./src/streaming/protection/servers/ClearKey.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/protection/vo/KeyPair.js"),C=i("./src/streaming/protection/vo/ClearKeyKeySet.js");function R(){return{getServerURLFromMessage:function j(p){return p},getHTTPMethod:function F(){return"POST"},getResponseType:function D(){return"json"},getLicenseMessage:function h(p){if(!p.hasOwnProperty("keys"))return null;for(var _=[],b=0;b<p.keys.length;b++){var k=p.keys[b],L=k.kid.replace(/=/g,""),B=k.k.replace(/=/g,"");_.push(new e.default(L,B))}return new C.default(_)},getErrorResponse:function u(p){return String.fromCharCode.apply(null,new Uint8Array(p))}}}R.__dashjs_factory_name="ClearKey",w.default=dashjs.FactoryMaker.getSingletonFactory(R)},"./src/streaming/protection/servers/DRMToday.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/ProtectionConstants.js");function C(R){var U=(R=R||{}).BASE64,j={};return j[e.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(L){return U.decodeArray(L.license)},getErrorResponse:function(L){return L}},j[e.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(L){return L},getErrorResponse:function(L){return String.fromCharCode.apply(null,new Uint8Array(L))}},{getServerURLFromMessage:function h(k){return k},getHTTPMethod:function u(){return"POST"},getResponseType:function p(k){return j[k].responseType},getLicenseMessage:function _(k,L){return function D(){if(!U||!U.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),j[L].getLicenseMessage(k)},getErrorResponse:function b(k,L){return j[L].getErrorResponse(k)}}}C.__dashjs_factory_name="DRMToday",w.default=dashjs.FactoryMaker.getSingletonFactory(C)},"./src/streaming/protection/servers/PlayReady.js":function(Ge,w,i){"use strict";function e(){var R="http://schemas.xmlsoap.org/soap/envelope/";function U(b){var k=String.fromCharCode.apply(null,new Uint8Array(b));return decodeURIComponent(escape(k))}function j(b){if(window.DOMParser){var k=U(b),B=(new window.DOMParser).parseFromString(k,"text/xml"),O=B?B.getElementsByTagNameNS(R,"Envelope")[0]:null,P=O?O.getElementsByTagNameNS(R,"Body")[0]:null;if(P&&P.getElementsByTagNameNS(R,"Fault")[0])return null}return b}function F(b){var k="",L="",B="",O=-1,P=-1;if(window.DOMParser){var y=U(b),E=(new window.DOMParser).parseFromString(y,"text/xml"),A=E?E.getElementsByTagNameNS(R,"Envelope")[0]:null,I=A?A.getElementsByTagNameNS(R,"Body")[0]:null,H=I?I.getElementsByTagNameNS(R,"Fault")[0]:null,ee=H?H.getElementsByTagName("detail")[0]:null,fe=ee?ee.getElementsByTagName("Exception")[0]:null,ue=null;if(null===H)return y;k=(ue=H.getElementsByTagName("faultstring")[0].firstChild)?ue.nodeValue:null,null!==fe&&(L=(ue=fe.getElementsByTagName("StatusCode")[0])?ue.firstChild.nodeValue:null,O=(B=(ue=fe.getElementsByTagName("Message")[0])?ue.firstChild.nodeValue:null)?B.lastIndexOf("[")+1:-1,P=B?B.indexOf("]"):-1,B=B?B.substring(O,P):"")}var be="code: ".concat(L,", name: ").concat(k);return B&&(be+=", message: ".concat(B)),be}return{getServerURLFromMessage:function D(b){return b},getHTTPMethod:function h(){return"POST"},getResponseType:function u(){return"arraybuffer"},getLicenseMessage:function p(b){return j.call(this,b)},getErrorResponse:function _(b){return F.call(this,b)}}}i.r(w),e.__dashjs_factory_name="PlayReady",w.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/protection/servers/Widevine.js":function(Ge,w,i){"use strict";function e(){return{getServerURLFromMessage:function R(h){return h},getHTTPMethod:function U(){return"POST"},getResponseType:function j(){return"arraybuffer"},getLicenseMessage:function F(h){return h},getErrorResponse:function D(h){return String.fromCharCode.apply(null,new Uint8Array(h))}}}i.r(w),e.__dashjs_factory_name="Widevine",w.default=dashjs.FactoryMaker.getSingletonFactory(e)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u,p){if(function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}(this,h),p&&"persistent"!==p&&"temporary"!==p)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=u,this.type=p}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"toJWK",value:function(){var p,_=this.keyPairs.length,b={keys:[]};for(p=0;p<_;p++)b.keys.push({kty:"oct",alg:"A128KW",kid:this.keyPairs[p].keyID,k:this.keyPairs[p].key});this.type&&(b.type=this.type);var L=JSON.stringify(b),B=L.length,O=new ArrayBuffer(B),P=new Uint8Array(O);for(p=0;p<B;p++)P[p]=L.charCodeAt(p);return O}}]),h}()},"./src/streaming/protection/vo/KeyMessage.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_,b){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.sessionToken=u,this.message=p,this.defaultURL=_,this.messageType=b||"license-request"})},"./src/streaming/protection/vo/KeyPair.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.keyID=u,this.key=p})},"./src/streaming/protection/vo/KeySystemAccess.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.keySystem=u,this.ksConfiguration=p})},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_,b,k){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.initDataTypes=["cenc"],u&&u.length&&(this.audioCapabilities=u),p&&p.length&&(this.videoCapabilities=p),this.distinctiveIdentifier=_,this.persistentState=b,this.sessionTypes=k})},"./src/streaming/protection/vo/LicenseRequest.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_,b,k,L,B,O){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.url=u,this.method=p,this.responseType=_,this.headers=b,this.withCredentials=k,this.messageType=L,this.sessionId=B,this.data=O})},"./src/streaming/protection/vo/LicenseResponse.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.url=u,this.headers=p,this.data=_})},"./src/streaming/protection/vo/MediaCapability.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.contentType=u,this.robustness=p})},"./src/streaming/protection/vo/NeedKey.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.initData=u,this.initDataType=p})},"./src/streaming/rules/DroppedFramesHistory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(){var U={},j={},F={};return{push:function D(_,b,k){if(b){U[_]||(U[_]=[],j[_]=0,F[_]=0);var L=k&&k.droppedVideoFrames?k.droppedVideoFrames:0,B=k&&k.totalVideoFrames?k.totalVideoFrames:0,O=L-j[_];j[_]=L;var P=B-F[_];F[_]=B;var y=U[_];isNaN(b)||(y[b]?(y[b].droppedVideoFrames+=O,y[b].totalVideoFrames+=P):y[b]={droppedVideoFrames:O,totalVideoFrames:P})}},getFrameHistory:function h(_){return U[_]},clearForStream:function u(_){try{delete U[_],delete j[_],delete F[_]}catch(b){}},reset:function p(){U={},j={},F={}}}}C.__dashjs_factory_name="DroppedFramesHistory";var R=e.default.getClassFactory(C);w.default=R},"./src/streaming/rules/RulesContext.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(R){var j=(R=R||{}).abrController,F=R.switchHistory,D=R.droppedFramesHistory,h=R.currentRequest,u=R.useBufferOccupancyABR,p=R.useL2AABR,_=R.useLoLPABR,b=R.streamProcessor?R.streamProcessor.getScheduleController():null,k=R.streamProcessor?R.streamProcessor.getRepresentationInfo():null,L=R.videoModel?R.videoModel:null;function P(){return k?k.mediaInfo:null}return{getMediaType:function B(){var q=P();return q?q.type:null},getMediaInfo:P,getDroppedFramesHistory:function H(){return D},getCurrentRequest:function ee(){return h},getSwitchHistory:function A(){return F},getStreamInfo:function O(){var q=P();return q?q.streamInfo:null},getScheduleController:function S(){return b},getAbrController:function E(){return j},getRepresentationInfo:function y(){return k},useBufferOccupancyABR:function fe(){return u},useL2AABR:function ue(){return p},useLoLPABR:function be(){return _},getVideoModel:function I(){return L}}}C.__dashjs_factory_name="RulesContext",w.default=e.default.getClassFactory(C)},"./src/streaming/rules/SwitchRequest.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),R={DEFAULT:.5,STRONG:1,WEAK:0};function U(F,D,h){return{quality:void 0===F?-1:F,reason:void 0===D?null:D,priority:function k(L){var B=R.DEFAULT;return(L===R.DEFAULT||L===R.STRONG||L===R.WEAK)&&(B=L),B}(h)}}U.__dashjs_factory_name="SwitchRequest";var j=e.default.getClassFactory(U);j.NO_CHANGE=-1,j.PRIORITY=R,e.default.updateClassFactory(U.__dashjs_factory_name,j),w.default=j},"./src/streaming/rules/SwitchRequestHistory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/rules/SwitchRequest.js");function U(){var F=[],D=[];return{push:function h(_){_.newValue===C.default.NO_CHANGE&&(_.newValue=_.oldValue),F[_.oldValue]||(F[_.oldValue]={noDrops:0,drops:0,dropSize:0});var b=_.newValue-_.oldValue,k=b<0?1:0,L=k?-b:0,B=k?0:1;if(F[_.oldValue].drops+=k,F[_.oldValue].dropSize+=L,F[_.oldValue].noDrops+=B,D.push({idx:_.oldValue,noDrop:B,drop:k,dropSize:L}),D.length>8){var O=D.shift();F[O.idx].drops-=O.drop,F[O.idx].dropSize-=O.dropSize,F[O.idx].noDrops-=O.noDrop}},getSwitchRequests:function u(){return F},reset:function p(){F=[],D=[]}}}U.__dashjs_factory_name="SwitchRequestHistory";var j=e.default.getClassFactory(U);w.default=j},"./src/streaming/rules/ThroughputHistory.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/FactoryMaker.js");function R(U){var O,P,y,S,E,B=(U=U||{}).settings;function ee(_e,Ie,Te,ke){var Ue=Math.pow(.5,Te/ke.fast);_e.fastEstimate=(1-Ue)*Ie+Ue*_e.fastEstimate;var Fe=Math.pow(.5,Te/ke.slow);_e.slowEstimate=(1-Fe)*Ie+Fe*_e.slowEstimate,_e.totalWeight+=Te}function ue(_e,Ie,Te){return B.get().streaming.abr.movingAverageMethod!==e.default.MOVING_AVERAGE_SLIDING_WINDOW?function q(_e,Ie){var Te=_e?E.throughputHalfLife:E.latencyHalfLife,ke=_e?y[Ie]:S[Ie];if(!ke||ke.totalWeight<=0)return NaN;var Ue=ke.fastEstimate/(1-Math.pow(.5,ke.totalWeight/Te.fast)),Fe=ke.slowEstimate/(1-Math.pow(.5,ke.totalWeight/Te.slow));return _e?Math.min(Ue,Fe):Math.max(Ue,Fe)}(_e,Ie):function be(_e,Ie,Te){var ke=function fe(_e,Ie,Te){var ke,Ue;if(_e?(ke=O[Ie],Ue=Te?3:4):(ke=P[Ie],Ue=4),ke){if(Ue>=ke.length)Ue=ke.length;else if(_e)for(var Fe=1;Fe<Ue;++Fe){var je=ke[ke.length-Fe]/ke[ke.length-Fe-1];if((je>=1.3||je<=1/1.3)&&(Ue+=1)===ke.length)break}}else Ue=0;return Ue}(_e,Ie,Te),Fe=(_e?O:P)[Ie];return 0!==ke&&Fe&&0!==Fe.length?(Fe=Fe.slice(-ke)).reduce(function(je,Pe){return je+Pe})/Fe.length:NaN}(_e,Ie,Te)}function se(_e,Ie){return ue(!0,_e,Ie)}function Q(_e){O[_e]=O[_e]||[],P[_e]=P[_e]||[],y[_e]=y[_e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},S[_e]=S[_e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function me(){O={},P={},y={},S={}}var xe={push:function H(_e,Ie,Te){if(Ie.trace&&Ie.trace.length){var je,ke=Ie.tresponse.getTime()-Ie.trequest.getTime()||1,Ue=Ie._tfinish.getTime()-Ie.tresponse.getTime()||1,Fe=Ie.trace.reduce(function(He,Le){return He+Le.b[0]},0),Pe=0;if(0!==(je=Ie._fileLoaderType&&Ie._fileLoaderType===e.default.FILE_LOADER_TYPES.FETCH?Ie.trace.reduce(function(He,Le){return He+Le.d},0):Te?Ue:ke+Ue)&&(Pe=Math.round(8*Fe/je)),Q(_e),function I(_e,Ie,Te){return _e===e.default.VIDEO?Te<B.get().streaming.cacheLoadThresholds[e.default.VIDEO]:_e===e.default.AUDIO?Te<B.get().streaming.cacheLoadThresholds[e.default.AUDIO]:void 0}(_e,0,Ue)){if(O[_e].length>0&&!O[_e].hasCachedEntries)return;O[_e].hasCachedEntries=!0}else O[_e]&&O[_e].hasCachedEntries&&function pe(_e){delete O[_e],delete P[_e],delete y[_e],delete S[_e],Q(_e)}(_e);O[_e].push(Pe),O[_e].length>20&&O[_e].shift(),P[_e].push(ke),P[_e].length>20&&P[_e].shift(),ee(y[_e],Pe,.001*Ue,E.throughputHalfLife),ee(S[_e],ke,1,E.latencyHalfLife)}},getAverageThroughput:se,getSafeAverageThroughput:function V(_e,Ie){var Te=se(_e,Ie);return isNaN(Te)||(Te*=B.get().streaming.abr.bandwidthSafetyFactor),Te},getAverageLatency:function de(_e){return ue(!1,_e)},reset:me};return function A(){E={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},me()}(),xe}R.__dashjs_factory_name="ThroughputHistory",w.default=C.default.getClassFactory(R)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/rules/abr/ThroughputRule.js"),C=i("./src/streaming/rules/abr/InsufficientBufferRule.js"),R=i("./src/streaming/rules/abr/AbandonRequestsRule.js"),U=i("./src/streaming/rules/abr/DroppedFramesRule.js"),j=i("./src/streaming/rules/abr/SwitchHistoryRule.js"),F=i("./src/streaming/rules/abr/BolaRule.js"),D=i("./src/streaming/rules/abr/L2ARule.js"),h=i("./src/streaming/rules/abr/lolp/LoLpRule.js"),u=i("./src/core/FactoryMaker.js"),p=i("./src/streaming/rules/SwitchRequest.js"),_=i("./src/streaming/constants/Constants.js"),b="qualitySwitchRules",k="abandonFragmentRules";function L(O){var H,ee,P=this.context,y=(O=O||{}).mediaPlayerModel,S=O.customParametersModel,E=O.dashMetrics,A=O.settings;function ue(Q){return Q.filter(function(pe){return pe.quality>p.default.NO_CHANGE})}function be(Q){var xe,_e,Ie,Te,ke,pe={},me=null;if(0!==Q.length){for(pe[p.default.PRIORITY.STRONG]={quality:p.default.NO_CHANGE,reason:null},pe[p.default.PRIORITY.WEAK]={quality:p.default.NO_CHANGE,reason:null},pe[p.default.PRIORITY.DEFAULT]={quality:p.default.NO_CHANGE,reason:null},xe=0,_e=Q.length;xe<_e;xe+=1)(Ie=Q[xe]).quality!==p.default.NO_CHANGE&&(pe[Ie.priority].quality===p.default.NO_CHANGE||pe[Ie.priority].quality>Ie.quality)&&(pe[Ie.priority].quality=Ie.quality,pe[Ie.priority].reason=Ie.reason||null);return pe[p.default.PRIORITY.WEAK].quality!==p.default.NO_CHANGE&&(me=pe[p.default.PRIORITY.WEAK]),pe[p.default.PRIORITY.DEFAULT].quality!==p.default.NO_CHANGE&&(me=pe[p.default.PRIORITY.DEFAULT]),pe[p.default.PRIORITY.STRONG].quality!==p.default.NO_CHANGE&&(me=pe[p.default.PRIORITY.STRONG]),me&&(Te=me.quality,ke=me.reason),Object(p.default)(P).create(Te,ke)}}return{initialize:function fe(){H=[],ee=[],A.get().streaming.abr.useDefaultABRRules&&(A.get().streaming.abr.ABRStrategy===_.default.ABR_STRATEGY_L2A?H.push(Object(D.default)(P).create({dashMetrics:E,settings:A})):A.get().streaming.abr.ABRStrategy===_.default.ABR_STRATEGY_LoLP?H.push(Object(h.default)(P).create({dashMetrics:E})):(H.push(Object(F.default)(P).create({dashMetrics:E,mediaPlayerModel:y,settings:A})),H.push(Object(e.default)(P).create({dashMetrics:E})),A.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&H.push(Object(C.default)(P).create({dashMetrics:E,settings:A})),A.get().streaming.abr.additionalAbrRules.switchHistoryRule&&H.push(Object(j.default)(P).create()),A.get().streaming.abr.additionalAbrRules.droppedFramesRule&&H.push(Object(U.default)(P).create()),A.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&ee.push(Object(R.default)(P).create({dashMetrics:E,mediaPlayerModel:y,settings:A})))),S.getAbrCustomRules().forEach(function(pe){pe.type===b&&H.push(pe.rule(P).create()),pe.type===k&&ee.push(pe.rule(P).create())})},reset:function V(){[H,ee].forEach(function(Q){Q&&Q.length&&Q.forEach(function(pe){return pe.reset&&pe.reset()})}),H=[],ee=[]},getMaxQuality:function q(Q){return be(ue(H.map(function(_e){return _e.getMaxIndex(Q)})))||Object(p.default)(P).create()},getMinSwitchRequest:be,shouldAbandonFragment:function se(Q,pe){return be(ue(ee.map(function(Ie){return Ie.shouldAbandon(Q,pe)})))||Object(p.default)(P).create()},getQualitySwitchRules:function de(){return H}}}L.__dashjs_factory_name="ABRRulesCollection";var B=u.default.getClassFactory(L);B.QUALITY_SWITCH_RULES=b,B.ABANDON_FRAGMENT_RULES=k,u.default.updateSingletonFactory(L.__dashjs_factory_name,B),w.default=B},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/rules/SwitchRequest.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/core/Debug.js");function U(j){var k,L,B,O,P,u=this.context,p=(j=j||{}).mediaPlayerModel,_=j.dashMetrics,b=j.settings;function I(){B={},O={},P=[]}return k={shouldAbandon:function A(H){var ee=Object(e.default)(u).create(e.default.NO_CHANGE,{name:U.__dashjs_factory_name});if(!(H&&H.hasOwnProperty("getMediaInfo")&&H.hasOwnProperty("getMediaType")&&H.hasOwnProperty("getCurrentRequest")&&H.hasOwnProperty("getRepresentationInfo")&&H.hasOwnProperty("getAbrController")))return ee;var fe=H.getMediaInfo(),ue=H.getMediaType(),be=H.getStreamInfo(),q=be?be.id:null,se=H.getCurrentRequest();if(!isNaN(se.index)){!function S(H,ee){B[H]=B[H]||{},B[H][ee]=B[H][ee]||{}}(ue,se.index);var V=p.getStableBufferTime();if(_.getCurrentBufferLevel(ue)>V)return ee;var Q=B[ue][se.index];if(null===Q||null===se.firstByteDate||O.hasOwnProperty(Q.id))return ee;if(void 0===Q.firstByteTime&&(P[ue]=[],Q.firstByteTime=se.firstByteDate.getTime(),Q.segmentDuration=se.duration,Q.bytesTotal=se.bytesTotal,Q.id=se.index),Q.bytesLoaded=se.bytesLoaded,Q.elapsedTime=(new Date).getTime()-Q.firstByteTime,Q.bytesLoaded>0&&Q.elapsedTime>0&&function E(H,ee){P[H]=P[H]||[],P[H].push(ee)}(ue,Math.round(8*Q.bytesLoaded/Q.elapsedTime)),P[ue].length>=5&&Q.elapsedTime>500&&Q.bytesLoaded<Q.bytesTotal){var pe=P[ue].reduce(function(Fe,je){return Fe+je},0);if(Q.measuredBandwidthInKbps=Math.round(pe/P[ue].length),Q.estimatedTimeOfDownload=+(8*Q.bytesTotal/Q.measuredBandwidthInKbps/1e3).toFixed(2),Q.estimatedTimeOfDownload<1.8*Q.segmentDuration||0===H.getRepresentationInfo().quality)return ee;if(!O.hasOwnProperty(Q.id)){var me=H.getAbrController(),xe=Q.bytesTotal-Q.bytesLoaded,_e=me.getBitrateList(fe),Ie=me.getQualityForBitrate(fe,Q.measuredBandwidthInKbps*b.get().streaming.abr.bandwidthSafetyFactor,q),Te=me.getMinAllowedIndexFor(ue,q),ke=void 0!==Te?Math.max(Te,Ie):Ie;xe>Q.bytesTotal*_e[ke].bitrate/_e[me.getQualityFor(ue,q)].bitrate&&(ee.quality=ke,ee.reason.throughput=Q.measuredBandwidthInKbps,ee.reason.fragmentID=Q.id,O[Q.id]=Q,L.debug("["+ue+"] frag id",Q.id," is asking to abandon and switch to quality to ",ke," measured bandwidth was",Q.measuredBandwidthInKbps),delete B[ue][Q.id])}}else Q.bytesLoaded===Q.bytesTotal&&delete B[ue][Q.id]}return ee},reset:I},function y(){L=Object(R.default)(u).getInstance().getLogger(k),I()}(),k}U.__dashjs_factory_name="AbandonRequestsRule",w.default=C.default.getClassFactory(U)},"./src/streaming/rules/abr/BolaRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/MetricsConstants.js"),C=i("./src/streaming/rules/SwitchRequest.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/vo/metrics/HTTPRequest.js"),j=i("./src/core/EventBus.js"),F=i("./src/core/events/Events.js"),D=i("./src/core/Debug.js"),h=i("./src/streaming/MediaPlayerEvents.js"),u=i("./src/streaming/constants/Constants.js"),k=10;function O(P){var I,H,ee,y=this.context,S=(P=P||{}).dashMetrics,E=P.mediaPlayerModel,A=Object(j.default)(y).getInstance();function be(ye,ae,W){var ce=W.reduce(function(z,te,X){return te>W[z]?X:z},0);if(0===ce)return null;var De=Math.max(ye,k+2*ae.length),le=(W[ce]-1)/(De/k-1);return{gp:le,Vp:k/le}}function q(ye){var ae={},ce=ye.getMediaInfo().bitrateList.map(function(z){return z.bandwidth}),De=function ue(ye){return ye.map(function(ae){return Math.log(ae)})}(ce);De=De.map(function(z){return z-De[0]+1});var le=E.getStableBufferTime(),ne=be(le,ce,De);return ne?(ae.state=1,ae.bitrates=ce,ae.utilities=De,ae.stableBufferTime=le,ae.Vp=ne.Vp,ae.gp=ne.gp,ae.lastQuality=0,se(ae)):ae.state=0,ae}function se(ye){ye.placeholderBuffer=0,ye.mostAdvancedSegmentStart=NaN,ye.lastSegmentWasReplacement=!1,ye.lastSegmentStart=NaN,ye.lastSegmentDurationS=NaN,ye.lastSegmentRequestTimeMs=NaN,ye.lastSegmentFinishTimeMs=NaN}function V(ye,ae){var W=E.getStableBufferTime();if(ye.stableBufferTime!==W){var ce=be(W,ye.bitrates,ye.utilities);if(ce.Vp!==ye.Vp||ce.gp!==ye.gp){var De=S.getCurrentBufferLevel(ae),le=De+ye.placeholderBuffer;le-=k,le*=ce.Vp/ye.Vp,le+=k,ye.stableBufferTime=W,ye.Vp=ce.Vp,ye.gp=ce.gp,ye.placeholderBuffer=Math.max(0,le-De)}}}function pe(ye,ae){return ye.Vp*(ye.utilities[ae]+ye.gp)}function me(ye,ae){for(var W=ye.bitrates[ae],ce=ye.utilities[ae],De=0,le=ae-1;le>=0;--le)if(ye.utilities[le]<ye.utilities[ae]){var ne=ye.bitrates[le];De=Math.max(De,ye.Vp*(ye.gp+(W*ye.utilities[le]-ne*ce)/(W-ne)))}return De}function _e(ye){var W=ye.mediaType===u.default.AUDIO?[u.default.AUDIO]:ee;for(var ce in W)ee.hasOwnProperty(ce)&&2===ee[ce].state&&(ee[ce].placeholderBuffer=0)}function Ie(){for(var ye in ee)if(ee.hasOwnProperty(ye)){var ae=ee[ye];0!==ae.state&&(ae.state=1,se(ae))}}function Te(ye){if(ye&&ye.chunk&&ye.chunk.mediaInfo){var ae=ee[ye.chunk.mediaInfo.type];if(ae&&0!==ae.state){var W=ye.chunk.start;isNaN(ae.mostAdvancedSegmentStart)||W>ae.mostAdvancedSegmentStart?(ae.mostAdvancedSegmentStart=W,ae.lastSegmentWasReplacement=!1):ae.lastSegmentWasReplacement=!0,ae.lastSegmentStart=W,ae.lastSegmentDurationS=ye.chunk.duration,ae.lastQuality=ye.chunk.quality,Ue(ae,ye.chunk.mediaInfo.type)}}}function ke(ye){if(ye&&ye.metric===e.default.HTTP_REQUEST&&ye.value&&ye.value.type===U.HTTPRequest.MEDIA_SEGMENT_TYPE&&ye.value.trace&&ye.value.trace.length){var ae=ee[ye.mediaType];ae&&0!==ae.state&&(ae.lastSegmentRequestTimeMs=ye.value.trequest.getTime(),ae.lastSegmentFinishTimeMs=ye.value._tfinish.getTime(),Ue(ae,ye.mediaType))}}function Ue(ye,ae){if(!isNaN(ye.lastSegmentStart)&&!isNaN(ye.lastSegmentRequestTimeMs)&&!isNaN(ye.placeholderBuffer)){if(ye.placeholderBuffer*=.99,!isNaN(ye.lastSegmentFinishTimeMs)){var ce=S.getCurrentBufferLevel(ae)+.001*(ye.lastSegmentFinishTimeMs-ye.lastSegmentRequestTimeMs),De=pe(ye,ye.lastQuality),le=Math.max(0,De-ce);ye.placeholderBuffer=Math.min(le,ye.placeholderBuffer)}ye.lastSegmentWasReplacement&&!isNaN(ye.lastSegmentDurationS)&&(ye.placeholderBuffer+=ye.lastSegmentDurationS),ye.lastSegmentStart=NaN,ye.lastSegmentRequestTimeMs=NaN}}function Fe(ye){if(ye){var ae=ee[ye.mediaType];ae&&0!==ae.state&&(ae.abrQuality=ye.newQuality)}}function je(ye){if(ye){var ae=ee[ye.mediaType];if(ae&&0!==ae.state){var ce,W=S.getCurrentBufferLevel(ye.mediaType);ce=ae.abrQuality>0?me(ae,ae.abrQuality):k;var De=Math.max(0,ce-W);ae.placeholderBuffer=Math.min(ae.placeholderBuffer,De)}}}function He(){ee={}}return I={getMaxIndex:function Pe(ye){var ae=Object(C.default)(y).create();if(!(ye&&ye.hasOwnProperty("getMediaInfo")&&ye.hasOwnProperty("getMediaType")&&ye.hasOwnProperty("getScheduleController")&&ye.hasOwnProperty("getStreamInfo")&&ye.hasOwnProperty("getAbrController")&&ye.hasOwnProperty("useBufferOccupancyABR")))return ae;var W=ye.getMediaInfo(),ce=ye.getMediaType(),De=ye.getScheduleController(),le=ye.getStreamInfo(),ne=ye.getAbrController(),z=ne.getThroughputHistory(),te=le?le.id:null,X=le&&le.manifestInfo&&le.manifestInfo.isDynamic,$=ye.useBufferOccupancyABR();if(ae.reason=ae.reason||{},!$)return ae;De.setTimeToLoadDelay(0);var K=function de(ye){var ae=ye.getMediaType(),W=ee[ae];return W?0!==W.state&&V(W,ae):(W=q(ye),ee[ae]=W),W}(ye);if(0===K.state)return ae;var st,oe=S.getCurrentBufferLevel(ce),Ce=z.getAverageThroughput(ce,X),Oe=z.getSafeAverageThroughput(ce,X),Ze=z.getAverageLatency(ce);if(ae.reason.state=K.state,ae.reason.throughput=Ce,ae.reason.latency=Ze,isNaN(Ce))return ae;switch(K.state){case 1:st=ne.getQualityForBitrate(W,Oe,te,Ze),ae.quality=st,ae.reason.throughput=Oe,K.placeholderBuffer=Math.max(0,me(K,st)-oe),K.lastQuality=st,!isNaN(K.lastSegmentDurationS)&&oe>=K.lastSegmentDurationS&&(K.state=2);break;case 2:(function xe(ye,ae){var W=Date.now();isNaN(ye.lastSegmentFinishTimeMs)?isNaN(ye.lastCallTimeMs)||(ye.placeholderBuffer+=Math.max(0,.001*(W-ye.lastCallTimeMs))):ye.placeholderBuffer+=Math.max(0,.001*(W-ye.lastSegmentFinishTimeMs)),ye.lastCallTimeMs=W,ye.lastSegmentStart=NaN,ye.lastSegmentRequestTimeMs=NaN,ye.lastSegmentFinishTimeMs=NaN,V(ye,ae)})(K,ce),st=function Q(ye,ae){for(var W=ye.bitrates.length,ce=NaN,De=NaN,le=0;le<W;++le){var ne=(ye.Vp*(ye.utilities[le]+ye.gp)-ae)/ye.bitrates[le];(isNaN(De)||ne>=De)&&(De=ne,ce=le)}return ce}(K,oe+K.placeholderBuffer);var et=ne.getQualityForBitrate(W,Oe,te,Ze);st>K.lastQuality&&st>et&&(st=Math.max(et,K.lastQuality));var ct=Math.max(0,oe+K.placeholderBuffer-pe(K,st));ct<=K.placeholderBuffer?(K.placeholderBuffer-=ct,ct=0):(ct-=K.placeholderBuffer,K.placeholderBuffer=0,st<ne.getMaxAllowedIndexFor(ce,te)?De.setTimeToLoadDelay(1e3*ct):ct=0),ae.quality=st,ae.reason.throughput=Ce,ae.reason.latency=Ze,ae.reason.bufferLevel=oe,ae.reason.placeholderBuffer=K.placeholderBuffer,ae.reason.delay=ct,K.lastQuality=st;break;default:H.debug("BOLA ABR rule invoked in bad state."),ae.quality=ne.getQualityForBitrate(W,Oe,te,Ze),ae.reason.state=K.state,ae.reason.throughput=Oe,ae.reason.latency=Ze,K.state=1,se(K)}return ae},reset:function Le(){He(),A.off(h.default.BUFFER_EMPTY,_e,I),A.off(h.default.PLAYBACK_SEEKING,Ie,I),A.off(h.default.METRIC_ADDED,ke,I),A.off(h.default.QUALITY_CHANGE_REQUESTED,Fe,I),A.off(h.default.FRAGMENT_LOADING_ABANDONED,je,I),A.off(F.default.MEDIA_FRAGMENT_LOADED,Te,I)}},function fe(){H=Object(D.default)(y).getInstance().getLogger(I),He(),A.on(h.default.BUFFER_EMPTY,_e,I),A.on(h.default.PLAYBACK_SEEKING,Ie,I),A.on(h.default.METRIC_ADDED,ke,I),A.on(h.default.QUALITY_CHANGE_REQUESTED,Fe,I),A.on(h.default.FRAGMENT_LOADING_ABANDONED,je,I),A.on(F.default.MEDIA_FRAGMENT_LOADED,Te,I)}(),I}O.__dashjs_factory_name="BolaRule",w.default=R.default.getClassFactory(O)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/rules/SwitchRequest.js"),R=i("./src/core/Debug.js");function U(){var F,D,j=this.context;return F={getMaxIndex:function _(b){var k=Object(C.default)(j).create();if(!b||!b.hasOwnProperty("getDroppedFramesHistory"))return k;var L=b.getDroppedFramesHistory(),B=b.getStreamInfo().id;if(L){var O=L.getFrameHistory(B);if(!O||0===O.length)return k;for(var P=0,y=0,S=C.default.NO_CHANGE,E=1;E<O.length;E++)if(O[E]&&(P=O[E].droppedVideoFrames,(y=O[E].totalVideoFrames)>375&&P/y>.15)){D.debug("index: "+(S=E-1)+" Dropped Frames: "+P+" Total Frames: "+y);break}return Object(C.default)(j).create(S,{droppedFrames:P})}return k}},function p(){D=Object(R.default)(j).getInstance().getLogger(F)}(),F}U.__dashjs_factory_name="DroppedFramesRule",w.default=e.default.getClassFactory(U)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/core/Debug.js"),j=i("./src/streaming/rules/SwitchRequest.js"),F=i("./src/streaming/constants/Constants.js"),D=i("./src/streaming/constants/MetricsConstants.js"),h=i("./src/streaming/MediaPlayerEvents.js");function u(p){p=p||{};var O,P,y,k=this.context,L=Object(e.default)(k).getInstance(),B=p.dashMetrics;function H(){(y={})[F.default.VIDEO]={ignoreCount:2},y[F.default.AUDIO]={ignoreCount:2}}function ee(){H()}function fe(be){!isNaN(be.startTime)&&(be.mediaType===F.default.AUDIO||be.mediaType===F.default.VIDEO)&&y[be.mediaType].ignoreCount>0&&y[be.mediaType].ignoreCount--}return O={getMaxIndex:function A(be){var q=Object(j.default)(k).create();if(!be||!be.hasOwnProperty("getMediaType"))return q;!function E(){if(!B||!B.hasOwnProperty("getCurrentBufferLevel")||!B.hasOwnProperty("getCurrentBufferState"))throw new Error(F.default.MISSING_CONFIG_ERROR)}();var se=be.getMediaType(),V=B.getCurrentBufferState(se),Q=be.getRepresentationInfo().fragmentDuration,pe=be.getStreamInfo(),me=pe?pe.id:null,xe=be.getScheduleController(),_e=pe&&pe.manifestInfo&&pe.manifestInfo.isDynamic;if(function I(be,q){return!be&&y[q].ignoreCount>0}(xe.getPlaybackController().getLowLatencyModeEnabled(),se)||!Q)return q;if(V&&V.state===D.default.BUFFER_EMPTY)P.debug("["+se+"] Switch to index 0; buffer is empty."),q.quality=0,q.reason="InsufficientBufferRule: Buffer is empty";else{var ke=be.getMediaInfo(),Ue=be.getAbrController(),Fe=Ue.getThroughputHistory(),je=B.getCurrentBufferLevel(se),Pe=Fe.getAverageThroughput(se,_e),He=Fe.getAverageLatency(se);q.quality=Ue.getQualityForBitrate(ke,Pe*(je/Q)*.5,me,He),q.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return q},reset:function ue(){H(),L.off(h.default.PLAYBACK_SEEKING,ee,O),L.off(C.default.BYTES_APPENDED_END_FRAGMENT,fe,O)}},function S(){P=Object(U.default)(k).getInstance().getLogger(O),H(),L.on(h.default.PLAYBACK_SEEKING,ee,O),L.on(C.default.BYTES_APPENDED_END_FRAGMENT,fe,O)}(),O}u.__dashjs_factory_name="InsufficientBufferRule",w.default=R.default.getClassFactory(u)},"./src/streaming/rules/abr/L2ARule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/MetricsConstants.js"),C=i("./src/streaming/rules/SwitchRequest.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/vo/metrics/HTTPRequest.js"),j=i("./src/core/EventBus.js"),F=i("./src/core/events/Events.js"),D=i("./src/core/Debug.js"),h=i("./src/streaming/constants/Constants.js");function b(k){var P,y,S,E,L=this.context,B=(k=k||{}).dashMetrics,O=Object(j.default)(L).getInstance();function I(_e){var Ie={},Te=_e.getMediaInfo(),ke=Te.bitrateList.map(function(Ue){return Ue.bandwidth/1e3});return Ie.state=1,Ie.bitrates=ke,Ie.lastQuality=0,function H(_e){!_e||!_e.type||(S[_e.type]={},S[_e.type].w=[],S[_e.type].prev_w=[],S[_e.type].Q=0,S[_e.type].segment_request_start_s=0,S[_e.type].segment_download_finish_s=0,S[_e.type].B_target=1.5)}(Te),ee(Ie),Ie}function ee(_e){_e.placeholderBuffer=0,_e.mostAdvancedSegmentStart=NaN,_e.lastSegmentWasReplacement=!1,_e.lastSegmentStart=NaN,_e.lastSegmentDurationS=NaN,_e.lastSegmentRequestTimeMs=NaN,_e.lastSegmentFinishTimeMs=NaN}function ue(){for(var _e in y)if(y.hasOwnProperty(_e)){var Ie=y[_e];0!==Ie.state&&(Ie.state=1,ee(Ie))}}function be(_e){if(_e&&_e.chunk&&_e.chunk.mediaInfo){var Ie=y[_e.chunk.mediaInfo.type],Te=S[_e.chunk.mediaInfo.type];if(Ie&&0!==Ie.state){var ke=_e.chunk.start;isNaN(Ie.mostAdvancedSegmentStart)||ke>Ie.mostAdvancedSegmentStart?(Ie.mostAdvancedSegmentStart=ke,Ie.lastSegmentWasReplacement=!1):Ie.lastSegmentWasReplacement=!0,Ie.lastSegmentStart=ke,Ie.lastSegmentDurationS=_e.chunk.duration,Ie.lastQuality=_e.chunk.quality,se(Ie,Te)}}}function q(_e){if(_e&&_e.metric===e.default.HTTP_REQUEST&&_e.value&&_e.value.type===U.HTTPRequest.MEDIA_SEGMENT_TYPE&&_e.value.trace&&_e.value.trace.length){var Ie=y[_e.mediaType],Te=S[_e.mediaType];Ie&&0!==Ie.state&&(Ie.lastSegmentRequestTimeMs=_e.value.trequest.getTime(),Ie.lastSegmentFinishTimeMs=_e.value._tfinish.getTime(),se(Ie,Te))}}function se(_e,Ie){!isNaN(_e.lastSegmentStart)&&!isNaN(_e.lastSegmentRequestTimeMs)&&(Ie.segment_request_start_s=.001*_e.lastSegmentRequestTimeMs,Ie.segment_download_finish_s=.001*_e.lastSegmentFinishTimeMs,_e.lastSegmentStart=NaN,_e.lastSegmentRequestTimeMs=NaN)}function V(_e){if(_e&&_e.mediaType){var Ie=y[_e.mediaType];Ie&&0!==Ie.state&&(Ie.abrQuality=_e.newQuality)}}function de(_e,Ie){if(_e.length!==Ie.length)return-1;for(var Te=0,ke=0;ke<_e.length;ke++)Te+=_e[ke]*Ie[ke];return Te}function me(){y={},S={}}return P={getMaxIndex:function pe(_e){var K,Ie=Object(C.default)(L).create(),ke=Math.pow(4,.99),Ue=Math.max(Math.pow(4,1),ke*Math.sqrt(4)),Fe=_e.getMediaInfo(),je=_e.getMediaType(),Pe=Fe.bitrateList.map(function(Yt){return Yt.bandwidth}),He=Pe.length,Le=_e.getScheduleController(),ye=_e.getStreamInfo(),ae=_e.getAbrController(),W=ae.getThroughputHistory(),ce=ye&&ye.manifestInfo&&ye.manifestInfo.isDynamic,De=_e.useL2AABR(),le=B.getCurrentBufferLevel(je,!0),ne=W.getSafeAverageThroughput(je,ce),z=W.getAverageThroughput(je,ce),X=W.getAverageLatency(je),oe=_e.getVideoModel().getPlaybackRate();if(!(_e&&_e.hasOwnProperty("getMediaInfo")&&_e.hasOwnProperty("getMediaType")&&_e.hasOwnProperty("getScheduleController")&&_e.hasOwnProperty("getStreamInfo")&&_e.hasOwnProperty("getAbrController")&&_e.hasOwnProperty("useL2AABR")&&(Ie.reason=Ie.reason||{},De&&je!==h.default.AUDIO)))return Ie;Le.setTimeToLoadDelay(0);var Ce=function fe(_e){var Ie=_e.getMediaType(),Te=y[Ie];return Te||(Te=I(_e),y[Ie]=Te),Te}(_e);if(0===Ce.state)return Ie;var Oe=S[je];if(!Oe||(Ie.reason.state=Ce.state,Ie.reason.throughput=z,Ie.reason.latency=X,isNaN(z)))return Ie;switch(Ce.state){case 1:if(K=ae.getQualityForBitrate(Fe,ne,ye.id,X),Ie.quality=K,Ie.reason.throughput=ne,Ce.lastQuality=K,!isNaN(Ce.lastSegmentDurationS)&&le>=Oe.B_target){Ce.state=2,Oe.Q=ke;for(var Ze=0;Ze<He;++Ze)Oe.prev_w[Ze]=Ze===Ce.lastQuality?1:0}break;case 2:var st=[],et=B.getCurrentHttpRequest(je).trace.reduce(function(Yt,jt){return Yt+jt.d},0),ct=B.getCurrentHttpRequest(je).trace.reduce(function(Yt,jt){return Yt+jt.b[0]},0),xt=Math.round(8*ct/et);xt<1&&(xt=1);for(var tt=Ce.lastSegmentDurationS,Et=1,Kt=0;Kt<He;++Kt)Pe[Kt]=Pe[Kt]/1e3,oe*Pe[Kt]>xt&&(Et=-1),Oe.w[Kt]=Oe.prev_w[Kt]+Et*(tt/(2*Ue))*((Oe.Q+ke)*(oe*Pe[Kt]/xt));Oe.w=function Q(_e){for(var Ie=_e.length,Te=!1,ke=[],Ue=0;Ue<Ie;++Ue)ke[Ue]=_e[Ue];for(var Fe=_e.sort(function(ae,W){return W-ae}),je=0,Pe=0,He=[],Le=0;Le<Ie-1;++Le)if((Pe=((je+=Fe[Le])-1)/(Le+1))>=Fe[Le+1]){Te=!0;break}Te||(Pe=(je+Fe[Ie-1]-1)/Ie);for(var ye=0;ye<Ie;++ye)He[ye]=Math.max(ke[ye]-Pe,0);return He}(Oe.w);for(var _t=0;_t<He;++_t)st[_t]=Oe.w[_t]-Oe.prev_w[_t],Oe.prev_w[_t]=Oe.w[_t];Oe.Q=Math.max(0,Oe.Q-tt+tt*oe*((de(Pe,Oe.prev_w)+de(Pe,st))/xt));for(var At=[],Pt=0;Pt<He;++Pt)At[Pt]=Math.abs(Pe[Pt]-de(Oe.w,Pe));(K=At.indexOf(Math.min.apply(Math,At)))>Ce.lastQuality&&Pe[Ce.lastQuality+1]<=xt&&(K=Ce.lastQuality+1),Pe[K]>=xt&&(Oe.Q=2*Math.max(ke,Oe.Q)),Ie.quality=K,Ie.reason.throughput=z,Ie.reason.latency=X,Ie.reason.bufferLevel=le,Ce.lastQuality=Ie.quality;break;default:E.debug("L2A ABR rule invoked in bad state."),Ie.quality=ae.getQualityForBitrate(Fe,ne,ye.id,X),Ie.reason.state=Ce.state,Ie.reason.throughput=ne,Ie.reason.latency=X,Ce.state=1,ee(Ce)}return Ie},reset:function xe(){me(),O.off(F.default.PLAYBACK_SEEKING,ue,P),O.off(F.default.MEDIA_FRAGMENT_LOADED,be,P),O.off(F.default.METRIC_ADDED,q,P),O.off(F.default.QUALITY_CHANGE_REQUESTED,V,P)}},function A(){E=Object(D.default)(L).getInstance().getLogger(P),me(),O.on(F.default.PLAYBACK_SEEKING,ue,P),O.on(F.default.MEDIA_FRAGMENT_LOADED,be,P),O.on(F.default.METRIC_ADDED,q,P),O.on(F.default.QUALITY_CHANGE_REQUESTED,V,P)}(),P}b.__dashjs_factory_name="L2ARule",w.default=R.default.getClassFactory(b)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/streaming/rules/SwitchRequest.js");function U(){var F,D,j=this.context;return F={getMaxIndex:function _(b){for(var k=b?b.getSwitchHistory():null,L=k?k.getSwitchRequests():[],B=0,O=0,P=0,y=Object(R.default)(j).create(),S=0;S<L.length;S++)if(void 0!==L[S]&&(P+=L[S].dropSize,(B+=L[S].drops)+(O+=L[S].noDrops)>=6&&B/O>.075)){y.quality=S>0&&L[S].drops>0?S-1:S,y.reason={index:y.quality,drops:B,noDrops:O,dropSize:P},D.debug("Switch history rule index: "+y.quality+" samples: "+(B+O)+" drops: "+B);break}return y}},function p(){D=Object(C.default)(j).getInstance().getLogger(F)}(),F}U.__dashjs_factory_name="SwitchHistoryRule",w.default=e.default.getClassFactory(U)},"./src/streaming/rules/abr/ThroughputRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/rules/SwitchRequest.js"),R=i("./src/streaming/constants/Constants.js"),U=i("./src/streaming/constants/MetricsConstants.js");function j(F){var D=this.context,h=(F=F||{}).dashMetrics;return{getMaxIndex:function b(L){var B=Object(C.default)(D).create();if(!(L&&L.hasOwnProperty("getMediaInfo")&&L.hasOwnProperty("getMediaType")&&L.hasOwnProperty("useBufferOccupancyABR")&&L.hasOwnProperty("getAbrController")&&L.hasOwnProperty("getScheduleController")))return B;!function _(){if(!h||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(R.default.MISSING_CONFIG_ERROR)}();var O=L.getMediaInfo(),P=L.getMediaType(),y=h.getCurrentBufferState(P),S=L.getScheduleController(),E=L.getAbrController(),A=L.getStreamInfo(),I=A?A.id:null,H=A&&A.manifestInfo?A.manifestInfo.isDynamic:null,ee=E.getThroughputHistory(),fe=ee.getSafeAverageThroughput(P,H),ue=ee.getAverageLatency(P),be=L.useBufferOccupancyABR();return isNaN(fe)||!y||be||E.getAbandonmentStateFor(I,P)!==U.default.ABANDON_LOAD&&(y.state===U.default.BUFFER_LOADED||H)&&(B.quality=E.getQualityForBitrate(O,fe,I,ue),S.setTimeToLoadDelay(0),B.reason={throughput:fe,latency:ue}),B},reset:function k(){}}}j.__dashjs_factory_name="ThroughputRule",w.default=e.default.getClassFactory(j)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R_MANUAL="manual_weight_selection",R_RANDOM="random_weight_selection",R_DYNAMIC="dynamic_weight_selection";function U(){var F,D,h,u,p,_,b,k,L,j=this.context;function P(){h=null,u=1,p=100,_=0,b=null,k=null,L=R_DYNAMIC}function y(){var pe=0;if(h)for(var me=0;me<h.length;me++){var xe=h[me];xe.state.throughput>pe&&(pe=xe.state.throughput)}return pe}function E(pe,me,xe){var _e=pe.map(function(Te,ke){return xe[ke]*Math.pow(Te-me[ke],2)}).reduce(function(Te,ke){return Te+ke});return(_e<0?-1:1)*Math.sqrt(Math.abs(_e))}function A(pe,me){return E([pe.state.throughput,pe.state.latency,pe.state.rebuffer,pe.state.switch],[me.state.throughput,me.state.latency,me.state.rebuffer,me.state.switch],[1,1,1,1])}function I(pe,me,xe){for(var _e=0;_e<me.length;_e++){var Ie=me[_e],ke=A(Ie,pe);H(Ie,xe,Math.exp(-1*Math.pow(ke,2)/(2*Math.pow(.1,2))))}}function H(pe,me,xe){var _e=pe.state,Ie=[.01,.01,.01,.01];_e.throughput=_e.throughput+(me[0]-_e.throughput)*Ie[0]*xe,_e.latency=_e.latency+(me[1]-_e.latency)*Ie[1]*xe,_e.rebuffer=_e.rebuffer+(me[2]-_e.rebuffer)*Ie[2]*xe,_e.switch=_e.switch+(me[3]-_e.switch)*Ie[3]*xe}return F={getNextQuality:function fe(pe,me,xe,_e,Ie,Te,ke){var Ue=xe,Fe=_e,je=me,Pe=function V(pe){if(!h){h=[];var me=pe.bitrateList,xe=[];_=me[0].bandwidth,me.forEach(function(Te){xe.push(Te.bandwidth),Te.bandwidth<_&&(_=Te.bandwidth)}),u=function S(pe){var me=pe.map(function(xe){return Math.pow(xe,2)}).reduce(function(xe,_e){return xe+_e});return Math.sqrt(me)}(xe);for(var _e=0;_e<me.length;_e++)h.push({qualityIndex:_e,bitrate:me[_e].bandwidth,state:{throughput:me[_e].bandwidth/u,latency:0,rebuffer:0,switch:0}});k=function Q(pe){var me=[],xe=function de(pe){for(var me=[],xe=0;xe<pe;xe++){var _e=[Math.random()*y(),Math.random(),Math.random(),Math.random()];me.push(_e)}return me}(Math.pow(pe.length,2));me.push(xe[0]);for(var _e=[1,1,1,1],Ie=1;Ie<pe.length;Ie++){for(var Te=null,ke=null,Ue=0;Ue<xe.length;Ue++){for(var Fe=xe[Ue],je=null,Pe=0;Pe<me.length;Pe++){var He=E(Fe,me[Pe],_e);(null===je||He<je)&&(je=He)}(null===ke||je>ke)&&(Te=Fe,ke=je)}me.push(Te)}for(var Le=null,ye=null,ae=0;ae<me.length;ae++){for(var W=0,ce=0;ce<me.length;ce++)ae!==ce&&(W+=E(me[ae],me[ce],_e));(null===Le||W>Le)&&(Le=W,ye=ae)}var De=[];for(De.push(me[ye]),me.splice(ye,1);me.length>0;){for(var le=null,ne=null,z=0;z<me.length;z++){var te=E(De[0],me[z],_e);(null===le||te<le)&&(le=te,ne=z)}De.push(me[ne]),me.splice(ne,1)}return De}(h)}return h}(pe),He=me/u;He>1&&(He=y()),xe/=p,D.debug("getNextQuality called throughput:".concat(He," latency:").concat(xe," bufferSize:").concat(_e," currentQualityIndex:").concat(Te," playbackRate:").concat(Ie));var ce=Pe[Te],De=ce.bitrate*ke.getSegmentDuration()/je,le=Math.max(0,De-Fe);if(Fe-De<ke.getMinBuffer())return D.debug("Buffer is low for bitrate= ".concat(ce.bitrate," downloadTime=").concat(De," currentBuffer=").concat(Fe," rebuffer=").concat(le)),function ee(pe,me){var xe=0,_e=pe;if(h)for(var Ie=0;Ie<h.length;Ie++){var Te=h[Ie];Te.bitrate<pe.bitrate&&Te.bitrate>xe&&me>Te.bitrate&&(xe=Te.bitrate,_e=Te)}return _e}(ce,je).qualityIndex;switch(L){case R_MANUAL:!function ue(){b=[.4,.4,.4,.4]}();break;case R_RANDOM:!function be(pe){b=function se(pe,me){for(var xe=[],_e=Math.sqrt(2/pe),Ie=0;Ie<me;Ie++)xe.push(Math.random()*_e);return b=xe}(pe.length,4)}(Pe);break;default:!function q(pe,me,xe,_e,Ie,Te,ke){b||(b=k[k.length-1]);var Ue=pe.findWeightVector(me,xe,_e,Ie,Te,ke);null!==Ue&&-1!==Ue&&(b=Ue)}(ke,Pe,Ue,Fe,le,je,Ie)}for(var ne=null,z=null,te=null,X=0;X<Pe.length;X++){var $=Pe[X],K=$.state,oe=[K.throughput,K.latency,K.rebuffer,K.switch],Ce=b.slice(),Oe=ke.getNextBufferWithBitrate($.bitrate,Fe,je),Ze=Oe<ke.getMinBuffer();Ze&&D.debug("Buffer is low for bitrate=".concat($.bitrate," downloadTime=").concat(De," currentBuffer=").concat(Fe," nextBuffer=").concat(Oe)),($.bitrate>me-1e4||Ze)&&$.bitrate!==_&&(Ce[0]=100);var st=E(oe,[He,0,0,0],Ce);(null===ne||st<ne)&&(ne=st,z=$.qualityIndex,te=$)}var et=Math.abs(ce.bitrate-te.bitrate)/u;return I(ce,Pe,[He,xe,le,et]),I(te,Pe,[He,0,0,et]),z},reset:function O(){P()}},function B(){D=Object(C.default)(j).getInstance().getLogger(F),P()}(),F}U.__dashjs_factory_name="LearningAbrController",w.default=e.default.getClassFactory(U)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/rules/abr/lolp/QoeInfo.js");function R(){var U,j,F,D,h;function p(){j=null,F=null,D=null,h=null}function b(y,S,E,A){var I=new C.default;return I.type=y,I.weights.bitrateReward=S||1,I.weights.bitrateSwitchPenalty=1,I.weights.rebufferPenalty=E||1e3,I.weights.latencyPenalty=[],I.weights.latencyPenalty.push({threshold:1.1,penalty:.05*A}),I.weights.latencyPenalty.push({threshold:1e8,penalty:.1*E}),I.weights.playbackSpeedPenalty=A||200,I}function L(y,S,E,A,I){I.bitrateWSum+=I.weights.bitrateReward*y,I.lastBitrate&&(I.bitrateSwitchWSum+=I.weights.bitrateSwitchPenalty*Math.abs(y-I.lastBitrate)),I.lastBitrate=y,I.rebufferWSum+=I.weights.rebufferPenalty*S;for(var H=0;H<I.weights.latencyPenalty.length;H++){var ee=I.weights.latencyPenalty[H];if(E<=ee.threshold){I.latencyWSum+=ee.penalty*E;break}}I.playbackSpeedWSum+=I.weights.playbackSpeedPenalty*Math.abs(1-A),I.totalQoe=I.bitrateWSum-I.bitrateSwitchWSum-I.rebufferWSum-I.latencyWSum-I.playbackSpeedWSum}return U={setupPerSegmentQoe:function _(y,S,E){j=b("segment",y,S,E),F=y,D=S,h=E},logSegmentMetrics:function k(y,S,E,A){j&&L(y,S,E,A,j)},getPerSegmentQoe:function B(){return j},calculateSingleUseQoe:function O(y,S,E,A){var I=null;return F&&D&&h&&(I=b("segment",F,D,h)),I?(L(y,S,E,A,I),I.totalQoe):0},reset:function P(){p()}},function u(){p()}(),U}R.__dashjs_factory_name="LoLpQoeEvaluator",w.default=e.default.getClassFactory(R)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/Debug.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/streaming/rules/abr/lolp/LearningAbrController.js"),U=i("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),j=i("./src/streaming/rules/SwitchRequest.js"),F=i("./src/streaming/constants/MetricsConstants.js"),D=i("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),h=i("./src/streaming/constants/Constants.js");function _(b){var B,O,P,y,k=(b=b||{}).dashMetrics,L=this.context;return O={getMaxIndex:function E(H){try{var ee=Object(j.default)(L).create(),fe=H.getMediaInfo().type,ue=H.getAbrController(),be=H.getStreamInfo(),q=ue.getQualityFor(fe,be.id),se=H.getMediaInfo(),V=k.getCurrentBufferState(fe),de=H.getScheduleController(),Q=k.getCurrentBufferLevel(fe,!0),pe=be&&be.manifestInfo?be.manifestInfo.isDynamic:null,me=de.getPlaybackController(),xe=me.getCurrentLiveLatency();if(!H.useLoLPABR()||fe===h.default.AUDIO)return ee;xe||(xe=0);var _e=me.getPlaybackRate(),Te=ue.getThroughputHistory().getSafeAverageThroughput(fe,pe);if(B.debug("Throughput ".concat(Math.round(Te)," kbps")),isNaN(Te)||!V||ue.getAbandonmentStateFor(be.id,fe)===F.default.ABANDON_LOAD)return ee;for(var ke=se.bitrateList,Ue=H.getRepresentationInfo().fragmentDuration,Fe=ke[0].bandwidth/1e3,je=ke[ke.length-1].bandwidth/1e3,Pe=0;Pe<ke.length;Pe++){var He=ke[Pe].bandwidth/1e3;He>je?je=He:He<Fe&&(Fe=He)}var ye=ke[q].bandwidth/1e3,ae=k.getCurrentHttpRequest(fe,!0),W=(ae.tresponse.getTime()-ae.trequest.getTime())/1e3,ce=W>Ue?W-Ue:0;y.setupPerSegmentQoe(Ue,je,Fe),y.logSegmentMetrics(ye,ce,xe,_e);var De=Object(D.default)(L).create({targetLatency:1.5,bufferMin:.3,segmentDuration:Ue,qoeEvaluator:y});return ee.quality=P.getNextQuality(se,1e3*Te,xe,Q,_e,q,De),ee.reason={throughput:Te,latency:xe},ee.priority=j.default.PRIORITY.STRONG,de.setTimeToLoadDelay(0),ee.quality!==q&&console.log("[TgcLearningRule]["+fe+"] requesting switch to index: ",ee.quality,"Average throughput",Math.round(Te),"kbps"),ee}catch(le){throw le}},reset:function I(){!function A(){P.reset(),y.reset()}()}},function S(){B=Object(e.default)(L).getInstance().getLogger(O),P=Object(R.default)(L).create(),y=Object(U.default)(L).create()}(),O}_.__dashjs_factory_name="LoLPRule",w.default=C.default.getClassFactory(_)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(R){var h,_,b,U=R.targetLatency,j=R.bufferMin,F=R.segmentDuration,D=R.qoeEvaluator;function S(){return F}function A(I,H){var ee=S();return H>ee?I-ee:I+ee-H}return h={getMinBuffer:function y(){return j},getSegmentDuration:S,getNextBufferWithBitrate:function E(I,H,ee){return A(H,I*F/ee)},getNextBuffer:A,findWeightVector:function B(I,H,ee,fe,ue,be){var q=null,se=null,V=null,de=Math.abs(H-b);return I.forEach(function(Q){_.forEach(function(pe){var me_latency=pe[1],me_buffer=pe[2],xe=Q.bitrate*F/ue,_e=A(ee,xe),Ie=Math.max(1e-5,xe-_e),Fe=D.calculateSingleUseQoe(Q.bitrate,(0===me_buffer?10:1/me_buffer)*Ie,(0===me_latency?10:1/me_latency)*Q.state.latency,be);(null===q||Fe>q)&&function O(I,H,ee){return!(I>U+ee)&&H>=j}(H,_e,de)&&(q=Fe,se=pe,V=Q.bitrate)})}),null===se&&null===V&&(se=-1),b=H,se}},function k(){!function L(){_=function P(I,H){return function ue(be,q,se){if(se===q)return be;for(var V=be.length,de=0;de<V;de++)for(var Q=be.shift(),pe=0;pe<I.length;pe++)be.push(Q.concat(I[pe]));return ue(be,q,se+1)}(I.map(function(ue){return[ue]}),H,1)}([.2,.4,.6,.8,1],4),b=0}()}(),h}C.__dashjs_factory_name="LoLpWeightSelector",w.default=e.default.getClassFactory(C)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0})},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(){var R=0;function j(b){for(var k="",L=0;L<b.length;++L)k+=b[L].uchar;return k.length-k.replace(/^\s+/,"").length}function F(b){return"left: "+3.125*b.x+"%; top: "+6.66*b.y1+"%; width: "+(100-3.125*b.x)+"%; height: "+6.66*Math.max(b.y2-1-b.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function D(b){return"red"===b?"rgb(255, 0, 0)":"green"===b?"rgb(0, 255, 0)":"blue"===b?"rgb(0, 0, 255)":"cyan"===b?"rgb(0, 255, 255)":"magenta"===b?"rgb(255, 0, 255)":"yellow"===b?"rgb(255, 255, 0)":"white"===b?"rgb(255, 255, 255)":"black"===b?"rgb(0, 0, 0)":b}function h(b,k){var L=b.videoHeight/15;return k?"font-size: "+L+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(k.foreground?D(k.foreground):"rgb(255, 255, 255)")+"; font-style: "+(k.italics?"italic":"normal")+"; text-decoration: "+(k.underline?"underline":"none")+"; white-space: pre; background-color: "+(k.background?D(k.background):"transparent")+";":"font-size: "+L+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function u(b){return b.replace(/^\s+/g,"")}function p(b){return b.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function _(b,k,L,B){var fe,ue,O=null,y=!1,S=-1,E={start:k,end:L,spans:[]},A="style_cea608_white_black",I={},H={},ee=[];for(fe=0;fe<15;++fe){var be=B.rows[fe],q="",se=null;if(!1===be.isEmpty()){var V=j(be.chars);null===O&&(O={x:V,y1:fe,y2:fe+1,p:[]}),V!==S&&y&&(O.p.push(E),E={start:k,end:L,spans:[]},O.y2=fe,O.name="region_"+O.x+"_"+O.y1+"_"+O.y2,!1===I.hasOwnProperty(O.name)?(ee.push(O),I[O.name]=O):I[O.name].p.contat(O.p),O={x:V,y1:fe,y2:fe+1,p:[]});for(var de=0;de<be.chars.length;++de){var Q=be.chars[de],pe=Q.penState;if(null===se||!pe.equals(se)){q.trim().length>0&&(E.spans.push({name:A,line:q,row:fe}),q="");var me="style_cea608_"+pe.foreground+"_"+pe.background;pe.underline&&(me+="_underline"),pe.italics&&(me+="_italics"),H.hasOwnProperty(me)||(H[me]=JSON.parse(JSON.stringify(pe))),se=pe,A=me}q+=Q.uchar}q.trim().length>0&&E.spans.push({name:A,line:q,row:fe}),y=!0,S=V}else y=!1,S=-1,O&&(O.p.push(E),E={start:k,end:L,spans:[]},O.y2=fe,O.name="region_"+O.x+"_"+O.y1+"_"+O.y2,!1===I.hasOwnProperty(O.name)?(ee.push(O),I[O.name]=O):I[O.name].p.contat(O.p),O=null)}O&&(O.p.push(E),O.y2=fe+1,O.name="region_"+O.x+"_"+O.y1+"_"+O.y2,!1===I.hasOwnProperty(O.name)?(ee.push(O),I[O.name]=O):I[O.name].p.contat(O.p),O=null);var xe=[];for(fe=0;fe<ee.length;++fe){var _e=ee[fe],Ie="sub_cea608_"+R++,Te=document.createElement("div");Te.id=Ie;var ke=F(_e);Te.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ke;var Ue=document.createElement("div");Ue.className="paragraph bodyStyle",Ue.style.cssText=h(b);var Fe=document.createElement("div");Fe.className="cueUniWrapper",Fe.style.cssText="unicode-bidi: normal; direction: ltr;";for(var je=0;je<_e.p.length;++je){var Pe=_e.p[je],He=0;for(ue=0;ue<Pe.spans.length;++ue){var Le=Pe.spans[ue];if(Le.line.length>0){if(0!==ue&&He!=Le.row){var ye=document.createElement("br");ye.className="lineBreak",Fe.appendChild(ye)}var ae=!1;He===Le.row&&(ae=!0),He=Le.row;var W=H[Le.name],ce=document.createElement("span");ce.className="spanPadding "+Le.name+" customSpanColor",ce.style.cssText=h(b,W),ce.textContent=0!==ue&&ae?ue===Pe.spans.length-1?p(Le.line):Le.line:Pe.spans.length>1&&ue<Pe.spans.length-1&&Le.row===Pe.spans[ue+1].row?u(Le.line):Le.line.trim(),Fe.appendChild(ce)}}}Ue.appendChild(Fe),Te.appendChild(Ue);var De={bodyStyle:["%",90]};for(var le in H)H.hasOwnProperty(le)&&(De[le]=["%",90]);xe.push({type:"html",start:k,end:L,cueHTMLElement:Te,cueID:Ie,cellResolution:[32,15],isFromCEA608:!0,fontSize:De,lineHeight:{},linePadding:{}})}return xe}}}C.__dashjs_factory_name="EmbeddedTextHtmlRender",w.default=e.default.getSingletonFactory(C)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/utils/InitCache.js"),j=i("./src/streaming/SourceBufferSink.js"),F=i("./src/streaming/vo/DashJSError.js"),D=i("./src/core/errors/Errors.js"),h="NotFragmentedTextBufferController";function u(p){p=p||{};var P,y,S,E,A,I,_=this.context,b=Object(e.default)(_).getInstance(),k=p.textController,L=p.errHandler,B=p.streamInfo,O=p.type;function V(z){E=z}function xe(z){y!==z&&(y=z)&&function ne(z,te){b.trigger(z,te||{},{streamId:B.id,mediaType:O})}(C.default.BUFFERING_COMPLETED)}function Te(z){!z.chunk.bytes||y||(I.save(z.chunk),A.append(z.chunk),xe(!0))}return P={initialize:function fe(z){V(z)},getStreamId:function be(){return B.id},getType:function q(){return O},getBufferControllerType:function ee(){return h},createBufferSink:function ue(z){return new Promise(function(te,X){try{(A=Object(j.default)(_).create({mediaSource:E,textController:k,eventBus:b})).initializeForFirstUse(B,z),S||(A.getBuffer()&&"function"==typeof A.getBuffer().initialize&&A.getBuffer().initialize(),S=!0),te(A)}catch($){L.error(new F.default(D.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,D.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+O)),X($)}})},getBuffer:function se(){return A},getBufferLevel:function pe(){return 0},getRangeAt:function ke(){return null},pruneBuffer:function He(){},hasBufferAtTime:function Ue(){return!0},getAllRangesWithSafetyFactor:function Fe(){return[]},getContinuousBufferTimeForTargetTime:function je(){return Number.POSITIVE_INFINITY},setMediaSource:V,getMediaSource:function de(){return E},appendInitSegmentFromCache:function Ie(z){return null!==I.extract(B.id,z)},getIsBufferingCompleted:function me(){return y},setIsBufferingCompleted:xe,getIsPruningInProgress:function Q(){return!1},reset:function _e(z){b.off(C.default.INIT_FRAGMENT_LOADED,Te,P),!z&&A&&(A.abort(),A.reset(),A=null)},clearBuffers:function Pe(){return Promise.resolve()},prepareForPlaybackSeek:function ye(){return Promise.resolve()},prepareForReplacementTrackSwitch:function ae(){return y=!1,Promise.resolve()},setSeekTarget:function ce(){},updateAppendWindow:function W(){return Promise.resolve()},pruneAllSafely:function le(){return Promise.resolve()},updateBufferTimestampOffset:function Le(){return Promise.resolve()},segmentRequestingCompleted:function De(){}},function H(){S=!1,E=null,y=!1,I=Object(U.default)(_).getInstance(),b.on(C.default.INIT_FRAGMENT_LOADED,Te,P)}(),P}u.__dashjs_factory_name=h,w.default=R.default.getClassFactory(u)},"./src/streaming/text/TextController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/FactoryMaker.js"),R=i("./src/streaming/text/TextSourceBuffer.js"),U=i("./src/streaming/text/TextTracks.js"),j=i("./src/streaming/utils/VTTParser.js"),F=i("./src/streaming/utils/VttCustomRenderingParser.js"),D=i("./src/streaming/utils/TTMLParser.js"),h=i("./src/core/EventBus.js"),u=i("./src/core/events/Events.js"),p=i("./src/streaming/MediaPlayerEvents.js"),_=i("./src/streaming/utils/SupervisorTools.js");function b(k){var A,I,H,ee,fe,ue,be,q,se,V,de,Q,L=this.context,B=k.adapter,O=k.errHandler,P=k.manifestModel,y=k.mediaController,S=k.videoModel,E=k.settings;function Fe(te){var X=te.tracks,$=te.index,K=te.streamId;if(!1===E.get().streaming.text.defaultEnabled&&!Le()||Q)ae(K,-1);else{var Ce=y.getCurrentTrackFor(e.default.TEXT,K);if(Ce){var Oe={lang:Ce.lang,role:Ce.roles[0],index:Ce.index,codec:Ce.codec,accessibility:Ce.accessibility[0]};X.some(function(Ze,st){if(y.matchSettings(Oe,Ze))return ae(K,st),$=st,!0})}se=!1}I[K].lastEnabledIndex=$,q.trigger(p.default.TEXT_TRACKS_ADDED,{enabled:Le(),index:$,tracks:X,streamId:K}),de=!0}function je(te){try{var X=te.streamId;if(!ee[X]||isNaN(te.time))return;ee[X].manualCueProcessing(te.time)}catch($){}}function Pe(te){try{var X=te.streamId;if(!ee[X])return;ee[X].disableManualTracks()}catch($){}}function Le(){var te=!0;return se&&!V&&(te=!1),te}function ae(te,X){(se=-1===X)&&y&&y.saveTextSettingsDisabled();var $=De(te);if($!==X&&ee[te]){ee[te].disableManualTracks(),ee[te].setModeForTrackIdx($,e.default.TEXT_HIDDEN),ee[te].setCurrentTrackIdx(X),ee[te].setModeForTrackIdx(X,e.default.TEXT_SHOWING);var K=ee[te].getCurrentTrackInfo();K&&K.isFragmented&&!K.isEmbedded?function W(te,X,$){if(H[te])for(var oe=H[te].getConfig().fragmentedTracks,Ce=0;Ce<oe.length;Ce++){var Oe=oe[Ce];if(X.lang===Oe.lang&&(Oe.id?X.id===Oe.id:X.index===Oe.index)){var Ze=y.getCurrentTrackFor(e.default.TEXT,te);(Oe.id?Ze.id!==Oe.id:Ze.index!==Oe.index)?(ee[te].deleteCuesFromTrackIdx($),H[te].setCurrentFragmentedTrackIdx(Ce)):-1===$&&q.trigger(u.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:te,mediaType:e.default.TEXT})}}}(te,K,$):K&&!K.isFragmented&&function ce(te,X){q.trigger(u.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:X},{streamId:te,mediaType:e.default.TEXT})}(te,K),y.setTrack(K)}}function De(te){return ee[te].getCurrentTrackIdx()}function ne(){H={},ee={},I={},se=!0,de=!1,Q=!1}return A={deactivateStream:function le(te){if(te){var X=te.id;H[X]&&H[X].resetMediaInfos(),ee[X]&&ee[X].deleteAllTextTracks()}},initialize:function me(){q.on(u.default.TEXT_TRACKS_QUEUE_INITIALIZED,Fe,A),E.get().streaming.text.webvtt.customRenderingEnabled&&(q.on(u.default.PLAYBACK_TIME_UPDATED,je,A),q.on(u.default.PLAYBACK_SEEKING,Pe,A))},initializeForStream:function xe(te){var X=te.id,$=Object(U.default)(L).create({videoModel:S,settings:E,streamInfo:te});$.initialize(),ee[X]=$;var K=Object(R.default)(L).create({errHandler:O,adapter:B,manifestModel:P,mediaController:y,videoModel:S,textTracks:$,vttParser:fe,vttCustomRenderingParser:ue,ttmlParser:be,streamInfo:te,settings:E});K.initialize(),H[X]=K,I[X]={},I[X].lastEnabledIndex=-1},createTracks:function _e(te){var X=te.id;!ee[X]||ee[X].createTracks()},getTextSourceBuffer:function Te(te){var X=te.id;if(H&&H[X])return H[X]},getAllTracksAreDisabled:function ke(){return se},addEmbeddedTrack:function Ue(te,X){var $=te.id;!H[$]||H[$].addEmbeddedTrack(X)},enableText:function He(te,X){Object(_.checkParameterType)(X,"boolean"),Le()!==X&&(X&&ae(te,I[te].lastEnabledIndex),X||(I[te].lastEnabledIndex=De(te),de?ae(te,-1):Q=!0))},isTextEnabled:Le,setTextTrack:ae,getCurrentTrackIdx:De,enableForcedTextStreaming:function ye(te){Object(_.checkParameterType)(te,"boolean"),V=te},addMediaInfosToBuffer:function Ie(te,X,$){var oe=te.id;!H[oe]||H[oe].addMediaInfos(X,$,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null)},reset:function z(){ne(),q.off(u.default.TEXT_TRACKS_QUEUE_INITIALIZED,Fe,A),E.get().streaming.text.webvtt.customRenderingEnabled&&(q.off(u.default.PLAYBACK_TIME_UPDATED,je,A),q.off(u.default.PLAYBACK_SEEKING,Pe,A)),Object.keys(H).forEach(function(te){H[te].resetEmbedded(),H[te].reset()})}},function pe(){V=!1,de=!1,Q=!1,fe=Object(j.default)(L).getInstance(),ue=Object(F.default)(L).getInstance(),be=Object(D.default)(L).getInstance(),q=Object(h.default)(L).getInstance(),ne()}(),A}b.__dashjs_factory_name="TextController",w.default=C.default.getClassFactory(b)},"./src/streaming/text/TextSourceBuffer.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/vo/metrics/HTTPRequest.js"),R=i("./src/streaming/vo/TextTrackInfo.js"),U=i("./src/streaming/utils/BoxParser.js"),j=i("./src/streaming/utils/CustomTimeRanges.js"),F=i("./src/core/FactoryMaker.js"),D=i("./src/core/Debug.js"),h=i("./src/streaming/text/EmbeddedTextHtmlRender.js"),u=i("./node_modules/codem-isoboxer/dist/iso_boxer.js"),p=i.n(u),_=i("./externals/cea608-parser.js"),b=i.n(_),k=i("./src/core/EventBus.js"),L=i("./src/core/events/Events.js"),B=i("./src/streaming/vo/DashJSError.js"),O=i("./src/core/errors/Errors.js");function P(y){var Q,pe,me,xe,_e,Ie,Te,ke,Ue,Fe,je,Pe,He,Le,ye,ae,S=y.errHandler,E=y.manifestModel,A=y.mediaController,I=y.videoModel,H=y.textTracks,ee=y.vttParser,fe=y.vttCustomRenderingParser,ue=y.ttmlParser,be=y.streamInfo,q=y.settings,se=this.context,V=Object(k.default)(se).getInstance(),de=!1;function le(){(function De(){Ie=null,ke=NaN,Ue=[],Fe=null,Te=!1})(),_e=[],xe=null}function te(it){var Qe=new R.default;for(var Ft in it)Qe[Ft]=it[Ft];Qe.labels=it.labels,Qe.defaultTrack=function an(it){var Qe=!1;return Pe.length>1&&it.isEmbedded?Qe=it.id&&it.id===e.default.CC1:1===Pe.length?it.id&&"string"==typeof it.id&&"CC"===it.id.substring(0,2)&&(Qe=!0):0===Pe.length&&(Qe=it.index===_e[0].index),Qe}(it),Qe.isFragmented=it.isFragmented,Qe.isEmbedded=!!it.isEmbedded,Qe.isTTML=function et(it){return it.codec&&it.codec.search(e.default.STPP)>=0||it.mimeType&&it.mimeType.search(e.default.TTML)>=0}(it),Qe.kind=function ct(it,Qe){var mt=it.roles&&it.roles.length>0?Qe[it.roles[0]]:Qe.caption;return mt===Qe.caption||mt===Qe.subtitle?mt:Qe.caption}(it,{subtitle:"subtitles",caption:"captions"}),H.addTextTrack(Qe)}function K(it){var Qe=it.chunk;Qe.mediaInfo.embeddedCaptions&&xt(Qe.bytes,Qe)}function st(it){je=it}function xt(it,Qe){var mt=Qe.mediaInfo,Ft=mt.type,Wt=mt.codec||mt.mimeType;Wt?-1!==mt.codec.indexOf("application/mp4")?function tt(it,Qe,mt){var Ft;if("InitializationSegment"===Qe.segmentType)Te=!0,ke=me.getMediaTimescaleFromMoov(it);else{if(!Te)return;(Ft=me.getSamplesInfo(it).sampleList).length>0&&(Fe=Ft[0].cts-Qe.start*ke),mt.search(e.default.STPP)>=0?function Et(it,Qe,mt){var Ft,tn;for(xe=null!==xe?xe:Ln(mt),Ft=0;Ft<Qe.length;Ft++){var Wt=Qe[Ft],vt=Wt.cts,pt=en(),rt=pt+vt/ke;Q.buffered.add(rt,rt+Wt.duration/ke);var yt=new DataView(it,Wt.offset,Wt.subSizes[0]),Zt=p.a.Utils.dataViewToString(yt,e.default.UTF8),Jt=[],on=Wt.offset+Wt.subSizes[0];for(tn=1;tn<Wt.subSizes.length;tn++){var pn=new Uint8Array(it,on,Wt.subSizes[tn]),Mn=String.fromCharCode.apply(null,pn);Jt.push(Mn),on+=Wt.subSizes[tn]}try{var Wn=E.getValue(),gr=xe.parse(Zt,Wn.ttmlTimeIsRelative?vt/ke:0,vt/ke,(vt+Wt.duration)/ke,Jt);H.addCaptions(je,pt,gr)}catch(Ir){Ie.removeExecutedRequestsBeforeTime(),this.remove(),pe.error("TTML parser error: "+Ir.message)}}}(it,Ft,mt):function Kt(it,Qe){var mt,Ft,tn,Wt=[];for(mt=0;mt<Qe.length;mt++){var vt=Qe[mt];vt.cts-=Fe;var rt=en()+vt.cts/ke;Q.buffered.add(rt,rt+vt.duration/ke);var yt=it.slice(vt.offset,vt.offset+vt.size),Zt=p.a.parseBuffer(yt);for(Ft=0;Ft<Zt.boxes.length;Ft++){var Jt=Zt.boxes[Ft];if(pe.debug("VTT box1: "+Jt.type),"vtte"!==Jt.type&&"vttc"===Jt.type)for(pe.debug("VTT vttc boxes.length = "+Jt.boxes.length),tn=0;tn<Jt.boxes.length;tn++){var on=Jt.boxes[tn];if(pe.debug("VTT box2: "+on.type),"payl"===on.type){var pn=on.cue_text;pe.debug("VTT cue_text = "+pn);var Mn=vt.cts/ke,Wn=(vt.cts+vt.duration)/ke;Wt.push({start:Mn,end:Wn,data:pn,styles:{}}),pe.debug("VTT "+Mn+"-"+Wn+" : "+pn)}}}}Wt.length>0&&H.addCaptions(je,0,Wt)}(it,Ft)}}(it,Qe,Wt):Ft===e.default.VIDEO?function At(it,Qe){var mt,Ft;if(Qe.segmentType===C.HTTPRequest.INIT_SEGMENT_TYPE)0===He&&(He=me.getMediaTimescaleFromMoov(it));else if(Qe.segmentType===C.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===He)return void pe.warn("CEA-608: No timescale for embeddedTextTrack yet");var tn=(Ft=me.getSamplesInfo(it)).lastSequenceNumber;if(!ye[0]&&!ye[1]&&function Pt(){for(var it,Qe=0;Qe<Pe.length;Qe++){if(-1===(it=H.getTrackIdxForId(Pe[Qe].id)))return void pe.warn("CEA-608: data before track is ready.");var mt=Yt(it);ye[Qe]=new b.a.Cea608Parser(Qe+1,{newCue:mt},null)}}(),He){if(null!==Le&&tn!==Le+Ft.numSequences)for(mt=0;mt<ye.length;mt++)ye[mt]&&ye[mt].reset();for(var Wt=function jt(it,Qe){if(0===Qe.length)return null;for(var mt={splits:[],fields:[[],[]]},Ft=new DataView(it),tn=0;tn<Qe.length;tn++)for(var Wt=Qe[tn],vt=b.a.findCea608Nalus(Ft,Wt.offset,Wt.size),pt=null,rt=0,Xe=0;Xe<vt.length;Xe++)for(var yt=b.a.extractCea608DataFromRange(Ft,vt[Xe]),Zt=0;Zt<2;Zt++)if(yt[Zt].length>0){Wt.cts!==pt?rt=0:rt+=1;var Jt=en();mt.fields[Zt].push([Wt.cts+Jt*He,yt[Zt],rt]),pt=Wt.cts}return mt.fields.forEach(function(pn){pn.sort(function(Mn,Wn){return Mn[0]===Wn[0]?Mn[2]-Wn[2]:Mn[0]-Wn[0]})}),mt}(it,Ft.sampleList),vt=0;vt<ye.length;vt++){var pt=Wt.fields[vt],rt=ye[vt];if(rt)for(mt=0;mt<pt.length;mt++)rt.addData(pt[mt][0]/He,pt[mt][1])}Le=tn}}}(it,Qe):function _t(it,Qe,mt){var Ft,tn,Wt=new DataView(it,0,it.byteLength);tn=p.a.Utils.dataViewToString(Wt,e.default.UTF8);try{Ft=Ln(mt).parse(tn,0),H.addCaptions(H.getCurrentTrackIdx(),0,Ft),Q.buffered&&Q.buffered.add(Qe.start,Qe.end)}catch(vt){S.error(new B.default(O.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,O.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+vt.message,tn))}}(it,Qe,Wt):pe.error("No text type defined")}function Yt(it){return function Qe(mt,Ft,tn){var Wt;(Wt=I.getTTMLRenderingDiv()?ae.createHTMLCaptionsFromScreen(I.getElement(),mt,Ft,tn):[{start:mt,end:Ft,data:tn.getDisplayText(),styles:{}}])&&H.addCaptions(it,0,Wt)}}function en(){return isNaN(Q.timestampOffset)?0:Q.timestampOffset}function Ln(it){var Qe;return it.search(e.default.VTT)>=0?Qe=q.get().streaming.text.webvtt.customRenderingEnabled&&fe?fe:ee:(it.search(e.default.TTML)>=0||it.search(e.default.STPP)>=0)&&(Qe=ue),Qe}function Vn(it){Pe.forEach(function(Qe){var mt=H.getTrackIdxForId(Qe.id);mt>=0&&H.deleteCuesFromTrackIdx(mt,it.from,it.to)})}return Q={initialize:function ne(){de||function oe(){Pe=[],je=null,He=0,ye=[],Le=null,de=!0,ae=Object(h.default)(se).getInstance(),V.on(L.default.VIDEO_CHUNK_RECEIVED,K,Q),V.on(L.default.BUFFER_CLEARED,Vn,Q)}()},addMediaInfos:function z(it,Qe,mt){if(_e=_e.concat(Qe),it===e.default.TEXT&&Qe[0].isFragmented&&!Qe[0].isEmbedded){Ie=mt,Q.buffered=Object(j.default)(se).create(),Ue=A.getTracksFor(e.default.TEXT,be.id).filter(function(vt){return vt.isFragmented});for(var Ft=A.getCurrentTrackFor(e.default.TEXT,be.id),tn=0;tn<Ue.length;tn++)if(Ue[tn]===Ft){st(tn);break}}for(var Wt=0;Wt<Qe.length;Wt++)te(Qe[Wt])},resetMediaInfos:function Hn(){_e=[]},getStreamId:function ce(){return be.id},append:xt,abort:function X(){},addEmbeddedTrack:function Oe(it){if(de&&it)if(it.id===e.default.CC1||it.id===e.default.CC3){for(var Qe=0;Qe<Pe.length;Qe++)if(Pe[Qe].id===it.id)return;Pe.push(it)}else pe.warn("Embedded track "+it.id+" not supported!")},resetEmbedded:function Ce(){V.off(L.default.VIDEO_CHUNK_RECEIVED,K,Q),V.off(L.default.BUFFER_CLEARED,Vn,Q),H&&H.deleteAllTextTracks(),de=!1,Pe=[],ye=[null,null],Le=null},getConfig:function Ze(){return{fragmentModel:Ie,fragmentedTracks:Ue,videoModel:I}},setCurrentFragmentedTrackIdx:st,remove:function wn(it,Qe){void 0===it&&it===Qe&&(it=Q.buffered.start(0),Qe=Q.buffered.end(Q.buffered.length-1)),Q.buffered.remove(it,Qe),H.deleteCuesFromTrackIdx(je,it,Qe)},reset:function $(){le(),_e=[],me=null}},function W(){pe=Object(D.default)(se).getInstance().getLogger(Q),me=Object(U.default)(se).getInstance(),le()}(),Q}P.__dashjs_factory_name="TextSourceBuffer",w.default=F.default.getClassFactory(P)},"./src/streaming/text/TextTracks.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/core/EventBus.js"),R=i("./src/core/events/Events.js"),U=i("./src/streaming/MediaPlayerEvents.js"),j=i("./src/core/FactoryMaker.js"),F=i("./src/core/Debug.js"),D=i("./node_modules/imsc/src/main/js/main.js");function u(k,L){var B="undefined"!=typeof Symbol&&k[Symbol.iterator]||k["@@iterator"];if(!B){if(Array.isArray(k)||(B=function p(k,L){if(k){if("string"==typeof k)return _(k,L);var B=Object.prototype.toString.call(k).slice(8,-1);if("Object"===B&&k.constructor&&(B=k.constructor.name),"Map"===B||"Set"===B)return Array.from(k);if("Arguments"===B||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B))return _(k,L)}}(k))||L&&k&&"number"==typeof k.length){B&&(k=B);var O=0,P=function(){};return{s:P,n:function(){return O>=k.length?{done:!0}:{done:!1,value:k[O++]}},e:function(I){throw I},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var E,y=!0,S=!1;return{s:function(){B=B.call(k)},n:function(){var I=B.next();return y=I.done,I},e:function(I){S=!0,E=I},f:function(){try{!y&&null!=B.return&&B.return()}finally{if(S)throw E}}}}function _(k,L){(null==L||L>k.length)&&(L=k.length);for(var B=0,O=new Array(L);B<L;B++)O[B]=k[B];return O}function b(k){var S,E,A,I,H,ee,fe,ue,be,q,se,V,de,Q,pe,me,xe,_e,L=this.context,B=Object(C.default)(L).getInstance(),O=k.videoModel,P=k.streamInfo,y=k.settings;function Ue(_t){return O.addTextTrack(_t.kind,void 0!==_t.id?_t.id:_t.lang,_t.lang,_t.isTTML,_t.isEmbedded)}function Pe(_t,At,Pt,Yt,jt,en){var wn=0,Vn=0;_t/At>Pt/Yt?wn=(Vn=At)/Yt*Pt:Vn=(wn=_t)/Pt*Yt;var Hn,it,Qe=0,mt=0;return wn/Vn>jt?(mt=Vn,Qe=Vn*jt):(Qe=wn,mt=wn/jt),Hn=(_t-Qe)/2,it=(At-mt)/2,en?{x:Hn+.1*Qe,y:it+.1*mt,w:.8*Qe,h:.8*mt}:{x:Hn,y:it,w:Qe,h:mt}}function He(_t,At){var Pt=O.getClientWidth(),Yt=O.getClientHeight(),jt=O.getVideoWidth(),en=O.getVideoHeight(),an=O.getVideoRelativeOffsetTop(),Ln=O.getVideoRelativeOffsetLeft();if(0!==jt&&0!==en){var wn=jt/en,Vn=!1;_t.isFromCEA608&&(wn=3.5/3,Vn=!0);var Hn=Pe.call(this,Pt,Yt,jt,en,wn,Vn),it=Hn.w,Qe=Hn.h,mt=Hn.x,Ft=Hn.y;if(it!=be||Qe!=q||mt!=fe||Ft!=ue||At){if(fe=mt+Ln,ue=Ft+an,be=it,q=Qe,se){var tn=se.style;tn&&(tn.left=fe+"px",tn.top=ue+"px",tn.width=be+"px",tn.height=q+"px",tn.zIndex=Q&&document[Q]||pe?xe:null,B.trigger(U.default.CAPTION_CONTAINER_RESIZE))}var Wt=_t.activeCues;if(Wt)for(var vt=Wt.length,pt=0;pt<vt;++pt){var rt=Wt[pt];rt.scaleCue(rt)}}}}function Le(_t){var Yt,jt,en,an,Ln;if(_t.cellResolution){var wn=[be/_t.cellResolution[0],q/_t.cellResolution[1]];if(_t.linePadding)for(Yt in _t.linePadding)if(_t.linePadding.hasOwnProperty(Yt)){jt=(_t.linePadding[Yt]*wn[0]).toString();for(var Hn=document.getElementsByClassName("spanPadding"),it=0;it<Hn.length;it++)Hn[it].style.cssText=Hn[it].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+jt),Hn[it].style.cssText=Hn[it].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+jt)}if(_t.fontSize){for(Yt in _t.fontSize)if(_t.fontSize.hasOwnProperty(Yt)){"%"===_t.fontSize[Yt][0]?en=_t.fontSize[Yt][1]/100:"c"===_t.fontSize[Yt][0]&&(en=_t.fontSize[Yt][1]),jt=(en*wn[1]).toString(),Ln="defaultFontSize"!==Yt?document.getElementsByClassName(Yt):document.getElementsByClassName("paragraph");for(var Qe=0;Qe<Ln.length;Qe++)Ln[Qe].style.cssText=Ln[Qe].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+jt)}if(_t.lineHeight)for(Yt in _t.lineHeight)if(_t.lineHeight.hasOwnProperty(Yt)){"%"===_t.lineHeight[Yt][0]?an=_t.lineHeight[Yt][1]/100:"c"===_t.fontSize[Yt][0]&&(an=_t.lineHeight[Yt][1]),jt=(an*wn[1]).toString(),Ln=document.getElementsByClassName(Yt);for(var mt=0;mt<Ln.length;mt++)Ln[mt].style.cssText=Ln[mt].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+jt)}}}if(_t.isd){var Ft=document.getElementById(_t.cueID);Ft&&se.removeChild(Ft),ye(_t)}}function ye(_t){if(se){var At=document.createElement("div");se.appendChild(At),me=Object(D.renderHTML)(_t.isd,At,function(Pt){var Yt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,jt=/^#(.*)$/;if(Yt.test(Pt)){var en=Yt.exec(Pt),an=parseInt(en[4],10)-1;return"data:image/png;base64,"+btoa(_t.images[an])}if(jt.test(Pt)){var Vn=jt.exec(Pt);return"data:image/png;base64,"+_t.embeddedImages[Vn[1]]}return null},se.clientHeight,se.clientWidth,!1,function(Pt){E.info("renderCaption :",Pt)},me,!0),At.id=_t.cueID,B.trigger(U.default.CAPTION_RENDERED,{captionDiv:At,currentTrackIdx:ee})}}function ae(_t,At,Pt){var Yt=z(_t);if(Yt&&Array.isArray(Pt)&&0!==Pt.length)for(var jt=0;jt<Pt.length;jt++){var en=void 0,an=Pt[jt];Yt.cellResolution=an.cellResolution,Yt.isFromCEA608=an.isFromCEA608,!isNaN(an.start)&&!isNaN(an.end)&&(en="html"===an.type&&se?W(an,At,Yt):an.data?ce(an,At,Yt):null);try{en?oe(Yt,en)||(y.get().streaming.text.webvtt.customRenderingEnabled?(Yt.manualCueList||(Yt.manualCueList=[]),Yt.manualCueList.push(en)):Yt.addCue(en)):E.error("impossible to display subtitles.")}catch(Ln){throw Oe(Yt),Yt.addCue(en),Ln}}}function W(_t,At,Pt){var Yt=this,jt=new A(_t.start+At,_t.end+At,"");return jt.cueHTMLElement=_t.cueHTMLElement,jt.isd=_t.isd,jt.images=_t.images,jt.embeddedImages=_t.embeddedImages,jt.cueID=_t.cueID,jt.scaleCue=Le.bind(Yt),jt.cellResolution=_t.cellResolution,jt.lineHeight=_t.lineHeight,jt.linePadding=_t.linePadding,jt.fontSize=_t.fontSize,se.style.left=fe+"px",se.style.top=ue+"px",se.style.width=be+"px",se.style.height=q+"px",jt.onenter=function(){Pt.mode===e.default.TEXT_SHOWING&&(this.isd?(ye(this),E.debug("Cue enter id:"+this.cueID)):(se.appendChild(this.cueHTMLElement),Le.call(Yt,this),B.trigger(U.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:ee})))},jt.onexit=function(){if(se)for(var en=se.childNodes,an=0;an<en.length;++an)en[an].id===this.cueID&&(E.debug("Cue exit id:"+en[an].id),se.removeChild(en[an]),--an)},jt}function ce(_t,At,Pt){var Yt=new A(_t.start-At,_t.end-At,_t.data);if(Yt.cueID="".concat(Yt.startTime,"_").concat(Yt.endTime),Yt.isActive=!1,_t.styles)try{void 0!==_t.styles.align&&"align"in Yt&&(Yt.align=_t.styles.align),void 0!==_t.styles.line&&"line"in Yt&&(Yt.line=_t.styles.line),void 0!==_t.styles.position&&"position"in Yt&&(Yt.position=_t.styles.position),void 0!==_t.styles.size&&"size"in Yt&&(Yt.size=_t.styles.size)}catch(jt){E.error(jt)}return Yt.onenter=function(){Pt.mode===e.default.TEXT_SHOWING&&B.trigger(U.default.CAPTION_RENDERED,{currentTrackIdx:ee})},Yt}function ne(){var Yt,At=[],Pt=u(O.getTextTracks());try{for(Pt.s();!(Yt=Pt.n()).done;){var jt=Yt.value;jt.manualMode===e.default.TEXT_SHOWING&&At.push(jt)}}catch(en){Pt.e(en)}finally{Pt.f()}return At}function z(_t){return _t>=0&&I[_t]?O.getTextTrack(I[_t].kind,I[_t].id,I[_t].lang,I[_t].isTTML,I[_t].isEmbedded):null}function $(_t){var At=this;if(_t!==ee){var Pt=z(ee=_t);K.call(this,Pt),de&&(clearInterval(de),de=null),Pt&&"html"===Pt.renderingType&&(He.call(this,Pt,!0),window.ResizeObserver?(_e=new window.ResizeObserver(function(){He.call(At,Pt,!0)})).observe(O.getElement()):de=setInterval(He.bind(this,Pt),500))}}function K(_t){tt.call(this),_t&&"html"===_t.renderingType?ct.call(this):xt.call(this)}function oe(_t,At){if(!_t.cues)return!1;for(var Pt=0;Pt<_t.cues.length;Pt++)if(_t.cues[Pt].startTime===At.startTime&&_t.cues[Pt].endTime===At.endTime)return!0;return!1}function Ce(_t,At,Pt){var Yt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return(isNaN(At)||(Yt?_t.startTime:_t.endTime)>=At)&&(isNaN(Pt)||(Yt?_t.endTime:_t.startTime)<=Pt)}function Oe(_t,At,Pt){var Yt=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(_t.cues)for(var jt=_t.cues,an=jt.length-1;an>=0;an--)Ce(jt[an],At,Pt,Yt)&&(jt[an].onexit&&jt[an].onexit(),_t.removeCue(jt[an]))}function ct(){var _t=document.getElementById("native-cue-style");if(!_t){(_t=document.createElement("style")).id="native-cue-style",document.head.appendChild(_t);var At=_t.sheet,Pt=O.getElement();try{Pt&&At.insertRule(Pt.id?"#"+Pt.id+"::cue {background: transparent}":0!==Pt.classList.length?"."+Pt.className+"::cue {background: transparent}":"video::cue {background: transparent}",0)}catch(Yt){E.info(""+Yt.message)}}}function xt(){var _t=document.getElementById("native-cue-style");_t&&document.head.removeChild(_t)}function tt(){if(se)for(;se.firstChild;)se.removeChild(se.firstChild)}return S={initialize:function Te(){"undefined"==typeof window||"undefined"==typeof navigator||(A=window.VTTCue||window.TextTrackCue,I=[],H=[],ee=-1,fe=0,ue=0,be=0,q=0,se=null,V=null,de=null,pe=!1,xe=2147483647,me=null,void 0!==document.fullscreenElement?Q="fullscreenElement":void 0!==document.webkitIsFullScreen?Q="webkitIsFullScreen":document.msFullscreenElement?Q="msFullscreenElement":document.mozFullScreen&&(Q="mozFullScreen"))},getStreamId:function ke(){return P.id},addTextTrack:function Fe(_t){I.push(_t)},addCaptions:ae,createTracks:function je(){I.sort(function(Ln,wn){return Ln.index-wn.index}),se=O.getTTMLRenderingDiv(),V=O.getVttRenderingDiv();for(var _t=-1,At=0;At<I.length;At++){var Pt=Ue(I[At]);H.push(Pt),I[At].defaultTrack&&(Pt.default=!0,_t=At);var Yt=z(At);Yt&&(Yt.mode=e.default.TEXT_SHOWING,Yt.renderingType=se&&(I[At].isTTML||I[At].isEmbedded)?"html":"default"),ae(At,0,I[At].captionData),B.trigger(U.default.TEXT_TRACK_ADDED)}if($.call(this,_t),_t>=0){B.on(U.default.PLAYBACK_METADATA_LOADED,function Ln(){var wn=z(_t);wn&&"html"===wn.renderingType&&He.call(this,wn,!0),B.off(U.default.PLAYBACK_METADATA_LOADED,Ln,this)},this);for(var en=0;en<I.length;en++){var an=z(en);an&&(an.mode=en===_t?e.default.TEXT_SHOWING:e.default.TEXT_HIDDEN,an.manualMode=en===_t?e.default.TEXT_SHOWING:e.default.TEXT_HIDDEN)}}B.trigger(R.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:ee,tracks:I,streamId:P.id})},getCurrentTrackIdx:function te(){return ee},setCurrentTrackIdx:$,getTrackIdxForId:function X(_t){for(var At=-1,Pt=0;Pt<I.length;Pt++)if(I[Pt].id===_t){At=Pt;break}return At},getCurrentTrackInfo:function Kt(){return I[ee]},setModeForTrackIdx:function Et(_t,At){var Pt=z(_t);Pt&&Pt.mode!==At&&(Pt.mode=At),Pt&&Pt.manualMode!==At&&(Pt.manualMode=At)},deleteCuesFromTrackIdx:function Ze(_t,At,Pt){var Yt=z(_t);Yt&&Oe(Yt,At,Pt)},deleteAllTextTracks:function st(){for(var _t=H?H.length:0,At=0;At<_t;At++){var Pt=z(At);Pt&&Oe.call(this,Pt,P.start,P.start+P.duration,!1)}H=[],I=[],de&&(clearInterval(de),de=null),_e&&O&&(_e.unobserve(O.getElement()),_e=null),ee=-1,tt.call(this)},deleteTextTrack:function et(_t){O.removeChild(H[_t]),H.splice(_t,1)},manualCueProcessing:function De(_t){var At=ne();if(At&&At.length>0){var Yt=At[0].manualCueList;Yt&&Yt.length>0&&Yt.forEach(function(jt){if(jt.startTime<=_t&&jt.endTime>=_t&&!jt.isActive)jt.isActive=!0,WebVTT.processCues(window,[jt],V,jt.cueID);else if(jt.isActive&&(jt.startTime>_t||jt.endTime<_t)&&(jt.isActive=!1,V))for(var en=V.childNodes,an=0;an<en.length;++an)en[an].id===jt.cueID&&(V.removeChild(en[an]),--an)})}},disableManualTracks:function le(){var _t=ne();if(_t&&_t.length>0){var Pt=_t[0].manualCueList;Pt&&Pt.length>0&&Pt.forEach(function(Yt){if(Yt.isActive&&(Yt.isActive=!1,V))for(var jt=V.childNodes,en=0;en<jt.length;++en)jt[en].id===Yt.cueID&&(V.removeChild(jt[en]),--en)})}}},function Ie(){E=Object(F.default)(L).getInstance().getLogger(S)}(),S}b.__dashjs_factory_name="TextTracks",w.default=j.default.getClassFactory(b)},"./src/streaming/thumbnail/ThumbnailController.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/constants/Constants.js"),R=i("./src/streaming/vo/Thumbnail.js"),U=i("./src/streaming/thumbnail/ThumbnailTracks.js"),j=i("./src/streaming/vo/BitrateInfo.js"),F=i("./src/dash/utils/SegmentsUtils.js");function D(h){var _,b,u=this.context,p=h.streamInfo;function y(I){b.setTrackByIndex(I)}function A(){b&&b.reset()}return _={getStreamId:function B(){return p.id},initialize:function L(){b.addTracks();var I=b.getTracks();I&&I.length>0&&y(0)},provide:function O(I,H){if("function"==typeof H){var ue,ee=b.getCurrentTrack();if(!ee||ee.segmentDuration<=0||null==I)return void H(null);(ue=b.getThumbnailRequestForTime(I))&&(ee.segmentDuration=ue.duration);var be=Math.floor(I%ee.segmentDuration*ee.tilesHor*ee.tilesVert/ee.segmentDuration),q=new R.default;if(q.width=Math.floor(ee.widthPerTile),q.height=Math.floor(ee.heightPerTile),q.x=Math.floor(be%ee.tilesHor)*ee.widthPerTile,q.y=Math.floor(be/ee.tilesHor)*ee.heightPerTile,"readThumbnail"in ee)return ee.readThumbnail(I,function(V){q.url=V,H(q)});if(ue)q.url=ue.url,ee.segmentDuration=NaN;else{var se=Math.floor(I/ee.segmentDuration);q.url=function P(I,H){var ee=H+I.startNumber,fe=Object(F.replaceTokenForTemplate)(I.templateUrl,"Number",ee);return fe=Object(F.replaceTokenForTemplate)(fe,"Time",(ee-1)*I.segmentDuration*I.timescale),fe=Object(F.replaceTokenForTemplate)(fe,"Bandwidth",I.bandwidth),Object(F.unescapeDollarsInTemplate)(fe)}(ee,se)}H(q)}},setTrackByIndex:y,getCurrentTrackIndex:function S(){return b.getCurrentTrackIndex()},getBitrateList:function E(){var I=b.getTracks(),H=0;return I.map(function(ee){var fe=new j.default;return fe.mediaType=C.default.IMAGE,fe.qualityIndex=H++,fe.bitrate=ee.bitrate,fe.width=ee.width,fe.height=ee.height,fe})},reset:A},function k(){A(),b=Object(U.default)(u).create({streamInfo:p,adapter:h.adapter,baseURLController:h.baseURLController,timelineConverter:h.timelineConverter,debug:h.debug,eventBus:h.eventBus,events:h.events,dashConstants:h.dashConstants,dashMetrics:h.dashMetrics,segmentBaseController:h.segmentBaseController})}(),_}D.__dashjs_factory_name="ThumbnailController",w.default=e.default.getClassFactory(D)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"THUMBNAILS_SCHEME_ID_URIS",function(){return _});var e=i("./src/streaming/constants/Constants.js"),C=i("./src/dash/constants/DashConstants.js"),R=i("./src/core/FactoryMaker.js"),U=i("./src/streaming/vo/ThumbnailTrackInfo.js"),j=i("./src/streaming/utils/URLUtils.js"),F=i("./src/dash/utils/SegmentsUtils.js"),D=i("./src/streaming/utils/BoxParser.js"),h=i("./src/streaming/net/XHRLoader.js"),u=i("./src/dash/DashHandler.js"),p=i("./src/dash/controllers/SegmentsController.js"),_=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function b(k){var ee,fe,ue,be,q,se,V,de,L=this.context,B=k.adapter,O=k.baseURLController,P=k.streamInfo,y=k.timelineConverter,S=k.debug,E=k.eventBus,A=k.events,I=k.dashConstants,H=Object(j.default)(L).getInstance();function me(He,Le){var ye=new U.default;ye.id=He.id,ye.bitrate=He.bandwidth,ye.width=He.width,ye.height=He.height,ye.tilesHor=1,ye.tilesVert=1,He.essentialProperties&&He.essentialProperties.forEach(function(ae){if(_.indexOf(ae.schemeIdUri)>=0&&ae.value){var W=ae.value.split("x");2===W.length&&!isNaN(W[0])&&!isNaN(W[1])&&(ye.tilesHor=parseInt(W[0],10),ye.tilesVert=parseInt(W[1],10))}}),Le?se.updateSegmentData(He).then(function(ae){!function xe(He,Le,ye){var ae=[],W=function _e(He,Le){var W,ce,De,le,ye=[],ae=0;for(W=0,ce=He.segments.length;W<ce;W++)De=He.segments[W],(le=Object(F.getTimeBasedSegment)(y,B.getIsDynamic(),Le,De.startTime,De.duration,De.timescale,De.media,De.mediaRange,ae))&&(ye.push(le),le=null,ae++);return ye}(ye,Le);Le.segments=W,He.segmentDuration=Le.segments[0].duration,He.readThumbnail=function(ce,De){var le=null;ae.some(function(ne){if(ne.start<=ce&&ne.end>ce)return le=ne.url,!0}),le?De(le):Le.segments.some(function(ne){if(ne.mediaStartTime<=ce&&ne.mediaStartTime+ne.duration>ce){var z=O.resolve(Le.path);return V.load({method:"get",url:z.url,request:{range:ne.mediaRange,responseType:"arraybuffer"},onload:function(X){var $=de.getSamplesInfo(X.target.response),K=new Blob([X.target.response.slice($.sampleList[0].offset,$.sampleList[0].offset+$.sampleList[0].size)],{type:"image/jpeg"}),oe=window.URL.createObjectURL(K);ae.push({start:ne.mediaStartTime,end:ne.mediaStartTime+ne.duration,url:oe}),De&&De(oe)}}),!0}})}}(ye,He,ae)}):(ye.startNumber=He.startNumber,ye.segmentDuration=He.segmentDuration,ye.timescale=He.timescale,ye.templateUrl=function Ie(He){var Le=H.isRelative(He.media)?H.resolve(He.media,O.resolve(He.path).url):He.media;return Le?Object(F.replaceIDForTemplate)(Le,He.id):""}(He)),ye.tilesHor>0&&ye.tilesVert>0&&(ye.widthPerTile=ye.width/ye.tilesHor,ye.heightPerTile=ye.height/ye.tilesVert,fe.push(ye))}function Pe(){fe=[],be=-1,q=null}return ee={getTracks:function Te(){return fe},addTracks:function pe(){if(P&&B&&(q=B.getMediaInfoForType(P,e.default.IMAGE))){var He=B.getVoRepresentations(q);He&&He.length>0&&He.forEach(function(Le){(Le.segmentInfoType===C.default.SEGMENT_TEMPLATE&&Le.segmentDuration>0&&Le.media||Le.segmentInfoType===C.default.SEGMENT_TIMELINE)&&me(Le),Le.segmentInfoType===C.default.SEGMENT_BASE&&me(Le,!0)}),fe.length>0&&fe.sort(function(Le,ye){return Le.bitrate-ye.bitrate})}},reset:Pe,setTrackByIndex:function Fe(He){!fe||0===fe.length||(He>=fe.length&&(He=fe.length-1),be=He)},getCurrentTrack:function Ue(){return be<0?null:fe[be]},getCurrentTrackIndex:function ke(){return be},getThumbnailRequestForTime:function je(He){for(var Le,ye=B.getVoRepresentations(q),ae=0;ae<ye.length;ae++)if(fe[be].id===ye[ae].id){Le=ye[ae];break}return ue.getSegmentRequestForTime(q,Le,He)}},function Q(){Pe(),V=Object(h.default)(L).create({}),de=Object(D.default)(L).getInstance(),se=Object(p.default)(L).create({events:A,eventBus:E,streamInfo:P,timelineConverter:y,dashConstants:I,dashMetrics:k.dashMetrics,segmentBaseController:k.segmentBaseController,type:e.default.IMAGE}),(ue=Object(u.default)(L).create({streamInfo:P,type:e.default.IMAGE,timelineConverter:y,segmentsController:se,baseURLController:O,debug:S,eventBus:E,events:A,dashConstants:I,urlUtils:H})).initialize(!!B&&B.getIsDynamic())}(),ee}b.__dashjs_factory_name="ThumbnailTracks",w.default=R.default.getClassFactory(b)},"./src/streaming/utils/BaseURLSelector.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/errors/Errors.js"),C=i("./src/core/EventBus.js"),R=i("./src/core/events/Events.js"),U=i("./src/streaming/controllers/BlacklistController.js"),j=i("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),F=i("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),D=i("./src/core/FactoryMaker.js"),h=i("./src/streaming/vo/DashJSError.js"),u=i("./src/streaming/utils/SupervisorTools.js"),p=i("./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js"),_=i("./src/core/Settings.js");function b(){var O,P,y,S,E,A,k=this.context,L=Object(C.default)(k).getInstance(),B=Object(_.default)(k).getInstance();function ue(){P.reset()}return O={chooseSelector:function ee(be){Object(u.checkParameterType)(be,"boolean"),A=be?S:y},select:function fe(be){if(be){if(B.get().streaming.applyContentSteering){var q=E.selectBaseUrlIndex(be);!isNaN(q)&&-1!==q&&(be.selectedIdx=q)}if(!isNaN(be.selectedIdx))return be.baseUrls[be.selectedIdx];var se=A.select(be.baseUrls);return se?(be.selectedIdx=be.baseUrls.indexOf(se),se):(L.trigger(R.default.URL_RESOLUTION_FAILED,{error:new h.default(e.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,e.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(A===y&&ue()))}},reset:ue,setConfig:function H(be){be.selector&&(A=be.selector),be.contentSteeringSelector&&(E=be.contentSteeringSelector)}},function I(){P=Object(U.default)(k).create({updateEventName:R.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:R.default.SERVICE_LOCATION_BLACKLIST_ADD}),y=Object(F.default)(k).create({blacklistController:P}),S=Object(j.default)(k).create({blacklistController:P}),(E=Object(p.default)(k).create()).setConfig({blacklistController:P}),A=y}(),O}b.__dashjs_factory_name="BaseURLSelector",w.default=D.default.getClassFactory(b)},"./src/streaming/utils/BoxParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/Debug.js"),C=i("./src/streaming/utils/IsoFile.js"),R=i("./src/core/FactoryMaker.js"),U=i("./node_modules/codem-isoboxer/dist/iso_boxer.js"),j=i.n(U),F=i("./src/streaming/vo/IsoBoxSearchInfo.js");function D(){var h,u,p=this.context;function b(E){if(!E)return null;void 0===E.fileStart&&(E.fileStart=0);var A=j.a.parseBuffer(E),I=Object(C.default)(p).create();return I.setData(A),I}function O(E,A){return E[A+3]>>>0|E[A+2]<<8>>>0|E[A+1]<<16>>>0|E[A]<<24>>>0}function P(E,A){return String.fromCharCode(E[A++])+String.fromCharCode(E[A++])+String.fromCharCode(E[A++])+String.fromCharCode(E[A])}return u={parse:b,findLastTopIsoBoxCompleted:function k(E,A,I){if(void 0===I&&(I=0),!A||I+8>=A.byteLength)return new F.default(0,!1);for(var ee,H=A instanceof ArrayBuffer?new Uint8Array(A):A,fe=0;I<H.byteLength;){var ue=O(H,I),be=P(H,I+4);if(0===ue)break;I+ue<=H.byteLength&&(E.indexOf(be)>=0?ee=new F.default(I,!0,ue):fe=I+ue),I+=ue}return ee||new F.default(fe,!1)},getMediaTimescaleFromMoov:function B(E){var A=b(E),I=A?A.getBox("mdhd"):void 0;return I?I.timescale:NaN},getSamplesInfo:function L(E){if(!E||0===E.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var ee,ue,be,q,se,V,de,Q,pe,me,xe,_e,Ie,Te,ke,Ue,A=b(E),I=A.getBoxes("moof"),H=A.getBoxes("mfhd");ke=A.getBoxes("moof").length,Te=H[H.length-1].sequence_number,ue=0,se=[];var Fe=-1,je=-1;for(me=0;me<I.length;me++){var Pe=I[me],He=Pe.getChildBoxes("traf");for(Q=0;Q<He.length;Q++){var Le=He[Q],ye=Le.getChildBox("tfhd"),ae=Le.getChildBox("tfdt");q=ae.baseMediaDecodeTime;var W=Le.getChildBoxes("trun"),ce=Le.getChildBoxes("subs");for(pe=0;pe<W.length;pe++){var De=W[pe];for(ue=De.sample_count,Ie=(ye.base_data_offset||0)+(De.data_offset||0),de=0;de<ue;de++){var le={dts:q,cts:q+(void 0!==(V=De.samples[de]).sample_composition_time_offset?V.sample_composition_time_offset:0),duration:ee=void 0!==V.sample_duration?V.sample_duration:ye.default_sample_duration,offset:Pe.offset+Ie,size:be=void 0!==V.sample_size?V.sample_size:ye.default_sample_size,subSizes:[be]};if(ce)for(xe=0;xe<ce.length;xe++){var ne=ce[xe];if(Fe<ne.entry_count-1&&de>je&&(Fe++,je+=ne.entries[Fe].sample_delta),de==je){le.subSizes=[];var z=ne.entries[Fe];for(_e=0;_e<z.subsample_count;_e++)le.subSizes.push(z.subsamples[_e].subsample_size)}}se.push(le),Ie+=be,q+=ee}}Ue=q-ae.baseMediaDecodeTime}}return{sampleList:se,lastSequenceNumber:Te,totalDuration:Ue,numSequences:ke}},findInitRange:function y(E){var A=null,ee=b(E);if(!ee)return A;var fe=ee.getBox("ftyp"),ue=ee.getBox("moov");return h.debug("Searching for initialization."),ue&&ue.isComplete&&h.debug("Found the initialization.  Range: "+(A=(fe?fe.offset:ue.offset)+"-"+(ue.offset+ue.size-1))),A},parsePayload:function S(E,A,I){if(void 0===I&&(I=0),!A||I+8>=A.byteLength)return new F.default(0,!1);for(var ee,H=A instanceof ArrayBuffer?new Uint8Array(A):A,fe=0;I<H.byteLength;){var ue=O(H,I),be=P(H,I+4);if(0===ue)break;I+ue<=H.byteLength&&(E.indexOf(be)>=0?ee=new F.default(I,!0,ue,be):fe=I+ue),I+=ue}return ee||new F.default(fe,!1)}},function _(){h=Object(e.default)(p).getInstance().getLogger(u)}(),u}D.__dashjs_factory_name="BoxParser",w.default=R.default.getSingletonFactory(D)},"./src/streaming/utils/Capabilities.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"supportsMediaSource",function(){return j});var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/thumbnail/ThumbnailTracks.js"),R=i("./src/streaming/constants/Constants.js"),U=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function j(){var D="WebKitMediaSource"in window,h="MediaSource"in window;return D||h}function F(){var D,h,u;return D={setConfig:function _(E){!E||E.settings&&(h=E.settings)},supportsMediaSource:j,supportsEncryptedMedia:function b(){return u},supportsCodec:function L(E,A){return A!==R.default.AUDIO&&A!==R.default.VIDEO?Promise.resolve(!0):function B(E,A){return h.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(E.codec&&A===R.default.AUDIO||A===R.default.VIDEO&&E.codec&&E.width&&E.height&&E.bitrate&&E.framerate)}(E,A)?function P(E,A){return new Promise(function(I){if(E&&E.codec){var H={type:"media-source"};H[A]={},H[A].contentType=E.codec,H[A].width=E.width,H[A].height=E.height,H[A].bitrate=parseInt(E.bitrate),H[A].framerate=parseFloat(E.framerate),navigator.mediaCapabilities.decodingInfo(H).then(function(ee){I(ee.supported)}).catch(function(){I(!1)})}else I(!1)})}(E,A):function O(E){return new Promise(function(A){if(E&&E.codec){var I=E.codec;E.width&&E.height&&(I+=';width="'+E.width+'";height="'+E.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(I)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(I)?A(!0):A(!1)}else A(!1)})}(E)},setEncryptedMediaSupported:function k(E){u=E},supportsEssentialProperty:function y(E){try{return-1!==C.THUMBNAILS_SCHEME_ID_URIS.indexOf(E.schemeIdUri)}catch(A){return!0}},codecRootCompatibleWithCodec:function S(E,A){for(var ee,I=E.split(".")[0],H=0===A.indexOf(I),fe=0;fe<U.length;fe++)if(U[fe].codec===I){ee=U[fe];break}return ee?H||ee.compatibleCodecs.some(function(ue){return 0===A.indexOf(ue)}):H}},function p(){u=!1}(),D}F.__dashjs_factory_name="Capabilities",w.default=e.default.getSingletonFactory(F)},"./src/streaming/utils/CapabilitiesFilter.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/streaming/constants/Constants.js"),U=i("./src/core/EventBus.js"),j=i("./src/core/events/Events.js");function F(){var u,p,_,b,k,L,D=this.context,h=Object(U.default)(D).getInstance();function y(ue,be){if(!be||!be.Period_asArray||0===be.Period_asArray.length)return Promise.resolve();var q=[];return be.Period_asArray.forEach(function(se){q.push(function S(ue,be){return new Promise(function(q){if(ue&&ue.AdaptationSet_asArray&&0!==ue.AdaptationSet_asArray.length){var se=[];ue.AdaptationSet_asArray.forEach(function(V){p.getIsTypeOf(V,be)&&se.push(function E(ue,be){return new Promise(function(q){if(ue.Representation_asArray&&0!==ue.Representation_asArray.length){var se=[],V=[];ue.Representation_asArray.forEach(function(de,Q){var pe=p.getCodec(ue,Q,!1),me=function A(ue,be,q){switch(ue){case R.default.VIDEO:return function I(ue,be){return{codec:be,width:ue.width||null,height:ue.height||null,framerate:ue.frameRate||null,bitrate:ue.bandwidth||null}}(be,q);case R.default.AUDIO:return function H(ue,be){return{codec:be,bitrate:ue.bandwidth||null,samplerate:ue.audioSamplingRate||null}}(be,q);default:return null}}(be,de,pe);V.push(me),se.push(_.supportsCodec(me,be))}),Promise.all(se).then(function(de){ue.Representation_asArray=ue.Representation_asArray.filter(function(Q,pe){return de[pe]||L.debug("[Stream] Codec ".concat(V[pe].codec," not supported ")),de[pe]}),q()}).catch(function(){q()})}else q()})}(V,be))}),Promise.all(se).then(function(){ue.AdaptationSet_asArray=ue.AdaptationSet_asArray.filter(function(V){var de=V.Representation_asArray&&V.Representation_asArray.length>0;return de||(h.trigger(j.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:V}),L.warn("AdaptationSet has been removed because of no supported Representation")),de}),q()}).catch(function(){q()})}else q()})}(se,ue))}),Promise.all(q)}return u={setConfig:function O(ue){!ue||(ue.adapter&&(p=ue.adapter),ue.capabilities&&(_=ue.capabilities),ue.settings&&(b=ue.settings),ue.customParametersModel&&(k=ue.customParametersModel))},filterUnsupportedFeatures:function P(ue){return new Promise(function(be){var q=[];q.push(y(R.default.VIDEO,ue)),q.push(y(R.default.AUDIO,ue)),Promise.all(q).then(function(){b.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function ee(ue){!ue||!ue.Period_asArray||0===ue.Period_asArray.length||ue.Period_asArray.forEach(function(be){be.AdaptationSet_asArray=be.AdaptationSet_asArray.filter(function(q){return!q.Representation_asArray||0===q.Representation_asArray.length||(q.Representation_asArray=q.Representation_asArray.filter(function(se){var V=p.getEssentialPropertiesForRepresentation(se);if(V&&V.length>0)for(var de=0;de<V.length;){if(!_.supportsEssentialProperty(V[de]))return L.debug("[Stream] EssentialProperty not supported: "+V[de].schemeIdUri),!1;de+=1}return!0}),q.Representation_asArray&&q.Representation_asArray.length>0)})})}(ue),function fe(ue){var be=k.getCustomCapabilitiesFilters();!be||0===be.length||!ue||!ue.Period_asArray||0===ue.Period_asArray.length||ue.Period_asArray.forEach(function(q){q.AdaptationSet_asArray=q.AdaptationSet_asArray.filter(function(se){return!se.Representation_asArray||0===se.Representation_asArray.length||(se.Representation_asArray=se.Representation_asArray.filter(function(V){return!be.some(function(de){return!de(V)})}),se.Representation_asArray&&se.Representation_asArray.length>0)})})}(ue),be()}).catch(function(){be()})})}},function B(){L=Object(C.default)(D).getInstance().getLogger(u)}(),u}F.__dashjs_factory_name="CapabilitiesFilter",w.default=e.default.getSingletonFactory(F)},"./src/streaming/utils/CustomTimeRanges.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/utils/SupervisorTools.js");function R(){return{customTimeRangeArray:[],length:0,add:function F(b,k){var L=0;for(L=0;L<this.customTimeRangeArray.length&&b>this.customTimeRangeArray[L].start;L++);for(this.customTimeRangeArray.splice(L,0,{start:b,end:k}),L=0;L<this.customTimeRangeArray.length-1;L++)this.mergeRanges(L,L+1)&&L--;this.length=this.customTimeRangeArray.length},clear:function D(){this.customTimeRangeArray=[],this.length=0},remove:function h(b,k){for(var L=0;L<this.customTimeRangeArray.length;L++)if(b<=this.customTimeRangeArray[L].start&&k>=this.customTimeRangeArray[L].end)this.customTimeRangeArray.splice(L,1),L--;else{if(b>this.customTimeRangeArray[L].start&&k<this.customTimeRangeArray[L].end){this.customTimeRangeArray.splice(L+1,0,{start:k,end:this.customTimeRangeArray[L].end}),this.customTimeRangeArray[L].end=b;break}b>this.customTimeRangeArray[L].start&&b<this.customTimeRangeArray[L].end?this.customTimeRangeArray[L].end=b:k>this.customTimeRangeArray[L].start&&k<this.customTimeRangeArray[L].end&&(this.customTimeRangeArray[L].start=k)}this.length=this.customTimeRangeArray.length},mergeRanges:function u(b,k){var L=this.customTimeRangeArray[b],B=this.customTimeRangeArray[k];return L.start<=B.start&&B.start<=L.end&&L.end<=B.end?(L.end=B.end,this.customTimeRangeArray.splice(k,1),!0):B.start<=L.start&&L.start<=B.end&&B.end<=L.end?(L.start=B.start,this.customTimeRangeArray.splice(k,1),!0):B.start<=L.start&&L.start<=B.end&&L.end<=B.end?(this.customTimeRangeArray.splice(b,1),!0):L.start<=B.start&&B.start<=L.end&&B.end<=L.end&&(this.customTimeRangeArray.splice(k,1),!0)},start:function p(b){return Object(C.checkInteger)(b),b>=this.customTimeRangeArray.length||b<0?NaN:this.customTimeRangeArray[b].start},end:function _(b){return Object(C.checkInteger)(b),b>=this.customTimeRangeArray.length||b<0?NaN:this.customTimeRangeArray[b].end}}}R.__dashjs_factory_name="CustomTimeRanges",w.default=e.default.getClassFactory(R)},"./src/streaming/utils/DOMStorage.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/streaming/constants/Constants.js"),U=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],j="dashjs_?_bitrate",F="dashjs_?_settings",D="localStorage",u="lastBitrate",p="lastMediaSettings";function _(k){var O,P,y,L=this.context,B=(k=k||{}).settings;function E(se){if(void 0!==y)return y;y=!1;var Q;try{"undefined"!=typeof window&&(Q=window[se])}catch(pe){return P.warn("DOMStorage access denied: "+pe.message),y}if(!Q||se!==D&&"sessionStorage"!==se)return y;try{Q.setItem("1","1"),Q.removeItem("1"),y=!0}catch(pe){P.warn("DOMStorage is supported, but cannot be used: "+pe.message)}return y}function I(){return 6e5*Math.round((new Date).getTime()/6e5)}function H(se,V){return E(se)&&B.get().streaming[V+"CachingInfo"].enabled}function ee(){if(!B)throw new Error(R.default.MISSING_CONFIG_ERROR)}return O={getSavedBitrateSettings:function ue(se){if(ee(),!B.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var V=NaN;if(H(D,u)){var de=j.replace(/\?/,se);try{var Q=JSON.parse(localStorage.getItem(de))||{},pe=(new Date).getTime()-parseInt(Q.timestamp,10)>=B.get().streaming.lastBitrateCachingInfo.ttl||!1,me=parseFloat(Q.bitrate);isNaN(me)||pe?pe&&localStorage.removeItem(de):(V=me,P.debug("Last saved bitrate for "+se+" was "+me))}catch(xe){return null}}return V},setSavedBitrateSettings:function q(se,V){if(H(D,u)&&V){var de=j.replace(/\?/,se);try{localStorage.setItem(de,JSON.stringify({bitrate:V.toFixed(3),timestamp:I()}))}catch(Q){P.error(Q.message)}}},getSavedMediaSettings:function fe(se){if(ee(),!B.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var V=null;if(H(D,p)){var de=F.replace(/\?/,se);try{var Q=JSON.parse(localStorage.getItem(de))||{},pe=(new Date).getTime()-parseInt(Q.timestamp,10)>=B.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;V=Q.settings,pe&&(localStorage.removeItem(de),V=null)}catch(me){return null}}return V},setSavedMediaSettings:function be(se,V){if(H(D,p)){var de=F.replace(/\?/,se);try{localStorage.setItem(de,JSON.stringify({settings:V,timestamp:I()}))}catch(Q){P.error(Q.message)}}}},function S(){P=Object(C.default)(L).getInstance().getLogger(O),function A(){E(D)&&U.forEach(function(se){var V=localStorage.getItem(se.oldKey);if(V){localStorage.removeItem(se.oldKey);try{localStorage.setItem(se.newKey,V)}catch(de){P.error(de.message)}}})}()}(),O}_.__dashjs_factory_name="DOMStorage";var b=e.default.getSingletonFactory(_);w.default=b},"./src/streaming/utils/DefaultURLUtils.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(){var R,U=/^[a-z][a-z0-9+\-_.]*:/i,j=/^https?:\/\//i,F=/^https:\/\//i,D=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,h=function(H,ee){try{return new window.URL(H,ee).toString()}catch(fe){return H}},u=function(H,ee){var fe=_;if(!ee||!B(H))return H;O(H)&&(fe=b),P(H)&&(fe=L);var ue=fe(ee),be="/"!==ue.charAt(ue.length-1)&&"/"!==H.charAt(0)?"/":"";return[ue,H].join(be)};function _(I){var H=I.indexOf("/"),ee=I.lastIndexOf("/");return-1!==H?ee===H+1?I:(-1!==I.indexOf("?")&&(I=I.substring(0,I.indexOf("?"))),I.substring(0,ee+1)):""}function b(I){var H=I.match(D);return H?H[1]:""}function L(I){var H=I.match(U);return H?H[0]:""}function B(I){return!U.test(I)}function O(I){return B(I)&&"/"===I.charAt(0)}function P(I){return 0===I.indexOf("//")}return function p(){try{new window.URL("x","http://y"),R=h}catch(H){}finally{R=R||u}}(),{parseBaseUrl:_,parseOrigin:b,parseScheme:L,isRelative:B,isPathAbsolute:O,isSchemeRelative:P,isHTTPURL:function y(I){return j.test(I)},isHTTPS:function S(I){return F.test(I)},removeHostname:function k(I){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(I)[2].substring(1)},resolve:function E(I,H){return R(I,H)}}}C.__dashjs_factory_name="DefaultURLUtils",w.default=e.default.getSingletonFactory(C)},"./src/streaming/utils/EBMLParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(R){R=R||{};var U,j=new DataView(R.data),F=0;function u(P,y){var S=!0,E=0;if(void 0===y&&(y=!1),P.tag>16777215?(j.getUint32(F)!==P.tag&&(S=!1),E=4):P.tag>65535?(256*j.getUint16(F)+j.getUint8(F+2)!==P.tag&&(S=!1),E=3):P.tag>255?(j.getUint16(F)!==P.tag&&(S=!1),E=2):(j.getUint8(F)!==P.tag&&(S=!1),E=1),!S&&P.required&&!y)throw new Error("required tag not found");return S&&(F+=E),S}function k(P){var y=1,S=128,A=-1,I=0,H=j.getUint8(F),ee=0;for(ee=0;ee<8;ee+=1){if((H&S)===S){I=void 0===P?H&~S:H,A=ee;break}S>>=1}for(ee=0;ee<A;ee+=1,y+=1)I=I<<8|255&j.getUint8(F+y);return F+=y,I}return U={getPos:function D(){return F},setPos:function h(P){F=P},consumeTag:u,consumeTagAndSize:function p(P,y){var S=u(P,y);return S&&k(),S},parseTag:function _(P){var y;return u(P),y=k(),U[P.parse](y)},skipOverElement:function b(P,y){var E,S=u(P,y);return S&&(E=k(),F+=E),S},getMatroskaCodedNum:k,getMatroskaFloat:function L(P){var y;switch(P){case 4:y=j.getFloat32(F),F+=4;break;case 8:y=j.getFloat64(F),F+=8}return y},getMatroskaUint:function B(P){for(var y=0,S=0;S<P;S+=1)y<<=8,y|=255&j.getUint8(F+S);return F+=P,y},moreData:function O(){return F<j.byteLength}}}C.__dashjs_factory_name="EBMLParser",w.default=e.default.getClassFactory(C)},"./src/streaming/utils/ErrorHandler.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/EventBus.js"),C=i("./src/core/events/Events.js"),R=i("./src/core/FactoryMaker.js");function U(){var F=this.context,D=Object(e.default)(F).getInstance();return{error:function h(u){D.trigger(C.default.ERROR,{error:u})}}}U.__dashjs_factory_name="ErrorHandler",w.default=R.default.getSingletonFactory(U)},"./src/streaming/utils/InitCache.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(){var R={};return{save:function U(h){var u=h.streamId,p=h.representationId;R[u]=R[u]||{},R[u][p]=h},extract:function j(h,u){return R&&R[h]&&R[h][u]?R[h][u]:null},reset:function F(){R={}}}}C.__dashjs_factory_name="InitCache",w.default=e.default.getSingletonFactory(C)},"./src/streaming/utils/IsoFile.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/IsoBox.js"),C=i("./src/core/FactoryMaker.js");function R(){var j;function D(_){var b=[];if(!_||!j||"function"!=typeof j.fetchAll)return b;for(var L,k=j.fetchAll(_),B=0,O=k.length;B<O;B++)(L=p(k[B]))&&b.push(L);return b}function p(_){if(!_)return null;var b=new e.default(_);return _.hasOwnProperty("_incomplete")&&(b.isComplete=!_._incomplete),b}return{getBox:function F(_){return _&&j&&j.boxes&&0!==j.boxes.length&&"function"==typeof j.fetch?p(j.fetch(_)):null},getBoxes:D,setData:function h(_){j=_},getLastBox:function u(){if(!j||!j.boxes||!j.boxes.length)return null;var b=D(j.boxes[j.boxes.length-1].type);return b.length>0?b[b.length-1]:null}}}R.__dashjs_factory_name="IsoFile",w.default=C.default.getClassFactory(R)},"./src/streaming/utils/ObjectUtils.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./node_modules/fast-deep-equal/index.js"),R=i.n(C);function U(){return{areEqual:function F(D,h){return R()(D,h)}}}U.__dashjs_factory_name="ObjectUtils",w.default=e.default.getSingletonFactory(U)},"./src/streaming/utils/RequestModifier.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"modifyRequest",function(){return C});var e=i("./src/core/FactoryMaker.js");function C(U,j){var F={url:U.url,method:U.method,headers:Object.assign({},U.headers),credentials:U.withCredentials?"include":void 0};return Promise.resolve(j.modifyRequest(F)).then(function(){return Object.assign(U,F,{withCredentials:"include"===F.credentials})})}function R(){return{modifyRequest:null,modifyRequestURL:function j(D){return D},modifyRequestHeader:function F(D,h){return D}}}R.__dashjs_factory_name="RequestModifier",w.default=e.default.getSingletonFactory(R)},"./src/streaming/utils/SupervisorTools.js":function(Ge,w,i){"use strict";i.r(w),i.d(w,"checkParameterType",function(){return R}),i.d(w,"checkInteger",function(){return U}),i.d(w,"checkRange",function(){return j}),i.d(w,"checkIsVideoOrAudioType",function(){return F});var e=i("./src/streaming/constants/Constants.js");function C(D){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(D)}function R(D,h){if(C(D)!==h)throw e.default.BAD_ARGUMENT_ERROR}function U(D){if(null===D||isNaN(D)||D%1!=0)throw e.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function j(D,h,u){if(D<h||D>u)throw e.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function F(D){if("string"!=typeof D||D!==e.default.AUDIO&&D!==e.default.VIDEO)throw e.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js"),R=i("./src/core/EventBus.js"),U=i("./src/core/events/Events.js"),j=i("./node_modules/imsc/src/main/js/main.js"),D=i("./src/streaming/MediaPlayerEvents.js"),h=i("./src/streaming/constants/ConformanceViolationConstants.js");function u(){var b,k,p=this.context,_=Object(R.default)(p).getInstance(),L=0;function O(){var y="cue_TTML_"+L;return L++,y}return b={parse:function P(y,S,E,A,I){var fe,ue,be,H="",ee=[],q={},se={},V="",de="",Q={onOpenTag:function(Ie,Te,ke){if(ke[" imagetype"]&&!ke[" imageType"]&&(_.trigger(D.default.CONFORMANCE_VIOLATION,{level:h.default.LEVELS.ERROR,event:h.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),ke[" imageType"]=ke[" imagetype"]),"image"===Te&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===Ie||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===Ie)){if(!ke[" imageType"]||"PNG"!==ke[" imageType"].value)return void k.warn("smpte-tt imageType != PNG. Discarded");V=ke["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){V&&(se[V]=de.trim()),de="",V=""},onText:function(Ie){V&&(de+=Ie)}};if(!y)throw H="no ttml data to parse",new Error(H);q.data=y,_.trigger(U.default.TTML_TO_PARSE,q);var pe=Object(j.fromXML)(q.data,function(_e){H=_e},Q);_.trigger(U.default.TTML_PARSED,{ttmlString:q.data,ttmlDoc:pe});var me=pe.getMediaTimeEvents();for(be=0;be<me.length;be++){var xe=Object(j.generateISD)(pe,me[be],function(_e){H=_e});xe.contents.some(function(_e){return _e.contents.length})&&(fe=me[be]+S<E?E:me[be]+S)<(ue=me[be+1]+S>A?A:me[be+1]+S)&&ee.push({start:fe,end:ue,type:"html",cueID:O(),isd:xe,images:I,embeddedImages:se})}if(""!==H)throw k.error(H),new Error(H);return ee}},function B(){k=Object(C.default)(p).getInstance().getLogger(b)}(),b}u.__dashjs_factory_name="TTMLParser",w.default=e.default.getSingletonFactory(u)},"./src/streaming/utils/URLUtils.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/streaming/utils/DefaultURLUtils.js");function R(){var F,D=[],h=this.context;function b(H,ee,fe){var ue=function u(H){var ee;for(ee=0;ee<D.length;ee++)if(D[ee].regex.test(H))return D[ee].utils;return F}(fe||ee);return ue&&"function"==typeof ue[H]?ue[H](ee,fe):F[H](ee,fe)}return function p(){F=Object(C.default)(h).getInstance()}(),{registerUrlRegex:function _(H,ee){D.push({regex:H,utils:ee})},parseBaseUrl:function k(H){return b("parseBaseUrl",H)},parseOrigin:function L(H){return b("parseOrigin",H)},parseScheme:function O(H){return b("parseScheme",H)},isRelative:function P(H){return b("isRelative",H)},isPathAbsolute:function y(H){return b("isPathAbsolute",H)},isSchemeRelative:function S(H){return b("isSchemeRelative",H)},isHTTPURL:function E(H){return b("isHTTPURL",H)},isHTTPS:function A(H){return b("isHTTPS",H)},removeHostname:function B(H){return b("removeHostname",H)},resolve:function I(H,ee){return b("resolve",H,ee)}}}R.__dashjs_factory_name="URLUtils";var U=e.default.getSingletonFactory(R);w.default=U},"./src/streaming/utils/VTTParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/core/Debug.js");function U(){var F,D,h,u,p,_,j=this.context;function L(y){var S=y.split(":"),E=S.length-1;return y=60*parseInt(S[E-1],10)+parseFloat(S[E]),2===E&&(y+=3600*parseInt(S[0],10)),y}function B(y){var S=y.split(u),E=S[1].split(_);return E.shift(),S[1]=E[0],E.shift(),{cuePoints:S,styles:O(E)}}function O(y){var S={};return y.forEach(function(E){if(E.split(/:/).length>1){var A=E.split(/:/)[1];A&&-1!=A.search(/%/)&&(A=parseInt(A.replace(/%/,""),10)),(E.match(/align/)||E.match(/A/))&&(S.align=A),(E.match(/line/)||E.match(/L/))&&(S.line=A),(E.match(/position/)||E.match(/P/))&&(S.position=A),(E.match(/size/)||E.match(/S/))&&(S.size=A)}}),S}function P(y,S){for(var H,E=S,A="",I="";""!==y[E]&&E<y.length;)E++;if((H=E-S)>1)for(var ee=0;ee<H;ee++){if((I=y[S+ee]).match(u)){A="";break}A+=I,ee!==H-1&&(A+="\n")}else(I=y[S]).match(u)||(A=I);return A}return F={parse:function k(y){var E,A,S=[];if(!y)return S;E=(y=y.split(h)).length,A=-1;for(var I=0;I<E;I++){var H=y[I];if(H.length>0&&"WEBVTT"!==H&&H.match(u)){var ee=B(H),fe=ee.cuePoints,ue=ee.styles,be=P(y,I+1),q=L(fe[0].replace(p,"")),se=L(fe[1].replace(p,""));!isNaN(q)&&!isNaN(se)&&q>=A&&se>q?""!==be?(A=q,S.push({start:q,end:se,data:be,styles:ue})):D.error("Skipping cue due to empty/malformed cue text"):D.error("Skipping cue due to incorrect cue timing")}}return S}},function b(){D=Object(C.default)(j).getInstance().getLogger(F),h=/(?:\r\n|\r|\n)/gm,u=/-->/,p=/(^[\s]+|[\s]+$)/g,_=/\s\b/g}(),F}U.__dashjs_factory_name="VTTParser",w.default=e.default.getSingletonFactory(U)},"./src/streaming/utils/VttCustomRenderingParser.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(){var R,U;return R={parse:function F(D){var h=[];return U.oncue=function(u){u.start=u.startTime,u.end=u.endTime,u.data=u.text,u.styles={align:u.align,line:u.line,position:u.position,size:u.size},h.push(u)},U.parse(D),h}},function j(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(U=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch(D){}}(),R}C.__dashjs_factory_name="VttCustomRenderingParser",w.default=e.default.getSingletonFactory(C)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(R){var j=(R=R||{}).blacklistController;return{select:function F(D){var u,h=0;return D&&D.some(function(p,_){return h=_,!j.contains(p.serviceLocation)})&&(u=D[h]),u}}}C.__dashjs_factory_name="BasicSelector",w.default=e.default.getClassFactory(C)},"./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js"),C=i("./src/dash/controllers/ContentSteeringController.js");function R(){var j,F,D,U=this.context;function _(){for(var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],L=0,B=NaN,O=function(){var S=b[L],E=k.findIndex(function(A){return A.serviceLocation&&A.serviceLocation===S});if(-1!==E&&!D.contains(k[E].serviceLocation))return B=E,"break";L+=1};L<b.length&&"break"!==O(););return B}return j={selectBaseUrlIndex:function p(b){var k=NaN;if(isNaN(b.selectedIdx)){var L=F.getSteeringDataFromManifest();L&&L.defaultServiceLocation&&(k=_([L.defaultServiceLocation],b.baseUrls))}var B=F.getCurrentSteeringResponseData();return b.baseUrls&&b.baseUrls.length&&B&&B.serviceLocationPriority&&B.serviceLocationPriority.length&&(k=_(B.serviceLocationPriority,b.baseUrls)),k},setConfig:function u(b){b.blacklistController&&(D=b.blacklistController),b.contentSteeringController&&(F=b.contentSteeringController)}},function h(){F=Object(C.default)(U).getInstance()}(),j}R.__dashjs_factory_name="ContentSteeringSelector",w.default=e.default.getClassFactory(R)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/core/FactoryMaker.js");function C(R){var j=(R=R||{}).blacklistController;return{select:function h(u){return u&&function D(u){var B,O,b=0,k=[],L=0;if((O=u.sort(function(y,S){var E=y.dvb_priority-S.dvb_priority;return isNaN(E)?0:E}).filter(function(y,S,E){return!S||E[0].dvb_priority&&y.dvb_priority&&E[0].dvb_priority===y.dvb_priority})).length)return O.length>1&&(O.forEach(function(P){k.push(b+=P.dvb_weight)}),B=Math.floor(Math.random()*(b-1)),k.every(function(P,y){return L=y,!(B<P)})),O[L]}(function F(u){var p=[];return u.filter(function(L){return!j.contains(L.serviceLocation)||(L.dvb_priority&&p.push(L.dvb_priority),!1)}).filter(function(L){return!(p.length&&L.dvb_priority&&-1!==p.indexOf(L.dvb_priority))})}(u))}}}C.__dashjs_factory_name="DVBSelector",w.default=e.default.getClassFactory(C)},"./src/streaming/vo/BitrateInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN})},"./src/streaming/vo/DashJSError.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.code=u||null,this.message=p||null,this.data=_||null})},"./src/streaming/vo/DataChunk.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null})},"./src/streaming/vo/FragmentRequest.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/metrics/HTTPRequest.js");function C(u){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function U(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,F(b.key),b)}}function F(u){var p=function D(u,p){if("object"!==C(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==C(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===C(p)?p:String(p)}var h=function(){function u(p){(function R(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.action=u.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=p||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return function j(u,p,_){return p&&U(u.prototype,p),_&&U(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}(u,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===e.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(_){this.type=_&&_.init?e.HTTPRequest.INIT_SEGMENT_TYPE:e.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=_&&_.url?_.url:null,this.range=_&&_.range?_.range.start+"-"+_.range.end:null,this.mediaType=_&&_.mediaType?_.mediaType:null}}]),u}();h.ACTION_DOWNLOAD="download",h.ACTION_COMPLETE="complete",w.default=h},"./src/streaming/vo/HeadRequest.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/vo/FragmentRequest.js");function C(O){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(O)}function R(O,P){for(var y=0;y<P.length;y++){var S=P[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,j(S.key),S)}}function j(O){var P=function F(O,P){if("object"!==C(O)||null===O)return O;var y=O[Symbol.toPrimitive];if(void 0!==y){var S=y.call(O,P||"default");if("object"!==C(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(O)}(O,"string");return"symbol"===C(P)?P:String(P)}function h(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),P&&u(O,P)}function u(O,P){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,E){return S.__proto__=E,S})(O,P)}function p(O){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}();return function(){var E,S=L(O);if(P){var A=L(this).constructor;E=Reflect.construct(S,arguments,A)}else E=S.apply(this,arguments);return _(this,E)}}function _(O,P){if(P&&("object"===C(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function b(O){if(void 0===O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}(O)}function L(O){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(O)}w.default=function(O){h(y,O);var P=p(y);function y(S){var E;return function D(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}(this,y),(E=P.call(this,S)).checkForExistenceOnly=!0,E}return function U(O,P,y){return P&&R(O.prototype,P),y&&R(O,y),Object.defineProperty(O,"prototype",{writable:!1}),O}(y)}(e.default)},"./src/streaming/vo/IsoBox.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function R(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,j(_.key),_)}}function j(h){var u=function F(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=function(){function h(u){if(function C(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}(this,h),this.offset=u._offset,this.type=u.type,this.size=u.size,this.boxes=[],u.boxes)for(var p=0;p<u.boxes.length;p++)this.boxes.push(new h(u.boxes[p]));switch(this.isComplete=!0,u.type){case"sidx":if(this.timescale=u.timescale,this.earliest_presentation_time=u.earliest_presentation_time,this.first_offset=u.first_offset,this.references=u.references,u.references){this.references=[];for(var _=0;_<u.references.length;_++)this.references.push({reference_type:u.references[_].reference_type,referenced_size:u.references[_].referenced_size,subsegment_duration:u.references[_].subsegment_duration})}break;case"emsg":this.id=u.id,this.version=1===u.version?1:0,this.value=u.value,this.timescale=u.timescale,this.scheme_id_uri=u.scheme_id_uri,this.presentation_time_delta=1===u.version?u.presentation_time:u.presentation_time_delta,this.event_duration=u.event_duration,this.message_data=u.message_data;break;case"mdhd":this.timescale=u.timescale;break;case"mfhd":this.sequence_number=u.sequence_number;break;case"subs":this.entry_count=u.entry_count,this.entries=u.entries;break;case"tfhd":this.base_data_offset=u.base_data_offset,this.sample_description_index=u.sample_description_index,this.default_sample_duration=u.default_sample_duration,this.default_sample_size=u.default_sample_size,this.default_sample_flags=u.default_sample_flags,this.flags=u.flags;break;case"tfdt":this.version=u.version,this.baseMediaDecodeTime=u.baseMediaDecodeTime,this.flags=u.flags;break;case"trun":if(this.sample_count=u.sample_count,this.first_sample_flags=u.first_sample_flags,this.data_offset=u.data_offset,this.flags=u.flags,this.samples=u.samples,u.samples){this.samples=[];for(var k=0,L=u.samples.length;k<L;k++)this.samples.push({sample_size:u.samples[k].sample_size,sample_duration:u.samples[k].sample_duration,sample_composition_time_offset:u.samples[k].sample_composition_time_offset})}}}return function U(h,u,p){return u&&R(h.prototype,u),p&&R(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}(h,[{key:"getChildBox",value:function(p){for(var _=0;_<this.boxes.length;_++)if(this.boxes[_].type===p)return this.boxes[_]}},{key:"getChildBoxes",value:function(p){for(var _=[],b=0;b<this.boxes.length;b++)this.boxes[b].type===p&&_.push(this.boxes[b]);return _}}]),h}()},"./src/streaming/vo/IsoBoxSearchInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(u,p,_){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.lastCompletedOffset=u,this.found=p,this.size=_})},"./src/streaming/vo/MetricsList.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]})},"./src/streaming/vo/TextRequest.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/Constants.js"),C=i("./src/streaming/vo/FragmentRequest.js");function R(P){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(y){return typeof y}:function(y){return y&&"function"==typeof Symbol&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(P)}function U(P,y){for(var S=0;S<y.length;S++){var E=y[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,F(E.key),E)}}function F(P){var y=function D(P,y){if("object"!==R(P)||null===P)return P;var S=P[Symbol.toPrimitive];if(void 0!==S){var E=S.call(P,y||"default");if("object"!==R(E))return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===y?String:Number)(P)}(P,"string");return"symbol"===R(y)?y:String(y)}function u(P,y){if("function"!=typeof y&&null!==y)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(y&&y.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),y&&p(P,y)}function p(P,y){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E})(P,y)}function _(P){var y=function L(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(P){return!1}}();return function(){var A,E=B(P);if(y){var I=B(this).constructor;A=Reflect.construct(E,arguments,I)}else A=E.apply(this,arguments);return b(this,A)}}function b(P,y){if(y&&("object"===R(y)||"function"==typeof y))return y;if(void 0!==y)throw new TypeError("Derived constructors may only return object or undefined");return function k(P){if(void 0===P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}(P)}function B(P){return(B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)})(P)}w.default=function(P){u(S,P);var y=_(S);function S(E,A){var I;return function h(P,y){if(!(P instanceof y))throw new TypeError("Cannot call a class as a function")}(this,S),(I=y.call(this)).url=E||null,I.type=A||null,I.mediaType=e.default.STREAM,I.responseType="",I}return function j(P,y,S){return y&&U(P.prototype,y),S&&U(P,S),Object.defineProperty(P,"prototype",{writable:!1}),P}(S)}(C.default)},"./src/streaming/vo/TextTrackInfo.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/dash/vo/MediaInfo.js");function C(O){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(P){return typeof P}:function(P){return P&&"function"==typeof Symbol&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P})(O)}function R(O,P){for(var y=0;y<P.length;y++){var S=P[y];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(O,j(S.key),S)}}function j(O){var P=function F(O,P){if("object"!==C(O)||null===O)return O;var y=O[Symbol.toPrimitive];if(void 0!==y){var S=y.call(O,P||"default");if("object"!==C(S))return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===P?String:Number)(O)}(O,"string");return"symbol"===C(P)?P:String(P)}function h(O,P){if("function"!=typeof P&&null!==P)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(P&&P.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),Object.defineProperty(O,"prototype",{writable:!1}),P&&u(O,P)}function u(O,P){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,E){return S.__proto__=E,S})(O,P)}function p(O){var P=function k(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(O){return!1}}();return function(){var E,S=L(O);if(P){var A=L(this).constructor;E=Reflect.construct(S,arguments,A)}else E=S.apply(this,arguments);return _(this,E)}}function _(O,P){if(P&&("object"===C(P)||"function"==typeof P))return P;if(void 0!==P)throw new TypeError("Derived constructors may only return object or undefined");return function b(O){if(void 0===O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}(O)}function L(O){return(L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)})(O)}w.default=function(O){h(y,O);var P=p(y);function y(){var S;return function D(O,P){if(!(O instanceof P))throw new TypeError("Cannot call a class as a function")}(this,y),(S=P.call(this)).captionData=null,S.label=null,S.defaultTrack=!1,S.kind=null,S.isFragmented=!1,S.isEmbedded=!1,S.isTTML=null,S}return function U(O,P,y){return P&&R(O.prototype,P),y&&R(O,y),Object.defineProperty(O,"prototype",{writable:!1}),O}(y)}(e.default)},"./src/streaming/vo/Thumbnail.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null})},"./src/streaming/vo/ThumbnailTrackInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""})},"./src/streaming/vo/URIFragmentData.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null})},"./src/streaming/vo/metrics/BufferLevel.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.t=null,this.level=null})},"./src/streaming/vo/metrics/BufferState.js":function(Ge,w,i){"use strict";i.r(w);var e=i("./src/streaming/constants/MetricsConstants.js");function C(u){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function R(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,j(b.key),b)}}function U(u,p,_){return p&&R(u.prototype,p),_&&R(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}function j(u){var p=function F(u,p){if("object"!==C(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==C(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===C(p)?p:String(p)}w.default=U(function u(){(function D(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")})(this,u),this.target=null,this.state=e.default.BUFFER_EMPTY})},"./src/streaming/vo/metrics/DVRInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.time=null,this.range=null,this.manifestInfo=null})},"./src/streaming/vo/metrics/DroppedFrames.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.time=null,this.droppedFrames=null})},"./src/streaming/vo/metrics/HTTPRequest.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function C(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,U(b.key),b)}}function R(u,p,_){return p&&C(u.prototype,p),_&&C(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}function U(u){var p=function j(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}function F(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}i.r(w),i.d(w,"HTTPRequest",function(){return D}),i.d(w,"HTTPRequestTrace",function(){return h});var D=R(function u(){F(this,u),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),h=R(function u(){F(this,u),this.s=null,this.d=null,this.b=[]});D.GET="GET",D.HEAD="HEAD",D.MPD_TYPE="MPD",D.XLINK_EXPANSION_TYPE="XLinkExpansion",D.INIT_SEGMENT_TYPE="InitializationSegment",D.INDEX_SEGMENT_TYPE="IndexSegment",D.MEDIA_SEGMENT_TYPE="MediaSegment",D.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",D.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",D.DVB_REPORTING_TYPE="DVBReporting",D.LICENSE="license",D.CONTENT_STEERING_TYPE="ContentSteering",D.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(Ge,w,i){"use strict";function e(p){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(p)}function C(p,_){for(var b=0;b<_.length;b++){var k=_[b];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,U(k.key),k)}}function R(p,_,b){return _&&C(p.prototype,_),b&&C(p,b),Object.defineProperty(p,"prototype",{writable:!1}),p}function U(p){var _=function j(p,_){if("object"!==e(p)||null===p)return p;var b=p[Symbol.toPrimitive];if(void 0!==b){var k=b.call(p,_||"default");if("object"!==e(k))return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(p)}(p,"string");return"symbol"===e(_)?_:String(_)}function F(p,_){if(!(p instanceof _))throw new TypeError("Cannot call a class as a function")}i.r(w),i.d(w,"ManifestUpdate",function(){return D}),i.d(w,"ManifestUpdateStreamInfo",function(){return h}),i.d(w,"ManifestUpdateRepresentationInfo",function(){return u});var D=R(function p(){F(this,p),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),h=R(function p(){F(this,p),this.id=null,this.index=null,this.start=null,this.duration=null}),u=R(function p(){F(this,p),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null})},"./src/streaming/vo/metrics/PlayList.js":function(Ge,w,i){"use strict";function e(u){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(u)}function C(u,p){for(var _=0;_<p.length;_++){var b=p[_];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,U(b.key),b)}}function R(u,p,_){return p&&C(u.prototype,p),_&&C(u,_),Object.defineProperty(u,"prototype",{writable:!1}),u}function U(u){var p=function j(u,p){if("object"!==e(u)||null===u)return u;var _=u[Symbol.toPrimitive];if(void 0!==_){var b=_.call(u,p||"default");if("object"!==e(b))return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===p?String:Number)(u)}(u,"string");return"symbol"===e(p)?p:String(p)}function F(u,p){if(!(u instanceof p))throw new TypeError("Cannot call a class as a function")}i.r(w),i.d(w,"PlayList",function(){return D}),i.d(w,"PlayListTrace",function(){return h});var D=R(function u(){F(this,u),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]});D.INITIAL_PLAYOUT_START_REASON="initial_playout",D.SEEK_START_REASON="seek",D.RESUME_FROM_PAUSE_START_REASON="resume",D.METRICS_COLLECTION_START_REASON="metrics_collection_start";var h=R(function u(){F(this,u),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});h.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",h.REBUFFERING_REASON="rebuffering",h.USER_REQUEST_STOP_REASON="user_request",h.END_OF_PERIOD_STOP_REASON="end_of_period",h.END_OF_CONTENT_STOP_REASON="end_of_content",h.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",h.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.t=null,this.mt=null,this.to=null,this.lto=null})},"./src/streaming/vo/metrics/RequestsQueue.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.loadingRequests=[],this.executedRequests=[]})},"./src/streaming/vo/metrics/SchedulingInfo.js":function(Ge,w,i){"use strict";function e(h){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(h)}function C(h,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(h,U(_.key),_)}}function R(h,u,p){return u&&C(h.prototype,u),p&&C(h,p),Object.defineProperty(h,"prototype",{writable:!1}),h}function U(h){var u=function j(h,u){if("object"!==e(h)||null===h)return h;var p=h[Symbol.toPrimitive];if(void 0!==p){var _=p.call(h,u||"default");if("object"!==e(_))return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===u?String:Number)(h)}(h,"string");return"symbol"===e(u)?u:String(u)}i.r(w),w.default=R(function h(){(function F(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")})(this,h),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null})},0:function(Ge,w){},1:function(Ge,w){}}).default},7568:(kn,Ge,w)=>{var i;!function(){"use strict";var e="object"==typeof window?window:{},C=!e.HI_BASE64_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;C&&(e=global);var b,k,R=!e.HI_BASE64_NO_COMMON_JS&&kn.exports,U=w.amdO,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),F={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63,"-":62,_:63},h=function(y){var S,E,A,I,H=[],ee=0,fe=y.length;"="===y.charAt(fe-2)?fe-=2:"="===y.charAt(fe-1)&&(fe-=1);for(var ue=0,be=fe>>2<<2;ue<be;)S=F[y.charAt(ue++)],E=F[y.charAt(ue++)],A=F[y.charAt(ue++)],I=F[y.charAt(ue++)],H[ee++]=255&(S<<2|E>>>4),H[ee++]=255&(E<<4|A>>>2),H[ee++]=255&(A<<6|I);var q=fe-be;return 2===q?(S=F[y.charAt(ue++)],E=F[y.charAt(ue++)],H[ee++]=255&(S<<2|E>>>4)):3===q&&(S=F[y.charAt(ue++)],E=F[y.charAt(ue++)],A=F[y.charAt(ue++)],H[ee++]=255&(S<<2|E>>>4),H[ee++]=255&(E<<4|A>>>2)),H},u=function(y){for(var S,E,A,I="",H=y.length,ee=0,fe=3*parseInt(H/3);ee<fe;)S=y[ee++],E=y[ee++],A=y[ee++],I+=j[S>>>2]+j[63&(S<<4|E>>>4)]+j[63&(E<<2|A>>>6)]+j[63&A];var ue=H-fe;return 1===ue?I+=j[(S=y[ee])>>>2]+j[S<<4&63]+"==":2===ue&&(S=y[ee++],I+=j[S>>>2]+j[63&(S<<4|(E=y[ee])>>>4)]+j[E<<2&63]+"="),I},p=e.btoa,_=e.atob;if(C){var L=w(3172).lW;p=function(y){return new L(y,"ascii").toString("base64")},u=b=function(y){return new L(y).toString("base64")},_=function(y){return new L(y,"base64").toString("ascii")},k=function(y){return new L(y,"base64").toString()}}else p?(b=function(y){for(var S="",E=0;E<y.length;E++){var A=y.charCodeAt(E);A<128?S+=String.fromCharCode(A):A<2048?S+=String.fromCharCode(192|A>>6)+String.fromCharCode(128|63&A):A<55296||A>=57344?S+=String.fromCharCode(224|A>>12)+String.fromCharCode(128|A>>6&63)+String.fromCharCode(128|63&A):(A=65536+((1023&A)<<10|1023&y.charCodeAt(++E)),S+=String.fromCharCode(240|A>>18)+String.fromCharCode(128|A>>12&63)+String.fromCharCode(128|A>>6&63)+String.fromCharCode(128|63&A))}return p(S)},k=function(y){var S=_(y.trim("=").replace(/-/g,"+").replace(/_/g,"/"));if(!/[^\x00-\x7F]/.test(S))return S;for(var ee,fe,E="",A=0,I=S.length,H=0;A<I;)if((ee=S.charCodeAt(A++))<=127)E+=String.fromCharCode(ee);else{if(ee>191&&ee<=223)fe=31&ee,H=1;else if(ee<=239)fe=15&ee,H=2;else{if(!(ee<=247))throw"not a UTF-8 string";fe=7&ee,H=3}for(var ue=0;ue<H;++ue){if((ee=S.charCodeAt(A++))<128||ee>191)throw"not a UTF-8 string";fe<<=6,fe+=63&ee}if(fe>=55296&&fe<=57343||fe>1114111)throw"not a UTF-8 string";fe<=65535?E+=String.fromCharCode(fe):(fe-=65536,E+=String.fromCharCode(55296+(fe>>10)),E+=String.fromCharCode(56320+(1023&fe)))}return E}):(p=function(y){for(var S,E,A,I="",H=y.length,ee=0,fe=3*parseInt(H/3);ee<fe;)S=y.charCodeAt(ee++),E=y.charCodeAt(ee++),A=y.charCodeAt(ee++),I+=j[S>>>2]+j[63&(S<<4|E>>>4)]+j[63&(E<<2|A>>>6)]+j[63&A];var ue=H-fe;return 1===ue?(S=y.charCodeAt(ee),I+=j[S>>>2]+j[S<<4&63]+"=="):2===ue&&(S=y.charCodeAt(ee++),E=y.charCodeAt(ee),I+=j[S>>>2]+j[63&(S<<4|E>>>4)]+j[E<<2&63]+"="),I},b=function(y){for(var S,E,A,I="",H=function(y){for(var S=[],E=0;E<y.length;E++){var A=y.charCodeAt(E);A<128?S[S.length]=A:A<2048?(S[S.length]=192|A>>6,S[S.length]=128|63&A):A<55296||A>=57344?(S[S.length]=224|A>>12,S[S.length]=128|A>>6&63,S[S.length]=128|63&A):(A=65536+((1023&A)<<10|1023&y.charCodeAt(++E)),S[S.length]=240|A>>18,S[S.length]=128|A>>12&63,S[S.length]=128|A>>6&63,S[S.length]=128|63&A)}return S}(y),ee=H.length,fe=0,ue=3*parseInt(ee/3);fe<ue;)S=H[fe++],E=H[fe++],A=H[fe++],I+=j[S>>>2]+j[63&(S<<4|E>>>4)]+j[63&(E<<2|A>>>6)]+j[63&A];var be=ee-ue;return 1===be?I+=j[(S=H[fe])>>>2]+j[S<<4&63]+"==":2===be&&(S=H[fe++],I+=j[S>>>2]+j[63&(S<<4|(E=H[fe])>>>4)]+j[E<<2&63]+"="),I},_=function(y){var S,E,A,I,H="",ee=y.length;"="===y.charAt(ee-2)?ee-=2:"="===y.charAt(ee-1)&&(ee-=1);for(var fe=0,ue=ee>>2<<2;fe<ue;)S=F[y.charAt(fe++)],E=F[y.charAt(fe++)],A=F[y.charAt(fe++)],I=F[y.charAt(fe++)],H+=String.fromCharCode(255&(S<<2|E>>>4))+String.fromCharCode(255&(E<<4|A>>>2))+String.fromCharCode(255&(A<<6|I));var be=ee-ue;return 2===be?(S=F[y.charAt(fe++)],E=F[y.charAt(fe++)],H+=String.fromCharCode(255&(S<<2|E>>>4))):3===be&&(S=F[y.charAt(fe++)],E=F[y.charAt(fe++)],A=F[y.charAt(fe++)],H+=String.fromCharCode(255&(S<<2|E>>>4))+String.fromCharCode(255&(E<<4|A>>>2))),H},k=function(y){for(var ee,fe,S="",E=h(y),A=E.length,I=0,H=0;I<A;)if((ee=E[I++])<=127)S+=String.fromCharCode(ee);else{if(ee>191&&ee<=223)fe=31&ee,H=1;else if(ee<=239)fe=15&ee,H=2;else{if(!(ee<=247))throw"not a UTF-8 string";fe=7&ee,H=3}for(var ue=0;ue<H;++ue){if((ee=E[I++])<128||ee>191)throw"not a UTF-8 string";fe<<=6,fe+=63&ee}if(fe>=55296&&fe<=57343||fe>1114111)throw"not a UTF-8 string";fe<=65535?S+=String.fromCharCode(fe):(fe-=65536,S+=String.fromCharCode(55296+(fe>>10)),S+=String.fromCharCode(56320+(1023&fe)))}return S});var O=function(y,S){return S?_(y):k(y)},P={encode:function(y,S){var E="string"!=typeof y;return E&&y.constructor===e.ArrayBuffer&&(y=new Uint8Array(y)),E?u(y):!S&&/[^\x00-\x7F]/.test(y)?b(y):p(y)},decode:O,atob:_,btoa:p};O.bytes=h,O.string=O,R?kn.exports=P:(e.base64=P,U&&void 0!==(i=function(){return P}.call(P,w,P,kn))&&(kn.exports=i))}()},8461:(kn,Ge)=>{Ge.read=function(w,i,e,C,R){var U,j,F=8*R-C-1,D=(1<<F)-1,h=D>>1,u=-7,p=e?R-1:0,_=e?-1:1,b=w[i+p];for(p+=_,U=b&(1<<-u)-1,b>>=-u,u+=F;u>0;U=256*U+w[i+p],p+=_,u-=8);for(j=U&(1<<-u)-1,U>>=-u,u+=C;u>0;j=256*j+w[i+p],p+=_,u-=8);if(0===U)U=1-h;else{if(U===D)return j?NaN:1/0*(b?-1:1);j+=Math.pow(2,C),U-=h}return(b?-1:1)*j*Math.pow(2,U-C)},Ge.write=function(w,i,e,C,R,U){var j,F,D,h=8*U-R-1,u=(1<<h)-1,p=u>>1,_=23===R?Math.pow(2,-24)-Math.pow(2,-77):0,b=C?0:U-1,k=C?1:-1,L=i<0||0===i&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(F=isNaN(i)?1:0,j=u):(j=Math.floor(Math.log(i)/Math.LN2),i*(D=Math.pow(2,-j))<1&&(j--,D*=2),(i+=j+p>=1?_/D:_*Math.pow(2,1-p))*D>=2&&(j++,D/=2),j+p>=u?(F=0,j=u):j+p>=1?(F=(i*D-1)*Math.pow(2,R),j+=p):(F=i*Math.pow(2,p-1)*Math.pow(2,R),j=0));R>=8;w[e+b]=255&F,b+=k,F/=256,R-=8);for(j=j<<R|F,h+=R;h>0;w[e+b]=255&j,b+=k,j/=256,h-=8);w[e+b-k]|=128*L}},1135:(kn,Ge,w)=>{"use strict";w.d(Ge,{X:()=>e});var i=w(7579);class e extends i.x{constructor(R){super(),this._value=R}get value(){return this.getValue()}_subscribe(R){const U=super._subscribe(R);return!U.closed&&R.next(this._value),U}getValue(){const{hasError:R,thrownError:U,_value:j}=this;if(R)throw U;return this._throwIfClosed(),j}next(R){super.next(this._value=R)}}},8306:(kn,Ge,w)=>{"use strict";w.d(Ge,{y:()=>u});var i=w(930),e=w(727),C=w(8822),R=w(4671);var F=w(2416),D=w(576),h=w(2806);let u=(()=>{class k{constructor(B){B&&(this._subscribe=B)}lift(B){const O=new k;return O.source=this,O.operator=B,O}subscribe(B,O,P){const y=function b(k){return k&&k instanceof i.Lv||function _(k){return k&&(0,D.m)(k.next)&&(0,D.m)(k.error)&&(0,D.m)(k.complete)}(k)&&(0,e.Nn)(k)}(B)?B:new i.Hp(B,O,P);return(0,h.x)(()=>{const{operator:S,source:E}=this;y.add(S?S.call(y,E):E?this._subscribe(y):this._trySubscribe(y))}),y}_trySubscribe(B){try{return this._subscribe(B)}catch(O){B.error(O)}}forEach(B,O){return new(O=p(O))((P,y)=>{const S=new i.Hp({next:E=>{try{B(E)}catch(A){y(A),S.unsubscribe()}},error:y,complete:P});this.subscribe(S)})}_subscribe(B){var O;return null===(O=this.source)||void 0===O?void 0:O.subscribe(B)}[C.L](){return this}pipe(...B){return function j(k){return 0===k.length?R.y:1===k.length?k[0]:function(B){return k.reduce((O,P)=>P(O),B)}}(B)(this)}toPromise(B){return new(B=p(B))((O,P)=>{let y;this.subscribe(S=>y=S,S=>P(S),()=>O(y))})}}return k.create=L=>new k(L),k})();function p(k){var L;return null!==(L=null!=k?k:F.v.Promise)&&void 0!==L?L:Promise}},7579:(kn,Ge,w)=>{"use strict";w.d(Ge,{x:()=>F});var i=w(8306),e=w(727);const R=(0,w(3888).d)(h=>function(){h(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var U=w(8737),j=w(2806);let F=(()=>{class h extends i.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(p){const _=new D(this,this);return _.operator=p,_}_throwIfClosed(){if(this.closed)throw new R}next(p){(0,j.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _ of this.currentObservers)_.next(p)}})}error(p){(0,j.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=p;const{observers:_}=this;for(;_.length;)_.shift().error(p)}})}complete(){(0,j.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:p}=this;for(;p.length;)p.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var p;return(null===(p=this.observers)||void 0===p?void 0:p.length)>0}_trySubscribe(p){return this._throwIfClosed(),super._trySubscribe(p)}_subscribe(p){return this._throwIfClosed(),this._checkFinalizedStatuses(p),this._innerSubscribe(p)}_innerSubscribe(p){const{hasError:_,isStopped:b,observers:k}=this;return _||b?e.Lc:(this.currentObservers=null,k.push(p),new e.w0(()=>{this.currentObservers=null,(0,U.P)(k,p)}))}_checkFinalizedStatuses(p){const{hasError:_,thrownError:b,isStopped:k}=this;_?p.error(b):k&&p.complete()}asObservable(){const p=new i.y;return p.source=this,p}}return h.create=(u,p)=>new D(u,p),h})();class D extends F{constructor(u,p){super(),this.destination=u,this.source=p}next(u){var p,_;null===(_=null===(p=this.destination)||void 0===p?void 0:p.next)||void 0===_||_.call(p,u)}error(u){var p,_;null===(_=null===(p=this.destination)||void 0===p?void 0:p.error)||void 0===_||_.call(p,u)}complete(){var u,p;null===(p=null===(u=this.destination)||void 0===u?void 0:u.complete)||void 0===p||p.call(u)}_subscribe(u){var p,_;return null!==(_=null===(p=this.source)||void 0===p?void 0:p.subscribe(u))&&void 0!==_?_:e.Lc}}},930:(kn,Ge,w)=>{"use strict";w.d(Ge,{Hp:()=>B,Lv:()=>_});var i=w(576),e=w(727),C=w(2416),R=w(7849),U=w(5032);const j=h("C",void 0,void 0);function h(E,A,I){return{kind:E,value:A,error:I}}var u=w(3410),p=w(2806);class _ extends e.w0{constructor(A){super(),this.isStopped=!1,A?(this.destination=A,(0,e.Nn)(A)&&A.add(this)):this.destination=S}static create(A,I,H){return new B(A,I,H)}next(A){this.isStopped?y(function D(E){return h("N",E,void 0)}(A),this):this._next(A)}error(A){this.isStopped?y(function F(E){return h("E",void 0,E)}(A),this):(this.isStopped=!0,this._error(A))}complete(){this.isStopped?y(j,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(A){this.destination.next(A)}_error(A){try{this.destination.error(A)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const b=Function.prototype.bind;function k(E,A){return b.call(E,A)}class L{constructor(A){this.partialObserver=A}next(A){const{partialObserver:I}=this;if(I.next)try{I.next(A)}catch(H){O(H)}}error(A){const{partialObserver:I}=this;if(I.error)try{I.error(A)}catch(H){O(H)}else O(A)}complete(){const{partialObserver:A}=this;if(A.complete)try{A.complete()}catch(I){O(I)}}}class B extends _{constructor(A,I,H){let ee;if(super(),(0,i.m)(A)||!A)ee={next:null!=A?A:void 0,error:null!=I?I:void 0,complete:null!=H?H:void 0};else{let fe;this&&C.v.useDeprecatedNextContext?(fe=Object.create(A),fe.unsubscribe=()=>this.unsubscribe(),ee={next:A.next&&k(A.next,fe),error:A.error&&k(A.error,fe),complete:A.complete&&k(A.complete,fe)}):ee=A}this.destination=new L(ee)}}function O(E){C.v.useDeprecatedSynchronousErrorHandling?(0,p.O)(E):(0,R.h)(E)}function y(E,A){const{onStoppedNotification:I}=C.v;I&&u.z.setTimeout(()=>I(E,A))}const S={closed:!0,next:U.Z,error:function P(E){throw E},complete:U.Z}},727:(kn,Ge,w)=>{"use strict";w.d(Ge,{Lc:()=>j,w0:()=>U,Nn:()=>F});var i=w(576);const C=(0,w(3888).d)(h=>function(p){h(this),this.message=p?`${p.length} errors occurred during unsubscription:\n${p.map((_,b)=>`${b+1}) ${_.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=p});var R=w(8737);class U{constructor(u){this.initialTeardown=u,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let u;if(!this.closed){this.closed=!0;const{_parentage:p}=this;if(p)if(this._parentage=null,Array.isArray(p))for(const k of p)k.remove(this);else p.remove(this);const{initialTeardown:_}=this;if((0,i.m)(_))try{_()}catch(k){u=k instanceof C?k.errors:[k]}const{_finalizers:b}=this;if(b){this._finalizers=null;for(const k of b)try{D(k)}catch(L){u=null!=u?u:[],L instanceof C?u=[...u,...L.errors]:u.push(L)}}if(u)throw new C(u)}}add(u){var p;if(u&&u!==this)if(this.closed)D(u);else{if(u instanceof U){if(u.closed||u._hasParent(this))return;u._addParent(this)}(this._finalizers=null!==(p=this._finalizers)&&void 0!==p?p:[]).push(u)}}_hasParent(u){const{_parentage:p}=this;return p===u||Array.isArray(p)&&p.includes(u)}_addParent(u){const{_parentage:p}=this;this._parentage=Array.isArray(p)?(p.push(u),p):p?[p,u]:u}_removeParent(u){const{_parentage:p}=this;p===u?this._parentage=null:Array.isArray(p)&&(0,R.P)(p,u)}remove(u){const{_finalizers:p}=this;p&&(0,R.P)(p,u),u instanceof U&&u._removeParent(this)}}U.EMPTY=(()=>{const h=new U;return h.closed=!0,h})();const j=U.EMPTY;function F(h){return h instanceof U||h&&"closed"in h&&(0,i.m)(h.remove)&&(0,i.m)(h.add)&&(0,i.m)(h.unsubscribe)}function D(h){(0,i.m)(h)?h():h.unsubscribe()}},2416:(kn,Ge,w)=>{"use strict";w.d(Ge,{v:()=>i});const i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(kn,Ge,w)=>{"use strict";w.d(Ge,{a:()=>u});var i=w(8306),e=w(4742),C=w(2076),R=w(4671),U=w(3268),j=w(3269),F=w(1810),D=w(5403),h=w(9672);function u(...b){const k=(0,j.yG)(b),L=(0,j.jO)(b),{args:B,keys:O}=(0,e.D)(b);if(0===B.length)return(0,C.D)([],k);const P=new i.y(function p(b,k,L=R.y){return B=>{_(k,()=>{const{length:O}=b,P=new Array(O);let y=O,S=O;for(let E=0;E<O;E++)_(k,()=>{const A=(0,C.D)(b[E],k);let I=!1;A.subscribe((0,D.x)(B,H=>{P[E]=H,I||(I=!0,S--),S||B.next(L(P.slice()))},()=>{--y||B.complete()}))},B)},B)}}(B,k,O?y=>(0,F.n)(O,y):R.y));return L?P.pipe((0,U.Z)(L)):P}function _(b,k,L){b?(0,h.f)(L,b,k):k()}},7272:(kn,Ge,w)=>{"use strict";w.d(Ge,{z:()=>U});var i=w(8189),C=w(3269),R=w(2076);function U(...j){return function e(){return(0,i.J)(1)}()((0,R.D)(j,(0,C.yG)(j)))}},515:(kn,Ge,w)=>{"use strict";w.d(Ge,{E:()=>e});const e=new(w(8306).y)(U=>U.complete())},2076:(kn,Ge,w)=>{"use strict";w.d(Ge,{D:()=>H});var i=w(8421),e=w(9672),C=w(4482),R=w(5403);function U(ee,fe=0){return(0,C.e)((ue,be)=>{ue.subscribe((0,R.x)(be,q=>(0,e.f)(be,ee,()=>be.next(q),fe),()=>(0,e.f)(be,ee,()=>be.complete(),fe),q=>(0,e.f)(be,ee,()=>be.error(q),fe)))})}function j(ee,fe=0){return(0,C.e)((ue,be)=>{be.add(ee.schedule(()=>ue.subscribe(be),fe))})}var h=w(8306),p=w(2202),_=w(576);function k(ee,fe){if(!ee)throw new Error("Iterable cannot be null");return new h.y(ue=>{(0,e.f)(ue,fe,()=>{const be=ee[Symbol.asyncIterator]();(0,e.f)(ue,fe,()=>{be.next().then(q=>{q.done?ue.complete():ue.next(q.value)})},0,!0)})})}var L=w(3670),B=w(8239),O=w(1144),P=w(6495),y=w(2206),S=w(4532),E=w(3260);function H(ee,fe){return fe?function I(ee,fe){if(null!=ee){if((0,L.c)(ee))return function F(ee,fe){return(0,i.Xf)(ee).pipe(j(fe),U(fe))}(ee,fe);if((0,O.z)(ee))return function u(ee,fe){return new h.y(ue=>{let be=0;return fe.schedule(function(){be===ee.length?ue.complete():(ue.next(ee[be++]),ue.closed||this.schedule())})})}(ee,fe);if((0,B.t)(ee))return function D(ee,fe){return(0,i.Xf)(ee).pipe(j(fe),U(fe))}(ee,fe);if((0,y.D)(ee))return k(ee,fe);if((0,P.T)(ee))return function b(ee,fe){return new h.y(ue=>{let be;return(0,e.f)(ue,fe,()=>{be=ee[p.h](),(0,e.f)(ue,fe,()=>{let q,se;try{({value:q,done:se}=be.next())}catch(V){return void ue.error(V)}se?ue.complete():ue.next(q)},0,!0)}),()=>(0,_.m)(null==be?void 0:be.return)&&be.return()})}(ee,fe);if((0,E.L)(ee))return function A(ee,fe){return k((0,E.Q)(ee),fe)}(ee,fe)}throw(0,S.z)(ee)}(ee,fe):(0,i.Xf)(ee)}},8421:(kn,Ge,w)=>{"use strict";w.d(Ge,{Xf:()=>b});var i=w(7582),e=w(1144),C=w(8239),R=w(8306),U=w(3670),j=w(2206),F=w(4532),D=w(6495),h=w(3260),u=w(576),p=w(7849),_=w(8822);function b(E){if(E instanceof R.y)return E;if(null!=E){if((0,U.c)(E))return function k(E){return new R.y(A=>{const I=E[_.L]();if((0,u.m)(I.subscribe))return I.subscribe(A);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(E);if((0,e.z)(E))return function L(E){return new R.y(A=>{for(let I=0;I<E.length&&!A.closed;I++)A.next(E[I]);A.complete()})}(E);if((0,C.t)(E))return function B(E){return new R.y(A=>{E.then(I=>{A.closed||(A.next(I),A.complete())},I=>A.error(I)).then(null,p.h)})}(E);if((0,j.D)(E))return P(E);if((0,D.T)(E))return function O(E){return new R.y(A=>{for(const I of E)if(A.next(I),A.closed)return;A.complete()})}(E);if((0,h.L)(E))return function y(E){return P((0,h.Q)(E))}(E)}throw(0,F.z)(E)}function P(E){return new R.y(A=>{(function S(E,A){var I,H,ee,fe;return(0,i.mG)(this,void 0,void 0,function*(){try{for(I=(0,i.KL)(E);!(H=yield I.next()).done;)if(A.next(H.value),A.closed)return}catch(ue){ee={error:ue}}finally{try{H&&!H.done&&(fe=I.return)&&(yield fe.call(I))}finally{if(ee)throw ee.error}}A.complete()})})(E,A).catch(I=>A.error(I))})}},6451:(kn,Ge,w)=>{"use strict";w.d(Ge,{T:()=>j});var i=w(8189),e=w(8421),C=w(515),R=w(3269),U=w(2076);function j(...F){const D=(0,R.yG)(F),h=(0,R._6)(F,1/0),u=F;return u.length?1===u.length?(0,e.Xf)(u[0]):(0,i.J)(h)((0,U.D)(u,D)):C.E}},9646:(kn,Ge,w)=>{"use strict";w.d(Ge,{of:()=>C});var i=w(3269),e=w(2076);function C(...R){const U=(0,i.yG)(R);return(0,e.D)(R,U)}},5403:(kn,Ge,w)=>{"use strict";w.d(Ge,{x:()=>e});var i=w(930);function e(R,U,j,F,D){return new C(R,U,j,F,D)}class C extends i.Lv{constructor(U,j,F,D,h,u){super(U),this.onFinalize=h,this.shouldUnsubscribe=u,this._next=j?function(p){try{j(p)}catch(_){U.error(_)}}:super._next,this._error=D?function(p){try{D(p)}catch(_){U.error(_)}finally{this.unsubscribe()}}:super._error,this._complete=F?function(){try{F()}catch(p){U.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var U;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:j}=this;super.unsubscribe(),!j&&(null===(U=this.onFinalize)||void 0===U||U.call(this))}}}},4351:(kn,Ge,w)=>{"use strict";w.d(Ge,{b:()=>C});var i=w(5577),e=w(576);function C(R,U){return(0,e.m)(U)?(0,i.z)(R,U,1):(0,i.z)(R,1)}},9300:(kn,Ge,w)=>{"use strict";w.d(Ge,{h:()=>C});var i=w(4482),e=w(5403);function C(R,U){return(0,i.e)((j,F)=>{let D=0;j.subscribe((0,e.x)(F,h=>R.call(U,h,D++)&&F.next(h)))})}},4004:(kn,Ge,w)=>{"use strict";w.d(Ge,{U:()=>C});var i=w(4482),e=w(5403);function C(R,U){return(0,i.e)((j,F)=>{let D=0;j.subscribe((0,e.x)(F,h=>{F.next(R.call(U,h,D++))}))})}},8189:(kn,Ge,w)=>{"use strict";w.d(Ge,{J:()=>C});var i=w(5577),e=w(4671);function C(R=1/0){return(0,i.z)(e.y,R)}},5577:(kn,Ge,w)=>{"use strict";w.d(Ge,{z:()=>D});var i=w(4004),e=w(8421),C=w(4482),R=w(9672),U=w(5403),F=w(576);function D(h,u,p=1/0){return(0,F.m)(u)?D((_,b)=>(0,i.U)((k,L)=>u(_,k,b,L))((0,e.Xf)(h(_,b))),p):("number"==typeof u&&(p=u),(0,C.e)((_,b)=>function j(h,u,p,_,b,k,L,B){const O=[];let P=0,y=0,S=!1;const E=()=>{S&&!O.length&&!P&&u.complete()},A=H=>P<_?I(H):O.push(H),I=H=>{k&&u.next(H),P++;let ee=!1;(0,e.Xf)(p(H,y++)).subscribe((0,U.x)(u,fe=>{null==b||b(fe),k?A(fe):u.next(fe)},()=>{ee=!0},void 0,()=>{if(ee)try{for(P--;O.length&&P<_;){const fe=O.shift();L?(0,R.f)(u,L,()=>I(fe)):I(fe)}E()}catch(fe){u.error(fe)}}))};return h.subscribe((0,U.x)(u,A,()=>{S=!0,E()})),()=>{null==B||B()}}(_,b,h,p)))}},8675:(kn,Ge,w)=>{"use strict";w.d(Ge,{O:()=>R});var i=w(7272),e=w(3269),C=w(4482);function R(...U){const j=(0,e.yG)(U);return(0,C.e)((F,D)=>{(j?(0,i.z)(U,F,j):(0,i.z)(U,F)).subscribe(D)})}},3900:(kn,Ge,w)=>{"use strict";w.d(Ge,{w:()=>R});var i=w(8421),e=w(4482),C=w(5403);function R(U,j){return(0,e.e)((F,D)=>{let h=null,u=0,p=!1;const _=()=>p&&!h&&D.complete();F.subscribe((0,C.x)(D,b=>{null==h||h.unsubscribe();let k=0;const L=u++;(0,i.Xf)(U(b,L)).subscribe(h=(0,C.x)(D,B=>D.next(j?j(b,B,L,k++):B),()=>{h=null,_()}))},()=>{p=!0,_()}))})}},5698:(kn,Ge,w)=>{"use strict";w.d(Ge,{q:()=>R});var i=w(515),e=w(4482),C=w(5403);function R(U){return U<=0?()=>i.E:(0,e.e)((j,F)=>{let D=0;j.subscribe((0,C.x)(F,h=>{++D<=U&&(F.next(h),U<=D&&F.complete())}))})}},8505:(kn,Ge,w)=>{"use strict";w.d(Ge,{b:()=>U});var i=w(576),e=w(4482),C=w(5403),R=w(4671);function U(j,F,D){const h=(0,i.m)(j)||F||D?{next:j,error:F,complete:D}:j;return h?(0,e.e)((u,p)=>{var _;null===(_=h.subscribe)||void 0===_||_.call(h);let b=!0;u.subscribe((0,C.x)(p,k=>{var L;null===(L=h.next)||void 0===L||L.call(h,k),p.next(k)},()=>{var k;b=!1,null===(k=h.complete)||void 0===k||k.call(h),p.complete()},k=>{var L;b=!1,null===(L=h.error)||void 0===L||L.call(h,k),p.error(k)},()=>{var k,L;b&&(null===(k=h.unsubscribe)||void 0===k||k.call(h)),null===(L=h.finalize)||void 0===L||L.call(h)}))}):R.y}},6063:(kn,Ge,w)=>{"use strict";w.d(Ge,{l:()=>i});const i={now:()=>(i.delegate||Date).now(),delegate:void 0}},3410:(kn,Ge,w)=>{"use strict";w.d(Ge,{z:()=>i});const i={setTimeout(e,C,...R){const{delegate:U}=i;return(null==U?void 0:U.setTimeout)?U.setTimeout(e,C,...R):setTimeout(e,C,...R)},clearTimeout(e){const{delegate:C}=i;return((null==C?void 0:C.clearTimeout)||clearTimeout)(e)},delegate:void 0}},2202:(kn,Ge,w)=>{"use strict";w.d(Ge,{h:()=>e});const e=function i(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(kn,Ge,w)=>{"use strict";w.d(Ge,{L:()=>i});const i="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(kn,Ge,w)=>{"use strict";w.d(Ge,{jO:()=>R,yG:()=>U,_6:()=>j});var i=w(576),e=w(3532);function C(F){return F[F.length-1]}function R(F){return(0,i.m)(C(F))?F.pop():void 0}function U(F){return(0,e.K)(C(F))?F.pop():void 0}function j(F,D){return"number"==typeof C(F)?F.pop():D}},4742:(kn,Ge,w)=>{"use strict";w.d(Ge,{D:()=>U});const{isArray:i}=Array,{getPrototypeOf:e,prototype:C,keys:R}=Object;function U(F){if(1===F.length){const D=F[0];if(i(D))return{args:D,keys:null};if(function j(F){return F&&"object"==typeof F&&e(F)===C}(D)){const h=R(D);return{args:h.map(u=>D[u]),keys:h}}}return{args:F,keys:null}}},8737:(kn,Ge,w)=>{"use strict";function i(e,C){if(e){const R=e.indexOf(C);0<=R&&e.splice(R,1)}}w.d(Ge,{P:()=>i})},3888:(kn,Ge,w)=>{"use strict";function i(e){const R=e(U=>{Error.call(U),U.stack=(new Error).stack});return R.prototype=Object.create(Error.prototype),R.prototype.constructor=R,R}w.d(Ge,{d:()=>i})},1810:(kn,Ge,w)=>{"use strict";function i(e,C){return e.reduce((R,U,j)=>(R[U]=C[j],R),{})}w.d(Ge,{n:()=>i})},2806:(kn,Ge,w)=>{"use strict";w.d(Ge,{x:()=>C,O:()=>R});var i=w(2416);let e=null;function C(U){if(i.v.useDeprecatedSynchronousErrorHandling){const j=!e;if(j&&(e={errorThrown:!1,error:null}),U(),j){const{errorThrown:F,error:D}=e;if(e=null,F)throw D}}else U()}function R(U){i.v.useDeprecatedSynchronousErrorHandling&&e&&(e.errorThrown=!0,e.error=U)}},9672:(kn,Ge,w)=>{"use strict";function i(e,C,R,U=0,j=!1){const F=C.schedule(function(){R(),j?e.add(this.schedule(null,U)):this.unsubscribe()},U);if(e.add(F),!j)return F}w.d(Ge,{f:()=>i})},4671:(kn,Ge,w)=>{"use strict";function i(e){return e}w.d(Ge,{y:()=>i})},1144:(kn,Ge,w)=>{"use strict";w.d(Ge,{z:()=>i});const i=e=>e&&"number"==typeof e.length&&"function"!=typeof e},2206:(kn,Ge,w)=>{"use strict";w.d(Ge,{D:()=>e});var i=w(576);function e(C){return Symbol.asyncIterator&&(0,i.m)(null==C?void 0:C[Symbol.asyncIterator])}},576:(kn,Ge,w)=>{"use strict";function i(e){return"function"==typeof e}w.d(Ge,{m:()=>i})},3670:(kn,Ge,w)=>{"use strict";w.d(Ge,{c:()=>C});var i=w(8822),e=w(576);function C(R){return(0,e.m)(R[i.L])}},6495:(kn,Ge,w)=>{"use strict";w.d(Ge,{T:()=>C});var i=w(2202),e=w(576);function C(R){return(0,e.m)(null==R?void 0:R[i.h])}},8239:(kn,Ge,w)=>{"use strict";w.d(Ge,{t:()=>e});var i=w(576);function e(C){return(0,i.m)(null==C?void 0:C.then)}},3260:(kn,Ge,w)=>{"use strict";w.d(Ge,{Q:()=>C,L:()=>R});var i=w(7582),e=w(576);function C(U){return(0,i.FC)(this,arguments,function*(){const F=U.getReader();try{for(;;){const{value:D,done:h}=yield(0,i.qq)(F.read());if(h)return yield(0,i.qq)(void 0);yield yield(0,i.qq)(D)}}finally{F.releaseLock()}})}function R(U){return(0,e.m)(null==U?void 0:U.getReader)}},3532:(kn,Ge,w)=>{"use strict";w.d(Ge,{K:()=>e});var i=w(576);function e(C){return C&&(0,i.m)(C.schedule)}},4482:(kn,Ge,w)=>{"use strict";w.d(Ge,{A:()=>e,e:()=>C});var i=w(576);function e(R){return(0,i.m)(null==R?void 0:R.lift)}function C(R){return U=>{if(e(U))return U.lift(function(j){try{return R(j,this)}catch(F){this.error(F)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(kn,Ge,w)=>{"use strict";w.d(Ge,{Z:()=>R});var i=w(4004);const{isArray:e}=Array;function R(U){return(0,i.U)(j=>function C(U,j){return e(j)?U(...j):U(j)}(U,j))}},5032:(kn,Ge,w)=>{"use strict";function i(){}w.d(Ge,{Z:()=>i})},7849:(kn,Ge,w)=>{"use strict";w.d(Ge,{h:()=>C});var i=w(2416),e=w(3410);function C(R){e.z.setTimeout(()=>{const{onUnhandledError:U}=i.v;if(!U)throw R;U(R)})}},4532:(kn,Ge,w)=>{"use strict";function i(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}w.d(Ge,{z:()=>i})},1042:(kn,Ge,w)=>{"use strict";w.d(Ge,{Z:()=>_});var i,e=new Uint8Array(16);function C(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(e)}const R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,j=function U(b){return"string"==typeof b&&R.test(b)};for(var F=[],D=0;D<256;++D)F.push((D+256).toString(16).substr(1));const _=function p(b,k,L){var B=(b=b||{}).random||(b.rng||C)();if(B[6]=15&B[6]|64,B[8]=63&B[8]|128,k){L=L||0;for(var O=0;O<16;++O)k[L+O]=B[O];return k}return function h(b){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,L=(F[b[k+0]]+F[b[k+1]]+F[b[k+2]]+F[b[k+3]]+"-"+F[b[k+4]]+F[b[k+5]]+"-"+F[b[k+6]]+F[b[k+7]]+"-"+F[b[k+8]]+F[b[k+9]]+"-"+F[b[k+10]]+F[b[k+11]]+F[b[k+12]]+F[b[k+13]]+F[b[k+14]]+F[b[k+15]]).toLowerCase();if(!j(L))throw TypeError("Stringified UUID is invalid");return L}(B)}},9808:(kn,Ge,w)=>{"use strict";w.d(Ge,{mr:()=>y,Ov:()=>_o,ez:()=>fi,K0:()=>F,Do:()=>E,V_:()=>u,Ye:()=>A,S$:()=>O,mk:()=>bn,sg:()=>vn,O5:()=>ar,tP:()=>si,b0:()=>S,lw:()=>D,EM:()=>Ui,JF:()=>Eo,NF:()=>Io,w_:()=>j,bD:()=>Bi,q:()=>C,Mx:()=>qt,HT:()=>U});var i=w(4893);let e=null;function C(){return e}function U(Ve){e||(e=Ve)}class j{}const F=new i.OlP("DocumentToken");let D=(()=>{class Ve{historyGo(Ke){throw new Error("Not implemented")}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)},Ve.\u0275prov=i.Yz7({token:Ve,factory:function(){return function h(){return(0,i.LFG)(p)}()},providedIn:"platform"}),Ve})();const u=new i.OlP("Location Initialized");let p=(()=>{class Ve extends D{constructor(Ke){super(),this._doc=Ke,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return C().getBaseHref(this._doc)}onPopState(Ke){const dt=C().getGlobalEventTarget(this._doc,"window");return dt.addEventListener("popstate",Ke,!1),()=>dt.removeEventListener("popstate",Ke)}onHashChange(Ke){const dt=C().getGlobalEventTarget(this._doc,"window");return dt.addEventListener("hashchange",Ke,!1),()=>dt.removeEventListener("hashchange",Ke)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(Ke){this.location.pathname=Ke}pushState(Ke,dt,Bt){_()?this._history.pushState(Ke,dt,Bt):this.location.hash=Bt}replaceState(Ke,dt,Bt){_()?this._history.replaceState(Ke,dt,Bt):this.location.hash=Bt}forward(){this._history.forward()}back(){this._history.back()}historyGo(Ke=0){this._history.go(Ke)}getState(){return this._history.state}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.LFG(F))},Ve.\u0275prov=i.Yz7({token:Ve,factory:function(){return function b(){return new p((0,i.LFG)(F))}()},providedIn:"platform"}),Ve})();function _(){return!!window.history.pushState}function k(Ve,lt){if(0==Ve.length)return lt;if(0==lt.length)return Ve;let Ke=0;return Ve.endsWith("/")&&Ke++,lt.startsWith("/")&&Ke++,2==Ke?Ve+lt.substring(1):1==Ke?Ve+lt:Ve+"/"+lt}function L(Ve){const lt=Ve.match(/#|\?|$/),Ke=lt&&lt.index||Ve.length;return Ve.slice(0,Ke-("/"===Ve[Ke-1]?1:0))+Ve.slice(Ke)}function B(Ve){return Ve&&"?"!==Ve[0]?"?"+Ve:Ve}let O=(()=>{class Ve{historyGo(Ke){throw new Error("Not implemented")}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)},Ve.\u0275prov=i.Yz7({token:Ve,factory:function(){return function P(Ve){const lt=(0,i.LFG)(F).location;return new S((0,i.LFG)(D),lt&&lt.origin||"")}()},providedIn:"root"}),Ve})();const y=new i.OlP("appBaseHref");let S=(()=>{class Ve extends O{constructor(Ke,dt){if(super(),this._platformLocation=Ke,this._removeListenerFns=[],null==dt&&(dt=this._platformLocation.getBaseHrefFromDOM()),null==dt)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=dt}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ke){this._removeListenerFns.push(this._platformLocation.onPopState(Ke),this._platformLocation.onHashChange(Ke))}getBaseHref(){return this._baseHref}prepareExternalUrl(Ke){return k(this._baseHref,Ke)}path(Ke=!1){const dt=this._platformLocation.pathname+B(this._platformLocation.search),Bt=this._platformLocation.hash;return Bt&&Ke?`${dt}${Bt}`:dt}pushState(Ke,dt,Bt,hn){const _n=this.prepareExternalUrl(Bt+B(hn));this._platformLocation.pushState(Ke,dt,_n)}replaceState(Ke,dt,Bt,hn){const _n=this.prepareExternalUrl(Bt+B(hn));this._platformLocation.replaceState(Ke,dt,_n)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Ke=0){var dt,Bt;null===(Bt=(dt=this._platformLocation).historyGo)||void 0===Bt||Bt.call(dt,Ke)}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.LFG(D),i.LFG(y,8))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})(),E=(()=>{class Ve extends O{constructor(Ke,dt){super(),this._platformLocation=Ke,this._baseHref="",this._removeListenerFns=[],null!=dt&&(this._baseHref=dt)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Ke){this._removeListenerFns.push(this._platformLocation.onPopState(Ke),this._platformLocation.onHashChange(Ke))}getBaseHref(){return this._baseHref}path(Ke=!1){let dt=this._platformLocation.hash;return null==dt&&(dt="#"),dt.length>0?dt.substring(1):dt}prepareExternalUrl(Ke){const dt=k(this._baseHref,Ke);return dt.length>0?"#"+dt:dt}pushState(Ke,dt,Bt,hn){let _n=this.prepareExternalUrl(Bt+B(hn));0==_n.length&&(_n=this._platformLocation.pathname),this._platformLocation.pushState(Ke,dt,_n)}replaceState(Ke,dt,Bt,hn){let _n=this.prepareExternalUrl(Bt+B(hn));0==_n.length&&(_n=this._platformLocation.pathname),this._platformLocation.replaceState(Ke,dt,_n)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(Ke=0){var dt,Bt;null===(Bt=(dt=this._platformLocation).historyGo)||void 0===Bt||Bt.call(dt,Ke)}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.LFG(D),i.LFG(y,8))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})(),A=(()=>{class Ve{constructor(Ke,dt){this._subject=new i.vpe,this._urlChangeListeners=[],this._platformStrategy=Ke;const Bt=this._platformStrategy.getBaseHref();this._platformLocation=dt,this._baseHref=L(ee(Bt)),this._platformStrategy.onPopState(hn=>{this._subject.emit({url:this.path(!0),pop:!0,state:hn.state,type:hn.type})})}path(Ke=!1){return this.normalize(this._platformStrategy.path(Ke))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(Ke,dt=""){return this.path()==this.normalize(Ke+B(dt))}normalize(Ke){return Ve.stripTrailingSlash(function H(Ve,lt){return Ve&&lt.startsWith(Ve)?lt.substring(Ve.length):lt}(this._baseHref,ee(Ke)))}prepareExternalUrl(Ke){return Ke&&"/"!==Ke[0]&&(Ke="/"+Ke),this._platformStrategy.prepareExternalUrl(Ke)}go(Ke,dt="",Bt=null){this._platformStrategy.pushState(Bt,"",Ke,dt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ke+B(dt)),Bt)}replaceState(Ke,dt="",Bt=null){this._platformStrategy.replaceState(Bt,"",Ke,dt),this._notifyUrlChangeListeners(this.prepareExternalUrl(Ke+B(dt)),Bt)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(Ke=0){var dt,Bt;null===(Bt=(dt=this._platformStrategy).historyGo)||void 0===Bt||Bt.call(dt,Ke)}onUrlChange(Ke){this._urlChangeListeners.push(Ke),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(dt=>{this._notifyUrlChangeListeners(dt.url,dt.state)}))}_notifyUrlChangeListeners(Ke="",dt){this._urlChangeListeners.forEach(Bt=>Bt(Ke,dt))}subscribe(Ke,dt,Bt){return this._subject.subscribe({next:Ke,error:dt,complete:Bt})}}return Ve.normalizeQueryParams=B,Ve.joinWithSlash=k,Ve.stripTrailingSlash=L,Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.LFG(O),i.LFG(D))},Ve.\u0275prov=i.Yz7({token:Ve,factory:function(){return function I(){return new A((0,i.LFG)(O),(0,i.LFG)(D))}()},providedIn:"root"}),Ve})();function ee(Ve){return Ve.replace(/\/index.html$/,"")}var be=(()=>((be=be||{})[be.Zero=0]="Zero",be[be.One=1]="One",be[be.Two=2]="Two",be[be.Few=3]="Few",be[be.Many=4]="Many",be[be.Other=5]="Other",be))();const ce=i.kL8;class Un{}let Ct=(()=>{class Ve extends Un{constructor(Ke){super(),this.locale=Ke}getPluralCategory(Ke,dt){switch(ce(dt||this.locale)(Ke)){case be.Zero:return"zero";case be.One:return"one";case be.Two:return"two";case be.Few:return"few";case be.Many:return"many";default:return"other"}}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.LFG(i.soG))},Ve.\u0275prov=i.Yz7({token:Ve,factory:Ve.\u0275fac}),Ve})();function qt(Ve,lt){lt=encodeURIComponent(lt);for(const Ke of Ve.split(";")){const dt=Ke.indexOf("="),[Bt,hn]=-1==dt?[Ke,""]:[Ke.slice(0,dt),Ke.slice(dt+1)];if(Bt.trim()===lt)return decodeURIComponent(hn)}return null}let bn=(()=>{class Ve{constructor(Ke,dt,Bt,hn){this._iterableDiffers=Ke,this._keyValueDiffers=dt,this._ngEl=Bt,this._renderer=hn,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(Ke){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof Ke?Ke.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(Ke){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof Ke?Ke.split(/\s+/):Ke,this._rawClass&&((0,i.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const Ke=this._iterableDiffer.diff(this._rawClass);Ke&&this._applyIterableChanges(Ke)}else if(this._keyValueDiffer){const Ke=this._keyValueDiffer.diff(this._rawClass);Ke&&this._applyKeyValueChanges(Ke)}}_applyKeyValueChanges(Ke){Ke.forEachAddedItem(dt=>this._toggleClass(dt.key,dt.currentValue)),Ke.forEachChangedItem(dt=>this._toggleClass(dt.key,dt.currentValue)),Ke.forEachRemovedItem(dt=>{dt.previousValue&&this._toggleClass(dt.key,!1)})}_applyIterableChanges(Ke){Ke.forEachAddedItem(dt=>{if("string"!=typeof dt.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,i.AaK)(dt.item)}`);this._toggleClass(dt.item,!0)}),Ke.forEachRemovedItem(dt=>this._toggleClass(dt.item,!1))}_applyClasses(Ke){Ke&&(Array.isArray(Ke)||Ke instanceof Set?Ke.forEach(dt=>this._toggleClass(dt,!0)):Object.keys(Ke).forEach(dt=>this._toggleClass(dt,!!Ke[dt])))}_removeClasses(Ke){Ke&&(Array.isArray(Ke)||Ke instanceof Set?Ke.forEach(dt=>this._toggleClass(dt,!1)):Object.keys(Ke).forEach(dt=>this._toggleClass(dt,!1)))}_toggleClass(Ke,dt){(Ke=Ke.trim())&&Ke.split(/\s+/g).forEach(Bt=>{dt?this._renderer.addClass(this._ngEl.nativeElement,Bt):this._renderer.removeClass(this._ngEl.nativeElement,Bt)})}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.Y36(i.ZZ4),i.Y36(i.aQg),i.Y36(i.SBq),i.Y36(i.Qsj))},Ve.\u0275dir=i.lG2({type:Ve,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),Ve})();class Dt{constructor(lt,Ke,dt,Bt){this.$implicit=lt,this.ngForOf=Ke,this.index=dt,this.count=Bt}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vn=(()=>{class Ve{constructor(Ke,dt,Bt){this._viewContainer=Ke,this._template=dt,this._differs=Bt,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(Ke){this._ngForOf=Ke,this._ngForOfDirty=!0}set ngForTrackBy(Ke){this._trackByFn=Ke}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(Ke){Ke&&(this._template=Ke)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Ke=this._ngForOf;!this._differ&&Ke&&(this._differ=this._differs.find(Ke).create(this.ngForTrackBy))}if(this._differ){const Ke=this._differ.diff(this._ngForOf);Ke&&this._applyChanges(Ke)}}_applyChanges(Ke){const dt=this._viewContainer;Ke.forEachOperation((Bt,hn,_n)=>{if(null==Bt.previousIndex)dt.createEmbeddedView(this._template,new Dt(Bt.item,this._ngForOf,-1,-1),null===_n?void 0:_n);else if(null==_n)dt.remove(null===hn?void 0:hn);else if(null!==hn){const zn=dt.get(hn);dt.move(zn,_n),Rn(zn,Bt)}});for(let Bt=0,hn=dt.length;Bt<hn;Bt++){const zn=dt.get(Bt).context;zn.index=Bt,zn.count=hn,zn.ngForOf=this._ngForOf}Ke.forEachIdentityChange(Bt=>{Rn(dt.get(Bt.currentIndex),Bt)})}static ngTemplateContextGuard(Ke,dt){return!0}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.Y36(i.s_b),i.Y36(i.Rgc),i.Y36(i.ZZ4))},Ve.\u0275dir=i.lG2({type:Ve,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),Ve})();function Rn(Ve,lt){Ve.context.$implicit=lt.item}let ar=(()=>{class Ve{constructor(Ke,dt){this._viewContainer=Ke,this._context=new ur,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=dt}set ngIf(Ke){this._context.$implicit=this._context.ngIf=Ke,this._updateView()}set ngIfThen(Ke){br("ngIfThen",Ke),this._thenTemplateRef=Ke,this._thenViewRef=null,this._updateView()}set ngIfElse(Ke){br("ngIfElse",Ke),this._elseTemplateRef=Ke,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Ke,dt){return!0}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.Y36(i.s_b),i.Y36(i.Rgc))},Ve.\u0275dir=i.lG2({type:Ve,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),Ve})();class ur{constructor(){this.$implicit=null,this.ngIf=null}}function br(Ve,lt){if(lt&&!lt.createEmbeddedView)throw new Error(`${Ve} must be a TemplateRef, but received '${(0,i.AaK)(lt)}'.`)}let si=(()=>{class Ve{constructor(Ke){this._viewContainerRef=Ke,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(Ke){if(Ke.ngTemplateOutlet){const dt=this._viewContainerRef;this._viewRef&&dt.remove(dt.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?dt.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&Ke.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.Y36(i.s_b))},Ve.\u0275dir=i.lG2({type:Ve,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[i.TTD]}),Ve})();class Do{createSubscription(lt,Ke){return lt.subscribe({next:Ke,error:dt=>{throw dt}})}dispose(lt){lt.unsubscribe()}onDestroy(lt){lt.unsubscribe()}}class eo{createSubscription(lt,Ke){return lt.then(Ke,dt=>{throw dt})}dispose(lt){}onDestroy(lt){}}const mo=new eo,$i=new Do;let _o=(()=>{class Ve{constructor(Ke){this._ref=Ke,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(Ke){return this._obj?Ke!==this._obj?(this._dispose(),this.transform(Ke)):this._latestValue:(Ke&&this._subscribe(Ke),this._latestValue)}_subscribe(Ke){this._obj=Ke,this._strategy=this._selectStrategy(Ke),this._subscription=this._strategy.createSubscription(Ke,dt=>this._updateLatestValue(Ke,dt))}_selectStrategy(Ke){if((0,i.QGY)(Ke))return mo;if((0,i.F4k)(Ke))return $i;throw function Lr(Ve,lt){return new i.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(Ke,dt){Ke===this._obj&&(this._latestValue=dt,this._ref.markForCheck())}}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)(i.Y36(i.sBO,16))},Ve.\u0275pipe=i.Yjl({name:"async",type:Ve,pure:!1}),Ve})(),fi=(()=>{class Ve{}return Ve.\u0275fac=function(Ke){return new(Ke||Ve)},Ve.\u0275mod=i.oAB({type:Ve}),Ve.\u0275inj=i.cJS({providers:[{provide:Un,useClass:Ct}]}),Ve})();const Bi="browser";function Io(Ve){return Ve===Bi}let Ui=(()=>{class Ve{}return Ve.\u0275prov=(0,i.Yz7)({token:Ve,providedIn:"root",factory:()=>new wi((0,i.LFG)(F),window)}),Ve})();class wi{constructor(lt,Ke){this.document=lt,this.window=Ke,this.offset=()=>[0,0]}setOffset(lt){this.offset=Array.isArray(lt)?()=>lt:lt}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(lt){this.supportsScrolling()&&this.window.scrollTo(lt[0],lt[1])}scrollToAnchor(lt){if(!this.supportsScrolling())return;const Ke=function us(Ve,lt){const Ke=Ve.getElementById(lt)||Ve.getElementsByName(lt)[0];if(Ke)return Ke;if("function"==typeof Ve.createTreeWalker&&Ve.body&&(Ve.body.createShadowRoot||Ve.body.attachShadow)){const dt=Ve.createTreeWalker(Ve.body,NodeFilter.SHOW_ELEMENT);let Bt=dt.currentNode;for(;Bt;){const hn=Bt.shadowRoot;if(hn){const _n=hn.getElementById(lt)||hn.querySelector(`[name="${lt}"]`);if(_n)return _n}Bt=dt.nextNode()}}return null}(this.document,lt);Ke&&(this.scrollToElement(Ke),Ke.focus())}setHistoryScrollRestoration(lt){if(this.supportScrollRestoration()){const Ke=this.window.history;Ke&&Ke.scrollRestoration&&(Ke.scrollRestoration=lt)}}scrollToElement(lt){const Ke=lt.getBoundingClientRect(),dt=Ke.left+this.window.pageXOffset,Bt=Ke.top+this.window.pageYOffset,hn=this.offset();this.window.scrollTo(dt-hn[0],Bt-hn[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const lt=yo(this.window.history)||yo(Object.getPrototypeOf(this.window.history));return!(!lt||!lt.writable&&!lt.set)}catch(lt){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(lt){return!1}}}function yo(Ve){return Object.getOwnPropertyDescriptor(Ve,"scrollRestoration")}class Eo{}},520:(kn,Ge,w)=>{"use strict";w.d(Ge,{eN:()=>de,JF:()=>te,WM:()=>u});var i=w(9808),e=w(4893),C=w(9646),R=w(8306),U=w(4351),j=w(9300),F=w(4004);class D{}class h{}class u{constructor(oe){this.normalizedNames=new Map,this.lazyUpdate=null,oe?this.lazyInit="string"==typeof oe?()=>{this.headers=new Map,oe.split("\n").forEach(Ce=>{const Oe=Ce.indexOf(":");if(Oe>0){const Ze=Ce.slice(0,Oe),st=Ze.toLowerCase(),et=Ce.slice(Oe+1).trim();this.maybeSetNormalizedName(Ze,st),this.headers.has(st)?this.headers.get(st).push(et):this.headers.set(st,[et])}})}:()=>{this.headers=new Map,Object.keys(oe).forEach(Ce=>{let Oe=oe[Ce];const Ze=Ce.toLowerCase();"string"==typeof Oe&&(Oe=[Oe]),Oe.length>0&&(this.headers.set(Ze,Oe),this.maybeSetNormalizedName(Ce,Ze))})}:this.headers=new Map}has(oe){return this.init(),this.headers.has(oe.toLowerCase())}get(oe){this.init();const Ce=this.headers.get(oe.toLowerCase());return Ce&&Ce.length>0?Ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(oe){return this.init(),this.headers.get(oe.toLowerCase())||null}append(oe,Ce){return this.clone({name:oe,value:Ce,op:"a"})}set(oe,Ce){return this.clone({name:oe,value:Ce,op:"s"})}delete(oe,Ce){return this.clone({name:oe,value:Ce,op:"d"})}maybeSetNormalizedName(oe,Ce){this.normalizedNames.has(Ce)||this.normalizedNames.set(Ce,oe)}init(){this.lazyInit&&(this.lazyInit instanceof u?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(oe=>this.applyUpdate(oe)),this.lazyUpdate=null))}copyFrom(oe){oe.init(),Array.from(oe.headers.keys()).forEach(Ce=>{this.headers.set(Ce,oe.headers.get(Ce)),this.normalizedNames.set(Ce,oe.normalizedNames.get(Ce))})}clone(oe){const Ce=new u;return Ce.lazyInit=this.lazyInit&&this.lazyInit instanceof u?this.lazyInit:this,Ce.lazyUpdate=(this.lazyUpdate||[]).concat([oe]),Ce}applyUpdate(oe){const Ce=oe.name.toLowerCase();switch(oe.op){case"a":case"s":let Oe=oe.value;if("string"==typeof Oe&&(Oe=[Oe]),0===Oe.length)return;this.maybeSetNormalizedName(oe.name,Ce);const Ze=("a"===oe.op?this.headers.get(Ce):void 0)||[];Ze.push(...Oe),this.headers.set(Ce,Ze);break;case"d":const st=oe.value;if(st){let et=this.headers.get(Ce);if(!et)return;et=et.filter(ct=>-1===st.indexOf(ct)),0===et.length?(this.headers.delete(Ce),this.normalizedNames.delete(Ce)):this.headers.set(Ce,et)}else this.headers.delete(Ce),this.normalizedNames.delete(Ce)}}forEach(oe){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ce=>oe(this.normalizedNames.get(Ce),this.headers.get(Ce)))}}class p{encodeKey(oe){return L(oe)}encodeValue(oe){return L(oe)}decodeKey(oe){return decodeURIComponent(oe)}decodeValue(oe){return decodeURIComponent(oe)}}const b=/%(\d[a-f0-9])/gi,k={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function L(K){return encodeURIComponent(K).replace(b,(oe,Ce)=>{var Oe;return null!==(Oe=k[Ce])&&void 0!==Oe?Oe:oe})}function B(K){return`${K}`}class O{constructor(oe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=oe.encoder||new p,oe.fromString){if(oe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _(K,oe){const Ce=new Map;return K.length>0&&K.replace(/^\?/,"").split("&").forEach(Ze=>{const st=Ze.indexOf("="),[et,ct]=-1==st?[oe.decodeKey(Ze),""]:[oe.decodeKey(Ze.slice(0,st)),oe.decodeValue(Ze.slice(st+1))],xt=Ce.get(et)||[];xt.push(ct),Ce.set(et,xt)}),Ce}(oe.fromString,this.encoder)}else oe.fromObject?(this.map=new Map,Object.keys(oe.fromObject).forEach(Ce=>{const Oe=oe.fromObject[Ce];this.map.set(Ce,Array.isArray(Oe)?Oe:[Oe])})):this.map=null}has(oe){return this.init(),this.map.has(oe)}get(oe){this.init();const Ce=this.map.get(oe);return Ce?Ce[0]:null}getAll(oe){return this.init(),this.map.get(oe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(oe,Ce){return this.clone({param:oe,value:Ce,op:"a"})}appendAll(oe){const Ce=[];return Object.keys(oe).forEach(Oe=>{const Ze=oe[Oe];Array.isArray(Ze)?Ze.forEach(st=>{Ce.push({param:Oe,value:st,op:"a"})}):Ce.push({param:Oe,value:Ze,op:"a"})}),this.clone(Ce)}set(oe,Ce){return this.clone({param:oe,value:Ce,op:"s"})}delete(oe,Ce){return this.clone({param:oe,value:Ce,op:"d"})}toString(){return this.init(),this.keys().map(oe=>{const Ce=this.encoder.encodeKey(oe);return this.map.get(oe).map(Oe=>Ce+"="+this.encoder.encodeValue(Oe)).join("&")}).filter(oe=>""!==oe).join("&")}clone(oe){const Ce=new O({encoder:this.encoder});return Ce.cloneFrom=this.cloneFrom||this,Ce.updates=(this.updates||[]).concat(oe),Ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(oe=>this.map.set(oe,this.cloneFrom.map.get(oe))),this.updates.forEach(oe=>{switch(oe.op){case"a":case"s":const Ce=("a"===oe.op?this.map.get(oe.param):void 0)||[];Ce.push(B(oe.value)),this.map.set(oe.param,Ce);break;case"d":if(void 0===oe.value){this.map.delete(oe.param);break}{let Oe=this.map.get(oe.param)||[];const Ze=Oe.indexOf(B(oe.value));-1!==Ze&&Oe.splice(Ze,1),Oe.length>0?this.map.set(oe.param,Oe):this.map.delete(oe.param)}}}),this.cloneFrom=this.updates=null)}}class y{constructor(){this.map=new Map}set(oe,Ce){return this.map.set(oe,Ce),this}get(oe){return this.map.has(oe)||this.map.set(oe,oe.defaultValue()),this.map.get(oe)}delete(oe){return this.map.delete(oe),this}has(oe){return this.map.has(oe)}keys(){return this.map.keys()}}function E(K){return"undefined"!=typeof ArrayBuffer&&K instanceof ArrayBuffer}function A(K){return"undefined"!=typeof Blob&&K instanceof Blob}function I(K){return"undefined"!=typeof FormData&&K instanceof FormData}class ee{constructor(oe,Ce,Oe,Ze){let st;if(this.url=Ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=oe.toUpperCase(),function S(K){switch(K){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Ze?(this.body=void 0!==Oe?Oe:null,st=Ze):st=Oe,st&&(this.reportProgress=!!st.reportProgress,this.withCredentials=!!st.withCredentials,st.responseType&&(this.responseType=st.responseType),st.headers&&(this.headers=st.headers),st.context&&(this.context=st.context),st.params&&(this.params=st.params)),this.headers||(this.headers=new u),this.context||(this.context=new y),this.params){const et=this.params.toString();if(0===et.length)this.urlWithParams=Ce;else{const ct=Ce.indexOf("?");this.urlWithParams=Ce+(-1===ct?"?":ct<Ce.length-1?"&":"")+et}}else this.params=new O,this.urlWithParams=Ce}serializeBody(){return null===this.body?null:E(this.body)||A(this.body)||I(this.body)||function H(K){return"undefined"!=typeof URLSearchParams&&K instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof O?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||I(this.body)?null:A(this.body)?this.body.type||null:E(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof O?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(oe={}){var Ce;const Oe=oe.method||this.method,Ze=oe.url||this.url,st=oe.responseType||this.responseType,et=void 0!==oe.body?oe.body:this.body,ct=void 0!==oe.withCredentials?oe.withCredentials:this.withCredentials,xt=void 0!==oe.reportProgress?oe.reportProgress:this.reportProgress;let tt=oe.headers||this.headers,Et=oe.params||this.params;const Kt=null!==(Ce=oe.context)&&void 0!==Ce?Ce:this.context;return void 0!==oe.setHeaders&&(tt=Object.keys(oe.setHeaders).reduce((_t,At)=>_t.set(At,oe.setHeaders[At]),tt)),oe.setParams&&(Et=Object.keys(oe.setParams).reduce((_t,At)=>_t.set(At,oe.setParams[At]),Et)),new ee(Oe,Ze,et,{params:Et,headers:tt,context:Kt,reportProgress:xt,responseType:st,withCredentials:ct})}}var fe=(()=>((fe=fe||{})[fe.Sent=0]="Sent",fe[fe.UploadProgress=1]="UploadProgress",fe[fe.ResponseHeader=2]="ResponseHeader",fe[fe.DownloadProgress=3]="DownloadProgress",fe[fe.Response=4]="Response",fe[fe.User=5]="User",fe))();class ue{constructor(oe,Ce=200,Oe="OK"){this.headers=oe.headers||new u,this.status=void 0!==oe.status?oe.status:Ce,this.statusText=oe.statusText||Oe,this.url=oe.url||null,this.ok=this.status>=200&&this.status<300}}class be extends ue{constructor(oe={}){super(oe),this.type=fe.ResponseHeader}clone(oe={}){return new be({headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class q extends ue{constructor(oe={}){super(oe),this.type=fe.Response,this.body=void 0!==oe.body?oe.body:null}clone(oe={}){return new q({body:void 0!==oe.body?oe.body:this.body,headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class se extends ue{constructor(oe){super(oe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${oe.url||"(unknown url)"}`:`Http failure response for ${oe.url||"(unknown url)"}: ${oe.status} ${oe.statusText}`,this.error=oe.error||null}}function V(K,oe){return{body:oe,headers:K.headers,context:K.context,observe:K.observe,params:K.params,reportProgress:K.reportProgress,responseType:K.responseType,withCredentials:K.withCredentials}}let de=(()=>{class K{constructor(Ce){this.handler=Ce}request(Ce,Oe,Ze={}){let st;if(Ce instanceof ee)st=Ce;else{let xt,tt;xt=Ze.headers instanceof u?Ze.headers:new u(Ze.headers),Ze.params&&(tt=Ze.params instanceof O?Ze.params:new O({fromObject:Ze.params})),st=new ee(Ce,Oe,void 0!==Ze.body?Ze.body:null,{headers:xt,context:Ze.context,params:tt,reportProgress:Ze.reportProgress,responseType:Ze.responseType||"json",withCredentials:Ze.withCredentials})}const et=(0,C.of)(st).pipe((0,U.b)(xt=>this.handler.handle(xt)));if(Ce instanceof ee||"events"===Ze.observe)return et;const ct=et.pipe((0,j.h)(xt=>xt instanceof q));switch(Ze.observe||"body"){case"body":switch(st.responseType){case"arraybuffer":return ct.pipe((0,F.U)(xt=>{if(null!==xt.body&&!(xt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return xt.body}));case"blob":return ct.pipe((0,F.U)(xt=>{if(null!==xt.body&&!(xt.body instanceof Blob))throw new Error("Response is not a Blob.");return xt.body}));case"text":return ct.pipe((0,F.U)(xt=>{if(null!==xt.body&&"string"!=typeof xt.body)throw new Error("Response is not a string.");return xt.body}));default:return ct.pipe((0,F.U)(xt=>xt.body))}case"response":return ct;default:throw new Error(`Unreachable: unhandled observe type ${Ze.observe}}`)}}delete(Ce,Oe={}){return this.request("DELETE",Ce,Oe)}get(Ce,Oe={}){return this.request("GET",Ce,Oe)}head(Ce,Oe={}){return this.request("HEAD",Ce,Oe)}jsonp(Ce,Oe){return this.request("JSONP",Ce,{params:(new O).append(Oe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ce,Oe={}){return this.request("OPTIONS",Ce,Oe)}patch(Ce,Oe,Ze={}){return this.request("PATCH",Ce,V(Ze,Oe))}post(Ce,Oe,Ze={}){return this.request("POST",Ce,V(Ze,Oe))}put(Ce,Oe,Ze={}){return this.request("PUT",Ce,V(Ze,Oe))}}return K.\u0275fac=function(Ce){return new(Ce||K)(e.LFG(D))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})();class Q{constructor(oe,Ce){this.next=oe,this.interceptor=Ce}handle(oe){return this.interceptor.intercept(oe,this.next)}}const pe=new e.OlP("HTTP_INTERCEPTORS");let me=(()=>{class K{intercept(Ce,Oe){return Oe.handle(Ce)}}return K.\u0275fac=function(Ce){return new(Ce||K)},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})();const je=/^\)\]\}',?\n/;let He=(()=>{class K{constructor(Ce){this.xhrFactory=Ce}handle(Ce){if("JSONP"===Ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R.y(Oe=>{const Ze=this.xhrFactory.build();if(Ze.open(Ce.method,Ce.urlWithParams),Ce.withCredentials&&(Ze.withCredentials=!0),Ce.headers.forEach((At,Pt)=>Ze.setRequestHeader(At,Pt.join(","))),Ce.headers.has("Accept")||Ze.setRequestHeader("Accept","application/json, text/plain, */*"),!Ce.headers.has("Content-Type")){const At=Ce.detectContentTypeHeader();null!==At&&Ze.setRequestHeader("Content-Type",At)}if(Ce.responseType){const At=Ce.responseType.toLowerCase();Ze.responseType="json"!==At?At:"text"}const st=Ce.serializeBody();let et=null;const ct=()=>{if(null!==et)return et;const At=1223===Ze.status?204:Ze.status,Pt=Ze.statusText||"OK",Yt=new u(Ze.getAllResponseHeaders()),jt=function Pe(K){return"responseURL"in K&&K.responseURL?K.responseURL:/^X-Request-URL:/m.test(K.getAllResponseHeaders())?K.getResponseHeader("X-Request-URL"):null}(Ze)||Ce.url;return et=new be({headers:Yt,status:At,statusText:Pt,url:jt}),et},xt=()=>{let{headers:At,status:Pt,statusText:Yt,url:jt}=ct(),en=null;204!==Pt&&(en=void 0===Ze.response?Ze.responseText:Ze.response),0===Pt&&(Pt=en?200:0);let an=Pt>=200&&Pt<300;if("json"===Ce.responseType&&"string"==typeof en){const Ln=en;en=en.replace(je,"");try{en=""!==en?JSON.parse(en):null}catch(wn){en=Ln,an&&(an=!1,en={error:wn,text:en})}}an?(Oe.next(new q({body:en,headers:At,status:Pt,statusText:Yt,url:jt||void 0})),Oe.complete()):Oe.error(new se({error:en,headers:At,status:Pt,statusText:Yt,url:jt||void 0}))},tt=At=>{const{url:Pt}=ct(),Yt=new se({error:At,status:Ze.status||0,statusText:Ze.statusText||"Unknown Error",url:Pt||void 0});Oe.error(Yt)};let Et=!1;const Kt=At=>{Et||(Oe.next(ct()),Et=!0);let Pt={type:fe.DownloadProgress,loaded:At.loaded};At.lengthComputable&&(Pt.total=At.total),"text"===Ce.responseType&&!!Ze.responseText&&(Pt.partialText=Ze.responseText),Oe.next(Pt)},_t=At=>{let Pt={type:fe.UploadProgress,loaded:At.loaded};At.lengthComputable&&(Pt.total=At.total),Oe.next(Pt)};return Ze.addEventListener("load",xt),Ze.addEventListener("error",tt),Ze.addEventListener("timeout",tt),Ze.addEventListener("abort",tt),Ce.reportProgress&&(Ze.addEventListener("progress",Kt),null!==st&&Ze.upload&&Ze.upload.addEventListener("progress",_t)),Ze.send(st),Oe.next({type:fe.Sent}),()=>{Ze.removeEventListener("error",tt),Ze.removeEventListener("abort",tt),Ze.removeEventListener("load",xt),Ze.removeEventListener("timeout",tt),Ce.reportProgress&&(Ze.removeEventListener("progress",Kt),null!==st&&Ze.upload&&Ze.upload.removeEventListener("progress",_t)),Ze.readyState!==Ze.DONE&&Ze.abort()}})}}return K.\u0275fac=function(Ce){return new(Ce||K)(e.LFG(i.JF))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})();const Le=new e.OlP("XSRF_COOKIE_NAME"),ye=new e.OlP("XSRF_HEADER_NAME");class ae{}let W=(()=>{class K{constructor(Ce,Oe,Ze){this.doc=Ce,this.platform=Oe,this.cookieName=Ze,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ce=this.doc.cookie||"";return Ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,i.Mx)(Ce,this.cookieName),this.lastCookieString=Ce),this.lastToken}}return K.\u0275fac=function(Ce){return new(Ce||K)(e.LFG(i.K0),e.LFG(e.Lbi),e.LFG(Le))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})(),ce=(()=>{class K{constructor(Ce,Oe){this.tokenService=Ce,this.headerName=Oe}intercept(Ce,Oe){const Ze=Ce.url.toLowerCase();if("GET"===Ce.method||"HEAD"===Ce.method||Ze.startsWith("http://")||Ze.startsWith("https://"))return Oe.handle(Ce);const st=this.tokenService.getToken();return null!==st&&!Ce.headers.has(this.headerName)&&(Ce=Ce.clone({headers:Ce.headers.set(this.headerName,st)})),Oe.handle(Ce)}}return K.\u0275fac=function(Ce){return new(Ce||K)(e.LFG(ae),e.LFG(ye))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})(),De=(()=>{class K{constructor(Ce,Oe){this.backend=Ce,this.injector=Oe,this.chain=null}handle(Ce){if(null===this.chain){const Oe=this.injector.get(pe,[]);this.chain=Oe.reduceRight((Ze,st)=>new Q(Ze,st),this.backend)}return this.chain.handle(Ce)}}return K.\u0275fac=function(Ce){return new(Ce||K)(e.LFG(h),e.LFG(e.zs3))},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac}),K})(),z=(()=>{class K{static disable(){return{ngModule:K,providers:[{provide:ce,useClass:me}]}}static withOptions(Ce={}){return{ngModule:K,providers:[Ce.cookieName?{provide:Le,useValue:Ce.cookieName}:[],Ce.headerName?{provide:ye,useValue:Ce.headerName}:[]]}}}return K.\u0275fac=function(Ce){return new(Ce||K)},K.\u0275mod=e.oAB({type:K}),K.\u0275inj=e.cJS({providers:[ce,{provide:pe,useExisting:ce,multi:!0},{provide:ae,useClass:W},{provide:Le,useValue:"XSRF-TOKEN"},{provide:ye,useValue:"X-XSRF-TOKEN"}]}),K})(),te=(()=>{class K{}return K.\u0275fac=function(Ce){return new(Ce||K)},K.\u0275mod=e.oAB({type:K}),K.\u0275inj=e.cJS({providers:[de,{provide:D,useClass:De},He,{provide:h,useExisting:He}],imports:[[z.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),K})()},4893:(kn,Ge,w)=>{"use strict";w.d(Ge,{deG:()=>Zu,tb:()=>T0,AFp:()=>v0,ip1:()=>U_,CZH:()=>sf,hGG:()=>pC,z2F:()=>Xh,sBO:()=>Kb,Sil:()=>V_,_Vd:()=>Wh,EJc:()=>C0,SBq:()=>Yh,qLn:()=>Ml,vpe:()=>Xa,tBr:()=>hl,XFs:()=>$,OlP:()=>Mi,zs3:()=>ys,ZZ4:()=>nm,aQg:()=>rm,soG:()=>em,YKP:()=>Dy,h0i:()=>tf,PXZ:()=>Bb,R0b:()=>Os,FiY:()=>ai,Lbi:()=>E0,g9A:()=>y0,Qsj:()=>ST,FYo:()=>by,JOm:()=>Fo,q3G:()=>Pr,WD2:()=>Br,tp0:()=>gl,Rgc:()=>Jh,dDg:()=>D0,GfV:()=>Cy,s_b:()=>qp,ifc:()=>tt,eFA:()=>I0,G48:()=>Zb,Gpc:()=>L,_c5:()=>lC,VLi:()=>Lb,c2e:()=>b0,zSh:()=>Vd,wAp:()=>yr,vHH:()=>y,EiD:()=>Ys,mCW:()=>_l,qzn:()=>ml,JVY:()=>id,pB0:()=>Of,eBb:()=>hg,L6k:()=>fg,LAX:()=>gg,cg1:()=>p_,kL8:()=>Kv,yhl:()=>xf,dqk:()=>Pt,sIi:()=>Ru,CqO:()=>Up,QGY:()=>Uh,F4k:()=>Bp,RDi:()=>Ve,AaK:()=>_,z3N:()=>Hs,qOj:()=>Mh,TTD:()=>fi,_Bn:()=>yy,xp6:()=>Ar,uIk:()=>Ph,Tol:()=>Ts,Gre:()=>Nv,ekj:()=>ei,Suo:()=>zy,Xpm:()=>Ft,lG2:()=>Zt,Yz7:()=>He,cJS:()=>ye,oAB:()=>rt,Yjl:()=>Jt,Y36:()=>Lu,_UZ:()=>Np,qZA:()=>Bh,TgZ:()=>kh,EpF:()=>kp,n5z:()=>dl,Ikx:()=>g_,SDv:()=>my,QtT:()=>_y,pQV:()=>v_,LFG:()=>oo,$8M:()=>aa,$Z:()=>Rp,NdJ:()=>jh,CRH:()=>qy,oxw:()=>r,ALo:()=>Uy,lcZ:()=>jy,xi3:()=>Vy,Hsn:()=>v,F$t:()=>g,Q6J:()=>Lh,s9C:()=>x,MGl:()=>Y,hYB:()=>ie,DdM:()=>xy,VKq:()=>Oy,WLB:()=>wy,kEZ:()=>Ry,iGM:()=>Yy,MAs:()=>Ih,Jf7:()=>pd,CHM:()=>An,oJD:()=>nc,LSH:()=>su,Udp:()=>hi,YNc:()=>Tp,W1O:()=>e0,_uU:()=>Dv,Oqu:()=>f_,hij:()=>Gp,AsE:()=>h_,Gf:()=>$y});var i=w(7579),e=w(727),C=w(8306),R=w(6451),U=w(8421),j=w(930),F=w(4482);function h(o,l,...d){if(!0===l)return void o();if(!1===l)return;const m=new j.Hp({next:()=>{m.unsubscribe(),o()}});return(0,U.Xf)(l(...d)).subscribe(m)}function u(o){for(let l in o)if(o[l]===u)return l;throw Error("Could not find renamed property on target object.")}function p(o,l){for(const d in l)l.hasOwnProperty(d)&&!o.hasOwnProperty(d)&&(o[d]=l[d])}function _(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(_).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const l=o.toString();if(null==l)return""+l;const d=l.indexOf("\n");return-1===d?l:l.substring(0,d)}function b(o,l){return null==o||""===o?null===l?"":l:null==l||""===l?o:o+" "+l}const k=u({__forward_ref__:u});function L(o){return o.__forward_ref__=L,o.toString=function(){return _(this())},o}function B(o){return O(o)?o():o}function O(o){return"function"==typeof o&&o.hasOwnProperty(k)&&o.__forward_ref__===L}class y extends Error{constructor(l,d){super(function S(o,l){return`NG0${Math.abs(o)}${l?": "+l:""}`}(l,d)),this.code=l}}function E(o){return"string"==typeof o?o:null==o?"":String(o)}function A(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():E(o)}function fe(o,l){const d=l?` in ${l}`:"";throw new y(-201,`No provider for ${A(o)} found${d}`)}function Ue(o,l,d,m){throw new Error(`ASSERTION ERROR: ${o}`+(null==m?"":` [Expected=> ${d} ${m} ${l} <=Actual]`))}function He(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function ye(o){return{providers:o.providers||[],imports:o.imports||[]}}function ae(o){return W(o,ne)||W(o,te)}function W(o,l){return o.hasOwnProperty(l)?o[l]:null}function le(o){return o&&(o.hasOwnProperty(z)||o.hasOwnProperty(X))?o[z]:null}const ne=u({\u0275prov:u}),z=u({\u0275inj:u}),te=u({ngInjectableDef:u}),X=u({ngInjectorDef:u});var $=(()=>(($=$||{})[$.Default=0]="Default",$[$.Host=1]="Host",$[$.Self=2]="Self",$[$.SkipSelf=4]="SkipSelf",$[$.Optional=8]="Optional",$))();let K;function Ce(o){const l=K;return K=o,l}function Oe(o,l,d){const m=ae(o);return m&&"root"==m.providedIn?void 0===m.value?m.value=m.factory():m.value:d&$.Optional?null:void 0!==l?l:void fe(_(o),"Injector")}function st(o){return{toString:o}.toString()}var et=(()=>((et=et||{})[et.OnPush=0]="OnPush",et[et.Default=1]="Default",et))(),tt=(()=>{return(o=tt||(tt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",tt;var o})();const Et="undefined"!=typeof globalThis&&globalThis,Kt="undefined"!=typeof window&&window,_t="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=Et||"undefined"!=typeof global&&global||Kt||_t,en={},an=[],Ln=u({\u0275cmp:u}),wn=u({\u0275dir:u}),Vn=u({\u0275pipe:u}),Hn=u({\u0275mod:u}),it=u({\u0275fac:u}),Qe=u({__NG_ELEMENT_ID__:u});let mt=0;function Ft(o){return st(()=>{const d={},m={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===et.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||an,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||tt.Emulated,id:"c",styles:o.styles||an,_:null,setInput:null,schemas:o.schemas||null,tView:null},M=o.directives,G=o.features,re=o.pipes;return m.id+=mt++,m.inputs=yt(o.inputs,d),m.outputs=yt(o.outputs),G&&G.forEach(ve=>ve(m)),m.directiveDefs=M?()=>("function"==typeof M?M():M).map(Wt):null,m.pipeDefs=re?()=>("function"==typeof re?re():re).map(vt):null,m})}function Wt(o){return on(o)||function pn(o){return o[wn]||null}(o)}function vt(o){return function Mn(o){return o[Vn]||null}(o)}const pt={};function rt(o){return st(()=>{const l={type:o.type,bootstrap:o.bootstrap||an,declarations:o.declarations||an,imports:o.imports||an,exports:o.exports||an,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(pt[o.id]=o.type),l})}function yt(o,l){if(null==o)return en;const d={};for(const m in o)if(o.hasOwnProperty(m)){let M=o[m],G=M;Array.isArray(M)&&(G=M[1],M=M[0]),d[M]=m,l&&(l[M]=G)}return d}const Zt=Ft;function Jt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function on(o){return o[Ln]||null}function Wn(o,l){const d=o[Hn]||null;if(!d&&!0===l)throw new Error(`Type ${_(o)} does not have '\u0275mod' property.`);return d}function ti(o){return Array.isArray(o)&&"object"==typeof o[1]}function oi(o){return Array.isArray(o)&&!0===o[1]}function Yi(o){return 0!=(8&o.flags)}function si(o){return 2==(2&o.flags)}function bi(o){return 1==(1&o.flags)}function Lr(o){return null!==o.template}function Do(o){return 0!=(512&o[2])}function kr(o,l){return o.hasOwnProperty(it)?o[it]:null}class Br{constructor(l,d,m){this.previousValue=l,this.currentValue=d,this.firstChange=m}isFirstChange(){return this.firstChange}}function fi(){return Bi}function Bi(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ao),vo}function vo(){const o=Io(this),l=null==o?void 0:o.current;if(l){const d=o.previous;if(d===en)o.previous=l;else for(let m in l)d[m]=l[m];o.current=null,this.ngOnChanges(l)}}function Ao(o,l,d,m){const M=Io(o)||function ns(o,l){return o[ts]=l}(o,{previous:en,current:null}),G=M.current||(M.current={}),re=M.previous,ve=this.declaredInputs[d],Ae=re[ve];G[ve]=new Br(Ae&&Ae.currentValue,l,re===en),o[m]=l}fi.ngInherit=!0;const ts="__ngSimpleChanges__";function Io(o){return o[ts]||null}let Eo;function Ve(o){Eo=o}function lt(){return void 0!==Eo?Eo:"undefined"!=typeof document?document:void 0}function dt(o){return!!o.listen}const Bt={createRenderer:(o,l)=>lt()};function _n(o){for(;Array.isArray(o);)o=o[0];return o}function Dr(o,l){return _n(l[o])}function Tr(o,l){return _n(l[o.index])}function gi(o,l){return o.data[l]}function Ur(o,l){return o[l]}function jr(o,l){const d=l[o];return ti(d)?d:d[0]}function xo(o){return 4==(4&o[2])}function Ri(o){return 128==(128&o[2])}function vi(o,l){return null==l?null:o[l]}function Oo(o){o[18]=0}function Ye(o,l){o[5]+=l;let d=o,m=o[3];for(;null!==m&&(1===l&&1===d[5]||-1===l&&0===d[5]);)m[5]+=l,d=m,m=m[3]}const Ne={lFrame:xa(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Kr(){return Ne.bindingsEnabled}function Cn(){return Ne.lFrame.lView}function wt(){return Ne.lFrame.tView}function An(o){return Ne.lFrame.contextLView=o,o[8]}function Gn(){let o=Vr();for(;null!==o&&64===o.type;)o=o.parent;return o}function Vr(){return Ne.lFrame.currentTNode}function Wr(){const o=Ne.lFrame,l=o.currentTNode;return o.isParent?l:l.parent}function ji(o,l){const d=Ne.lFrame;d.currentTNode=o,d.isParent=l}function Ho(){return Ne.lFrame.isParent}function Da(){Ne.lFrame.isParent=!1}function Pa(){return Ne.isInCheckNoChangesMode}function Aa(o){Ne.isInCheckNoChangesMode=o}function Ji(){const o=Ne.lFrame;let l=o.bindingRootIndex;return-1===l&&(l=o.bindingRootIndex=o.tView.bindingStartIndex),l}function Zo(){return Ne.lFrame.bindingIndex}function bs(){return Ne.lFrame.bindingIndex++}function Ko(o){const l=Ne.lFrame,d=l.bindingIndex;return l.bindingIndex=l.bindingIndex+o,d}function el(o){Ne.lFrame.inI18n=o}function Vc(o,l){const d=Ne.lFrame;d.bindingIndex=d.bindingRootIndex=o,tl(l)}function tl(o){Ne.lFrame.currentDirectiveIndex=o}function rl(){return Ne.lFrame.currentQueryIndex}function il(o){Ne.lFrame.currentQueryIndex=o}function ol(o){const l=o[1];return 2===l.type?l.declTNode:1===l.type?o[6]:null}function Ul(o,l,d){if(d&$.SkipSelf){let M=l,G=o;for(;!(M=M.parent,null!==M||d&$.Host||(M=ol(G),null===M||(G=G[15],10&M.type))););if(null===M)return!1;l=M,o=G}const m=Ne.lFrame=jl();return m.currentTNode=l,m.lView=o,!0}function Ia(o){const l=jl(),d=o[1];Ne.lFrame=l,l.currentTNode=d.firstChild,l.lView=o,l.tView=d,l.contextLView=o,l.bindingIndex=d.bindingStartIndex,l.inI18n=!1}function jl(){const o=Ne.lFrame,l=null===o?null:o.child;return null===l?xa(o):l}function xa(o){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=l),l}function sl(){const o=Ne.lFrame;return Ne.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Vl=sl;function Ns(){const o=sl();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ni(){return Ne.lFrame.selectedIndex}function ds(o){Ne.lFrame.selectedIndex=o}function mi(){const o=Ne.lFrame;return gi(o.tView,o.selectedIndex)}function Na(o,l){for(let d=l.directiveStart,m=l.directiveEnd;d<m;d++){const G=o.data[d].type.prototype,{ngAfterContentInit:re,ngAfterContentChecked:ve,ngAfterViewInit:Ae,ngAfterViewChecked:Je,ngOnDestroy:nt}=G;re&&(o.contentHooks||(o.contentHooks=[])).push(-d,re),ve&&((o.contentHooks||(o.contentHooks=[])).push(d,ve),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(d,ve)),Ae&&(o.viewHooks||(o.viewHooks=[])).push(-d,Ae),Je&&((o.viewHooks||(o.viewHooks=[])).push(d,Je),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(d,Je)),null!=nt&&(o.destroyHooks||(o.destroyHooks=[])).push(d,nt)}}function al(o,l,d){ll(o,l,3,d)}function La(o,l,d,m){(3&o[2])===d&&ll(o,l,d,m)}function Gl(o,l){let d=o[2];(3&d)===l&&(d&=2047,d+=1,o[2]=d)}function ll(o,l,d,m){const G=null!=m?m:-1,re=l.length-1;let ve=0;for(let Ae=void 0!==m?65535&o[18]:0;Ae<re;Ae++)if("number"==typeof l[Ae+1]){if(ve=l[Ae],null!=m&&ve>=m)break}else l[Ae]<0&&(o[18]+=65536),(ve<G||-1==G)&&(Wc(o,d,l,Ae),o[18]=(4294901760&o[18])+Ae+2),Ae++}function Wc(o,l,d,m){const M=d[m]<0,G=d[m+1],ve=o[M?-d[m]:d[m]];if(M){if(o[2]>>11<o[18]>>16&&(3&o[2])===l){o[2]+=2048;try{G.call(ve)}finally{}}}else try{G.call(ve)}finally{}}class cl{constructor(l,d,m){this.factory=l,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=m}}function ia(o,l,d){const m=dt(o);let M=0;for(;M<d.length;){const G=d[M];if("number"==typeof G){if(0!==G)break;M++;const re=d[M++],ve=d[M++],Ae=d[M++];m?o.setAttribute(l,ve,Ae,re):l.setAttributeNS(re,ve,Ae)}else{const re=G,ve=d[++M];Zl(re)?m&&o.setProperty(l,re,ve):m?o.setAttribute(l,re,ve):l.setAttribute(re,ve),M++}}return M}function $c(o){return 3===o||4===o||6===o}function Zl(o){return 64===o.charCodeAt(0)}function Fa(o,l){if(null!==l&&0!==l.length)if(null===o||0===o.length)o=l.slice();else{let d=-1;for(let m=0;m<l.length;m++){const M=l[m];"number"==typeof M?d=M:0===d||oa(o,d,M,null,-1===d||2===d?l[++m]:null)}}return o}function oa(o,l,d,m,M){let G=0,re=o.length;if(-1===l)re=-1;else for(;G<o.length;){const ve=o[G++];if("number"==typeof ve){if(ve===l){re=-1;break}if(ve>l){re=G-1;break}}}for(;G<o.length;){const ve=o[G];if("number"==typeof ve)break;if(ve===d){if(null===m)return void(null!==M&&(o[G+1]=M));if(m===o[G+1])return void(o[G+2]=M)}G++,null!==m&&G++,null!==M&&G++}-1!==re&&(o.splice(re,0,l),G=re+1),o.splice(G++,0,d),null!==m&&o.splice(G++,0,m),null!==M&&o.splice(G++,0,M)}function Kl(o){return-1!==o}function Cs(o){return 32767&o}function ks(o,l){let d=function zc(o){return o>>16}(o),m=l;for(;d>0;)m=m[15],d--;return m}let Wl=!0;function Se(o){const l=Wl;return Wl=o,l}let ze=0;function St(o,l){const d=fn(o,l);if(-1!==d)return d;const m=l[1];m.firstCreatePass&&(o.injectorIndex=l.length,Ut(m.data,o),Ut(l,null),Ut(m.blueprint,null));const M=qn(o,l),G=o.injectorIndex;if(Kl(M)){const re=Cs(M),ve=ks(M,l),Ae=ve[1].data;for(let Je=0;Je<8;Je++)l[G+Je]=ve[re+Je]|Ae[re+Je]}return l[G+8]=M,G}function Ut(o,l){o.push(0,0,0,0,0,0,0,0,l)}function fn(o,l){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===l[o.injectorIndex+8]?-1:o.injectorIndex}function qn(o,l){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let d=0,m=null,M=l;for(;null!==M;){const G=M[1],re=G.type;if(m=2===re?G.declTNode:1===re?M[6]:null,null===m)return-1;if(d++,M=M[15],-1!==m.injectorIndex)return m.injectorIndex|d<<16}return-1}function wr(o,l,d){!function ft(o,l,d){let m;"string"==typeof d?m=d.charCodeAt(0)||0:d.hasOwnProperty(Qe)&&(m=d[Qe]),null==m&&(m=d[Qe]=ze++);const M=255&m;l.data[o+(M>>5)]|=1<<M}(o,l,d)}function Jr(o,l,d){if(d&$.Optional)return o;fe(l,"NodeInjector")}function Qr(o,l,d,m){if(d&$.Optional&&void 0===m&&(m=null),0==(d&($.Self|$.Host))){const M=o[9],G=Ce(void 0);try{return M?M.get(l,m,d&$.Optional):Oe(l,m,d&$.Optional)}finally{Ce(G)}}return Jr(m,l,d)}function Ro(o,l,d,m=$.Default,M){if(null!==o){const G=function Bs(o){if("string"==typeof o)return o.charCodeAt(0)||0;const l=o.hasOwnProperty(Qe)?o[Qe]:void 0;return"number"==typeof l?l>=0?255&l:fs:l}(d);if("function"==typeof G){if(!Ul(l,o,m))return m&$.Host?Jr(M,d,m):Qr(l,d,m,M);try{const re=G(m);if(null!=re||m&$.Optional)return re;fe(d)}finally{Vl()}}else if("number"==typeof G){let re=null,ve=fn(o,l),Ae=-1,Je=m&$.Host?l[16][6]:null;for((-1===ve||m&$.SkipSelf)&&(Ae=-1===ve?qn(o,l):l[ve+8],-1!==Ae&&ro(m,!1)?(re=l[1],ve=Cs(Ae),l=ks(Ae,l)):ve=-1);-1!==ve;){const nt=l[1];if(Us(G,ve,nt.data)){const bt=hs(ve,l,d,re,m,Je);if(bt!==Wo)return bt}Ae=l[ve+8],-1!==Ae&&ro(m,l[1].data[ve+8]===Je)&&Us(G,ve,l)?(re=nt,ve=Cs(Ae),l=ks(Ae,l)):ve=-1}}}return Qr(l,d,m,M)}const Wo={};function fs(){return new sa(Gn(),Cn())}function hs(o,l,d,m,M,G){const re=l[1],ve=re.data[o+8],nt=gs(ve,re,d,null==m?si(ve)&&Wl:m!=re&&0!=(3&ve.type),M&$.Host&&G===ve);return null!==nt?lo(l,re,nt,ve):Wo}function gs(o,l,d,m,M){const G=o.providerIndexes,re=l.data,ve=1048575&G,Ae=o.directiveStart,nt=G>>20,Vt=M?ve+nt:o.directiveEnd;for(let Xt=m?ve:ve+nt;Xt<Vt;Xt++){const yn=re[Xt];if(Xt<Ae&&d===yn||Xt>=Ae&&yn.type===d)return Xt}if(M){const Xt=re[Ae];if(Xt&&Lr(Xt)&&Xt.type===d)return Ae}return null}function lo(o,l,d,m){let M=o[d];const G=l.data;if(function Fs(o){return o instanceof cl}(M)){const re=M;re.resolving&&function I(o,l){const d=l?`. Dependency path: ${l.join(" > ")} > ${o}`:"";throw new y(-200,`Circular dependency in DI detected for ${o}${d}`)}(A(G[d]));const ve=Se(re.canSeeViewProviders);re.resolving=!0;const Ae=re.injectImpl?Ce(re.injectImpl):null;Ul(o,m,$.Default);try{M=o[d]=re.factory(void 0,G,o,m),l.firstCreatePass&&d>=m.directiveStart&&function Ls(o,l,d){const{ngOnChanges:m,ngOnInit:M,ngDoCheck:G}=l.type.prototype;if(m){const re=Bi(l);(d.preOrderHooks||(d.preOrderHooks=[])).push(o,re),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(o,re)}M&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-o,M),G&&((d.preOrderHooks||(d.preOrderHooks=[])).push(o,G),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(o,G))}(d,G[d],l)}finally{null!==Ae&&Ce(Ae),Se(ve),re.resolving=!1,Vl()}}return M}function Us(o,l,d){return!!(d[l+(o>>5)]&1<<o)}function ro(o,l){return!(o&$.Self||o&$.Host&&l)}class sa{constructor(l,d){this._tNode=l,this._lView=d}get(l,d,m){return Ro(this._tNode,this._lView,l,m,d)}}function dl(o){return st(()=>{const l=o.prototype.constructor,d=l[it]||Yl(l),m=Object.prototype;let M=Object.getPrototypeOf(o.prototype).constructor;for(;M&&M!==m;){const G=M[it]||Yl(M);if(G&&G!==d)return G;M=Object.getPrototypeOf(M)}return G=>new G})}function Yl(o){return O(o)?()=>{const l=Yl(B(o));return l&&l()}:kr(o)}function aa(o){return function lr(o,l){if("class"===l)return o.classes;if("style"===l)return o.styles;const d=o.attrs;if(d){const m=d.length;let M=0;for(;M<m;){const G=d[M];if($c(G))break;if(0===G)M+=2;else if("number"==typeof G)for(M++;M<m&&"string"==typeof d[M];)M++;else{if(G===l)return d[M+1];M+=2}}}return null}(Gn(),o)}const la="__parameters__";function Vs(o,l,d){return st(()=>{const m=function zl(o){return function(...d){if(o){const m=o(...d);for(const M in m)this[M]=m[M]}}}(l);function M(...G){if(this instanceof M)return m.apply(this,G),this;const re=new M(...G);return ve.annotation=re,ve;function ve(Ae,Je,nt){const bt=Ae.hasOwnProperty(la)?Ae[la]:Object.defineProperty(Ae,la,{value:[]})[la];for(;bt.length<=nt;)bt.push(null);return(bt[nt]=bt[nt]||[]).push(re),Ae}}return d&&(M.prototype=Object.create(d.prototype)),M.prototype.ngMetadataName=o,M.annotationCls=M,M})}class Mi{constructor(l,d){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=He({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zu=new Mi("AnalyzeForEntryComponents");function io(o,l){void 0===l&&(l=o);for(let d=0;d<o.length;d++){let m=o[d];Array.isArray(m)?(l===o&&(l=o.slice(0,d)),io(m,l)):l!==o&&l.push(m)}return l}function No(o,l){o.forEach(d=>Array.isArray(d)?No(d,l):l(d))}function qc(o,l,d){l>=o.length?o.push(d):o.splice(l,0,d)}function ql(o,l){return l>=o.length-1?o.pop():o.splice(l,1)[0]}function Ua(o,l){const d=[];for(let m=0;m<o;m++)d.push(l);return d}function Yo(o,l,d){let m=ua(o,l);return m>=0?o[1|m]=d:(m=~m,function df(o,l,d,m){let M=o.length;if(M==l)o.push(d,m);else if(1===M)o.push(m,o[0]),o[0]=d;else{for(M--,o.push(o[M-1],o[M]);M>l;)o[M]=o[M-2],M--;o[l]=d,o[l+1]=m}}(o,m,l,d)),m}function qu(o,l){const d=ua(o,l);if(d>=0)return o[1|d]}function ua(o,l){return function ff(o,l,d){let m=0,M=o.length>>d;for(;M!==m;){const G=m+(M-m>>1),re=o[G<<d];if(l===re)return G<<d;re>l?M=G:m=G+1}return~(M<<d)}(o,l,1)}const Jl={},Xc="__NG_DI_FLAG__",Ql="ngTempTokenPath",ag=/\n/gm,eu="__source",pf=u({provide:String,useValue:u});let Xl;function mf(o){const l=Xl;return Xl=o,l}function _f(o,l=$.Default){if(void 0===Xl)throw new y(203,"");return null===Xl?Oe(o,void 0,l):Xl.get(o,l&$.Optional?null:void 0,l)}function oo(o,l=$.Default){return(function oe(){return K}()||_f)(B(o),l)}function Qu(o){const l=[];for(let d=0;d<o.length;d++){const m=B(o[d]);if(Array.isArray(m)){if(0===m.length)throw new y(900,"");let M,G=$.Default;for(let re=0;re<m.length;re++){const ve=m[re],Ae=yf(ve);"number"==typeof Ae?-1===Ae?M=ve.token:G|=Ae:M=ve}l.push(oo(M,G))}else l.push(oo(m))}return l}function ec(o,l){return o[Xc]=l,o.prototype[Xc]=l,o}function yf(o){return o[Xc]}const hl=ec(Vs("Inject",o=>({token:o})),-1),ai=ec(Vs("Optional"),8),gl=ec(Vs("SkipSelf"),4);let ps,Qt;function ms(o){var l;return(null===(l=function pl(){if(void 0===ps&&(ps=null,Pt.trustedTypes))try{ps=Pt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return ps}())||void 0===l?void 0:l.createHTML(o))||o}function nd(o){var l;return(null===(l=function nu(){if(void 0===Qt&&(Qt=null,Pt.trustedTypes))try{Qt=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Qt}())||void 0===l?void 0:l.createHTML(o))||o}class fa{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Af extends fa{getTypeName(){return"HTML"}}class ru extends fa{getTypeName(){return"Style"}}class ni extends fa{getTypeName(){return"Script"}}class If extends fa{getTypeName(){return"URL"}}class rd extends fa{getTypeName(){return"ResourceURL"}}function Hs(o){return o instanceof fa?o.changingThisBreaksApplicationSecurity:o}function ml(o,l){const d=xf(o);if(null!=d&&d!==l){if("ResourceURL"===d&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===l}function xf(o){return o instanceof fa&&o.getTypeName()||null}function id(o){return new Af(o)}function fg(o){return new ru(o)}function hg(o){return new ni(o)}function gg(o){return new If(o)}function Of(o){return new rd(o)}function Ei(o){const l=new wf(o);return function Rf(){try{return!!(new window.DOMParser).parseFromString(ms(""),"text/html")}catch(o){return!1}}()?new bo(l):l}class bo{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const d=(new window.DOMParser).parseFromString(ms(l),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(l):(d.removeChild(d.firstChild),d)}catch(d){return null}}}class wf{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const m=this.inertDocument.createElement("body");d.appendChild(m)}}getInertBodyElement(l){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=ms(l),d;const m=this.inertDocument.createElement("body");return m.innerHTML=ms(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(m),m}stripCustomNsAttrs(l){const d=l.attributes;for(let M=d.length-1;0<M;M--){const re=d.item(M).name;("xmlns:ns1"===re||0===re.indexOf("ns1:"))&&l.removeAttribute(re)}let m=l.firstChild;for(;m;)m.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(m),m=m.nextSibling}}const pg=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,od=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function _l(o){return(o=String(o)).match(pg)||o.match(od)?o:"unsafe:"+o}function iu(o){return(o=String(o)).split(",").map(l=>_l(l.trim())).join(", ")}function Ms(o){const l={};for(const d of o.split(","))l[d]=!0;return l}function Di(...o){const l={};for(const d of o)for(const m in d)d.hasOwnProperty(m)&&(l[m]=!0);return l}const ri=Ms("area,br,col,hr,img,wbr"),vl=Ms("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Va=Ms("rp,rt"),Ga=Di(ri,Di(vl,Ms("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Di(Va,Ms("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Di(Va,vl)),sd=Ms("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zs=Ms("srcset"),ad=Di(sd,Zs,Ms("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ms("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lf=Ms("script,style,template");class Ff{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let d=l.firstChild,m=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?m=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,m&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let M=this.checkClobberedElement(d,d.nextSibling);if(M){d=M;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(l){const d=l.nodeName.toLowerCase();if(!Ga.hasOwnProperty(d))return this.sanitizedSomething=!0,!Lf.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const m=l.attributes;for(let M=0;M<m.length;M++){const G=m.item(M),re=G.name,ve=re.toLowerCase();if(!ad.hasOwnProperty(ve)){this.sanitizedSomething=!0;continue}let Ae=G.value;sd[ve]&&(Ae=_l(Ae)),Zs[ve]&&(Ae=iu(Ae)),this.buf.push(" ",re,'="',Ws(Ae),'"')}return this.buf.push(">"),!0}endElement(l){const d=l.nodeName.toLowerCase();Ga.hasOwnProperty(d)&&!ri.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(l){this.buf.push(Ws(l))}checkClobberedElement(l,d){if(d&&(l.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return d}}const _s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ks=/([^\#-~ |!])/g;function Ws(o){return o.replace(/&/g,"&amp;").replace(_s,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Ks,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qi;function Ys(o,l){let d=null;try{Qi=Qi||Ei(o);let m=l?String(l):"";d=Qi.getInertBodyElement(m);let M=5,G=m;do{if(0===M)throw new Error("Failed to sanitize html because the input is unstable");M--,m=G,G=d.innerHTML,d=Qi.getInertBodyElement(m)}while(m!==G);return ms((new Ff).sanitizeChildren(tc(d)||d))}finally{if(d){const m=tc(d)||d;for(;m.firstChild;)m.removeChild(m.firstChild)}}}function tc(o){return"content"in o&&function El(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Pr=(()=>((Pr=Pr||{})[Pr.NONE=0]="NONE",Pr[Pr.HTML=1]="HTML",Pr[Pr.STYLE=2]="STYLE",Pr[Pr.SCRIPT=3]="SCRIPT",Pr[Pr.URL=4]="URL",Pr[Pr.RESOURCE_URL=5]="RESOURCE_URL",Pr))();function nc(o){const l=rc();return l?nd(l.sanitize(Pr.HTML,o)||""):ml(o,"HTML")?nd(Hs(o)):Ys(lt(),E(o))}function su(o){const l=rc();return l?l.sanitize(Pr.URL,o)||"":ml(o,"URL")?Hs(o):_l(E(o))}function rc(){const o=Cn();return o&&o[12]}const cd="__ngContext__";function Xi(o,l){o[cd]=l}function bl(o){const l=function Tl(o){return o[cd]||null}(o);return l?Array.isArray(l)?l:l.lView:null}function $s(o){return o.ngOriginalError}function oc(o,...l){o.error(...l)}class Ml{constructor(){this._console=console}handleError(l){const d=this._findOriginalError(l),m=function Vf(o){return o&&o.ngErrorLogger||oc}(l);m(this._console,"ERROR",l),d&&m(this._console,"ORIGINAL ERROR",d)}_findOriginalError(l){let d=l&&$s(l);for(;d&&$s(d);)d=$s(d);return d||null}}const sc=/^>|^->|<!--|-->|--!>|<!-$/g,hd=/(<|>)/;const pu=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function pd(o){return o.ownerDocument.defaultView}function $o(o){return o instanceof Function?o():o}var Fo=(()=>((Fo=Fo||{})[Fo.Important=1]="Important",Fo[Fo.DashCase=2]="DashCase",Fo))();let lc;function Dl(o,l){return lc(o,l)}function Ka(o){const l=o[3];return oi(l)?l[3]:l}function ko(o){return cc(o[13])}function vu(o){return cc(o[4])}function cc(o){for(;null!==o&&!oi(o);)o=o[4];return o}function zs(o,l,d,m,M){if(null!=m){let G,re=!1;oi(m)?G=m:ti(m)&&(re=!0,m=m[0]);const ve=_n(m);0===o&&null!==d?null==M?Sd(l,d,ve):ma(l,d,ve,M||null,!0):1===o&&null!==d?ma(l,d,ve,M||null,!0):2===o?uo(l,ve,re):3===o&&l.destroyNode(ve),null!=G&&function Ad(o,l,d,m,M){const G=d[7];G!==_n(d)&&zs(l,o,m,G,M);for(let ve=10;ve<d.length;ve++){const Ae=d[ve];pc(Ae[1],Ae,o,l,m,G)}}(l,o,G,d,M)}}function vd(o,l){return dt(o)?o.createText(l):o.createTextNode(l)}function Hf(o,l,d){dt(o)?o.setValue(l,d):l.textContent=d}function bg(o,l){return o.createComment(function gd(o){return o.replace(sc,l=>l.replace(hd,"\u200b$1\u200b"))}(l))}function dc(o,l,d){if(dt(o))return o.createElement(l,d);{const m=null!==d?function Go(o){const l=o.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(d):null;return null===m?o.createElement(l):o.createElementNS(m,l)}}function Zf(o,l){const d=o[9],m=d.indexOf(l),M=l[3];1024&l[2]&&(l[2]&=-1025,Ye(M,-1)),d.splice(m,1)}function Ed(o,l){if(o.length<=10)return;const d=10+l,m=o[d];if(m){const M=m[17];null!==M&&M!==o&&Zf(M,m),l>0&&(o[d-1][4]=m[4]);const G=ql(o,10+l);!function fc(o,l){pc(o,l,l[11],2,null,null),l[0]=null,l[6]=null}(m[1],m);const re=G[19];null!==re&&re.detachView(G[1]),m[3]=null,m[4]=null,m[2]&=-129}return m}function Tu(o,l){if(!(256&l[2])){const d=l[11];dt(d)&&d.destroyNode&&pc(o,l,d,3,null,null),function hc(o){let l=o[13];if(!l)return Td(o[1],o);for(;l;){let d=null;if(ti(l))d=l[13];else{const m=l[10];m&&(d=m)}if(!d){for(;l&&!l[4]&&l!==o;)ti(l)&&Td(l[1],l),l=l[3];null===l&&(l=o),ti(l)&&Td(l[1],l),d=l&&l[4]}l=d}}(l)}}function Td(o,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function bd(o,l){let d;if(null!=o&&null!=(d=o.destroyHooks))for(let m=0;m<d.length;m+=2){const M=l[d[m]];if(!(M instanceof cl)){const G=d[m+1];if(Array.isArray(G))for(let re=0;re<G.length;re+=2){const ve=M[G[re]],Ae=G[re+1];try{Ae.call(ve)}finally{}}else try{G.call(M)}finally{}}}}(o,l),function Kf(o,l){const d=o.cleanup,m=l[7];let M=-1;if(null!==d)for(let G=0;G<d.length-1;G+=2)if("string"==typeof d[G]){const re=d[G+1],ve="function"==typeof re?re(l):_n(l[re]),Ae=m[M=d[G+2]],Je=d[G+3];"boolean"==typeof Je?ve.removeEventListener(d[G],Ae,Je):Je>=0?m[M=Je]():m[M=-Je].unsubscribe(),G+=2}else{const re=m[M=d[G+1]];d[G].call(re)}if(null!==m){for(let G=M+1;G<m.length;G++)m[G]();l[7]=null}}(o,l),1===l[1].type&&dt(l[11])&&l[11].destroy();const d=l[17];if(null!==d&&oi(l[3])){d!==l[3]&&Zf(d,l);const m=l[19];null!==m&&m.detachView(o)}}}function Wf(o,l,d){return Cd(o,l.parent,d)}function Cd(o,l,d){let m=l;for(;null!==m&&40&m.type;)m=(l=m).parent;if(null===m)return d[0];if(2&m.flags){const M=o.data[m.directiveStart].encapsulation;if(M===tt.None||M===tt.Emulated)return null}return Tr(m,d)}function ma(o,l,d,m,M){dt(o)?o.insertBefore(l,d,m,M):l.insertBefore(d,m,M)}function Sd(o,l,d){dt(o)?o.appendChild(l,d):l.appendChild(d)}function Pl(o,l,d,m,M){null!==m?ma(o,l,d,m,M):Sd(o,l,d)}function Al(o,l){return dt(o)?o.parentNode(l):l.parentNode}function gc(o,l,d){return Md(o,l,d)}function $f(o,l,d){return 40&o.type?Tr(o,d):null}let Dd,Md=$f;function Il(o,l){Md=o,Dd=l}function _a(o,l,d,m){const M=Wf(o,m,l),G=l[11],ve=gc(m.parent||l[6],m,l);if(null!=M)if(Array.isArray(d))for(let Ae=0;Ae<d.length;Ae++)Pl(G,M,d[Ae],ve,!1);else Pl(G,M,d,ve,!1);void 0!==Dd&&Dd(G,m,l,d,M)}function Cu(o,l){if(null!==l){const d=l.type;if(3&d)return Tr(l,o);if(4&d)return Pd(-1,o[l.index]);if(8&d){const m=l.child;if(null!==m)return Cu(o,m);{const M=o[l.index];return oi(M)?Pd(-1,M):_n(M)}}if(32&d)return Dl(l,o)()||_n(o[l.index]);{const m=zf(o,l);return null!==m?Array.isArray(m)?m[0]:Cu(Ka(o[16]),m):Cu(o,l.next)}}return null}function zf(o,l){return null!==l?o[16][6].projection[l.projection]:null}function Pd(o,l){const d=10+o+1;if(d<l.length){const m=l[d],M=m[1].firstChild;if(null!==M)return Cu(m,M)}return l[7]}function uo(o,l,d){const m=Al(o,l);m&&function Yf(o,l,d,m){dt(o)?o.removeChild(l,d,m):l.removeChild(d)}(o,m,l,d)}function So(o,l,d,m,M,G,re){for(;null!=d;){const ve=m[d.index],Ae=d.type;if(re&&0===l&&(ve&&Xi(_n(ve),m),d.flags|=4),64!=(64&d.flags))if(8&Ae)So(o,l,d.child,m,M,G,!1),zs(l,o,M,ve,G);else if(32&Ae){const Je=Dl(d,m);let nt;for(;nt=Je();)zs(l,o,M,nt,G);zs(l,o,M,ve,G)}else 16&Ae?Su(o,l,m,d,M,G):zs(l,o,M,ve,G);d=re?d.projectionNext:d.next}}function pc(o,l,d,m,M,G){So(d,m,o.firstChild,l,M,G,!1)}function Su(o,l,d,m,M,G){const re=d[16],Ae=re[6].projection[m.projection];if(Array.isArray(Ae))for(let Je=0;Je<Ae.length;Je++)zs(l,o,M,Ae[Je],G);else So(o,l,Ae,re[3],M,G,!0)}function mc(o,l,d){dt(o)?o.setAttribute(l,"style",d):l.style.cssText=d}function Mu(o,l,d){dt(o)?""===d?o.removeAttribute(l,"class"):o.setAttribute(l,"class",d):l.className=d}function Hi(o,l,d){let m=o.length;for(;;){const M=o.indexOf(l,d);if(-1===M)return M;if(0===M||o.charCodeAt(M-1)<=32){const G=l.length;if(M+G===m||o.charCodeAt(M+G)<=32)return M}d=M+1}}const Wa="ng-template";function Ya(o,l,d){let m=0;for(;m<o.length;){let M=o[m++];if(d&&"class"===M){if(M=o[m],-1!==Hi(M.toLowerCase(),l,0))return!0}else if(1===M){for(;m<o.length&&"string"==typeof(M=o[m++]);)if(M.toLowerCase()===l)return!0;return!1}}return!1}function Du(o){return 4===o.type&&o.value!==Wa}function N(o,l,d){return l===(4!==o.type||d?o.value:Wa)}function Z(o,l,d){let m=4;const M=o.attrs||[],G=function Mt(o){for(let l=0;l<o.length;l++)if($c(o[l]))return l;return o.length}(M);let re=!1;for(let ve=0;ve<l.length;ve++){const Ae=l[ve];if("number"!=typeof Ae){if(!re)if(4&m){if(m=2|1&m,""!==Ae&&!N(o,Ae,d)||""===Ae&&1===l.length){if(T(m))return!1;re=!0}}else{const Je=8&m?Ae:l[++ve];if(8&m&&null!==o.attrs){if(!Ya(o.attrs,Je,d)){if(T(m))return!1;re=!0}continue}const bt=J(8&m?"class":Ae,M,Du(o),d);if(-1===bt){if(T(m))return!1;re=!0;continue}if(""!==Je){let Vt;Vt=bt>G?"":M[bt+1].toLowerCase();const Xt=8&m?Vt:null;if(Xt&&-1!==Hi(Xt,Je,0)||2&m&&Je!==Vt){if(T(m))return!1;re=!0}}}}else{if(!re&&!T(m)&&!T(Ae))return!1;if(re&&T(Ae))continue;re=!1,m=Ae|1&m}}return T(m)||re}function T(o){return 0==(1&o)}function J(o,l,d,m){if(null===l)return-1;let M=0;if(m||!d){let G=!1;for(;M<l.length;){const re=l[M];if(re===o)return M;if(3===re||6===re)G=!0;else{if(1===re||2===re){let ve=l[++M];for(;"string"==typeof ve;)ve=l[++M];continue}if(4===re)break;if(0===re){M+=4;continue}}M+=G?1:2}return-1}return function Lt(o,l){let d=o.indexOf(4);if(d>-1)for(d++;d<o.length;){const m=o[d];if("number"==typeof m)return-1;if(m===l)return d;d++}return-1}(l,o)}function Ee(o,l,d=!1){for(let m=0;m<l.length;m++)if(Z(o,l[m],d))return!0;return!1}function Ht(o,l){e:for(let d=0;d<l.length;d++){const m=l[d];if(o.length===m.length){for(let M=0;M<o.length;M++)if(o[M]!==m[M])continue e;return!0}}return!1}function cn(o,l){return o?":not("+l.trim()+")":l}function En(o){let l=o[0],d=1,m=2,M="",G=!1;for(;d<o.length;){let re=o[d];if("string"==typeof re)if(2&m){const ve=o[++d];M+="["+re+(ve.length>0?'="'+ve+'"':"")+"]"}else 8&m?M+="."+re:4&m&&(M+=" "+re);else""!==M&&!T(re)&&(l+=cn(G,M),M=""),m=re,G=G||!T(m);d++}return""!==M&&(l+=cn(G,M)),l}const In={};function Ar(o){sr(wt(),Cn(),Ni()+o,Pa())}function sr(o,l,d,m){if(!m)if(3==(3&l[2])){const G=o.preOrderCheckHooks;null!==G&&al(l,G,d)}else{const G=o.preOrderHooks;null!==G&&La(l,G,0,d)}ds(d)}function Fr(o,l){return o<<17|l<<2}function vr(o){return o>>17&32767}function Gr(o){return 2|o}function Nr(o){return(131068&o)>>2}function ii(o,l){return-131069&o|l<<2}function Oi(o){return 1|o}function Ig(o,l){const d=o.contentQueries;if(null!==d)for(let m=0;m<d.length;m+=2){const M=d[m],G=d[m+1];if(-1!==G){const re=o.data[G];il(M),re.contentQueries(2,l[G],G)}}}function xu(o,l,d,m,M,G,re,ve,Ae,Je){const nt=l.blueprint.slice();return nt[0]=M,nt[2]=140|m,Oo(nt),nt[3]=nt[15]=o,nt[8]=d,nt[10]=re||o&&o[10],nt[11]=ve||o&&o[11],nt[12]=Ae||o&&o[12]||null,nt[9]=Je||o&&o[9]||null,nt[6]=G,nt[16]=2==l.type?o[16]:nt,nt}function Nl(o,l,d,m,M){let G=o.data[l];if(null===G)G=Xs(o,l,d,m,M),function Bl(){return Ne.lFrame.inI18n}()&&(G.flags|=64);else if(64&G.type){G.type=d,G.value=m,G.attrs=M;const re=Wr();G.injectorIndex=null===re?-1:re.injectorIndex}return ji(G,!0),G}function Xs(o,l,d,m,M){const G=Vr(),re=Ho(),Ae=o.data[l]=function Rg(o,l,d,m,M,G){return{type:d,index:m,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:M,attrs:G,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,re?G:G&&G.parent,d,l,m,M);return null===o.firstChild&&(o.firstChild=Ae),null!==G&&(re?null==G.child&&null!==Ae.parent&&(G.child=Ae):null===G.next&&(G.next=Ae)),Ae}function Ps(o,l,d,m){if(0===d)return-1;const M=l.length;for(let G=0;G<d;G++)l.push(m),o.blueprint.push(m),o.data.push(null);return M}function Sc(o,l,d){Ia(l);try{const m=o.viewQuery;null!==m&&Bd(1,m,d);const M=o.template;null!==M&&Mc(o,l,M,1,d),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&Ig(o,l),o.staticViewQueries&&Bd(2,o.viewQuery,d);const G=o.components;null!==G&&function eh(o,l){for(let d=0;d<l.length;d++)Mm(o,l[d])}(l,G)}catch(m){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),m}finally{l[2]&=-5,Ns()}}function Ja(o,l,d,m){const M=l[2];if(256==(256&M))return;Ia(l);const G=Pa();try{Oo(l),function jc(o){return Ne.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==d&&Mc(o,l,d,2,m);const re=3==(3&M);if(!G)if(re){const Je=o.preOrderCheckHooks;null!==Je&&al(l,Je,null)}else{const Je=o.preOrderHooks;null!==Je&&La(l,Je,0,null),Gl(l,0)}if(function Cm(o){for(let l=ko(o);null!==l;l=vu(l)){if(!l[2])continue;const d=l[9];for(let m=0;m<d.length;m++){const M=d[m],G=M[3];0==(1024&M[2])&&Ye(G,1),M[2]|=1024}}}(l),function Kg(o){for(let l=ko(o);null!==l;l=vu(l))for(let d=10;d<l.length;d++){const m=l[d],M=m[1];Ri(m)&&Ja(M,m,M.template,m[8])}}(l),null!==o.contentQueries&&Ig(o,l),!G)if(re){const Je=o.contentCheckHooks;null!==Je&&al(l,Je)}else{const Je=o.contentHooks;null!==Je&&La(l,Je,1),Gl(l,1)}!function fm(o,l){const d=o.hostBindingOpCodes;if(null!==d)try{for(let m=0;m<d.length;m++){const M=d[m];if(M<0)ds(~M);else{const G=M,re=d[++m],ve=d[++m];Vc(re,G),ve(2,l[G])}}}finally{ds(-1)}}(o,l);const ve=o.components;null!==ve&&function Cc(o,l){for(let d=0;d<l.length;d++)Sm(o,l[d])}(l,ve);const Ae=o.viewQuery;if(null!==Ae&&Bd(2,Ae,m),!G)if(re){const Je=o.viewCheckHooks;null!==Je&&al(l,Je)}else{const Je=o.viewHooks;null!==Je&&La(l,Je,2),Gl(l,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),G||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Ye(l[3],-1))}finally{Ns()}}function hm(o,l,d,m){const M=l[10],G=!Pa(),re=xo(l);try{G&&!re&&M.begin&&M.begin(),re&&Sc(o,l,m),Ja(o,l,d,m)}finally{G&&!re&&M.end&&M.end()}}function Mc(o,l,d,m,M){const G=Ni(),re=2&m;try{ds(-1),re&&l.length>20&&sr(o,l,20,Pa()),d(m,M)}finally{ds(G)}}function th(o,l,d){!Kr()||(function _m(o,l,d,m){const M=d.directiveStart,G=d.directiveEnd;o.firstCreatePass||St(d,l),Xi(m,l);const re=d.initialInputs;for(let ve=M;ve<G;ve++){const Ae=o.data[ve],Je=Lr(Ae);Je&&ym(l,d,Ae);const nt=lo(l,o,ve,d);Xi(nt,l),null!==re&&Em(0,ve-M,nt,Ae,0,re),Je&&(jr(d.index,l)[8]=nt)}}(o,l,d,Tr(d,l)),128==(128&d.flags)&&function sh(o,l,d){const m=d.directiveStart,M=d.directiveEnd,re=d.index,ve=function Gc(){return Ne.lFrame.currentDirectiveIndex}();try{ds(re);for(let Ae=m;Ae<M;Ae++){const Je=o.data[Ae],nt=l[Ae];tl(Ae),(null!==Je.hostBindings||0!==Je.hostVars||null!==Je.hostAttrs)&&Ld(Je,nt)}}finally{ds(-1),tl(ve)}}(o,l,d))}function wd(o,l,d=Tr){const m=l.localNames;if(null!==m){let M=l.index+1;for(let G=0;G<m.length;G+=2){const re=m[G+1],ve=-1===re?d(l,o):o[re];o[M++]=ve}}}function Og(o){const l=o.tView;return null===l||l.incompleteFirstPass?o.tView=Ll(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):l}function Ll(o,l,d,m,M,G,re,ve,Ae,Je){const nt=20+m,bt=nt+M,Vt=function nh(o,l){const d=[];for(let m=0;m<l;m++)d.push(m<o?null:In);return d}(nt,bt),Xt="function"==typeof Je?Je():Je;return Vt[1]={type:o,blueprint:Vt,template:d,queries:null,viewQuery:ve,declTNode:l,data:Vt.slice().fill(null,nt),bindingStartIndex:nt,expandoStartIndex:bt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof G?G():G,pipeRegistry:"function"==typeof re?re():re,firstChild:null,schemas:Ae,consts:Xt,incompleteFirstPass:!1}}function rh(o,l,d,m){const M=ta(l);null===d?M.push(m):(M.push(d),o.firstCreatePass&&$g(o).push(m,M.length-1))}function ih(o,l,d){for(let m in o)if(o.hasOwnProperty(m)){const M=o[m];(d=null===d?{}:d).hasOwnProperty(m)?d[m].push(l,M):d[m]=[l,M]}return d}function ss(o,l,d,m,M,G,re,ve){const Ae=Tr(l,d);let nt,Je=l.inputs;!ve&&null!=Je&&(nt=Je[m])?(Jg(o,d,nt,m,M),si(l)&&function Ng(o,l){const d=jr(l,o);16&d[2]||(d[2]|=64)}(d,l.index)):3&l.type&&(m=function pm(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(m),M=null!=re?re(M,l.value||"",m):M,dt(G)?G.setProperty(Ae,m,M):Zl(m)||(Ae.setProperty?Ae.setProperty(m,M):Ae[m]=M))}function oh(o,l,d,m){let M=!1;if(Kr()){const G=function jg(o,l,d){const m=o.directiveRegistry;let M=null;if(m)for(let G=0;G<m.length;G++){const re=m[G];Ee(d,re.selectors,!1)&&(M||(M=[]),wr(St(d,l),o,re.type),Lr(re)?(Vg(o,d),M.unshift(re)):M.push(re))}return M}(o,l,d),re=null===m?null:{"":-1};if(null!==G){M=!0,Gg(d,o.data.length,G.length);for(let nt=0;nt<G.length;nt++){const bt=G[nt];bt.providersResolver&&bt.providersResolver(bt)}let ve=!1,Ae=!1,Je=Ps(o,l,G.length,null);for(let nt=0;nt<G.length;nt++){const bt=G[nt];d.mergedAttrs=Fa(d.mergedAttrs,bt.hostAttrs),Hg(o,d,l,Je,bt),vm(Je,bt,re),null!==bt.contentQueries&&(d.flags|=8),(null!==bt.hostBindings||null!==bt.hostAttrs||0!==bt.hostVars)&&(d.flags|=128);const Vt=bt.type.prototype;!ve&&(Vt.ngOnChanges||Vt.ngOnInit||Vt.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(d.index),ve=!0),!Ae&&(Vt.ngOnChanges||Vt.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(d.index),Ae=!0),Je++}!function gm(o,l){const m=l.directiveEnd,M=o.data,G=l.attrs,re=[];let ve=null,Ae=null;for(let Je=l.directiveStart;Je<m;Je++){const nt=M[Je],bt=nt.inputs,Vt=null===G||Du(l)?null:Tm(bt,G);re.push(Vt),ve=ih(bt,Je,ve),Ae=ih(nt.outputs,Je,Ae)}null!==ve&&(ve.hasOwnProperty("class")&&(l.flags|=16),ve.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=re,l.inputs=ve,l.outputs=Ae}(o,d)}re&&function ah(o,l,d){if(l){const m=o.localNames=[];for(let M=0;M<l.length;M+=2){const G=d[l[M+1]];if(null==G)throw new y(-301,`Export of name '${l[M+1]}' not found!`);m.push(l[M],G)}}}(d,m,re)}return d.mergedAttrs=Fa(d.mergedAttrs,d.attrs),M}function Bg(o,l,d,m,M,G){const re=G.hostBindings;if(re){let ve=o.hostBindingOpCodes;null===ve&&(ve=o.hostBindingOpCodes=[]);const Ae=~l.index;(function Ug(o){let l=o.length;for(;l>0;){const d=o[--l];if("number"==typeof d&&d<0)return d}return 0})(ve)!=Ae&&ve.push(Ae),ve.push(m,M,re)}}function Ld(o,l){null!==o.hostBindings&&o.hostBindings(1,l)}function Vg(o,l){l.flags|=2,(o.components||(o.components=[])).push(l.index)}function vm(o,l,d){if(d){if(l.exportAs)for(let m=0;m<l.exportAs.length;m++)d[l.exportAs[m]]=o;Lr(l)&&(d[""]=o)}}function Gg(o,l,d){o.flags|=1,o.directiveStart=l,o.directiveEnd=l+d,o.providerIndexes=l}function Hg(o,l,d,m,M){o.data[m]=M;const G=M.factory||(M.factory=kr(M.type)),re=new cl(G,Lr(M),null);o.blueprint[m]=re,d[m]=re,Bg(o,l,0,m,Ps(o,d,M.hostVars,In),M)}function ym(o,l,d){const m=Tr(l,o),M=Og(d),G=o[10],re=kd(o,xu(o,M,null,d.onPush?64:16,m,l,G,G.createRenderer(m,d),null,null));o[l.index]=re}function Qa(o,l,d,m,M,G,re){if(null==G)dt(o)?o.removeAttribute(l,M,d):l.removeAttribute(M);else{const ve=null==re?E(G):re(G,m||"",M);dt(o)?o.setAttribute(l,M,ve,d):d?l.setAttributeNS(d,M,ve):l.setAttribute(M,ve)}}function Em(o,l,d,m,M,G){const re=G[l];if(null!==re){const ve=m.setInput;for(let Ae=0;Ae<re.length;){const Je=re[Ae++],nt=re[Ae++],bt=re[Ae++];null!==ve?m.setInput(d,bt,Je,nt):d[nt]=bt}}}function Tm(o,l){let d=null,m=0;for(;m<l.length;){const M=l[m];if(0!==M)if(5!==M){if("number"==typeof M)break;o.hasOwnProperty(M)&&(null===d&&(d=[]),d.push(M,o[M],l[m+1])),m+=2}else m+=2;else m+=4}return d}function Zg(o,l,d,m){return new Array(o,!0,!1,l,null,0,m,d,null,null)}function Sm(o,l){const d=jr(l,o);if(Ri(d)){const m=d[1];80&d[2]?Ja(m,d,m.template,d[8]):d[5]>0&&Fd(d)}}function Fd(o){for(let m=ko(o);null!==m;m=vu(m))for(let M=10;M<m.length;M++){const G=m[M];if(1024&G[2]){const re=G[1];Ja(re,G,re.template,G[8])}else G[5]>0&&Fd(G)}const d=o[1].components;if(null!==d)for(let m=0;m<d.length;m++){const M=jr(d[m],o);Ri(M)&&M[5]>0&&Fd(M)}}function Mm(o,l){const d=jr(l,o),m=d[1];(function Wg(o,l){for(let d=l.length;d<o.blueprint.length;d++)l.push(o.blueprint[d])})(m,d),Sc(m,d,d[8])}function kd(o,l){return o[13]?o[14][4]=l:o[13]=l,o[14]=l,l}function lh(o){for(;o;){o[2]|=64;const l=Ka(o);if(Do(o)&&!l)return o;o=l}return null}function ch(o,l,d){const m=l[10];m.begin&&m.begin();try{Ja(o,l,o.template,d)}catch(M){throw qg(l,M),M}finally{m.end&&m.end()}}function uh(o){!function Ou(o){for(let l=0;l<o.components.length;l++){const d=o.components[l],m=bl(d),M=m[1];hm(M,m,M.template,d)}}(o[8])}function Bd(o,l,d){il(0),l(o,d)}const Is=(()=>Promise.resolve(null))();function ta(o){return o[7]||(o[7]=[])}function $g(o){return o.cleanup||(o.cleanup=[])}function qg(o,l){const d=o[9],m=d?d.get(Ml,null):null;m&&m.handleError(l)}function Jg(o,l,d,m,M){for(let G=0;G<d.length;){const re=d[G++],ve=d[G++],Ae=l[re],Je=o.data[re];null!==Je.setInput?Je.setInput(Ae,M,m,ve):Ae[ve]=M}}function ba(o,l,d){const m=Dr(l,o);Hf(o[11],m,d)}function Ud(o,l,d){let m=d?o.styles:null,M=d?o.classes:null,G=0;if(null!==l)for(let re=0;re<l.length;re++){const ve=l[re];"number"==typeof ve?G=ve:1==G?M=b(M,ve):2==G&&(m=b(m,ve+": "+l[++re]+";"))}d?o.styles=m:o.stylesWithoutHost=m,d?o.classes=M:o.classesWithoutHost=M}const dh=new Mi("INJECTOR",-1);class jd{get(l,d=Jl){if(d===Jl){const m=new Error(`NullInjectorError: No provider for ${_(l)}!`);throw m.name="NullInjectorError",m}return d}}const Vd=new Mi("Set Injector scope."),Dc={},Pc={};let Gd;function fh(){return void 0===Gd&&(Gd=new jd),Gd}function wu(o,l=null,d=null,m){const M=Hd(o,l,d,m);return M._resolveInjectorDefTypes(),M}function Hd(o,l=null,d=null,m){return new Im(o,d,l||fh(),m)}class Im{constructor(l,d,m,M=null){this.parent=m,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const G=[];d&&No(d,ve=>this.processProvider(ve,l,d)),No([l],ve=>this.processInjectorType(ve,[],G)),this.records.set(dh,Ca(void 0,this));const re=this.records.get(Vd);this.scope=null!=re?re.value:null,this.source=M||("object"==typeof l?null:_(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,d=Jl,m=$.Default){this.assertNotDestroyed();const M=mf(this),G=Ce(void 0);try{if(!(m&$.SkipSelf)){let ve=this.records.get(l);if(void 0===ve){const Ae=function ph(o){return"function"==typeof o||"object"==typeof o&&o instanceof Mi}(l)&&ae(l);ve=Ae&&this.injectableDefInScope(Ae)?Ca(Zd(l),Dc):null,this.records.set(l,ve)}if(null!=ve)return this.hydrate(l,ve)}return(m&$.Self?fh():this.parent).get(l,d=m&$.Optional&&d===Jl?null:d)}catch(re){if("NullInjectorError"===re.name){if((re[Ql]=re[Ql]||[]).unshift(_(l)),M)throw re;return function cg(o,l,d,m){const M=o[Ql];throw l[eu]&&M.unshift(l[eu]),o.message=function ug(o,l,d,m=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let M=_(l);if(Array.isArray(l))M=l.map(_).join(" -> ");else if("object"==typeof l){let G=[];for(let re in l)if(l.hasOwnProperty(re)){let ve=l[re];G.push(re+":"+("string"==typeof ve?JSON.stringify(ve):_(ve)))}M=`{${G.join(", ")}}`}return`${d}${m?"("+m+")":""}[${M}]: ${o.replace(ag,"\n  ")}`}("\n"+o.message,M,d,m),o.ngTokenPath=M,o[Ql]=null,o}(re,l,"R3InjectorError",this.source)}throw re}finally{Ce(G),mf(M)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((m,M)=>l.push(_(M))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new y(205,"")}processInjectorType(l,d,m){if(!(l=B(l)))return!1;let M=le(l);const G=null==M&&l.ngModule||void 0,re=void 0===G?l:G,ve=-1!==m.indexOf(re);if(void 0!==G&&(M=le(G)),null==M)return!1;if(null!=M.imports&&!ve){let nt;m.push(re);try{No(M.imports,bt=>{this.processInjectorType(bt,d,m)&&(void 0===nt&&(nt=[]),nt.push(bt))})}finally{}if(void 0!==nt)for(let bt=0;bt<nt.length;bt++){const{ngModule:Vt,providers:Xt}=nt[bt];No(Xt,yn=>this.processProvider(yn,Vt,Xt||an))}}this.injectorDefTypes.add(re);const Ae=kr(re)||(()=>new re);this.records.set(re,Ca(Ae,Dc));const Je=M.providers;if(null!=Je&&!ve){const nt=l;No(Je,bt=>this.processProvider(bt,nt,Je))}return void 0!==G&&void 0!==l.providers}processProvider(l,d,m){let M=Ac(l=B(l))?l:B(l&&l.provide);const G=function Xg(o,l,d){return ep(o)?Ca(void 0,o.useValue):Ca(Kd(o),Dc)}(l);if(Ac(l)||!0!==l.multi)this.records.get(M);else{let re=this.records.get(M);re||(re=Ca(void 0,Dc,!0),re.factory=()=>Qu(re.multi),this.records.set(M,re)),M=l,re.multi.push(l)}this.records.set(M,G)}hydrate(l,d){return d.value===Dc&&(d.value=Pc,d.value=d.factory()),"object"==typeof d.value&&d.value&&function gh(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(d.value)&&this.onDestroy.add(d.value),d.value}injectableDefInScope(l){if(!l.providedIn)return!1;const d=B(l.providedIn);return"string"==typeof d?"any"===d||d===this.scope:this.injectorDefTypes.has(d)}}function Zd(o){const l=ae(o),d=null!==l?l.factory:kr(o);if(null!==d)return d;if(o instanceof Mi)throw new y(204,"");if(o instanceof Function)return function xm(o){const l=o.length;if(l>0)throw Ua(l,"?"),new y(204,"");const d=function ce(o){const l=o&&(o[ne]||o[te]);if(l){const d=function De(o){if(o.hasOwnProperty("name"))return o.name;const l=(""+o).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),l}return null}(o);return null!==d?()=>d.factory(o):()=>new o}(o);throw new y(204,"")}function Kd(o,l,d){let m;if(Ac(o)){const M=B(o);return kr(M)||Zd(M)}if(ep(o))m=()=>B(o.useValue);else if(function Om(o){return!(!o||!o.useFactory)}(o))m=()=>o.useFactory(...Qu(o.deps||[]));else if(function tp(o){return!(!o||!o.useExisting)}(o))m=()=>oo(B(o.useExisting));else{const M=B(o&&(o.useClass||o.provide));if(!function wm(o){return!!o.deps}(o))return kr(M)||Zd(M);m=()=>new M(...Qu(o.deps))}return m}function Ca(o,l,d=!1){return{factory:o,value:l,multi:d?[]:void 0}}function ep(o){return null!==o&&"object"==typeof o&&pf in o}function Ac(o){return"function"==typeof o}let ys=(()=>{class o{static create(d,m){var M;if(Array.isArray(d))return wu({name:""},m,d,"");{const G=null!==(M=d.name)&&void 0!==M?M:"";return wu({name:G},d.parent,d.providers,G)}}}return o.THROW_IF_NOT_FOUND=Jl,o.NULL=new jd,o.\u0275prov=He({token:o,providedIn:"any",factory:()=>oo(dh)}),o.__NG_ELEMENT_ID__=-1,o})();function Lm(o,l){Na(bl(o)[1],Gn())}function Mh(o){let l=function cp(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),d=!0;const m=[o];for(;l;){let M;if(Lr(o))M=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new y(903,"");M=l.\u0275dir}if(M){if(d){m.push(M);const re=o;re.inputs=$d(o.inputs),re.declaredInputs=$d(o.declaredInputs),re.outputs=$d(o.outputs);const ve=M.hostBindings;ve&&km(o,ve);const Ae=M.viewQuery,Je=M.contentQueries;if(Ae&&Fm(o,Ae),Je&&dp(o,Je),p(o.inputs,M.inputs),p(o.declaredInputs,M.declaredInputs),p(o.outputs,M.outputs),Lr(M)&&M.data.animation){const nt=o.data;nt.animation=(nt.animation||[]).concat(M.data.animation)}}const G=M.features;if(G)for(let re=0;re<G.length;re++){const ve=G[re];ve&&ve.ngInherit&&ve(o),ve===Mh&&(d=!1)}}l=Object.getPrototypeOf(l)}!function up(o){let l=0,d=null;for(let m=o.length-1;m>=0;m--){const M=o[m];M.hostVars=l+=M.hostVars,M.hostAttrs=Fa(M.hostAttrs,d=Fa(d,M.hostAttrs))}}(m)}function $d(o){return o===en?{}:o===an?[]:o}function Fm(o,l){const d=o.viewQuery;o.viewQuery=d?(m,M)=>{l(m,M),d(m,M)}:l}function dp(o,l){const d=o.contentQueries;o.contentQueries=d?(m,M,G)=>{l(m,M,G),d(m,M,G)}:l}function km(o,l){const d=o.hostBindings;o.hostBindings=d?(m,M)=>{l(m,M),d(m,M)}:l}let zd=null;function Ic(){if(!zd){const o=Pt.Symbol;if(o&&o.iterator)zd=o.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<l.length;++d){const m=l[d];"entries"!==m&&"size"!==m&&Map.prototype[m]===Map.prototype.entries&&(zd=m)}}}return zd}function Ru(o){return!!Dh(o)&&(Array.isArray(o)||!(o instanceof Map)&&Ic()in o)}function Dh(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function na(o,l,d){return o[l]=d}function Mo(o,l,d){return!Object.is(o[l],d)&&(o[l]=d,!0)}function Sa(o,l,d,m){const M=Mo(o,l,d);return Mo(o,l+1,m)||M}function Ph(o,l,d,m){const M=Cn();return Mo(M,bs(),l)&&(wt(),function ea(o,l,d,m,M,G){const re=Tr(o,l);Qa(l[11],re,G,o.value,d,m,M)}(mi(),M,o,l,d,m)),Ph}function Oc(o,l,d,m){return Mo(o,bs(),d)?l+E(d)+m:In}function wc(o,l,d,m,M,G){const ve=Sa(o,Zo(),d,M);return Ko(2),ve?l+E(d)+m+E(M)+G:In}function Tp(o,l,d,m,M,G,re,ve){const Ae=Cn(),Je=wt(),nt=o+20,bt=Je.firstCreatePass?function Hm(o,l,d,m,M,G,re,ve,Ae){const Je=l.consts,nt=Nl(l,o,4,re||null,vi(Je,ve));oh(l,d,nt,vi(Je,Ae)),Na(l,nt);const bt=nt.tViews=Ll(2,nt,m,M,G,l.directiveRegistry,l.pipeRegistry,null,l.schemas,Je);return null!==l.queries&&(l.queries.template(l,nt),bt.queries=l.queries.embeddedTView(nt)),nt}(nt,Je,Ae,l,d,m,M,G,re):Je.data[nt];ji(bt,!1);const Vt=Ae[11].createComment("");_a(Je,Ae,Vt,bt),Xi(Vt,Ae),kd(Ae,Ae[nt]=Zg(Vt,Ae,Vt,bt)),bi(bt)&&th(Je,Ae,bt),null!=re&&wd(Ae,bt,ve)}function Ih(o){return Ur(function ju(){return Ne.lFrame.contextLView}(),20+o)}function Lu(o,l=$.Default){const d=Cn();return null===d?oo(o,l):Ro(Gn(),d,B(o),l)}function Rp(){throw new Error("invalid")}function Lh(o,l,d){const m=Cn();return Mo(m,bs(),l)&&ss(wt(),mi(),m,o,l,m[11],d,!1),Lh}function Fh(o,l,d,m,M){const re=M?"class":"style";Jg(o,d,l.inputs[re],re,m)}function kh(o,l,d,m){const M=Cn(),G=wt(),re=20+o,ve=M[11],Ae=M[re]=dc(ve,l,function Ra(){return Ne.lFrame.currentNamespace}()),Je=G.firstCreatePass?function l_(o,l,d,m,M,G,re){const ve=l.consts,Je=Nl(l,o,2,M,vi(ve,G));return oh(l,d,Je,vi(ve,re)),null!==Je.attrs&&Ud(Je,Je.attrs,!1),null!==Je.mergedAttrs&&Ud(Je,Je.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,Je),Je}(re,G,M,0,l,d,m):G.data[re];ji(Je,!0);const nt=Je.mergedAttrs;null!==nt&&ia(ve,Ae,nt);const bt=Je.classes;null!==bt&&Mu(ve,Ae,bt);const Vt=Je.styles;null!==Vt&&mc(ve,Ae,Vt),64!=(64&Je.flags)&&_a(G,M,Ae,Je),0===function ht(){return Ne.lFrame.elementDepthCount}()&&Xi(Ae,M),function un(){Ne.lFrame.elementDepthCount++}(),bi(Je)&&(th(G,M,Je),function xg(o,l,d){if(Yi(l)){const M=l.directiveEnd;for(let G=l.directiveStart;G<M;G++){const re=o.data[G];re.contentQueries&&re.contentQueries(1,d[G],G)}}}(G,Je,M)),null!==m&&wd(M,Je)}function Bh(){let o=Gn();Ho()?Da():(o=o.parent,ji(o,!1));const l=o;!function er(){Ne.lFrame.elementDepthCount--}();const d=wt();d.firstCreatePass&&(Na(d,o),Yi(o)&&d.queries.elementEnd(o)),null!=l.classesWithoutHost&&function Hl(o){return 0!=(16&o.flags)}(l)&&Fh(d,l,Cn(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function Vu(o){return 0!=(32&o.flags)}(l)&&Fh(d,l,Cn(),l.stylesWithoutHost,!1)}function Np(o,l,d,m){kh(o,l,d,m),Bh()}function kp(){return Cn()}function Uh(o){return!!o&&"function"==typeof o.then}function Bp(o){return!!o&&"function"==typeof o.subscribe}const Up=Bp;function jh(o,l,d,m){const M=Cn(),G=wt(),re=Gn();return function f(o,l,d,m,M,G,re,ve){const Ae=bi(m),nt=o.firstCreatePass&&$g(o),bt=l[8],Vt=ta(l);let Xt=!0;if(3&m.type||ve){const Kn=Tr(m,l),tr=ve?ve(Kn):Kn,Pn=Vt.length,hr=ve?Yr=>ve(_n(Yr[m.index])):m.index;if(dt(d)){let Yr=null;if(!ve&&Ae&&(Yr=function yv(o,l,d,m){const M=o.cleanup;if(null!=M)for(let G=0;G<M.length-1;G+=2){const re=M[G];if(re===d&&M[G+1]===m){const ve=l[7],Ae=M[G+2];return ve.length>Ae?ve[Ae]:null}"string"==typeof re&&(G+=2)}return null}(o,l,M,m.index)),null!==Yr)(Yr.__ngLastListenerFn__||Yr).__ngNextListenerFn__=G,Yr.__ngLastListenerFn__=G,Xt=!1;else{G=t(m,l,bt,G,!1);const di=d.listen(tr,M,G);Vt.push(G,di),nt&&nt.push(M,hr,Pn,Pn+1)}}else G=t(m,l,bt,G,!0),tr.addEventListener(M,G,re),Vt.push(G),nt&&nt.push(M,hr,Pn,re)}else G=t(m,l,bt,G,!1);const yn=m.outputs;let jn;if(Xt&&null!==yn&&(jn=yn[M])){const Kn=jn.length;if(Kn)for(let tr=0;tr<Kn;tr+=2){const ws=l[jn[tr]][jn[tr+1]].subscribe(G),Bu=Vt.length;Vt.push(G,ws),nt&&nt.push(M,m.index,Bu,-(Bu+1))}}}(G,M,M[11],re,o,l,!!d,m),jh}function n(o,l,d,m){try{return!1!==d(m)}catch(M){return qg(o,M),!1}}function t(o,l,d,m,M){return function G(re){if(re===Function)return m;const ve=2&o.flags?jr(o.index,l):l;0==(32&l[2])&&lh(ve);let Ae=n(l,0,m,re),Je=G.__ngNextListenerFn__;for(;Je;)Ae=n(l,0,Je,re)&&Ae,Je=Je.__ngNextListenerFn__;return M&&!1===Ae&&(re.preventDefault(),re.returnValue=!1),Ae}}function r(o=1){return function Hc(o){return(Ne.lFrame.contextLView=function Zc(o,l){for(;o>0;)l=l[15],o--;return l}(o,Ne.lFrame.contextLView))[8]}(o)}function c(o,l){let d=null;const m=function We(o){const l=o.attrs;if(null!=l){const d=l.indexOf(5);if(0==(1&d))return l[d+1]}return null}(o);for(let M=0;M<l.length;M++){const G=l[M];if("*"!==G){if(null===m?Ee(o,G,!0):Ht(m,G))return M}else d=M}return d}function g(o){const l=Cn()[16][6];if(!l.projection){const m=l.projection=Ua(o?o.length:1,null),M=m.slice();let G=l.child;for(;null!==G;){const re=o?c(G,o):0;null!==re&&(M[re]?M[re].projectionNext=G:m[re]=G,M[re]=G),G=G.next}}}function v(o,l=0,d){const m=Cn(),M=wt(),G=Nl(M,20+o,16,null,d||null);null===G.projection&&(G.projection=l),Da(),64!=(64&G.flags)&&function Sg(o,l,d){Su(l[11],0,l,d,Wf(o,d,l),gc(d.parent||l[6],d,l))}(M,m,G)}function x(o,l,d){return Y(o,"",l,"",d),x}function Y(o,l,d,m,M){const G=Cn(),re=Oc(G,l,d,m);return re!==In&&ss(wt(),mi(),G,o,re,G[11],M,!1),Y}function ie(o,l,d,m,M,G,re){const ve=Cn(),Ae=wc(ve,l,d,m,M,G);return Ae!==In&&ss(wt(),mi(),ve,o,Ae,ve[11],re,!1),ie}function Sn(o,l,d,m,M){const G=o[d+1],re=null===l;let ve=m?vr(G):Nr(G),Ae=!1;for(;0!==ve&&(!1===Ae||re);){const nt=o[ve+1];gn(o[ve],l)&&(Ae=!0,o[ve+1]=m?Oi(nt):Gr(nt)),ve=m?vr(nt):Nr(nt)}Ae&&(o[d+1]=m?Gr(G):Oi(G))}function gn(o,l){return null===o||null==l||(Array.isArray(o)?o[1]:o)===l||!(!Array.isArray(o)||"string"!=typeof l)&&ua(o,l)>=0}const Bn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function On(o){return o.substring(Bn.key,Bn.keyEnd)}function Dn(o,l){const d=Bn.textEnd;return d===l?-1:(l=Bn.keyEnd=function Ci(o,l,d){for(;l<d&&o.charCodeAt(l)>32;)l++;return l}(o,Bn.key=l,d),Ki(o,l,d))}function Ki(o,l,d){for(;l<d&&o.charCodeAt(l)<=32;)l++;return l}function hi(o,l,d){return ho(o,l,d,!1),hi}function ei(o,l){return ho(o,l,null,!0),ei}function Ts(o){ls(Yo,ki,o,!0)}function ki(o,l){for(let d=function Jn(o){return function ci(o){Bn.key=0,Bn.keyEnd=0,Bn.value=0,Bn.valueEnd=0,Bn.textEnd=o.length}(o),Dn(o,Ki(o,0,Bn.textEnd))}(l);d>=0;d=Dn(l,d))Yo(o,On(l),!0)}function ho(o,l,d,m){const M=Cn(),G=wt(),re=Ko(2);G.firstUpdatePass&&Tv(G,o,re,m),l!==In&&Mo(M,re,l)&&Cv(G,G.data[Ni()],M,M[11],o,M[re+1]=function nE(o,l){return null==o||("string"==typeof l?o+=l:"object"==typeof o&&(o=_(Hs(o)))),o}(l,d),m,re)}function ls(o,l,d,m){const M=wt(),G=Ko(2);M.firstUpdatePass&&Tv(M,null,G,m);const re=Cn();if(d!==In&&Mo(re,G,d)){const ve=M.data[Ni()];if(Mv(ve,m)&&!Ev(M,G)){let Ae=m?ve.classesWithoutHost:ve.stylesWithoutHost;null!==Ae&&(d=b(Ae,d||"")),Fh(M,ve,re,d,m)}else!function tE(o,l,d,m,M,G,re,ve){M===In&&(M=an);let Ae=0,Je=0,nt=0<M.length?M[0]:null,bt=0<G.length?G[0]:null;for(;null!==nt||null!==bt;){const Vt=Ae<M.length?M[Ae+1]:void 0,Xt=Je<G.length?G[Je+1]:void 0;let jn,yn=null;nt===bt?(Ae+=2,Je+=2,Vt!==Xt&&(yn=bt,jn=Xt)):null===bt||null!==nt&&nt<bt?(Ae+=2,yn=nt):(Je+=2,yn=bt,jn=Xt),null!==yn&&Cv(o,l,d,m,yn,jn,re,ve),nt=Ae<M.length?M[Ae]:null,bt=Je<G.length?G[Je]:null}}(M,ve,re,re[11],re[G+1],re[G+1]=function eE(o,l,d){if(null==d||""===d)return an;const m=[],M=Hs(d);if(Array.isArray(M))for(let G=0;G<M.length;G++)o(m,M[G],!0);else if("object"==typeof M)for(const G in M)M.hasOwnProperty(G)&&o(m,G,M[G]);else"string"==typeof M&&l(m,M);return m}(o,l,d),m,G)}}function Ev(o,l){return l>=o.expandoStartIndex}function Tv(o,l,d,m){const M=o.data;if(null===M[d+1]){const G=M[Ni()],re=Ev(o,d);Mv(G,m)&&null===l&&!re&&(l=!1),l=function q0(o,l,d,m){const M=function nl(o){const l=Ne.lFrame.currentDirectiveIndex;return-1===l?null:o[l]}(o);let G=m?l.residualClasses:l.residualStyles;if(null===M)0===(m?l.classBindings:l.styleBindings)&&(d=Vh(d=d_(null,o,l,d,m),l.attrs,m),G=null);else{const re=l.directiveStylingLast;if(-1===re||o[re]!==M)if(d=d_(M,o,l,d,m),null===G){let Ae=function J0(o,l,d){const m=d?l.classBindings:l.styleBindings;if(0!==Nr(m))return o[vr(m)]}(o,l,m);void 0!==Ae&&Array.isArray(Ae)&&(Ae=d_(null,o,l,Ae[1],m),Ae=Vh(Ae,l.attrs,m),function Q0(o,l,d,m){o[vr(d?l.classBindings:l.styleBindings)]=m}(o,l,m,Ae))}else G=function X0(o,l,d){let m;const M=l.directiveEnd;for(let G=1+l.directiveStylingLast;G<M;G++)m=Vh(m,o[G].hostAttrs,d);return Vh(m,l.attrs,d)}(o,l,m)}return void 0!==G&&(m?l.residualClasses=G:l.residualStyles=G),d}(M,G,l,m),function rn(o,l,d,m,M,G){let re=G?l.classBindings:l.styleBindings,ve=vr(re),Ae=Nr(re);o[m]=d;let nt,Je=!1;if(Array.isArray(d)){const bt=d;nt=bt[1],(null===nt||ua(bt,nt)>0)&&(Je=!0)}else nt=d;if(M)if(0!==Ae){const Vt=vr(o[ve+1]);o[m+1]=Fr(Vt,ve),0!==Vt&&(o[Vt+1]=ii(o[Vt+1],m)),o[ve+1]=function Rr(o,l){return 131071&o|l<<17}(o[ve+1],m)}else o[m+1]=Fr(ve,0),0!==ve&&(o[ve+1]=ii(o[ve+1],m)),ve=m;else o[m+1]=Fr(Ae,0),0===ve?ve=m:o[Ae+1]=ii(o[Ae+1],m),Ae=m;Je&&(o[m+1]=Gr(o[m+1])),Sn(o,nt,m,!0),Sn(o,nt,m,!1),function nn(o,l,d,m,M){const G=M?o.residualClasses:o.residualStyles;null!=G&&"string"==typeof l&&ua(G,l)>=0&&(d[m+1]=Oi(d[m+1]))}(l,nt,o,m,G),re=Fr(ve,Ae),G?l.classBindings=re:l.styleBindings=re}(M,G,l,d,re,m)}}function d_(o,l,d,m,M){let G=null;const re=d.directiveEnd;let ve=d.directiveStylingLast;for(-1===ve?ve=d.directiveStart:ve++;ve<re&&(G=l[ve],m=Vh(m,G.hostAttrs,M),G!==o);)ve++;return null!==o&&(d.directiveStylingLast=ve),m}function Vh(o,l,d){const m=d?1:2;let M=-1;if(null!==l)for(let G=0;G<l.length;G++){const re=l[G];"number"==typeof re?M=re:M===m&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Yo(o,re,!!d||l[++G]))}return void 0===o?null:o}function Cv(o,l,d,m,M,G,re,ve){if(!(3&l.type))return;const Ae=o.data,Je=Ae[ve+1];Vp(function Xr(o){return 1==(1&o)}(Je)?Sv(Ae,l,d,M,Nr(Je),re):void 0)||(Vp(G)||function li(o){return 2==(2&o)}(Je)&&(G=Sv(Ae,null,d,M,ve,re)),function qf(o,l,d,m,M){const G=dt(o);if(l)M?G?o.addClass(d,m):d.classList.add(m):G?o.removeClass(d,m):d.classList.remove(m);else{let re=-1===m.indexOf("-")?void 0:Fo.DashCase;if(null==M)G?o.removeStyle(d,m,re):d.style.removeProperty(m);else{const ve="string"==typeof M&&M.endsWith("!important");ve&&(M=M.slice(0,-10),re|=Fo.Important),G?o.setStyle(d,m,M,re):d.style.setProperty(m,M,ve?"important":"")}}}(m,re,Dr(Ni(),d),M,G))}function Sv(o,l,d,m,M,G){const re=null===l;let ve;for(;M>0;){const Ae=o[M],Je=Array.isArray(Ae),nt=Je?Ae[1]:Ae,bt=null===nt;let Vt=d[M+1];Vt===In&&(Vt=bt?an:void 0);let Xt=bt?qu(Vt,m):nt===m?Vt:void 0;if(Je&&!Vp(Xt)&&(Xt=qu(Ae,m)),Vp(Xt)&&(ve=Xt,re))return ve;const yn=o[M+1];M=re?vr(yn):Nr(yn)}if(null!==l){let Ae=G?l.residualClasses:l.residualStyles;null!=Ae&&(ve=qu(Ae,m))}return ve}function Vp(o){return void 0!==o}function Mv(o,l){return 0!=(o.flags&(l?16:32))}function Dv(o,l=""){const d=Cn(),m=wt(),M=o+20,G=m.firstCreatePass?Nl(m,M,1,l,null):m.data[M],re=d[M]=vd(d[11],l);_a(m,d,re,G),ji(G,!1)}function f_(o){return Gp("",o,""),f_}function Gp(o,l,d){const m=Cn(),M=Oc(m,o,l,d);return M!==In&&ba(m,Ni(),M),Gp}function h_(o,l,d,m,M){const G=Cn(),re=wc(G,o,l,d,m,M);return re!==In&&ba(G,Ni(),re),h_}function Nv(o,l,d){ls(Yo,ki,Oc(Cn(),o,l,d),!0)}function g_(o,l,d){const m=Cn();return Mo(m,bs(),l)&&ss(wt(),mi(),m,o,l,m[11],d,!0),g_}const Fu=void 0;var TE=["en",[["a","p"],["AM","PM"],Fu],[["AM","PM"],Fu,Fu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fu,"{1} 'at' {0}",Fu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function EE(o){const d=Math.floor(Math.abs(o)),m=o.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===m?1:5}];let Qd={};function p_(o){const l=function bE(o){return o.toLowerCase().replace(/_/g,"-")}(o);let d=Wv(l);if(d)return d;const m=l.split("-")[0];if(d=Wv(m),d)return d;if("en"===m)return TE;throw new Error(`Missing locale data for the locale "${o}".`)}function Kv(o){return p_(o)[yr.PluralCase]}function Wv(o){return o in Qd||(Qd[o]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[o]),Qd[o]}var yr=(()=>((yr=yr||{})[yr.LocaleId=0]="LocaleId",yr[yr.DayPeriodsFormat=1]="DayPeriodsFormat",yr[yr.DayPeriodsStandalone=2]="DayPeriodsStandalone",yr[yr.DaysFormat=3]="DaysFormat",yr[yr.DaysStandalone=4]="DaysStandalone",yr[yr.MonthsFormat=5]="MonthsFormat",yr[yr.MonthsStandalone=6]="MonthsStandalone",yr[yr.Eras=7]="Eras",yr[yr.FirstDayOfWeek=8]="FirstDayOfWeek",yr[yr.WeekendRange=9]="WeekendRange",yr[yr.DateFormat=10]="DateFormat",yr[yr.TimeFormat=11]="TimeFormat",yr[yr.DateTimeFormat=12]="DateTimeFormat",yr[yr.NumberSymbols=13]="NumberSymbols",yr[yr.NumberFormats=14]="NumberFormats",yr[yr.CurrencyCode=15]="CurrencyCode",yr[yr.CurrencySymbol=16]="CurrencySymbol",yr[yr.CurrencyName=17]="CurrencyName",yr[yr.Currencies=18]="Currencies",yr[yr.Directionality=19]="Directionality",yr[yr.PluralCase=20]="PluralCase",yr[yr.ExtraData=21]="ExtraData",yr))();const CE=["zero","one","two","few","many"],Hp="en-US",Zp={marker:"element"},Kp={marker:"ICU"};var Wi=(()=>((Wi=Wi||{})[Wi.SHIFT=2]="SHIFT",Wi[Wi.APPEND_EAGERLY=1]="APPEND_EAGERLY",Wi[Wi.COMMENT=2]="COMMENT",Wi))();let Yv=Hp;function $v(o,l,d){const m=l.insertBeforeIndex,M=Array.isArray(m)?m[0]:m;return null===M?$f(o,0,d):_n(d[M])}function zv(o,l,d,m,M){const G=l.insertBeforeIndex;if(Array.isArray(G)){let re=m,ve=null;if(3&l.type||(ve=re,re=M),null!==re&&0==(2&l.flags))for(let Ae=1;Ae<G.length;Ae++)ma(o,re,d[G[Ae]],ve,!1)}}function qv(o,l){if(o.push(l),o.length>1)for(let d=o.length-2;d>=0;d--){const m=o[d];Jv(m)||AE(m,l)&&null===IE(m)&&xE(m,l.index)}}function Jv(o){return!(64&o.type)}function AE(o,l){return Jv(l)||o.index>l.index}function IE(o){const l=o.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function xE(o,l){const d=o.insertBeforeIndex;Array.isArray(d)?d[0]=l:(Il($v,zv),o.insertBeforeIndex=l)}function Gh(o,l){const d=o.data[l];return null===d||"string"==typeof d?null:d.hasOwnProperty("currentCaseLViewIndex")?d:d.value}function RE(o,l,d){const m=Xs(o,d,64,null,null);return qv(l,m),m}function Wp(o,l){const d=l[o.currentCaseLViewIndex];return null===d?d:d<0?~d:d}function Qv(o){return o>>>17}function Xv(o){return(131070&o)>>>1}let Hh=0,Zh=0;function ty(o,l,d,m){const M=d[11];let re,G=null;for(let ve=0;ve<l.length;ve++){const Ae=l[ve];if("string"==typeof Ae){const Je=l[++ve];null===d[Je]&&(d[Je]=vd(M,Ae))}else if("number"==typeof Ae)switch(1&Ae){case 0:const Je=Qv(Ae);let nt,bt;if(null===G&&(G=Je,re=Al(M,m)),Je===G?(nt=m,bt=re):(nt=null,bt=_n(d[Je])),null!==bt){const jn=Xv(Ae);ma(M,bt,d[jn],nt,!1);const tr=Gh(o,jn);if(null!==tr&&"object"==typeof tr){const Pn=Wp(tr,d);null!==Pn&&ty(o,tr.create[Pn],d,d[tr.anchorIdx])}}break;case 1:const Xt=l[++ve],yn=l[++ve];Qa(M,Dr(Ae>>>1,d),null,null,Xt,yn,null)}else switch(Ae){case Kp:const Je=l[++ve],nt=l[++ve];null===d[nt]&&Xi(d[nt]=bg(M,Je),d);break;case Zp:const bt=l[++ve],Vt=l[++ve];null===d[Vt]&&Xi(d[Vt]=dc(M,bt,null),d)}}}function ny(o,l,d,m,M){for(let G=0;G<d.length;G++){const re=d[G],ve=d[++G];if(re&M){let Ae="";for(let Je=G+1;Je<=G+ve;Je++){const nt=d[Je];if("string"==typeof nt)Ae+=nt;else if("number"==typeof nt)if(nt<0)Ae+=E(l[m-nt]);else{const bt=nt>>>2;switch(3&nt){case 1:const Vt=d[++Je],Xt=d[++Je],yn=o.data[bt];"string"==typeof yn?Qa(l[11],l[bt],null,yn,Vt,Ae,Xt):ss(o,yn,l,Vt,Ae,l[11],Xt,!1);break;case 0:const jn=l[bt];null!==jn&&Hf(l[11],jn,Ae);break;case 2:BE(o,Gh(o,bt),l,Ae);break;case 3:ry(o,Gh(o,bt),m,l)}}}}else{const Ae=d[G+1];if(Ae>0&&3==(3&Ae)){const nt=Gh(o,Ae>>>2);l[nt.currentCaseLViewIndex]<0&&ry(o,nt,m,l)}}G+=ve}}function ry(o,l,d,m){let M=m[l.currentCaseLViewIndex];if(null!==M){let G=Hh;M<0&&(M=m[l.currentCaseLViewIndex]=~M,G=-1),ny(o,m,l.update[M],d,G)}}function BE(o,l,d,m){const M=function UE(o,l){let d=o.cases.indexOf(l);if(-1===d)switch(o.type){case 1:{const m=function SE(o,l){const d=Kv(l)(parseInt(o,10)),m=CE[d];return void 0!==m?m:"other"}(l,function PE(){return Yv}());d=o.cases.indexOf(m),-1===d&&"other"!==m&&(d=o.cases.indexOf("other"));break}case 0:d=o.cases.indexOf("other")}return-1===d?null:d}(l,m);if(Wp(l,d)!==M&&(iy(o,l,d),d[l.currentCaseLViewIndex]=null===M?null:~M,null!==M)){const re=d[l.anchorIdx];re&&ty(o,l.create[M],d,re)}}function iy(o,l,d){let m=Wp(l,d);if(null!==m){const M=l.remove[m];for(let G=0;G<M.length;G++){const re=M[G];if(re>0){const ve=Dr(re,d);null!==ve&&uo(d[11],ve)}else iy(o,Gh(o,~re),d)}}}function jE(){const o=[];let d,m,l=-1;function G(ve,Ae){l=0;const Je=Wp(ve,Ae);m=null!==Je?ve.remove[Je]:an}function re(){if(l<m.length){const ve=m[l++];return ve>0?d[ve]:(o.push(l,m),G(d[1].data[~ve],d),re())}return 0===o.length?null:(m=o.pop(),l=o.pop(),re())}return function M(ve,Ae){for(d=Ae;o.length;)o.pop();return G(ve.value,Ae),re}}const Yp=/\ufffd(\d+):?\d*\ufffd/gi,GE=/\ufffd(\d+)\ufffd/,sy=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,HE=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ZE=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,KE=/\uE500/g;function ay(o,l,d,m,M,G,re){const ve=Ps(o,m,1,null);let Ae=ve<<Wi.SHIFT,Je=Wr();l===Je&&(Je=null),null===Je&&(Ae|=Wi.APPEND_EAGERLY),re&&(Ae|=Wi.COMMENT,function mu(o){void 0===lc&&(lc=o())}(jE)),M.push(Ae,null===G?"":G);const nt=Xs(o,ve,re?32:1,null===G?"":G,null);qv(d,nt);const bt=nt.index;return ji(nt,!1),null!==Je&&l!==Je&&function wE(o,l){let d=o.insertBeforeIndex;null===d?(Il($v,zv),d=o.insertBeforeIndex=[null,l]):(function V(o,l,d){o!=l&&Ue(d,o,l,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(l))}(Je,bt),nt}function $E(o,l,d,m,M,G,re){const ve=re.match(Yp),Ae=ay(o,l,d,G,m,ve?null:re,!1);ve&&Xd(M,re,Ae.index,null,0,null)}function Xd(o,l,d,m,M,G){const re=o.length,ve=re+1;o.push(null,null);const Ae=re+2,Je=l.split(Yp);let nt=0;for(let bt=0;bt<Je.length;bt++){const Vt=Je[bt];if(1&bt){const Xt=M+parseInt(Vt,10);o.push(-1-Xt),nt|=ly(Xt)}else""!==Vt&&o.push(Vt)}return o.push(d<<2|(m?1:0)),m&&o.push(m,G),o[re]=nt,o[ve]=o.length-Ae,nt}function ly(o){return 1<<Math.min(o,31)}function cy(o){let l,G,d="",m=0,M=!1;for(;null!==(l=HE.exec(o));)M?l[0]===`\ufffd/*${G}\ufffd`&&(m=l.index,M=!1):(d+=o.substring(m,l.index+l[0].length),G=l[1],M=!0);return d+=o.substr(m),d}function uy(o,l,d,m,M,G){let re=0;const ve={type:M.type,currentCaseLViewIndex:Ps(o,l,1,null),anchorIdx:G,cases:[],create:[],remove:[],update:[]};(function nT(o,l,d){o.push(ly(l.mainBinding),2,-1-l.mainBinding,d<<2|2)})(d,M,G),function OE(o,l,d){const m=o.data[l];null===m?o.data[l]=d:m.value=d}(o,G,ve);const Ae=M.values;for(let Je=0;Je<Ae.length;Je++){const nt=Ae[Je],bt=[];for(let Vt=0;Vt<nt.length;Vt++){const Xt=nt[Vt];if("string"!=typeof Xt){const yn=bt.push(Xt)-1;nt[Vt]=`\x3c!--\ufffd${yn}\ufffd--\x3e`}}re=eT(o,ve,l,d,m,M.cases[Je],nt.join(""),bt)|re}re&&function rT(o,l,d){o.push(l,1,d<<2|3)}(d,re,G)}function XE(o){const l=[],d=[];let m=1,M=0;const G=m_(o=o.replace(sy,function(re,ve,Ae){return m="select"===Ae?0:1,M=parseInt(ve.substr(1),10),""}));for(let re=0;re<G.length;){let ve=G[re++].trim();1===m&&(ve=ve.replace(/\s*(?:=)?(\w+)\s*/,"$1")),ve.length&&l.push(ve);const Ae=m_(G[re++]);l.length>d.length&&d.push(Ae)}return{type:m,mainBinding:M,cases:l,values:d}}function m_(o){if(!o)return[];let l=0;const d=[],m=[],M=/[{}]/g;let G;for(M.lastIndex=0;G=M.exec(o);){const ve=G.index;if("}"==G[0]){if(d.pop(),0==d.length){const Ae=o.substring(l,ve);sy.test(Ae)?m.push(XE(Ae)):m.push(Ae),l=ve+1}}else{if(0==d.length){const Ae=o.substring(l,ve);m.push(Ae),l=ve+1}d.push("{")}}const re=o.substring(l);return m.push(re),m}function eT(o,l,d,m,M,G,re,ve){const Ae=[],Je=[],nt=[];l.cases.push(G),l.create.push(Ae),l.remove.push(Je),l.update.push(nt);const Vt=Ei(lt()).getInertBodyElement(re),Xt=tc(Vt)||Vt;return Xt?dy(o,l,d,m,Ae,Je,nt,Xt,M,ve,0):0}function dy(o,l,d,m,M,G,re,ve,Ae,Je,nt){let bt=0,Vt=ve.firstChild;for(;Vt;){const Xt=Ps(o,d,1,null);switch(Vt.nodeType){case Node.ELEMENT_NODE:const yn=Vt,jn=yn.tagName.toLowerCase();if(Ga.hasOwnProperty(jn)){__(M,Zp,jn,Ae,Xt),o.data[Xt]=jn;const hr=yn.attributes;for(let Yr=0;Yr<hr.length;Yr++){const di=hr.item(Yr),ws=di.name.toLowerCase();di.value.match(Yp)?ad.hasOwnProperty(ws)&&Xd(re,di.value,Xt,di.name,0,sd[ws]?_l:Zs[ws]?iu:null):iT(M,Xt,di)}bt=dy(o,l,d,m,M,G,re,Vt,Xt,Je,nt+1)|bt,fy(G,Xt,nt)}break;case Node.TEXT_NODE:const Kn=Vt.textContent||"",tr=Kn.match(Yp);__(M,null,tr?"":Kn,Ae,Xt),fy(G,Xt,nt),tr&&(bt=Xd(re,Kn,Xt,null,0,null)|bt);break;case Node.COMMENT_NODE:const Pn=GE.exec(Vt.textContent||"");if(Pn){const Yr=Je[parseInt(Pn[1],10)];__(M,Kp,"",Ae,Xt),uy(o,d,m,Ae,Yr,Xt),tT(G,Xt,nt)}}Vt=Vt.nextSibling}return bt}function fy(o,l,d){0===d&&o.push(l)}function tT(o,l,d){0===d&&(o.push(~l),o.push(l))}function __(o,l,d,m,M){null!==l&&o.push(l),o.push(d,M,function NE(o,l,d){return o|l<<17|d<<1}(0,m,M))}function iT(o,l,d){o.push(l<<1|1,d.name,d.value)}function gy(o,l,d=-1){const m=wt(),M=Cn(),G=20+o,re=vi(m.consts,l),ve=Wr();m.firstCreatePass&&function YE(o,l,d,m,M,G){const re=Wr(),ve=[],Ae=[],Je=[[]];M=function QE(o,l){if(function JE(o){return-1===o}(l))return cy(o);{const d=o.indexOf(`:${l}\ufffd`)+2+l.toString().length,m=o.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return cy(o.substring(d,m))}}(M,G);const nt=function WE(o){return o.replace(KE," ")}(M).split(ZE);for(let bt=0;bt<nt.length;bt++){let Vt=nt[bt];if(0==(1&bt)){const Xt=m_(Vt);for(let yn=0;yn<Xt.length;yn++){let jn=Xt[yn];if(0==(1&yn)){const Kn=jn;""!==Kn&&$E(o,re,Je[0],ve,Ae,d,Kn)}else{const Kn=jn;if("object"!=typeof Kn)throw new Error(`Unable to parse ICU expression in "${M}" message.`);uy(o,d,Ae,l,Kn,ay(o,re,Je[0],d,ve,"",!0).index)}}}else{const Xt=47===Vt.charCodeAt(0),jn=(Vt.charCodeAt(Xt?1:0),20+Number.parseInt(Vt.substring(Xt?2:1)));if(Xt)Je.shift(),ji(Wr(),!1);else{const Kn=RE(o,Je[0],jn);Je.unshift([]),ji(Kn,!0)}}}o.data[m]={create:ve,update:Ae}}(m,null===ve?0:ve.index,M,G,re,d);const Ae=m.data[G],nt=Cd(m,ve===M[6]?null:ve,M);(function kE(o,l,d,m){const M=o[11];for(let G=0;G<l.length;G++){const re=l[G++],ve=l[G],Ae=(re&Wi.COMMENT)===Wi.COMMENT,Je=(re&Wi.APPEND_EAGERLY)===Wi.APPEND_EAGERLY,nt=re>>>Wi.SHIFT;let bt=o[nt];null===bt&&(bt=o[nt]=Ae?M.createComment(ve):vd(M,ve)),Je&&null!==d&&ma(M,d,bt,m,!1)}})(M,Ae.create,nt,ve&&8&ve.type?M[ve.index]:null),el(!0)}function my(o,l,d){gy(o,l,d),function py(){el(!1)}()}function v_(o){return function LE(o){o&&(Hh|=1<<Math.min(Zh,31)),Zh++}(Mo(Cn(),bs(),o)),v_}function _y(o){!function FE(o,l,d){if(Zh>0){const m=o.data[d];ny(o,l,Array.isArray(m)?m:m.update,Zo()-Zh-1,Hh)}Hh=0,Zh=0}(wt(),Cn(),o+20)}function y_(o,l,d,m,M){if(o=B(o),Array.isArray(o))for(let G=0;G<o.length;G++)y_(o[G],l,d,m,M);else{const G=wt(),re=Cn();let ve=Ac(o)?o:B(o.provide),Ae=Kd(o);const Je=Gn(),nt=1048575&Je.providerIndexes,bt=Je.directiveStart,Vt=Je.providerIndexes>>20;if(Ac(o)||!o.multi){const Xt=new cl(Ae,M,Lu),yn=T_(ve,l,M?nt:nt+Vt,bt);-1===yn?(wr(St(Je,re),G,ve),E_(G,o,l.length),l.push(ve),Je.directiveStart++,Je.directiveEnd++,M&&(Je.providerIndexes+=1048576),d.push(Xt),re.push(Xt)):(d[yn]=Xt,re[yn]=Xt)}else{const Xt=T_(ve,l,nt+Vt,bt),yn=T_(ve,l,nt,nt+Vt),jn=Xt>=0&&d[Xt],Kn=yn>=0&&d[yn];if(M&&!Kn||!M&&!jn){wr(St(Je,re),G,ve);const tr=function vT(o,l,d,m,M){const G=new cl(o,d,Lu);return G.multi=[],G.index=l,G.componentProviders=0,vy(G,M,m&&!d),G}(M?_T:mT,d.length,M,m,Ae);!M&&Kn&&(d[yn].providerFactory=tr),E_(G,o,l.length,0),l.push(ve),Je.directiveStart++,Je.directiveEnd++,M&&(Je.providerIndexes+=1048576),d.push(tr),re.push(tr)}else E_(G,o,Xt>-1?Xt:yn,vy(d[M?yn:Xt],Ae,!M&&m));!M&&m&&Kn&&d[yn].componentProviders++}}}function E_(o,l,d,m){const M=Ac(l),G=function hh(o){return!!o.useClass}(l);if(M||G){const Ae=(G?B(l.useClass):l).prototype.ngOnDestroy;if(Ae){const Je=o.destroyHooks||(o.destroyHooks=[]);if(!M&&l.multi){const nt=Je.indexOf(d);-1===nt?Je.push(d,[m,Ae]):Je[nt+1].push(m,Ae)}else Je.push(d,Ae)}}}function vy(o,l,d){return d&&o.componentProviders++,o.multi.push(l)-1}function T_(o,l,d,m){for(let M=d;M<m;M++)if(l[M]===o)return M;return-1}function mT(o,l,d,m){return b_(this.multi,[])}function _T(o,l,d,m){const M=this.multi;let G;if(this.providerFactory){const re=this.providerFactory.componentProviders,ve=lo(d,d[1],this.providerFactory.index,m);G=ve.slice(0,re),b_(M,G);for(let Ae=re;Ae<ve.length;Ae++)G.push(ve[Ae])}else G=[],b_(M,G);return G}function b_(o,l){for(let d=0;d<o.length;d++)l.push((0,o[d])());return l}function yy(o,l=[]){return d=>{d.providersResolver=(m,M)=>function pT(o,l,d){const m=wt();if(m.firstCreatePass){const M=Lr(o);y_(d,m.data,m.blueprint,M,!0),y_(l,m.data,m.blueprint,M,!1)}}(m,M?M(o):o,l)}}class Ey{}class TT{resolveComponentFactory(l){throw function ET(o){const l=Error(`No component factory found for ${_(o)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=o,l}(l)}}let Wh=(()=>{class o{}return o.NULL=new TT,o})();function bT(){return ef(Gn(),Cn())}function ef(o,l){return new Yh(Tr(o,l))}let Yh=(()=>{class o{constructor(d){this.nativeElement=d}}return o.__NG_ELEMENT_ID__=bT,o})();function CT(o){return o instanceof Yh?o.nativeElement:o}class by{}let ST=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function DT(){const o=Cn(),d=jr(Gn().index,o);return function MT(o){return o[11]}(ti(d)?d:o)}(),o})(),PT=(()=>{class o{}return o.\u0275prov=He({token:o,providedIn:"root",factory:()=>null}),o})();class Cy{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const AT=new Cy("13.2.0"),C_={};function $p(o,l,d,m,M=!1){for(;null!==d;){const G=l[d.index];if(null!==G&&m.push(_n(G)),oi(G))for(let ve=10;ve<G.length;ve++){const Ae=G[ve],Je=Ae[1].firstChild;null!==Je&&$p(Ae[1],Ae,Je,m)}const re=d.type;if(8&re)$p(o,l,d.child,m);else if(32&re){const ve=Dl(d,l);let Ae;for(;Ae=ve();)m.push(Ae)}else if(16&re){const ve=zf(l,d);if(Array.isArray(ve))m.push(...ve);else{const Ae=Ka(l[16]);$p(Ae[1],Ae,ve,m,!0)}}d=M?d.projectionNext:d.next}return m}class $h{constructor(l,d){this._lView=l,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,d=l[1];return $p(d,l,d.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(oi(l)){const d=l[8],m=d?d.indexOf(this):-1;m>-1&&(Ed(l,m),ql(d,m))}this._attachedToViewContainer=!1}Tu(this._lView[1],this._lView)}onDestroy(l){rh(this._lView[1],this._lView,null,l)}markForCheck(){lh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ch(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Yg(o,l,d){Aa(!0);try{ch(o,l,d)}finally{Aa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new y(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function yu(o,l){pc(o,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new y(902,"");this._appRef=l}}class IT extends $h{constructor(l){super(l),this._view=l}detectChanges(){uh(this._view)}checkNoChanges(){!function Pm(o){Aa(!0);try{uh(o)}finally{Aa(!1)}}(this._view)}get context(){return null}}class Sy extends Wh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const d=on(l);return new S_(d,this.ngModule)}}function My(o){const l=[];for(let d in o)o.hasOwnProperty(d)&&l.push({propName:o[d],templateName:d});return l}const OT=new Mi("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>pu});class S_ extends Ey{constructor(l,d){super(),this.componentDef=l,this.ngModule=d,this.componentType=l.type,this.selector=function ir(o){return o.map(En).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return My(this.componentDef.inputs)}get outputs(){return My(this.componentDef.outputs)}create(l,d,m,M){const G=(M=M||this.ngModule)?function wT(o,l){return{get:(d,m,M)=>{const G=o.get(d,C_,M);return G!==C_||m===C_?G:l.get(d,m,M)}}}(l,M.injector):l,re=G.get(by,Bt),ve=G.get(PT,null),Ae=re.createRenderer(null,this.componentDef),Je=this.componentDef.selectors[0][0]||"div",nt=m?function wg(o,l,d){if(dt(o))return o.selectRootElement(l,d===tt.ShadowDom);let m="string"==typeof l?o.querySelector(l):l;return m.textContent="",m}(Ae,m,this.componentDef.encapsulation):dc(re.createRenderer(null,this.componentDef),Je,function xT(o){const l=o.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(Je)),bt=this.componentDef.onPush?576:528,Vt=function Uo(o,l){return{components:[],scheduler:o||pu,clean:Is,playerHandler:l||null,flags:0}}(),Xt=Ll(0,null,null,1,0,null,null,null,null,null),yn=xu(null,Xt,Vt,bt,null,null,re,Ae,ve,G);let jn,Kn;Ia(yn);try{const tr=function as(o,l,d,m,M,G){const re=d[1];d[20]=o;const Ae=Nl(re,20,2,"#host",null),Je=Ae.mergedAttrs=l.hostAttrs;null!==Je&&(Ud(Ae,Je,!0),null!==o&&(ia(M,o,Je),null!==Ae.classes&&Mu(M,o,Ae.classes),null!==Ae.styles&&mc(M,o,Ae.styles)));const nt=m.createRenderer(o,l),bt=xu(d,Og(l),null,l.onPush?64:16,d[20],Ae,m,nt,G||null,null);return re.firstCreatePass&&(wr(St(Ae,d),re,l.type),Vg(re,Ae),Gg(Ae,d.length,1)),kd(d,bt),d[20]=bt}(nt,this.componentDef,yn,re,Ae);if(nt)if(m)ia(Ae,nt,["ng-version",AT.full]);else{const{attrs:Pn,classes:hr}=function $n(o){const l=[],d=[];let m=1,M=2;for(;m<o.length;){let G=o[m];if("string"==typeof G)2===M?""!==G&&l.push(G,o[++m]):8===M&&d.push(G);else{if(!T(M))break;M=G}m++}return{attrs:l,classes:d}}(this.componentDef.selectors[0]);Pn&&ia(Ae,nt,Pn),hr&&hr.length>0&&Mu(Ae,nt,hr.join(" "))}if(Kn=gi(Xt,20),void 0!==d){const Pn=Kn.projection=[];for(let hr=0;hr<this.ngContentSelectors.length;hr++){const Yr=d[hr];Pn.push(null!=Yr?Array.from(Yr):null)}}jn=function lp(o,l,d,m,M){const G=d[1],re=function Nd(o,l,d){const m=Gn();o.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),Hg(o,m,l,Ps(o,l,1,null),d));const M=lo(l,o,m.directiveStart,m);Xi(M,l);const G=Tr(m,l);return G&&Xi(G,l),M}(G,d,l);if(m.components.push(re),o[8]=re,M&&M.forEach(Ae=>Ae(re,l)),l.contentQueries){const Ae=Gn();l.contentQueries(1,re,Ae.directiveStart)}const ve=Gn();return!G.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ds(ve.index),Bg(d[1],ve,0,ve.directiveStart,ve.directiveEnd,l),Ld(l,re)),re}(tr,this.componentDef,yn,Vt,[Lm]),Sc(Xt,yn,null)}finally{Ns()}return new NT(this.componentType,jn,ef(Kn,yn),yn,Kn)}}class NT extends class yT{}{constructor(l,d,m,M,G){super(),this.location=m,this._rootLView=M,this._tNode=G,this.instance=d,this.hostView=this.changeDetectorRef=new IT(M),this.componentType=l}get injector(){return new sa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class tf{}class Dy{}const nf=new Map;class Iy extends tf{constructor(l,d){super(),this._parent=d,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Sy(this);const m=Wn(l);this._bootstrapComponents=$o(m.bootstrap),this._r3Injector=Hd(l,d,[{provide:tf,useValue:this},{provide:Wh,useValue:this.componentFactoryResolver}],_(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,d=ys.THROW_IF_NOT_FOUND,m=$.Default){return l===ys||l===tf||l===dh?this:this._r3Injector.get(l,d,m)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class M_ extends Dy{constructor(l){super(),this.moduleType=l,null!==Wn(l)&&function FT(o){const l=new Set;!function d(m){const M=Wn(m,!0),G=M.id;null!==G&&(function Py(o,l,d){if(l&&l!==d)throw new Error(`Duplicate module registered for ${o} - ${_(l)} vs ${_(l.name)}`)}(G,nf.get(G),m),nf.set(G,m));const re=$o(M.imports);for(const ve of re)l.has(ve)||(l.add(ve),d(ve))}(o)}(l)}create(l){return new Iy(this.moduleType,l)}}function xy(o,l,d){const m=Ji()+o,M=Cn();return M[m]===In?na(M,m,d?l.call(d):l()):function Nu(o,l){return o[l]}(M,m)}function Oy(o,l,d,m){return Ny(Cn(),Ji(),o,l,d,m)}function wy(o,l,d,m,M){return Ly(Cn(),Ji(),o,l,d,m,M)}function Ry(o,l,d,m,M,G){return function Fy(o,l,d,m,M,G,re,ve){const Ae=l+d;return function qd(o,l,d,m,M){const G=Sa(o,l,d,m);return Mo(o,l+2,M)||G}(o,Ae,M,G,re)?na(o,Ae+3,ve?m.call(ve,M,G,re):m(M,G,re)):zh(o,Ae+3)}(Cn(),Ji(),o,l,d,m,M,G)}function zh(o,l){const d=o[l];return d===In?void 0:d}function Ny(o,l,d,m,M,G){const re=l+d;return Mo(o,re,M)?na(o,re+1,G?m.call(G,M):m(M)):zh(o,re+1)}function Ly(o,l,d,m,M,G,re){const ve=l+d;return Sa(o,ve,M,G)?na(o,ve+2,re?m.call(re,M,G):m(M,G)):zh(o,ve+2)}function Uy(o,l){const d=wt();let m;const M=o+20;d.firstCreatePass?(m=function HT(o,l){if(l)for(let d=l.length-1;d>=0;d--){const m=l[d];if(o===m.name)return m}}(l,d.pipeRegistry),d.data[M]=m,m.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(M,m.onDestroy)):m=d.data[M];const G=m.factory||(m.factory=kr(m.type)),re=Ce(Lu);try{const ve=Se(!1),Ae=G();return Se(ve),function Zm(o,l,d,m){d>=o.data.length&&(o.data[d]=null,o.blueprint[d]=null),l[d]=m}(d,Cn(),M,Ae),Ae}finally{Ce(re)}}function jy(o,l,d){const m=o+20,M=Cn(),G=Ur(M,m);return qh(M,m)?Ny(M,Ji(),l,G.transform,d,G):G.transform(d)}function Vy(o,l,d,m){const M=o+20,G=Cn(),re=Ur(G,M);return qh(G,M)?Ly(G,Ji(),l,re.transform,d,m,re):re.transform(d,m)}function qh(o,l){return o[1].data[l].pure}function D_(o){return l=>{setTimeout(o,void 0,l)}}const Xa=class YT extends i.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,d,m){var M,G,re;let ve=l,Ae=d||(()=>null),Je=m;if(l&&"object"==typeof l){const bt=l;ve=null===(M=bt.next)||void 0===M?void 0:M.bind(bt),Ae=null===(G=bt.error)||void 0===G?void 0:G.bind(bt),Je=null===(re=bt.complete)||void 0===re?void 0:re.bind(bt)}this.__isAsync&&(Ae=D_(Ae),ve&&(ve=D_(ve)),Je&&(Je=D_(Je)));const nt=super.subscribe({next:ve,error:Ae,complete:Je});return l instanceof e.w0&&l.add(nt),nt}};function $T(){return this._results[Ic()]()}class P_{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=Ic(),m=P_.prototype;m[d]||(m[d]=$T)}get changes(){return this._changes||(this._changes=new Xa)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,d){return this._results.reduce(l,d)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,d){const m=this;m.dirty=!1;const M=io(l);(this._changesDetected=!function Yu(o,l,d){if(o.length!==l.length)return!1;for(let m=0;m<o.length;m++){let M=o[m],G=l[m];if(d&&(M=d(M),G=d(G)),G!==M)return!1}return!0}(m._results,M,d))&&(m._results=M,m.length=M.length,m.last=M[this.length-1],m.first=M[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jh=(()=>{class o{}return o.__NG_ELEMENT_ID__=JT,o})();const zT=Jh,qT=class extends zT{constructor(l,d,m){super(),this._declarationLView=l,this._declarationTContainer=d,this.elementRef=m}createEmbeddedView(l){const d=this._declarationTContainer.tViews,m=xu(this._declarationLView,d,l,16,null,d.declTNode,null,null,null,null);m[17]=this._declarationLView[this._declarationTContainer.index];const G=this._declarationLView[19];return null!==G&&(m[19]=G.createEmbeddedView(d)),Sc(d,m,l),new $h(m)}};function JT(){return zp(Gn(),Cn())}function zp(o,l){return 4&o.type?new qT(l,o,ef(o,l)):null}let qp=(()=>{class o{}return o.__NG_ELEMENT_ID__=QT,o})();function QT(){return Zy(Gn(),Cn())}const XT=qp,Gy=class extends XT{constructor(l,d,m){super(),this._lContainer=l,this._hostTNode=d,this._hostLView=m}get element(){return ef(this._hostTNode,this._hostLView)}get injector(){return new sa(this._hostTNode,this._hostLView)}get parentInjector(){const l=qn(this._hostTNode,this._hostLView);if(Kl(l)){const d=ks(l,this._hostLView),m=Cs(l);return new sa(d[1].data[m+8],d)}return new sa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const d=Hy(this._lContainer);return null!==d&&d[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,d,m){const M=l.createEmbeddedView(d||{});return this.insert(M,m),M}createComponent(l,d,m,M,G){const re=l&&!function Ba(o){return"function"==typeof o}(l);let ve;if(re)ve=d;else{const bt=d||{};ve=bt.index,m=bt.injector,M=bt.projectableNodes,G=bt.ngModuleRef}const Ae=re?l:new S_(on(l)),Je=m||this.parentInjector;if(!G&&null==Ae.ngModule&&Je){const bt=Je.get(tf,null);bt&&(G=bt)}const nt=Ae.create(Je,M,void 0,G);return this.insert(nt.hostView,ve),nt}insert(l,d){const m=l._lView,M=m[1];if(function To(o){return oi(o[3])}(m)){const nt=this.indexOf(l);if(-1!==nt)this.detach(nt);else{const bt=m[3],Vt=new Gy(bt,bt[6],bt[3]);Vt.detach(Vt.indexOf(l))}}const G=this._adjustIndex(d),re=this._lContainer;!function yd(o,l,d,m){const M=10+m,G=d.length;m>0&&(d[M-1][4]=l),m<G-10?(l[4]=d[M],qc(d,10+m,l)):(d.push(l),l[4]=null),l[3]=d;const re=l[17];null!==re&&d!==re&&function Eu(o,l){const d=o[9];l[16]!==l[3][3][16]&&(o[2]=!0),null===d?o[9]=[l]:d.push(l)}(re,l);const ve=l[19];null!==ve&&ve.insertView(o),l[2]|=128}(M,m,re,G);const ve=Pd(G,re),Ae=m[11],Je=Al(Ae,re[7]);return null!==Je&&function Cg(o,l,d,m,M,G){m[0]=M,m[6]=l,pc(o,m,d,1,M,G)}(M,re[6],Ae,m,Je,ve),l.attachToViewContainerRef(),qc(A_(re),G,l),l}move(l,d){return this.insert(l,d)}indexOf(l){const d=Hy(this._lContainer);return null!==d?d.indexOf(l):-1}remove(l){const d=this._adjustIndex(l,-1),m=Ed(this._lContainer,d);m&&(ql(A_(this._lContainer),d),Tu(m[1],m))}detach(l){const d=this._adjustIndex(l,-1),m=Ed(this._lContainer,d);return m&&null!=ql(A_(this._lContainer),d)?new $h(m):null}_adjustIndex(l,d=0){return null==l?this.length+d:l}};function Hy(o){return o[8]}function A_(o){return o[8]||(o[8]=[])}function Zy(o,l){let d;const m=l[o.index];if(oi(m))d=m;else{let M;if(8&o.type)M=_n(m);else{const G=l[11];M=G.createComment("");const re=Tr(o,l);ma(G,Al(G,re),M,function bu(o,l){return dt(o)?o.nextSibling(l):l.nextSibling}(G,re),!1)}l[o.index]=d=Zg(m,l,M,o),kd(l,d)}return new Gy(d,o,l)}class I_{constructor(l){this.queryList=l,this.matches=null}clone(){return new I_(this.queryList)}setDirty(){this.queryList.setDirty()}}class x_{constructor(l=[]){this.queries=l}createEmbeddedView(l){const d=l.queries;if(null!==d){const m=null!==l.contentQueries?l.contentQueries[0]:d.length,M=[];for(let G=0;G<m;G++){const re=d.getByIndex(G);M.push(this.queries[re.indexInDeclarationView].clone())}return new x_(M)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let d=0;d<this.queries.length;d++)null!==Xy(l,d).matches&&this.queries[d].setDirty()}}class Ky{constructor(l,d,m=null){this.predicate=l,this.flags=d,this.read=m}}class O_{constructor(l=[]){this.queries=l}elementStart(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].elementStart(l,d)}elementEnd(l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(l)}embeddedTView(l){let d=null;for(let m=0;m<this.length;m++){const M=null!==d?d.length:0,G=this.getByIndex(m).embeddedTView(l,M);G&&(G.indexInDeclarationView=m,null!==d?d.push(G):d=[G])}return null!==d?new O_(d):null}template(l,d){for(let m=0;m<this.queries.length;m++)this.queries[m].template(l,d)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class w_{constructor(l,d=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(l,d){this.isApplyingToNode(d)&&this.matchTNode(l,d)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,d){this.elementStart(l,d)}embeddedTView(l,d){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,d),new w_(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let m=l.parent;for(;null!==m&&8&m.type&&m.index!==d;)m=m.parent;return d===(null!==m?m.index:-1)}return this._appliesToNextNode}matchTNode(l,d){const m=this.metadata.predicate;if(Array.isArray(m))for(let M=0;M<m.length;M++){const G=m[M];this.matchTNodeWithReadOption(l,d,nb(d,G)),this.matchTNodeWithReadOption(l,d,gs(d,l,G,!1,!1))}else m===Jh?4&d.type&&this.matchTNodeWithReadOption(l,d,-1):this.matchTNodeWithReadOption(l,d,gs(d,l,m,!1,!1))}matchTNodeWithReadOption(l,d,m){if(null!==m){const M=this.metadata.read;if(null!==M)if(M===Yh||M===qp||M===Jh&&4&d.type)this.addMatch(d.index,-2);else{const G=gs(d,l,M,!1,!1);null!==G&&this.addMatch(d.index,G)}else this.addMatch(d.index,m)}}addMatch(l,d){null===this.matches?this.matches=[l,d]:this.matches.push(l,d)}}function nb(o,l){const d=o.localNames;if(null!==d)for(let m=0;m<d.length;m+=2)if(d[m]===l)return d[m+1];return null}function ib(o,l,d,m){return-1===d?function rb(o,l){return 11&o.type?ef(o,l):4&o.type?zp(o,l):null}(l,o):-2===d?function ob(o,l,d){return d===Yh?ef(l,o):d===Jh?zp(l,o):d===qp?Zy(l,o):void 0}(o,l,m):lo(o,o[1],d,l)}function Wy(o,l,d,m){const M=l[19].queries[m];if(null===M.matches){const G=o.data,re=d.matches,ve=[];for(let Ae=0;Ae<re.length;Ae+=2){const Je=re[Ae];ve.push(Je<0?null:ib(l,G[Je],re[Ae+1],d.metadata.read))}M.matches=ve}return M.matches}function R_(o,l,d,m){const M=o.queries.getByIndex(d),G=M.matches;if(null!==G){const re=Wy(o,l,M,d);for(let ve=0;ve<G.length;ve+=2){const Ae=G[ve];if(Ae>0)m.push(re[ve/2]);else{const Je=G[ve+1],nt=l[-Ae];for(let bt=10;bt<nt.length;bt++){const Vt=nt[bt];Vt[17]===Vt[3]&&R_(Vt[1],Vt,Je,m)}if(null!==nt[9]){const bt=nt[9];for(let Vt=0;Vt<bt.length;Vt++){const Xt=bt[Vt];R_(Xt[1],Xt,Je,m)}}}}}return m}function Yy(o){const l=Cn(),d=wt(),m=rl();il(m+1);const M=Xy(d,m);if(o.dirty&&xo(l)===(2==(2&M.metadata.flags))){if(null===M.matches)o.reset([]);else{const G=M.crossesNgTemplate?R_(d,l,m,[]):Wy(d,l,M,m);o.reset(G,CT),o.notifyOnChanges()}return!0}return!1}function $y(o,l,d){const m=wt();m.firstCreatePass&&(Qy(m,new Ky(o,l,d),-1),2==(2&l)&&(m.staticViewQueries=!0)),Jy(m,Cn(),l)}function zy(o,l,d,m){const M=wt();if(M.firstCreatePass){const G=Gn();Qy(M,new Ky(l,d,m),G.index),function ab(o,l){const d=o.contentQueries||(o.contentQueries=[]);l!==(d.length?d[d.length-1]:-1)&&d.push(o.queries.length-1,l)}(M,o),2==(2&d)&&(M.staticContentQueries=!0)}Jy(M,Cn(),d)}function qy(){return function sb(o,l){return o[19].queries[l].queryList}(Cn(),rl())}function Jy(o,l,d){const m=new P_(4==(4&d));rh(o,l,m,m.destroy),null===l[19]&&(l[19]=new x_),l[19].queries.push(new I_(m))}function Qy(o,l,d){null===o.queries&&(o.queries=new O_),o.queries.track(new w_(l,d))}function Xy(o,l){return o.queries.getByIndex(l)}function e0(o,l){return zp(o,l)}function Xp(...o){}const U_=new Mi("Application Initializer");let sf=(()=>{class o{constructor(d){this.appInits=d,this.resolve=Xp,this.reject=Xp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((m,M)=>{this.resolve=m,this.reject=M})}runInitializers(){if(this.initialized)return;const d=[],m=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let M=0;M<this.appInits.length;M++){const G=this.appInits[M]();if(Uh(G))d.push(G);else if(Up(G)){const re=new Promise((ve,Ae)=>{G.subscribe({complete:ve,error:Ae})});d.push(re)}}Promise.all(d).then(()=>{m()}).catch(M=>{this.reject(M)}),0===d.length&&m(),this.initialized=!0}}return o.\u0275fac=function(d){return new(d||o)(oo(U_,8))},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();const v0=new Mi("AppId"),Mb={provide:v0,useFactory:function Sb(){return`${j_()}${j_()}${j_()}`},deps:[]};function j_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const y0=new Mi("Platform Initializer"),E0=new Mi("Platform ID"),T0=new Mi("appBootstrapListener");let b0=(()=>{class o{log(d){console.log(d)}warn(d){console.warn(d)}}return o.\u0275fac=function(d){return new(d||o)},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();const em=new Mi("LocaleId"),C0=new Mi("DefaultCurrencyCode");class Db{constructor(l,d){this.ngModuleFactory=l,this.componentFactories=d}}let V_=(()=>{class o{compileModuleSync(d){return new M_(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const m=this.compileModuleSync(d),G=$o(Wn(d).declarations).reduce((re,ve)=>{const Ae=on(ve);return Ae&&re.push(new S_(Ae)),re},[]);return new Db(m,G)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return o.\u0275fac=function(d){return new(d||o)},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();const Ab=(()=>Promise.resolve(0))();function G_(o){"undefined"==typeof Zone?Ab.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Os{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:m=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xa(!1),this.onMicrotaskEmpty=new Xa(!1),this.onStable=new Xa(!1),this.onError=new Xa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const M=this;M._nesting=0,M._outer=M._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(M._inner=M._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(M._inner=M._inner.fork(Zone.longStackTraceZoneSpec)),M.shouldCoalesceEventChangeDetection=!m&&d,M.shouldCoalesceRunChangeDetection=m,M.lastRequestAnimationFrameId=-1,M.nativeRequestAnimationFrame=function Ib(){let o=Pt.requestAnimationFrame,l=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&l){const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d);const m=l[Zone.__symbol__("OriginalDelegate")];m&&(l=m)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function wb(o){const l=()=>{!function Ob(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Pt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Z_(o),o.isCheckStableRunning=!0,H_(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Z_(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,m,M,G,re,ve)=>{try{return S0(o),d.invokeTask(M,G,re,ve)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===G.type||o.shouldCoalesceRunChangeDetection)&&l(),M0(o)}},onInvoke:(d,m,M,G,re,ve,Ae)=>{try{return S0(o),d.invoke(M,G,re,ve,Ae)}finally{o.shouldCoalesceRunChangeDetection&&l(),M0(o)}},onHasTask:(d,m,M,G)=>{d.hasTask(M,G),m===M&&("microTask"==G.change?(o._hasPendingMicrotasks=G.microTask,Z_(o),H_(o)):"macroTask"==G.change&&(o.hasPendingMacrotasks=G.macroTask))},onHandleError:(d,m,M,G)=>(d.handleError(M,G),o.runOutsideAngular(()=>o.onError.emit(G)),!1)})}(M)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,d,m){return this._inner.run(l,d,m)}runTask(l,d,m,M){const G=this._inner,re=G.scheduleEventTask("NgZoneEvent: "+M,l,xb,Xp,Xp);try{return G.runTask(re,d,m)}finally{G.cancelTask(re)}}runGuarded(l,d,m){return this._inner.runGuarded(l,d,m)}runOutsideAngular(l){return this._outer.run(l)}}const xb={};function H_(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Z_(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function S0(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function M0(o){o._nesting--,H_(o)}class Rb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xa,this.onMicrotaskEmpty=new Xa,this.onStable=new Xa,this.onError=new Xa}run(l,d,m){return l.apply(d,m)}runGuarded(l,d,m){return l.apply(d,m)}runOutsideAngular(l){return l()}runTask(l,d,m,M){return l.apply(d,m)}}let D0=(()=>{class o{constructor(d){this._ngZone=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Os.assertNotInAngularZone(),G_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G_(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(m=>!m.updateCb||!m.updateCb(d)||(clearTimeout(m.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,m,M){let G=-1;m&&m>0&&(G=setTimeout(()=>{this._callbacks=this._callbacks.filter(re=>re.timeoutId!==G),d(this._didWork,this.getPendingTasks())},m)),this._callbacks.push({doneCb:d,timeoutId:G,updateCb:M})}whenStable(d,m,M){if(M&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,m,M),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(d,m,M){return[]}}return o.\u0275fac=function(d){return new(d||o)(oo(Os))},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})(),P0=(()=>{class o{constructor(){this._applications=new Map,K_.addToWindow(this)}registerApplication(d,m){this._applications.set(d,m)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,m=!0){return K_.findTestabilityInTree(this,d,m)}}return o.\u0275fac=function(d){return new(d||o)},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();class Nb{addToWindow(l){}findTestabilityInTree(l,d,m){return null}}function Lb(o){K_=o}let Ma,K_=new Nb;const A0=new Mi("AllowMultipleToken");class Bb{constructor(l,d){this.name=l,this.token=d}}function I0(o,l,d=[]){const m=`Platform: ${l}`,M=new Mi(m);return(G=[])=>{let re=x0();if(!re||re.injector.get(A0,!1))if(o)o(d.concat(G).concat({provide:M,useValue:!0}));else{const ve=d.concat(G).concat({provide:M,useValue:!0},{provide:Vd,useValue:"platform"});!function Ub(o){if(Ma&&!Ma.destroyed&&!Ma.injector.get(A0,!1))throw new y(400,"");Ma=o.get(O0);const l=o.get(y0,null);l&&l.forEach(d=>d())}(ys.create({providers:ve,name:m}))}return function jb(o){const l=x0();if(!l)throw new y(401,"");return l}()}}function x0(){return Ma&&!Ma.destroyed?Ma:null}let O0=(()=>{class o{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,m){const ve=function Vb(o,l){let d;return d="noop"===o?new Rb:("zone.js"===o?void 0:o)||new Os({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),d}(m?m.ngZone:void 0,{ngZoneEventCoalescing:m&&m.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:m&&m.ngZoneRunCoalescing||!1}),Ae=[{provide:Os,useValue:ve}];return ve.run(()=>{const Je=ys.create({providers:Ae,parent:this.injector,name:d.moduleType.name}),nt=d.create(Je),bt=nt.injector.get(Ml,null);if(!bt)throw new y(402,"");return ve.runOutsideAngular(()=>{const Vt=ve.onError.subscribe({next:Xt=>{bt.handleError(Xt)}});nt.onDestroy(()=>{W_(this._modules,nt),Vt.unsubscribe()})}),function Gb(o,l,d){try{const m=d();return Uh(m)?m.catch(M=>{throw l.runOutsideAngular(()=>o.handleError(M)),M}):m}catch(m){throw l.runOutsideAngular(()=>o.handleError(m)),m}}(bt,ve,()=>{const Vt=nt.injector.get(sf);return Vt.runInitializers(),Vt.donePromise.then(()=>(function DE(o){(function ke(o,l){null==o&&Ue(l,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(Yv=o.toLowerCase().replace(/_/g,"-"))}(nt.injector.get(em,Hp)||Hp),this._moduleDoBootstrap(nt),nt))})})}bootstrapModule(d,m=[]){const M=w0({},m);return function Fb(o,l,d){const m=new M_(d);return Promise.resolve(m)}(0,0,d).then(G=>this.bootstrapModuleFactory(G,M))}_moduleDoBootstrap(d){const m=d.injector.get(Xh);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(M=>m.bootstrap(M));else{if(!d.instance.ngDoBootstrap)throw new y(403,"");d.instance.ngDoBootstrap(m)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new y(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(d){return new(d||o)(oo(ys))},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();function w0(o,l){return Array.isArray(l)?l.reduce(w0,o):Object.assign(Object.assign({},o),l)}let Xh=(()=>{class o{constructor(d,m,M,G,re){this._zone=d,this._injector=m,this._exceptionHandler=M,this._componentFactoryResolver=G,this._initStatus=re,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const ve=new C.y(Je=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Je.next(this._stable),Je.complete()})}),Ae=new C.y(Je=>{let nt;this._zone.runOutsideAngular(()=>{nt=this._zone.onStable.subscribe(()=>{Os.assertNotInAngularZone(),G_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Je.next(!0))})})});const bt=this._zone.onUnstable.subscribe(()=>{Os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Je.next(!1)}))});return()=>{nt.unsubscribe(),bt.unsubscribe()}});this.isStable=(0,R.T)(ve,Ae.pipe(function D(o={}){const{connector:l=(()=>new i.x),resetOnError:d=!0,resetOnComplete:m=!0,resetOnRefCountZero:M=!0}=o;return G=>{let re,ve,Ae,Je=0,nt=!1,bt=!1;const Vt=()=>{null==ve||ve.unsubscribe(),ve=void 0},Xt=()=>{Vt(),re=Ae=void 0,nt=bt=!1},yn=()=>{const jn=re;Xt(),null==jn||jn.unsubscribe()};return(0,F.e)((jn,Kn)=>{Je++,!bt&&!nt&&Vt();const tr=Ae=null!=Ae?Ae:l();Kn.add(()=>{Je--,0===Je&&!bt&&!nt&&(ve=h(yn,M))}),tr.subscribe(Kn),!re&&Je>0&&(re=new j.Hp({next:Pn=>tr.next(Pn),error:Pn=>{bt=!0,Vt(),ve=h(Xt,d,Pn),tr.error(Pn)},complete:()=>{nt=!0,Vt(),ve=h(Xt,m),tr.complete()}}),(0,U.Xf)(jn).subscribe(re))})(G)}}()))}bootstrap(d,m){if(!this._initStatus.done)throw new y(405,"");let M;M=d instanceof Ey?d:this._componentFactoryResolver.resolveComponentFactory(d),this.componentTypes.push(M.componentType);const G=function kb(o){return o.isBoundToModule}(M)?void 0:this._injector.get(tf),ve=M.create(ys.NULL,[],m||M.selector,G),Ae=ve.location.nativeElement,Je=ve.injector.get(D0,null),nt=Je&&ve.injector.get(P0);return Je&&nt&&nt.registerApplication(Ae,Je),ve.onDestroy(()=>{this.detachView(ve.hostView),W_(this.components,ve),nt&&nt.unregisterApplication(Ae)}),this._loadComponent(ve),ve}tick(){if(this._runningTick)throw new y(101,"");try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const m=d;this._views.push(m),m.attachToAppRef(this)}detachView(d){const m=d;W_(this._views,m),m.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(T0,[]).concat(this._bootstrapListeners).forEach(M=>M(d))}ngOnDestroy(){this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(d){return new(d||o)(oo(Os),oo(ys),oo(Ml),oo(Wh),oo(sf))},o.\u0275prov=He({token:o,factory:o.\u0275fac}),o})();function W_(o,l){const d=o.indexOf(l);d>-1&&o.splice(d,1)}let N0=!0;function Zb(){N0=!1}let Kb=(()=>{class o{}return o.__NG_ELEMENT_ID__=Wb,o})();function Wb(o){return function Yb(o,l,d){if(si(o)&&!d){const m=jr(o.index,l);return new $h(m,m)}return 47&o.type?new $h(l[16],l):null}(Gn(),Cn(),16==(16&o))}class V0{constructor(){}supports(l){return Ru(l)}create(l){return new Xb(l)}}const Qb=(o,l)=>l;class Xb{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Qb}forEachItem(l){let d;for(d=this._itHead;null!==d;d=d._next)l(d)}forEachOperation(l){let d=this._itHead,m=this._removalsHead,M=0,G=null;for(;d||m;){const re=!m||d&&d.currentIndex<H0(m,M,G)?d:m,ve=H0(re,M,G),Ae=re.currentIndex;if(re===m)M--,m=m._nextRemoved;else if(d=d._next,null==re.previousIndex)M++;else{G||(G=[]);const Je=ve-M,nt=Ae-M;if(Je!=nt){for(let Vt=0;Vt<Je;Vt++){const Xt=Vt<G.length?G[Vt]:G[Vt]=0,yn=Xt+Vt;nt<=yn&&yn<Je&&(G[Vt]=Xt+1)}G[re.previousIndex]=nt-Je}}ve!==Ae&&l(re,ve,Ae)}}forEachPreviousItem(l){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachMovedItem(l){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}forEachIdentityChange(l){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)l(d)}diff(l){if(null==l&&(l=[]),!Ru(l))throw new y(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let M,G,re,d=this._itHead,m=!1;if(Array.isArray(l)){this.length=l.length;for(let ve=0;ve<this.length;ve++)G=l[ve],re=this._trackByFn(ve,G),null!==d&&Object.is(d.trackById,re)?(m&&(d=this._verifyReinsertion(d,G,re,ve)),Object.is(d.item,G)||this._addIdentityChange(d,G)):(d=this._mismatch(d,G,re,ve),m=!0),d=d._next}else M=0,function Gm(o,l){if(Array.isArray(o))for(let d=0;d<o.length;d++)l(o[d]);else{const d=o[Ic()]();let m;for(;!(m=d.next()).done;)l(m.value)}}(l,ve=>{re=this._trackByFn(M,ve),null!==d&&Object.is(d.trackById,re)?(m&&(d=this._verifyReinsertion(d,ve,re,M)),Object.is(d.item,ve)||this._addIdentityChange(d,ve)):(d=this._mismatch(d,ve,re,M),m=!0),d=d._next,M++}),this.length=M;return this._truncate(d),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,d,m,M){let G;return null===l?G=this._itTail:(G=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._reinsertAfter(l,G,M)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(m,M))?(Object.is(l.item,d)||this._addIdentityChange(l,d),this._moveAfter(l,G,M)):l=this._addAfter(new eC(d,m),G,M),l}_verifyReinsertion(l,d,m,M){let G=null===this._unlinkedRecords?null:this._unlinkedRecords.get(m,null);return null!==G?l=this._reinsertAfter(G,l._prev,M):l.currentIndex!=M&&(l.currentIndex=M,this._addToMoves(l,M)),l}_truncate(l){for(;null!==l;){const d=l._next;this._addToRemovals(this._unlink(l)),l=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,d,m){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const M=l._prevRemoved,G=l._nextRemoved;return null===M?this._removalsHead=G:M._nextRemoved=G,null===G?this._removalsTail=M:G._prevRemoved=M,this._insertAfter(l,d,m),this._addToMoves(l,m),l}_moveAfter(l,d,m){return this._unlink(l),this._insertAfter(l,d,m),this._addToMoves(l,m),l}_addAfter(l,d,m){return this._insertAfter(l,d,m),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,d,m){const M=null===d?this._itHead:d._next;return l._next=M,l._prev=d,null===M?this._itTail=l:M._prev=l,null===d?this._itHead=l:d._next=l,null===this._linkedRecords&&(this._linkedRecords=new G0),this._linkedRecords.put(l),l.currentIndex=m,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const d=l._prev,m=l._next;return null===d?this._itHead=m:d._next=m,null===m?this._itTail=d:m._prev=d,l}_addToMoves(l,d){return l.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new G0),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,d){return l.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class eC{constructor(l,d){this.item=l,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tC{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,d){let m;for(m=this._head;null!==m;m=m._nextDup)if((null===d||d<=m.currentIndex)&&Object.is(m.trackById,l))return m;return null}remove(l){const d=l._prevDup,m=l._nextDup;return null===d?this._head=m:d._nextDup=m,null===m?this._tail=d:m._prevDup=d,null===this._head}}class G0{constructor(){this.map=new Map}put(l){const d=l.trackById;let m=this.map.get(d);m||(m=new tC,this.map.set(d,m)),m.add(l)}get(l,d){const M=this.map.get(l);return M?M.get(l,d):null}remove(l){const d=l.trackById;return this.map.get(d).remove(l)&&this.map.delete(d),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function H0(o,l,d){const m=o.previousIndex;if(null===m)return m;let M=0;return d&&m<d.length&&(M=d[m]),m+l+M}class Z0{constructor(){}supports(l){return l instanceof Map||Dh(l)}create(){return new nC}}class nC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let d;for(d=this._mapHead;null!==d;d=d._next)l(d)}forEachPreviousItem(l){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)l(d)}forEachChangedItem(l){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)l(d)}forEachAddedItem(l){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)l(d)}forEachRemovedItem(l){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)l(d)}diff(l){if(l){if(!(l instanceof Map||Dh(l)))throw new y(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(l,(m,M)=>{if(d&&d.key===M)this._maybeAddToChanges(d,m),this._appendAfter=d,d=d._next;else{const G=this._getOrCreateRecordForKey(M,m);d=this._insertBeforeOrAppend(d,G)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let m=d;null!==m;m=m._nextRemoved)m===this._mapHead&&(this._mapHead=null),this._records.delete(m.key),m._nextRemoved=m._next,m.previousValue=m.currentValue,m.currentValue=null,m._prev=null,m._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,d){if(l){const m=l._prev;return d._next=l,d._prev=m,l._prev=d,m&&(m._next=d),l===this._mapHead&&(this._mapHead=d),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(l,d){if(this._records.has(l)){const M=this._records.get(l);this._maybeAddToChanges(M,d);const G=M._prev,re=M._next;return G&&(G._next=re),re&&(re._prev=G),M._next=null,M._prev=null,M}const m=new rC(l);return this._records.set(l,m),m.currentValue=d,this._addToAdditions(m),m}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,d){Object.is(d,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=d,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,d){l instanceof Map?l.forEach(d):Object.keys(l).forEach(m=>d(l[m],m))}}class rC{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function K0(){return new nm([new V0])}let nm=(()=>{class o{constructor(d){this.factories=d}static create(d,m){if(null!=m){const M=m.factories.slice();d=d.concat(M)}return new o(d)}static extend(d){return{provide:o,useFactory:m=>o.create(d,m||K0()),deps:[[o,new gl,new ai]]}}find(d){const m=this.factories.find(M=>M.supports(d));if(null!=m)return m;throw new y(901,"")}}return o.\u0275prov=He({token:o,providedIn:"root",factory:K0}),o})();function W0(){return new rm([new Z0])}let rm=(()=>{class o{constructor(d){this.factories=d}static create(d,m){if(m){const M=m.factories.slice();d=d.concat(M)}return new o(d)}static extend(d){return{provide:o,useFactory:m=>o.create(d,m||W0()),deps:[[o,new gl,new ai]]}}find(d){const m=this.factories.find(G=>G.supports(d));if(m)return m;throw new y(901,"")}}return o.\u0275prov=He({token:o,providedIn:"root",factory:W0}),o})();const iC=[new Z0],sC=new nm([new V0]),aC=new rm(iC),lC=I0(null,"core",[{provide:E0,useValue:"unknown"},{provide:O0,deps:[ys]},{provide:P0,deps:[]},{provide:b0,deps:[]}]),hC=[{provide:Xh,useClass:Xh,deps:[Os,ys,Ml,Wh,sf]},{provide:OT,deps:[Os],useFactory:function gC(o){let l=[];return o.onStable.subscribe(()=>{for(;l.length;)l.pop()()}),function(d){l.push(d)}}},{provide:sf,useClass:sf,deps:[[new ai,U_]]},{provide:V_,useClass:V_,deps:[]},Mb,{provide:nm,useFactory:function cC(){return sC},deps:[]},{provide:rm,useFactory:function uC(){return aC},deps:[]},{provide:em,useFactory:function dC(o){return o||function fC(){return"undefined"!=typeof $localize&&$localize.locale||Hp}()},deps:[[new hl(em),new ai,new gl]]},{provide:C0,useValue:"USD"}];let pC=(()=>{class o{constructor(d){}}return o.\u0275fac=function(d){return new(d||o)(oo(Xh))},o.\u0275mod=rt({type:o}),o.\u0275inj=ye({providers:hC}),o})()},2382:(kn,Ge,w)=>{"use strict";w.d(Ge,{Wl:()=>O,Fj:()=>E,qu:()=>vi,NI:()=>vn,u:()=>rr,sg:()=>qi,u5:()=>xo,JU:()=>L,JJ:()=>Ce,JL:()=>Oe,On:()=>bi,YN:()=>fi,wV:()=>eo,UX:()=>Ri,EJ:()=>Br,kI:()=>ue,_Y:()=>Lr,Kr:()=>ns});var i=w(4893),e=w(9808),C=w(8306),R=w(4742),U=w(8421),j=w(3269),F=w(5403),D=w(3268),h=w(1810),p=w(2076),_=w(4004);let b=(()=>{class Ye{constructor(we,ht){this._renderer=we,this._elementRef=ht,this.onChange=un=>{},this.onTouched=()=>{}}setProperty(we,ht){this._renderer.setProperty(this._elementRef.nativeElement,we,ht)}registerOnTouched(we){this.onTouched=we}registerOnChange(we){this.onChange=we}setDisabledState(we){this.setProperty("disabled",we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(i.Qsj),i.Y36(i.SBq))},Ye.\u0275dir=i.lG2({type:Ye}),Ye})(),k=(()=>{class Ye extends b{}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=i.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=i.lG2({type:Ye,features:[i.qOj]}),Ye})();const L=new i.OlP("NgValueAccessor"),B={provide:L,useExisting:(0,i.Gpc)(()=>O),multi:!0};let O=(()=>{class Ye extends k{writeValue(we){this.setProperty("checked",we)}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=i.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=i.lG2({type:Ye,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(we,ht){1&we&&i.NdJ("change",function(er){return ht.onChange(er.target.checked)})("blur",function(){return ht.onTouched()})},features:[i._Bn([B]),i.qOj]}),Ye})();const P={provide:L,useExisting:(0,i.Gpc)(()=>E),multi:!0},S=new i.OlP("CompositionEventMode");let E=(()=>{class Ye extends b{constructor(we,ht,un){super(we,ht),this._compositionMode=un,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y(){const Ye=(0,e.q)()?(0,e.q)().getUserAgent():"";return/android (\d+)/.test(Ye.toLowerCase())}())}writeValue(we){this.setProperty("value",null==we?"":we)}_handleInput(we){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(we)}_compositionStart(){this._composing=!0}_compositionEnd(we){this._composing=!1,this._compositionMode&&this.onChange(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(i.Qsj),i.Y36(i.SBq),i.Y36(S,8))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(we,ht){1&we&&i.NdJ("input",function(er){return ht._handleInput(er.target.value)})("blur",function(){return ht.onTouched()})("compositionstart",function(){return ht._compositionStart()})("compositionend",function(er){return ht._compositionEnd(er.target.value)})},features:[i._Bn([P]),i.qOj]}),Ye})();function A(Ye){return null==Ye||0===Ye.length}function I(Ye){return null!=Ye&&"number"==typeof Ye.length}const H=new i.OlP("NgValidators"),ee=new i.OlP("NgAsyncValidators"),fe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ue{static min(Ne){return function be(Ye){return Ne=>{if(A(Ne.value)||A(Ye))return null;const we=parseFloat(Ne.value);return!isNaN(we)&&we<Ye?{min:{min:Ye,actual:Ne.value}}:null}}(Ne)}static max(Ne){return function q(Ye){return Ne=>{if(A(Ne.value)||A(Ye))return null;const we=parseFloat(Ne.value);return!isNaN(we)&&we>Ye?{max:{max:Ye,actual:Ne.value}}:null}}(Ne)}static required(Ne){return function se(Ye){return A(Ye.value)?{required:!0}:null}(Ne)}static requiredTrue(Ne){return function V(Ye){return!0===Ye.value?null:{required:!0}}(Ne)}static email(Ne){return function de(Ye){return A(Ye.value)||fe.test(Ye.value)?null:{email:!0}}(Ne)}static minLength(Ne){return function Q(Ye){return Ne=>A(Ne.value)||!I(Ne.value)?null:Ne.value.length<Ye?{minlength:{requiredLength:Ye,actualLength:Ne.value.length}}:null}(Ne)}static maxLength(Ne){return function pe(Ye){return Ne=>I(Ne.value)&&Ne.value.length>Ye?{maxlength:{requiredLength:Ye,actualLength:Ne.value.length}}:null}(Ne)}static pattern(Ne){return function me(Ye){if(!Ye)return xe;let Ne,we;return"string"==typeof Ye?(we="","^"!==Ye.charAt(0)&&(we+="^"),we+=Ye,"$"!==Ye.charAt(Ye.length-1)&&(we+="$"),Ne=new RegExp(we)):(we=Ye.toString(),Ne=Ye),ht=>{if(A(ht.value))return null;const un=ht.value;return Ne.test(un)?null:{pattern:{requiredPattern:we,actualValue:un}}}}(Ne)}static nullValidator(Ne){return null}static compose(Ne){return je(Ne)}static composeAsync(Ne){return He(Ne)}}function xe(Ye){return null}function _e(Ye){return null!=Ye}function Ie(Ye){const Ne=(0,i.QGY)(Ye)?(0,p.D)(Ye):Ye;return(0,i.CqO)(Ne),Ne}function Te(Ye){let Ne={};return Ye.forEach(we=>{Ne=null!=we?Object.assign(Object.assign({},Ne),we):Ne}),0===Object.keys(Ne).length?null:Ne}function ke(Ye,Ne){return Ne.map(we=>we(Ye))}function Fe(Ye){return Ye.map(Ne=>function Ue(Ye){return!Ye.validate}(Ne)?Ne:we=>Ne.validate(we))}function je(Ye){if(!Ye)return null;const Ne=Ye.filter(_e);return 0==Ne.length?null:function(we){return Te(ke(we,Ne))}}function Pe(Ye){return null!=Ye?je(Fe(Ye)):null}function He(Ye){if(!Ye)return null;const Ne=Ye.filter(_e);return 0==Ne.length?null:function(we){return function u(...Ye){const Ne=(0,j.jO)(Ye),{args:we,keys:ht}=(0,R.D)(Ye),un=new C.y(er=>{const{length:Kr}=we;if(!Kr)return void er.complete();const pi=new Array(Kr);let wo=Kr,Cn=Kr;for(let wt=0;wt<Kr;wt++){let An=!1;(0,U.Xf)(we[wt]).subscribe((0,F.x)(er,Gn=>{An||(An=!0,Cn--),pi[wt]=Gn},()=>wo--,void 0,()=>{(!wo||!An)&&(Cn||er.next(ht?(0,h.n)(ht,pi):pi),er.complete())}))}});return Ne?un.pipe((0,D.Z)(Ne)):un}(ke(we,Ne).map(Ie)).pipe((0,_.U)(Te))}}function Le(Ye){return null!=Ye?He(Fe(Ye)):null}function ye(Ye,Ne){return null===Ye?[Ne]:Array.isArray(Ye)?[...Ye,Ne]:[Ye,Ne]}function ae(Ye){return Ye._rawValidators}function W(Ye){return Ye._rawAsyncValidators}function ce(Ye){return Ye?Array.isArray(Ye)?Ye:[Ye]:[]}function De(Ye,Ne){return Array.isArray(Ye)?Ye.includes(Ne):Ye===Ne}function le(Ye,Ne){const we=ce(Ne);return ce(Ye).forEach(un=>{De(we,un)||we.push(un)}),we}function ne(Ye,Ne){return ce(Ne).filter(we=>!De(Ye,we))}class z{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(Ne){this._rawValidators=Ne||[],this._composedValidatorFn=Pe(this._rawValidators)}_setAsyncValidators(Ne){this._rawAsyncValidators=Ne||[],this._composedAsyncValidatorFn=Le(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(Ne){this._onDestroyCallbacks.push(Ne)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(Ne=>Ne()),this._onDestroyCallbacks=[]}reset(Ne){this.control&&this.control.reset(Ne)}hasError(Ne,we){return!!this.control&&this.control.hasError(Ne,we)}getError(Ne,we){return this.control?this.control.getError(Ne,we):null}}class te extends z{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class X extends z{get formDirective(){return null}get path(){return null}}class ${constructor(Ne){this._cd=Ne}is(Ne){var we,ht,un;return"submitted"===Ne?!!(null===(we=this._cd)||void 0===we?void 0:we.submitted):!!(null===(un=null===(ht=this._cd)||void 0===ht?void 0:ht.control)||void 0===un?void 0:un[Ne])}}let Ce=(()=>{class Ye extends ${constructor(we){super(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(te,2))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(we,ht){2&we&&i.ekj("ng-untouched",ht.is("untouched"))("ng-touched",ht.is("touched"))("ng-pristine",ht.is("pristine"))("ng-dirty",ht.is("dirty"))("ng-valid",ht.is("valid"))("ng-invalid",ht.is("invalid"))("ng-pending",ht.is("pending"))},features:[i.qOj]}),Ye})(),Oe=(()=>{class Ye extends ${constructor(we){super(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(X,10))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(we,ht){2&we&&i.ekj("ng-untouched",ht.is("untouched"))("ng-touched",ht.is("touched"))("ng-pristine",ht.is("pristine"))("ng-dirty",ht.is("dirty"))("ng-valid",ht.is("valid"))("ng-invalid",ht.is("invalid"))("ng-pending",ht.is("pending"))("ng-submitted",ht.is("submitted"))},features:[i.qOj]}),Ye})();function wn(Ye,Ne){return[...Ne.path,Ye]}function Vn(Ye,Ne){mt(Ye,Ne),Ne.valueAccessor.writeValue(Ye.value),function tn(Ye,Ne){Ne.valueAccessor.registerOnChange(we=>{Ye._pendingValue=we,Ye._pendingChange=!0,Ye._pendingDirty=!0,"change"===Ye.updateOn&&vt(Ye,Ne)})}(Ye,Ne),function pt(Ye,Ne){const we=(ht,un)=>{Ne.valueAccessor.writeValue(ht),un&&Ne.viewToModelUpdate(ht)};Ye.registerOnChange(we),Ne._registerOnDestroy(()=>{Ye._unregisterOnChange(we)})}(Ye,Ne),function Wt(Ye,Ne){Ne.valueAccessor.registerOnTouched(()=>{Ye._pendingTouched=!0,"blur"===Ye.updateOn&&Ye._pendingChange&&vt(Ye,Ne),"submit"!==Ye.updateOn&&Ye.markAsTouched()})}(Ye,Ne),function Qe(Ye,Ne){if(Ne.valueAccessor.setDisabledState){const we=ht=>{Ne.valueAccessor.setDisabledState(ht)};Ye.registerOnDisabledChange(we),Ne._registerOnDestroy(()=>{Ye._unregisterOnDisabledChange(we)})}}(Ye,Ne)}function Hn(Ye,Ne,we=!0){const ht=()=>{};Ne.valueAccessor&&(Ne.valueAccessor.registerOnChange(ht),Ne.valueAccessor.registerOnTouched(ht)),Ft(Ye,Ne),Ye&&(Ne._invokeOnDestroyCallbacks(),Ye._registerOnCollectionChange(()=>{}))}function it(Ye,Ne){Ye.forEach(we=>{we.registerOnValidatorChange&&we.registerOnValidatorChange(Ne)})}function mt(Ye,Ne){const we=ae(Ye);null!==Ne.validator?Ye.setValidators(ye(we,Ne.validator)):"function"==typeof we&&Ye.setValidators([we]);const ht=W(Ye);null!==Ne.asyncValidator?Ye.setAsyncValidators(ye(ht,Ne.asyncValidator)):"function"==typeof ht&&Ye.setAsyncValidators([ht]);const un=()=>Ye.updateValueAndValidity();it(Ne._rawValidators,un),it(Ne._rawAsyncValidators,un)}function Ft(Ye,Ne){let we=!1;if(null!==Ye){if(null!==Ne.validator){const un=ae(Ye);if(Array.isArray(un)&&un.length>0){const er=un.filter(Kr=>Kr!==Ne.validator);er.length!==un.length&&(we=!0,Ye.setValidators(er))}}if(null!==Ne.asyncValidator){const un=W(Ye);if(Array.isArray(un)&&un.length>0){const er=un.filter(Kr=>Kr!==Ne.asyncValidator);er.length!==un.length&&(we=!0,Ye.setAsyncValidators(er))}}}const ht=()=>{};return it(Ne._rawValidators,ht),it(Ne._rawAsyncValidators,ht),we}function vt(Ye,Ne){Ye._pendingDirty&&Ye.markAsDirty(),Ye.setValue(Ye._pendingValue,{emitModelToViewChange:!1}),Ne.viewToModelUpdate(Ye._pendingValue),Ye._pendingChange=!1}function Jt(Ye,Ne){if(!Ye.hasOwnProperty("model"))return!1;const we=Ye.model;return!!we.isFirstChange()||!Object.is(Ne,we.currentValue)}function Mn(Ye,Ne){if(!Ne)return null;let we,ht,un;return Array.isArray(Ne),Ne.forEach(er=>{er.constructor===E?we=er:function on(Ye){return Object.getPrototypeOf(Ye.constructor)===k}(er)?ht=er:un=er}),un||ht||we||null}function Wn(Ye,Ne){const we=Ye.indexOf(Ne);we>-1&&Ye.splice(we,1)}const Ir="VALID",ut="INVALID",zt="PENDING",dn="DISABLED";function kt(Ye){return(Un(Ye)?Ye.validators:Ye)||null}function Rt(Ye){return Array.isArray(Ye)?Pe(Ye):Ye||null}function sn(Ye,Ne){return(Un(Ne)?Ne.asyncValidators:Ye)||null}function Fn(Ye){return Array.isArray(Ye)?Le(Ye):Ye||null}function Un(Ye){return null!=Ye&&!Array.isArray(Ye)&&"object"==typeof Ye}const Ot=Ye=>Ye instanceof vn,Ct=Ye=>Ye instanceof Rn,Gt=Ye=>Ye instanceof Yn;function qt(Ye){return Ot(Ye)?Ye.value:Ye.getRawValue()}function bn(Ye,Ne){const we=Ct(Ye),ht=Ye.controls;if(!(we?Object.keys(ht):ht).length)throw new i.vHH(1e3,"");if(!ht[Ne])throw new i.vHH(1001,"")}function Nn(Ye,Ne){Ct(Ye),Ye._forEachChild((ht,un)=>{if(void 0===Ne[un])throw new i.vHH(1002,"")})}class Dt{constructor(Ne,we){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=Ne,this._rawAsyncValidators=we,this._composedValidatorFn=Rt(this._rawValidators),this._composedAsyncValidatorFn=Fn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(Ne){this._rawValidators=this._composedValidatorFn=Ne}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(Ne){this._rawAsyncValidators=this._composedAsyncValidatorFn=Ne}get parent(){return this._parent}get valid(){return this.status===Ir}get invalid(){return this.status===ut}get pending(){return this.status==zt}get disabled(){return this.status===dn}get enabled(){return this.status!==dn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(Ne){this._rawValidators=Ne,this._composedValidatorFn=Rt(Ne)}setAsyncValidators(Ne){this._rawAsyncValidators=Ne,this._composedAsyncValidatorFn=Fn(Ne)}addValidators(Ne){this.setValidators(le(Ne,this._rawValidators))}addAsyncValidators(Ne){this.setAsyncValidators(le(Ne,this._rawAsyncValidators))}removeValidators(Ne){this.setValidators(ne(Ne,this._rawValidators))}removeAsyncValidators(Ne){this.setAsyncValidators(ne(Ne,this._rawAsyncValidators))}hasValidator(Ne){return De(this._rawValidators,Ne)}hasAsyncValidator(Ne){return De(this._rawAsyncValidators,Ne)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(Ne={}){this.touched=!0,this._parent&&!Ne.onlySelf&&this._parent.markAsTouched(Ne)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(Ne=>Ne.markAllAsTouched())}markAsUntouched(Ne={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(we=>{we.markAsUntouched({onlySelf:!0})}),this._parent&&!Ne.onlySelf&&this._parent._updateTouched(Ne)}markAsDirty(Ne={}){this.pristine=!1,this._parent&&!Ne.onlySelf&&this._parent.markAsDirty(Ne)}markAsPristine(Ne={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(we=>{we.markAsPristine({onlySelf:!0})}),this._parent&&!Ne.onlySelf&&this._parent._updatePristine(Ne)}markAsPending(Ne={}){this.status=zt,!1!==Ne.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!Ne.onlySelf&&this._parent.markAsPending(Ne)}disable(Ne={}){const we=this._parentMarkedDirty(Ne.onlySelf);this.status=dn,this.errors=null,this._forEachChild(ht=>{ht.disable(Object.assign(Object.assign({},Ne),{onlySelf:!0}))}),this._updateValue(),!1!==Ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},Ne),{skipPristineCheck:we})),this._onDisabledChange.forEach(ht=>ht(!0))}enable(Ne={}){const we=this._parentMarkedDirty(Ne.onlySelf);this.status=Ir,this._forEachChild(ht=>{ht.enable(Object.assign(Object.assign({},Ne),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ne.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},Ne),{skipPristineCheck:we})),this._onDisabledChange.forEach(ht=>ht(!1))}_updateAncestors(Ne){this._parent&&!Ne.onlySelf&&(this._parent.updateValueAndValidity(Ne),Ne.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(Ne){this._parent=Ne}updateValueAndValidity(Ne={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ir||this.status===zt)&&this._runAsyncValidator(Ne.emitEvent)),!1!==Ne.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!Ne.onlySelf&&this._parent.updateValueAndValidity(Ne)}_updateTreeValidity(Ne={emitEvent:!0}){this._forEachChild(we=>we._updateTreeValidity(Ne)),this.updateValueAndValidity({onlySelf:!0,emitEvent:Ne.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dn:Ir}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(Ne){if(this.asyncValidator){this.status=zt,this._hasOwnPendingAsyncValidator=!0;const we=Ie(this.asyncValidator(this));this._asyncValidationSubscription=we.subscribe(ht=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ht,{emitEvent:Ne})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(Ne,we={}){this.errors=Ne,this._updateControlsErrors(!1!==we.emitEvent)}get(Ne){return function It(Ye,Ne,we){if(null==Ne||(Array.isArray(Ne)||(Ne=Ne.split(we)),Array.isArray(Ne)&&0===Ne.length))return null;let ht=Ye;return Ne.forEach(un=>{ht=Ct(ht)?ht.controls.hasOwnProperty(un)?ht.controls[un]:null:Gt(ht)&&ht.at(un)||null}),ht}(this,Ne,".")}getError(Ne,we){const ht=we?this.get(we):this;return ht&&ht.errors?ht.errors[Ne]:null}hasError(Ne,we){return!!this.getError(Ne,we)}get root(){let Ne=this;for(;Ne._parent;)Ne=Ne._parent;return Ne}_updateControlsErrors(Ne){this.status=this._calculateStatus(),Ne&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(Ne)}_initObservables(){this.valueChanges=new i.vpe,this.statusChanges=new i.vpe}_calculateStatus(){return this._allControlsDisabled()?dn:this.errors?ut:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zt)?zt:this._anyControlsHaveStatus(ut)?ut:Ir}_anyControlsHaveStatus(Ne){return this._anyControls(we=>we.status===Ne)}_anyControlsDirty(){return this._anyControls(Ne=>Ne.dirty)}_anyControlsTouched(){return this._anyControls(Ne=>Ne.touched)}_updatePristine(Ne={}){this.pristine=!this._anyControlsDirty(),this._parent&&!Ne.onlySelf&&this._parent._updatePristine(Ne)}_updateTouched(Ne={}){this.touched=this._anyControlsTouched(),this._parent&&!Ne.onlySelf&&this._parent._updateTouched(Ne)}_isBoxedValue(Ne){return"object"==typeof Ne&&null!==Ne&&2===Object.keys(Ne).length&&"value"in Ne&&"disabled"in Ne}_registerOnCollectionChange(Ne){this._onCollectionChange=Ne}_setUpdateStrategy(Ne){Un(Ne)&&null!=Ne.updateOn&&(this._updateOn=Ne.updateOn)}_parentMarkedDirty(Ne){return!Ne&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class vn extends Dt{constructor(Ne=null,we,ht){super(kt(we),sn(ht,we)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(Ne),this._setUpdateStrategy(we),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Un(we)&&we.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(Ne)?Ne.value:Ne)}setValue(Ne,we={}){this.value=this._pendingValue=Ne,this._onChange.length&&!1!==we.emitModelToViewChange&&this._onChange.forEach(ht=>ht(this.value,!1!==we.emitViewToModelChange)),this.updateValueAndValidity(we)}patchValue(Ne,we={}){this.setValue(Ne,we)}reset(Ne=this.defaultValue,we={}){this._applyFormState(Ne),this.markAsPristine(we),this.markAsUntouched(we),this.setValue(this.value,we),this._pendingChange=!1}_updateValue(){}_anyControls(Ne){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(Ne){this._onChange.push(Ne)}_unregisterOnChange(Ne){Wn(this._onChange,Ne)}registerOnDisabledChange(Ne){this._onDisabledChange.push(Ne)}_unregisterOnDisabledChange(Ne){Wn(this._onDisabledChange,Ne)}_forEachChild(Ne){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(Ne){this._isBoxedValue(Ne)?(this.value=this._pendingValue=Ne.value,Ne.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=Ne}}class Rn extends Dt{constructor(Ne,we,ht){super(kt(we),sn(ht,we)),this.controls=Ne,this._initObservables(),this._setUpdateStrategy(we),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(Ne,we){return this.controls[Ne]?this.controls[Ne]:(this.controls[Ne]=we,we.setParent(this),we._registerOnCollectionChange(this._onCollectionChange),we)}addControl(Ne,we,ht={}){this.registerControl(Ne,we),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}removeControl(Ne,we={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),delete this.controls[Ne],this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}setControl(Ne,we,ht={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),delete this.controls[Ne],we&&this.registerControl(Ne,we),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}contains(Ne){return this.controls.hasOwnProperty(Ne)&&this.controls[Ne].enabled}setValue(Ne,we={}){Nn(this,Ne),Object.keys(Ne).forEach(ht=>{bn(this,ht),this.controls[ht].setValue(Ne[ht],{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we)}patchValue(Ne,we={}){null!=Ne&&(Object.keys(Ne).forEach(ht=>{this.controls[ht]&&this.controls[ht].patchValue(Ne[ht],{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we))}reset(Ne={},we={}){this._forEachChild((ht,un)=>{ht.reset(Ne[un],{onlySelf:!0,emitEvent:we.emitEvent})}),this._updatePristine(we),this._updateTouched(we),this.updateValueAndValidity(we)}getRawValue(){return this._reduceChildren({},(Ne,we,ht)=>(Ne[ht]=qt(we),Ne))}_syncPendingControls(){let Ne=this._reduceChildren(!1,(we,ht)=>!!ht._syncPendingControls()||we);return Ne&&this.updateValueAndValidity({onlySelf:!0}),Ne}_forEachChild(Ne){Object.keys(this.controls).forEach(we=>{const ht=this.controls[we];ht&&Ne(ht,we)})}_setUpControls(){this._forEachChild(Ne=>{Ne.setParent(this),Ne._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(Ne){for(const we of Object.keys(this.controls)){const ht=this.controls[we];if(this.contains(we)&&Ne(ht))return!0}return!1}_reduceValue(){return this._reduceChildren({},(Ne,we,ht)=>((we.enabled||this.disabled)&&(Ne[ht]=we.value),Ne))}_reduceChildren(Ne,we){let ht=Ne;return this._forEachChild((un,er)=>{ht=we(ht,un,er)}),ht}_allControlsDisabled(){for(const Ne of Object.keys(this.controls))if(this.controls[Ne].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Yn extends Dt{constructor(Ne,we,ht){super(kt(we),sn(ht,we)),this.controls=Ne,this._initObservables(),this._setUpdateStrategy(we),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(Ne){return this.controls[Ne]}push(Ne,we={}){this.controls.push(Ne),this._registerControl(Ne),this.updateValueAndValidity({emitEvent:we.emitEvent}),this._onCollectionChange()}insert(Ne,we,ht={}){this.controls.splice(Ne,0,we),this._registerControl(we),this.updateValueAndValidity({emitEvent:ht.emitEvent})}removeAt(Ne,we={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),this.controls.splice(Ne,1),this.updateValueAndValidity({emitEvent:we.emitEvent})}setControl(Ne,we,ht={}){this.controls[Ne]&&this.controls[Ne]._registerOnCollectionChange(()=>{}),this.controls.splice(Ne,1),we&&(this.controls.splice(Ne,0,we),this._registerControl(we)),this.updateValueAndValidity({emitEvent:ht.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(Ne,we={}){Nn(this,Ne),Ne.forEach((ht,un)=>{bn(this,un),this.at(un).setValue(ht,{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we)}patchValue(Ne,we={}){null!=Ne&&(Ne.forEach((ht,un)=>{this.at(un)&&this.at(un).patchValue(ht,{onlySelf:!0,emitEvent:we.emitEvent})}),this.updateValueAndValidity(we))}reset(Ne=[],we={}){this._forEachChild((ht,un)=>{ht.reset(Ne[un],{onlySelf:!0,emitEvent:we.emitEvent})}),this._updatePristine(we),this._updateTouched(we),this.updateValueAndValidity(we)}getRawValue(){return this.controls.map(Ne=>qt(Ne))}clear(Ne={}){this.controls.length<1||(this._forEachChild(we=>we._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:Ne.emitEvent}))}_syncPendingControls(){let Ne=this.controls.reduce((we,ht)=>!!ht._syncPendingControls()||we,!1);return Ne&&this.updateValueAndValidity({onlySelf:!0}),Ne}_forEachChild(Ne){this.controls.forEach((we,ht)=>{Ne(we,ht)})}_updateValue(){this.value=this.controls.filter(Ne=>Ne.enabled||this.disabled).map(Ne=>Ne.value)}_anyControls(Ne){return this.controls.some(we=>we.enabled&&Ne(we))}_setUpControls(){this._forEachChild(Ne=>this._registerControl(Ne))}_allControlsDisabled(){for(const Ne of this.controls)if(Ne.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(Ne){Ne.setParent(this),Ne._registerOnCollectionChange(this._onCollectionChange)}}const Yi={provide:te,useExisting:(0,i.Gpc)(()=>bi)},si=(()=>Promise.resolve(null))();let bi=(()=>{class Ye extends te{constructor(we,ht,un,er){super(),this.control=new vn,this._registered=!1,this.update=new i.vpe,this._parent=we,this._setValidators(ht),this._setAsyncValidators(un),this.valueAccessor=Mn(0,er)}ngOnChanges(we){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in we&&this._updateDisabled(we),Jt(we,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?wn(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(we){this.viewModel=we,this.update.emit(we)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Vn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(we){si.then(()=>{this.control.setValue(we,{emitViewToModelChange:!1})})}_updateDisabled(we){const ht=we.isDisabled.currentValue,un=""===ht||ht&&"false"!==ht;si.then(()=>{un&&!this.control.disabled?this.control.disable():!un&&this.control.disabled&&this.control.enable()})}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(X,9),i.Y36(H,10),i.Y36(ee,10),i.Y36(L,10))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[i._Bn([Yi]),i.qOj,i.TTD]}),Ye})(),Lr=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Ye})();const Do={provide:L,useExisting:(0,i.Gpc)(()=>eo),multi:!0};let eo=(()=>{class Ye extends k{writeValue(we){this.setProperty("value",null==we?"":we)}registerOnChange(we){this.onChange=ht=>{we(""==ht?null:parseFloat(ht))}}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=i.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=i.lG2({type:Ye,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(we,ht){1&we&&i.NdJ("input",function(er){return ht.onChange(er.target.value)})("blur",function(){return ht.onTouched()})},features:[i._Bn([Do]),i.qOj]}),Ye})(),_o=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=i.oAB({type:Ye}),Ye.\u0275inj=i.cJS({}),Ye})();const Po=new i.OlP("NgModelWithFormControlWarning"),qr={provide:X,useExisting:(0,i.Gpc)(()=>qi)};let qi=(()=>{class Ye extends X{constructor(we,ht){super(),this.validators=we,this.asyncValidators=ht,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.vpe,this._setValidators(we),this._setAsyncValidators(ht)}ngOnChanges(we){this._checkFormPresent(),we.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ft(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(we){const ht=this.form.get(we.path);return Vn(ht,we),ht.updateValueAndValidity({emitEvent:!1}),this.directives.push(we),ht}getControl(we){return this.form.get(we.path)}removeControl(we){Hn(we.control||null,we,!1),Wn(this.directives,we)}addFormGroup(we){this._setUpFormContainer(we)}removeFormGroup(we){this._cleanUpFormContainer(we)}getFormGroup(we){return this.form.get(we.path)}addFormArray(we){this._setUpFormContainer(we)}removeFormArray(we){this._cleanUpFormContainer(we)}getFormArray(we){return this.form.get(we.path)}updateModel(we,ht){this.form.get(we.path).setValue(ht)}onSubmit(we){return this.submitted=!0,function pn(Ye,Ne){Ye._syncPendingControls(),Ne.forEach(we=>{const ht=we.control;"submit"===ht.updateOn&&ht._pendingChange&&(we.viewToModelUpdate(ht._pendingValue),ht._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(we),!1}onReset(){this.resetForm()}resetForm(we){this.form.reset(we),this.submitted=!1}_updateDomValue(){this.directives.forEach(we=>{const ht=we.control,un=this.form.get(we.path);ht!==un&&(Hn(ht||null,we),Ot(un)&&(Vn(un,we),we.control=un))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(we){const ht=this.form.get(we.path);(function rt(Ye,Ne){mt(Ye,Ne)})(ht,we),ht.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(we){if(this.form){const ht=this.form.get(we.path);ht&&function Xe(Ye,Ne){return Ft(Ye,Ne)}(ht,we)&&ht.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){mt(this.form,this),this._oldForm&&Ft(this._oldForm,this)}_checkFormPresent(){}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(H,10),i.Y36(ee,10))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["","formGroup",""]],hostBindings:function(we,ht){1&we&&i.NdJ("submit",function(er){return ht.onSubmit(er)})("reset",function(){return ht.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i._Bn([qr]),i.qOj,i.TTD]}),Ye})();const Xn={provide:te,useExisting:(0,i.Gpc)(()=>rr)};let rr=(()=>{class Ye extends te{constructor(we,ht,un,er,Kr){super(),this._ngModelWarningConfig=Kr,this._added=!1,this.update=new i.vpe,this._ngModelWarningSent=!1,this._parent=we,this._setValidators(ht),this._setAsyncValidators(un),this.valueAccessor=Mn(0,er)}set isDisabled(we){}ngOnChanges(we){this._added||this._setUpControl(),Jt(we,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(we){this.viewModel=we,this.update.emit(we)}get path(){return wn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return Ye._ngModelWarningSentOnce=!1,Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(X,13),i.Y36(H,10),i.Y36(ee,10),i.Y36(L,10),i.Y36(Po,8))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i._Bn([Xn]),i.qOj,i.TTD]}),Ye})();const dr={provide:L,useExisting:(0,i.Gpc)(()=>Br),multi:!0};function Or(Ye,Ne){return null==Ye?`${Ne}`:(Ne&&"object"==typeof Ne&&(Ne="Object"),`${Ye}: ${Ne}`.slice(0,50))}let Br=(()=>{class Ye extends k{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(we){this._compareWith=we}writeValue(we){this.value=we;const ht=this._getOptionId(we);null==ht&&this.setProperty("selectedIndex",-1);const un=Or(ht,we);this.setProperty("value",un)}registerOnChange(we){this.onChange=ht=>{this.value=this._getOptionValue(ht),we(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(we){for(const ht of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ht),we))return ht;return null}_getOptionValue(we){const ht=function kr(Ye){return Ye.split(":")[0]}(we);return this._optionMap.has(ht)?this._optionMap.get(ht):we}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=i.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=i.lG2({type:Ye,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(we,ht){1&we&&i.NdJ("change",function(er){return ht.onChange(er.target.value)})("blur",function(){return ht.onTouched()})},inputs:{compareWith:"compareWith"},features:[i._Bn([dr]),i.qOj]}),Ye})(),fi=(()=>{class Ye{constructor(we,ht,un){this._element=we,this._renderer=ht,this._select=un,this._select&&(this.id=this._select._registerOption())}set ngValue(we){null!=this._select&&(this._select._optionMap.set(this.id,we),this._setElementValue(Or(this.id,we)),this._select.writeValue(this._select.value))}set value(we){this._setElementValue(we),this._select&&this._select.writeValue(this._select.value)}_setElementValue(we){this._renderer.setProperty(this._element.nativeElement,"value",we)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(Br,9))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ye})();const Bi={provide:L,useExisting:(0,i.Gpc)(()=>Io),multi:!0};function vo(Ye,Ne){return null==Ye?`${Ne}`:("string"==typeof Ne&&(Ne=`'${Ne}'`),Ne&&"object"==typeof Ne&&(Ne="Object"),`${Ye}: ${Ne}`.slice(0,50))}let Io=(()=>{class Ye extends k{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(we){this._compareWith=we}writeValue(we){let ht;if(this.value=we,Array.isArray(we)){const un=we.map(er=>this._getOptionId(er));ht=(er,Kr)=>{er._setSelected(un.indexOf(Kr.toString())>-1)}}else ht=(un,er)=>{un._setSelected(!1)};this._optionMap.forEach(ht)}registerOnChange(we){this.onChange=ht=>{const un=[],er=ht.selectedOptions;if(void 0!==er){const Kr=er;for(let pi=0;pi<Kr.length;pi++){const Cn=this._getOptionValue(Kr[pi].value);un.push(Cn)}}else{const Kr=ht.options;for(let pi=0;pi<Kr.length;pi++){const wo=Kr[pi];if(wo.selected){const Cn=this._getOptionValue(wo.value);un.push(Cn)}}}this.value=un,we(un)}}_registerOption(we){const ht=(this._idCounter++).toString();return this._optionMap.set(ht,we),ht}_getOptionId(we){for(const ht of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ht)._value,we))return ht;return null}_getOptionValue(we){const ht=function Ao(Ye){return Ye.split(":")[0]}(we);return this._optionMap.has(ht)?this._optionMap.get(ht)._value:we}}return Ye.\u0275fac=function(){let Ne;return function(ht){return(Ne||(Ne=i.n5z(Ye)))(ht||Ye)}}(),Ye.\u0275dir=i.lG2({type:Ye,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(we,ht){1&we&&i.NdJ("change",function(er){return ht.onChange(er.target)})("blur",function(){return ht.onTouched()})},inputs:{compareWith:"compareWith"},features:[i._Bn([Bi]),i.qOj]}),Ye})(),ns=(()=>{class Ye{constructor(we,ht,un){this._element=we,this._renderer=ht,this._select=un,this._select&&(this.id=this._select._registerOption(this))}set ngValue(we){null!=this._select&&(this._value=we,this._setElementValue(vo(this.id,we)),this._select.writeValue(this._select.value))}set value(we){this._select?(this._value=we,this._setElementValue(vo(this.id,we)),this._select.writeValue(this._select.value)):this._setElementValue(we)}_setElementValue(we){this._renderer.setProperty(this._element.nativeElement,"value",we)}_setSelected(we){this._renderer.setProperty(this._element.nativeElement,"selected",we)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Ye.\u0275fac=function(we){return new(we||Ye)(i.Y36(i.SBq),i.Y36(i.Qsj),i.Y36(Io,9))},Ye.\u0275dir=i.lG2({type:Ye,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Ye})(),jr=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=i.oAB({type:Ye}),Ye.\u0275inj=i.cJS({imports:[[_o]]}),Ye})(),xo=(()=>{class Ye{}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=i.oAB({type:Ye}),Ye.\u0275inj=i.cJS({imports:[jr]}),Ye})(),Ri=(()=>{class Ye{static withConfig(we){return{ngModule:Ye,providers:[{provide:Po,useValue:we.warnOnNgModelWithFormControl}]}}}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275mod=i.oAB({type:Ye}),Ye.\u0275inj=i.cJS({imports:[jr]}),Ye})(),vi=(()=>{class Ye{group(we,ht=null){const un=this._reduceControls(we);let pi,er=null,Kr=null;return null!=ht&&(function To(Ye){return void 0!==Ye.asyncValidators||void 0!==Ye.validators||void 0!==Ye.updateOn}(ht)?(er=null!=ht.validators?ht.validators:null,Kr=null!=ht.asyncValidators?ht.asyncValidators:null,pi=null!=ht.updateOn?ht.updateOn:void 0):(er=null!=ht.validator?ht.validator:null,Kr=null!=ht.asyncValidator?ht.asyncValidator:null)),new Rn(un,{asyncValidators:Kr,updateOn:pi,validators:er})}control(we,ht,un){return new vn(we,ht,un)}array(we,ht,un){const er=we.map(Kr=>this._createControl(Kr));return new Yn(er,ht,un)}_reduceControls(we){const ht={};return Object.keys(we).forEach(un=>{ht[un]=this._createControl(we[un])}),ht}_createControl(we){return Ot(we)||Ct(we)||Gt(we)?we:Array.isArray(we)?this.control(we[0],we.length>1?we[1]:null,we.length>2?we[2]:null):this.control(we)}}return Ye.\u0275fac=function(we){return new(we||Ye)},Ye.\u0275prov=i.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:Ri}),Ye})()},2313:(kn,Ge,w)=>{"use strict";w.d(Ge,{b2:()=>De,H7:()=>mt,q6:()=>W});var i=w(9808),e=w(4893);class C extends i.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class R extends C{static makeCurrent(){(0,i.HT)(new R)}onAndCancel(pt,rt,Xe){return pt.addEventListener(rt,Xe,!1),()=>{pt.removeEventListener(rt,Xe,!1)}}dispatchEvent(pt,rt){pt.dispatchEvent(rt)}remove(pt){pt.parentNode&&pt.parentNode.removeChild(pt)}createElement(pt,rt){return(rt=rt||this.getDefaultDocument()).createElement(pt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(pt){return pt.nodeType===Node.ELEMENT_NODE}isShadowRoot(pt){return pt instanceof DocumentFragment}getGlobalEventTarget(pt,rt){return"window"===rt?window:"document"===rt?pt:"body"===rt?pt.body:null}getBaseHref(pt){const rt=function j(){return U=U||document.querySelector("base"),U?U.getAttribute("href"):null}();return null==rt?null:function D(vt){F=F||document.createElement("a"),F.setAttribute("href",vt);const pt=F.pathname;return"/"===pt.charAt(0)?pt:`/${pt}`}(rt)}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}getCookie(pt){return(0,i.Mx)(document.cookie,pt)}}let F,U=null;const h=new e.OlP("TRANSITION_ID"),p=[{provide:e.ip1,useFactory:function u(vt,pt,rt){return()=>{rt.get(e.CZH).donePromise.then(()=>{const Xe=(0,i.q)(),yt=pt.querySelectorAll(`style[ng-transition="${vt}"]`);for(let Zt=0;Zt<yt.length;Zt++)Xe.remove(yt[Zt])})}},deps:[h,i.K0,e.zs3],multi:!0}];class _{static init(){(0,e.VLi)(new _)}addToWindow(pt){e.dqk.getAngularTestability=(Xe,yt=!0)=>{const Zt=pt.findTestabilityInTree(Xe,yt);if(null==Zt)throw new Error("Could not find testability for element.");return Zt},e.dqk.getAllAngularTestabilities=()=>pt.getAllTestabilities(),e.dqk.getAllAngularRootElements=()=>pt.getAllRootElements(),e.dqk.frameworkStabilizers||(e.dqk.frameworkStabilizers=[]),e.dqk.frameworkStabilizers.push(Xe=>{const yt=e.dqk.getAllAngularTestabilities();let Zt=yt.length,Jt=!1;const on=function(pn){Jt=Jt||pn,Zt--,0==Zt&&Xe(Jt)};yt.forEach(function(pn){pn.whenStable(on)})})}findTestabilityInTree(pt,rt,Xe){if(null==rt)return null;const yt=pt.getTestability(rt);return null!=yt?yt:Xe?(0,i.q)().isShadowRoot(rt)?this.findTestabilityInTree(pt,rt.host,!0):this.findTestabilityInTree(pt,rt.parentElement,!0):null}}let b=(()=>{class vt{build(){return new XMLHttpRequest}}return vt.\u0275fac=function(rt){return new(rt||vt)},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();const k=new e.OlP("EventManagerPlugins");let L=(()=>{class vt{constructor(rt,Xe){this._zone=Xe,this._eventNameToPlugin=new Map,rt.forEach(yt=>yt.manager=this),this._plugins=rt.slice().reverse()}addEventListener(rt,Xe,yt){return this._findPluginFor(Xe).addEventListener(rt,Xe,yt)}addGlobalEventListener(rt,Xe,yt){return this._findPluginFor(Xe).addGlobalEventListener(rt,Xe,yt)}getZone(){return this._zone}_findPluginFor(rt){const Xe=this._eventNameToPlugin.get(rt);if(Xe)return Xe;const yt=this._plugins;for(let Zt=0;Zt<yt.length;Zt++){const Jt=yt[Zt];if(Jt.supports(rt))return this._eventNameToPlugin.set(rt,Jt),Jt}throw new Error(`No event manager plugin found for event ${rt}`)}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(k),e.LFG(e.R0b))},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();class B{constructor(pt){this._doc=pt}addGlobalEventListener(pt,rt,Xe){const yt=(0,i.q)().getGlobalEventTarget(this._doc,pt);if(!yt)throw new Error(`Unsupported event target ${yt} for event ${rt}`);return this.addEventListener(yt,rt,Xe)}}let O=(()=>{class vt{constructor(){this._stylesSet=new Set}addStyles(rt){const Xe=new Set;rt.forEach(yt=>{this._stylesSet.has(yt)||(this._stylesSet.add(yt),Xe.add(yt))}),this.onStylesAdded(Xe)}onStylesAdded(rt){}getAllStyles(){return Array.from(this._stylesSet)}}return vt.\u0275fac=function(rt){return new(rt||vt)},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})(),P=(()=>{class vt extends O{constructor(rt){super(),this._doc=rt,this._hostNodes=new Map,this._hostNodes.set(rt.head,[])}_addStylesToHost(rt,Xe,yt){rt.forEach(Zt=>{const Jt=this._doc.createElement("style");Jt.textContent=Zt,yt.push(Xe.appendChild(Jt))})}addHost(rt){const Xe=[];this._addStylesToHost(this._stylesSet,rt,Xe),this._hostNodes.set(rt,Xe)}removeHost(rt){const Xe=this._hostNodes.get(rt);Xe&&Xe.forEach(y),this._hostNodes.delete(rt)}onStylesAdded(rt){this._hostNodes.forEach((Xe,yt)=>{this._addStylesToHost(rt,yt,Xe)})}ngOnDestroy(){this._hostNodes.forEach(rt=>rt.forEach(y))}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(i.K0))},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();function y(vt){(0,i.q)().remove(vt)}const S={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},E=/%COMP%/g,I="%COMP%",H=`_nghost-${I}`,ee=`_ngcontent-${I}`;function be(vt,pt,rt){for(let Xe=0;Xe<pt.length;Xe++){let yt=pt[Xe];Array.isArray(yt)?be(vt,yt,rt):(yt=yt.replace(E,vt),rt.push(yt))}return rt}function q(vt){return pt=>{if("__ngUnwrap__"===pt)return vt;!1===vt(pt)&&(pt.preventDefault(),pt.returnValue=!1)}}let V=(()=>{class vt{constructor(rt,Xe,yt){this.eventManager=rt,this.sharedStylesHost=Xe,this.appId=yt,this.rendererByCompId=new Map,this.defaultRenderer=new de(rt)}createRenderer(rt,Xe){if(!rt||!Xe)return this.defaultRenderer;switch(Xe.encapsulation){case e.ifc.Emulated:{let yt=this.rendererByCompId.get(Xe.id);return yt||(yt=new me(this.eventManager,this.sharedStylesHost,Xe,this.appId),this.rendererByCompId.set(Xe.id,yt)),yt.applyToHost(rt),yt}case 1:case e.ifc.ShadowDom:return new xe(this.eventManager,this.sharedStylesHost,rt,Xe);default:if(!this.rendererByCompId.has(Xe.id)){const yt=be(Xe.id,Xe.styles,[]);this.sharedStylesHost.addStyles(yt),this.rendererByCompId.set(Xe.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(L),e.LFG(P),e.LFG(e.AFp))},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();class de{constructor(pt){this.eventManager=pt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(pt,rt){return rt?document.createElementNS(S[rt],pt):document.createElement(pt)}createComment(pt){return document.createComment(pt)}createText(pt){return document.createTextNode(pt)}appendChild(pt,rt){pt.appendChild(rt)}insertBefore(pt,rt,Xe){pt&&pt.insertBefore(rt,Xe)}removeChild(pt,rt){pt&&pt.removeChild(rt)}selectRootElement(pt,rt){let Xe="string"==typeof pt?document.querySelector(pt):pt;if(!Xe)throw new Error(`The selector "${pt}" did not match any elements`);return rt||(Xe.textContent=""),Xe}parentNode(pt){return pt.parentNode}nextSibling(pt){return pt.nextSibling}setAttribute(pt,rt,Xe,yt){if(yt){rt=yt+":"+rt;const Zt=S[yt];Zt?pt.setAttributeNS(Zt,rt,Xe):pt.setAttribute(rt,Xe)}else pt.setAttribute(rt,Xe)}removeAttribute(pt,rt,Xe){if(Xe){const yt=S[Xe];yt?pt.removeAttributeNS(yt,rt):pt.removeAttribute(`${Xe}:${rt}`)}else pt.removeAttribute(rt)}addClass(pt,rt){pt.classList.add(rt)}removeClass(pt,rt){pt.classList.remove(rt)}setStyle(pt,rt,Xe,yt){yt&(e.JOm.DashCase|e.JOm.Important)?pt.style.setProperty(rt,Xe,yt&e.JOm.Important?"important":""):pt.style[rt]=Xe}removeStyle(pt,rt,Xe){Xe&e.JOm.DashCase?pt.style.removeProperty(rt):pt.style[rt]=""}setProperty(pt,rt,Xe){pt[rt]=Xe}setValue(pt,rt){pt.nodeValue=rt}listen(pt,rt,Xe){return"string"==typeof pt?this.eventManager.addGlobalEventListener(pt,rt,q(Xe)):this.eventManager.addEventListener(pt,rt,q(Xe))}}class me extends de{constructor(pt,rt,Xe,yt){super(pt),this.component=Xe;const Zt=be(yt+"-"+Xe.id,Xe.styles,[]);rt.addStyles(Zt),this.contentAttr=function fe(vt){return ee.replace(E,vt)}(yt+"-"+Xe.id),this.hostAttr=function ue(vt){return H.replace(E,vt)}(yt+"-"+Xe.id)}applyToHost(pt){super.setAttribute(pt,this.hostAttr,"")}createElement(pt,rt){const Xe=super.createElement(pt,rt);return super.setAttribute(Xe,this.contentAttr,""),Xe}}class xe extends de{constructor(pt,rt,Xe,yt){super(pt),this.sharedStylesHost=rt,this.hostEl=Xe,this.shadowRoot=Xe.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Zt=be(yt.id,yt.styles,[]);for(let Jt=0;Jt<Zt.length;Jt++){const on=document.createElement("style");on.textContent=Zt[Jt],this.shadowRoot.appendChild(on)}}nodeOrShadowRoot(pt){return pt===this.hostEl?this.shadowRoot:pt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(pt,rt){return super.appendChild(this.nodeOrShadowRoot(pt),rt)}insertBefore(pt,rt,Xe){return super.insertBefore(this.nodeOrShadowRoot(pt),rt,Xe)}removeChild(pt,rt){return super.removeChild(this.nodeOrShadowRoot(pt),rt)}parentNode(pt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(pt)))}}let _e=(()=>{class vt extends B{constructor(rt){super(rt)}supports(rt){return!0}addEventListener(rt,Xe,yt){return rt.addEventListener(Xe,yt,!1),()=>this.removeEventListener(rt,Xe,yt)}removeEventListener(rt,Xe,yt){return rt.removeEventListener(Xe,yt)}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(i.K0))},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();const Ie=["alt","control","meta","shift"],ke={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ue={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Fe={alt:vt=>vt.altKey,control:vt=>vt.ctrlKey,meta:vt=>vt.metaKey,shift:vt=>vt.shiftKey};let je=(()=>{class vt extends B{constructor(rt){super(rt)}supports(rt){return null!=vt.parseEventName(rt)}addEventListener(rt,Xe,yt){const Zt=vt.parseEventName(Xe),Jt=vt.eventCallback(Zt.fullKey,yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,i.q)().onAndCancel(rt,Zt.domEventName,Jt))}static parseEventName(rt){const Xe=rt.toLowerCase().split("."),yt=Xe.shift();if(0===Xe.length||"keydown"!==yt&&"keyup"!==yt)return null;const Zt=vt._normalizeKey(Xe.pop());let Jt="";if(Ie.forEach(pn=>{const Mn=Xe.indexOf(pn);Mn>-1&&(Xe.splice(Mn,1),Jt+=pn+".")}),Jt+=Zt,0!=Xe.length||0===Zt.length)return null;const on={};return on.domEventName=yt,on.fullKey=Jt,on}static getEventFullKey(rt){let Xe="",yt=function Pe(vt){let pt=vt.key;if(null==pt){if(pt=vt.keyIdentifier,null==pt)return"Unidentified";pt.startsWith("U+")&&(pt=String.fromCharCode(parseInt(pt.substring(2),16)),3===vt.location&&Ue.hasOwnProperty(pt)&&(pt=Ue[pt]))}return ke[pt]||pt}(rt);return yt=yt.toLowerCase()," "===yt?yt="space":"."===yt&&(yt="dot"),Ie.forEach(Zt=>{Zt!=yt&&Fe[Zt](rt)&&(Xe+=Zt+".")}),Xe+=yt,Xe}static eventCallback(rt,Xe,yt){return Zt=>{vt.getEventFullKey(Zt)===rt&&yt.runGuarded(()=>Xe(Zt))}}static _normalizeKey(rt){return"esc"===rt?"escape":rt}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(i.K0))},vt.\u0275prov=e.Yz7({token:vt,factory:vt.\u0275fac}),vt})();const W=(0,e.eFA)(e._c5,"browser",[{provide:e.Lbi,useValue:i.bD},{provide:e.g9A,useValue:function He(){R.makeCurrent(),_.init()},multi:!0},{provide:i.K0,useFactory:function ye(){return(0,e.RDi)(document),document},deps:[]}]),ce=[{provide:e.zSh,useValue:"root"},{provide:e.qLn,useFactory:function Le(){return new e.qLn},deps:[]},{provide:k,useClass:_e,multi:!0,deps:[i.K0,e.R0b,e.Lbi]},{provide:k,useClass:je,multi:!0,deps:[i.K0]},{provide:V,useClass:V,deps:[L,P,e.AFp]},{provide:e.FYo,useExisting:V},{provide:O,useExisting:P},{provide:P,useClass:P,deps:[i.K0]},{provide:e.dDg,useClass:e.dDg,deps:[e.R0b]},{provide:L,useClass:L,deps:[k,e.R0b]},{provide:i.JF,useClass:b,deps:[]}];let De=(()=>{class vt{constructor(rt){if(rt)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(rt){return{ngModule:vt,providers:[{provide:e.AFp,useValue:rt.appId},{provide:h,useExisting:e.AFp},p]}}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(vt,12))},vt.\u0275mod=e.oAB({type:vt}),vt.\u0275inj=e.cJS({providers:ce,imports:[i.ez,e.hGG]}),vt})();"undefined"!=typeof window&&window;let mt=(()=>{class vt{}return vt.\u0275fac=function(rt){return new(rt||vt)},vt.\u0275prov=e.Yz7({token:vt,factory:function(rt){let Xe=null;return Xe=rt?new(rt||vt):e.LFG(tn),Xe},providedIn:"root"}),vt})(),tn=(()=>{class vt extends mt{constructor(rt){super(),this._doc=rt}sanitize(rt,Xe){if(null==Xe)return null;switch(rt){case e.q3G.NONE:return Xe;case e.q3G.HTML:return(0,e.qzn)(Xe,"HTML")?(0,e.z3N)(Xe):(0,e.EiD)(this._doc,String(Xe)).toString();case e.q3G.STYLE:return(0,e.qzn)(Xe,"Style")?(0,e.z3N)(Xe):Xe;case e.q3G.SCRIPT:if((0,e.qzn)(Xe,"Script"))return(0,e.z3N)(Xe);throw new Error("unsafe value used in a script context");case e.q3G.URL:return(0,e.yhl)(Xe),(0,e.qzn)(Xe,"URL")?(0,e.z3N)(Xe):(0,e.mCW)(String(Xe));case e.q3G.RESOURCE_URL:if((0,e.qzn)(Xe,"ResourceURL"))return(0,e.z3N)(Xe);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${rt} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(rt){return(0,e.JVY)(rt)}bypassSecurityTrustStyle(rt){return(0,e.L6k)(rt)}bypassSecurityTrustScript(rt){return(0,e.eBb)(rt)}bypassSecurityTrustUrl(rt){return(0,e.LAX)(rt)}bypassSecurityTrustResourceUrl(rt){return(0,e.pB0)(rt)}}return vt.\u0275fac=function(rt){return new(rt||vt)(e.LFG(i.K0))},vt.\u0275prov=e.Yz7({token:vt,factory:function(rt){let Xe=null;return Xe=rt?new rt:function Ft(vt){return new tn(vt.get(i.K0))}(e.LFG(e.zs3)),Xe},providedIn:"root"}),vt})()},7979:(kn,Ge,w)=>{"use strict";w.d(Ge,{gz:()=>vn,F0:()=>no,rH:()=>wa,yS:()=>Ra,Bz:()=>Hl,lC:()=>ts});var i=w(4893);const C=(0,w(3888).d)(Se=>function(){Se(this),this.name="EmptyError",this.message="no elements in sequence"});var R=w(8306),U=w(8421);function j(Se){return new R.y(ge=>{(0,U.Xf)(Se()).subscribe(ge)})}var F=w(727),D=w(4482),h=w(5403);function u(){return(0,D.e)((Se,ge)=>{let he=null;Se._refCount++;const Be=(0,h.x)(ge,void 0,void 0,void 0,()=>{if(!Se||Se._refCount<=0||0<--Se._refCount)return void(he=null);const ze=Se._connection,ft=he;he=null,ze&&(!ft||ze===ft)&&ze.unsubscribe(),ge.unsubscribe()});Se.subscribe(Be),Be.closed||(he=Se.connect())})}class p extends R.y{constructor(ge,he){super(),this.source=ge,this.subjectFactory=he,this._subject=null,this._refCount=0,this._connection=null,(0,D.A)(ge)&&(this.lift=ge.lift)}_subscribe(ge){return this.getSubject().subscribe(ge)}getSubject(){const ge=this._subject;return(!ge||ge.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:ge}=this;this._subject=this._connection=null,null==ge||ge.unsubscribe()}connect(){let ge=this._connection;if(!ge){ge=this._connection=new F.w0;const he=this.getSubject();ge.add(this.source.subscribe((0,h.x)(he,void 0,()=>{this._teardown(),he.complete()},Be=>{this._teardown(),he.error(Be)},()=>this._teardown()))),ge.closed&&(this._connection=null,ge=F.w0.EMPTY)}return ge}refCount(){return u()(this)}}var _=w(2076),b=w(9646),k=w(1135),L=w(9841),B=w(7272),O=w(515),P=w(7579);function y(Se,ge,he,Be,ze){return(ft,St)=>{let Ut=he,fn=ge,qn=0;ft.subscribe((0,h.x)(St,wr=>{const lr=qn++;fn=Ut?Se(fn,wr,lr):(Ut=!0,wr),Be&&St.next(fn)},ze&&(()=>{Ut&&St.next(fn),St.complete()})))}}function S(Se,ge){return(0,D.e)(y(Se,ge,arguments.length>=2,!0))}function E(Se){return(0,D.e)((ge,he)=>{let ft,Be=null,ze=!1;Be=ge.subscribe((0,h.x)(he,void 0,void 0,St=>{ft=(0,U.Xf)(Se(St,E(Se)(ge))),Be?(Be.unsubscribe(),Be=null,ft.subscribe(he)):ze=!0})),ze&&(Be.unsubscribe(),Be=null,ft.subscribe(he))})}var A=w(9300);function I(Se){return Se<=0?()=>O.E:(0,D.e)((ge,he)=>{let Be=[];ge.subscribe((0,h.x)(he,ze=>{Be.push(ze),Se<Be.length&&Be.shift()},()=>{for(const ze of Be)he.next(ze);he.complete()},void 0,()=>{Be=null}))})}function H(Se=ee){return(0,D.e)((ge,he)=>{let Be=!1;ge.subscribe((0,h.x)(he,ze=>{Be=!0,he.next(ze)},()=>Be?he.complete():he.error(Se())))})}function ee(){return new C}function fe(Se){return(0,D.e)((ge,he)=>{let Be=!1;ge.subscribe((0,h.x)(he,ze=>{Be=!0,he.next(ze)},()=>{Be||he.next(Se),he.complete()}))})}var ue=w(4671),q=w(5698);function se(Se,ge){const he=arguments.length>=2;return Be=>Be.pipe(Se?(0,A.h)((ze,ft)=>Se(ze,ft,Be)):ue.y,(0,q.q)(1),he?fe(ge):H(()=>new C))}var de=w(4004),Q=w(3900),pe=w(8675),me=w(4351),xe=w(5577),_e=w(8505),Ie=w(8189),Te=w(9808);class ke{constructor(ge,he){this.id=ge,this.url=he}}class Ue extends ke{constructor(ge,he,Be="imperative",ze=null){super(ge,he),this.navigationTrigger=Be,this.restoredState=ze}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fe extends ke{constructor(ge,he,Be){super(ge,he),this.urlAfterRedirects=Be}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class je extends ke{constructor(ge,he,Be){super(ge,he),this.reason=Be}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pe extends ke{constructor(ge,he,Be){super(ge,he),this.error=Be}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class He extends ke{constructor(ge,he,Be,ze){super(ge,he),this.urlAfterRedirects=Be,this.state=ze}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Le extends ke{constructor(ge,he,Be,ze){super(ge,he),this.urlAfterRedirects=Be,this.state=ze}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ye extends ke{constructor(ge,he,Be,ze,ft){super(ge,he),this.urlAfterRedirects=Be,this.state=ze,this.shouldActivate=ft}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ae extends ke{constructor(ge,he,Be,ze){super(ge,he),this.urlAfterRedirects=Be,this.state=ze}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W extends ke{constructor(ge,he,Be,ze){super(ge,he),this.urlAfterRedirects=Be,this.state=ze}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ce{constructor(ge){this.route=ge}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class De{constructor(ge){this.route=ge}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class le{constructor(ge){this.snapshot=ge}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ne{constructor(ge){this.snapshot=ge}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z{constructor(ge){this.snapshot=ge}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class te{constructor(ge){this.snapshot=ge}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X{constructor(ge,he,Be){this.routerEvent=ge,this.position=he,this.anchor=Be}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $="primary";class K{constructor(ge){this.params=ge||{}}has(ge){return Object.prototype.hasOwnProperty.call(this.params,ge)}get(ge){if(this.has(ge)){const he=this.params[ge];return Array.isArray(he)?he[0]:he}return null}getAll(ge){if(this.has(ge)){const he=this.params[ge];return Array.isArray(he)?he:[he]}return[]}get keys(){return Object.keys(this.params)}}function oe(Se){return new K(Se)}const Ce="ngNavigationCancelingError";function Oe(Se){const ge=Error("NavigationCancelingError: "+Se);return ge[Ce]=!0,ge}function st(Se,ge,he){const Be=he.path.split("/");if(Be.length>Se.length||"full"===he.pathMatch&&(ge.hasChildren()||Be.length<Se.length))return null;const ze={};for(let ft=0;ft<Be.length;ft++){const St=Be[ft],Ut=Se[ft];if(St.startsWith(":"))ze[St.substring(1)]=Ut;else if(St!==Ut.path)return null}return{consumed:Se.slice(0,Be.length),posParams:ze}}function ct(Se,ge){const he=Se?Object.keys(Se):void 0,Be=ge?Object.keys(ge):void 0;if(!he||!Be||he.length!=Be.length)return!1;let ze;for(let ft=0;ft<he.length;ft++)if(ze=he[ft],!xt(Se[ze],ge[ze]))return!1;return!0}function xt(Se,ge){if(Array.isArray(Se)&&Array.isArray(ge)){if(Se.length!==ge.length)return!1;const he=[...Se].sort(),Be=[...ge].sort();return he.every((ze,ft)=>Be[ft]===ze)}return Se===ge}function tt(Se){return Array.prototype.concat.apply([],Se)}function Et(Se){return Se.length>0?Se[Se.length-1]:null}function _t(Se,ge){for(const he in Se)Se.hasOwnProperty(he)&&ge(Se[he],he)}function At(Se){return(0,i.CqO)(Se)?Se:(0,i.QGY)(Se)?(0,_.D)(Promise.resolve(Se)):(0,b.of)(Se)}const Yt={exact:function Ln(Se,ge,he){if(!Wt(Se.segments,ge.segments)||!it(Se.segments,ge.segments,he)||Se.numberOfChildren!==ge.numberOfChildren)return!1;for(const Be in ge.children)if(!Se.children[Be]||!Ln(Se.children[Be],ge.children[Be],he))return!1;return!0},subset:Vn},jt={exact:function an(Se,ge){return ct(Se,ge)},subset:function wn(Se,ge){return Object.keys(ge).length<=Object.keys(Se).length&&Object.keys(ge).every(he=>xt(Se[he],ge[he]))},ignored:()=>!0};function en(Se,ge,he){return Yt[he.paths](Se.root,ge.root,he.matrixParams)&&jt[he.queryParams](Se.queryParams,ge.queryParams)&&!("exact"===he.fragment&&Se.fragment!==ge.fragment)}function Vn(Se,ge,he){return Hn(Se,ge,ge.segments,he)}function Hn(Se,ge,he,Be){if(Se.segments.length>he.length){const ze=Se.segments.slice(0,he.length);return!(!Wt(ze,he)||ge.hasChildren()||!it(ze,he,Be))}if(Se.segments.length===he.length){if(!Wt(Se.segments,he)||!it(Se.segments,he,Be))return!1;for(const ze in ge.children)if(!Se.children[ze]||!Vn(Se.children[ze],ge.children[ze],Be))return!1;return!0}{const ze=he.slice(0,Se.segments.length),ft=he.slice(Se.segments.length);return!!(Wt(Se.segments,ze)&&it(Se.segments,ze,Be)&&Se.children[$])&&Hn(Se.children[$],ge,ft,Be)}}function it(Se,ge,he){return ge.every((Be,ze)=>jt[he](Se[ze].parameters,Be.parameters))}class Qe{constructor(ge,he,Be){this.root=ge,this.queryParams=he,this.fragment=Be}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oe(this.queryParams)),this._queryParamMap}toString(){return Xe.serialize(this)}}class mt{constructor(ge,he){this.segments=ge,this.children=he,this.parent=null,_t(he,(Be,ze)=>Be.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yt(this)}}class Ft{constructor(ge,he){this.path=ge,this.parameters=he}get parameterMap(){return this._parameterMap||(this._parameterMap=oe(this.parameters)),this._parameterMap}toString(){return gr(this)}}function Wt(Se,ge){return Se.length===ge.length&&Se.every((he,Be)=>he.path===ge[Be].path)}class pt{}class rt{parse(ge){const he=new Fn(ge);return new Qe(he.parseRootSegment(),he.parseQueryParams(),he.parseFragment())}serialize(ge){const he=`/${Zt(ge.root,!0)}`,Be=function ut(Se){const ge=Object.keys(Se).map(he=>{const Be=Se[he];return Array.isArray(Be)?Be.map(ze=>`${on(he)}=${on(ze)}`).join("&"):`${on(he)}=${on(Be)}`}).filter(he=>!!he);return ge.length?`?${ge.join("&")}`:""}(ge.queryParams);return`${he}${Be}${"string"==typeof ge.fragment?`#${function pn(Se){return encodeURI(Se)}(ge.fragment)}`:""}`}}const Xe=new rt;function yt(Se){return Se.segments.map(ge=>gr(ge)).join("/")}function Zt(Se,ge){if(!Se.hasChildren())return yt(Se);if(ge){const he=Se.children[$]?Zt(Se.children[$],!1):"",Be=[];return _t(Se.children,(ze,ft)=>{ft!==$&&Be.push(`${ft}:${Zt(ze,!1)}`)}),Be.length>0?`${he}(${Be.join("//")})`:he}{const he=function vt(Se,ge){let he=[];return _t(Se.children,(Be,ze)=>{ze===$&&(he=he.concat(ge(Be,ze)))}),_t(Se.children,(Be,ze)=>{ze!==$&&(he=he.concat(ge(Be,ze)))}),he}(Se,(Be,ze)=>ze===$?[Zt(Se.children[$],!1)]:[`${ze}:${Zt(Be,!1)}`]);return 1===Object.keys(Se.children).length&&null!=Se.children[$]?`${yt(Se)}/${he[0]}`:`${yt(Se)}/(${he.join("//")})`}}function Jt(Se){return encodeURIComponent(Se).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function on(Se){return Jt(Se).replace(/%3B/gi,";")}function Mn(Se){return Jt(Se).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wn(Se){return decodeURIComponent(Se)}function Qn(Se){return Wn(Se.replace(/\+/g,"%20"))}function gr(Se){return`${Mn(Se.path)}${function Ir(Se){return Object.keys(Se).map(ge=>`;${Mn(ge)}=${Mn(Se[ge])}`).join("")}(Se.parameters)}`}const zt=/^[^\/()?;=#]+/;function dn(Se){const ge=Se.match(zt);return ge?ge[0]:""}const It=/^[^=?&#]+/,Rt=/^[^&#]+/;class Fn{constructor(ge){this.url=ge,this.remaining=ge}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mt([],{}):new mt([],this.parseChildren())}parseQueryParams(){const ge={};if(this.consumeOptional("?"))do{this.parseQueryParam(ge)}while(this.consumeOptional("&"));return ge}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const ge=[];for(this.peekStartsWith("(")||ge.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),ge.push(this.parseSegment());let he={};this.peekStartsWith("/(")&&(this.capture("/"),he=this.parseParens(!0));let Be={};return this.peekStartsWith("(")&&(Be=this.parseParens(!1)),(ge.length>0||Object.keys(he).length>0)&&(Be[$]=new mt(ge,he)),Be}parseSegment(){const ge=dn(this.remaining);if(""===ge&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(ge),new Ft(Wn(ge),this.parseMatrixParams())}parseMatrixParams(){const ge={};for(;this.consumeOptional(";");)this.parseParam(ge);return ge}parseParam(ge){const he=dn(this.remaining);if(!he)return;this.capture(he);let Be="";if(this.consumeOptional("=")){const ze=dn(this.remaining);ze&&(Be=ze,this.capture(Be))}ge[Wn(he)]=Wn(Be)}parseQueryParam(ge){const he=function kt(Se){const ge=Se.match(It);return ge?ge[0]:""}(this.remaining);if(!he)return;this.capture(he);let Be="";if(this.consumeOptional("=")){const St=function sn(Se){const ge=Se.match(Rt);return ge?ge[0]:""}(this.remaining);St&&(Be=St,this.capture(Be))}const ze=Qn(he),ft=Qn(Be);if(ge.hasOwnProperty(ze)){let St=ge[ze];Array.isArray(St)||(St=[St],ge[ze]=St),St.push(ft)}else ge[ze]=ft}parseParens(ge){const he={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const Be=dn(this.remaining),ze=this.remaining[Be.length];if("/"!==ze&&")"!==ze&&";"!==ze)throw new Error(`Cannot parse url '${this.url}'`);let ft;Be.indexOf(":")>-1?(ft=Be.substr(0,Be.indexOf(":")),this.capture(ft),this.capture(":")):ge&&(ft=$);const St=this.parseChildren();he[ft]=1===Object.keys(St).length?St[$]:new mt([],St),this.consumeOptional("//")}return he}peekStartsWith(ge){return this.remaining.startsWith(ge)}consumeOptional(ge){return!!this.peekStartsWith(ge)&&(this.remaining=this.remaining.substring(ge.length),!0)}capture(ge){if(!this.consumeOptional(ge))throw new Error(`Expected "${ge}".`)}}class Un{constructor(ge){this._root=ge}get root(){return this._root.value}parent(ge){const he=this.pathFromRoot(ge);return he.length>1?he[he.length-2]:null}children(ge){const he=Ot(ge,this._root);return he?he.children.map(Be=>Be.value):[]}firstChild(ge){const he=Ot(ge,this._root);return he&&he.children.length>0?he.children[0].value:null}siblings(ge){const he=Ct(ge,this._root);return he.length<2?[]:he[he.length-2].children.map(ze=>ze.value).filter(ze=>ze!==ge)}pathFromRoot(ge){return Ct(ge,this._root).map(he=>he.value)}}function Ot(Se,ge){if(Se===ge.value)return ge;for(const he of ge.children){const Be=Ot(Se,he);if(Be)return Be}return null}function Ct(Se,ge){if(Se===ge.value)return[ge];for(const he of ge.children){const Be=Ct(Se,he);if(Be.length)return Be.unshift(ge),Be}return[]}class Gt{constructor(ge,he){this.value=ge,this.children=he}toString(){return`TreeNode(${this.value})`}}function qt(Se){const ge={};return Se&&Se.children.forEach(he=>ge[he.value.outlet]=he),ge}class bn extends Un{constructor(ge,he){super(ge),this.snapshot=he,br(this,ge)}toString(){return this.snapshot.toString()}}function Nn(Se,ge){const he=function Dt(Se,ge){const St=new ar([],{},{},"",{},$,ge,null,Se.root,-1,{});return new ur("",new Gt(St,[]))}(Se,ge),Be=new k.X([new Ft("",{})]),ze=new k.X({}),ft=new k.X({}),St=new k.X({}),Ut=new k.X(""),fn=new vn(Be,ze,St,Ut,ft,$,ge,he.root);return fn.snapshot=he.root,new bn(new Gt(fn,[]),he)}class vn{constructor(ge,he,Be,ze,ft,St,Ut,fn){this.url=ge,this.params=he,this.queryParams=Be,this.fragment=ze,this.data=ft,this.outlet=St,this.component=Ut,this._futureSnapshot=fn}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,de.U)(ge=>oe(ge)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,de.U)(ge=>oe(ge)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rn(Se,ge="emptyOnly"){const he=Se.pathFromRoot;let Be=0;if("always"!==ge)for(Be=he.length-1;Be>=1;){const ze=he[Be],ft=he[Be-1];if(ze.routeConfig&&""===ze.routeConfig.path)Be--;else{if(ft.component)break;Be--}}return function Yn(Se){return Se.reduce((ge,he)=>({params:Object.assign(Object.assign({},ge.params),he.params),data:Object.assign(Object.assign({},ge.data),he.data),resolve:Object.assign(Object.assign({},ge.resolve),he._resolvedData)}),{params:{},data:{},resolve:{}})}(he.slice(Be))}class ar{constructor(ge,he,Be,ze,ft,St,Ut,fn,qn,wr,lr){this.url=ge,this.params=he,this.queryParams=Be,this.fragment=ze,this.data=ft,this.outlet=St,this.component=Ut,this.routeConfig=fn,this._urlSegment=qn,this._lastPathIndex=wr,this._resolve=lr}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=oe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=oe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(Be=>Be.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ur extends Un{constructor(ge,he){super(he),this.url=ge,br(this,he)}toString(){return Cr(this._root)}}function br(Se,ge){ge.value._routerState=Se,ge.children.forEach(he=>br(Se,he))}function Cr(Se){const ge=Se.children.length>0?` { ${Se.children.map(Cr).join(", ")} } `:"";return`${Se.value}${ge}`}function Hr(Se){if(Se.snapshot){const ge=Se.snapshot,he=Se._futureSnapshot;Se.snapshot=he,ct(ge.queryParams,he.queryParams)||Se.queryParams.next(he.queryParams),ge.fragment!==he.fragment&&Se.fragment.next(he.fragment),ct(ge.params,he.params)||Se.params.next(he.params),function et(Se,ge){if(Se.length!==ge.length)return!1;for(let he=0;he<Se.length;++he)if(!ct(Se[he],ge[he]))return!1;return!0}(ge.url,he.url)||Se.url.next(he.url),ct(ge.data,he.data)||Se.data.next(he.data)}else Se.snapshot=Se._futureSnapshot,Se.data.next(Se._futureSnapshot.data)}function Er(Se,ge){const he=ct(Se.params,ge.params)&&function tn(Se,ge){return Wt(Se,ge)&&Se.every((he,Be)=>ct(he.parameters,ge[Be].parameters))}(Se.url,ge.url);return he&&!(!Se.parent!=!ge.parent)&&(!Se.parent||Er(Se.parent,ge.parent))}function Si(Se,ge,he){if(he&&Se.shouldReuseRoute(ge.value,he.value.snapshot)){const Be=he.value;Be._futureSnapshot=ge.value;const ze=function ti(Se,ge,he){return ge.children.map(Be=>{for(const ze of he.children)if(Se.shouldReuseRoute(Be.value,ze.value.snapshot))return Si(Se,Be,ze);return Si(Se,Be)})}(Se,ge,he);return new Gt(Be,ze)}{if(Se.shouldAttach(ge.value)){const ft=Se.retrieve(ge.value);if(null!==ft){const St=ft.route;return St.value._futureSnapshot=ge.value,St.children=ge.children.map(Ut=>Si(Se,Ut)),St}}const Be=function oi(Se){return new vn(new k.X(Se.url),new k.X(Se.params),new k.X(Se.queryParams),new k.X(Se.fragment),new k.X(Se.data),Se.outlet,Se.component,Se)}(ge.value),ze=ge.children.map(ft=>Si(Se,ft));return new Gt(Be,ze)}}function si(Se){return"object"==typeof Se&&null!=Se&&!Se.outlets&&!Se.segmentPath}function bi(Se){return"object"==typeof Se&&null!=Se&&Se.outlets}function Lr(Se,ge,he,Be,ze){let ft={};return Be&&_t(Be,(St,Ut)=>{ft[Ut]=Array.isArray(St)?St.map(fn=>`${fn}`):`${St}`}),new Qe(he.root===Se?ge:Do(he.root,Se,ge),ft,ze)}function Do(Se,ge,he){const Be={};return _t(Se.children,(ze,ft)=>{Be[ft]=ze===ge?he:Do(ze,ge,he)}),new mt(Se.segments,Be)}class eo{constructor(ge,he,Be){if(this.isAbsolute=ge,this.numberOfDoubleDots=he,this.commands=Be,ge&&Be.length>0&&si(Be[0]))throw new Error("Root segment cannot have matrix parameters");const ze=Be.find(bi);if(ze&&ze!==Et(Be))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $i{constructor(ge,he,Be){this.segmentGroup=ge,this.processChildren=he,this.index=Be}}function Qo(Se,ge,he){if(Se||(Se=new mt([],{})),0===Se.segments.length&&Se.hasChildren())return to(Se,ge,he);const Be=function Po(Se,ge,he){let Be=0,ze=ge;const ft={match:!1,pathIndex:0,commandIndex:0};for(;ze<Se.segments.length;){if(Be>=he.length)return ft;const St=Se.segments[ze],Ut=he[Be];if(bi(Ut))break;const fn=`${Ut}`,qn=Be<he.length-1?he[Be+1]:null;if(ze>0&&void 0===fn)break;if(fn&&qn&&"object"==typeof qn&&void 0===qn.outlets){if(!qi(fn,qn,St))return ft;Be+=2}else{if(!qi(fn,{},St))return ft;Be++}ze++}return{match:!0,pathIndex:ze,commandIndex:Be}}(Se,ge,he),ze=he.slice(Be.commandIndex);if(Be.match&&Be.pathIndex<Se.segments.length){const ft=new mt(Se.segments.slice(0,Be.pathIndex),{});return ft.children[$]=new mt(Se.segments.slice(Be.pathIndex),Se.children),to(ft,0,ze)}return Be.match&&0===ze.length?new mt(Se.segments,{}):Be.match&&!Se.hasChildren()?jo(Se,ge,he):Be.match?to(Se,0,ze):jo(Se,ge,he)}function to(Se,ge,he){if(0===he.length)return new mt(Se.segments,{});{const Be=function Jo(Se){return bi(Se[0])?Se[0].outlets:{[$]:Se}}(he),ze={};return _t(Be,(ft,St)=>{"string"==typeof ft&&(ft=[ft]),null!==ft&&(ze[St]=Qo(Se.children[St],ge,ft))}),_t(Se.children,(ft,St)=>{void 0===Be[St]&&(ze[St]=ft)}),new mt(Se.segments,ze)}}function jo(Se,ge,he){const Be=Se.segments.slice(0,ge);let ze=0;for(;ze<he.length;){const ft=he[ze];if(bi(ft)){const fn=Xo(ft.outlets);return new mt(Be,fn)}if(0===ze&&si(he[0])){Be.push(new Ft(Se.segments[ge].path,qr(he[0]))),ze++;continue}const St=bi(ft)?ft.outlets[$]:`${ft}`,Ut=ze<he.length-1?he[ze+1]:null;St&&Ut&&si(Ut)?(Be.push(new Ft(St,qr(Ut))),ze+=2):(Be.push(new Ft(St,{})),ze++)}return new mt(Be,{})}function Xo(Se){const ge={};return _t(Se,(he,Be)=>{"string"==typeof he&&(he=[he]),null!==he&&(ge[Be]=jo(new mt([],{}),0,he))}),ge}function qr(Se){const ge={};return _t(Se,(he,Be)=>ge[Be]=`${he}`),ge}function qi(Se,ge,he){return Se==he.path&&ct(ge,he.parameters)}class ao{constructor(ge,he,Be,ze){this.routeReuseStrategy=ge,this.futureState=he,this.currState=Be,this.forwardEvent=ze}activate(ge){const he=this.futureState._root,Be=this.currState?this.currState._root:null;this.deactivateChildRoutes(he,Be,ge),Hr(this.futureState.root),this.activateChildRoutes(he,Be,ge)}deactivateChildRoutes(ge,he,Be){const ze=qt(he);ge.children.forEach(ft=>{const St=ft.value.outlet;this.deactivateRoutes(ft,ze[St],Be),delete ze[St]}),_t(ze,(ft,St)=>{this.deactivateRouteAndItsChildren(ft,Be)})}deactivateRoutes(ge,he,Be){const ze=ge.value,ft=he?he.value:null;if(ze===ft)if(ze.component){const St=Be.getContext(ze.outlet);St&&this.deactivateChildRoutes(ge,he,St.children)}else this.deactivateChildRoutes(ge,he,Be);else ft&&this.deactivateRouteAndItsChildren(he,Be)}deactivateRouteAndItsChildren(ge,he){ge.value.component&&this.routeReuseStrategy.shouldDetach(ge.value.snapshot)?this.detachAndStoreRouteSubtree(ge,he):this.deactivateRouteAndOutlet(ge,he)}detachAndStoreRouteSubtree(ge,he){const Be=he.getContext(ge.value.outlet),ze=Be&&ge.value.component?Be.children:he,ft=qt(ge);for(const St of Object.keys(ft))this.deactivateRouteAndItsChildren(ft[St],ze);if(Be&&Be.outlet){const St=Be.outlet.detach(),Ut=Be.children.onOutletDeactivated();this.routeReuseStrategy.store(ge.value.snapshot,{componentRef:St,route:ge,contexts:Ut})}}deactivateRouteAndOutlet(ge,he){const Be=he.getContext(ge.value.outlet),ze=Be&&ge.value.component?Be.children:he,ft=qt(ge);for(const St of Object.keys(ft))this.deactivateRouteAndItsChildren(ft[St],ze);Be&&Be.outlet&&(Be.outlet.deactivate(),Be.children.onOutletDeactivated(),Be.attachRef=null,Be.resolver=null,Be.route=null)}activateChildRoutes(ge,he,Be){const ze=qt(he);ge.children.forEach(ft=>{this.activateRoutes(ft,ze[ft.value.outlet],Be),this.forwardEvent(new te(ft.value.snapshot))}),ge.children.length&&this.forwardEvent(new ne(ge.value.snapshot))}activateRoutes(ge,he,Be){const ze=ge.value,ft=he?he.value:null;if(Hr(ze),ze===ft)if(ze.component){const St=Be.getOrCreateContext(ze.outlet);this.activateChildRoutes(ge,he,St.children)}else this.activateChildRoutes(ge,he,Be);else if(ze.component){const St=Be.getOrCreateContext(ze.outlet);if(this.routeReuseStrategy.shouldAttach(ze.snapshot)){const Ut=this.routeReuseStrategy.retrieve(ze.snapshot);this.routeReuseStrategy.store(ze.snapshot,null),St.children.onOutletReAttached(Ut.contexts),St.attachRef=Ut.componentRef,St.route=Ut.route.value,St.outlet&&St.outlet.attach(Ut.componentRef,Ut.route.value),Hr(Ut.route.value),this.activateChildRoutes(ge,null,St.children)}else{const Ut=function Nt(Se){for(let ge=Se.parent;ge;ge=ge.parent){const he=ge.routeConfig;if(he&&he._loadedConfig)return he._loadedConfig;if(he&&he.component)return null}return null}(ze.snapshot),fn=Ut?Ut.module.componentFactoryResolver:null;St.attachRef=null,St.route=ze,St.resolver=fn,St.outlet&&St.outlet.activateWith(ze,fn),this.activateChildRoutes(ge,null,St.children)}}else this.activateChildRoutes(ge,null,Be)}}class ln{constructor(ge,he){this.routes=ge,this.module=he}}function xn(Se){return"function"==typeof Se}function rr(Se){return Se instanceof Qe}const fi=Symbol("INITIAL_VALUE");function Bi(){return(0,Q.w)(Se=>(0,L.a)(Se.map(ge=>ge.pipe((0,q.q)(1),(0,pe.O)(fi)))).pipe(S((ge,he)=>{let Be=!1;return he.reduce((ze,ft,St)=>ze!==fi?ze:(ft===fi&&(Be=!0),Be||!1!==ft&&St!==he.length-1&&!rr(ft)?ze:ft),ge)},fi),(0,A.h)(ge=>ge!==fi),(0,de.U)(ge=>rr(ge)?ge:!0===ge),(0,q.q)(1)))}class vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ao,this.attachRef=null}}class Ao{constructor(){this.contexts=new Map}onChildOutletCreated(ge,he){const Be=this.getOrCreateContext(ge);Be.outlet=he,this.contexts.set(ge,Be)}onChildOutletDestroyed(ge){const he=this.getContext(ge);he&&(he.outlet=null,he.attachRef=null)}onOutletDeactivated(){const ge=this.contexts;return this.contexts=new Map,ge}onOutletReAttached(ge){this.contexts=ge}getOrCreateContext(ge){let he=this.getContext(ge);return he||(he=new vo,this.contexts.set(ge,he)),he}getContext(ge){return this.contexts.get(ge)||null}}let ts=(()=>{class Se{constructor(he,Be,ze,ft,St){this.parentContexts=he,this.location=Be,this.resolver=ze,this.changeDetector=St,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.attachEvents=new i.vpe,this.detachEvents=new i.vpe,this.name=ft||$,he.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const he=this.parentContexts.getContext(this.name);he&&he.route&&(he.attachRef?this.attach(he.attachRef,he.route):this.activateWith(he.route,he.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const he=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(he.instance),he}attach(he,Be){this.activated=he,this._activatedRoute=Be,this.location.insert(he.hostView),this.attachEvents.emit(he.instance)}deactivate(){if(this.activated){const he=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(he)}}activateWith(he,Be){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=he;const St=(Be=Be||this.resolver).resolveComponentFactory(he._futureSnapshot.routeConfig.component),Ut=this.parentContexts.getOrCreateContext(this.name).children,fn=new Io(he,Ut,this.location.injector);this.activated=this.location.createComponent(St,this.location.length,fn),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return Se.\u0275fac=function(he){return new(he||Se)(i.Y36(Ao),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},Se.\u0275dir=i.lG2({type:Se,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),Se})();class Io{constructor(ge,he,Be){this.route=ge,this.childContexts=he,this.parent=Be}get(ge,he){return ge===vn?this.route:ge===Ao?this.childContexts:this.parent.get(ge,he)}}let ns=(()=>{class Se{}return Se.\u0275fac=function(he){return new(he||Se)},Se.\u0275cmp=i.Xpm({type:Se,selectors:[["ng-component"]],decls:1,vars:0,template:function(he,Be){1&he&&i._UZ(0,"router-outlet")},directives:[ts],encapsulation:2}),Se})();function Vo(Se,ge=""){for(let he=0;he<Se.length;he++){const Be=Se[he];Rs(Be,xi(ge,Be))}}function Rs(Se,ge){Se.children&&Vo(Se.children,ge)}function xi(Se,ge){return ge?Se||ge.path?Se&&!ge.path?`${Se}/`:!Se&&ge.path?ge.path:`${Se}/${ge.path}`:"":Se}function Ui(Se){const ge=Se.children&&Se.children.map(Ui),he=ge?Object.assign(Object.assign({},Se),{children:ge}):Object.assign({},Se);return!he.component&&(ge||he.loadChildren)&&he.outlet&&he.outlet!==$&&(he.component=ns),he}function wi(Se){return Se.outlet||$}function yo(Se,ge){const he=Se.filter(Be=>wi(Be)===ge);return he.push(...Se.filter(Be=>wi(Be)!==ge)),he}const us={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Go(Se,ge,he){var Be;if(""===ge.path)return"full"===ge.pathMatch&&(Se.hasChildren()||he.length>0)?Object.assign({},us):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const ft=(ge.matcher||st)(he,Se,ge);if(!ft)return Object.assign({},us);const St={};_t(ft.posParams,(fn,qn)=>{St[qn]=fn.path});const Ut=ft.consumed.length>0?Object.assign(Object.assign({},St),ft.consumed[ft.consumed.length-1].parameters):St;return{matched:!0,consumedSegments:ft.consumed,lastChild:ft.consumed.length,parameters:Ut,positionalParamSegments:null!==(Be=ft.posParams)&&void 0!==Be?Be:{}}}function Eo(Se,ge,he,Be,ze="corrected"){if(he.length>0&&function Ke(Se,ge,he){return he.some(Be=>Bt(Se,ge,Be)&&wi(Be)!==$)}(Se,he,Be)){const St=new mt(ge,function lt(Se,ge,he,Be){const ze={};ze[$]=Be,Be._sourceSegment=Se,Be._segmentIndexShift=ge.length;for(const ft of he)if(""===ft.path&&wi(ft)!==$){const St=new mt([],{});St._sourceSegment=Se,St._segmentIndexShift=ge.length,ze[wi(ft)]=St}return ze}(Se,ge,Be,new mt(he,Se.children)));return St._sourceSegment=Se,St._segmentIndexShift=ge.length,{segmentGroup:St,slicedSegments:[]}}if(0===he.length&&function dt(Se,ge,he){return he.some(Be=>Bt(Se,ge,Be))}(Se,he,Be)){const St=new mt(Se.segments,function Ve(Se,ge,he,Be,ze,ft){const St={};for(const Ut of Be)if(Bt(Se,he,Ut)&&!ze[wi(Ut)]){const fn=new mt([],{});fn._sourceSegment=Se,fn._segmentIndexShift="legacy"===ft?Se.segments.length:ge.length,St[wi(Ut)]=fn}return Object.assign(Object.assign({},ze),St)}(Se,ge,he,Be,Se.children,ze));return St._sourceSegment=Se,St._segmentIndexShift=ge.length,{segmentGroup:St,slicedSegments:he}}const ft=new mt(Se.segments,Se.children);return ft._sourceSegment=Se,ft._segmentIndexShift=ge.length,{segmentGroup:ft,slicedSegments:he}}function Bt(Se,ge,he){return(!(Se.hasChildren()||ge.length>0)||"full"!==he.pathMatch)&&""===he.path}function hn(Se,ge,he,Be){return!!(wi(Se)===Be||Be!==$&&Bt(ge,he,Se))&&("**"===Se.path||Go(ge,Se,he).matched)}function _n(Se,ge,he){return 0===ge.length&&!Se.children[he]}class zn{constructor(ge){this.segmentGroup=ge||null}}class Zr{constructor(ge){this.urlTree=ge}}function Dr(Se){return new R.y(ge=>ge.error(new zn(Se)))}function Tr(Se){return new R.y(ge=>ge.error(new Zr(Se)))}function Sr(Se){return new R.y(ge=>ge.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${Se}'`)))}class jr{constructor(ge,he,Be,ze,ft){this.configLoader=he,this.urlSerializer=Be,this.urlTree=ze,this.config=ft,this.allowRedirects=!0,this.ngModule=ge.get(i.h0i)}apply(){const ge=Eo(this.urlTree.root,[],[],this.config).segmentGroup,he=new mt(ge.segments,ge.children);return this.expandSegmentGroup(this.ngModule,this.config,he,$).pipe((0,de.U)(ft=>this.createUrlTree(Ri(ft),this.urlTree.queryParams,this.urlTree.fragment))).pipe(E(ft=>{if(ft instanceof Zr)return this.allowRedirects=!1,this.match(ft.urlTree);throw ft instanceof zn?this.noMatchError(ft):ft}))}match(ge){return this.expandSegmentGroup(this.ngModule,this.config,ge.root,$).pipe((0,de.U)(ze=>this.createUrlTree(Ri(ze),ge.queryParams,ge.fragment))).pipe(E(ze=>{throw ze instanceof zn?this.noMatchError(ze):ze}))}noMatchError(ge){return new Error(`Cannot match any routes. URL Segment: '${ge.segmentGroup}'`)}createUrlTree(ge,he,Be){const ze=ge.segments.length>0?new mt([],{[$]:ge}):ge;return new Qe(ze,he,Be)}expandSegmentGroup(ge,he,Be,ze){return 0===Be.segments.length&&Be.hasChildren()?this.expandChildren(ge,he,Be).pipe((0,de.U)(ft=>new mt([],ft))):this.expandSegment(ge,Be,he,Be.segments,ze,!0)}expandChildren(ge,he,Be){const ze=[];for(const ft of Object.keys(Be.children))"primary"===ft?ze.unshift(ft):ze.push(ft);return(0,_.D)(ze).pipe((0,me.b)(ft=>{const St=Be.children[ft],Ut=yo(he,ft);return this.expandSegmentGroup(ge,Ut,St,ft).pipe((0,de.U)(fn=>({segment:fn,outlet:ft})))}),S((ft,St)=>(ft[St.outlet]=St.segment,ft),{}),function be(Se,ge){const he=arguments.length>=2;return Be=>Be.pipe(Se?(0,A.h)((ze,ft)=>Se(ze,ft,Be)):ue.y,I(1),he?fe(ge):H(()=>new C))}())}expandSegment(ge,he,Be,ze,ft,St){return(0,_.D)(Be).pipe((0,me.b)(Ut=>this.expandSegmentAgainstRoute(ge,he,Be,Ut,ze,ft,St).pipe(E(qn=>{if(qn instanceof zn)return(0,b.of)(null);throw qn}))),se(Ut=>!!Ut),E((Ut,fn)=>{if(Ut instanceof C||"EmptyError"===Ut.name){if(_n(he,ze,ft))return(0,b.of)(new mt([],{}));throw new zn(he)}throw Ut}))}expandSegmentAgainstRoute(ge,he,Be,ze,ft,St,Ut){return hn(ze,he,ft,St)?void 0===ze.redirectTo?this.matchSegmentAgainstRoute(ge,he,ze,ft,St):Ut&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(ge,he,Be,ze,ft,St):Dr(he):Dr(he)}expandSegmentAgainstRouteUsingRedirect(ge,he,Be,ze,ft,St){return"**"===ze.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(ge,Be,ze,St):this.expandRegularSegmentAgainstRouteUsingRedirect(ge,he,Be,ze,ft,St)}expandWildCardWithParamsAgainstRouteUsingRedirect(ge,he,Be,ze){const ft=this.applyRedirectCommands([],Be.redirectTo,{});return Be.redirectTo.startsWith("/")?Tr(ft):this.lineralizeSegments(Be,ft).pipe((0,xe.z)(St=>{const Ut=new mt(St,{});return this.expandSegment(ge,Ut,he,St,ze,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(ge,he,Be,ze,ft,St){const{matched:Ut,consumedSegments:fn,lastChild:qn,positionalParamSegments:wr}=Go(he,ze,ft);if(!Ut)return Dr(he);const lr=this.applyRedirectCommands(fn,ze.redirectTo,wr);return ze.redirectTo.startsWith("/")?Tr(lr):this.lineralizeSegments(ze,lr).pipe((0,xe.z)(Jr=>this.expandSegment(ge,he,Be,Jr.concat(ft.slice(qn)),St,!1)))}matchSegmentAgainstRoute(ge,he,Be,ze,ft){if("**"===Be.path)return Be.loadChildren?(Be._loadedConfig?(0,b.of)(Be._loadedConfig):this.configLoader.load(ge.injector,Be)).pipe((0,de.U)(Jr=>(Be._loadedConfig=Jr,new mt(ze,{})))):(0,b.of)(new mt(ze,{}));const{matched:St,consumedSegments:Ut,lastChild:fn}=Go(he,Be,ze);if(!St)return Dr(he);const qn=ze.slice(fn);return this.getChildConfig(ge,Be,ze).pipe((0,xe.z)(lr=>{const Jr=lr.module,Qr=lr.routes,{segmentGroup:Ro,slicedSegments:Wo}=Eo(he,Ut,qn,Qr),fs=new mt(Ro.segments,Ro.children);if(0===Wo.length&&fs.hasChildren())return this.expandChildren(Jr,Qr,fs).pipe((0,de.U)(Bs=>new mt(Ut,Bs)));if(0===Qr.length&&0===Wo.length)return(0,b.of)(new mt(Ut,{}));const hs=wi(Be)===ft;return this.expandSegment(Jr,fs,Qr,Wo,hs?$:ft,!0).pipe((0,de.U)(lo=>new mt(Ut.concat(lo.segments),lo.children)))}))}getChildConfig(ge,he,Be){return he.children?(0,b.of)(new ln(he.children,ge)):he.loadChildren?void 0!==he._loadedConfig?(0,b.of)(he._loadedConfig):this.runCanLoadGuards(ge.injector,he,Be).pipe((0,xe.z)(ze=>ze?this.configLoader.load(ge.injector,he).pipe((0,de.U)(ft=>(he._loadedConfig=ft,ft))):function gi(Se){return new R.y(ge=>ge.error(Oe(`Cannot load children because the guard of the route "path: '${Se.path}'" returned false`)))}(he))):(0,b.of)(new ln([],ge))}runCanLoadGuards(ge,he,Be){const ze=he.canLoad;if(!ze||0===ze.length)return(0,b.of)(!0);const ft=ze.map(St=>{const Ut=ge.get(St);let fn;if(function dr(Se){return Se&&xn(Se.canLoad)}(Ut))fn=Ut.canLoad(he,Be);else{if(!xn(Ut))throw new Error("Invalid CanLoad guard");fn=Ut(he,Be)}return At(fn)});return(0,b.of)(ft).pipe(Bi(),(0,_e.b)(St=>{if(!rr(St))return;const Ut=Oe(`Redirecting to "${this.urlSerializer.serialize(St)}"`);throw Ut.url=St,Ut}),(0,de.U)(St=>!0===St))}lineralizeSegments(ge,he){let Be=[],ze=he.root;for(;;){if(Be=Be.concat(ze.segments),0===ze.numberOfChildren)return(0,b.of)(Be);if(ze.numberOfChildren>1||!ze.children[$])return Sr(ge.redirectTo);ze=ze.children[$]}}applyRedirectCommands(ge,he,Be){return this.applyRedirectCreatreUrlTree(he,this.urlSerializer.parse(he),ge,Be)}applyRedirectCreatreUrlTree(ge,he,Be,ze){const ft=this.createSegmentGroup(ge,he.root,Be,ze);return new Qe(ft,this.createQueryParams(he.queryParams,this.urlTree.queryParams),he.fragment)}createQueryParams(ge,he){const Be={};return _t(ge,(ze,ft)=>{if("string"==typeof ze&&ze.startsWith(":")){const Ut=ze.substring(1);Be[ft]=he[Ut]}else Be[ft]=ze}),Be}createSegmentGroup(ge,he,Be,ze){const ft=this.createSegments(ge,he.segments,Be,ze);let St={};return _t(he.children,(Ut,fn)=>{St[fn]=this.createSegmentGroup(ge,Ut,Be,ze)}),new mt(ft,St)}createSegments(ge,he,Be,ze){return he.map(ft=>ft.path.startsWith(":")?this.findPosParam(ge,ft,ze):this.findOrReturn(ft,Be))}findPosParam(ge,he,Be){const ze=Be[he.path.substring(1)];if(!ze)throw new Error(`Cannot redirect to '${ge}'. Cannot find '${he.path}'.`);return ze}findOrReturn(ge,he){let Be=0;for(const ze of he){if(ze.path===ge.path)return he.splice(Be),ze;Be++}return ge}}function Ri(Se){const ge={};for(const Be of Object.keys(Se.children)){const ft=Ri(Se.children[Be]);(ft.segments.length>0||ft.hasChildren())&&(ge[Be]=ft)}return function xo(Se){if(1===Se.numberOfChildren&&Se.children[$]){const ge=Se.children[$];return new mt(Se.segments.concat(ge.segments),ge.children)}return Se}(new mt(Se.segments,ge))}class vi{constructor(ge){this.path=ge,this.route=this.path[this.path.length-1]}}class Oo{constructor(ge,he){this.component=ge,this.route=he}}function Ye(Se,ge,he){const Be=Se._root;return un(Be,ge?ge._root:null,he,[Be.value])}function we(Se,ge,he){const Be=function ht(Se){if(!Se)return null;for(let ge=Se.parent;ge;ge=ge.parent){const he=ge.routeConfig;if(he&&he._loadedConfig)return he._loadedConfig}return null}(ge);return(Be?Be.module.injector:he).get(Se)}function un(Se,ge,he,Be,ze={canDeactivateChecks:[],canActivateChecks:[]}){const ft=qt(ge);return Se.children.forEach(St=>{(function er(Se,ge,he,Be,ze={canDeactivateChecks:[],canActivateChecks:[]}){const ft=Se.value,St=ge?ge.value:null,Ut=he?he.getContext(Se.value.outlet):null;if(St&&ft.routeConfig===St.routeConfig){const fn=function Kr(Se,ge,he){if("function"==typeof he)return he(Se,ge);switch(he){case"pathParamsChange":return!Wt(Se.url,ge.url);case"pathParamsOrQueryParamsChange":return!Wt(Se.url,ge.url)||!ct(Se.queryParams,ge.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Er(Se,ge)||!ct(Se.queryParams,ge.queryParams);default:return!Er(Se,ge)}}(St,ft,ft.routeConfig.runGuardsAndResolvers);fn?ze.canActivateChecks.push(new vi(Be)):(ft.data=St.data,ft._resolvedData=St._resolvedData),un(Se,ge,ft.component?Ut?Ut.children:null:he,Be,ze),fn&&Ut&&Ut.outlet&&Ut.outlet.isActivated&&ze.canDeactivateChecks.push(new Oo(Ut.outlet.component,St))}else St&&pi(ge,Ut,ze),ze.canActivateChecks.push(new vi(Be)),un(Se,null,ft.component?Ut?Ut.children:null:he,Be,ze)})(St,ft[St.value.outlet],he,Be.concat([St.value]),ze),delete ft[St.value.outlet]}),_t(ft,(St,Ut)=>pi(St,he.getContext(Ut),ze)),ze}function pi(Se,ge,he){const Be=qt(Se),ze=Se.value;_t(Be,(ft,St)=>{pi(ft,ze.component?ge?ge.children.getContext(St):null:ge,he)}),he.canDeactivateChecks.push(new Oo(ze.component&&ge&&ge.outlet&&ge.outlet.isActivated?ge.outlet.component:null,ze))}class Ho{}function Da(Se){return new R.y(ge=>ge.error(Se))}class ju{constructor(ge,he,Be,ze,ft,St){this.rootComponentType=ge,this.config=he,this.urlTree=Be,this.url=ze,this.paramsInheritanceStrategy=ft,this.relativeLinkResolution=St}recognize(){const ge=Eo(this.urlTree.root,[],[],this.config.filter(St=>void 0===St.redirectTo),this.relativeLinkResolution).segmentGroup,he=this.processSegmentGroup(this.config,ge,$);if(null===he)return null;const Be=new ar([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$,this.rootComponentType,null,this.urlTree.root,-1,{}),ze=new Gt(Be,he),ft=new ur(this.url,ze);return this.inheritParamsAndData(ft._root),ft}inheritParamsAndData(ge){const he=ge.value,Be=Rn(he,this.paramsInheritanceStrategy);he.params=Object.freeze(Be.params),he.data=Object.freeze(Be.data),ge.children.forEach(ze=>this.inheritParamsAndData(ze))}processSegmentGroup(ge,he,Be){return 0===he.segments.length&&he.hasChildren()?this.processChildren(ge,he):this.processSegment(ge,he,he.segments,Be)}processChildren(ge,he){const Be=[];for(const ft of Object.keys(he.children)){const St=he.children[ft],Ut=yo(ge,ft),fn=this.processSegmentGroup(Ut,St,ft);if(null===fn)return null;Be.push(...fn)}const ze=Zo(Be);return function Pa(Se){Se.sort((ge,he)=>ge.value.outlet===$?-1:he.value.outlet===$?1:ge.value.outlet.localeCompare(he.value.outlet))}(ze),ze}processSegment(ge,he,Be,ze){for(const ft of ge){const St=this.processSegmentAgainstRoute(ft,he,Be,ze);if(null!==St)return St}return _n(he,Be,ze)?[]:null}processSegmentAgainstRoute(ge,he,Be,ze){if(ge.redirectTo||!hn(ge,he,Be,ze))return null;let ft,St=[],Ut=[];if("**"===ge.path){const Qr=Be.length>0?Et(Be).parameters:{};ft=new ar(Be,Qr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bl(ge),wi(ge),ge.component,ge,bs(he),Ko(he)+Be.length,el(ge))}else{const Qr=Go(he,ge,Be);if(!Qr.matched)return null;St=Qr.consumedSegments,Ut=Be.slice(Qr.lastChild),ft=new ar(St,Qr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bl(ge),wi(ge),ge.component,ge,bs(he),Ko(he)+St.length,el(ge))}const fn=function Aa(Se){return Se.children?Se.children:Se.loadChildren?Se._loadedConfig.routes:[]}(ge),{segmentGroup:qn,slicedSegments:wr}=Eo(he,St,Ut,fn.filter(Qr=>void 0===Qr.redirectTo),this.relativeLinkResolution);if(0===wr.length&&qn.hasChildren()){const Qr=this.processChildren(fn,qn);return null===Qr?null:[new Gt(ft,Qr)]}if(0===fn.length&&0===wr.length)return[new Gt(ft,[])];const lr=wi(ge)===ze,Jr=this.processSegment(fn,qn,wr,lr?$:ze);return null===Jr?null:[new Gt(ft,Jr)]}}function Ji(Se){const ge=Se.value.routeConfig;return ge&&""===ge.path&&void 0===ge.redirectTo}function Zo(Se){const ge=[],he=new Set;for(const Be of Se){if(!Ji(Be)){ge.push(Be);continue}const ze=ge.find(ft=>Be.value.routeConfig===ft.value.routeConfig);void 0!==ze?(ze.children.push(...Be.children),he.add(ze)):ge.push(Be)}for(const Be of he){const ze=Zo(Be.children);ge.push(new Gt(Be.value,ze))}return ge.filter(Be=>!he.has(Be))}function bs(Se){let ge=Se;for(;ge._sourceSegment;)ge=ge._sourceSegment;return ge}function Ko(Se){let ge=Se,he=ge._segmentIndexShift?ge._segmentIndexShift:0;for(;ge._sourceSegment;)ge=ge._sourceSegment,he+=ge._segmentIndexShift?ge._segmentIndexShift:0;return he-1}function Bl(Se){return Se.data||{}}function el(Se){return Se.resolve||{}}function rl(Se){return[...Object.keys(Se),...Object.getOwnPropertySymbols(Se)]}function ol(Se){return(0,Q.w)(ge=>{const he=Se(ge);return he?(0,_.D)(he).pipe((0,de.U)(()=>ge)):(0,b.of)(ge)})}class jl extends class Ia{shouldDetach(ge){return!1}store(ge,he){}shouldAttach(ge){return!1}retrieve(ge){return null}shouldReuseRoute(ge,he){return ge.routeConfig===he.routeConfig}}{}const xa=new i.OlP("ROUTES");class sl{constructor(ge,he,Be,ze){this.injector=ge,this.compiler=he,this.onLoadStartListener=Be,this.onLoadEndListener=ze}load(ge,he){if(he._loader$)return he._loader$;this.onLoadStartListener&&this.onLoadStartListener(he);const ze=this.loadModuleFactory(he.loadChildren).pipe((0,de.U)(ft=>{this.onLoadEndListener&&this.onLoadEndListener(he);const St=ft.create(ge);return new ln(tt(St.injector.get(xa,void 0,i.XFs.Self|i.XFs.Optional)).map(Ui),St)}),E(ft=>{throw he._loader$=void 0,ft}));return he._loader$=new p(ze,()=>new P.x).pipe(u()),he._loader$}loadModuleFactory(ge){return At(ge()).pipe((0,xe.z)(he=>he instanceof i.YKP?(0,b.of)(he):(0,_.D)(this.compiler.compileModuleAsync(he))))}}class Ns{shouldProcessUrl(ge){return!0}extract(ge){return ge}merge(ge,he){return ge}}function Hc(Se){throw Se}function Zc(Se,ge,he){return ge.parse("/")}function Ni(Se,ge){return(0,b.of)(null)}const ds={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let no=(()=>{class Se{constructor(he,Be,ze,ft,St,Ut,fn){this.rootComponentType=he,this.urlSerializer=Be,this.rootContexts=ze,this.location=ft,this.config=fn,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new P.x,this.errorHandler=Hc,this.malformedUriErrorHandler=Zc,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Ni,afterPreactivation:Ni},this.urlHandlingStrategy=new Ns,this.routeReuseStrategy=new jl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=St.get(i.h0i),this.console=St.get(i.c2e);const lr=St.get(i.R0b);this.isNgZoneEnabled=lr instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(fn),this.currentUrlTree=function Pt(){return new Qe(new mt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sl(St,Ut,Jr=>this.triggerEvent(new ce(Jr)),Jr=>this.triggerEvent(new De(Jr))),this.routerState=Nn(this.currentUrlTree,this.rootComponentType),this.transitions=new k.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var he;return null===(he=this.location.getState())||void 0===he?void 0:he.\u0275routerPageId}setupNavigations(he){const Be=this.events;return he.pipe((0,A.h)(ze=>0!==ze.id),(0,de.U)(ze=>Object.assign(Object.assign({},ze),{extractedUrl:this.urlHandlingStrategy.extract(ze.rawUrl)})),(0,Q.w)(ze=>{let ft=!1,St=!1;return(0,b.of)(ze).pipe((0,_e.b)(Ut=>{this.currentNavigation={id:Ut.id,initialUrl:Ut.currentRawUrl,extractedUrl:Ut.extractedUrl,trigger:Ut.source,extras:Ut.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Q.w)(Ut=>{const fn=this.browserUrlTree.toString(),qn=!this.navigated||Ut.extractedUrl.toString()!==fn||fn!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qn)&&this.urlHandlingStrategy.shouldProcessUrl(Ut.rawUrl))return Oa(Ut.source)&&(this.browserUrlTree=Ut.extractedUrl),(0,b.of)(Ut).pipe((0,Q.w)(lr=>{const Jr=this.transitions.getValue();return Be.next(new Ue(lr.id,this.serializeUrl(lr.extractedUrl),lr.source,lr.restoredState)),Jr!==this.transitions.getValue()?O.E:Promise.resolve(lr)}),function To(Se,ge,he,Be){return(0,Q.w)(ze=>function Ur(Se,ge,he,Be,ze){return new jr(Se,ge,he,Be,ze).apply()}(Se,ge,he,ze.extractedUrl,Be).pipe((0,de.U)(ft=>Object.assign(Object.assign({},ze),{urlAfterRedirects:ft}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_e.b)(lr=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:lr.urlAfterRedirects})}),function Vc(Se,ge,he,Be,ze){return(0,xe.z)(ft=>function Uu(Se,ge,he,Be,ze="emptyOnly",ft="legacy"){try{const St=new ju(Se,ge,he,Be,ze,ft).recognize();return null===St?Da(new Ho):(0,b.of)(St)}catch(St){return Da(St)}}(Se,ge,ft.urlAfterRedirects,he(ft.urlAfterRedirects),Be,ze).pipe((0,de.U)(St=>Object.assign(Object.assign({},ft),{targetSnapshot:St}))))}(this.rootComponentType,this.config,lr=>this.serializeUrl(lr),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_e.b)(lr=>{if("eager"===this.urlUpdateStrategy){if(!lr.extras.skipLocationChange){const Qr=this.urlHandlingStrategy.merge(lr.urlAfterRedirects,lr.rawUrl);this.setBrowserUrl(Qr,lr)}this.browserUrlTree=lr.urlAfterRedirects}const Jr=new He(lr.id,this.serializeUrl(lr.extractedUrl),this.serializeUrl(lr.urlAfterRedirects),lr.targetSnapshot);Be.next(Jr)}));if(qn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Jr,extractedUrl:Qr,source:Ro,restoredState:Wo,extras:fs}=Ut,hs=new Ue(Jr,this.serializeUrl(Qr),Ro,Wo);Be.next(hs);const gs=Nn(Qr,this.rootComponentType).snapshot;return(0,b.of)(Object.assign(Object.assign({},Ut),{targetSnapshot:gs,urlAfterRedirects:Qr,extras:Object.assign(Object.assign({},fs),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ut.rawUrl,Ut.resolve(null),O.E}),ol(Ut=>{const{targetSnapshot:fn,id:qn,extractedUrl:wr,rawUrl:lr,extras:{skipLocationChange:Jr,replaceUrl:Qr}}=Ut;return this.hooks.beforePreactivation(fn,{navigationId:qn,appliedUrlTree:wr,rawUrlTree:lr,skipLocationChange:!!Jr,replaceUrl:!!Qr})}),(0,_e.b)(Ut=>{const fn=new Le(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot);this.triggerEvent(fn)}),(0,de.U)(Ut=>Object.assign(Object.assign({},Ut),{guards:Ye(Ut.targetSnapshot,Ut.currentSnapshot,this.rootContexts)})),function wo(Se,ge){return(0,xe.z)(he=>{const{targetSnapshot:Be,currentSnapshot:ze,guards:{canActivateChecks:ft,canDeactivateChecks:St}}=he;return 0===St.length&&0===ft.length?(0,b.of)(Object.assign(Object.assign({},he),{guardsResult:!0})):function Cn(Se,ge,he,Be){return(0,_.D)(Se).pipe((0,xe.z)(ze=>function ji(Se,ge,he,Be,ze){const ft=ge&&ge.routeConfig?ge.routeConfig.canDeactivate:null;if(!ft||0===ft.length)return(0,b.of)(!0);const St=ft.map(Ut=>{const fn=we(Ut,ge,ze);let qn;if(function Br(Se){return Se&&xn(Se.canDeactivate)}(fn))qn=At(fn.canDeactivate(Se,ge,he,Be));else{if(!xn(fn))throw new Error("Invalid CanDeactivate guard");qn=At(fn(Se,ge,he,Be))}return qn.pipe(se())});return(0,b.of)(St).pipe(Bi())}(ze.component,ze.route,he,ge,Be)),se(ze=>!0!==ze,!0))}(St,Be,ze,Se).pipe((0,xe.z)(Ut=>Ut&&function Xn(Se){return"boolean"==typeof Se}(Ut)?function wt(Se,ge,he,Be){return(0,_.D)(ge).pipe((0,me.b)(ze=>(0,B.z)(function Gn(Se,ge){return null!==Se&&ge&&ge(new le(Se)),(0,b.of)(!0)}(ze.route.parent,Be),function An(Se,ge){return null!==Se&&ge&&ge(new z(Se)),(0,b.of)(!0)}(ze.route,Be),function Wr(Se,ge,he){const Be=ge[ge.length-1],ft=ge.slice(0,ge.length-1).reverse().map(St=>function Ne(Se){const ge=Se.routeConfig?Se.routeConfig.canActivateChild:null;return ge&&0!==ge.length?{node:Se,guards:ge}:null}(St)).filter(St=>null!==St).map(St=>j(()=>{const Ut=St.guards.map(fn=>{const qn=we(fn,St.node,he);let wr;if(function kr(Se){return Se&&xn(Se.canActivateChild)}(qn))wr=At(qn.canActivateChild(Be,Se));else{if(!xn(qn))throw new Error("Invalid CanActivateChild guard");wr=At(qn(Be,Se))}return wr.pipe(se())});return(0,b.of)(Ut).pipe(Bi())}));return(0,b.of)(ft).pipe(Bi())}(Se,ze.path,he),function Vr(Se,ge,he){const Be=ge.routeConfig?ge.routeConfig.canActivate:null;if(!Be||0===Be.length)return(0,b.of)(!0);const ze=Be.map(ft=>j(()=>{const St=we(ft,ge,he);let Ut;if(function Or(Se){return Se&&xn(Se.canActivate)}(St))Ut=At(St.canActivate(ge,Se));else{if(!xn(St))throw new Error("Invalid CanActivate guard");Ut=At(St(ge,Se))}return Ut.pipe(se())}));return(0,b.of)(ze).pipe(Bi())}(Se,ze.route,he))),se(ze=>!0!==ze,!0))}(Be,ft,Se,ge):(0,b.of)(Ut)),(0,de.U)(Ut=>Object.assign(Object.assign({},he),{guardsResult:Ut})))})}(this.ngModule.injector,Ut=>this.triggerEvent(Ut)),(0,_e.b)(Ut=>{if(rr(Ut.guardsResult)){const qn=Oe(`Redirecting to "${this.serializeUrl(Ut.guardsResult)}"`);throw qn.url=Ut.guardsResult,qn}const fn=new ye(Ut.id,this.serializeUrl(Ut.extractedUrl),this.serializeUrl(Ut.urlAfterRedirects),Ut.targetSnapshot,!!Ut.guardsResult);this.triggerEvent(fn)}),(0,A.h)(Ut=>!!Ut.guardsResult||(this.restoreHistory(Ut),this.cancelNavigationTransition(Ut,""),!1)),ol(Ut=>{if(Ut.guards.canActivateChecks.length)return(0,b.of)(Ut).pipe((0,_e.b)(fn=>{const qn=new ae(fn.id,this.serializeUrl(fn.extractedUrl),this.serializeUrl(fn.urlAfterRedirects),fn.targetSnapshot);this.triggerEvent(qn)}),(0,Q.w)(fn=>{let qn=!1;return(0,b.of)(fn).pipe(function Gc(Se,ge){return(0,xe.z)(he=>{const{targetSnapshot:Be,guards:{canActivateChecks:ze}}=he;if(!ze.length)return(0,b.of)(he);let ft=0;return(0,_.D)(ze).pipe((0,me.b)(St=>function tl(Se,ge,he,Be){return function nl(Se,ge,he,Be){const ze=rl(Se);if(0===ze.length)return(0,b.of)({});const ft={};return(0,_.D)(ze).pipe((0,xe.z)(St=>function il(Se,ge,he,Be){const ze=we(Se,ge,Be);return At(ze.resolve?ze.resolve(ge,he):ze(ge,he))}(Se[St],ge,he,Be).pipe((0,_e.b)(Ut=>{ft[St]=Ut}))),I(1),(0,xe.z)(()=>rl(ft).length===ze.length?(0,b.of)(ft):O.E))}(Se._resolve,Se,ge,Be).pipe((0,de.U)(ft=>(Se._resolvedData=ft,Se.data=Object.assign(Object.assign({},Se.data),Rn(Se,he).resolve),null)))}(St.route,Be,Se,ge)),(0,_e.b)(()=>ft++),I(1),(0,xe.z)(St=>ft===ze.length?(0,b.of)(he):O.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_e.b)({next:()=>qn=!0,complete:()=>{qn||(this.restoreHistory(fn),this.cancelNavigationTransition(fn,"At least one route resolver didn't emit any value."))}}))}),(0,_e.b)(fn=>{const qn=new W(fn.id,this.serializeUrl(fn.extractedUrl),this.serializeUrl(fn.urlAfterRedirects),fn.targetSnapshot);this.triggerEvent(qn)}))}),ol(Ut=>{const{targetSnapshot:fn,id:qn,extractedUrl:wr,rawUrl:lr,extras:{skipLocationChange:Jr,replaceUrl:Qr}}=Ut;return this.hooks.afterPreactivation(fn,{navigationId:qn,appliedUrlTree:wr,rawUrlTree:lr,skipLocationChange:!!Jr,replaceUrl:!!Qr})}),(0,de.U)(Ut=>{const fn=function Ii(Se,ge,he){const Be=Si(Se,ge._root,he?he._root:void 0);return new bn(Be,ge)}(this.routeReuseStrategy,Ut.targetSnapshot,Ut.currentRouterState);return Object.assign(Object.assign({},Ut),{targetRouterState:fn})}),(0,_e.b)(Ut=>{this.currentUrlTree=Ut.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ut.urlAfterRedirects,Ut.rawUrl),this.routerState=Ut.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ut.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ut),this.browserUrlTree=Ut.urlAfterRedirects)}),((Se,ge,he)=>(0,de.U)(Be=>(new ao(ge,Be.targetRouterState,Be.currentRouterState,he).activate(Se),Be)))(this.rootContexts,this.routeReuseStrategy,Ut=>this.triggerEvent(Ut)),(0,_e.b)({next(){ft=!0},complete(){ft=!0}}),function V(Se){return(0,D.e)((ge,he)=>{try{ge.subscribe(he)}finally{he.add(Se)}})}(()=>{var Ut;ft||St||this.cancelNavigationTransition(ze,`Navigation ID ${ze.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ut=this.currentNavigation)||void 0===Ut?void 0:Ut.id)===ze.id&&(this.currentNavigation=null)}),E(Ut=>{if(St=!0,function Ze(Se){return Se&&Se[Ce]}(Ut)){const fn=rr(Ut.url);fn||(this.navigated=!0,this.restoreHistory(ze,!0));const qn=new je(ze.id,this.serializeUrl(ze.extractedUrl),Ut.message);Be.next(qn),fn?setTimeout(()=>{const wr=this.urlHandlingStrategy.merge(Ut.url,this.rawUrlTree),lr={skipLocationChange:ze.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oa(ze.source)};this.scheduleNavigation(wr,"imperative",null,lr,{resolve:ze.resolve,reject:ze.reject,promise:ze.promise})},0):ze.resolve(!1)}else{this.restoreHistory(ze,!0);const fn=new Pe(ze.id,this.serializeUrl(ze.extractedUrl),Ut);Be.next(fn);try{ze.resolve(this.errorHandler(Ut))}catch(qn){ze.reject(qn)}}return O.E}))}))}resetRootComponentType(he){this.rootComponentType=he,this.routerState.root.component=this.rootComponentType}setTransition(he){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),he))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(he=>{const Be="popstate"===he.type?"popstate":"hashchange";"popstate"===Be&&setTimeout(()=>{var ze;const ft={replaceUrl:!0},St=(null===(ze=he.state)||void 0===ze?void 0:ze.navigationId)?he.state:null;if(St){const fn=Object.assign({},St);delete fn.navigationId,delete fn.\u0275routerPageId,0!==Object.keys(fn).length&&(ft.state=fn)}const Ut=this.parseUrl(he.url);this.scheduleNavigation(Ut,Be,St,ft)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(he){this.events.next(he)}resetConfig(he){Vo(he),this.config=he.map(Ui),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(he,Be={}){const{relativeTo:ze,queryParams:ft,fragment:St,queryParamsHandling:Ut,preserveFragment:fn}=Be,qn=ze||this.routerState.root,wr=fn?this.currentUrlTree.fragment:St;let lr=null;switch(Ut){case"merge":lr=Object.assign(Object.assign({},this.currentUrlTree.queryParams),ft);break;case"preserve":lr=this.currentUrlTree.queryParams;break;default:lr=ft||null}return null!==lr&&(lr=this.removeEmptyProps(lr)),function Yi(Se,ge,he,Be,ze){if(0===he.length)return Lr(ge.root,ge.root,ge,Be,ze);const ft=function mo(Se){if("string"==typeof Se[0]&&1===Se.length&&"/"===Se[0])return new eo(!0,0,Se);let ge=0,he=!1;const Be=Se.reduce((ze,ft,St)=>{if("object"==typeof ft&&null!=ft){if(ft.outlets){const Ut={};return _t(ft.outlets,(fn,qn)=>{Ut[qn]="string"==typeof fn?fn.split("/"):fn}),[...ze,{outlets:Ut}]}if(ft.segmentPath)return[...ze,ft.segmentPath]}return"string"!=typeof ft?[...ze,ft]:0===St?(ft.split("/").forEach((Ut,fn)=>{0==fn&&"."===Ut||(0==fn&&""===Ut?he=!0:".."===Ut?ge++:""!=Ut&&ze.push(Ut))}),ze):[...ze,ft]},[]);return new eo(he,ge,Be)}(he);if(ft.toRoot())return Lr(ge.root,new mt([],{}),ge,Be,ze);const St=function _o(Se,ge,he){if(Se.isAbsolute)return new $i(ge.root,!0,0);if(-1===he.snapshot._lastPathIndex){const ft=he.snapshot._urlSegment;return new $i(ft,ft===ge.root,0)}const Be=si(Se.commands[0])?0:1;return function zi(Se,ge,he){let Be=Se,ze=ge,ft=he;for(;ft>ze;){if(ft-=ze,Be=Be.parent,!Be)throw new Error("Invalid number of '../'");ze=Be.segments.length}return new $i(Be,!1,ze-ft)}(he.snapshot._urlSegment,he.snapshot._lastPathIndex+Be,Se.numberOfDoubleDots)}(ft,ge,Se),Ut=St.processChildren?to(St.segmentGroup,St.index,ft.commands):Qo(St.segmentGroup,St.index,ft.commands);return Lr(St.segmentGroup,Ut,ge,Be,ze)}(qn,this.currentUrlTree,he,lr,null!=wr?wr:null)}navigateByUrl(he,Be={skipLocationChange:!1}){const ze=rr(he)?he:this.parseUrl(he),ft=this.urlHandlingStrategy.merge(ze,this.rawUrlTree);return this.scheduleNavigation(ft,"imperative",null,Be)}navigate(he,Be={skipLocationChange:!1}){return function Kc(Se){for(let ge=0;ge<Se.length;ge++){const he=Se[ge];if(null==he)throw new Error(`The requested path contains ${he} segment at index ${ge}`)}}(he),this.navigateByUrl(this.createUrlTree(he,Be),Be)}serializeUrl(he){return this.urlSerializer.serialize(he)}parseUrl(he){let Be;try{Be=this.urlSerializer.parse(he)}catch(ze){Be=this.malformedUriErrorHandler(ze,this.urlSerializer,he)}return Be}isActive(he,Be){let ze;if(ze=!0===Be?Object.assign({},ds):!1===Be?Object.assign({},mi):Be,rr(he))return en(this.currentUrlTree,he,ze);const ft=this.parseUrl(he);return en(this.currentUrlTree,ft,ze)}removeEmptyProps(he){return Object.keys(he).reduce((Be,ze)=>{const ft=he[ze];return null!=ft&&(Be[ze]=ft),Be},{})}processNavigations(){this.navigations.subscribe(he=>{this.navigated=!0,this.lastSuccessfulId=he.id,this.currentPageId=he.targetPageId,this.events.next(new Fe(he.id,this.serializeUrl(he.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,he.resolve(!0)},he=>{this.console.warn(`Unhandled Navigation Error: ${he}`)})}scheduleNavigation(he,Be,ze,ft,St){var Ut,fn,qn;if(this.disposed)return Promise.resolve(!1);const wr=this.transitions.value,lr=Oa(Be)&&wr&&!Oa(wr.source),Jr=wr.rawUrl.toString()===he.toString(),Qr=wr.id===(null===(Ut=this.currentNavigation)||void 0===Ut?void 0:Ut.id);if(lr&&Jr&&Qr)return Promise.resolve(!0);let Wo,fs,hs;St?(Wo=St.resolve,fs=St.reject,hs=St.promise):hs=new Promise((Bs,Us)=>{Wo=Bs,fs=Us});const gs=++this.navigationId;let lo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(ze=this.location.getState()),lo=ze&&ze.\u0275routerPageId?ze.\u0275routerPageId:ft.replaceUrl||ft.skipLocationChange?null!==(fn=this.browserPageId)&&void 0!==fn?fn:0:(null!==(qn=this.browserPageId)&&void 0!==qn?qn:0)+1):lo=0,this.setTransition({id:gs,targetPageId:lo,source:Be,restoredState:ze,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:he,extras:ft,resolve:Wo,reject:fs,promise:hs,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),hs.catch(Bs=>Promise.reject(Bs))}setBrowserUrl(he,Be){const ze=this.urlSerializer.serialize(he),ft=Object.assign(Object.assign({},Be.extras.state),this.generateNgRouterState(Be.id,Be.targetPageId));this.location.isCurrentPathEqualTo(ze)||Be.extras.replaceUrl?this.location.replaceState(ze,"",ft):this.location.go(ze,"",ft)}restoreHistory(he,Be=!1){var ze,ft;if("computed"===this.canceledNavigationResolution){const St=this.currentPageId-he.targetPageId;"popstate"!==he.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(ze=this.currentNavigation)||void 0===ze?void 0:ze.finalUrl)||0===St?this.currentUrlTree===(null===(ft=this.currentNavigation)||void 0===ft?void 0:ft.finalUrl)&&0===St&&(this.resetState(he),this.browserUrlTree=he.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(St)}else"replace"===this.canceledNavigationResolution&&(Be&&this.resetState(he),this.resetUrlToCurrentUrlTree())}resetState(he){this.routerState=he.currentRouterState,this.currentUrlTree=he.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,he.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(he,Be){const ze=new je(he.id,this.serializeUrl(he.extractedUrl),Be);this.triggerEvent(ze),he.resolve(!1)}generateNgRouterState(he,Be){return"computed"===this.canceledNavigationResolution?{navigationId:he,\u0275routerPageId:Be}:{navigationId:he}}}return Se.\u0275fac=function(he){i.$Z()},Se.\u0275prov=i.Yz7({token:Se,factory:Se.\u0275fac}),Se})();function Oa(Se){return"imperative"!==Se}let wa=(()=>{class Se{constructor(he,Be,ze,ft,St){this.router=he,this.route=Be,this.tabIndexAttribute=ze,this.renderer=ft,this.el=St,this.commands=null,this.onChanges=new P.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(he){if(null!=this.tabIndexAttribute)return;const Be=this.renderer,ze=this.el.nativeElement;null!==he?Be.setAttribute(ze,"tabindex",he):Be.removeAttribute(ze,"tabindex")}ngOnChanges(he){this.onChanges.next(this)}set routerLink(he){null!=he?(this.commands=Array.isArray(he)?he:[he],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const he={skipLocationChange:Ls(this.skipLocationChange),replaceUrl:Ls(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,he),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ls(this.preserveFragment)})}}return Se.\u0275fac=function(he){return new(he||Se)(i.Y36(no),i.Y36(vn),i.$8M("tabindex"),i.Y36(i.Qsj),i.Y36(i.SBq))},Se.\u0275dir=i.lG2({type:Se,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(he,Be){1&he&&i.NdJ("click",function(){return Be.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[i.TTD]}),Se})(),Ra=(()=>{class Se{constructor(he,Be,ze){this.router=he,this.route=Be,this.locationStrategy=ze,this.commands=null,this.href=null,this.onChanges=new P.x,this.subscription=he.events.subscribe(ft=>{ft instanceof Fe&&this.updateTargetUrlAndHref()})}set routerLink(he){this.commands=null!=he?Array.isArray(he)?he:[he]:null}ngOnChanges(he){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(he,Be,ze,ft,St){if(0!==he||Be||ze||ft||St||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ut={skipLocationChange:Ls(this.skipLocationChange),replaceUrl:Ls(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ut),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ls(this.preserveFragment)})}}return Se.\u0275fac=function(he){return new(he||Se)(i.Y36(no),i.Y36(vn),i.Y36(Te.S$))},Se.\u0275dir=i.lG2({type:Se,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(he,Be){1&he&&i.NdJ("click",function(ft){return Be.onClick(ft.button,ft.ctrlKey,ft.shiftKey,ft.altKey,ft.metaKey)}),2&he&&i.uIk("target",Be.target)("href",Be.href,i.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[i.TTD]}),Se})();function Ls(Se){return""===Se||!!Se}class La{}class ll{preload(ge,he){return(0,b.of)(null)}}let Wc=(()=>{class Se{constructor(he,Be,ze,ft){this.router=he,this.injector=ze,this.preloadingStrategy=ft,this.loader=new sl(ze,Be,fn=>he.triggerEvent(new ce(fn)),fn=>he.triggerEvent(new De(fn)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,A.h)(he=>he instanceof Fe),(0,me.b)(()=>this.preload())).subscribe(()=>{})}preload(){const he=this.injector.get(i.h0i);return this.processRoutes(he,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(he,Be){const ze=[];for(const ft of Be)if(ft.loadChildren&&!ft.canLoad&&ft._loadedConfig){const St=ft._loadedConfig;ze.push(this.processRoutes(St.module,St.routes))}else ft.loadChildren&&!ft.canLoad?ze.push(this.preloadConfig(he,ft)):ft.children&&ze.push(this.processRoutes(he,ft.children));return(0,_.D)(ze).pipe((0,Ie.J)(),(0,de.U)(ft=>{}))}preloadConfig(he,Be){return this.preloadingStrategy.preload(Be,()=>(Be._loadedConfig?(0,b.of)(Be._loadedConfig):this.loader.load(he.injector,Be)).pipe((0,xe.z)(ft=>(Be._loadedConfig=ft,this.processRoutes(ft.module,ft.routes)))))}}return Se.\u0275fac=function(he){return new(he||Se)(i.LFG(no),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(La))},Se.\u0275prov=i.Yz7({token:Se,factory:Se.\u0275fac}),Se})(),rs=(()=>{class Se{constructor(he,Be,ze={}){this.router=he,this.viewportScroller=Be,this.options=ze,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ze.scrollPositionRestoration=ze.scrollPositionRestoration||"disabled",ze.anchorScrolling=ze.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(he=>{he instanceof Ue?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=he.navigationTrigger,this.restoredId=he.restoredState?he.restoredState.navigationId:0):he instanceof Fe&&(this.lastId=he.id,this.scheduleScrollEvent(he,this.router.parseUrl(he.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(he=>{he instanceof X&&(he.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(he.position):he.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(he.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(he,Be){this.router.triggerEvent(new X(he,"popstate"===this.lastSource?this.store[this.restoredId]:null,Be))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return Se.\u0275fac=function(he){i.$Z()},Se.\u0275prov=i.Yz7({token:Se,factory:Se.\u0275fac}),Se})();const Fs=new i.OlP("ROUTER_CONFIGURATION"),Yc=new i.OlP("ROUTER_FORROOT_GUARD"),ra=[Te.Ye,{provide:pt,useClass:rt},{provide:no,useFactory:function $c(Se,ge,he,Be,ze,ft,St={},Ut,fn){const qn=new no(null,Se,ge,he,Be,ze,tt(ft));return Ut&&(qn.urlHandlingStrategy=Ut),fn&&(qn.routeReuseStrategy=fn),function Zl(Se,ge){Se.errorHandler&&(ge.errorHandler=Se.errorHandler),Se.malformedUriErrorHandler&&(ge.malformedUriErrorHandler=Se.malformedUriErrorHandler),Se.onSameUrlNavigation&&(ge.onSameUrlNavigation=Se.onSameUrlNavigation),Se.paramsInheritanceStrategy&&(ge.paramsInheritanceStrategy=Se.paramsInheritanceStrategy),Se.relativeLinkResolution&&(ge.relativeLinkResolution=Se.relativeLinkResolution),Se.urlUpdateStrategy&&(ge.urlUpdateStrategy=Se.urlUpdateStrategy),Se.canceledNavigationResolution&&(ge.canceledNavigationResolution=Se.canceledNavigationResolution)}(St,qn),St.enableTracing&&qn.events.subscribe(wr=>{var lr,Jr;null===(lr=console.group)||void 0===lr||lr.call(console,`Router Event: ${wr.constructor.name}`),console.log(wr.toString()),console.log(wr),null===(Jr=console.groupEnd)||void 0===Jr||Jr.call(console)}),qn},deps:[pt,Ao,Te.Ye,i.zs3,i.Sil,xa,Fs,[class Vl{},new i.FiY],[class Ul{},new i.FiY]]},Ao,{provide:vn,useFactory:function Fa(Se){return Se.routerState.root},deps:[no]},Wc,ll,class Gl{preload(ge,he){return he().pipe(E(()=>(0,b.of)(null)))}},{provide:Fs,useValue:{enableTracing:!1}}];function ul(){return new i.PXZ("Router",no)}let Hl=(()=>{class Se{constructor(he,Be){}static forRoot(he,Be){return{ngModule:Se,providers:[ra,ia(he),{provide:Yc,useFactory:Gu,deps:[[no,new i.FiY,new i.tp0]]},{provide:Fs,useValue:Be||{}},{provide:Te.S$,useFactory:af,deps:[Te.lw,[new i.tBr(Te.mr),new i.FiY],Fs]},{provide:rs,useFactory:Vu,deps:[no,Te.EM,Fs]},{provide:La,useExisting:Be&&Be.preloadingStrategy?Be.preloadingStrategy:ll},{provide:i.PXZ,multi:!0,useFactory:ul},[oa,{provide:i.ip1,multi:!0,useFactory:Kl,deps:[oa]},{provide:zc,useFactory:Cs,deps:[oa]},{provide:i.tb,multi:!0,useExisting:zc}]]}}static forChild(he){return{ngModule:Se,providers:[ia(he)]}}}return Se.\u0275fac=function(he){return new(he||Se)(i.LFG(Yc,8),i.LFG(no,8))},Se.\u0275mod=i.oAB({type:Se}),Se.\u0275inj=i.cJS({}),Se})();function Vu(Se,ge,he){return he.scrollOffset&&ge.setOffset(he.scrollOffset),new rs(Se,ge,he)}function af(Se,ge,he={}){return he.useHash?new Te.Do(Se,ge):new Te.b0(Se,ge)}function Gu(Se){return"guarded"}function ia(Se){return[{provide:i.deG,multi:!0,useValue:Se},{provide:xa,multi:!0,useValue:Se}]}let oa=(()=>{class Se{constructor(he){this.injector=he,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new P.x}appInitializer(){return this.injector.get(Te.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let Be=null;const ze=new Promise(Ut=>Be=Ut),ft=this.injector.get(no),St=this.injector.get(Fs);return"disabled"===St.initialNavigation?(ft.setUpLocationChangeListener(),Be(!0)):"enabled"===St.initialNavigation||"enabledBlocking"===St.initialNavigation?(ft.hooks.afterPreactivation=()=>this.initNavigation?(0,b.of)(null):(this.initNavigation=!0,Be(!0),this.resultOfPreactivationDone),ft.initialNavigation()):Be(!0),ze})}bootstrapListener(he){const Be=this.injector.get(Fs),ze=this.injector.get(Wc),ft=this.injector.get(rs),St=this.injector.get(no),Ut=this.injector.get(i.z2F);he===Ut.components[0]&&(("enabledNonBlocking"===Be.initialNavigation||void 0===Be.initialNavigation)&&St.initialNavigation(),ze.setUpPreloading(),ft.init(),St.resetRootComponentType(Ut.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return Se.\u0275fac=function(he){return new(he||Se)(i.LFG(i.zs3))},Se.\u0275prov=i.Yz7({token:Se,factory:Se.\u0275fac}),Se})();function Kl(Se){return Se.appInitializer.bind(Se)}function Cs(Se){return Se.bootstrapListener.bind(Se)}const zc=new i.OlP("Router Initializer")},6292:(kn,Ge,w)=>{"use strict";w.d(Ge,{FF:()=>fd,IJ:()=>Du});var i=w(4893),e=w(9808),C=w(8421),R=w(8306),U=w(5577),j=w(1144),F=w(576),D=w(3268);const h=["addListener","removeListener"],u=["addEventListener","removeEventListener"],p=["on","off"];function _(N,Z,T,J){if((0,F.m)(T)&&(J=T,T=void 0),J)return _(N,Z,T).pipe((0,D.Z)(J));const[Ee,We]=function B(N){return(0,F.m)(N.addEventListener)&&(0,F.m)(N.removeEventListener)}(N)?u.map(Mt=>Lt=>N[Mt](Z,Lt,T)):function k(N){return(0,F.m)(N.addListener)&&(0,F.m)(N.removeListener)}(N)?h.map(b(N,Z)):function L(N){return(0,F.m)(N.on)&&(0,F.m)(N.off)}(N)?p.map(b(N,Z)):[];if(!Ee&&(0,j.z)(N))return(0,U.z)(Mt=>_(Mt,Z,T))((0,C.Xf)(N));if(!Ee)throw new TypeError("Invalid event target");return new R.y(Mt=>{const Lt=(...Ht)=>Mt.next(1<Ht.length?Ht:Ht[0]);return Ee(Lt),()=>We(Lt)})}function b(N,Z){return T=>J=>N[T](Z,J)}var O=w(727);class P extends O.w0{constructor(Z,T){super()}schedule(Z,T=0){return this}}const y={setInterval(N,Z,...T){const{delegate:J}=y;return(null==J?void 0:J.setInterval)?J.setInterval(N,Z,...T):setInterval(N,Z,...T)},clearInterval(N){const{delegate:Z}=y;return((null==Z?void 0:Z.clearInterval)||clearInterval)(N)},delegate:void 0};var S=w(8737),A=w(6063);class I{constructor(Z,T=I.now){this.schedulerActionCtor=Z,this.now=T}schedule(Z,T=0,J){return new this.schedulerActionCtor(this,Z).schedule(J,T)}}I.now=A.l.now;const fe=new class H extends I{constructor(Z,T=I.now){super(Z,T),this.actions=[],this._active=!1}flush(Z){const{actions:T}=this;if(this._active)return void T.push(Z);let J;this._active=!0;do{if(J=Z.execute(Z.state,Z.delay))break}while(Z=T.shift());if(this._active=!1,J){for(;Z=T.shift();)Z.unsubscribe();throw J}}}(class E extends P{constructor(Z,T){super(Z,T),this.scheduler=Z,this.work=T,this.pending=!1}schedule(Z,T=0){var J;if(this.closed)return this;this.state=Z;const Ee=this.id,We=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(We,Ee,T)),this.pending=!0,this.delay=T,this.id=null!==(J=this.id)&&void 0!==J?J:this.requestAsyncId(We,this.id,T),this}requestAsyncId(Z,T,J=0){return y.setInterval(Z.flush.bind(Z,this),J)}recycleAsyncId(Z,T,J=0){if(null!=J&&this.delay===J&&!1===this.pending)return T;null!=T&&y.clearInterval(T)}execute(Z,T){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const J=this._execute(Z,T);if(J)return J;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Z,T){let Ee,J=!1;try{this.work(Z)}catch(We){J=!0,Ee=We||new Error("Scheduled action threw falsy error")}if(J)return this.unsubscribe(),Ee}unsubscribe(){if(!this.closed){const{id:Z,scheduler:T}=this,{actions:J}=T;this.work=this.state=this.scheduler=null,this.pending=!1,(0,S.P)(J,this),null!=Z&&(this.id=this.recycleAsyncId(T,Z,null)),this.delay=null,super.unsubscribe()}}});var ue=w(3532);const{isArray:se}=Array;function V(N){return 1===N.length&&se(N[0])?N[0]:N}var de=w(5403);var me=w(5032);new R.y(me.Z);var Ie=w(515),Te=w(3269);function ke(...N){const Z=(0,Te.jO)(N),T=V(N);return T.length?new R.y(J=>{let Ee=T.map(()=>[]),We=T.map(()=>!1);J.add(()=>{Ee=We=null});for(let Mt=0;!J.closed&&Mt<T.length;Mt++)(0,C.Xf)(T[Mt]).subscribe((0,de.x)(J,Lt=>{if(Ee[Mt].push(Lt),Ee.every(Ht=>Ht.length)){const Ht=Ee.map(cn=>cn.shift());J.next(Z?Z(...Ht):Ht),Ee.some((cn,En)=>!cn.length&&We[En])&&J.complete()}},()=>{We[Mt]=!0,!Ee[Mt].length&&J.complete()}));return()=>{Ee=We=null}}):Ie.E}var Ue=w(9646),Fe=w(7579),He=(w(1135),w(9841),w(7272)),ye=w(4482);function ae(N){return(0,ye.e)((Z,T)=>{(0,C.Xf)(N).subscribe((0,de.x)(T,()=>T.complete(),me.Z)),!T.closed&&Z.subscribe(T)})}var W=w(4671);function le(...N){const Z=(0,Te.jO)(N);return(0,ye.e)((T,J)=>{const Ee=N.length,We=new Array(Ee);let Mt=N.map(()=>!1),Lt=!1;for(let Ht=0;Ht<Ee;Ht++)(0,C.Xf)(N[Ht]).subscribe((0,de.x)(J,cn=>{We[Ht]=cn,!Lt&&!Mt[Ht]&&(Mt[Ht]=!0,(Lt=Mt.every(W.y))&&(Mt=null))},me.Z));T.subscribe((0,de.x)(J,Ht=>{if(Lt){const cn=[Ht,...We];J.next(Z?Z(...cn):cn)}}))})}var ne=w(5698),te=w(4004),oe=w(9300);w(8675);var Ze=w(3900),st=w(8505),et=w(2382);Math,Math,Math;const _n=["*"],Pa=["dialog"];function fn(N){return null!=N}function Ro(N){return(N||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.closest=function(N){let Z=this;if(!document.documentElement.contains(Z))return null;do{if(Z.matches(N))return Z;Z=Z.parentElement||Z.parentNode}while(null!==Z&&1===Z.nodeType);return null});const gs={animation:!0,transitionTimerDelayMs:5},lo=()=>{},{transitionTimerDelayMs:Bs}=gs,Us=new Map,ro=(N,Z,T,J)=>{let Ee=J.context||{};const We=Us.get(Z);if(We)switch(J.runningTransition){case"continue":return Ie.E;case"stop":N.run(()=>We.transition$.complete()),Ee=Object.assign(We.context,Ee),Us.delete(Z)}const Mt=T(Z,J.animation,Ee)||lo;if(!J.animation||"none"===window.getComputedStyle(Z).transitionProperty)return N.run(()=>Mt()),(0,Ue.of)(void 0).pipe(function Wo(N){return Z=>new R.y(T=>Z.subscribe({next:Mt=>N.run(()=>T.next(Mt)),error:Mt=>N.run(()=>T.error(Mt)),complete:()=>N.run(()=>T.complete())}))}(N));const Lt=new Fe.x,Ht=new Fe.x,cn=Lt.pipe(function Le(...N){return Z=>(0,He.z)(Z,(0,Ue.of)(...N))}(!0));Us.set(Z,{transition$:Lt,complete:()=>{Ht.next(),Ht.complete()},context:Ee});const En=function hs(N){const{transitionDelay:Z,transitionDuration:T}=window.getComputedStyle(N);return 1e3*(parseFloat(Z)+parseFloat(T))}(Z);return N.runOutsideAngular(()=>{const ir=_(Z,"transitionend").pipe(ae(cn),(0,oe.h)(({target:In})=>In===Z));(function Q(...N){return 1===(N=V(N)).length?(0,C.Xf)(N[0]):new R.y(function pe(N){return Z=>{let T=[];for(let J=0;T&&!Z.closed&&J<N.length;J++)T.push((0,C.Xf)(N[J]).subscribe((0,de.x)(Z,Ee=>{if(T){for(let We=0;We<T.length;We++)We!==J&&T[We].unsubscribe();T=null}Z.next(Ee)})))}}(N))})(function q(N=0,Z,T=fe){let J=-1;return null!=Z&&((0,ue.K)(Z)?T=Z:J=Z),new R.y(Ee=>{let We=function be(N){return N instanceof Date&&!isNaN(N)}(N)?+N-T.now():N;We<0&&(We=0);let Mt=0;return T.schedule(function(){Ee.closed||(Ee.next(Mt++),0<=J?this.schedule(void 0,J):Ee.complete())},We)})}(En+Bs).pipe(ae(cn)),ir,Ht).pipe(ae(cn)).subscribe(()=>{Us.delete(Z),N.run(()=>{Mt(),Lt.next(),Lt.complete()})})}),Lt.asObservable()};let aa=(()=>{class N{constructor(){this.animation=gs.animation}}return N.\u0275fac=function(T){return new(T||N)},N.\u0275prov=i.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),Zu=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),cf=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),Ba=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({}),N})(),Jc=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),ua=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({}),N})();var ai=(()=>{return(N=ai||(ai={}))[N.Tab=9]="Tab",N[N.Enter=13]="Enter",N[N.Escape=27]="Escape",N[N.Space=32]="Space",N[N.PageUp=33]="PageUp",N[N.PageDown=34]="PageDown",N[N.End=35]="End",N[N.Home=36]="Home",N[N.ArrowLeft=37]="ArrowLeft",N[N.ArrowUp=38]="ArrowUp",N[N.ArrowRight=39]="ArrowRight",N[N.ArrowDown=40]="ArrowDown",ai;var N})();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Gs=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Li(N){const Z=Array.from(N.querySelectorAll(Gs)).filter(T=>-1!==T.tabIndex);return[Z[0],Z[Z.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Xi=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez,et.u5]]}),N})(),ga=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({}),N})();class pa{constructor(Z,T,J){this.nodes=Z,this.viewRef=T,this.componentRef=J}}let ic=(()=>{class N{constructor(T,J){this._el=T,this._zone=J}ngOnInit(){this._zone.onStable.asObservable().pipe((0,ne.q)(1)).subscribe(()=>{ro(this._zone,this._el.nativeElement,(T,J)=>{J&&Ro(T),T.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ro(this._zone,this._el.nativeElement,({classList:T})=>T.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return N.\u0275fac=function(T){return new(T||N)(i.Y36(i.SBq),i.Y36(i.R0b))},N.\u0275cmp=i.Xpm({type:N,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(T,J){2&T&&(i.Tol("modal-backdrop"+(J.backdropClass?" "+J.backdropClass:"")),i.ekj("show",!J.animation)("fade",J.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(T,J){},encapsulation:2}),N})();class co{close(Z){}dismiss(Z){}}class uu{constructor(Z,T,J,Ee){this._windowCmptRef=Z,this._contentRef=T,this._backdropCmptRef=J,this._beforeDismiss=Ee,this._closed=new Fe.x,this._dismissed=new Fe.x,this._hidden=new Fe.x,Z.instance.dismissEvent.subscribe(We=>{this.dismiss(We)}),this.result=new Promise((We,Mt)=>{this._resolve=We,this._reject=Mt}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ae(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ae(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(Z){this._windowCmptRef&&(this._closed.next(Z),this._resolve(Z),this._removeModalElements())}_dismiss(Z){this._dismissed.next(Z),this._reject(Z),this._removeModalElements()}dismiss(Z){if(this._windowCmptRef)if(this._beforeDismiss){const T=this._beforeDismiss();!function qn(N){return N&&N.then}(T)?!1!==T&&this._dismiss(Z):T.then(J=>{!1!==J&&this._dismiss(Z)},()=>{})}else this._dismiss(Z)}_removeModalElements(){const Z=this._windowCmptRef.instance.hide(),T=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ue.of)(void 0);Z.subscribe(()=>{const{nativeElement:J}=this._windowCmptRef.location;J.parentNode.removeChild(J),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),T.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:J}=this._backdropCmptRef.location;J.parentNode.removeChild(J),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ke(Z,T).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var $s=(()=>{return(N=$s||($s={}))[N.BACKDROP_CLICK=0]="BACKDROP_CLICK",N[N.ESC=1]="ESC",$s;var N})();let Vf=(()=>{class N{constructor(T,J,Ee){this._document=T,this._elRef=J,this._zone=Ee,this._closed$=new Fe.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new i.vpe,this.shown=new Fe.x,this.hidden=new Fe.x}dismiss(T){this.dismissEvent.emit(T)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,ne.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:T}=this._elRef,J={animation:this.animation,runningTransition:"stop"},Mt=ke(ro(this._zone,T,()=>T.classList.remove("show"),J),ro(this._zone,this._dialogEl.nativeElement,()=>{},J));return Mt.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),Mt}_show(){const T={animation:this.animation,runningTransition:"continue"};ke(ro(this._zone,this._elRef.nativeElement,(We,Mt)=>{Mt&&Ro(We),We.classList.add("show")},T),ro(this._zone,this._dialogEl.nativeElement,()=>{},T)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:T}=this._elRef;this._zone.runOutsideAngular(()=>{_(T,"keydown").pipe(ae(this._closed$),(0,oe.h)(Ee=>Ee.which===ai.Escape)).subscribe(Ee=>{this.keyboard?requestAnimationFrame(()=>{Ee.defaultPrevented||this._zone.run(()=>this.dismiss($s.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let J=!1;_(this._dialogEl.nativeElement,"mousedown").pipe(ae(this._closed$),(0,st.b)(()=>J=!1),(0,Ze.w)(()=>_(T,"mouseup").pipe(ae(this._closed$),(0,ne.q)(1))),(0,oe.h)(({target:Ee})=>T===Ee)).subscribe(()=>{J=!0}),_(T,"click").pipe(ae(this._closed$)).subscribe(({target:Ee})=>{T===Ee&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!J&&this._zone.run(()=>this.dismiss($s.BACKDROP_CLICK))),J=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:T}=this._elRef;if(!T.contains(document.activeElement)){const J=T.querySelector("[ngbAutofocus]"),Ee=Li(T)[0];(J||Ee||T).focus()}}_restoreFocus(){const T=this._document.body,J=this._elWithFocus;let Ee;Ee=J&&J.focus&&T.contains(J)?J:T,this._zone.runOutsideAngular(()=>{setTimeout(()=>Ee.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ro(this._zone,this._elRef.nativeElement,({classList:T})=>(T.add("modal-static"),()=>T.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return N.\u0275fac=function(T){return new(T||N)(i.Y36(e.K0),i.Y36(i.SBq),i.Y36(i.R0b))},N.\u0275cmp=i.Xpm({type:N,selectors:[["ngb-modal-window"]],viewQuery:function(T,J){if(1&T&&i.Gf(Pa,7),2&T){let Ee;i.iGM(Ee=i.CRH())&&(J._dialogEl=Ee.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(T,J){2&T&&(i.uIk("aria-modal",!0)("aria-labelledby",J.ariaLabelledBy)("aria-describedby",J.ariaDescribedBy),i.Tol("modal d-block"+(J.windowClass?" "+J.windowClass:"")),i.ekj("fade",J.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:_n,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(T,J){1&T&&(i.F$t(),i.TgZ(0,"div",0,1),i.TgZ(2,"div",2),i.Hsn(3),i.qZA(),i.qZA()),2&T&&i.Tol("modal-dialog"+(J.size?" modal-"+J.size:"")+(J.centered?" modal-dialog-centered":"")+(J.scrollable?" modal-dialog-scrollable":"")+(J.modalDialogClass?" "+J.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),N})(),oc=(()=>{class N{constructor(T){this._document=T}hide(){const T=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),J=this._document.body,Ee=J.style,{overflow:We,paddingRight:Mt}=Ee;if(T>0){const Lt=parseFloat(window.getComputedStyle(J).paddingRight);Ee.paddingRight=`${Lt+T}px`}return Ee.overflow="hidden",()=>{T>0&&(Ee.paddingRight=Mt),Ee.overflow=We}}}return N.\u0275fac=function(T){return new(T||N)(i.LFG(e.K0))},N.\u0275prov=i.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),Ml=(()=>{class N{constructor(T,J,Ee,We,Mt,Lt){this._applicationRef=T,this._injector=J,this._document=Ee,this._scrollBar=We,this._rendererFactory=Mt,this._ngZone=Lt,this._activeWindowCmptHasChanged=new Fe.x,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new i.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const Ht=this._windowCmpts[this._windowCmpts.length-1];((N,Z,T,J=!1)=>{this._ngZone.runOutsideAngular(()=>{const Ee=_(Z,"focusin").pipe(ae(T),(0,te.U)(We=>We.target));_(Z,"keydown").pipe(ae(T),(0,oe.h)(We=>We.which===ai.Tab),le(Ee)).subscribe(([We,Mt])=>{const[Lt,Ht]=Li(Z);(Mt===Lt||Mt===Z)&&We.shiftKey&&(Ht.focus(),We.preventDefault()),Mt===Ht&&!We.shiftKey&&(Lt.focus(),We.preventDefault())}),J&&_(Z,"click").pipe(ae(T),le(Ee),(0,te.U)(We=>We[1])).subscribe(We=>We.focus())})})(0,Ht.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(Ht.location.nativeElement)}})}open(T,J,Ee,We){const Mt=We.container instanceof HTMLElement?We.container:fn(We.container)?this._document.querySelector(We.container):this._document.body,Lt=this._rendererFactory.createRenderer(null,null),Ht=this._scrollBar.hide(),cn=()=>{this._modalRefs.length||(Lt.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!Mt)throw new Error(`The specified modal container "${We.container||"body"}" was not found in the DOM.`);const En=new co,ir=this._getContentRef(T,We.injector||J,Ee,En,We);let $n=!1!==We.backdrop?this._attachBackdrop(T,Mt):void 0,In=this._attachWindowComponent(T,Mt,ir),Ar=new uu(In,ir,$n,We.beforeDismiss);return this._registerModalRef(Ar),this._registerWindowCmpt(In),Ar.result.then(Ht,Ht),Ar.result.then(cn,cn),En.close=sr=>{Ar.close(sr)},En.dismiss=sr=>{Ar.dismiss(sr)},this._applyWindowOptions(In.instance,We),1===this._modalRefs.length&&Lt.addClass(this._document.body,"modal-open"),$n&&$n.instance&&(this._applyBackdropOptions($n.instance,We),$n.changeDetectorRef.detectChanges()),In.changeDetectorRef.detectChanges(),Ar}get activeInstances(){return this._activeInstances}dismissAll(T){this._modalRefs.forEach(J=>J.dismiss(T))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(T,J){let We=T.resolveComponentFactory(ic).create(this._injector);return this._applicationRef.attachView(We.hostView),J.appendChild(We.location.nativeElement),We}_attachWindowComponent(T,J,Ee){let Mt=T.resolveComponentFactory(Vf).create(this._injector,Ee.nodes);return this._applicationRef.attachView(Mt.hostView),J.appendChild(Mt.location.nativeElement),Mt}_applyWindowOptions(T,J){this._windowAttributes.forEach(Ee=>{fn(J[Ee])&&(T[Ee]=J[Ee])})}_applyBackdropOptions(T,J){this._backdropAttributes.forEach(Ee=>{fn(J[Ee])&&(T[Ee]=J[Ee])})}_getContentRef(T,J,Ee,We,Mt){return Ee?Ee instanceof i.Rgc?this._createFromTemplateRef(Ee,We):function ft(N){return"string"==typeof N}(Ee)?this._createFromString(Ee):this._createFromComponent(T,J,Ee,We,Mt):new pa([])}_createFromTemplateRef(T,J){const We=T.createEmbeddedView({$implicit:J,close(Mt){J.close(Mt)},dismiss(Mt){J.dismiss(Mt)}});return this._applicationRef.attachView(We),new pa([We.rootNodes],We)}_createFromString(T){const J=this._document.createTextNode(`${T}`);return new pa([[J]])}_createFromComponent(T,J,Ee,We,Mt){const Lt=T.resolveComponentFactory(Ee),Ht=i.zs3.create({providers:[{provide:co,useValue:We}],parent:J}),cn=Lt.create(Ht),En=cn.location.nativeElement;return Mt.scrollable&&En.classList.add("component-host-scrollable"),this._applicationRef.attachView(cn.hostView),new pa([[En]],cn.hostView,cn)}_setAriaHidden(T){const J=T.parentElement;J&&T!==this._document.body&&(Array.from(J.children).forEach(Ee=>{Ee!==T&&"SCRIPT"!==Ee.nodeName&&(this._ariaHiddenValues.set(Ee,Ee.getAttribute("aria-hidden")),Ee.setAttribute("aria-hidden","true"))}),this._setAriaHidden(J))}_revertAriaHidden(){this._ariaHiddenValues.forEach((T,J)=>{T?J.setAttribute("aria-hidden",T):J.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(T){const J=()=>{const Ee=this._modalRefs.indexOf(T);Ee>-1&&(this._modalRefs.splice(Ee,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(T),this._activeInstances.emit(this._modalRefs),T.result.then(J,J)}_registerWindowCmpt(T){this._windowCmpts.push(T),this._activeWindowCmptHasChanged.next(),T.onDestroy(()=>{const J=this._windowCmpts.indexOf(T);J>-1&&(this._windowCmpts.splice(J,1),this._activeWindowCmptHasChanged.next())})}}return N.\u0275fac=function(T){return new(T||N)(i.LFG(i.z2F),i.LFG(i.zs3),i.LFG(e.K0),i.LFG(oc),i.LFG(i.FYo),i.LFG(i.R0b))},N.\u0275prov=i.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),dd=(()=>{class N{constructor(T){this._ngbConfig=T,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(T){this._animation=T}}return N.\u0275fac=function(T){return new(T||N)(i.LFG(aa))},N.\u0275prov=i.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),fd=(()=>{class N{constructor(T,J,Ee,We){this._moduleCFR=T,this._injector=J,this._modalStack=Ee,this._config=We}open(T,J={}){const Ee=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),J);return this._modalStack.open(this._moduleCFR,this._injector,T,Ee)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(T){this._modalStack.dismissAll(T)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return N.\u0275fac=function(T){return new(T||N)(i.LFG(i._Vd),i.LFG(i.zs3),i.LFG(Ml),i.LFG(dd))},N.\u0275prov=i.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),sc=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({providers:[fd]}),N})(),$o=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),_u=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),yu=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),Eu=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),Tu=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),bu=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),_a=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})(),So=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({}),N})();new i.OlP("live announcer delay",{providedIn:"root",factory:function qf(){return 100}});let Wa=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[[e.ez]]}),N})();const Ya=[Zu,cf,Ba,Jc,ua,Xi,ga,sc,$o,_u,yu,Eu,Tu,bu,_a,So,Wa];let Du=(()=>{class N{}return N.\u0275fac=function(T){return new(T||N)},N.\u0275mod=i.oAB({type:N}),N.\u0275inj=i.cJS({imports:[Ya,Zu,cf,Ba,Jc,ua,Xi,ga,sc,$o,_u,yu,Eu,Tu,bu,_a,So,Wa]}),N})()},7582:(kn,Ge,w)=>{"use strict";function _(Q,pe,me,xe){return new(me||(me=Promise))(function(Ie,Te){function ke(je){try{Fe(xe.next(je))}catch(Pe){Te(Pe)}}function Ue(je){try{Fe(xe.throw(je))}catch(Pe){Te(Pe)}}function Fe(je){je.done?Ie(je.value):function _e(Ie){return Ie instanceof me?Ie:new me(function(Te){Te(Ie)})}(je.value).then(ke,Ue)}Fe((xe=xe.apply(Q,pe||[])).next())})}function E(Q){return this instanceof E?(this.v=Q,this):new E(Q)}function A(Q,pe,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var _e,xe=me.apply(Q,pe||[]),Ie=[];return _e={},Te("next"),Te("throw"),Te("return"),_e[Symbol.asyncIterator]=function(){return this},_e;function Te(He){xe[He]&&(_e[He]=function(Le){return new Promise(function(ye,ae){Ie.push([He,Le,ye,ae])>1||ke(He,Le)})})}function ke(He,Le){try{!function Ue(He){He.value instanceof E?Promise.resolve(He.value.v).then(Fe,je):Pe(Ie[0][2],He)}(xe[He](Le))}catch(ye){Pe(Ie[0][3],ye)}}function Fe(He){ke("next",He)}function je(He){ke("throw",He)}function Pe(He,Le){He(Le),Ie.shift(),Ie.length&&ke(Ie[0][0],Ie[0][1])}}function H(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,pe=Q[Symbol.asyncIterator];return pe?pe.call(Q):(Q=function B(Q){var pe="function"==typeof Symbol&&Symbol.iterator,me=pe&&Q[pe],xe=0;if(me)return me.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&xe>=Q.length&&(Q=void 0),{value:Q&&Q[xe++],done:!Q}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),me={},xe("next"),xe("throw"),xe("return"),me[Symbol.asyncIterator]=function(){return this},me);function xe(Ie){me[Ie]=Q[Ie]&&function(Te){return new Promise(function(ke,Ue){!function _e(Ie,Te,ke,Ue){Promise.resolve(Ue).then(function(Fe){Ie({value:Fe,done:ke})},Te)}(ke,Ue,(Te=Q[Ie](Te)).done,Te.value)})}}}w.d(Ge,{mG:()=>_,qq:()=>E,FC:()=>A,KL:()=>H})}},kn=>{kn(kn.s=2811)}]);
(self.webpackChunkapp=self.webpackChunkapp||[]).push([[429],{7435:(q,se,Ee)=>{"use strict";Ee(8583),Ee(148),Ee(173),Ee(757)},173:()=>{(function(){"use strict";var q=window.Document.prototype.createElement,se=window.Document.prototype.createElementNS,Ee=window.Document.prototype.importNode,Ae=window.Document.prototype.prepend,bt=window.Document.prototype.append,st=window.DocumentFragment.prototype.prepend,et=window.DocumentFragment.prototype.append,ze=window.Node.prototype.cloneNode,xe=window.Node.prototype.appendChild,qe=window.Node.prototype.insertBefore,_e=window.Node.prototype.removeChild,De=window.Node.prototype.replaceChild,Ue=Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),tt=window.Element.prototype.attachShadow,at=Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),W=window.Element.prototype.getAttribute,Xe=window.Element.prototype.setAttribute,Oe=window.Element.prototype.removeAttribute,oe=window.Element.prototype.toggleAttribute,ct=window.Element.prototype.getAttributeNS,Tt=window.Element.prototype.setAttributeNS,lt=window.Element.prototype.removeAttributeNS,ut=window.Element.prototype.insertAdjacentElement,ft=window.Element.prototype.insertAdjacentHTML,B=window.Element.prototype.prepend,he=window.Element.prototype.append,ht=window.Element.prototype.before,nt=window.Element.prototype.after,Ye=window.Element.prototype.replaceWith,rt=window.Element.prototype.remove,dt=window.HTMLElement,Ke=Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),ye=window.HTMLElement.prototype.insertAdjacentElement,Ie=window.HTMLElement.prototype.insertAdjacentHTML,ge=new Set;function Ze(n){var s=ge.has(n);return n=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/.test(n),!s&&n}"annotation-xml color-profile font-face font-face-src font-face-uri font-face-format font-face-name missing-glyph".split(" ").forEach(function(n){return ge.add(n)});var Te=document.contains?document.contains.bind(document):document.documentElement.contains.bind(document.documentElement);function ee(n){var s=n.isConnected;if(void 0!==s)return s;if(Te(n))return!0;for(;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function be(n){var s=n.children;if(s)return Array.prototype.slice.call(s);for(s=[],n=n.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&s.push(n);return s}function Me(n,s){for(;s&&s!==n&&!s.nextSibling;)s=s.parentNode;return s&&s!==n?s.nextSibling:null}function Le(n,s,l){for(var E=n;E;){if(E.nodeType===Node.ELEMENT_NODE){var f=E;s(f);var m=f.localName;if("link"===m&&"import"===f.getAttribute("rel")){if(E=f.import,void 0===l&&(l=new Set),E instanceof Node&&!l.has(E))for(l.add(E),E=E.firstChild;E;E=E.nextSibling)Le(E,s,l);E=Me(n,f);continue}if("template"===m){E=Me(n,f);continue}if(f=f.__CE_shadowRoot)for(f=f.firstChild;f;f=f.nextSibling)Le(f,s,l)}E=E.firstChild?E.firstChild:Me(n,E)}}function de(){var n=!(null==ue||!ue.noDocumentConstructionObserver),s=!(null==ue||!ue.shadyDomFastWalk);this.m=[],this.g=[],this.j=!1,this.shadyDomFastWalk=s,this.I=!n}function ve(n,s,l,E){var f=window.ShadyDOM;if(n.shadyDomFastWalk&&f&&f.inUse){if(s.nodeType===Node.ELEMENT_NODE&&l(s),s.querySelectorAll)for(n=f.nativeMethods.querySelectorAll.call(s,"*"),s=0;s<n.length;s++)l(n[s])}else Le(s,l,E)}function pt(n,s){n.j&&ve(n,s,function(l){return je(n,l)})}function je(n,s){if(n.j&&!s.__CE_patched){s.__CE_patched=!0;for(var l=0;l<n.m.length;l++)n.m[l](s);for(l=0;l<n.g.length;l++)n.g[l](s)}}function Ce(n,s){var l=[];for(ve(n,s,function(f){return l.push(f)}),s=0;s<l.length;s++){var E=l[s];1===E.__CE_state?n.connectedCallback(E):$e(n,E)}}function le(n,s){var l=[];for(ve(n,s,function(f){return l.push(f)}),s=0;s<l.length;s++){var E=l[s];1===E.__CE_state&&n.disconnectedCallback(E)}}function Pe(n,s,l){var E=(l=void 0===l?{}:l).J,f=l.upgrade||function(g){return $e(n,g)},m=[];for(ve(n,s,function(g){if(n.j&&je(n,g),"link"===g.localName&&"import"===g.getAttribute("rel")){var t=g.import;t instanceof Node&&(t.__CE_isImportDocument=!0,t.__CE_registry=document.__CE_registry),t&&"complete"===t.readyState?t.__CE_documentLoadHandled=!0:g.addEventListener("load",function(){var r=g.import;if(!r.__CE_documentLoadHandled){r.__CE_documentLoadHandled=!0;var u=new Set;E&&(E.forEach(function(c){return u.add(c)}),u.delete(r)),Pe(n,r,{J:u,upgrade:f})}})}else m.push(g)},E),s=0;s<m.length;s++)f(m[s])}function $e(n,s){try{var l=s.ownerDocument,E=l.__CE_registry,f=E&&(l.defaultView||l.__CE_isImportDocument)?Be(E,s.localName):void 0;if(f&&void 0===s.__CE_state){f.constructionStack.push(s);try{try{if(new f.constructorFunction!==s)throw Error("The custom element constructor did not produce the element being upgraded.")}finally{f.constructionStack.pop()}}catch(r){throw s.__CE_state=2,r}if(s.__CE_state=1,s.__CE_definition=f,f.attributeChangedCallback&&s.hasAttributes()){var m=f.observedAttributes;for(f=0;f<m.length;f++){var g=m[f],t=s.getAttribute(g);null!==t&&n.attributeChangedCallback(s,g,null,t,null)}}ee(s)&&n.connectedCallback(s)}}catch(r){ke(r)}}function mt(n,s,l,E){var f=s.__CE_registry;if(f&&(null===E||"http://www.w3.org/1999/xhtml"===E)&&(f=Be(f,l)))try{var m=new f.constructorFunction;if(void 0===m.__CE_state||void 0===m.__CE_definition)throw Error("Failed to construct '"+l+"': The returned value was not constructed with the HTMLElement constructor.");if("http://www.w3.org/1999/xhtml"!==m.namespaceURI)throw Error("Failed to construct '"+l+"': The constructed element's namespace must be the HTML namespace.");if(m.hasAttributes())throw Error("Failed to construct '"+l+"': The constructed element must not have any attributes.");if(null!==m.firstChild)throw Error("Failed to construct '"+l+"': The constructed element must not have any children.");if(null!==m.parentNode)throw Error("Failed to construct '"+l+"': The constructed element must not have a parent node.");if(m.ownerDocument!==s)throw Error("Failed to construct '"+l+"': The constructed element's owner document is incorrect.");if(m.localName!==l)throw Error("Failed to construct '"+l+"': The constructed element's local name is incorrect.");return m}catch(g){return ke(g),s=null===E?q.call(s,l):se.call(s,E,l),Object.setPrototypeOf(s,HTMLUnknownElement.prototype),s.__CE_state=2,s.__CE_definition=void 0,je(n,s),s}return je(n,s=null===E?q.call(s,l):se.call(s,E,l)),s}function ke(n){var s="",l="",E=0,f=0;n instanceof Error?(s=n.message,l=n.sourceURL||n.fileName||"",E=n.line||n.lineNumber||0,f=n.column||n.columnNumber||0):s="Uncaught "+String(n);var m=void 0;void 0===ErrorEvent.prototype.initErrorEvent?m=new ErrorEvent("error",{cancelable:!0,message:s,filename:l,lineno:E,colno:f,error:n}):((m=document.createEvent("ErrorEvent")).initErrorEvent("error",!1,!0,s,l,E),m.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{configurable:!0,get:function(){return!0}})}),void 0===m.error&&Object.defineProperty(m,"error",{configurable:!0,enumerable:!0,get:function(){return n}}),window.dispatchEvent(m),m.defaultPrevented||console.error(n)}function vt(){var n=this;this.g=void 0,this.F=new Promise(function(s){n.l=s})}function Et(n){var s=document;this.l=void 0,this.h=n,this.g=s,Pe(this.h,this.g),"loading"===this.g.readyState&&(this.l=new MutationObserver(this.G.bind(this)),this.l.observe(this.g,{childList:!0,subtree:!0}))}function ot(n){n.l&&n.l.disconnect()}function ne(n){this.s=new Map,this.u=new Map,this.C=new Map,this.A=!1,this.B=new Map,this.o=function(s){return s()},this.i=!1,this.v=[],this.h=n,this.D=n.I?new Et(n):void 0}function Ct(n,s){if(!Ze(s))throw new SyntaxError("The element name '"+s+"' is not valid.");if(Be(n,s))throw Error("A custom element with name '"+s+"' has already been defined.");if(n.A)throw Error("A custom element is already being defined.")}function kt(n,s,l){var E;n.A=!0;try{var f=l.prototype;if(!(f instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");var m=function(c){var _=f[c];if(void 0!==_&&!(_ instanceof Function))throw Error("The '"+c+"' callback must be a function.");return _},g=m("connectedCallback"),t=m("disconnectedCallback"),r=m("adoptedCallback"),u=(E=m("attributeChangedCallback"))&&l.observedAttributes||[]}catch(c){throw c}finally{n.A=!1}return n.u.set(s,l={localName:s,constructorFunction:l,connectedCallback:g,disconnectedCallback:t,adoptedCallback:r,attributeChangedCallback:E,observedAttributes:u,constructionStack:[]}),n.C.set(l.constructorFunction,l),l}function Ve(n){if(!1!==n.i){n.i=!1;for(var s=[],l=n.v,E=new Map,f=0;f<l.length;f++)E.set(l[f],[]);for(Pe(n.h,document,{upgrade:function(r){if(void 0===r.__CE_state){var u=r.localName,c=E.get(u);c?c.push(r):n.u.has(u)&&s.push(r)}}}),f=0;f<s.length;f++)$e(n.h,s[f]);for(f=0;f<l.length;f++){for(var m=l[f],g=E.get(m),t=0;t<g.length;t++)$e(n.h,g[t]);(m=n.B.get(m))&&m.resolve(void 0)}l.length=0}}function Be(n,s){var l=n.u.get(s);if(l)return l;if(l=n.s.get(s)){n.s.delete(s);try{return kt(n,s,l())}catch(E){ke(E)}}}function me(n,s,l){function E(f){return function(m){for(var g=[],t=0;t<arguments.length;++t)g[t]=arguments[t];t=[];for(var r=[],u=0;u<g.length;u++){var c=g[u];if(c instanceof Element&&ee(c)&&r.push(c),c instanceof DocumentFragment)for(c=c.firstChild;c;c=c.nextSibling)t.push(c);else t.push(c)}for(f.apply(this,g),g=0;g<r.length;g++)le(n,r[g]);if(ee(this))for(g=0;g<t.length;g++)(r=t[g])instanceof Element&&Ce(n,r)}}void 0!==l.prepend&&(s.prepend=E(l.prepend)),void 0!==l.append&&(s.append=E(l.append))}de.prototype.connectedCallback=function(n){var s=n.__CE_definition;if(s.connectedCallback)try{s.connectedCallback.call(n)}catch(l){ke(l)}},de.prototype.disconnectedCallback=function(n){var s=n.__CE_definition;if(s.disconnectedCallback)try{s.disconnectedCallback.call(n)}catch(l){ke(l)}},de.prototype.attributeChangedCallback=function(n,s,l,E,f){var m=n.__CE_definition;if(m.attributeChangedCallback&&-1<m.observedAttributes.indexOf(s))try{m.attributeChangedCallback.call(n,s,l,E,f)}catch(g){ke(g)}},vt.prototype.resolve=function(n){if(this.g)throw Error("Already resolved.");this.g=n,this.l(n)},Et.prototype.G=function(n){var s=this.g.readyState;for("interactive"!==s&&"complete"!==s||ot(this),s=0;s<n.length;s++)for(var l=n[s].addedNodes,E=0;E<l.length;E++)Pe(this.h,l[E])},ne.prototype.H=function(n,s){var l=this;if(!(s instanceof Function))throw new TypeError("Custom element constructor getters must be functions.");Ct(this,n),this.s.set(n,s),this.v.push(n),this.i||(this.i=!0,this.o(function(){return Ve(l)}))},ne.prototype.define=function(n,s){var l=this;if(!(s instanceof Function))throw new TypeError("Custom element constructors must be functions.");Ct(this,n),kt(this,n,s),this.v.push(n),this.i||(this.i=!0,this.o(function(){return Ve(l)}))},ne.prototype.upgrade=function(n){Pe(this.h,n)},ne.prototype.get=function(n){if(n=Be(this,n))return n.constructorFunction},ne.prototype.whenDefined=function(n){if(!Ze(n))return Promise.reject(new SyntaxError("'"+n+"' is not a valid custom element name."));var s=this.B.get(n);if(s)return s.F;s=new vt,this.B.set(n,s);var l=this.u.has(n)||this.s.has(n);return n=-1===this.v.indexOf(n),l&&n&&s.resolve(void 0),s.F},ne.prototype.polyfillWrapFlushCallback=function(n){this.D&&ot(this.D);var s=this.o;this.o=function(l){return n(function(){return s(l)})}},ne.prototype.define=ne.prototype.define,ne.prototype.upgrade=ne.prototype.upgrade,ne.prototype.get=ne.prototype.get,ne.prototype.whenDefined=ne.prototype.whenDefined,ne.prototype.polyfillDefineLazy=ne.prototype.H,ne.prototype.polyfillWrapFlushCallback=ne.prototype.polyfillWrapFlushCallback;var Fe={},ue=window.customElements;function it(){var n=new de;(function yt(n){function s(){var l=this.constructor,E=document.__CE_registry.C.get(l);if(!E)throw Error("Failed to construct a custom element: The constructor was not registered with `customElements`.");var f=E.constructionStack;if(0===f.length)return f=q.call(document,E.localName),Object.setPrototypeOf(f,l.prototype),f.__CE_state=1,f.__CE_definition=E,je(n,f),f;var m=f.length-1,g=f[m];if(g===Fe)throw Error("Failed to construct '"+E.localName+"': This element was already constructed.");return f[m]=Fe,Object.setPrototypeOf(g,l.prototype),je(n,g),g}s.prototype=dt.prototype,Object.defineProperty(HTMLElement.prototype,"constructor",{writable:!0,configurable:!0,enumerable:!1,value:s}),window.HTMLElement=s})(n),function Je(n){Document.prototype.createElement=function(s){return mt(n,this,s,null)},Document.prototype.importNode=function(s,l){return s=Ee.call(this,s,!!l),this.__CE_registry?Pe(n,s):pt(n,s),s},Document.prototype.createElementNS=function(s,l){return mt(n,this,l,s)},me(n,Document.prototype,{prepend:Ae,append:bt})}(n),me(n,DocumentFragment.prototype,{prepend:st,append:et}),function Qe(n){function s(l,E){Object.defineProperty(l,"textContent",{enumerable:E.enumerable,configurable:!0,get:E.get,set:function(f){if(this.nodeType===Node.TEXT_NODE)E.set.call(this,f);else{var m=void 0;if(this.firstChild){var g=this.childNodes,t=g.length;if(0<t&&ee(this)){m=Array(t);for(var r=0;r<t;r++)m[r]=g[r]}}if(E.set.call(this,f),m)for(f=0;f<m.length;f++)le(n,m[f])}}})}Node.prototype.insertBefore=function(l,E){if(l instanceof DocumentFragment){var f=be(l);if(l=qe.call(this,l,E),ee(this))for(E=0;E<f.length;E++)Ce(n,f[E]);return l}return f=l instanceof Element&&ee(l),E=qe.call(this,l,E),f&&le(n,l),ee(this)&&Ce(n,l),E},Node.prototype.appendChild=function(l){if(l instanceof DocumentFragment){var E=be(l);if(l=xe.call(this,l),ee(this))for(var f=0;f<E.length;f++)Ce(n,E[f]);return l}return E=l instanceof Element&&ee(l),f=xe.call(this,l),E&&le(n,l),ee(this)&&Ce(n,l),f},Node.prototype.cloneNode=function(l){return l=ze.call(this,!!l),this.ownerDocument.__CE_registry?Pe(n,l):pt(n,l),l},Node.prototype.removeChild=function(l){var E=l instanceof Element&&ee(l),f=_e.call(this,l);return E&&le(n,l),f},Node.prototype.replaceChild=function(l,E){if(l instanceof DocumentFragment){var f=be(l);if(l=De.call(this,l,E),ee(this))for(le(n,E),E=0;E<f.length;E++)Ce(n,f[E]);return l}f=l instanceof Element&&ee(l);var m=De.call(this,l,E),g=ee(this);return g&&le(n,E),f&&le(n,l),g&&Ce(n,l),m},Ue&&Ue.get?s(Node.prototype,Ue):function ce(n,s){n.j=!0,n.m.push(s)}(n,function(l){s(l,{enumerable:!0,configurable:!0,get:function(){for(var E=[],f=this.firstChild;f;f=f.nextSibling)f.nodeType!==Node.COMMENT_NODE&&E.push(f.textContent);return E.join("")},set:function(E){for(;this.firstChild;)_e.call(this,this.firstChild);null!=E&&""!==E&&xe.call(this,document.createTextNode(E))}})})}(n),function _t(n){function s(f,m){Object.defineProperty(f,"innerHTML",{enumerable:m.enumerable,configurable:!0,get:m.get,set:function(g){var t=this,r=void 0;if(ee(this)&&(r=[],ve(n,this,function(_){_!==t&&r.push(_)})),m.set.call(this,g),r)for(var u=0;u<r.length;u++){var c=r[u];1===c.__CE_state&&n.disconnectedCallback(c)}return this.ownerDocument.__CE_registry?Pe(n,this):pt(n,this),g}})}function l(f,m){f.insertAdjacentElement=function(g,t){var r=ee(t);return g=m.call(this,g,t),r&&le(n,t),ee(g)&&Ce(n,t),g}}function E(f,m){function g(t,r){for(var u=[];t!==r;t=t.nextSibling)u.push(t);for(r=0;r<u.length;r++)Pe(n,u[r])}f.insertAdjacentHTML=function(t,r){if("beforebegin"===(t=t.toLowerCase())){var u=this.previousSibling;m.call(this,t,r),g(u||this.parentNode.firstChild,this)}else if("afterbegin"===t)u=this.firstChild,m.call(this,t,r),g(this.firstChild,u);else if("beforeend"===t)u=this.lastChild,m.call(this,t,r),g(u||this.firstChild,null);else{if("afterend"!==t)throw new SyntaxError("The value provided ("+String(t)+") is not one of 'beforebegin', 'afterbegin', 'beforeend', or 'afterend'.");u=this.nextSibling,m.call(this,t,r),g(this.nextSibling,u)}}}tt&&(Element.prototype.attachShadow=function(f){if(f=tt.call(this,f),n.j&&!f.__CE_patched){f.__CE_patched=!0;for(var m=0;m<n.m.length;m++)n.m[m](f)}return this.__CE_shadowRoot=f}),at&&at.get?s(Element.prototype,at):Ke&&Ke.get?s(HTMLElement.prototype,Ke):function He(n,s){n.j=!0,n.g.push(s)}(n,function(f){s(f,{enumerable:!0,configurable:!0,get:function(){return ze.call(this,!0).innerHTML},set:function(m){var g="template"===this.localName,t=g?this.content:this,r=se.call(document,this.namespaceURI,this.localName);for(r.innerHTML=m;0<t.childNodes.length;)_e.call(t,t.childNodes[0]);for(m=g?r.content:r;0<m.childNodes.length;)xe.call(t,m.childNodes[0])}})}),Element.prototype.setAttribute=function(f,m){if(1!==this.__CE_state)return Xe.call(this,f,m);var g=W.call(this,f);Xe.call(this,f,m),m=W.call(this,f),n.attributeChangedCallback(this,f,g,m,null)},Element.prototype.setAttributeNS=function(f,m,g){if(1!==this.__CE_state)return Tt.call(this,f,m,g);var t=ct.call(this,f,m);Tt.call(this,f,m,g),g=ct.call(this,f,m),n.attributeChangedCallback(this,m,t,g,f)},Element.prototype.removeAttribute=function(f){if(1!==this.__CE_state)return Oe.call(this,f);var m=W.call(this,f);Oe.call(this,f),null!==m&&n.attributeChangedCallback(this,f,m,null,null)},oe&&(Element.prototype.toggleAttribute=function(f,m){if(1!==this.__CE_state)return oe.call(this,f,m);var g=W.call(this,f);return null!==g!==(m=oe.call(this,f,m))&&n.attributeChangedCallback(this,f,g,m?"":null,null),m}),Element.prototype.removeAttributeNS=function(f,m){if(1!==this.__CE_state)return lt.call(this,f,m);var g=ct.call(this,f,m);lt.call(this,f,m);var t=ct.call(this,f,m);g!==t&&n.attributeChangedCallback(this,m,g,t,f)},ye?l(HTMLElement.prototype,ye):ut&&l(Element.prototype,ut),Ie?E(HTMLElement.prototype,Ie):ft&&E(Element.prototype,ft),me(n,Element.prototype,{prepend:B,append:he}),function Se(n){function s(E){return function(f){for(var m=[],g=0;g<arguments.length;++g)m[g]=arguments[g];g=[];for(var t=[],r=0;r<m.length;r++){var u=m[r];if(u instanceof Element&&ee(u)&&t.push(u),u instanceof DocumentFragment)for(u=u.firstChild;u;u=u.nextSibling)g.push(u);else g.push(u)}for(E.apply(this,m),m=0;m<t.length;m++)le(n,t[m]);if(ee(this))for(m=0;m<g.length;m++)(t=g[m])instanceof Element&&Ce(n,t)}}var l=Element.prototype;void 0!==ht&&(l.before=s(ht)),void 0!==nt&&(l.after=s(nt)),void 0!==Ye&&(l.replaceWith=function(E){for(var f=[],m=0;m<arguments.length;++m)f[m]=arguments[m];m=[];for(var g=[],t=0;t<f.length;t++){var r=f[t];if(r instanceof Element&&ee(r)&&g.push(r),r instanceof DocumentFragment)for(r=r.firstChild;r;r=r.nextSibling)m.push(r);else m.push(r)}for(t=ee(this),Ye.apply(this,f),f=0;f<g.length;f++)le(n,g[f]);if(t)for(le(n,this),f=0;f<m.length;f++)(g=m[f])instanceof Element&&Ce(n,g)}),void 0!==rt&&(l.remove=function(){var E=ee(this);rt.call(this),E&&le(n,this)})}(n)}(n),window.CustomElementRegistry=ne,n=new ne(n),document.__CE_registry=n,Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:n})}ue&&!ue.forcePolyfill&&"function"==typeof ue.define&&"function"==typeof ue.get||it(),window.__CE_installPolyfill=it}).call(self)},148:()=>{"use strict";!function(){if(void 0===window.Reflect||void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;const q=HTMLElement;window.HTMLElement=function(){return Reflect.construct(q,[],this.constructor)},HTMLElement.prototype=q.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,q)}()},757:()=>{!function(q,se){"use strict";function Ee(){var e=nt.splice(0,nt.length);for(K=0;e.length;)e.shift().call(null,e.shift())}function Ae(e,i){for(var d=0,y=e.length;d<y;d++)Xe(e[d],i)}function st(e){return function(i){H(i)&&(Xe(i,e),me.length&&Ae(i.querySelectorAll(me),e))}}function et(e){var i=x.call(e,"is"),d=e.nodeName.toUpperCase(),y=Se.call(Ve,i?ne+i.toUpperCase():ot+d);return i&&-1<y&&!ze(d,i)?-1:y}function ze(e,i){return-1<me.indexOf(e+'[is="'+i+'"]')}function xe(e){var i=e.currentTarget,d=e.attrChange,y=e.attrName,h=e.target,a=e[$e]||2,p=e[mt]||3;!o||h&&h!==i||!i[He]||"style"===y||e.prevValue===e.newValue&&(""!==e.newValue||d!==a&&d!==p)||i[He](y,d===a?null:e.prevValue,d===p?null:e.newValue)}function qe(e){var i=st(e);return function(d){nt.push(i,d.target),K&&clearTimeout(K),K=setTimeout(Ee,1)}}function _e(e){D&&(D=!1,e.currentTarget.removeEventListener(vt,_e)),me.length&&Ae((e.target||B).querySelectorAll(me),e.detail===ve?ve:Le),J&&function at(){for(var e,i=0,d=C.length;i<d;i++)Je.contains(e=C[i])||(d--,C.splice(i--,1),Xe(e,ve))}()}function De(e,i){var d=this;ae.call(d,e,i),Ye.call(d,{target:d})}function Ue(e,i,d){var y=i.apply(e,d),h=et(y);return-1<h&&ge(y,Be[h]),d.pop()&&me.length&&function bt(e){for(var i,d=0,y=e.length;d<y;d++)ge(i=e[d],Be[et(i)])}(y.querySelectorAll(me)),y}function tt(e,i){O(e,i),Ke?Ke.observe(e,we):(V&&(e.setAttribute=De,e[be]=dt(e),e[Me](Et,Ye)),e[Me](ke,xe)),e[le]&&o&&(e.created=!0,e[le](),e.created=!1)}function W(e){throw new Error("A "+e+" type is already registered")}function Xe(e,i){var d,y,h=et(e);-1<h&&!$.call(e,"TEMPLATE")&&(Ie(e,Be[h]),h=0,i!==Le||e[Le]?i!==ve||e[ve]||(e[Le]=!1,e[ve]=!0,y="disconnected",h=1):(e[ve]=!1,e[Le]=!0,y="connected",h=1,J&&Se.call(C,e)<0&&C.push(e)),h&&(d=e[i+de]||e[y+de])&&d.call(e))}function Oe(){}function oe(e,i,d){var y=d&&d[ce]||"",h=i.prototype,a=S(h),p=i.observedAttributes||ue,T={prototype:a};X(a,le,{value:function(){if(_)_=!1;else if(!this[m]){this[m]=!0,new i(this),h[le]&&h[le].call(this);var w=v[N.get(i)];(!t||w.create.length>1)&&lt(this)}}}),X(a,He,{value:function(w){-1<Se.call(p,w)&&h[He]&&h[He].apply(this,arguments)}}),h[je]&&X(a,pt,{value:h[je]}),h[Ce]&&X(a,Pe,{value:h[Ce]}),y&&(T[ce]=y),e=e.toUpperCase(),v[e]={constructor:i,create:y?[y,R(e)]:[e]},N.set(i,e),B[Te](e.toLowerCase(),T),ut(e),b[e].r()}function ct(e){var i=v[e.toUpperCase()];return i&&i.constructor}function Tt(e){return"string"==typeof e?e:e&&e.is||""}function lt(e){for(var i,d=e[He],y=d?e.attributes:ue,h=y.length;h--;)d.call(e,(i=y[h]).name||i.nodeName,null,i.value||i.nodeValue)}function ut(e){return(e=e.toUpperCase())in b||(b[e]={},b[e].p=new c(function(i){b[e].r=i})),b[e].p}function ft(){g&&delete q.customElements,Qe(q,"customElements",{configurable:!0,value:new Oe}),Qe(q,"CustomElementRegistry",{configurable:!0,value:Oe});for(var e=ht.get(/^HTML[A-Z]*[a-z]/),i=e.length;i--;function(d){var y=q[d];if(y){q[d]=function(h){var a,p;return h||(h=this),h[m]||(_=!0,a=v[N.get(h.constructor)],(h=(p=t&&1===a.create.length)?Reflect.construct(y,ue,a.constructor):B.createElement.apply(B,a.create))[m]=!0,_=!1,p||lt(h)),h},q[d].prototype=y.prototype;try{y.prototype.constructor=q[d]}catch(h){Qe(y,m,{value:q[d]})}}}(e[i]));B.createElement=function(d,y){var h=Tt(y);return h?Z.call(this,d,R(h)):Z.call(this,d)},Ne||(re=!0,B[Te](""))}var B=q.document,he=q.Object,ht=function(e){var i,d,y,h,a=/^[A-Z]+[a-z]/,T=function(k,M){(M=M.toLowerCase())in w||(w[k]=(w[k]||[]).concat(M),w[M]=w[M.toUpperCase()]=k)},w=(he.create||he)(null),L={};for(d in e)for(h in e[d])for(w[h]=y=e[d][h],i=0;i<y.length;i++)w[y[i].toLowerCase()]=w[y[i].toUpperCase()]=h;return L.get=function(k){return"string"==typeof k?w[k]||(a.test(k)?[]:""):function(k){var M,P=[];for(M in w)k.test(M)&&P.push(M);return P}(k)},L.set=function(k,M){return a.test(k)?T(k,M):T(M,k),L},L}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}});"object"!=typeof se&&(se={type:se||"auto"});var nt,Ye,rt,dt,Ke,ye,Ie,ge,Ze,e,i,d,y,h,Te="registerElement",ee=1e5*q.Math.random()>>0,be="__"+Te+ee,Me="addEventListener",Le="attached",de="Callback",ve="detached",ce="extends",He="attributeChanged"+de,pt=Le+de,je="connected"+de,Ce="disconnected"+de,le="created"+de,Pe=ve+de,$e="ADDITION",mt="REMOVAL",ke="DOMAttrModified",vt="DOMContentLoaded",Et="DOMSubtreeModified",ot="<",ne="=",Ct=/^[A-Z][._A-Z0-9]*-[-._A-Z0-9]*$/,kt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],Ve=[],Be=[],me="",Je=B.documentElement,Se=Ve.indexOf||function(e){for(var i=this.length;i--&&this[i]!==e;);return i},_t=he.prototype,Fe=_t.hasOwnProperty,yt=_t.isPrototypeOf,Qe=he.defineProperty,ue=[],it=he.getOwnPropertyDescriptor,n=he.getOwnPropertyNames,s=he.getPrototypeOf,l=he.setPrototypeOf,E=!!he.__proto__,m="__dreCEv1",g=q.customElements,t=!/^force/.test(se.type)&&!!(g&&g.define&&g.get&&g.whenDefined),r=he.create||he,u=q.Map||function(){var e,i=[],d=[];return{get:function(y){return d[Se.call(i,y)]},set:function(y,h){(e=Se.call(i,y))<0?d[i.push(y)-1]=h:d[e]=h}}},c=q.Promise||function(e){function i(a){for(y=!0;d.length;)d.shift()(a)}var d=[],y=!1,h={catch:function(){return h},then:function(a){return d.push(a),y&&setTimeout(i,1),h}};return e(i),h},_=!1,v=r(null),b=r(null),N=new u,R=function(e){return e.toLowerCase()},S=he.create||function e(i){return i?(e.prototype=i,new e):this},O=l||(E?function(e,i){return e.__proto__=i,e}:n&&it?function(){function e(i,d){for(var y,h=n(d),a=0,p=h.length;a<p;a++)Fe.call(i,y=h[a])||Qe(i,y,it(d,y))}return function(i,d){do{e(i,d)}while((d=s(d))&&!yt.call(d,i));return i}}():function(e,i){for(var d in i)e[d]=i[d];return e}),j=q.MutationObserver||q.WebKitMutationObserver,U=q.HTMLAnchorElement,A=(q.HTMLElement||q.Element||q.Node).prototype,J=!yt.call(A,Je),X=J?function(e,i,d){return e[i]=d.value,e}:Qe,H=J?function(e){return 1===e.nodeType}:function(e){return yt.call(A,e)},C=J&&[],G=A.attachShadow,Q=A.cloneNode,$=A.closest||function(e){for(var i=this;i&&i.nodeName!==e;)i=i.parentNode;return i},ie=A.dispatchEvent,x=A.getAttribute,fe=A.hasAttribute,Y=A.removeAttribute,ae=A.setAttribute,I=B.createElement,z=B.importNode,Z=I,we=j&&{attributes:!0,characterData:!0,attributeOldValue:!0},We=j||function(e){V=!1,Je.removeEventListener(ke,We)},K=0,Ne=Te in B&&!/^force-all/.test(se.type),Re=!0,re=!1,V=!0,D=!0,o=!0;if(j&&((Ze=B.createElement("div")).innerHTML="<div><div></div></div>",new j(function(e,i){if(e[0]&&"childList"==e[0].type&&!e[0].removedNodes[0].childNodes.length){var d=(Ze=it(A,"innerHTML"))&&Ze.set;d&&Qe(A,"innerHTML",{set:function(y){for(;this.lastChild;)this.removeChild(this.lastChild);d.call(this,y)}})}i.disconnect(),Ze=null}).observe(Ze,{childList:!0,subtree:!0}),Ze.innerHTML=""),Ne||(l||E?(Ie=function(e,i){yt.call(i,e)||tt(e,i)},ge=tt):(Ie=function(e,i){e[be]||(e[be]=he(!0),tt(e,i))},ge=Ie),J?(V=!1,e=it(A,Me),i=e.value,d=function(a){var p=new CustomEvent(ke,{bubbles:!0});p.attrName=a,p.prevValue=x.call(this,a),p.newValue=null,p[mt]=p.attrChange=2,Y.call(this,a),ie.call(this,p)},y=function(a,p){var T=fe.call(this,a),w=T&&x.call(this,a),L=new CustomEvent(ke,{bubbles:!0});ae.call(this,a,p),L.attrName=a,L.prevValue=T?w:null,L.newValue=p,T?L.MODIFICATION=L.attrChange=1:L[$e]=L.attrChange=0,ie.call(this,L)},h=function(a){var p,T=a.currentTarget,w=T[be],L=a.propertyName;w.hasOwnProperty(L)&&(w=w[L],(p=new CustomEvent(ke,{bubbles:!0})).attrName=w.name,p.prevValue=w.value||null,p.newValue=w.value=T[L]||null,null==p.prevValue?p[$e]=p.attrChange=0:p.MODIFICATION=p.attrChange=1,ie.call(T,p))},e.value=function(a,p,T){a===ke&&this[He]&&this.setAttribute!==y&&(this[be]={className:{name:"class",value:this.className}},this.setAttribute=y,this.removeAttribute=d,i.call(this,"propertychange",h)),i.call(this,a,p,T)},Qe(A,Me,e)):j||(Je[Me](ke,We),Je.setAttribute(be,1),Je.removeAttribute(be),V&&(Ye=function(e){var i,d,y,h=this;if(h===e.target){for(y in i=h[be],h[be]=d=dt(h),d){if(!(y in i))return rt(0,h,y,i[y],d[y],$e);if(d[y]!==i[y])return rt(1,h,y,i[y],d[y],"MODIFICATION")}for(y in i)if(!(y in d))return rt(2,h,y,i[y],d[y],mt)}},rt=function(e,i,d,y,h,a){var p={attrChange:e,currentTarget:i,attrName:d,prevValue:y,newValue:h};p[a]=e,xe(p)},dt=function(e){for(var i,d,y={},h=e.attributes,a=0,p=h.length;a<p;a++)"setAttribute"!==(d=(i=h[a]).name)&&(y[d]=i.value);return y})),B[Te]=function(e,i){if(d=e.toUpperCase(),Re&&(Re=!1,j?(Ke=function(w,L){function k(M,P){for(var F=0,te=M.length;F<te;P(M[F++]));}return new j(function(M){for(var P,F,te,pe=0,Ge=M.length;pe<Ge;pe++)"childList"===(P=M[pe]).type?(k(P.addedNodes,w),k(P.removedNodes,L)):(F=P.target,o&&F[He]&&"style"!==P.attributeName&&(te=x.call(F,P.attributeName))!==P.oldValue&&F[He](P.attributeName,P.oldValue,te))})}(st(Le),st(ve)),(ye=function(w){return Ke.observe(w,{childList:!0,subtree:!0}),w})(B),G&&(A.attachShadow=function(){return ye(G.apply(this,arguments))})):(nt=[],B[Me]("DOMNodeInserted",qe(Le)),B[Me]("DOMNodeRemoved",qe(ve))),B[Me](vt,_e),B[Me]("readystatechange",_e),B.importNode=function(w,L){switch(w.nodeType){case 1:return Ue(B,z,[w,!!L]);case 11:for(var k=B.createDocumentFragment(),M=w.childNodes,P=M.length,F=0;F<P;F++)k.appendChild(B.importNode(M[F],!!L));return k;default:return Q.call(w,!!L)}},A.cloneNode=function(w){return Ue(this,Q,[!!w])}),re)return re=!1;if(-2<Se.call(Ve,ne+d)+Se.call(Ve,ot+d)&&W(e),!Ct.test(d)||-1<Se.call(kt,d))throw new Error("The type "+e+" is invalid");var d,y,h=function(){return p?B.createElement(T,d):B.createElement(T)},a=i||_t,p=Fe.call(a,ce),T=p?i[ce].toUpperCase():d;return p&&-1<Se.call(Ve,ot+T)&&W(T),y=Ve.push((p?ne:ot)+d)-1,me=me.concat(me.length?",":"",p?T+'[is="'+e.toLowerCase()+'"]':T),h.prototype=Be[y]=Fe.call(a,"prototype")?a.prototype:S(A),me.length&&Ae(B.querySelectorAll(me),Le),h},B.createElement=Z=function(e,i){var d=Tt(i),y=d?I.call(B,e,R(d)):I.call(B,e),h=""+e,a=Se.call(Ve,(d?ne:ot)+(d||h).toUpperCase()),p=-1<a;return d&&(y.setAttribute("is",d=d.toLowerCase()),p&&(p=ze(h.toUpperCase(),d))),o=!B.createElement.innerHTMLHelper,p&&ge(y,Be[a]),y}),addEventListener("beforeunload",function(){delete B.createElement,delete B.importNode,delete B[Te]},!1),Oe.prototype={constructor:Oe,define:t?function(e,i,d){if(d)oe(e,i,d);else{var y=e.toUpperCase();v[y]={constructor:i,create:[y]},N.set(i,y),g.define(e,i)}}:oe,get:t?function(e){return g.get(e)||ct(e)}:ct,whenDefined:t?function(e){return c.race([g.whenDefined(e),ut(e)])}:ut},!g||/^force/.test(se.type))ft();else if(!se.noBuiltIn)try{!function(e,i,d){var y=new RegExp("^<a\\s+is=('|\")"+d+"\\1></a>$");if(i[ce]="a",(e.prototype=S(U.prototype)).constructor=e,q.customElements.define(d,e,i),!y.test(B.createElement("a",{is:d}).outerHTML)||!y.test((new e).outerHTML))throw i}(function e(){return Reflect.construct(U,[],e)},{},"document-register-element-a"+ee)}catch(e){ft()}if(!se.noBuiltIn)try{if(I.call(B,"a","a").outerHTML.indexOf("is")<0)throw{}}catch(e){R=function(i){return{is:i.toLowerCase()}}}}(window)},8583:()=>{"use strict";!function(t){const r=t.performance;function u(V){r&&r.mark&&r.mark(V)}function c(V,D){r&&r.measure&&r.measure(V,D)}u("Zone");const _=t.__Zone_symbol_prefix||"__zone_symbol__";function v(V){return _+V}const b=!0===t[v("forceDuplicateZoneCheck")];if(t.Zone){if(b||"function"!=typeof t.Zone.__symbol__)throw new Error("Zone already loaded.");return t.Zone}let N=(()=>{class V{constructor(o,e){this._parent=o,this._name=e?e.name||"unnamed":"<root>",this._properties=e&&e.properties||{},this._zoneDelegate=new S(this,this._parent&&this._parent._zoneDelegate,e)}static assertZonePatched(){if(t.Promise!==we.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let o=V.current;for(;o.parent;)o=o.parent;return o}static get current(){return K.zone}static get currentTask(){return Ne}static __load_patch(o,e,i=!1){if(we.hasOwnProperty(o)){if(!i&&b)throw Error("Already loaded patch: "+o)}else if(!t["__Zone_disable_"+o]){const d="Zone:"+o;u(d),we[o]=e(t,V,We),c(d,d)}}get parent(){return this._parent}get name(){return this._name}get(o){const e=this.getZoneWith(o);if(e)return e._properties[o]}getZoneWith(o){let e=this;for(;e;){if(e._properties.hasOwnProperty(o))return e;e=e._parent}return null}fork(o){if(!o)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,o)}wrap(o,e){if("function"!=typeof o)throw new Error("Expecting function got: "+o);const i=this._zoneDelegate.intercept(this,o,e),d=this;return function(){return d.runGuarded(i,this,arguments,e)}}run(o,e,i,d){K={parent:K,zone:this};try{return this._zoneDelegate.invoke(this,o,e,i,d)}finally{K=K.parent}}runGuarded(o,e=null,i,d){K={parent:K,zone:this};try{try{return this._zoneDelegate.invoke(this,o,e,i,d)}catch(y){if(this._zoneDelegate.handleError(this,y))throw y}}finally{K=K.parent}}runTask(o,e,i){if(o.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");if(o.state===$&&(o.type===Z||o.type===z))return;const d=o.state!=fe;d&&o._transitionTo(fe,x),o.runCount++;const y=Ne;Ne=o,K={parent:K,zone:this};try{o.type==z&&o.data&&!o.data.isPeriodic&&(o.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,o,e,i)}catch(h){if(this._zoneDelegate.handleError(this,h))throw h}}finally{o.state!==$&&o.state!==ae&&(o.type==Z||o.data&&o.data.isPeriodic?d&&o._transitionTo(x,fe):(o.runCount=0,this._updateTaskCount(o,-1),d&&o._transitionTo($,fe,$))),K=K.parent,Ne=y}}scheduleTask(o){if(o.zone&&o.zone!==this){let i=this;for(;i;){if(i===o.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${o.zone.name}`);i=i.parent}}o._transitionTo(ie,$);const e=[];o._zoneDelegates=e,o._zone=this;try{o=this._zoneDelegate.scheduleTask(this,o)}catch(i){throw o._transitionTo(ae,ie,$),this._zoneDelegate.handleError(this,i),i}return o._zoneDelegates===e&&this._updateTaskCount(o,1),o.state==ie&&o._transitionTo(x,ie),o}scheduleMicroTask(o,e,i,d){return this.scheduleTask(new O(I,o,e,i,d,void 0))}scheduleMacroTask(o,e,i,d,y){return this.scheduleTask(new O(z,o,e,i,d,y))}scheduleEventTask(o,e,i,d,y){return this.scheduleTask(new O(Z,o,e,i,d,y))}cancelTask(o){if(o.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");o._transitionTo(Y,x,fe);try{this._zoneDelegate.cancelTask(this,o)}catch(e){throw o._transitionTo(ae,Y),this._zoneDelegate.handleError(this,e),e}return this._updateTaskCount(o,-1),o._transitionTo($,Y),o.runCount=0,o}_updateTaskCount(o,e){const i=o._zoneDelegates;-1==e&&(o._zoneDelegates=null);for(let d=0;d<i.length;d++)i[d]._updateTaskCount(o.type,e)}}return V.__symbol__=v,V})();const R={name:"",onHasTask:(V,D,o,e)=>V.hasTask(o,e),onScheduleTask:(V,D,o,e)=>V.scheduleTask(o,e),onInvokeTask:(V,D,o,e,i,d)=>V.invokeTask(o,e,i,d),onCancelTask:(V,D,o,e)=>V.cancelTask(o,e)};class S{constructor(D,o,e){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this.zone=D,this._parentDelegate=o,this._forkZS=e&&(e&&e.onFork?e:o._forkZS),this._forkDlgt=e&&(e.onFork?o:o._forkDlgt),this._forkCurrZone=e&&(e.onFork?this.zone:o._forkCurrZone),this._interceptZS=e&&(e.onIntercept?e:o._interceptZS),this._interceptDlgt=e&&(e.onIntercept?o:o._interceptDlgt),this._interceptCurrZone=e&&(e.onIntercept?this.zone:o._interceptCurrZone),this._invokeZS=e&&(e.onInvoke?e:o._invokeZS),this._invokeDlgt=e&&(e.onInvoke?o:o._invokeDlgt),this._invokeCurrZone=e&&(e.onInvoke?this.zone:o._invokeCurrZone),this._handleErrorZS=e&&(e.onHandleError?e:o._handleErrorZS),this._handleErrorDlgt=e&&(e.onHandleError?o:o._handleErrorDlgt),this._handleErrorCurrZone=e&&(e.onHandleError?this.zone:o._handleErrorCurrZone),this._scheduleTaskZS=e&&(e.onScheduleTask?e:o._scheduleTaskZS),this._scheduleTaskDlgt=e&&(e.onScheduleTask?o:o._scheduleTaskDlgt),this._scheduleTaskCurrZone=e&&(e.onScheduleTask?this.zone:o._scheduleTaskCurrZone),this._invokeTaskZS=e&&(e.onInvokeTask?e:o._invokeTaskZS),this._invokeTaskDlgt=e&&(e.onInvokeTask?o:o._invokeTaskDlgt),this._invokeTaskCurrZone=e&&(e.onInvokeTask?this.zone:o._invokeTaskCurrZone),this._cancelTaskZS=e&&(e.onCancelTask?e:o._cancelTaskZS),this._cancelTaskDlgt=e&&(e.onCancelTask?o:o._cancelTaskDlgt),this._cancelTaskCurrZone=e&&(e.onCancelTask?this.zone:o._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const i=e&&e.onHasTask;(i||o&&o._hasTaskZS)&&(this._hasTaskZS=i?e:R,this._hasTaskDlgt=o,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=D,e.onScheduleTask||(this._scheduleTaskZS=R,this._scheduleTaskDlgt=o,this._scheduleTaskCurrZone=this.zone),e.onInvokeTask||(this._invokeTaskZS=R,this._invokeTaskDlgt=o,this._invokeTaskCurrZone=this.zone),e.onCancelTask||(this._cancelTaskZS=R,this._cancelTaskDlgt=o,this._cancelTaskCurrZone=this.zone))}fork(D,o){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,D,o):new N(D,o)}intercept(D,o,e){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,D,o,e):o}invoke(D,o,e,i,d){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,D,o,e,i,d):o.apply(e,i)}handleError(D,o){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,D,o)}scheduleTask(D,o){let e=o;if(this._scheduleTaskZS)this._hasTaskZS&&e._zoneDelegates.push(this._hasTaskDlgtOwner),e=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,D,o),e||(e=o);else if(o.scheduleFn)o.scheduleFn(o);else{if(o.type!=I)throw new Error("Task is missing scheduleFn.");C(o)}return e}invokeTask(D,o,e,i){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,D,o,e,i):o.callback.apply(e,i)}cancelTask(D,o){let e;if(this._cancelTaskZS)e=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,D,o);else{if(!o.cancelFn)throw Error("Task is not cancelable");e=o.cancelFn(o)}return e}hasTask(D,o){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,D,o)}catch(e){this.handleError(D,e)}}_updateTaskCount(D,o){const e=this._taskCounts,i=e[D],d=e[D]=i+o;if(d<0)throw new Error("More tasks executed then were scheduled.");0!=i&&0!=d||this.hasTask(this.zone,{microTask:e.microTask>0,macroTask:e.macroTask>0,eventTask:e.eventTask>0,change:D})}}class O{constructor(D,o,e,i,d,y){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=D,this.source=o,this.data=i,this.scheduleFn=d,this.cancelFn=y,!e)throw new Error("callback is not defined");this.callback=e;const h=this;this.invoke=D===Z&&i&&i.useG?O.invokeTask:function(){return O.invokeTask.call(t,h,this,arguments)}}static invokeTask(D,o,e){D||(D=this),Re++;try{return D.runCount++,D.zone.runTask(D,o,e)}finally{1==Re&&G(),Re--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo($,ie)}_transitionTo(D,o,e){if(this._state!==o&&this._state!==e)throw new Error(`${this.type} '${this.source}': can not transition to '${D}', expecting state '${o}'${e?" or '"+e+"'":""}, was '${this._state}'.`);this._state=D,D==$&&(this._zoneDelegates=null)}toString(){return this.data&&void 0!==this.data.handleId?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const j=v("setTimeout"),U=v("Promise"),A=v("then");let H,J=[],X=!1;function C(V){if(0===Re&&0===J.length)if(H||t[U]&&(H=t[U].resolve(0)),H){let D=H[A];D||(D=H.then),D.call(H,G)}else t[j](G,0);V&&J.push(V)}function G(){if(!X){for(X=!0;J.length;){const V=J;J=[];for(let D=0;D<V.length;D++){const o=V[D];try{o.zone.runTask(o,null,null)}catch(e){We.onUnhandledError(e)}}}We.microtaskDrainDone(),X=!1}}const Q={name:"NO ZONE"},$="notScheduled",ie="scheduling",x="scheduled",fe="running",Y="canceling",ae="unknown",I="microTask",z="macroTask",Z="eventTask",we={},We={symbol:v,currentZoneFrame:()=>K,onUnhandledError:re,microtaskDrainDone:re,scheduleMicroTask:C,showUncaughtError:()=>!N[v("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:re,patchMethod:()=>re,bindArguments:()=>[],patchThen:()=>re,patchMacroTask:()=>re,patchEventPrototype:()=>re,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>re,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>re,wrapWithCurrentZone:()=>re,filterProperties:()=>[],attachOriginToPatched:()=>re,_redefineProperty:()=>re,patchCallbacks:()=>re};let K={parent:null,zone:new N(null,null)},Ne=null,Re=0;function re(){}c("Zone","Zone"),t.Zone=N}("undefined"!=typeof window&&window||"undefined"!=typeof self&&self||global);const se=Object.getOwnPropertyDescriptor,Ee=Object.defineProperty,Ae=Object.getPrototypeOf,bt=Object.create,st=Array.prototype.slice,et="addEventListener",ze="removeEventListener",xe=Zone.__symbol__(et),qe=Zone.__symbol__(ze),_e="true",De="false",Ue=Zone.__symbol__("");function tt(t,r){return Zone.current.wrap(t,r)}function at(t,r,u,c,_){return Zone.current.scheduleMacroTask(t,r,u,c,_)}const W=Zone.__symbol__,Xe="undefined"!=typeof window,Oe=Xe?window:void 0,oe=Xe&&Oe||"object"==typeof self&&self||global,Tt=[null];function lt(t,r){for(let u=t.length-1;u>=0;u--)"function"==typeof t[u]&&(t[u]=tt(t[u],r+"_"+u));return t}function ft(t){return!t||!1!==t.writable&&!("function"==typeof t.get&&void 0===t.set)}const B="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,he=!("nw"in oe)&&void 0!==oe.process&&"[object process]"==={}.toString.call(oe.process),ht=!he&&!B&&!(!Xe||!Oe.HTMLElement),nt=void 0!==oe.process&&"[object process]"==={}.toString.call(oe.process)&&!B&&!(!Xe||!Oe.HTMLElement),Ye={},rt=function(t){if(!(t=t||oe.event))return;let r=Ye[t.type];r||(r=Ye[t.type]=W("ON_PROPERTY"+t.type));const u=this||t.target||oe,c=u[r];let _;if(ht&&u===Oe&&"error"===t.type){const v=t;_=c&&c.call(this,v.message,v.filename,v.lineno,v.colno,v.error),!0===_&&t.preventDefault()}else _=c&&c.apply(this,arguments),null!=_&&!_&&t.preventDefault();return _};function dt(t,r,u){let c=se(t,r);if(!c&&u&&se(u,r)&&(c={enumerable:!0,configurable:!0}),!c||!c.configurable)return;const _=W("on"+r+"patched");if(t.hasOwnProperty(_)&&t[_])return;delete c.writable,delete c.value;const v=c.get,b=c.set,N=r.substr(2);let R=Ye[N];R||(R=Ye[N]=W("ON_PROPERTY"+N)),c.set=function(S){let O=this;!O&&t===oe&&(O=oe),O&&(O[R]&&O.removeEventListener(N,rt),b&&b.apply(O,Tt),"function"==typeof S?(O[R]=S,O.addEventListener(N,rt,!1)):O[R]=null)},c.get=function(){let S=this;if(!S&&t===oe&&(S=oe),!S)return null;const O=S[R];if(O)return O;if(v){let j=v&&v.call(this);if(j)return c.set.call(this,j),"function"==typeof S.removeAttribute&&S.removeAttribute(r),j}return null},Ee(t,r,c),t[_]=!0}function Ke(t,r,u){if(r)for(let c=0;c<r.length;c++)dt(t,"on"+r[c],u);else{const c=[];for(const _ in t)"on"==_.substr(0,2)&&c.push(_);for(let _=0;_<c.length;_++)dt(t,c[_],u)}}const ye=W("originalInstance");function Ie(t){const r=oe[t];if(!r)return;oe[W(t)]=r,oe[t]=function(){const _=lt(arguments,t);switch(_.length){case 0:this[ye]=new r;break;case 1:this[ye]=new r(_[0]);break;case 2:this[ye]=new r(_[0],_[1]);break;case 3:this[ye]=new r(_[0],_[1],_[2]);break;case 4:this[ye]=new r(_[0],_[1],_[2],_[3]);break;default:throw new Error("Arg list too long.")}},Te(oe[t],r);const u=new r(function(){});let c;for(c in u)"XMLHttpRequest"===t&&"responseBlob"===c||function(_){"function"==typeof u[_]?oe[t].prototype[_]=function(){return this[ye][_].apply(this[ye],arguments)}:Ee(oe[t].prototype,_,{set:function(v){"function"==typeof v?(this[ye][_]=tt(v,t+"."+_),Te(this[ye][_],v)):this[ye][_]=v},get:function(){return this[ye][_]}})}(c);for(c in r)"prototype"!==c&&r.hasOwnProperty(c)&&(oe[t][c]=r[c])}function ge(t,r,u){let c=t;for(;c&&!c.hasOwnProperty(r);)c=Ae(c);!c&&t[r]&&(c=t);const _=W(r);let v=null;if(c&&(!(v=c[_])||!c.hasOwnProperty(_))&&(v=c[_]=c[r],ft(c&&se(c,r)))){const N=u(v,_,r);c[r]=function(){return N(this,arguments)},Te(c[r],v)}return v}function Ze(t,r,u){let c=null;function _(v){const b=v.data;return b.args[b.cbIdx]=function(){v.invoke.apply(this,arguments)},c.apply(b.target,b.args),v}c=ge(t,r,v=>function(b,N){const R=u(b,N);return R.cbIdx>=0&&"function"==typeof N[R.cbIdx]?at(R.name,N[R.cbIdx],R,_):v.apply(b,N)})}function Te(t,r){t[W("OriginalDelegate")]=r}let ee=!1,be=!1;function Le(){if(ee)return be;ee=!0;try{const t=Oe.navigator.userAgent;(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/")||-1!==t.indexOf("Edge/"))&&(be=!0)}catch(t){}return be}Zone.__load_patch("ZoneAwarePromise",(t,r,u)=>{const c=Object.getOwnPropertyDescriptor,_=Object.defineProperty,b=u.symbol,N=[],R=!0===t[b("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],S=b("Promise"),O=b("then");u.onUnhandledError=h=>{if(u.showUncaughtError()){const a=h&&h.rejection;a?console.error("Unhandled Promise rejection:",a instanceof Error?a.message:a,"; Zone:",h.zone.name,"; Task:",h.task&&h.task.source,"; Value:",a,a instanceof Error?a.stack:void 0):console.error(h)}},u.microtaskDrainDone=()=>{for(;N.length;){const h=N.shift();try{h.zone.runGuarded(()=>{throw h.throwOriginal?h.rejection:h})}catch(a){A(a)}}};const U=b("unhandledPromiseRejectionHandler");function A(h){u.onUnhandledError(h);try{const a=r[U];"function"==typeof a&&a.call(this,h)}catch(a){}}function J(h){return h&&h.then}function X(h){return h}function H(h){return o.reject(h)}const C=b("state"),G=b("value"),Q=b("finally"),$=b("parentPromiseValue"),ie=b("parentPromiseState"),fe=null,Y=!0,ae=!1;function z(h,a){return p=>{try{K(h,a,p)}catch(T){K(h,!1,T)}}}const We=b("currentTaskTrace");function K(h,a,p){const T=function(){let h=!1;return function(p){return function(){h||(h=!0,p.apply(null,arguments))}}}();if(h===p)throw new TypeError("Promise resolved with itself");if(h[C]===fe){let w=null;try{("object"==typeof p||"function"==typeof p)&&(w=p&&p.then)}catch(L){return T(()=>{K(h,!1,L)})(),h}if(a!==ae&&p instanceof o&&p.hasOwnProperty(C)&&p.hasOwnProperty(G)&&p[C]!==fe)Re(p),K(h,p[C],p[G]);else if(a!==ae&&"function"==typeof w)try{w.call(p,T(z(h,a)),T(z(h,!1)))}catch(L){T(()=>{K(h,!1,L)})()}else{h[C]=a;const L=h[G];if(h[G]=p,h[Q]===Q&&a===Y&&(h[C]=h[ie],h[G]=h[$]),a===ae&&p instanceof Error){const k=r.currentTask&&r.currentTask.data&&r.currentTask.data.__creationTrace__;k&&_(p,We,{configurable:!0,enumerable:!1,writable:!0,value:k})}for(let k=0;k<L.length;)re(h,L[k++],L[k++],L[k++],L[k++]);if(0==L.length&&a==ae){h[C]=0;let k=p;try{throw new Error("Uncaught (in promise): "+function v(h){return h&&h.toString===Object.prototype.toString?(h.constructor&&h.constructor.name||"")+": "+JSON.stringify(h):h?h.toString():Object.prototype.toString.call(h)}(p)+(p&&p.stack?"\n"+p.stack:""))}catch(M){k=M}R&&(k.throwOriginal=!0),k.rejection=p,k.promise=h,k.zone=r.current,k.task=r.currentTask,N.push(k),u.scheduleMicroTask()}}}return h}const Ne=b("rejectionHandledHandler");function Re(h){if(0===h[C]){try{const a=r[Ne];a&&"function"==typeof a&&a.call(this,{rejection:h[G],promise:h})}catch(a){}h[C]=ae;for(let a=0;a<N.length;a++)h===N[a].promise&&N.splice(a,1)}}function re(h,a,p,T,w){Re(h);const L=h[C],k=L?"function"==typeof T?T:X:"function"==typeof w?w:H;a.scheduleMicroTask("Promise.then",()=>{try{const M=h[G],P=!!p&&Q===p[Q];P&&(p[$]=M,p[ie]=L);const F=a.run(k,void 0,P&&k!==H&&k!==X?[]:[M]);K(p,!0,F)}catch(M){K(p,!1,M)}},p)}const D=function(){};class o{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(a){return K(new this(null),Y,a)}static reject(a){return K(new this(null),ae,a)}static race(a){let p,T,w=new this((M,P)=>{p=M,T=P});function L(M){p(M)}function k(M){T(M)}for(let M of a)J(M)||(M=this.resolve(M)),M.then(L,k);return w}static all(a){return o.allWithCallback(a)}static allSettled(a){return(this&&this.prototype instanceof o?this:o).allWithCallback(a,{thenCallback:T=>({status:"fulfilled",value:T}),errorCallback:T=>({status:"rejected",reason:T})})}static allWithCallback(a,p){let T,w,L=new this((F,te)=>{T=F,w=te}),k=2,M=0;const P=[];for(let F of a){J(F)||(F=this.resolve(F));const te=M;try{F.then(pe=>{P[te]=p?p.thenCallback(pe):pe,k--,0===k&&T(P)},pe=>{p?(P[te]=p.errorCallback(pe),k--,0===k&&T(P)):w(pe)})}catch(pe){w(pe)}k++,M++}return k-=2,0===k&&T(P),L}constructor(a){const p=this;if(!(p instanceof o))throw new Error("Must be an instanceof Promise.");p[C]=fe,p[G]=[];try{a&&a(z(p,Y),z(p,ae))}catch(T){K(p,!1,T)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return o}then(a,p){let T=this.constructor[Symbol.species];(!T||"function"!=typeof T)&&(T=this.constructor||o);const w=new T(D),L=r.current;return this[C]==fe?this[G].push(L,w,a,p):re(this,L,w,a,p),w}catch(a){return this.then(null,a)}finally(a){let p=this.constructor[Symbol.species];(!p||"function"!=typeof p)&&(p=o);const T=new p(D);T[Q]=Q;const w=r.current;return this[C]==fe?this[G].push(w,T,a,a):re(this,w,T,a,a),T}}o.resolve=o.resolve,o.reject=o.reject,o.race=o.race,o.all=o.all;const e=t[S]=t.Promise;t.Promise=o;const i=b("thenPatched");function d(h){const a=h.prototype,p=c(a,"then");if(p&&(!1===p.writable||!p.configurable))return;const T=a.then;a[O]=T,h.prototype.then=function(w,L){return new o((M,P)=>{T.call(this,M,P)}).then(w,L)},h[i]=!0}return u.patchThen=d,e&&(d(e),ge(t,"fetch",h=>function y(h){return function(a,p){let T=h.apply(a,p);if(T instanceof o)return T;let w=T.constructor;return w[i]||d(w),T}}(h))),Promise[r.__symbol__("uncaughtPromiseErrors")]=N,o}),Zone.__load_patch("toString",t=>{const r=Function.prototype.toString,u=W("OriginalDelegate"),c=W("Promise"),_=W("Error"),v=function(){if("function"==typeof this){const S=this[u];if(S)return"function"==typeof S?r.call(S):Object.prototype.toString.call(S);if(this===Promise){const O=t[c];if(O)return r.call(O)}if(this===Error){const O=t[_];if(O)return r.call(O)}}return r.call(this)};v[u]=r,Function.prototype.toString=v;const b=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":b.call(this)}});let de=!1;if("undefined"!=typeof window)try{const t=Object.defineProperty({},"passive",{get:function(){de=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){de=!1}const ve={useG:!0},ce={},He={},pt=new RegExp("^"+Ue+"(\\w+)(true|false)$"),je=W("propagationStopped");function Ce(t,r){const u=(r?r(t):t)+De,c=(r?r(t):t)+_e,_=Ue+u,v=Ue+c;ce[t]={},ce[t][De]=_,ce[t][_e]=v}function le(t,r,u){const c=u&&u.add||et,_=u&&u.rm||ze,v=u&&u.listeners||"eventListeners",b=u&&u.rmAll||"removeAllListeners",N=W(c),R="."+c+":",j=function(H,C,G){if(H.isRemoved)return;const Q=H.callback;"object"==typeof Q&&Q.handleEvent&&(H.callback=ie=>Q.handleEvent(ie),H.originalDelegate=Q),H.invoke(H,C,[G]);const $=H.options;$&&"object"==typeof $&&$.once&&C[_].call(C,G.type,H.originalDelegate?H.originalDelegate:H.callback,$)},U=function(H){if(!(H=H||t.event))return;const C=this||H.target||t,G=C[ce[H.type][De]];if(G)if(1===G.length)j(G[0],C,H);else{const Q=G.slice();for(let $=0;$<Q.length&&(!H||!0!==H[je]);$++)j(Q[$],C,H)}},A=function(H){if(!(H=H||t.event))return;const C=this||H.target||t,G=C[ce[H.type][_e]];if(G)if(1===G.length)j(G[0],C,H);else{const Q=G.slice();for(let $=0;$<Q.length&&(!H||!0!==H[je]);$++)j(Q[$],C,H)}};function J(H,C){if(!H)return!1;let G=!0;C&&void 0!==C.useG&&(G=C.useG);const Q=C&&C.vh;let $=!0;C&&void 0!==C.chkDup&&($=C.chkDup);let ie=!1;C&&void 0!==C.rt&&(ie=C.rt);let x=H;for(;x&&!x.hasOwnProperty(c);)x=Ae(x);if(!x&&H[c]&&(x=H),!x||x[N])return!1;const fe=C&&C.eventNameToString,Y={},ae=x[N]=x[c],I=x[W(_)]=x[_],z=x[W(v)]=x[v],Z=x[W(b)]=x[b];let we;function We(a,p){return!de&&"object"==typeof a&&a?!!a.capture:de&&p?"boolean"==typeof a?{capture:a,passive:!0}:a?"object"==typeof a&&!1!==a.passive?Object.assign(Object.assign({},a),{passive:!0}):a:{passive:!0}:a}C&&C.prepend&&(we=x[W(C.prepend)]=x[C.prepend]);const D=G?function(a){if(!Y.isExisting)return ae.call(Y.target,Y.eventName,Y.capture?A:U,Y.options)}:function(a){return ae.call(Y.target,Y.eventName,a.invoke,Y.options)},o=G?function(a){if(!a.isRemoved){const p=ce[a.eventName];let T;p&&(T=p[a.capture?_e:De]);const w=T&&a.target[T];if(w)for(let L=0;L<w.length;L++)if(w[L]===a){w.splice(L,1),a.isRemoved=!0,0===w.length&&(a.allRemoved=!0,a.target[T]=null);break}}if(a.allRemoved)return I.call(a.target,a.eventName,a.capture?A:U,a.options)}:function(a){return I.call(a.target,a.eventName,a.invoke,a.options)},i=C&&C.diff?C.diff:function(a,p){const T=typeof p;return"function"===T&&a.callback===p||"object"===T&&a.originalDelegate===p},d=Zone[W("UNPATCHED_EVENTS")],y=t[W("PASSIVE_EVENTS")],h=function(a,p,T,w,L=!1,k=!1){return function(){const M=this||t;let P=arguments[0];C&&C.transferEventName&&(P=C.transferEventName(P));let F=arguments[1];if(!F)return a.apply(this,arguments);if(he&&"uncaughtException"===P)return a.apply(this,arguments);let te=!1;if("function"!=typeof F){if(!F.handleEvent)return a.apply(this,arguments);te=!0}if(Q&&!Q(a,F,M,arguments))return;const pe=de&&!!y&&-1!==y.indexOf(P),Ge=We(arguments[2],pe);if(d)for(let wt=0;wt<d.length;wt++)if(P===d[wt])return pe?a.call(M,P,F,Ge):a.apply(this,arguments);const Dt=!!Ge&&("boolean"==typeof Ge||Ge.capture),Ht=!(!Ge||"object"!=typeof Ge)&&Ge.once,It=Zone.current;let Ot=ce[P];Ot||(Ce(P,fe),Ot=ce[P]);const Pt=Ot[Dt?_e:De];let Nt,Mt=M[Pt],St=!1;if(Mt){if(St=!0,$)for(let wt=0;wt<Mt.length;wt++)if(i(Mt[wt],F))return}else Mt=M[Pt]=[];const Rt=M.constructor.name,At=He[Rt];At&&(Nt=At[P]),Nt||(Nt=Rt+p+(fe?fe(P):P)),Y.options=Ge,Ht&&(Y.options.once=!1),Y.target=M,Y.capture=Dt,Y.eventName=P,Y.isExisting=St;const Lt=G?ve:void 0;Lt&&(Lt.taskData=Y);const gt=It.scheduleEventTask(Nt,F,Lt,T,w);return Y.target=null,Lt&&(Lt.taskData=null),Ht&&(Ge.once=!0),!de&&"boolean"==typeof gt.options||(gt.options=Ge),gt.target=M,gt.capture=Dt,gt.eventName=P,te&&(gt.originalDelegate=F),k?Mt.unshift(gt):Mt.push(gt),L?M:void 0}};return x[c]=h(ae,R,D,o,ie),we&&(x.prependListener=h(we,".prependListener:",function(a){return we.call(Y.target,Y.eventName,a.invoke,Y.options)},o,ie,!0)),x[_]=function(){const a=this||t;let p=arguments[0];C&&C.transferEventName&&(p=C.transferEventName(p));const T=arguments[2],w=!!T&&("boolean"==typeof T||T.capture),L=arguments[1];if(!L)return I.apply(this,arguments);if(Q&&!Q(I,L,a,arguments))return;const k=ce[p];let M;k&&(M=k[w?_e:De]);const P=M&&a[M];if(P)for(let F=0;F<P.length;F++){const te=P[F];if(i(te,L))return P.splice(F,1),te.isRemoved=!0,0===P.length&&(te.allRemoved=!0,a[M]=null,"string"==typeof p)&&(a[Ue+"ON_PROPERTY"+p]=null),te.zone.cancelTask(te),ie?a:void 0}return I.apply(this,arguments)},x[v]=function(){const a=this||t;let p=arguments[0];C&&C.transferEventName&&(p=C.transferEventName(p));const T=[],w=Pe(a,fe?fe(p):p);for(let L=0;L<w.length;L++){const k=w[L];T.push(k.originalDelegate?k.originalDelegate:k.callback)}return T},x[b]=function(){const a=this||t;let p=arguments[0];if(p){C&&C.transferEventName&&(p=C.transferEventName(p));const T=ce[p];if(T){const k=a[T[De]],M=a[T[_e]];if(k){const P=k.slice();for(let F=0;F<P.length;F++){const te=P[F];this[_].call(this,p,te.originalDelegate?te.originalDelegate:te.callback,te.options)}}if(M){const P=M.slice();for(let F=0;F<P.length;F++){const te=P[F];this[_].call(this,p,te.originalDelegate?te.originalDelegate:te.callback,te.options)}}}}else{const T=Object.keys(a);for(let w=0;w<T.length;w++){const k=pt.exec(T[w]);let M=k&&k[1];M&&"removeListener"!==M&&this[b].call(this,M)}this[b].call(this,"removeListener")}if(ie)return this},Te(x[c],ae),Te(x[_],I),Z&&Te(x[b],Z),z&&Te(x[v],z),!0}let X=[];for(let H=0;H<r.length;H++)X[H]=J(r[H],u);return X}function Pe(t,r){if(!r){const v=[];for(let b in t){const N=pt.exec(b);let R=N&&N[1];if(R&&(!r||R===r)){const S=t[b];if(S)for(let O=0;O<S.length;O++)v.push(S[O])}}return v}let u=ce[r];u||(Ce(r),u=ce[r]);const c=t[u[De]],_=t[u[_e]];return c?_?c.concat(_):c.slice():_?_.slice():[]}function $e(t,r){const u=t.Event;u&&u.prototype&&r.patchMethod(u.prototype,"stopImmediatePropagation",c=>function(_,v){_[je]=!0,c&&c.apply(_,v)})}function mt(t,r,u,c,_){const v=Zone.__symbol__(c);if(r[v])return;const b=r[v]=r[c];r[c]=function(N,R,S){return R&&R.prototype&&_.forEach(function(O){const j=`${u}.${c}::`+O,U=R.prototype;if(U.hasOwnProperty(O)){const A=t.ObjectGetOwnPropertyDescriptor(U,O);A&&A.value?(A.value=t.wrapWithCurrentZone(A.value,j),t._redefineProperty(R.prototype,O,A)):U[O]&&(U[O]=t.wrapWithCurrentZone(U[O],j))}else U[O]&&(U[O]=t.wrapWithCurrentZone(U[O],j))}),b.call(r,N,R,S)},t.attachOriginToPatched(r[c],b)}const Et=["absolutedeviceorientation","afterinput","afterprint","appinstalled","beforeinstallprompt","beforeprint","beforeunload","devicelight","devicemotion","deviceorientation","deviceorientationabsolute","deviceproximity","hashchange","languagechange","message","mozbeforepaint","offline","online","paint","pageshow","pagehide","popstate","rejectionhandled","storage","unhandledrejection","unload","userproximity","vrdisplayconnected","vrdisplaydisconnected","vrdisplaypresentchange"],ne=["encrypted","waitingforkey","msneedkey","mozinterruptbegin","mozinterruptend"],me=["load"],Je=["blur","error","focus","load","resize","scroll","messageerror"],Se=["bounce","finish","start"],_t=["loadstart","progress","abort","error","load","progress","timeout","loadend","readystatechange"],Fe=["upgradeneeded","complete","abort","success","error","blocked","versionchange","close"],yt=["close","error","open","message"],Qe=["error","message"],ue=["abort","animationcancel","animationend","animationiteration","auxclick","beforeinput","blur","cancel","canplay","canplaythrough","change","compositionstart","compositionupdate","compositionend","cuechange","click","close","contextmenu","curechange","dblclick","drag","dragend","dragenter","dragexit","dragleave","dragover","drop","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","invalid","keydown","keypress","keyup","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","orientationchange","pause","play","playing","pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","mozpointerlockchange","webkitpointerlockerchange","pointerlockerror","mozpointerlockerror","webkitpointerlockerror","pointermove","pointout","pointerover","pointerup","progress","ratechange","reset","resize","scroll","seeked","seeking","select","selectionchange","selectstart","show","sort","stalled","submit","suspend","timeupdate","volumechange","touchcancel","touchmove","touchstart","touchend","transitioncancel","transitionend","waiting","wheel"].concat(["webglcontextrestored","webglcontextlost","webglcontextcreationerror"],["autocomplete","autocompleteerror"],["toggle"],["afterscriptexecute","beforescriptexecute","DOMContentLoaded","freeze","fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange","fullscreenerror","mozfullscreenerror","webkitfullscreenerror","msfullscreenerror","readystatechange","visibilitychange","resume"],Et,["beforecopy","beforecut","beforepaste","copy","cut","paste","dragstart","loadend","animationstart","search","transitionrun","transitionstart","webkitanimationend","webkitanimationiteration","webkitanimationstart","webkittransitionend"],["activate","afterupdate","ariarequest","beforeactivate","beforedeactivate","beforeeditfocus","beforeupdate","cellchange","controlselect","dataavailable","datasetchanged","datasetcomplete","errorupdate","filterchange","layoutcomplete","losecapture","move","moveend","movestart","propertychange","resizeend","resizestart","rowenter","rowexit","rowsdelete","rowsinserted","command","compassneedscalibration","deactivate","help","mscontentzoom","msmanipulationstatechanged","msgesturechange","msgesturedoubletap","msgestureend","msgesturehold","msgesturestart","msgesturetap","msgotpointercapture","msinertiastart","mslostpointercapture","mspointercancel","mspointerdown","mspointerenter","mspointerhover","mspointerleave","mspointermove","mspointerout","mspointerover","mspointerup","pointerout","mssitemodejumplistitemremoved","msthumbnailclick","stop","storagecommit"]);function it(t,r,u){if(!u||0===u.length)return r;const c=u.filter(v=>v.target===t);if(!c||0===c.length)return r;const _=c[0].ignoreProperties;return r.filter(v=>-1===_.indexOf(v))}function n(t,r,u,c){t&&Ke(t,it(t,r,u),c)}Zone.__load_patch("util",(t,r,u)=>{u.patchOnProperties=Ke,u.patchMethod=ge,u.bindArguments=lt,u.patchMacroTask=Ze;const c=r.__symbol__("BLACK_LISTED_EVENTS"),_=r.__symbol__("UNPATCHED_EVENTS");t[_]&&(t[c]=t[_]),t[c]&&(r[c]=r[_]=t[c]),u.patchEventPrototype=$e,u.patchEventTarget=le,u.isIEOrEdge=Le,u.ObjectDefineProperty=Ee,u.ObjectGetOwnPropertyDescriptor=se,u.ObjectCreate=bt,u.ArraySlice=st,u.patchClass=Ie,u.wrapWithCurrentZone=tt,u.filterProperties=it,u.attachOriginToPatched=Te,u._redefineProperty=Object.defineProperty,u.patchCallbacks=mt,u.getGlobalObjects=()=>({globalSources:He,zoneSymbolEventNames:ce,eventNames:ue,isBrowser:ht,isMix:nt,isNode:he,TRUE_STR:_e,FALSE_STR:De,ZONE_SYMBOL_PREFIX:Ue,ADD_EVENT_LISTENER_STR:et,REMOVE_EVENT_LISTENER_STR:ze})});const l=W("zoneTask");function E(t,r,u,c){let _=null,v=null;u+=c;const b={};function N(S){const O=S.data;return O.args[0]=function(){return S.invoke.apply(this,arguments)},O.handleId=_.apply(t,O.args),S}function R(S){return v.call(t,S.data.handleId)}_=ge(t,r+=c,S=>function(O,j){if("function"==typeof j[0]){const U={isPeriodic:"Interval"===c,delay:"Timeout"===c||"Interval"===c?j[1]||0:void 0,args:j},A=j[0];j[0]=function(){try{return A.apply(this,arguments)}finally{U.isPeriodic||("number"==typeof U.handleId?delete b[U.handleId]:U.handleId&&(U.handleId[l]=null))}};const J=at(r,j[0],U,N,R);if(!J)return J;const X=J.data.handleId;return"number"==typeof X?b[X]=J:X&&(X[l]=J),X&&X.ref&&X.unref&&"function"==typeof X.ref&&"function"==typeof X.unref&&(J.ref=X.ref.bind(X),J.unref=X.unref.bind(X)),"number"==typeof X||X?X:J}return S.apply(t,j)}),v=ge(t,u,S=>function(O,j){const U=j[0];let A;"number"==typeof U?A=b[U]:(A=U&&U[l],A||(A=U)),A&&"string"==typeof A.type?"notScheduled"!==A.state&&(A.cancelFn&&A.data.isPeriodic||0===A.runCount)&&("number"==typeof U?delete b[U]:U&&(U[l]=null),A.zone.cancelTask(A)):S.apply(t,j)})}Zone.__load_patch("legacy",t=>{const r=t[Zone.__symbol__("legacyPatch")];r&&r()}),Zone.__load_patch("queueMicrotask",(t,r,u)=>{u.patchMethod(t,"queueMicrotask",c=>function(_,v){r.current.scheduleMicroTask("queueMicrotask",v[0])})}),Zone.__load_patch("timers",t=>{const r="set",u="clear";E(t,r,u,"Timeout"),E(t,r,u,"Interval"),E(t,r,u,"Immediate")}),Zone.__load_patch("requestAnimationFrame",t=>{E(t,"request","cancel","AnimationFrame"),E(t,"mozRequest","mozCancel","AnimationFrame"),E(t,"webkitRequest","webkitCancel","AnimationFrame")}),Zone.__load_patch("blocking",(t,r)=>{const u=["alert","prompt","confirm"];for(let c=0;c<u.length;c++)ge(t,u[c],(v,b,N)=>function(R,S){return r.current.run(v,t,S,N)})}),Zone.__load_patch("EventTarget",(t,r,u)=>{(function g(t,r){r.patchEventPrototype(t,r)})(t,u),function m(t,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:u,zoneSymbolEventNames:c,TRUE_STR:_,FALSE_STR:v,ZONE_SYMBOL_PREFIX:b}=r.getGlobalObjects();for(let R=0;R<u.length;R++){const S=u[R],U=b+(S+v),A=b+(S+_);c[S]={},c[S][v]=U,c[S][_]=A}const N=t.EventTarget;N&&N.prototype&&r.patchEventTarget(t,[N&&N.prototype])}(t,u);const c=t.XMLHttpRequestEventTarget;c&&c.prototype&&u.patchEventTarget(t,[c.prototype])}),Zone.__load_patch("MutationObserver",(t,r,u)=>{Ie("MutationObserver"),Ie("WebKitMutationObserver")}),Zone.__load_patch("IntersectionObserver",(t,r,u)=>{Ie("IntersectionObserver")}),Zone.__load_patch("FileReader",(t,r,u)=>{Ie("FileReader")}),Zone.__load_patch("on_property",(t,r,u)=>{!function s(t,r){if(he&&!nt||Zone[t.symbol("patchEvents")])return;const u="undefined"!=typeof WebSocket,c=r.__Zone_ignore_on_properties;if(ht){const b=window,N=function Me(){try{const t=Oe.navigator.userAgent;if(-1!==t.indexOf("MSIE ")||-1!==t.indexOf("Trident/"))return!0}catch(t){}return!1}()?[{target:b,ignoreProperties:["error"]}]:[];n(b,ue.concat(["messageerror"]),c&&c.concat(N),Ae(b)),n(Document.prototype,ue,c),void 0!==b.SVGElement&&n(b.SVGElement.prototype,ue,c),n(Element.prototype,ue,c),n(HTMLElement.prototype,ue,c),n(HTMLMediaElement.prototype,ne,c),n(HTMLFrameSetElement.prototype,Et.concat(Je),c),n(HTMLBodyElement.prototype,Et.concat(Je),c),n(HTMLFrameElement.prototype,me,c),n(HTMLIFrameElement.prototype,me,c);const R=b.HTMLMarqueeElement;R&&n(R.prototype,Se,c);const S=b.Worker;S&&n(S.prototype,Qe,c)}const _=r.XMLHttpRequest;_&&n(_.prototype,_t,c);const v=r.XMLHttpRequestEventTarget;v&&n(v&&v.prototype,_t,c),"undefined"!=typeof IDBIndex&&(n(IDBIndex.prototype,Fe,c),n(IDBRequest.prototype,Fe,c),n(IDBOpenDBRequest.prototype,Fe,c),n(IDBDatabase.prototype,Fe,c),n(IDBTransaction.prototype,Fe,c),n(IDBCursor.prototype,Fe,c)),u&&n(WebSocket.prototype,yt,c)}(u,t)}),Zone.__load_patch("customElements",(t,r,u)=>{!function f(t,r){const{isBrowser:u,isMix:c}=r.getGlobalObjects();(u||c)&&t.customElements&&"customElements"in t&&r.patchCallbacks(r,t.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback"])}(t,u)}),Zone.__load_patch("XHR",(t,r)=>{!function R(S){const O=S.XMLHttpRequest;if(!O)return;const j=O.prototype;let A=j[xe],J=j[qe];if(!A){const I=S.XMLHttpRequestEventTarget;if(I){const z=I.prototype;A=z[xe],J=z[qe]}}const X="readystatechange",H="scheduled";function C(I){const z=I.data,Z=z.target;Z[v]=!1,Z[N]=!1;const we=Z[_];A||(A=Z[xe],J=Z[qe]),we&&J.call(Z,X,we);const We=Z[_]=()=>{if(Z.readyState===Z.DONE)if(!z.aborted&&Z[v]&&I.state===H){const Ne=Z[r.__symbol__("loadfalse")];if(0!==Z.status&&Ne&&Ne.length>0){const Re=I.invoke;I.invoke=function(){const re=Z[r.__symbol__("loadfalse")];for(let V=0;V<re.length;V++)re[V]===I&&re.splice(V,1);!z.aborted&&I.state===H&&Re.call(I)},Ne.push(I)}else I.invoke()}else!z.aborted&&!1===Z[v]&&(Z[N]=!0)};return A.call(Z,X,We),Z[u]||(Z[u]=I),Y.apply(Z,z.args),Z[v]=!0,I}function G(){}function Q(I){const z=I.data;return z.aborted=!0,ae.apply(z.target,z.args)}const $=ge(j,"open",()=>function(I,z){return I[c]=0==z[2],I[b]=z[1],$.apply(I,z)}),x=W("fetchTaskAborting"),fe=W("fetchTaskScheduling"),Y=ge(j,"send",()=>function(I,z){if(!0===r.current[fe]||I[c])return Y.apply(I,z);{const Z={target:I,url:I[b],isPeriodic:!1,args:z,aborted:!1},we=at("XMLHttpRequest.send",G,Z,C,Q);I&&!0===I[N]&&!Z.aborted&&we.state===H&&we.invoke()}}),ae=ge(j,"abort",()=>function(I,z){const Z=function U(I){return I[u]}(I);if(Z&&"string"==typeof Z.type){if(null==Z.cancelFn||Z.data&&Z.data.aborted)return;Z.zone.cancelTask(Z)}else if(!0===r.current[x])return ae.apply(I,z)})}(t);const u=W("xhrTask"),c=W("xhrSync"),_=W("xhrListener"),v=W("xhrScheduled"),b=W("xhrURL"),N=W("xhrErrorBeforeScheduled")}),Zone.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&function ut(t,r){const u=t.constructor.name;for(let c=0;c<r.length;c++){const _=r[c],v=t[_];if(v){if(!ft(se(t,_)))continue;t[_]=(N=>{const R=function(){return N.apply(this,lt(arguments,u+"."+_))};return Te(R,N),R})(v)}}}(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),Zone.__load_patch("PromiseRejectionEvent",(t,r)=>{function u(c){return function(_){Pe(t,c).forEach(b=>{const N=t.PromiseRejectionEvent;if(N){const R=new N(c,{promise:_.promise,reason:_.rejection});b.invoke(R)}})}}t.PromiseRejectionEvent&&(r[W("unhandledPromiseRejectionHandler")]=u("unhandledrejection"),r[W("rejectionHandledHandler")]=u("rejectionhandled"))})}},q=>{q(q.s=7435)}]);
(()=>{"use strict";var e,b={},m={};function r(e){var n=m[e];if(void 0!==n)return n.exports;var t=m[e]={exports:{}};return b[e](t,t.exports,r),t.exports}r.m=b,r.amdO={},e=[],r.O=(n,t,o,u)=>{if(!t){var a=1/0;for(i=0;i<e.length;i++){for(var[t,o,u]=e[i],s=!0,f=0;f<t.length;f++)(!1&u||a>=u)&&Object.keys(r.O).every(v=>r.O[v](t[f]))?t.splice(f--,1):(s=!1,u<a&&(a=u));if(s){e.splice(i--,1);var d=o();void 0!==d&&(n=d)}}return n}u=u||0;for(var i=e.length;i>0&&e[i-1][2]>u;i--)e[i]=e[i-1];e[i]=[t,o,u]},r.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return r.d(n,{a:n}),n},r.d=(e,n)=>{for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce((n,t)=>(r.f[t](e,n),n),[])),r.u=e=>(592===e?"common":e)+".js",r.miniCssF=e=>{},r.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={},n="app:";r.l=(t,o,u,i)=>{if(e[t])e[t].push(o);else{var a,s;if(void 0!==u)for(var f=document.getElementsByTagName("script"),d=0;d<f.length;d++){var l=f[d];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==n+u){a=l;break}}a||(s=!0,(a=document.createElement("script")).type="module",a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",n+u),a.src=r.tu(t)),e[t]=[o];var c=(g,v)=>{a.onerror=a.onload=null,clearTimeout(p);var _=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),_&&_.forEach(h=>h(v)),g)return g(v)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=c.bind(null,a.onerror),a.onload=c.bind(null,a.onload),s&&document.head.appendChild(a)}}})(),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;r.tt=()=>(void 0===e&&(e={createScriptURL:n=>n},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(e=trustedTypes.createPolicy("angular#bundler",e))),e)})(),r.tu=e=>r.tt().createScriptURL(e),r.p="",(()=>{var e={666:0};r.f.j=(o,u)=>{var i=r.o(e,o)?e[o]:void 0;if(0!==i)if(i)u.push(i[2]);else if(666!=o){var a=new Promise((l,c)=>i=e[o]=[l,c]);u.push(i[2]=a);var s=r.p+r.u(o),f=new Error;r.l(s,l=>{if(r.o(e,o)&&(0!==(i=e[o])&&(e[o]=void 0),i)){var c=l&&("load"===l.type?"missing":l.type),p=l&&l.target&&l.target.src;f.message="Loading chunk "+o+" failed.\n("+c+": "+p+")",f.name="ChunkLoadError",f.type=c,f.request=p,i[1](f)}},"chunk-"+o,o)}else e[o]=0},r.O.j=o=>0===e[o];var n=(o,u)=>{var f,d,[i,a,s]=u,l=0;if(i.some(p=>0!==e[p])){for(f in a)r.o(a,f)&&(r.m[f]=a[f]);if(s)var c=s(r)}for(o&&o(u);l<i.length;l++)r.o(e,d=i[l])&&e[d]&&e[d][0](),e[d]=0;return r.O(c)},t=self.webpackChunkapp=self.webpackChunkapp||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})()})();
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[592],{1827:(E,_,o)=>{o.d(_,{C:()=>s});var l=o(9808),n=o(2382),d=o(5782),t=o(4893);let s=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[],imports:[[l.ez,n.u5,d.m,n.UX]]}),a})()},5228:(E,_,o)=>{o.d(_,{o:()=>a});var l=o(9808),n=o(2382),d=o(5782),t=o(3060),s=o(4893);let a=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,n.u5,d.m,n.UX,t.G]]}),e})()},1055:(E,_,o)=>{o.d(_,{Y:()=>s});var l=o(9808),n=o(2382),d=o(5782),t=o(4893);let s=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,n.u5,d.m,n.UX]]}),a})()},5563:(E,_,o)=>{o.d(_,{U:()=>a});var l=o(9808),n=o(2382),d=o(8490),t=o(5782),s=o(4893);let a=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,n.u5,n.UX,t.m,d.e]]}),e})()},8490:(E,_,o)=>{o.d(_,{e:()=>L});var l=o(9808),n=o(2382),d=o(5782),t=o(7200),s=o(3060),a=o(4893);let e=(()=>{class M{}return M.\u0275fac=function(g){return new(g||M)},M.\u0275mod=a.oAB({type:M}),M.\u0275inj=a.cJS({imports:[[l.ez,n.u5,d.m,n.UX,s.G]]}),M})(),u=(()=>{class M{}return M.\u0275fac=function(g){return new(g||M)},M.\u0275mod=a.oAB({type:M}),M.\u0275inj=a.cJS({imports:[[l.ez,n.u5,d.m,n.UX,s.G]]}),M})();var r=o(6407),c=o(1827);let L=(()=>{class M{}return M.\u0275fac=function(g){return new(g||M)},M.\u0275mod=a.oAB({type:M}),M.\u0275inj=a.cJS({imports:[[l.ez,n.u5,d.m,n.UX,t.L,e,u,r.I,c.C]]}),M})()},3606:(E,_,o)=>{o.r(_),o.d(_,{HorizontalItemListPageModule:()=>a});var l=o(9808),n=o(2382),d=o(3607),t=o(5782),s=o(4893);let a=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,n.u5,d.U,t.m,n.UX]]}),e})()},9461:(E,_,o)=>{o.d(_,{X:()=>v});var l=o(9808),n=o(2382),d=o(5782),t=o(7200),s=o(4236),a=o(5563),e=o(6407),u=o(1827),r=o(4893);let c=(()=>{class m{}return m.\u0275fac=function(O){return new(O||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[l.ez,n.u5,n.UX,d.m,a.U,t.L,s.p,e.I,u.C]]}),m})();var L=o(3060);let M=(()=>{class m{}return m.\u0275fac=function(O){return new(O||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[l.ez,n.u5,d.m,n.UX,L.G]]}),m})();var P=o(8490);let g=(()=>{class m{}return m.\u0275fac=function(O){return new(O||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[l.ez,n.u5,n.UX,d.m,P.e,c]]}),m})(),v=(()=>{class m{}return m.\u0275fac=function(O){return new(O||m)},m.\u0275mod=r.oAB({type:m}),m.\u0275inj=r.cJS({imports:[[l.ez,n.u5,n.UX,d.m,c,t.L,M,g,e.I,u.C]]}),m})()},413:(E,_,o)=>{o.r(_),o.d(_,{ItemViewPageModule:()=>s});var l=o(9808),n=o(2382),d=o(5782),t=o(4893);let s=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,n.u5,d.m,n.UX]]}),a})()},7200:(E,_,o)=>{o.d(_,{L:()=>s});var l=o(9808),n=o(2382),d=o(5782),t=o(4893);let s=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,n.u5,d.m,n.UX]]}),a})()},4236:(E,_,o)=>{o.d(_,{p:()=>a});var l=o(9808),n=o(2382),d=o(5782),t=o(3060),s=o(4893);let a=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,n.u5,d.m,n.UX,t.G]]}),e})()},7588:(E,_,o)=>{o.d(_,{$:()=>s});var l=o(9808),n=o(2382),d=o(5782),t=o(4893);let s=(()=>{class a{}return a.\u0275fac=function(u){return new(u||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,n.u5,d.m,n.UX]]}),a})()},6840:(E,_,o)=>{o.d(_,{S:()=>a});var l=o(9808),n=o(2382),d=o(3607),t=o(5782),s=o(4893);let a=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,n.u5,d.U,t.m,n.UX]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[31],{8031:(E,u,c)=>{c.r(u),c.d(u,{RegisterAcccountPageModule:()=>s});var e=c(9808),a=c(2382),t=c(5782),n=c(4893);let s=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[e.ez,a.u5,t.m,a.UX]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[107],{107:(_,n,o)=>{o.r(n),o.d(n,{LoginPageModule:()=>P});var E=o(9808),u=o(2382),M=o(5782),l=o(4893);let P=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=l.oAB({type:a}),a.\u0275inj=l.cJS({imports:[[E.ez,u.u5,M.m,u.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[115],{9115:(d,a,n)=>{n.r(a),n.d(a,{GenreListPageModule:()=>M});var E=n(9808),o=n(2382),e=n(5782),s=n(7200),u=n(1827),t=n(4893);let M=(()=>{class _{}return _.\u0275fac=function(l){return new(l||_)},_.\u0275mod=t.oAB({type:_}),_.\u0275inj=t.cJS({providers:[],imports:[[E.ez,o.u5,o.UX,e.m,s.L,u.C]]}),_})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[132],{8132:(P,l,o)=>{o.r(l),o.d(l,{TvSeriesPageModule:()=>u});var s=o(9808),_=o(2382),t=o(5782),n=o(3606),e=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(M){return new(M||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[s.ez,_.u5,_.UX,t.m,n.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[135],{5135:(d,s,_)=>{_.r(s),_.d(s,{ServerSettingsGeneralPageModule:()=>u});var t=_(9808),o=_(2382),r=_(1055),l=_(5782),n=_(7588),E=_(5228),a=_(4893);let u=(()=>{class e{}return e.\u0275fac=function(P){return new(P||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[[t.ez,o.u5,r.Y,n.$,l.m,o.UX,E.o]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[144],{6144:(P,_,s)=>{s.r(_),s.d(_,{TranscoderSettingssPageModule:()=>l});var d=s(9808),a=s(2382),n=s(1055),E=s(5782),e=s(7588),r=s(5228),t=s(4893);let l=(()=>{class o{}return o.\u0275fac=function(M){return new(M||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,a.u5,n.Y,e.$,E.m,a.UX,r.o]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[163],{6163:(e,_,o)=>{o.r(_),o.d(_,{MovieListPageModule:()=>u});var l=o(9808),a=o(2382),t=o(5782),E=o(9461),s=o(4893);let u=(()=>{class M{}return M.\u0275fac=function(n){return new(n||M)},M.\u0275mod=s.oAB({type:M}),M.\u0275inj=s.cJS({imports:[[l.ez,a.u5,a.UX,t.m,E.X]]}),M})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[185],{5185:(E,s,o)=>{o.r(s),o.d(s,{RecoverPasswordPageModule:()=>u});var P=o(9808),e=o(2382),d=o(5782),r=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=r.oAB({type:a}),a.\u0275inj=r.cJS({imports:[[P.ez,e.u5,d.m,e.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[191],{8191:(P,l,o)=>{o.r(l),o.d(l,{ManageMediaPageModule:()=>f});var s=o(9808),a=o(2382),m=o(1055),r=o(5782),d=o(6292),t=o(4893);let g=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,a.u5,m.Y,r.m,a.UX,d.IJ]]}),e})();var M=o(3060);let c=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,a.u5,r.m,a.UX,M.G]]}),e})(),i=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,a.u5,r.m,a.UX,M.G]]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(u){return new(u||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.ez,a.u5,m.Y,r.m,a.UX,d.IJ,g,c,i]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[200],{6200:(p,m,t)=>{t.r(m),t.d(m,{MainTvPageModule:()=>c});var d=t(9808),e=t(2382),v=t(7979),s=t(5782),i=t(8348),u=t(4522),h=t(3607),n=t(4893);let r=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[d.ez,e.u5,e.UX,s.m]]}),o})(),P=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[d.ez,e.u5,e.UX,s.m,r]]}),o})(),g=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[d.ez,e.u5,s.m,e.UX,P]]}),o})();var M=t(1511),f=t(5905);const T=[{path:"hilp",component:u.j,outlet:"rohtp",loadChildren:()=>t.e(592).then(t.bind(t,3606)).then(o=>o.HorizontalItemListPageModule)},{path:"svtp",component:f.c,outlet:"rohtp",loadChildren:()=>Promise.all([t.e(592),t.e(479)]).then(t.bind(t,7479)).then(o=>o.SearchViewTvPageModule)},{path:"ivp",component:i.e,outlet:"rohtp",loadChildren:()=>t.e(592).then(t.bind(t,413)).then(o=>o.ItemViewPageModule)}];let c=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[d.ez,e.u5,h.U,e.UX,s.m,g,M.g,v.Bz.forChild(T)]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[219],{3219:(e,a,o)=>{o.r(a),o.d(a,{RoleListPageModule:()=>M});var t=o(9808),n=o(2382),E=o(5782),s=o(7200),u=o(1827),l=o(4893);let M=(()=>{class _{}return _.\u0275fac=function(d){return new(d||_)},_.\u0275mod=l.oAB({type:_}),_.\u0275inj=l.cJS({providers:[],imports:[[t.ez,n.u5,n.UX,E.m,s.L,u.C]]}),_})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[221],{5221:(n,l,e)=>{e.r(l),e.d(l,{TvSerieDetailPageModule:()=>M});var t=e(9808),_=e(2382),u=e(5782),E=e(413),o=e(4893);let M=(()=>{class a{}return a.\u0275fac=function(D){return new(D||a)},a.\u0275mod=o.oAB({type:a}),a.\u0275inj=o.cJS({imports:[[t.ez,_.u5,u.m,_.UX,E.ItemViewPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[278],{5278:(i,l,o)=>{o.r(l),o.d(l,{SearchViewRootPageModule:()=>s});var u=o(9808),a=o(2382),c=o(5782),m=o(6840),t=o(4893);let r=(()=>{class e{}return e.\u0275fac=function(d){return new(d||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,a.u5,c.m,a.UX,m.S]]}),e})(),s=(()=>{class e{}return e.\u0275fac=function(d){return new(d||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,a.u5,c.m,a.UX,r]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[321],{4321:(f,s,e)=>{e.r(s),e.d(s,{MenuListPageModule:()=>c});var a=e(9808),n=e(2382),d=e(5782),l=e(7200),M=e(1827),r=e(3060),u=e(4893);let g=(()=>{class o{}return o.\u0275fac=function(m){return new(m||o)},o.\u0275mod=u.oAB({type:o}),o.\u0275inj=u.cJS({imports:[[a.ez,n.u5,d.m,n.UX,r.G]]}),o})(),c=(()=>{class o{}return o.\u0275fac=function(m){return new(m||o)},o.\u0275mod=u.oAB({type:o}),o.\u0275inj=u.cJS({providers:[],imports:[[a.ez,n.u5,n.UX,d.m,l.L,M.C,g]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[333],{7333:(L,n,o)=>{o.r(n),o.d(n,{UserListPageModule:()=>g});var l=o(9808),a=o(2382),r=o(5782),m=o(7200),u=o(1827),i=o(4236),M=o(5563),v=o(6407),s=o(4893);let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,a.u5,a.UX,r.m,M.U,m.L,i.p,v.I,u.C]]}),e})(),f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[l.ez,a.u5,a.UX,r.m,c]]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[],imports:[[l.ez,a.u5,a.UX,r.m,m.L,u.C,f]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[340],{7340:(m,t,e)=>{e.r(t),e.d(t,{AccountPageModule:()=>r});var c=e(9808),a=e(2382),d=e(5782),n=e(4893);let l=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[c.ez,a.u5,d.m,a.UX]]}),o})(),r=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[[c.ez,a.u5,d.m,a.UX,l]]}),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[371],{4371:(t,o,s)=>{s.r(o),s.d(o,{ResetPasswordPageModule:()=>l});var d=s(9808),e=s(2382),u=s(5782),P=s(4893);let l=(()=>{class a{}return a.\u0275fac=function(r){return new(r||a)},a.\u0275mod=P.oAB({type:a}),a.\u0275inj=P.cJS({imports:[[d.ez,e.u5,u.m,e.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[460],{7460:(_,n,o)=>{o.r(n),o.d(n,{LoginTvPageModule:()=>P});var E=o(9808),u=o(2382),M=o(5782),l=o(4893);let P=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=l.oAB({type:a}),a.\u0275inj=l.cJS({imports:[[E.ez,u.u5,M.m,u.UX]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[467],{3467:(P,l,o)=>{o.r(l),o.d(l,{HomePageModule:()=>u});var m=o(9808),_=o(2382),n=o(5782),e=o(3606),t=o(4893);let u=(()=>{class a{}return a.\u0275fac=function(M){return new(M||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[m.ez,_.u5,_.UX,n.m,e.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[479],{7479:(f,u,o)=>{o.r(u),o.d(u,{SearchViewTvPageModule:()=>c});var n=o(9808),a=o(2382),r=o(5782),m=o(6840),s=o(3607),d=o(4893);let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,a.u5,s.U,r.m,a.UX]]}),e})(),c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[n.ez,a.u5,r.m,a.UX,m.S,v]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[686],{686:(n,o,a)=>{a.r(o),a.d(o,{MovieDetailPageModule:()=>E});var _=a(9808),l=a(2382),t=a(5782),u=a(413),M=a(4893);let E=(()=>{class e{}return e.\u0275fac=function(D){return new(D||e)},e.\u0275mod=M.oAB({type:e}),e.\u0275inj=M.cJS({imports:[[_.ez,l.u5,t.m,l.UX,u.ItemViewPageModule]]}),e})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[695],{4695:(n,s,_)=>{_.r(s),_.d(s,{TvSerieListPageModule:()=>u});var t=_(9808),e=_(2382),o=_(5782),E=_(9461),l=_(4893);let u=(()=>{class a{}return a.\u0275fac=function(P){return new(P||a)},a.\u0275mod=l.oAB({type:a}),a.\u0275inj=l.cJS({imports:[[t.ez,e.u5,e.UX,o.m,E.X]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[721],{8721:(s,d,a)=>{a.r(d),a.d(d,{LandingPageModule:()=>M});var l=a(9808),o=a(2382),E=a(5782),u=a(4893);let M=(()=>{class n{}return n.\u0275fac=function(g){return new(g||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[l.ez,o.u5,E.m,o.UX]]}),n})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[832],{1832:(P,l,o)=>{o.r(l),o.d(l,{MoviesPageModule:()=>e});var s=o(9808),_=o(2382),t=o(5782),n=o(3606),M=o(4893);let e=(()=>{class a{}return a.\u0275fac=function(E){return new(E||a)},a.\u0275mod=M.oAB({type:a}),a.\u0275inj=M.cJS({imports:[[s.ez,_.u5,_.UX,t.m,n.HorizontalItemListPageModule]]}),a})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[867],{2867:(s,a,o)=>{o.r(a),o.d(a,{NotFoundPageModule:()=>E});var l=o(9808),n=o(2382),t=o(5782),d=o(4893);let E=(()=>{class u{}return u.\u0275fac=function(P){return new(P||u)},u.\u0275mod=d.oAB({type:u}),u.\u0275inj=d.cJS({imports:[[l.ez,n.u5,t.m,n.UX]]}),u})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[994],{2994:(s,l,a)=>{a.r(l),a.d(l,{ConfirmEmailPageModule:()=>r});var E=a(9808),n=a(2382),u=a(5782),m=a(4893);let r=(()=>{class o{}return o.\u0275fac=function(P){return new(P||o)},o.\u0275mod=m.oAB({type:o}),o.\u0275inj=m.cJS({imports:[[E.ez,n.u5,u.m,n.UX]]}),o})()}}]);